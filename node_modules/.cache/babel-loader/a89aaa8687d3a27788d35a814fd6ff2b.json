{"ast":null,"code":"import _objectWithoutProperties from \"/Users/graham_bates/Documents/Dev/procdemo2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _createForOfIteratorHelper from \"/Users/graham_bates/Documents/Dev/procdemo2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";\nimport _classCallCheck from \"/Users/graham_bates/Documents/Dev/procdemo2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/graham_bates/Documents/Dev/procdemo2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/graham_bates/Documents/Dev/procdemo2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/Users/graham_bates/Documents/Dev/procdemo2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport Procedural from 'procedural-gl';\nimport React from 'react';\nvar SUPPORTED_SETTERS = ['displayLocation', 'setCameraMode', 'setCameraModeControlVisible', 'setCompassVisible', 'setEnvironment', 'setLayersControlVisible', 'setRotationControlVisible', 'setUserLocation', 'setUserLocationControlVisible', 'setZoomControlVisible'];\nvar SUPPORTED_CALLBACKS = ['onBoundsFocused', 'onCameraChange', 'onFeatureClicked', 'onFeatureSelected', 'onFeaturesLoaded', 'onLocationError', 'onLocationFocused', 'onLocationLoaded', 'onOverlayAdded', 'onUserInteraction'];\nvar SUPPORTED_METHODS = ['addOverlay', 'focusOnBounds', 'focusOnFeature', 'focusOnLocation', 'highlightFeature', 'orbitTarget', 'pause', 'play', 'removeOverlay', 'toggleUserLocationTracking', 'updateOverlay'];\n\nvar ProceduralMap = /*#__PURE__*/function (_React$Component) {\n  _inherits(ProceduralMap, _React$Component);\n\n  var _super = _createSuper(ProceduralMap);\n\n  function ProceduralMap(props) {\n    var _this;\n\n    _classCallCheck(this, ProceduralMap);\n\n    _this = _super.call(this, props);\n\n    if (typeof Procedural === 'undefined') {\n      window.Procedural = {};\n    }\n\n    _this.generateMethods();\n\n    return _this;\n  }\n\n  _createClass(ProceduralMap, [{\n    key: \"proxyProps\",\n    value: function proxyProps(nextProps, force) {\n      // Support invoking of methods using props\n      var _iterator = _createForOfIteratorHelper(SUPPORTED_SETTERS),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var setter = _step.value;\n          var prop = setter;\n\n          if (setter.slice(0, 3) === 'set') {\n            prop = setter.slice(3);\n            prop = prop.charAt(0).toLowerCase() + prop.slice(1);\n          }\n\n          if (nextProps[prop] !== this.props[prop] || force && nextProps[prop] !== undefined) {\n            var value = nextProps[prop];\n            Procedural[setter](value);\n          }\n        } // Support proxying handlers via props\n\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      var _iterator2 = _createForOfIteratorHelper(SUPPORTED_CALLBACKS),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var callback = _step2.value;\n\n          if (nextProps[callback] !== Procedural[callback] && typeof nextProps[callback] === 'function') {\n            Procedural[callback] = nextProps[callback];\n          }\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n    }\n  }, {\n    key: \"generateMethods\",\n    value: function generateMethods() {\n      var _this2 = this;\n\n      var _iterator3 = _createForOfIteratorHelper(SUPPORTED_METHODS),\n          _step3;\n\n      try {\n        var _loop = function _loop() {\n          var method = _step3.value;\n\n          _this2[method] = function () {\n            Procedural[method].apply(Procedural, arguments);\n          };\n        };\n\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          _loop();\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this$props = this.props,\n          datasource = _this$props.datasource,\n          props = _objectWithoutProperties(_this$props, [\"datasource\"]);\n\n      this.proxyProps(props, true);\n      Procedural.init({\n        container: this.el,\n        datasource: datasource\n      });\n    }\n  }, {\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps) {\n      // Pass through props to Procedural lib\n      this.proxyProps(nextProps); // Never trigger a React update\n\n      return false;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement('div', {\n        ref: function ref(el) {\n          return _this3.el = el;\n        },\n        style: {\n          height: '100%',\n          width: '100%'\n        }\n      });\n    }\n  }]);\n\n  return ProceduralMap;\n}(React.Component);\n\nexport default ProceduralMap;","map":{"version":3,"sources":["/Users/graham_bates/Documents/Dev/procdemo2/node_modules/procedural-gl-react/build/procedural-gl-react.module.js"],"names":["Procedural","React","SUPPORTED_SETTERS","SUPPORTED_CALLBACKS","SUPPORTED_METHODS","ProceduralMap","props","window","generateMethods","nextProps","force","setter","prop","slice","charAt","toLowerCase","undefined","value","callback","method","datasource","proxyProps","init","container","el","createElement","ref","style","height","width","Component"],"mappings":";;;;;;AAAA,OAAOA,UAAP,MAAuB,eAAvB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,IAAMC,iBAAiB,GAAG,CACxB,iBADwB,EAExB,eAFwB,EAGxB,6BAHwB,EAIxB,mBAJwB,EAKxB,gBALwB,EAMxB,yBANwB,EAOxB,2BAPwB,EAQxB,iBARwB,EASxB,+BATwB,EAUxB,uBAVwB,CAA1B;AAaA,IAAMC,mBAAmB,GAAG,CAC1B,iBAD0B,EAE1B,gBAF0B,EAG1B,kBAH0B,EAI1B,mBAJ0B,EAK1B,kBAL0B,EAM1B,iBAN0B,EAO1B,mBAP0B,EAQ1B,kBAR0B,EAS1B,gBAT0B,EAU1B,mBAV0B,CAA5B;AAaA,IAAMC,iBAAiB,GAAG,CACxB,YADwB,EAExB,eAFwB,EAGxB,gBAHwB,EAIxB,iBAJwB,EAKxB,kBALwB,EAMxB,aANwB,EAOxB,OAPwB,EAQxB,MARwB,EASxB,eATwB,EAUxB,4BAVwB,EAWxB,eAXwB,CAA1B;;IAcMC,a;;;;;AACJ,yBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,8BAAMA,KAAN;;AACA,QAAK,OAAON,UAAP,KAAsB,WAA3B,EAAyC;AACvCO,MAAAA,MAAM,CAACP,UAAP,GAAoB,EAApB;AACD;;AACD,UAAKQ,eAAL;;AALiB;AAMlB;;;;WAED,oBAAYC,SAAZ,EAAuBC,KAAvB,EAA+B;AAC7B;AAD6B,iDAETR,iBAFS;AAAA;;AAAA;AAE7B,4DAAwC;AAAA,cAA9BS,MAA8B;AACtC,cAAIC,IAAI,GAAGD,MAAX;;AACA,cAAKA,MAAM,CAACE,KAAP,CAAa,CAAb,EAAgB,CAAhB,MAAuB,KAA5B,EAAoC;AAClCD,YAAAA,IAAI,GAAGD,MAAM,CAACE,KAAP,CAAa,CAAb,CAAP;AACAD,YAAAA,IAAI,GAAGA,IAAI,CAACE,MAAL,CAAa,CAAb,EAAiBC,WAAjB,KAAiCH,IAAI,CAACC,KAAL,CAAW,CAAX,CAAxC;AACD;;AAED,cAAKJ,SAAS,CAACG,IAAD,CAAT,KAAoB,KAAKN,KAAL,CAAWM,IAAX,CAApB,IACEF,KAAK,IAAID,SAAS,CAACG,IAAD,CAAT,KAAoBI,SADpC,EACkD;AAChD,gBAAMC,KAAK,GAAGR,SAAS,CAACG,IAAD,CAAvB;AACAZ,YAAAA,UAAU,CAACW,MAAD,CAAV,CAAmBM,KAAnB;AACD;AACF,SAd4B,CAgB7B;;AAhB6B;AAAA;AAAA;AAAA;AAAA;;AAAA,kDAiBPd,mBAjBO;AAAA;;AAAA;AAiB7B,+DAA4C;AAAA,cAAlCe,QAAkC;;AAC1C,cAAKT,SAAS,CAACS,QAAD,CAAT,KAAwBlB,UAAU,CAACkB,QAAD,CAAlC,IACA,OAAOT,SAAS,CAACS,QAAD,CAAhB,KAAgC,UADrC,EACkD;AAChDlB,YAAAA,UAAU,CAACkB,QAAD,CAAV,GAAuBT,SAAS,CAACS,QAAD,CAAhC;AACD;AACF;AAtB4B;AAAA;AAAA;AAAA;AAAA;AAuB9B;;;WAED,2BAAkB;AAAA;;AAAA,kDACId,iBADJ;AAAA;;AAAA;AAAA;AAAA,cACNe,MADM;;AAEd,UAAA,MAAI,CAACA,MAAD,CAAJ,GAAe,YAAa;AAC1BnB,YAAAA,UAAU,CAACmB,MAAD,CAAV,OAAAnB,UAAU,YAAV;AACD,WAFD;AAFc;;AAChB,+DAAwC;AAAA;AAIvC;AALe;AAAA;AAAA;AAAA;AAAA;AAMjB;;;WAED,6BAAoB;AAAA,wBACa,KAAKM,KADlB;AAAA,UACXc,UADW,eACXA,UADW;AAAA,UACId,KADJ;;AAElB,WAAKe,UAAL,CAAiBf,KAAjB,EAAwB,IAAxB;AACAN,MAAAA,UAAU,CAACsB,IAAX,CAAiB;AACfC,QAAAA,SAAS,EAAE,KAAKC,EADD;AACKJ,QAAAA,UAAU,EAAVA;AADL,OAAjB;AAGD;;;WAED,+BAAuBX,SAAvB,EAAmC;AACjC;AACA,WAAKY,UAAL,CAAiBZ,SAAjB,EAFiC,CAIjC;;AACA,aAAO,KAAP;AACD;;;WAED,kBAAS;AAAA;;AACP,aAAOR,KAAK,CAACwB,aAAN,CAAqB,KAArB,EAA4B;AACjCC,QAAAA,GAAG,EAAE,aAAAF,EAAE;AAAA,iBAAI,MAAI,CAACA,EAAL,GAAUA,EAAd;AAAA,SAD0B;AAEjCG,QAAAA,KAAK,EAAE;AAAEC,UAAAA,MAAM,EAAE,MAAV;AAAkBC,UAAAA,KAAK,EAAE;AAAzB;AAF0B,OAA5B,CAAP;AAID;;;;EA/DyB5B,KAAK,CAAC6B,S;;AAkElC,eAAezB,aAAf","sourcesContent":["import Procedural from 'procedural-gl';\nimport React from 'react';\n\nconst SUPPORTED_SETTERS = [\n  'displayLocation',\n  'setCameraMode',\n  'setCameraModeControlVisible',\n  'setCompassVisible',\n  'setEnvironment',\n  'setLayersControlVisible',\n  'setRotationControlVisible',\n  'setUserLocation',\n  'setUserLocationControlVisible',\n  'setZoomControlVisible'\n];\n\nconst SUPPORTED_CALLBACKS = [\n  'onBoundsFocused',\n  'onCameraChange',\n  'onFeatureClicked',\n  'onFeatureSelected',\n  'onFeaturesLoaded',\n  'onLocationError',\n  'onLocationFocused',\n  'onLocationLoaded',\n  'onOverlayAdded',\n  'onUserInteraction'\n];\n\nconst SUPPORTED_METHODS = [\n  'addOverlay',\n  'focusOnBounds',\n  'focusOnFeature',\n  'focusOnLocation',\n  'highlightFeature',\n  'orbitTarget',\n  'pause',\n  'play',\n  'removeOverlay',\n  'toggleUserLocationTracking',\n  'updateOverlay'\n];\n\nclass ProceduralMap extends React.Component {\n  constructor(props) {\n    super(props);\n    if ( typeof Procedural === 'undefined' ) {\n      window.Procedural = {};\n    }\n    this.generateMethods();\n  }\n\n  proxyProps( nextProps, force ) {\n    // Support invoking of methods using props\n    for ( let setter of SUPPORTED_SETTERS ) {\n      let prop = setter;\n      if ( setter.slice(0, 3) === 'set' ) {\n        prop = setter.slice(3);\n        prop = prop.charAt( 0 ).toLowerCase() + prop.slice(1);\n      }\n\n      if ( nextProps[prop] !== this.props[prop] ||\n           ( force && nextProps[prop] !== undefined ) ) {\n        const value = nextProps[prop];\n        Procedural[setter](value);\n      }\n    }\n\n    // Support proxying handlers via props\n    for ( let callback of SUPPORTED_CALLBACKS ) {\n      if ( nextProps[callback] !== Procedural[callback] &&\n           typeof(nextProps[callback]) === 'function' ) {\n        Procedural[callback] = nextProps[callback];\n      }\n    }\n  }\n\n  generateMethods() {\n    for ( let method of SUPPORTED_METHODS ) {\n      this[method] = (...args) => {\n        Procedural[method](...args);\n      };\n    }\n  }\n\n  componentDidMount() {\n    const {datasource, ...props} = this.props;\n    this.proxyProps( props, true );\n    Procedural.init( {\n      container: this.el, datasource\n    } );\n  }\n\n  shouldComponentUpdate( nextProps ) {\n    // Pass through props to Procedural lib\n    this.proxyProps( nextProps );\n\n    // Never trigger a React update\n    return false;\n  }\n\n  render() {\n    return React.createElement( 'div', {\n      ref: el => this.el = el,\n      style: { height: '100%', width: '100%' }\n    } );\n  }\n}\n\nexport default ProceduralMap;\n"]},"metadata":{},"sourceType":"module"}