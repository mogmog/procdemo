{"ast":null,"code":"var commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\nfunction unwrapExports(x) {\n  return x && x.__esModule && Object.prototype.hasOwnProperty.call(x, 'default') ? x['default'] : x;\n}\n\nfunction createCommonjsModule(fn, module) {\n  return module = {\n    exports: {}\n  }, fn(module, module.exports), module.exports;\n}\n\nfunction commonjsRequire() {\n  throw new Error('Dynamic requires are not currently supported by @rollup/plugin-commonjs');\n}\n\nvar lodash_min = createCommonjsModule(function (module, exports) {\n  (function () {\n    function t(t, r, n) {\n      switch (n.length) {\n        case 0:\n          return t.call(r);\n\n        case 1:\n          return t.call(r, n[0]);\n\n        case 2:\n          return t.call(r, n[0], n[1]);\n\n        case 3:\n          return t.call(r, n[0], n[1], n[2]);\n      }\n\n      return t.apply(r, n);\n    }\n\n    function r(t, r) {\n      for (var n = -1, e = null == t ? 0 : t.length; ++n < e && r(t[n], n, t) !== false;);\n\n      return t;\n    }\n\n    function n(t, r) {\n      for (var n = -1, e = null == t ? 0 : t.length, u = 0, o = []; ++n < e;) {\n        var i = t[n];\n        r(i, n, t) && (o[u++] = i);\n      }\n\n      return o;\n    }\n\n    function e(t, r) {\n      for (var n = -1, e = null == t ? 0 : t.length, u = Array(e); ++n < e;) u[n] = r(t[n], n, t);\n\n      return u;\n    }\n\n    function u(t, r) {\n      for (var n = -1, e = r.length, u = t.length; ++n < e;) t[u + n] = r[n];\n\n      return t;\n    }\n\n    function o(t, r) {\n      for (var n = -1, e = null == t ? 0 : t.length; ++n < e;) if (r(t[n], n, t)) return true;\n\n      return false;\n    }\n\n    function i(t, r, n, e) {\n      for (var u = t.length, o = n + (e ? 1 : -1); e ? o-- : ++o < u;) if (r(t[o], o, t)) return o;\n\n      return -1;\n    }\n\n    function c(t) {\n      return function (r) {\n        return null == r ? Mr : r[t];\n      };\n    }\n\n    function a(t, r) {\n      for (var n = -1, e = Array(t); ++n < t;) e[n] = r(n);\n\n      return e;\n    }\n\n    function f(t) {\n      return function (r) {\n        return t(r);\n      };\n    }\n\n    function s(t, r) {\n      return t.has(r);\n    }\n\n    function l(t, r) {\n      return null == t ? Mr : t[r];\n    }\n\n    function h(t) {\n      var r = -1,\n          n = Array(t.size);\n      return t.forEach(function (t, e) {\n        n[++r] = [e, t];\n      }), n;\n    }\n\n    function p(t, r) {\n      return function (n) {\n        return t(r(n));\n      };\n    }\n\n    function v(t) {\n      var r = -1,\n          n = Array(t.size);\n      return t.forEach(function (t) {\n        n[++r] = t;\n      }), n;\n    }\n\n    function y() {}\n\n    function b(t) {\n      var r = -1,\n          n = null == t ? 0 : t.length;\n\n      for (this.clear(); ++r < n;) {\n        var e = t[r];\n        this.set(e[0], e[1]);\n      }\n    }\n\n    function _() {\n      this.__data__ = Ie ? Ie(null) : {}, this.size = 0;\n    }\n\n    function g(t) {\n      var r = this.has(t) && delete this.__data__[t];\n      return this.size -= r ? 1 : 0, r;\n    }\n\n    function d(t) {\n      var r = this.__data__;\n\n      if (Ie) {\n        var n = r[t];\n        return n === Nr ? Mr : n;\n      }\n\n      return ce.call(r, t) ? r[t] : Mr;\n    }\n\n    function j(t) {\n      var r = this.__data__;\n      return Ie ? r[t] !== Mr : ce.call(r, t);\n    }\n\n    function w(t, r) {\n      var n = this.__data__;\n      return this.size += this.has(t) ? 0 : 1, n[t] = Ie && r === Mr ? Nr : r, this;\n    }\n\n    function O(t) {\n      var r = -1,\n          n = null == t ? 0 : t.length;\n\n      for (this.clear(); ++r < n;) {\n        var e = t[r];\n        this.set(e[0], e[1]);\n      }\n    }\n\n    function m() {\n      this.__data__ = [], this.size = 0;\n    }\n\n    function A(t) {\n      var r = this.__data__,\n          n = W(r, t);\n      return !(n < 0) && (n == r.length - 1 ? r.pop() : ge.call(r, n, 1), --this.size, true);\n    }\n\n    function z(t) {\n      var r = this.__data__,\n          n = W(r, t);\n      return n < 0 ? Mr : r[n][1];\n    }\n\n    function x(t) {\n      return W(this.__data__, t) > -1;\n    }\n\n    function S(t, r) {\n      var n = this.__data__,\n          e = W(n, t);\n      return e < 0 ? (++this.size, n.push([t, r])) : n[e][1] = r, this;\n    }\n\n    function k(t) {\n      var r = -1,\n          n = null == t ? 0 : t.length;\n\n      for (this.clear(); ++r < n;) {\n        var e = t[r];\n        this.set(e[0], e[1]);\n      }\n    }\n\n    function $() {\n      this.size = 0, this.__data__ = {\n        hash: new b(),\n        map: new (Se || O)(),\n        string: new b()\n      };\n    }\n\n    function E(t) {\n      var r = Bt(this, t).delete(t);\n      return this.size -= r ? 1 : 0, r;\n    }\n\n    function I(t) {\n      return Bt(this, t).get(t);\n    }\n\n    function F(t) {\n      return Bt(this, t).has(t);\n    }\n\n    function L(t, r) {\n      var n = Bt(this, t),\n          e = n.size;\n      return n.set(t, r), this.size += n.size == e ? 0 : 1, this;\n    }\n\n    function P(t) {\n      var r = -1,\n          n = null == t ? 0 : t.length;\n\n      for (this.__data__ = new k(); ++r < n;) this.add(t[r]);\n    }\n\n    function M(t) {\n      return this.__data__.set(t, Nr), this;\n    }\n\n    function T(t) {\n      return this.__data__.has(t);\n    }\n\n    function U(t) {\n      this.size = (this.__data__ = new O(t)).size;\n    }\n\n    function B() {\n      this.__data__ = new O(), this.size = 0;\n    }\n\n    function N(t) {\n      var r = this.__data__,\n          n = r.delete(t);\n      return this.size = r.size, n;\n    }\n\n    function C(t) {\n      return this.__data__.get(t);\n    }\n\n    function D(t) {\n      return this.__data__.has(t);\n    }\n\n    function R(t, r) {\n      var n = this.__data__;\n\n      if (n instanceof O) {\n        var e = n.__data__;\n        if (!Se || e.length < Ur - 1) return e.push([t, r]), this.size = ++n.size, this;\n        n = this.__data__ = new k(e);\n      }\n\n      return n.set(t, r), this.size = n.size, this;\n    }\n\n    function V(t, r) {\n      var n = Xe(t),\n          e = !n && Qe(t),\n          u = !n && !e && Ye(t),\n          o = !n && !e && !u && ru(t),\n          i = n || e || u || o,\n          c = i ? a(t.length, String) : [],\n          f = c.length;\n\n      for (var s in t) !r && !ce.call(t, s) || i && (\"length\" == s || u && (\"offset\" == s || \"parent\" == s) || o && (\"buffer\" == s || \"byteLength\" == s || \"byteOffset\" == s) || Gt(s, f)) || c.push(s);\n\n      return c;\n    }\n\n    function q(t, r, n) {\n      var e = t[r];\n      ce.call(t, r) && lr(e, n) && (n !== Mr || r in t) || J(t, r, n);\n    }\n\n    function W(t, r) {\n      for (var n = t.length; n--;) if (lr(t[n][0], r)) return n;\n\n      return -1;\n    }\n\n    function G(t, r) {\n      return t && zt(r, xr(r), t);\n    }\n\n    function H(t, r) {\n      return t && zt(r, Sr(r), t);\n    }\n\n    function J(t, r, n) {\n      \"__proto__\" == r && je ? je(t, r, {\n        configurable: true,\n        enumerable: true,\n        value: n,\n        writable: true\n      }) : t[r] = n;\n    }\n\n    function K(t, n, e, u, o, i) {\n      var c,\n          a = n & Dr,\n          f = n & Rr,\n          s = n & Vr;\n      if (e && (c = o ? e(t, u, o, i) : e(t)), c !== Mr) return c;\n      if (!br(t)) return t;\n      var l = Xe(t);\n\n      if (l) {\n        if (c = Vt(t), !a) return At(t, c);\n      } else {\n        var h = Ge(t),\n            p = h == un || h == on;\n        if (Ye(t)) return gt(t, a);\n\n        if (h == sn || h == Yr || p && !o) {\n          if (c = f || p ? {} : qt(t), !a) return f ? St(t, H(c, t)) : xt(t, G(c, t));\n        } else {\n          if (!Vn[h]) return o ? t : {};\n          c = Wt(t, h, a);\n        }\n      }\n\n      i || (i = new U());\n      var v = i.get(t);\n      if (v) return v;\n      if (i.set(t, c), tu(t)) return t.forEach(function (r) {\n        c.add(K(r, n, e, r, t, i));\n      }), c;\n      if (Ze(t)) return t.forEach(function (r, u) {\n        c.set(u, K(r, n, e, u, t, i));\n      }), c;\n      var y = s ? f ? Tt : Mt : f ? Sr : xr,\n          b = l ? Mr : y(t);\n      return r(b || t, function (r, u) {\n        b && (u = r, r = t[u]), q(c, u, K(r, n, e, u, t, i));\n      }), c;\n    }\n\n    function Q(t, r) {\n      return t && Re(t, r, xr);\n    }\n\n    function X(t, r) {\n      r = _t(r, t);\n\n      for (var n = 0, e = r.length; null != t && n < e;) t = t[or(r[n++])];\n\n      return n && n == e ? t : Mr;\n    }\n\n    function Y(t, r, n) {\n      var e = r(t);\n      return Xe(t) ? e : u(e, n(t));\n    }\n\n    function Z(t) {\n      return null == t ? t === Mr ? _n : fn : de && de in Object(t) ? Dt(t) : nr(t);\n    }\n\n    function tt(t, r) {\n      return null != t && r in Object(t);\n    }\n\n    function rt(t) {\n      return _r(t) && Z(t) == Yr;\n    }\n\n    function nt(t, r, n, e, u) {\n      return t === r || (null == t || null == r || !_r(t) && !_r(r) ? t !== t && r !== r : et(t, r, n, e, nt, u));\n    }\n\n    function et(t, r, n, e, u, o) {\n      var i = Xe(t),\n          c = Xe(r),\n          a = i ? Zr : Ge(t),\n          f = c ? Zr : Ge(r);\n      a = a == Yr ? sn : a, f = f == Yr ? sn : f;\n      var s = a == sn,\n          l = f == sn,\n          h = a == f;\n\n      if (h && Ye(t)) {\n        if (!Ye(r)) return false;\n        i = true, s = false;\n      }\n\n      if (h && !s) return o || (o = new U()), i || ru(t) ? Ft(t, r, n, e, u, o) : Lt(t, r, a, n, e, u, o);\n\n      if (!(n & qr)) {\n        var p = s && ce.call(t, \"__wrapped__\"),\n            v = l && ce.call(r, \"__wrapped__\");\n\n        if (p || v) {\n          var y = p ? t.value() : t,\n              b = v ? r.value() : r;\n          return o || (o = new U()), u(y, b, n, e, o);\n        }\n      }\n\n      return !!h && (o || (o = new U()), Pt(t, r, n, e, u, o));\n    }\n\n    function ut(t) {\n      return _r(t) && Ge(t) == cn;\n    }\n\n    function ot(t, r, n, e) {\n      var u = n.length,\n          o = u,\n          i = !e;\n      if (null == t) return !o;\n\n      for (t = Object(t); u--;) {\n        var c = n[u];\n        if (i && c[2] ? c[1] !== t[c[0]] : !(c[0] in t)) return false;\n      }\n\n      for (; ++u < o;) {\n        c = n[u];\n        var a = c[0],\n            f = t[a],\n            s = c[1];\n\n        if (i && c[2]) {\n          if (f === Mr && !(a in t)) return false;\n        } else {\n          var l = new U();\n          if (e) var h = e(f, s, a, t, r, l);\n          if (!(h === Mr ? nt(s, f, qr | Wr, e, l) : h)) return false;\n        }\n      }\n\n      return true;\n    }\n\n    function it(t) {\n      return !(!br(t) || Qt(t)) && (vr(t) ? se : Nn).test(ir(t));\n    }\n\n    function ct(t) {\n      return _r(t) && Ge(t) == vn;\n    }\n\n    function at(t) {\n      return _r(t) && yr(t.length) && !!Rn[Z(t)];\n    }\n\n    function ft(t) {\n      return typeof t == \"function\" ? t : null == t ? $r : typeof t == \"object\" ? Xe(t) ? pt(t[0], t[1]) : ht(t) : Fr(t);\n    }\n\n    function st(t) {\n      if (!Xt(t)) return me(t);\n      var r = [];\n\n      for (var n in Object(t)) ce.call(t, n) && \"constructor\" != n && r.push(n);\n\n      return r;\n    }\n\n    function lt(t) {\n      if (!br(t)) return rr(t);\n      var r = Xt(t),\n          n = [];\n\n      for (var e in t) (\"constructor\" != e || !r && ce.call(t, e)) && n.push(e);\n\n      return n;\n    }\n\n    function ht(t) {\n      var r = Nt(t);\n      return 1 == r.length && r[0][2] ? Zt(r[0][0], r[0][1]) : function (n) {\n        return n === t || ot(n, t, r);\n      };\n    }\n\n    function pt(t, r) {\n      return Jt(t) && Yt(r) ? Zt(or(t), r) : function (n) {\n        var e = Ar(n, t);\n        return e === Mr && e === r ? zr(n, t) : nt(r, e, qr | Wr);\n      };\n    }\n\n    function vt(t) {\n      return function (r) {\n        return X(r, t);\n      };\n    }\n\n    function yt(t, r) {\n      return He(er(t, r, $r), t + \"\");\n    }\n\n    function bt(t) {\n      if (typeof t == \"string\") return t;\n      if (Xe(t)) return e(t, bt) + \"\";\n      if (gr(t)) return Ne ? Ne.call(t) : \"\";\n      var r = t + \"\";\n      return \"0\" == r && 1 / t == -Jr ? \"-0\" : r;\n    }\n\n    function _t(t, r) {\n      return Xe(t) ? t : Jt(t, r) ? [t] : Je(Or(t));\n    }\n\n    function gt(t, r) {\n      if (r) return t.slice();\n      var n = t.length,\n          e = ve ? ve(n) : new t.constructor(n);\n      return t.copy(e), e;\n    }\n\n    function dt(t) {\n      var r = new t.constructor(t.byteLength);\n      return new pe(r).set(new pe(t)), r;\n    }\n\n    function jt(t, r) {\n      return new t.constructor(r ? dt(t.buffer) : t.buffer, t.byteOffset, t.byteLength);\n    }\n\n    function wt(t) {\n      var r = new t.constructor(t.source, Tn.exec(t));\n      return r.lastIndex = t.lastIndex, r;\n    }\n\n    function Ot(t) {\n      return Be ? Object(Be.call(t)) : {};\n    }\n\n    function mt(t, r) {\n      return new t.constructor(r ? dt(t.buffer) : t.buffer, t.byteOffset, t.length);\n    }\n\n    function At(t, r) {\n      var n = -1,\n          e = t.length;\n\n      for (r || (r = Array(e)); ++n < e;) r[n] = t[n];\n\n      return r;\n    }\n\n    function zt(t, r, n, e) {\n      var u = !n;\n      n || (n = {});\n\n      for (var o = -1, i = r.length; ++o < i;) {\n        var c = r[o],\n            a = e ? e(n[c], t[c], c, n, t) : Mr;\n        a === Mr && (a = t[c]), u ? J(n, c, a) : q(n, c, a);\n      }\n\n      return n;\n    }\n\n    function xt(t, r) {\n      return zt(t, qe(t), r);\n    }\n\n    function St(t, r) {\n      return zt(t, We(t), r);\n    }\n\n    function kt(t) {\n      return yt(function (r, n) {\n        var e = -1,\n            u = n.length,\n            o = u > 1 ? n[u - 1] : Mr,\n            i = u > 2 ? n[2] : Mr;\n\n        for (o = t.length > 3 && typeof o == \"function\" ? (u--, o) : Mr, i && Ht(n[0], n[1], i) && (o = u < 3 ? Mr : o, u = 1), r = Object(r); ++e < u;) {\n          var c = n[e];\n          c && t(r, c, e, o);\n        }\n\n        return r;\n      });\n    }\n\n    function $t(t, r) {\n      return function (n, e) {\n        if (null == n) return n;\n        if (!hr(n)) return t(n, e);\n\n        for (var u = n.length, o = r ? u : -1, i = Object(n); (r ? o-- : ++o < u) && e(i[o], o, i) !== false;);\n\n        return n;\n      };\n    }\n\n    function Et(t) {\n      return function (r, n, e) {\n        for (var u = -1, o = Object(r), i = e(r), c = i.length; c--;) {\n          var a = i[t ? c : ++u];\n          if (n(o[a], a, o) === false) break;\n        }\n\n        return r;\n      };\n    }\n\n    function It(t) {\n      return function (r, n, e) {\n        var u = Object(r);\n\n        if (!hr(r)) {\n          var o = Ut(n, 3);\n          r = xr(r), n = function (t) {\n            return o(u[t], t, u);\n          };\n        }\n\n        var i = t(r, n, e);\n        return i > -1 ? u[o ? r[i] : i] : Mr;\n      };\n    }\n\n    function Ft(t, r, n, e, u, i) {\n      var c = n & qr,\n          a = t.length,\n          f = r.length;\n      if (a != f && !(c && f > a)) return false;\n      var l = i.get(t);\n      if (l && i.get(r)) return l == r;\n      var h = -1,\n          p = true,\n          v = n & Wr ? new P() : Mr;\n\n      for (i.set(t, r), i.set(r, t); ++h < a;) {\n        var y = t[h],\n            b = r[h];\n        if (e) var _ = c ? e(b, y, h, r, t, i) : e(y, b, h, t, r, i);\n\n        if (_ !== Mr) {\n          if (_) continue;\n          p = false;\n          break;\n        }\n\n        if (v) {\n          if (!o(r, function (t, r) {\n            if (!s(v, r) && (y === t || u(y, t, n, e, i))) return v.push(r);\n          })) {\n            p = false;\n            break;\n          }\n        } else if (y !== b && !u(y, b, n, e, i)) {\n          p = false;\n          break;\n        }\n      }\n\n      return i.delete(t), i.delete(r), p;\n    }\n\n    function Lt(t, r, n, e, u, o, i) {\n      switch (n) {\n        case jn:\n          if (t.byteLength != r.byteLength || t.byteOffset != r.byteOffset) return false;\n          t = t.buffer, r = r.buffer;\n\n        case dn:\n          return !(t.byteLength != r.byteLength || !o(new pe(t), new pe(r)));\n\n        case rn:\n        case nn:\n        case an:\n          return lr(+t, +r);\n\n        case en:\n          return t.name == r.name && t.message == r.message;\n\n        case pn:\n        case yn:\n          return t == r + \"\";\n\n        case cn:\n          var c = h;\n\n        case vn:\n          var a = e & qr;\n          if (c || (c = v), t.size != r.size && !a) return false;\n          var f = i.get(t);\n          if (f) return f == r;\n          e |= Wr, i.set(t, r);\n          var s = Ft(c(t), c(r), e, u, o, i);\n          return i.delete(t), s;\n\n        case bn:\n          if (Be) return Be.call(t) == Be.call(r);\n      }\n\n      return false;\n    }\n\n    function Pt(t, r, n, e, u, o) {\n      var i = n & qr,\n          c = Mt(t),\n          a = c.length;\n      if (a != Mt(r).length && !i) return false;\n\n      for (var f = a; f--;) {\n        var s = c[f];\n        if (!(i ? s in r : ce.call(r, s))) return false;\n      }\n\n      var l = o.get(t);\n      if (l && o.get(r)) return l == r;\n      var h = true;\n      o.set(t, r), o.set(r, t);\n\n      for (var p = i; ++f < a;) {\n        s = c[f];\n        var v = t[s],\n            y = r[s];\n        if (e) var b = i ? e(y, v, s, r, t, o) : e(v, y, s, t, r, o);\n\n        if (!(b === Mr ? v === y || u(v, y, n, e, o) : b)) {\n          h = false;\n          break;\n        }\n\n        p || (p = \"constructor\" == s);\n      }\n\n      if (h && !p) {\n        var _ = t.constructor,\n            g = r.constructor;\n        _ != g && \"constructor\" in t && \"constructor\" in r && !(typeof _ == \"function\" && _ instanceof _ && typeof g == \"function\" && g instanceof g) && (h = false);\n      }\n\n      return o.delete(t), o.delete(r), h;\n    }\n\n    function Mt(t) {\n      return Y(t, xr, qe);\n    }\n\n    function Tt(t) {\n      return Y(t, Sr, We);\n    }\n\n    function Ut() {\n      var t = y.iteratee || Er;\n      return t = t === Er ? ft : t, arguments.length ? t(arguments[0], arguments[1]) : t;\n    }\n\n    function Bt(t, r) {\n      var n = t.__data__;\n      return Kt(r) ? n[typeof r == \"string\" ? \"string\" : \"hash\"] : n.map;\n    }\n\n    function Nt(t) {\n      for (var r = xr(t), n = r.length; n--;) {\n        var e = r[n],\n            u = t[e];\n        r[n] = [e, u, Yt(u)];\n      }\n\n      return r;\n    }\n\n    function Ct(t, r) {\n      var n = l(t, r);\n      return it(n) ? n : Mr;\n    }\n\n    function Dt(t) {\n      var r = ce.call(t, de),\n          n = t[de];\n\n      try {\n        t[de] = Mr;\n        var e = true;\n      } catch (t) {}\n\n      var u = fe.call(t);\n      return e && (r ? t[de] = n : delete t[de]), u;\n    }\n\n    function Rt(t, r, n) {\n      r = _t(r, t);\n\n      for (var e = -1, u = r.length, o = false; ++e < u;) {\n        var i = or(r[e]);\n        if (!(o = null != t && n(t, i))) break;\n        t = t[i];\n      }\n\n      return o || ++e != u ? o : (u = null == t ? 0 : t.length, !!u && yr(u) && Gt(i, u) && (Xe(t) || Qe(t)));\n    }\n\n    function Vt(t) {\n      var r = t.length,\n          n = new t.constructor(r);\n      return r && \"string\" == typeof t[0] && ce.call(t, \"index\") && (n.index = t.index, n.input = t.input), n;\n    }\n\n    function qt(t) {\n      return typeof t.constructor != \"function\" || Xt(t) ? {} : Ce(ye(t));\n    }\n\n    function Wt(t, r, n) {\n      var e = t.constructor;\n\n      switch (r) {\n        case dn:\n          return dt(t);\n\n        case rn:\n        case nn:\n          return new e(+t);\n\n        case jn:\n          return jt(t, n);\n\n        case wn:\n        case On:\n        case mn:\n        case An:\n        case zn:\n        case xn:\n        case Sn:\n        case kn:\n        case $n:\n          return mt(t, n);\n\n        case cn:\n          return new e();\n\n        case an:\n        case yn:\n          return new e(t);\n\n        case pn:\n          return wt(t);\n\n        case vn:\n          return new e();\n\n        case bn:\n          return Ot(t);\n      }\n    }\n\n    function Gt(t, r) {\n      var n = typeof t;\n      return r = null == r ? Kr : r, !!r && (\"number\" == n || \"symbol\" != n && Dn.test(t)) && t > -1 && t % 1 == 0 && t < r;\n    }\n\n    function Ht(t, r, n) {\n      if (!br(n)) return false;\n      var e = typeof r;\n      return !!(\"number\" == e ? hr(n) && Gt(r, n.length) : \"string\" == e && r in n) && lr(n[r], t);\n    }\n\n    function Jt(t, r) {\n      if (Xe(t)) return false;\n      var n = typeof t;\n      return !(\"number\" != n && \"symbol\" != n && \"boolean\" != n && null != t && !gr(t)) || In.test(t) || !En.test(t) || null != r && t in Object(r);\n    }\n\n    function Kt(t) {\n      var r = typeof t;\n      return \"string\" == r || \"number\" == r || \"symbol\" == r || \"boolean\" == r ? \"__proto__\" !== t : null === t;\n    }\n\n    function Qt(t) {\n      return !!ae && ae in t;\n    }\n\n    function Xt(t) {\n      var r = t && t.constructor;\n      return t === (typeof r == \"function\" && r.prototype || ue);\n    }\n\n    function Yt(t) {\n      return t === t && !br(t);\n    }\n\n    function Zt(t, r) {\n      return function (n) {\n        return null != n && n[t] === r && (r !== Mr || t in Object(n));\n      };\n    }\n\n    function tr(t) {\n      var r = fr(t, function (t) {\n        return n.size === Cr && n.clear(), t;\n      }),\n          n = r.cache;\n      return r;\n    }\n\n    function rr(t) {\n      var r = [];\n      if (null != t) for (var n in Object(t)) r.push(n);\n      return r;\n    }\n\n    function nr(t) {\n      return fe.call(t);\n    }\n\n    function er(r, n, e) {\n      return n = Ae(n === Mr ? r.length - 1 : n, 0), function () {\n        for (var u = arguments, o = -1, i = Ae(u.length - n, 0), c = Array(i); ++o < i;) c[o] = u[n + o];\n\n        o = -1;\n\n        for (var a = Array(n + 1); ++o < n;) a[o] = u[o];\n\n        return a[n] = e(c), t(r, this, a);\n      };\n    }\n\n    function ur(t) {\n      var r = 0,\n          n = 0;\n      return function () {\n        var e = ze(),\n            u = Hr - (e - n);\n\n        if (n = e, u > 0) {\n          if (++r >= Gr) return arguments[0];\n        } else r = 0;\n\n        return t.apply(Mr, arguments);\n      };\n    }\n\n    function or(t) {\n      if (typeof t == \"string\" || gr(t)) return t;\n      var r = t + \"\";\n      return \"0\" == r && 1 / t == -Jr ? \"-0\" : r;\n    }\n\n    function ir(t) {\n      if (null != t) {\n        try {\n          return ie.call(t);\n        } catch (t) {}\n\n        try {\n          return t + \"\";\n        } catch (t) {}\n      }\n\n      return \"\";\n    }\n\n    function cr(t, r, n) {\n      var e = null == t ? 0 : t.length;\n      if (!e) return -1;\n      var u = null == n ? 0 : jr(n);\n      return u < 0 && (u = Ae(e + u, 0)), i(t, Ut(r, 3), u);\n    }\n\n    function ar(t, n) {\n      return (Xe(t) ? r : De)(t, Ut(n, 3));\n    }\n\n    function fr(t, r) {\n      if (typeof t != \"function\" || null != r && typeof r != \"function\") throw new TypeError(Br);\n\n      var n = function () {\n        var e = arguments,\n            u = r ? r.apply(this, e) : e[0],\n            o = n.cache;\n        if (o.has(u)) return o.get(u);\n        var i = t.apply(this, e);\n        return n.cache = o.set(u, i) || o, i;\n      };\n\n      return n.cache = new (fr.Cache || k)(), n;\n    }\n\n    function sr(t) {\n      return K(t, Vr);\n    }\n\n    function lr(t, r) {\n      return t === r || t !== t && r !== r;\n    }\n\n    function hr(t) {\n      return null != t && yr(t.length) && !vr(t);\n    }\n\n    function pr(t, r) {\n      return nt(t, r);\n    }\n\n    function vr(t) {\n      if (!br(t)) return false;\n      var r = Z(t);\n      return r == un || r == on || r == tn || r == hn;\n    }\n\n    function yr(t) {\n      return typeof t == \"number\" && t > -1 && t % 1 == 0 && t <= Kr;\n    }\n\n    function br(t) {\n      var r = typeof t;\n      return null != t && (\"object\" == r || \"function\" == r);\n    }\n\n    function _r(t) {\n      return null != t && typeof t == \"object\";\n    }\n\n    function gr(t) {\n      return typeof t == \"symbol\" || _r(t) && Z(t) == bn;\n    }\n\n    function dr(t) {\n      if (!t) return 0 === t ? t : 0;\n\n      if (t = wr(t), t === Jr || t === -Jr) {\n        return (t < 0 ? -1 : 1) * Qr;\n      }\n\n      return t === t ? t : 0;\n    }\n\n    function jr(t) {\n      var r = dr(t),\n          n = r % 1;\n      return r === r ? n ? r - n : r : 0;\n    }\n\n    function wr(t) {\n      if (typeof t == \"number\") return t;\n      if (gr(t)) return Xr;\n\n      if (br(t)) {\n        var r = typeof t.valueOf == \"function\" ? t.valueOf() : t;\n        t = br(r) ? r + \"\" : r;\n      }\n\n      if (typeof t != \"string\") return 0 === t ? t : +t;\n      t = t.replace(Pn, \"\");\n      var n = Bn.test(t);\n      return n || Cn.test(t) ? qn(t.slice(2), n ? 2 : 8) : Un.test(t) ? Xr : +t;\n    }\n\n    function Or(t) {\n      return null == t ? \"\" : bt(t);\n    }\n\n    function mr(t, r) {\n      return t && Q(t, Ut(r, 3));\n    }\n\n    function Ar(t, r, n) {\n      var e = null == t ? Mr : X(t, r);\n      return e === Mr ? n : e;\n    }\n\n    function zr(t, r) {\n      return null != t && Rt(t, r, tt);\n    }\n\n    function xr(t) {\n      return hr(t) ? V(t) : st(t);\n    }\n\n    function Sr(t) {\n      return hr(t) ? V(t, true) : lt(t);\n    }\n\n    function kr(t) {\n      return function () {\n        return t;\n      };\n    }\n\n    function $r(t) {\n      return t;\n    }\n\n    function Er(t) {\n      return ft(typeof t == \"function\" ? t : K(t, Dr));\n    }\n\n    function Ir(t, r) {\n      return pt(t, K(r, Dr));\n    }\n\n    function Fr(t) {\n      return Jt(t) ? c(or(t)) : vt(t);\n    }\n\n    function Lr() {\n      return [];\n    }\n\n    function Pr() {\n      return false;\n    }\n\n    var Mr,\n        Tr = \"4.17.5\",\n        Ur = 200,\n        Br = \"Expected a function\",\n        Nr = \"__lodash_hash_undefined__\",\n        Cr = 500,\n        Dr = 1,\n        Rr = 2,\n        Vr = 4,\n        qr = 1,\n        Wr = 2,\n        Gr = 800,\n        Hr = 16,\n        Jr = 1 / 0,\n        Kr = 9007199254740991,\n        Qr = 1.7976931348623157e308,\n        Xr = NaN,\n        Yr = \"[object Arguments]\",\n        Zr = \"[object Array]\",\n        tn = \"[object AsyncFunction]\",\n        rn = \"[object Boolean]\",\n        nn = \"[object Date]\",\n        en = \"[object Error]\",\n        un = \"[object Function]\",\n        on = \"[object GeneratorFunction]\",\n        cn = \"[object Map]\",\n        an = \"[object Number]\",\n        fn = \"[object Null]\",\n        sn = \"[object Object]\",\n        ln = \"[object Promise]\",\n        hn = \"[object Proxy]\",\n        pn = \"[object RegExp]\",\n        vn = \"[object Set]\",\n        yn = \"[object String]\",\n        bn = \"[object Symbol]\",\n        _n = \"[object Undefined]\",\n        gn = \"[object WeakMap]\",\n        dn = \"[object ArrayBuffer]\",\n        jn = \"[object DataView]\",\n        wn = \"[object Float32Array]\",\n        On = \"[object Float64Array]\",\n        mn = \"[object Int8Array]\",\n        An = \"[object Int16Array]\",\n        zn = \"[object Int32Array]\",\n        xn = \"[object Uint8Array]\",\n        Sn = \"[object Uint8ClampedArray]\",\n        kn = \"[object Uint16Array]\",\n        $n = \"[object Uint32Array]\",\n        En = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\n        In = /^\\w*$/,\n        Fn = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g,\n        Ln = /[\\\\^$.*+?()[\\]{}|]/g,\n        Pn = /^\\s+|\\s+$/g,\n        Mn = /\\\\(\\\\)?/g,\n        Tn = /\\w*$/,\n        Un = /^[-+]0x[0-9a-f]+$/i,\n        Bn = /^0b[01]+$/i,\n        Nn = /^\\[object .+?Constructor\\]$/,\n        Cn = /^0o[0-7]+$/i,\n        Dn = /^(?:0|[1-9]\\d*)$/,\n        Rn = {};\n    Rn[wn] = Rn[On] = Rn[mn] = Rn[An] = Rn[zn] = Rn[xn] = Rn[Sn] = Rn[kn] = Rn[$n] = true, Rn[Yr] = Rn[Zr] = Rn[dn] = Rn[rn] = Rn[jn] = Rn[nn] = Rn[en] = Rn[un] = Rn[cn] = Rn[an] = Rn[sn] = Rn[pn] = Rn[vn] = Rn[yn] = Rn[gn] = false;\n    var Vn = {};\n    Vn[Yr] = Vn[Zr] = Vn[dn] = Vn[jn] = Vn[rn] = Vn[nn] = Vn[wn] = Vn[On] = Vn[mn] = Vn[An] = Vn[zn] = Vn[cn] = Vn[an] = Vn[sn] = Vn[pn] = Vn[vn] = Vn[yn] = Vn[bn] = Vn[xn] = Vn[Sn] = Vn[kn] = Vn[$n] = true, Vn[en] = Vn[un] = Vn[gn] = false;\n\n    var qn = parseInt,\n        Wn = typeof commonjsGlobal == \"object\" && commonjsGlobal && commonjsGlobal.Object === Object && commonjsGlobal,\n        Gn = typeof self == \"object\" && self && self.Object === Object && self,\n        Hn = Wn || Gn || Function(\"return this\")(),\n        Jn = exports && !exports.nodeType && exports,\n        Kn = Jn && 'object' == \"object\" && module && !module.nodeType && module,\n        Qn = Kn && Kn.exports === Jn,\n        Xn = Qn && Wn.process,\n        Yn = function () {\n      try {\n        return Xn && Xn.binding && Xn.binding(\"util\");\n      } catch (t) {}\n    }(),\n        Zn = Yn && Yn.isMap,\n        te = Yn && Yn.isSet,\n        re = Yn && Yn.isTypedArray,\n        ne = Array.prototype,\n        ee = Function.prototype,\n        ue = Object.prototype,\n        oe = Hn[\"__core-js_shared__\"],\n        ie = ee.toString,\n        ce = ue.hasOwnProperty,\n        ae = function () {\n      var t = /[^.]+$/.exec(oe && oe.keys && oe.keys.IE_PROTO || \"\");\n      return t ? \"Symbol(src)_1.\" + t : \"\";\n    }(),\n        fe = ue.toString,\n        se = RegExp(\"^\" + ie.call(ce).replace(Ln, \"\\\\$&\").replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, \"$1.*?\") + \"$\"),\n        le = Qn ? Hn.Buffer : Mr,\n        he = Hn.Symbol,\n        pe = Hn.Uint8Array,\n        ve = le ? le.allocUnsafe : Mr,\n        ye = p(Object.getPrototypeOf, Object),\n        be = Object.create,\n        _e = ue.propertyIsEnumerable,\n        ge = ne.splice,\n        de = he ? he.toStringTag : Mr,\n        je = function () {\n      try {\n        var t = Ct(Object, \"defineProperty\");\n        return t({}, \"\", {}), t;\n      } catch (t) {}\n    }(),\n        we = Object.getOwnPropertySymbols,\n        Oe = le ? le.isBuffer : Mr,\n        me = p(Object.keys, Object),\n        Ae = Math.max,\n        ze = Date.now,\n        xe = Ct(Hn, \"DataView\"),\n        Se = Ct(Hn, \"Map\"),\n        ke = Ct(Hn, \"Promise\"),\n        $e = Ct(Hn, \"Set\"),\n        Ee = Ct(Hn, \"WeakMap\"),\n        Ie = Ct(Object, \"create\"),\n        Fe = ir(xe),\n        Le = ir(Se),\n        Pe = ir(ke),\n        Me = ir($e),\n        Te = ir(Ee),\n        Ue = he ? he.prototype : Mr,\n        Be = Ue ? Ue.valueOf : Mr,\n        Ne = Ue ? Ue.toString : Mr,\n        Ce = function () {\n      function t() {}\n\n      return function (r) {\n        if (!br(r)) return {};\n        if (be) return be(r);\n        t.prototype = r;\n        var n = new t();\n        return t.prototype = Mr, n;\n      };\n    }();\n\n    b.prototype.clear = _, b.prototype.delete = g, b.prototype.get = d, b.prototype.has = j, b.prototype.set = w, O.prototype.clear = m, O.prototype.delete = A, O.prototype.get = z, O.prototype.has = x, O.prototype.set = S, k.prototype.clear = $, k.prototype.delete = E, k.prototype.get = I, k.prototype.has = F, k.prototype.set = L, P.prototype.add = P.prototype.push = M, P.prototype.has = T, U.prototype.clear = B, U.prototype.delete = N, U.prototype.get = C, U.prototype.has = D, U.prototype.set = R;\n    var De = $t(Q),\n        Re = Et(),\n        Ve = je ? function (t, r) {\n      return je(t, \"toString\", {\n        configurable: true,\n        enumerable: false,\n        value: kr(r),\n        writable: true\n      });\n    } : $r,\n        qe = we ? function (t) {\n      return null == t ? [] : (t = Object(t), n(we(t), function (r) {\n        return _e.call(t, r);\n      }));\n    } : Lr,\n        We = we ? function (t) {\n      for (var r = []; t;) u(r, qe(t)), t = ye(t);\n\n      return r;\n    } : Lr,\n        Ge = Z;\n    (xe && Ge(new xe(new ArrayBuffer(1))) != jn || Se && Ge(new Se()) != cn || ke && Ge(ke.resolve()) != ln || $e && Ge(new $e()) != vn || Ee && Ge(new Ee()) != gn) && (Ge = function (t) {\n      var r = Z(t),\n          n = r == sn ? t.constructor : Mr,\n          e = n ? ir(n) : \"\";\n      if (e) switch (e) {\n        case Fe:\n          return jn;\n\n        case Le:\n          return cn;\n\n        case Pe:\n          return ln;\n\n        case Me:\n          return vn;\n\n        case Te:\n          return gn;\n      }\n      return r;\n    });\n    var He = ur(Ve),\n        Je = tr(function (t) {\n      var r = [];\n      return 46 === t.charCodeAt(0) && r.push(\"\"), t.replace(Fn, function (t, n, e, u) {\n        r.push(e ? u.replace(Mn, \"$1\") : n || t);\n      }), r;\n    }),\n        Ke = It(cr);\n    fr.Cache = k;\n    var Qe = rt(function () {\n      return arguments;\n    }()) ? rt : function (t) {\n      return _r(t) && ce.call(t, \"callee\") && !_e.call(t, \"callee\");\n    },\n        Xe = Array.isArray,\n        Ye = Oe || Pr,\n        Ze = Zn ? f(Zn) : ut,\n        tu = te ? f(te) : ct,\n        ru = re ? f(re) : at,\n        nu = kt(function (t, r) {\n      if (Xt(r) || hr(r)) return zt(r, xr(r), t), Mr;\n\n      for (var n in r) ce.call(r, n) && q(t, n, r[n]);\n    }),\n        eu = yt(function (t, r) {\n      t = Object(t);\n      var n = -1,\n          e = r.length,\n          u = e > 2 ? r[2] : Mr;\n\n      for (u && Ht(r[0], r[1], u) && (e = 1); ++n < e;) for (var o = r[n], i = Sr(o), c = -1, a = i.length; ++c < a;) {\n        var f = i[c],\n            s = t[f];\n        (s === Mr || lr(s, ue[f]) && !ce.call(t, f)) && (t[f] = o[f]);\n      }\n\n      return t;\n    });\n    y.assign = nu, y.constant = kr, y.defaults = eu, y.iteratee = Er, y.keys = xr, y.keysIn = Sr, y.matchesProperty = Ir, y.memoize = fr, y.property = Fr, y.clone = sr, y.eq = lr, y.find = Ke, y.findIndex = cr, y.forEach = ar, y.forOwn = mr, y.get = Ar, y.hasIn = zr, y.identity = $r, y.isArguments = Qe, y.isArray = Xe, y.isArrayLike = hr, y.isBuffer = Ye, y.isEqual = pr, y.isFunction = vr, y.isLength = yr, y.isMap = Ze, y.isObject = br, y.isObjectLike = _r, y.isSet = tu, y.isSymbol = gr, y.isTypedArray = ru, y.stubArray = Lr, y.stubFalse = Pr, y.toFinite = dr, y.toInteger = jr, y.toNumber = wr, y.toString = Or, y.each = ar, y.VERSION = Tr, Kn ? ((Kn.exports = y)._ = y, Jn._ = y) : Hn._ = y;\n  }).call(commonjsGlobal);\n});\nvar alt_min = createCommonjsModule(function (module, exports) {\n  !function (t) {\n    module.exports = t();\n  }(function () {\n    return function t(e, n, r) {\n      function i(s, a) {\n        if (!n[s]) {\n          if (!e[s]) {\n            var c = \"function\" == typeof commonjsRequire && commonjsRequire;\n            if (!a && c) return c(s, !0);\n            if (o) return o(s, !0);\n            var u = new Error(\"Cannot find module '\" + s + \"'\");\n            throw u.code = \"MODULE_NOT_FOUND\", u;\n          }\n\n          var l = n[s] = {\n            exports: {}\n          };\n          e[s][0].call(l.exports, function (t) {\n            var n = e[s][1][t];\n            return i(n || t);\n          }, l, l.exports, t, e, n, r);\n        }\n\n        return n[s].exports;\n      }\n\n      for (var o = \"function\" == typeof commonjsRequire && commonjsRequire, s = 0; s < r.length; s++) i(r[s]);\n\n      return i;\n    }({\n      1: [function (t, e, n) {\n        var r = {},\n            i = Object.create,\n            o = Object.defineProperties,\n            s = Object.defineProperty,\n            a = function (t) {\n          var e = void 0 === arguments[1] ? {} : arguments[1];\n          return {\n            value: t,\n            configurable: !!e.c,\n            writable: !!e.w,\n            enumerable: !!e.e\n          };\n        },\n            c = void 0;\n\n        try {\n          var u = s({}, \"y\", {\n            get: function () {\n              return 1;\n            }\n          });\n          c = 1 === u.y;\n        } catch (t) {\n          c = !1;\n        }\n\n        var l = {},\n            f = function (t) {\n          t = String(t);\n\n          for (var e = \"\", n = 0; l[t + e];) e = n += 1;\n\n          l[t + e] = 1;\n          var r = \"Symbol(\" + t + e + \")\";\n          return c && s(Object.prototype, r, {\n            get: void 0,\n            set: function (t) {\n              s(this, r, a(t, {\n                c: !0,\n                w: !0\n              }));\n            },\n            configurable: !0,\n            enumerable: !1\n          }), r;\n        },\n            h = i(null);\n\n        function p(t) {\n          if (this instanceof p) throw new TypeError(\"Symbol is not a constructor\");\n          t = void 0 === t ? \"\" : String(t);\n          var e = f(t);\n          return c ? i(h, {\n            __description__: a(t),\n            __tag__: a(e)\n          }) : e;\n        }\n\n        o(p, {\n          for: a(function (t) {\n            var e = String(t);\n            if (r[e]) return r[e];\n            var n = p(e);\n            return r[e] = n, n;\n          }),\n          keyFor: a(function (t) {\n            if (c && (!(e = t) || \"Symbol\" !== e[p.toStringTag])) throw new TypeError(t + \" is not a symbol\");\n            var e;\n\n            for (var n in r) if (r[n] === t) return c ? r[n].__description__ : r[n].substr(7, r[n].length - 8);\n          })\n        }), o(p, {\n          hasInstance: a(p(\"hasInstance\")),\n          isConcatSpreadable: a(p(\"isConcatSpreadable\")),\n          iterator: a(p(\"iterator\")),\n          match: a(p(\"match\")),\n          replace: a(p(\"replace\")),\n          search: a(p(\"search\")),\n          species: a(p(\"species\")),\n          split: a(p(\"split\")),\n          toPrimitive: a(p(\"toPrimitive\")),\n          toStringTag: a(p(\"toStringTag\")),\n          unscopables: a(p(\"unscopables\"))\n        }), o(h, {\n          constructor: a(p),\n          toString: a(function () {\n            return this.__tag__;\n          }),\n          valueOf: a(function () {\n            return \"Symbol(\" + this.__description__ + \")\";\n          })\n        }), c && s(h, p.toStringTag, a(\"Symbol\", {\n          c: !0\n        })), e.exports = \"function\" == typeof Symbol ? Symbol : p;\n      }, {}],\n      2: [function (t, e, n) {\n        function r(t, e, n) {\n          this.fn = t, this.context = e, this.once = n || !1;\n        }\n\n        function i() {}\n\n        i.prototype._events = void 0, i.prototype.listeners = function (t) {\n          if (!this._events || !this._events[t]) return [];\n          if (this._events[t].fn) return [this._events[t].fn];\n\n          for (var e = 0, n = this._events[t].length, r = new Array(n); e < n; e++) r[e] = this._events[t][e].fn;\n\n          return r;\n        }, i.prototype.emit = function (t, e, n, r, i, o) {\n          if (!this._events || !this._events[t]) return !1;\n          var s,\n              a,\n              c = this._events[t],\n              u = arguments.length;\n\n          if (\"function\" == typeof c.fn) {\n            switch (c.once && this.removeListener(t, c.fn, !0), u) {\n              case 1:\n                return c.fn.call(c.context), !0;\n\n              case 2:\n                return c.fn.call(c.context, e), !0;\n\n              case 3:\n                return c.fn.call(c.context, e, n), !0;\n\n              case 4:\n                return c.fn.call(c.context, e, n, r), !0;\n\n              case 5:\n                return c.fn.call(c.context, e, n, r, i), !0;\n\n              case 6:\n                return c.fn.call(c.context, e, n, r, i, o), !0;\n            }\n\n            for (a = 1, s = new Array(u - 1); a < u; a++) s[a - 1] = arguments[a];\n\n            c.fn.apply(c.context, s);\n          } else {\n            var l,\n                f = c.length;\n\n            for (a = 0; a < f; a++) switch (c[a].once && this.removeListener(t, c[a].fn, !0), u) {\n              case 1:\n                c[a].fn.call(c[a].context);\n                break;\n\n              case 2:\n                c[a].fn.call(c[a].context, e);\n                break;\n\n              case 3:\n                c[a].fn.call(c[a].context, e, n);\n                break;\n\n              default:\n                if (!s) for (l = 1, s = new Array(u - 1); l < u; l++) s[l - 1] = arguments[l];\n                c[a].fn.apply(c[a].context, s);\n            }\n          }\n\n          return !0;\n        }, i.prototype.on = function (t, e, n) {\n          var i = new r(e, n || this);\n          return this._events || (this._events = {}), this._events[t] ? this._events[t].fn ? this._events[t] = [this._events[t], i] : this._events[t].push(i) : this._events[t] = i, this;\n        }, i.prototype.once = function (t, e, n) {\n          var i = new r(e, n || this, !0);\n          return this._events || (this._events = {}), this._events[t] ? this._events[t].fn ? this._events[t] = [this._events[t], i] : this._events[t].push(i) : this._events[t] = i, this;\n        }, i.prototype.removeListener = function (t, e, n) {\n          if (!this._events || !this._events[t]) return this;\n          var r = this._events[t],\n              i = [];\n          if (e && (r.fn && (r.fn !== e || n && !r.once) && i.push(r), !r.fn)) for (var o = 0, s = r.length; o < s; o++) (r[o].fn !== e || n && !r[o].once) && i.push(r[o]);\n          return i.length ? this._events[t] = 1 === i.length ? i[0] : i : delete this._events[t], this;\n        }, i.prototype.removeAllListeners = function (t) {\n          return this._events ? (t ? delete this._events[t] : this._events = {}, this) : this;\n        }, i.prototype.off = i.prototype.removeListener, i.prototype.addListener = i.prototype.on, i.prototype.setMaxListeners = function () {\n          return this;\n        }, i.EventEmitter = i, i.EventEmitter2 = i, i.EventEmitter3 = i, e.exports = i;\n      }, {}],\n      3: [function (t, e, n) {\n        e.exports.Dispatcher = t(\"./lib/Dispatcher\");\n      }, {\n        \"./lib/Dispatcher\": 4\n      }],\n      4: [function (t, e, n) {\n        var r = t(\"./invariant\"),\n            i = 1;\n\n        function o() {\n          this.$Dispatcher_callbacks = {}, this.$Dispatcher_isPending = {}, this.$Dispatcher_isHandled = {}, this.$Dispatcher_isDispatching = !1, this.$Dispatcher_pendingPayload = null;\n        }\n\n        o.prototype.register = function (t) {\n          var e = \"ID_\" + i++;\n          return this.$Dispatcher_callbacks[e] = t, e;\n        }, o.prototype.unregister = function (t) {\n          r(this.$Dispatcher_callbacks[t], \"Dispatcher.unregister(...): `%s` does not map to a registered callback.\", t), delete this.$Dispatcher_callbacks[t];\n        }, o.prototype.waitFor = function (t) {\n          r(this.$Dispatcher_isDispatching, \"Dispatcher.waitFor(...): Must be invoked while dispatching.\");\n\n          for (var e = 0; e < t.length; e++) {\n            var n = t[e];\n            this.$Dispatcher_isPending[n] ? r(this.$Dispatcher_isHandled[n], \"Dispatcher.waitFor(...): Circular dependency detected while waiting for `%s`.\", n) : (r(this.$Dispatcher_callbacks[n], \"Dispatcher.waitFor(...): `%s` does not map to a registered callback.\", n), this.$Dispatcher_invokeCallback(n));\n          }\n        }, o.prototype.dispatch = function (t) {\n          r(!this.$Dispatcher_isDispatching, \"Dispatch.dispatch(...): Cannot dispatch in the middle of a dispatch.\"), this.$Dispatcher_startDispatching(t);\n\n          try {\n            for (var e in this.$Dispatcher_callbacks) this.$Dispatcher_isPending[e] || this.$Dispatcher_invokeCallback(e);\n          } finally {\n            this.$Dispatcher_stopDispatching();\n          }\n        }, o.prototype.isDispatching = function () {\n          return this.$Dispatcher_isDispatching;\n        }, o.prototype.$Dispatcher_invokeCallback = function (t) {\n          this.$Dispatcher_isPending[t] = !0, this.$Dispatcher_callbacks[t](this.$Dispatcher_pendingPayload), this.$Dispatcher_isHandled[t] = !0;\n        }, o.prototype.$Dispatcher_startDispatching = function (t) {\n          for (var e in this.$Dispatcher_callbacks) this.$Dispatcher_isPending[e] = !1, this.$Dispatcher_isHandled[e] = !1;\n\n          this.$Dispatcher_pendingPayload = t, this.$Dispatcher_isDispatching = !0;\n        }, o.prototype.$Dispatcher_stopDispatching = function () {\n          this.$Dispatcher_pendingPayload = null, this.$Dispatcher_isDispatching = !1;\n        }, e.exports = o;\n      }, {\n        \"./invariant\": 5\n      }],\n      5: [function (t, e, n) {\n        e.exports = function (t, e, n, r, i, o, s, a) {\n          if (!t) {\n            var c;\n            if (void 0 === e) c = new Error(\"Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.\");else {\n              var u = [n, r, i, o, s, a],\n                  l = 0;\n              c = new Error(\"Invariant Violation: \" + e.replace(/%s/g, function () {\n                return u[l++];\n              }));\n            }\n            throw c.framesToPop = 1, c;\n          }\n        };\n      }, {}],\n      6: [function (t, e, n) {\n        Object.defineProperty(n, \"__esModule\", {\n          value: !0\n        });\n\n        var r = function () {\n          function t(t, e) {\n            for (var n = 0; n < e.length; n++) {\n              var r = e[n];\n              r.enumerable = r.enumerable || !1, r.configurable = !0, \"value\" in r && (r.writable = !0), Object.defineProperty(t, r.key, r);\n            }\n          }\n\n          return function (e, n, r) {\n            return n && t(e.prototype, n), r && t(e, r), e;\n          };\n        }();\n\n        function i(t) {\n          if (t && t.__esModule) return t;\n          var e = {};\n          if (null != t) for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);\n          return e.default = t, e;\n        }\n\n        n.default = function (t, e, n, r, i) {\n          var o = u.uid(t[c.ACTIONS_REGISTRY], e + \".\" + n);\n          t[c.ACTIONS_REGISTRY][o] = 1;\n          var s = a.default.for(\"alt/\" + o),\n              f = {\n            namespace: e,\n            name: n,\n            id: o,\n            symbol: s\n          },\n              h = new l(t, s, r, i, f),\n              p = h[c.ACTION_HANDLER];\n          p.defer = function () {\n            for (var t = arguments.length, e = Array(t), n = 0; n < t; n++) e[n] = arguments[n];\n\n            setTimeout(function () {\n              h[c.ACTION_HANDLER].apply(null, e);\n            });\n          }, p[c.ACTION_KEY] = s, p.data = f;\n          var d = t.actions[e],\n              v = u.uid(d, n);\n          return d[v] = p, p;\n        };\n\n        var o,\n            s = t(\"es-symbol\"),\n            a = (o = s) && o.__esModule ? o : {\n          default: o\n        },\n            c = i(t(\"../symbols/symbols\")),\n            u = i(t(\"../utils/AltUtils\")),\n            l = function () {\n          function t(e, n, r, i, o) {\n            !function (t, e) {\n              if (!(t instanceof e)) throw new TypeError(\"Cannot call a class as a function\");\n            }(this, t), this[c.ACTION_UID] = n, this[c.ACTION_HANDLER] = r.bind(this), this.actions = i, this.actionDetails = o, this.alt = e;\n          }\n\n          return r(t, [{\n            key: \"dispatch\",\n            value: function (t) {\n              this.alt.dispatch(this[c.ACTION_UID], t, this.actionDetails);\n            }\n          }]), t;\n        }();\n\n        e.exports = n.default;\n      }, {\n        \"../symbols/symbols\": 10,\n        \"../utils/AltUtils\": 11,\n        \"es-symbol\": 1\n      }],\n      7: [function (t, e, n) {\n        Object.defineProperty(n, \"__esModule\", {\n          value: !0\n        });\n\n        var r = function () {\n          function t(t, e) {\n            for (var n = 0; n < e.length; n++) {\n              var r = e[n];\n              r.enumerable = r.enumerable || !1, r.configurable = !0, \"value\" in r && (r.writable = !0), Object.defineProperty(t, r.key, r);\n            }\n          }\n\n          return function (e, n, r) {\n            return n && t(e.prototype, n), r && t(e, r), e;\n          };\n        }();\n\n        function i(t) {\n          if (t && t.__esModule) return t;\n          var e = {};\n          if (null != t) for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);\n          return e.default = t, e;\n        }\n\n        function o(t) {\n          return t && t.__esModule ? t : {\n            default: t\n          };\n        }\n\n        var s = o(t(\"eventemitter3\")),\n            a = o(t(\"es-symbol\")),\n            c = i(t(\"../symbols/symbols\")),\n            u = i(t(\"../../utils/functions\")),\n            l = (0, a.default)(),\n            f = function () {\n          function t(e, n, r, i) {\n            var o = this;\n            !function (t, e) {\n              if (!(t instanceof e)) throw new TypeError(\"Cannot call a class as a function\");\n            }(this, t), this[l] = new s.default(), this[c.LIFECYCLE] = n[c.LIFECYCLE], this[c.STATE_CONTAINER] = r || n, this._storeName = n._storeName, this.boundListeners = n[c.ALL_LISTENERS], this.StoreModel = i, u.assign(this, n[c.PUBLIC_METHODS]), this.dispatchToken = e.dispatcher.register(function (t) {\n              if (o[c.LIFECYCLE].emit(\"beforeEach\", t, o[c.STATE_CONTAINER]), n[c.LISTENERS][t.action]) {\n                var e = !1;\n\n                try {\n                  e = n[c.LISTENERS][t.action](t.data);\n                } catch (e) {\n                  if (!n[c.HANDLING_ERRORS]) throw e;\n                  o[c.LIFECYCLE].emit(\"error\", e, t, o[c.STATE_CONTAINER]);\n                }\n\n                !1 !== e && o.emitChange();\n              }\n\n              o[c.LIFECYCLE].emit(\"afterEach\", t, o[c.STATE_CONTAINER]);\n            }), this[c.LIFECYCLE].emit(\"init\");\n          }\n\n          return r(t, [{\n            key: \"getEventEmitter\",\n            value: function () {\n              return this[l];\n            }\n          }, {\n            key: \"emitChange\",\n            value: function () {\n              this[l].emit(\"change\", this[c.STATE_CONTAINER]);\n            }\n          }, {\n            key: \"listen\",\n            value: function (t) {\n              var e = this;\n              return this[l].on(\"change\", t), function () {\n                return e.unlisten(t);\n              };\n            }\n          }, {\n            key: \"unlisten\",\n            value: function (t) {\n              this[c.LIFECYCLE].emit(\"unlisten\"), this[l].removeListener(\"change\", t);\n            }\n          }, {\n            key: \"getState\",\n            value: function () {\n              return this.StoreModel.config.getState.call(this, this[c.STATE_CONTAINER]);\n            }\n          }]), t;\n        }();\n\n        n.default = f, e.exports = n.default;\n      }, {\n        \"../../utils/functions\": 13,\n        \"../symbols/symbols\": 10,\n        \"es-symbol\": 1,\n        eventemitter3: 2\n      }],\n      8: [function (t, e, n) {\n        function r(t) {\n          if (t && t.__esModule) return t;\n          var e = {};\n          if (null != t) for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);\n          return e.default = t, e;\n        }\n\n        Object.defineProperty(n, \"__esModule\", {\n          value: !0\n        });\n        var i,\n            o = t(\"es-symbol\"),\n            s = (i = o) && i.__esModule ? i : {\n          default: i\n        },\n            a = r(t(\"../symbols/symbols\")),\n            c = r(t(\"../../utils/functions\")),\n            u = {\n          waitFor: function () {\n            for (var t = arguments.length, e = Array(t), n = 0; n < t; n++) e[n] = arguments[n];\n\n            if (!e.length) throw new ReferenceError(\"Dispatch tokens not provided\");\n            var r = e;\n            1 === e.length && (r = Array.isArray(e[0]) ? e[0] : e);\n            var i = r.map(function (t) {\n              return t.dispatchToken || t;\n            });\n            this.dispatcher.waitFor(i);\n          },\n          exportAsync: function (t) {\n            this.registerAsync(t);\n          },\n          registerAsync: function (t) {\n            var e = this,\n                n = 0,\n                r = c.isFunction(t) ? t(this.alt) : t,\n                i = Object.keys(r).reduce(function (t, i) {\n              var o = r[i],\n                  s = c.isFunction(o) ? o(e) : o;\n              return [\"success\", \"error\", \"loading\"].forEach(function (t) {\n                if (s[t] && !s[t][a.ACTION_KEY]) throw new Error(t + \" handler must be an action function\");\n              }), t[i] = function () {\n                for (var t = arguments.length, r = Array(t), i = 0; i < t; i++) r[i] = arguments[i];\n\n                var o = e.getInstance().getState(),\n                    a = s.local && s.local.apply(s, [o].concat(r)),\n                    c = s.shouldFetch ? s.shouldFetch.apply(s, [o].concat(r)) : !a,\n                    u = s.interceptResponse || function (t) {\n                  return t;\n                };\n\n                c ? (n += 1, s.loading && s.loading(u(null, s.loading)), s.remote.apply(s, [o].concat(r)).then(function (t) {\n                  n -= 1, s.success(u(t, s.success));\n                }).catch(function (t) {\n                  n -= 1, s.error(u(t, s.error));\n                })) : e.emitChange();\n              }, t;\n            }, {});\n            this.exportPublicMethods(i), this.exportPublicMethods({\n              isLoading: function () {\n                return n > 0;\n              }\n            });\n          },\n          exportPublicMethods: function (t) {\n            var e = this;\n            c.eachObject(function (t, n) {\n              if (!c.isFunction(n)) throw new TypeError(\"exportPublicMethods expects a function\");\n              e[a.PUBLIC_METHODS][t] = n;\n            }, [t]);\n          },\n          emitChange: function () {\n            this.getInstance().emitChange();\n          },\n          on: function (t, e) {\n            \"error\" === t && (this[a.HANDLING_ERRORS] = !0), this[a.LIFECYCLE].on(t, e.bind(this));\n          },\n          bindAction: function (t, e) {\n            if (!t) throw new ReferenceError(\"Invalid action reference passed in\");\n            if (!c.isFunction(e)) throw new TypeError(\"bindAction expects a function\");\n            if (e.length > 1) throw new TypeError(\"Action handler in store \" + this._storeName + \" for \" + (t[a.ACTION_KEY] || t).toString() + \" was defined with two parameters. Only a single parameter is passed through the dispatcher, did you mean to pass in an Object instead?\");\n            var n = t[a.ACTION_KEY] ? t[a.ACTION_KEY] : t;\n            this[a.LISTENERS][n] = e.bind(this), this[a.ALL_LISTENERS].push(s.default.keyFor(n));\n          },\n          bindActions: function (t) {\n            var e = this;\n            c.eachObject(function (t, n) {\n              var r = t.replace(/./, function (t) {\n                return \"on\" + t[0].toUpperCase();\n              }),\n                  i = null;\n              if (e[t] && e[r]) throw new ReferenceError(\"You have multiple action handlers bound to an action: \" + t + \" and \" + r);\n              e[t] ? i = e[t] : e[r] && (i = e[r]), i && e.bindAction(n, i);\n            }, [t]);\n          },\n          bindListeners: function (t) {\n            var e = this;\n            c.eachObject(function (t, n) {\n              var r = e[t];\n              if (!r) throw new ReferenceError(t + \" defined but does not exist in \" + e._storeName);\n              Array.isArray(n) ? n.forEach(function (t) {\n                e.bindAction(t, r);\n              }) : e.bindAction(n, r);\n            }, [t]);\n          }\n        };\n        n.default = u, e.exports = n.default;\n      }, {\n        \"../../utils/functions\": 13,\n        \"../symbols/symbols\": 10,\n        \"es-symbol\": 1\n      }],\n      9: [function (t, e, n) {\n        Object.defineProperty(n, \"__esModule\", {\n          value: !0\n        });\n\n        var r = Function.prototype.bind,\n            i = function (t, e, n) {\n          for (var r = !0; r;) {\n            var i = t,\n                o = e,\n                s = n;\n            u = c = void 0, r = !1;\n            var a = Object.getOwnPropertyDescriptor(i, o);\n\n            if (void 0 !== a) {\n              if (\"value\" in a) return a.value;\n              var c = a.get;\n              if (void 0 === c) return;\n              return c.call(s);\n            }\n\n            var u = Object.getPrototypeOf(i);\n            if (null === u) return;\n            t = u, e = o, n = s, r = !0;\n          }\n        };\n\n        function o(t) {\n          if (t && t.__esModule) return t;\n          var e = {};\n          if (null != t) for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);\n          return e.default = t, e;\n        }\n\n        function s(t) {\n          return t && t.__esModule ? t : {\n            default: t\n          };\n        }\n\n        n.createStoreConfig = function (t, e) {\n          e.config = l.assign({\n            getState: function (t) {\n              return l.assign({}, t);\n            },\n            setState: l.assign\n          }, t, e.config);\n        }, n.transformStore = function (t, e) {\n          return t.reduce(function (t, e) {\n            return e(t);\n          }, e);\n        }, n.createStoreFromObject = function (t, e, n) {\n          var r = void 0,\n              i = d({}, t, n, l.assign({\n            getInstance: function () {\n              return r;\n            },\n            setState: function (t) {\n              p(this, r, t);\n            }\n          }, e));\n          i.bindListeners && h.default.bindListeners.call(i, i.bindListeners);\n          i.lifecycle && l.eachObject(function (t, e) {\n            h.default.on.call(i, t, e);\n          }, [i.lifecycle]);\n          return r = l.assign(new f.default(t, i, i.state, e), i.publicMethods, {\n            displayName: n\n          });\n        }, n.createStoreFromClass = function (t, e, n) {\n          for (var o = arguments.length, s = Array(o > 3 ? o - 3 : 0), a = 3; a < o; a++) s[a - 3] = arguments[a];\n\n          var c = void 0,\n              h = e.config,\n              v = function (t) {\n            function e() {\n              for (var t = arguments.length, n = Array(t), r = 0; r < t; r++) n[r] = arguments[r];\n\n              !function (t, e) {\n                if (!(t instanceof e)) throw new TypeError(\"Cannot call a class as a function\");\n              }(this, e), i(Object.getPrototypeOf(e.prototype), \"constructor\", this).apply(this, n);\n            }\n\n            return function (t, e) {\n              if (\"function\" != typeof e && null !== e) throw new TypeError(\"Super expression must either be null or a function, not \" + typeof e);\n              t.prototype = Object.create(e && e.prototype, {\n                constructor: {\n                  value: t,\n                  enumerable: !1,\n                  writable: !0,\n                  configurable: !0\n                }\n              }), e && (t.__proto__ = e);\n            }(e, t), e;\n          }(e);\n\n          d(v.prototype, t, n, {\n            getInstance: function () {\n              return c;\n            },\n            setState: function (t) {\n              p(this, c, t);\n            }\n          });\n          var y = new (r.apply(v, [null].concat(s)))();\n          h.bindListeners && y.bindListeners(h.bindListeners);\n          h.datasource && y.exportAsync(h.datasource);\n          return c = l.assign(new f.default(t, y, y[t.config.stateKey] || y[h.stateKey] || null, e), u.getInternalMethods(e), h.publicMethods, {\n            displayName: n\n          });\n        };\n        var a = s(t(\"eventemitter3\")),\n            c = o(t(\"../symbols/symbols\")),\n            u = o(t(\"../utils/AltUtils\")),\n            l = o(t(\"../../utils/functions\")),\n            f = s(t(\"./AltStore\")),\n            h = s(t(\"./StoreMixin\"));\n\n        function p(t, e, n) {\n          if (n) {\n            var r = e.StoreModel.config,\n                i = l.isFunction(n) ? n(e[c.STATE_CONTAINER]) : n;\n            e[c.STATE_CONTAINER] = r.setState.call(t, e[c.STATE_CONTAINER], i), t.alt.dispatcher.isDispatching() || t.emitChange();\n          }\n        }\n\n        function d(t, e, n, r) {\n          return t[c.ALL_LISTENERS] = [], t[c.LIFECYCLE] = new a.default(), t[c.LISTENERS] = {}, t[c.PUBLIC_METHODS] = {}, l.assign(t, h.default, {\n            _storeName: n,\n            alt: e,\n            dispatcher: e.dispatcher\n          }, r);\n        }\n      }, {\n        \"../../utils/functions\": 13,\n        \"../symbols/symbols\": 10,\n        \"../utils/AltUtils\": 11,\n        \"./AltStore\": 7,\n        \"./StoreMixin\": 8,\n        eventemitter3: 2\n      }],\n      10: [function (t, e, n) {\n        Object.defineProperty(n, \"__esModule\", {\n          value: !0\n        });\n        var r,\n            i = t(\"es-symbol\"),\n            o = (r = i) && r.__esModule ? r : {\n          default: r\n        },\n            s = (0, o.default)();\n        n.ACTION_HANDLER = s;\n        var a = (0, o.default)();\n        n.ACTION_KEY = a;\n        var c = (0, o.default)();\n        n.ACTIONS_REGISTRY = c;\n        var u = (0, o.default)();\n        n.ACTION_UID = u;\n        var l = (0, o.default)();\n        n.ALL_LISTENERS = l;\n        var f = (0, o.default)();\n        n.HANDLING_ERRORS = f;\n        var h = (0, o.default)();\n        n.INIT_SNAPSHOT = h;\n        var p = (0, o.default)();\n        n.LAST_SNAPSHOT = p;\n        var d = (0, o.default)();\n        n.LIFECYCLE = d;\n        var v = (0, o.default)();\n        n.LISTENERS = v;\n        var y = (0, o.default)();\n        n.PUBLIC_METHODS = y;\n\n        var _ = (0, o.default)();\n\n        n.STATE_CONTAINER = _;\n      }, {\n        \"es-symbol\": 1\n      }],\n      11: [function (t, e, n) {\n        function r() {}\n\n        Object.defineProperty(n, \"__esModule\", {\n          value: !0\n        }), n.getInternalMethods = function (t, e) {\n          var n = e ? o : i,\n              r = e ? t.prototype : t;\n          return Object.getOwnPropertyNames(r).reduce(function (t, e) {\n            return -1 !== n.indexOf(e) ? t : (t[e] = r[e], t);\n          }, {});\n        }, n.warn = function (t) {\n          \"undefined\" != typeof console && console.warn(new ReferenceError(t));\n        }, n.uid = function (t, e) {\n          var n = 0,\n              r = e;\n\n          for (; Object.hasOwnProperty.call(t, r);) r = e + String(++n);\n\n          return r;\n        }, n.formatAsConstant = function (t) {\n          return t.replace(/[a-z]([A-Z])/g, function (t) {\n            return t[0] + \"_\" + t[1].toLowerCase();\n          }).toUpperCase();\n        }, n.dispatchIdentity = function (t) {\n          for (var e = arguments.length, n = Array(e > 1 ? e - 1 : 0), r = 1; r < e; r++) n[r - 1] = arguments[r];\n\n          this.dispatch(n.length ? [t].concat(n) : t);\n        };\n        var i = Object.getOwnPropertyNames(r),\n            o = Object.getOwnPropertyNames(r.prototype);\n      }, {}],\n      12: [function (t, e, n) {\n        function r(t) {\n          if (t && t.__esModule) return t;\n          var e = {};\n          if (null != t) for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);\n          return e.default = t, e;\n        }\n\n        Object.defineProperty(n, \"__esModule\", {\n          value: !0\n        }), n.setAppState = function (t, e, n) {\n          var r = t.deserialize(e);\n          o.eachObject(function (e, s) {\n            var a,\n                c,\n                u = t.stores[e];\n            u && (a = u.StoreModel.config, c = u[i.STATE_CONTAINER], a.onDeserialize && (r[e] = a.onDeserialize(s) || s), o.eachObject(function (t) {\n              return delete c[t];\n            }, [c]), o.assign(c, r[e]), n(u));\n          }, [r]);\n        }, n.snapshot = function (t) {\n          var e = void 0 === arguments[1] ? [] : arguments[1];\n          return (e.length ? e : Object.keys(t.stores)).reduce(function (e, n) {\n            var r = n.displayName || n,\n                o = t.stores[r],\n                s = o.StoreModel.config;\n            o[i.LIFECYCLE].emit(\"snapshot\");\n            var a = s.onSerialize && s.onSerialize(o[i.STATE_CONTAINER]);\n            return e[r] = a || o.getState(), e;\n          }, {});\n        }, n.saveInitialSnapshot = function (t, e) {\n          var n = t.deserialize(t.serialize(t.stores[e][i.STATE_CONTAINER]));\n          t[i.INIT_SNAPSHOT][e] = n, t[i.LAST_SNAPSHOT][e] = n;\n        }, n.filterSnapshots = function (t, e, n) {\n          return n.reduce(function (t, n) {\n            var r = n.displayName || n;\n            if (!e[r]) throw new ReferenceError(r + \" is not a valid store\");\n            return t[r] = e[r], t;\n          }, {});\n        };\n        var i = r(t(\"../symbols/symbols\")),\n            o = r(t(\"../../utils/functions\"));\n      }, {\n        \"../../utils/functions\": 13,\n        \"../symbols/symbols\": 10\n      }],\n      13: [function (t, e, n) {\n        Object.defineProperty(n, \"__esModule\", {\n          value: !0\n        }), n.eachObject = r, n.assign = function (t) {\n          for (var e = arguments.length, n = Array(e > 1 ? e - 1 : 0), i = 1; i < e; i++) n[i - 1] = arguments[i];\n\n          return r(function (e, n) {\n            return t[e] = n;\n          }, n), t;\n        };\n\n        function r(t, e) {\n          e.forEach(function (e) {\n            Object.keys(Object(e)).forEach(function (n) {\n              t(n, e[n]);\n            });\n          });\n        }\n\n        n.isFunction = function (t) {\n          return \"function\" == typeof t;\n        };\n      }, {}],\n      14: [function (t, e, n) {\n        Object.defineProperty(n, \"__esModule\", {\n          value: !0\n        });\n\n        var r = Function.prototype.bind,\n            i = function (t, e, n) {\n          for (var r = !0; r;) {\n            var i = t,\n                o = e,\n                s = n;\n            u = c = void 0, r = !1;\n            var a = Object.getOwnPropertyDescriptor(i, o);\n\n            if (void 0 !== a) {\n              if (\"value\" in a) return a.value;\n              var c = a.get;\n              if (void 0 === c) return;\n              return c.call(s);\n            }\n\n            var u = Object.getPrototypeOf(i);\n            if (null === u) return;\n            t = u, e = o, n = s, r = !0;\n          }\n        },\n            o = function () {\n          function t(t, e) {\n            for (var n = 0; n < e.length; n++) {\n              var r = e[n];\n              r.enumerable = r.enumerable || !1, r.configurable = !0, \"value\" in r && (r.writable = !0), Object.defineProperty(t, r.key, r);\n            }\n          }\n\n          return function (e, n, r) {\n            return n && t(e.prototype, n), r && t(e, r), e;\n          };\n        }();\n\n        function s(t) {\n          if (t && t.__esModule) return t;\n          var e = {};\n          if (null != t) for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);\n          return e.default = t, e;\n        }\n\n        function a(t, e) {\n          if (!(t instanceof e)) throw new TypeError(\"Cannot call a class as a function\");\n        }\n\n        var c,\n            u = t(\"flux\"),\n            l = s(t(\"./utils/StateFunctions\")),\n            f = s(t(\"./symbols/symbols\")),\n            h = s(t(\"../utils/functions\")),\n            p = s(t(\"./store\")),\n            d = s(t(\"./utils/AltUtils\")),\n            v = t(\"./actions\"),\n            y = (c = v) && c.__esModule ? c : {\n          default: c\n        },\n            _ = function () {\n          function t() {\n            var e = void 0 === arguments[0] ? {} : arguments[0];\n            a(this, t), this.config = e, this.serialize = e.serialize || JSON.stringify, this.deserialize = e.deserialize || JSON.parse, this.dispatcher = e.dispatcher || new u.Dispatcher(), this.actions = {\n              global: {}\n            }, this.stores = {}, this.storeTransforms = e.storeTransforms || [], this[f.ACTIONS_REGISTRY] = {}, this[f.INIT_SNAPSHOT] = {}, this[f.LAST_SNAPSHOT] = {};\n          }\n\n          return o(t, [{\n            key: \"dispatch\",\n            value: function (t, e, n) {\n              this.dispatcher.dispatch({\n                action: t,\n                data: e,\n                details: n\n              });\n            }\n          }, {\n            key: \"createUnsavedStore\",\n            value: function (t) {\n              for (var e = arguments.length, n = Array(e > 1 ? e - 1 : 0), r = 1; r < e; r++) n[r - 1] = arguments[r];\n\n              var i = t.displayName || \"\";\n              p.createStoreConfig(this.config, t);\n              var o = p.transformStore(this.storeTransforms, t);\n              return h.isFunction(o) ? p.createStoreFromClass.apply(p, [this, o, i].concat(n)) : p.createStoreFromObject(this, o, i);\n            }\n          }, {\n            key: \"createStore\",\n            value: function (t, e) {\n              for (var n = arguments.length, r = Array(n > 2 ? n - 2 : 0), i = 2; i < n; i++) r[i - 2] = arguments[i];\n\n              var o = e || t.displayName || t.name || \"\";\n              p.createStoreConfig(this.config, t);\n              var s = p.transformStore(this.storeTransforms, t);\n              !this.stores[o] && o || (this.stores[o] ? d.warn(\"A store named \" + o + \" already exists, double check your store names or pass in your own custom identifier for each store\") : d.warn(\"Store name was not specified\"), o = d.uid(this.stores, o));\n              var a = h.isFunction(s) ? p.createStoreFromClass.apply(p, [this, s, o].concat(r)) : p.createStoreFromObject(this, s, o);\n              return this.stores[o] = a, l.saveInitialSnapshot(this, o), a;\n            }\n          }, {\n            key: \"generateActions\",\n            value: function () {\n              for (var t = arguments.length, e = Array(t), n = 0; n < t; n++) e[n] = arguments[n];\n\n              return this.createActions(e.reduce(function (t, e) {\n                return t[e] = d.dispatchIdentity, t;\n              }, {\n                name: \"global\"\n              }));\n            }\n          }, {\n            key: \"createAction\",\n            value: function (t, e, n) {\n              return (0, y.default)(this, \"global\", t, e, n);\n            }\n          }, {\n            key: \"createActions\",\n            value: function (t) {\n              for (var e = arguments.length, n = Array(e > 2 ? e - 2 : 0), s = 2; s < e; s++) n[s - 2] = arguments[s];\n\n              var c = this,\n                  u = void 0 === arguments[1] ? {} : arguments[1],\n                  l = {},\n                  p = d.uid(this[f.ACTIONS_REGISTRY], t.displayName || t.name || \"Unknown\");\n              return h.isFunction(t) ? function () {\n                h.assign(l, d.getInternalMethods(t, !0));\n\n                var e = function (e) {\n                  function n() {\n                    for (var t = arguments.length, e = Array(t), r = 0; r < t; r++) e[r] = arguments[r];\n\n                    a(this, n), i(Object.getPrototypeOf(n.prototype), \"constructor\", this).apply(this, e);\n                  }\n\n                  return function (t, e) {\n                    if (\"function\" != typeof e && null !== e) throw new TypeError(\"Super expression must either be null or a function, not \" + typeof e);\n                    t.prototype = Object.create(e && e.prototype, {\n                      constructor: {\n                        value: t,\n                        enumerable: !1,\n                        writable: !0,\n                        configurable: !0\n                      }\n                    }), e && (t.__proto__ = e);\n                  }(n, t), o(n, [{\n                    key: \"generateActions\",\n                    value: function () {\n                      for (var t = arguments.length, e = Array(t), n = 0; n < t; n++) e[n] = arguments[n];\n\n                      e.forEach(function (t) {\n                        l[t] = d.dispatchIdentity;\n                      });\n                    }\n                  }]), n;\n                }();\n\n                h.assign(l, new (r.apply(e, [null].concat(n)))());\n              }() : h.assign(l, t), this.actions[p] = this.actions[p] || {}, h.eachObject(function (t, e) {\n                if (h.isFunction(e)) {\n                  u[t] = (0, y.default)(c, p, t, e, u);\n                  var n = d.formatAsConstant(t);\n                  u[n] = u[t][f.ACTION_KEY];\n                }\n              }, [l]), u;\n            }\n          }, {\n            key: \"takeSnapshot\",\n            value: function () {\n              for (var t = arguments.length, e = Array(t), n = 0; n < t; n++) e[n] = arguments[n];\n\n              var r = l.snapshot(this, e);\n              return h.assign(this[f.LAST_SNAPSHOT], r), this.serialize(r);\n            }\n          }, {\n            key: \"rollback\",\n            value: function () {\n              l.setAppState(this, this.serialize(this[f.LAST_SNAPSHOT]), function (t) {\n                t[f.LIFECYCLE].emit(\"rollback\"), t.emitChange();\n              });\n            }\n          }, {\n            key: \"recycle\",\n            value: function () {\n              for (var t = arguments.length, e = Array(t), n = 0; n < t; n++) e[n] = arguments[n];\n\n              var r = e.length ? l.filterSnapshots(this, this[f.INIT_SNAPSHOT], e) : this[f.INIT_SNAPSHOT];\n              l.setAppState(this, this.serialize(r), function (t) {\n                t[f.LIFECYCLE].emit(\"init\"), t.emitChange();\n              });\n            }\n          }, {\n            key: \"flush\",\n            value: function () {\n              var t = this.serialize(l.snapshot(this));\n              return this.recycle(), t;\n            }\n          }, {\n            key: \"bootstrap\",\n            value: function (t) {\n              l.setAppState(this, t, function (t) {\n                t[f.LIFECYCLE].emit(\"bootstrap\"), t.emitChange();\n              });\n            }\n          }, {\n            key: \"prepare\",\n            value: function (t, e) {\n              var n = {};\n              if (!t.displayName) throw new ReferenceError(\"Store provided does not have a name\");\n              return n[t.displayName] = e, this.serialize(n);\n            }\n          }, {\n            key: \"addActions\",\n            value: function (t, e) {\n              for (var n = arguments.length, r = Array(n > 2 ? n - 2 : 0), i = 2; i < n; i++) r[i - 2] = arguments[i];\n\n              this.actions[t] = Array.isArray(e) ? this.generateActions.apply(this, e) : this.createActions.apply(this, [e].concat(r));\n            }\n          }, {\n            key: \"addStore\",\n            value: function (t, e) {\n              for (var n = arguments.length, r = Array(n > 2 ? n - 2 : 0), i = 2; i < n; i++) r[i - 2] = arguments[i];\n\n              this.createStore.apply(this, [e, t].concat(r));\n            }\n          }, {\n            key: \"getActions\",\n            value: function (t) {\n              return this.actions[t];\n            }\n          }, {\n            key: \"getStore\",\n            value: function (t) {\n              return this.stores[t];\n            }\n          }]), t;\n        }();\n\n        n.default = _, e.exports = n.default;\n      }, {\n        \"../utils/functions\": 13,\n        \"./actions\": 6,\n        \"./store\": 9,\n        \"./symbols/symbols\": 10,\n        \"./utils/AltUtils\": 11,\n        \"./utils/StateFunctions\": 12,\n        flux: 3\n      }]\n    }, {}, [14])(14);\n  });\n});\nvar Alt = unwrapExports(alt_min);\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nvar alt = new Alt();\n\nalt.serialize = function () {\n  return '';\n};\n\nalt.deserialize = function () {\n  return '';\n}; // Polyfills\n\n\nif (Number.EPSILON === undefined) {\n  Number.EPSILON = Math.pow(2, -52);\n}\n\nif (Number.isInteger === undefined) {\n  // Missing in IE\n  // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/isInteger\n  Number.isInteger = function (value) {\n    return typeof value === 'number' && isFinite(value) && Math.floor(value) === value;\n  };\n} //\n\n\nif (Math.sign === undefined) {\n  // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/sign\n  Math.sign = function (x) {\n    return x < 0 ? -1 : x > 0 ? 1 : +x;\n  };\n}\n\nif ('name' in Function.prototype === false) {\n  // Missing in IE\n  // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/name\n  Object.defineProperty(Function.prototype, 'name', {\n    get: function () {\n      return this.toString().match(/^\\s*function\\s*([^\\(\\s]*)/)[1];\n    }\n  });\n}\n\nif (Object.assign === undefined) {\n  // Missing in IE\n  // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\n  Object.assign = function (target) {\n    if (target === undefined || target === null) {\n      throw new TypeError('Cannot convert undefined or null to object');\n    }\n\n    var output = Object(target);\n\n    for (var index = 1; index < arguments.length; index++) {\n      var source = arguments[index];\n\n      if (source !== undefined && source !== null) {\n        for (var nextKey in source) {\n          if (Object.prototype.hasOwnProperty.call(source, nextKey)) {\n            output[nextKey] = source[nextKey];\n          }\n        }\n      }\n    }\n\n    return output;\n  };\n}\n\nvar REVISION = '114';\nvar MOUSE = {\n  LEFT: 0,\n  MIDDLE: 1,\n  RIGHT: 2,\n  ROTATE: 0,\n  DOLLY: 1,\n  PAN: 2\n};\nvar TOUCH = {\n  ROTATE: 0,\n  PAN: 1,\n  DOLLY_PAN: 2,\n  DOLLY_ROTATE: 3\n};\nvar CullFaceNone = 0;\nvar CullFaceBack = 1;\nvar CullFaceFront = 2;\nvar CullFaceFrontBack = 3;\nvar FrontFaceDirectionCW = 0;\nvar FrontFaceDirectionCCW = 1;\nvar BasicShadowMap = 0;\nvar PCFShadowMap = 1;\nvar PCFSoftShadowMap = 2;\nvar VSMShadowMap = 3;\nvar FrontSide = 0;\nvar BackSide = 1;\nvar DoubleSide = 2;\nvar FlatShading = 1;\nvar SmoothShading = 2;\nvar NoBlending = 0;\nvar NormalBlending = 1;\nvar AdditiveBlending = 2;\nvar SubtractiveBlending = 3;\nvar MultiplyBlending = 4;\nvar CustomBlending = 5;\nvar AddEquation = 100;\nvar SubtractEquation = 101;\nvar ReverseSubtractEquation = 102;\nvar MinEquation = 103;\nvar MaxEquation = 104;\nvar ZeroFactor = 200;\nvar OneFactor = 201;\nvar SrcColorFactor = 202;\nvar OneMinusSrcColorFactor = 203;\nvar SrcAlphaFactor = 204;\nvar OneMinusSrcAlphaFactor = 205;\nvar DstAlphaFactor = 206;\nvar OneMinusDstAlphaFactor = 207;\nvar DstColorFactor = 208;\nvar OneMinusDstColorFactor = 209;\nvar SrcAlphaSaturateFactor = 210;\nvar NeverDepth = 0;\nvar AlwaysDepth = 1;\nvar LessDepth = 2;\nvar LessEqualDepth = 3;\nvar EqualDepth = 4;\nvar GreaterEqualDepth = 5;\nvar GreaterDepth = 6;\nvar NotEqualDepth = 7;\nvar MultiplyOperation = 0;\nvar MixOperation = 1;\nvar AddOperation = 2;\nvar NoToneMapping = 0;\nvar LinearToneMapping = 1;\nvar ReinhardToneMapping = 2;\nvar Uncharted2ToneMapping = 3;\nvar CineonToneMapping = 4;\nvar ACESFilmicToneMapping = 5;\nvar UVMapping = 300;\nvar CubeReflectionMapping = 301;\nvar CubeRefractionMapping = 302;\nvar EquirectangularReflectionMapping = 303;\nvar EquirectangularRefractionMapping = 304;\nvar SphericalReflectionMapping = 305;\nvar CubeUVReflectionMapping = 306;\nvar CubeUVRefractionMapping = 307;\nvar RepeatWrapping = 1000;\nvar ClampToEdgeWrapping = 1001;\nvar MirroredRepeatWrapping = 1002;\nvar NearestFilter = 1003;\nvar NearestMipmapNearestFilter = 1004;\nvar NearestMipMapNearestFilter = 1004;\nvar NearestMipmapLinearFilter = 1005;\nvar NearestMipMapLinearFilter = 1005;\nvar LinearFilter = 1006;\nvar LinearMipmapNearestFilter = 1007;\nvar LinearMipMapNearestFilter = 1007;\nvar LinearMipmapLinearFilter = 1008;\nvar LinearMipMapLinearFilter = 1008;\nvar UnsignedByteType = 1009;\nvar ByteType = 1010;\nvar ShortType = 1011;\nvar UnsignedShortType = 1012;\nvar IntType = 1013;\nvar UnsignedIntType = 1014;\nvar FloatType = 1015;\nvar HalfFloatType = 1016;\nvar UnsignedShort4444Type = 1017;\nvar UnsignedShort5551Type = 1018;\nvar UnsignedShort565Type = 1019;\nvar UnsignedInt248Type = 1020;\nvar AlphaFormat = 1021;\nvar RGBFormat = 1022;\nvar RGBAFormat = 1023;\nvar LuminanceFormat = 1024;\nvar LuminanceAlphaFormat = 1025;\nvar RGBEFormat = RGBAFormat;\nvar DepthFormat = 1026;\nvar DepthStencilFormat = 1027;\nvar RedFormat = 1028;\nvar RedIntegerFormat = 1029;\nvar RGFormat = 1030;\nvar RGIntegerFormat = 1031;\nvar RGBIntegerFormat = 1032;\nvar RGBAIntegerFormat = 1033;\nvar RGB_S3TC_DXT1_Format = 33776;\nvar RGBA_S3TC_DXT1_Format = 33777;\nvar RGBA_S3TC_DXT3_Format = 33778;\nvar RGBA_S3TC_DXT5_Format = 33779;\nvar RGB_PVRTC_4BPPV1_Format = 35840;\nvar RGB_PVRTC_2BPPV1_Format = 35841;\nvar RGBA_PVRTC_4BPPV1_Format = 35842;\nvar RGBA_PVRTC_2BPPV1_Format = 35843;\nvar RGB_ETC1_Format = 36196;\nvar RGB_ETC2_Format = 37492;\nvar RGBA_ETC2_EAC_Format = 37496;\nvar RGBA_ASTC_4x4_Format = 37808;\nvar RGBA_ASTC_5x4_Format = 37809;\nvar RGBA_ASTC_5x5_Format = 37810;\nvar RGBA_ASTC_6x5_Format = 37811;\nvar RGBA_ASTC_6x6_Format = 37812;\nvar RGBA_ASTC_8x5_Format = 37813;\nvar RGBA_ASTC_8x6_Format = 37814;\nvar RGBA_ASTC_8x8_Format = 37815;\nvar RGBA_ASTC_10x5_Format = 37816;\nvar RGBA_ASTC_10x6_Format = 37817;\nvar RGBA_ASTC_10x8_Format = 37818;\nvar RGBA_ASTC_10x10_Format = 37819;\nvar RGBA_ASTC_12x10_Format = 37820;\nvar RGBA_ASTC_12x12_Format = 37821;\nvar SRGB8_ALPHA8_ASTC_4x4_Format = 37840;\nvar SRGB8_ALPHA8_ASTC_5x4_Format = 37841;\nvar SRGB8_ALPHA8_ASTC_5x5_Format = 37842;\nvar SRGB8_ALPHA8_ASTC_6x5_Format = 37843;\nvar SRGB8_ALPHA8_ASTC_6x6_Format = 37844;\nvar SRGB8_ALPHA8_ASTC_8x5_Format = 37845;\nvar SRGB8_ALPHA8_ASTC_8x6_Format = 37846;\nvar SRGB8_ALPHA8_ASTC_8x8_Format = 37847;\nvar SRGB8_ALPHA8_ASTC_10x5_Format = 37848;\nvar SRGB8_ALPHA8_ASTC_10x6_Format = 37849;\nvar SRGB8_ALPHA8_ASTC_10x8_Format = 37850;\nvar SRGB8_ALPHA8_ASTC_10x10_Format = 37851;\nvar SRGB8_ALPHA8_ASTC_12x10_Format = 37852;\nvar SRGB8_ALPHA8_ASTC_12x12_Format = 37853;\nvar LoopOnce = 2200;\nvar LoopRepeat = 2201;\nvar LoopPingPong = 2202;\nvar InterpolateDiscrete = 2300;\nvar InterpolateLinear = 2301;\nvar InterpolateSmooth = 2302;\nvar ZeroCurvatureEnding = 2400;\nvar ZeroSlopeEnding = 2401;\nvar WrapAroundEnding = 2402;\nvar TrianglesDrawMode = 0;\nvar TriangleStripDrawMode = 1;\nvar TriangleFanDrawMode = 2;\nvar LinearEncoding = 3000;\nvar sRGBEncoding = 3001;\nvar GammaEncoding = 3007;\nvar RGBEEncoding = 3002;\nvar LogLuvEncoding = 3003;\nvar RGBM7Encoding = 3004;\nvar RGBM16Encoding = 3005;\nvar RGBDEncoding = 3006;\nvar BasicDepthPacking = 3200;\nvar RGBADepthPacking = 3201;\nvar TangentSpaceNormalMap = 0;\nvar ObjectSpaceNormalMap = 1;\nvar ZeroStencilOp = 0;\nvar KeepStencilOp = 7680;\nvar ReplaceStencilOp = 7681;\nvar IncrementStencilOp = 7682;\nvar DecrementStencilOp = 7683;\nvar IncrementWrapStencilOp = 34055;\nvar DecrementWrapStencilOp = 34056;\nvar InvertStencilOp = 5386;\nvar NeverStencilFunc = 512;\nvar LessStencilFunc = 513;\nvar EqualStencilFunc = 514;\nvar LessEqualStencilFunc = 515;\nvar GreaterStencilFunc = 516;\nvar NotEqualStencilFunc = 517;\nvar GreaterEqualStencilFunc = 518;\nvar AlwaysStencilFunc = 519;\nvar StaticDrawUsage = 35044;\nvar DynamicDrawUsage = 35048;\nvar StreamDrawUsage = 35040;\nvar StaticReadUsage = 35045;\nvar DynamicReadUsage = 35049;\nvar StreamReadUsage = 35041;\nvar StaticCopyUsage = 35046;\nvar DynamicCopyUsage = 35050;\nvar StreamCopyUsage = 35042;\n/**\n * https://github.com/mrdoob/eventdispatcher.js/\n */\n\nfunction EventDispatcher() {}\n\nObject.assign(EventDispatcher.prototype, {\n  addEventListener: function (type, listener) {\n    if (this._listeners === undefined) this._listeners = {};\n    var listeners = this._listeners;\n\n    if (listeners[type] === undefined) {\n      listeners[type] = [];\n    }\n\n    if (listeners[type].indexOf(listener) === -1) {\n      listeners[type].push(listener);\n    }\n  },\n  hasEventListener: function (type, listener) {\n    if (this._listeners === undefined) return false;\n    var listeners = this._listeners;\n    return listeners[type] !== undefined && listeners[type].indexOf(listener) !== -1;\n  },\n  removeEventListener: function (type, listener) {\n    if (this._listeners === undefined) return;\n    var listeners = this._listeners;\n    var listenerArray = listeners[type];\n\n    if (listenerArray !== undefined) {\n      var index = listenerArray.indexOf(listener);\n\n      if (index !== -1) {\n        listenerArray.splice(index, 1);\n      }\n    }\n  },\n  dispatchEvent: function (event) {\n    if (this._listeners === undefined) return;\n    var listeners = this._listeners;\n    var listenerArray = listeners[event.type];\n\n    if (listenerArray !== undefined) {\n      event.target = this;\n      var array = listenerArray.slice(0);\n\n      for (var i = 0, l = array.length; i < l; i++) {\n        array[i].call(this, event);\n      }\n    }\n  }\n});\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author thezwap\n */\n\nvar _lut = [];\n\nfor (var i = 0; i < 256; i++) {\n  _lut[i] = (i < 16 ? '0' : '') + i.toString(16);\n}\n\nvar MathUtils = {\n  DEG2RAD: Math.PI / 180,\n  RAD2DEG: 180 / Math.PI,\n  generateUUID: function () {\n    // http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript/21963136#21963136\n    var d0 = Math.random() * 0xffffffff | 0;\n    var d1 = Math.random() * 0xffffffff | 0;\n    var d2 = Math.random() * 0xffffffff | 0;\n    var d3 = Math.random() * 0xffffffff | 0;\n    var uuid = _lut[d0 & 0xff] + _lut[d0 >> 8 & 0xff] + _lut[d0 >> 16 & 0xff] + _lut[d0 >> 24 & 0xff] + '-' + _lut[d1 & 0xff] + _lut[d1 >> 8 & 0xff] + '-' + _lut[d1 >> 16 & 0x0f | 0x40] + _lut[d1 >> 24 & 0xff] + '-' + _lut[d2 & 0x3f | 0x80] + _lut[d2 >> 8 & 0xff] + '-' + _lut[d2 >> 16 & 0xff] + _lut[d2 >> 24 & 0xff] + _lut[d3 & 0xff] + _lut[d3 >> 8 & 0xff] + _lut[d3 >> 16 & 0xff] + _lut[d3 >> 24 & 0xff]; // .toUpperCase() here flattens concatenated strings to save heap memory space.\n\n    return uuid.toUpperCase();\n  },\n  clamp: function (value, min, max) {\n    return Math.max(min, Math.min(max, value));\n  },\n  // compute euclidian modulo of m % n\n  // https://en.wikipedia.org/wiki/Modulo_operation\n  euclideanModulo: function (n, m) {\n    return (n % m + m) % m;\n  },\n  // Linear mapping from range <a1, a2> to range <b1, b2>\n  mapLinear: function (x, a1, a2, b1, b2) {\n    return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n  },\n  // https://en.wikipedia.org/wiki/Linear_interpolation\n  lerp: function (x, y, t) {\n    return (1 - t) * x + t * y;\n  },\n  // http://en.wikipedia.org/wiki/Smoothstep\n  smoothstep: function (x, min, max) {\n    if (x <= min) return 0;\n    if (x >= max) return 1;\n    x = (x - min) / (max - min);\n    return x * x * (3 - 2 * x);\n  },\n  smootherstep: function (x, min, max) {\n    if (x <= min) return 0;\n    if (x >= max) return 1;\n    x = (x - min) / (max - min);\n    return x * x * x * (x * (x * 6 - 15) + 10);\n  },\n  // Random integer from <low, high> interval\n  randInt: function (low, high) {\n    return low + Math.floor(Math.random() * (high - low + 1));\n  },\n  // Random float from <low, high> interval\n  randFloat: function (low, high) {\n    return low + Math.random() * (high - low);\n  },\n  // Random float from <-range/2, range/2> interval\n  randFloatSpread: function (range) {\n    return range * (0.5 - Math.random());\n  },\n  degToRad: function (degrees) {\n    return degrees * MathUtils.DEG2RAD;\n  },\n  radToDeg: function (radians) {\n    return radians * MathUtils.RAD2DEG;\n  },\n  isPowerOfTwo: function (value) {\n    return (value & value - 1) === 0 && value !== 0;\n  },\n  ceilPowerOfTwo: function (value) {\n    return Math.pow(2, Math.ceil(Math.log(value) / Math.LN2));\n  },\n  floorPowerOfTwo: function (value) {\n    return Math.pow(2, Math.floor(Math.log(value) / Math.LN2));\n  },\n  setQuaternionFromProperEuler: function (q, a, b, c, order) {\n    // Intrinsic Proper Euler Angles - see https://en.wikipedia.org/wiki/Euler_angles\n    // rotations are applied to the axes in the order specified by 'order'\n    // rotation by angle 'a' is applied first, then by angle 'b', then by angle 'c'\n    // angles are in radians\n    var cos = Math.cos;\n    var sin = Math.sin;\n    var c2 = cos(b / 2);\n    var s2 = sin(b / 2);\n    var c13 = cos((a + c) / 2);\n    var s13 = sin((a + c) / 2);\n    var c1_3 = cos((a - c) / 2);\n    var s1_3 = sin((a - c) / 2);\n    var c3_1 = cos((c - a) / 2);\n    var s3_1 = sin((c - a) / 2);\n\n    if (order === 'XYX') {\n      q.set(c2 * s13, s2 * c1_3, s2 * s1_3, c2 * c13);\n    } else if (order === 'YZY') {\n      q.set(s2 * s1_3, c2 * s13, s2 * c1_3, c2 * c13);\n    } else if (order === 'ZXZ') {\n      q.set(s2 * c1_3, s2 * s1_3, c2 * s13, c2 * c13);\n    } else if (order === 'XZX') {\n      q.set(c2 * s13, s2 * s3_1, s2 * c3_1, c2 * c13);\n    } else if (order === 'YXY') {\n      q.set(s2 * c3_1, c2 * s13, s2 * s3_1, c2 * c13);\n    } else if (order === 'ZYZ') {\n      q.set(s2 * s3_1, s2 * c3_1, c2 * s13, c2 * c13);\n    } else {\n      console.warn('THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order.');\n    }\n  }\n};\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author philogb / http://blog.thejit.org/\n * @author egraether / http://egraether.com/\n * @author zz85 / http://www.lab4games.net/zz85/blog\n */\n\nfunction Vector2(x, y) {\n  this.x = x || 0;\n  this.y = y || 0;\n}\n\nObject.defineProperties(Vector2.prototype, {\n  \"width\": {\n    get: function () {\n      return this.x;\n    },\n    set: function (value) {\n      this.x = value;\n    }\n  },\n  \"height\": {\n    get: function () {\n      return this.y;\n    },\n    set: function (value) {\n      this.y = value;\n    }\n  }\n});\nObject.assign(Vector2.prototype, {\n  isVector2: true,\n  set: function (x, y) {\n    this.x = x;\n    this.y = y;\n    return this;\n  },\n  setScalar: function (scalar) {\n    this.x = scalar;\n    this.y = scalar;\n    return this;\n  },\n  setX: function (x) {\n    this.x = x;\n    return this;\n  },\n  setY: function (y) {\n    this.y = y;\n    return this;\n  },\n  setComponent: function (index, value) {\n    switch (index) {\n      case 0:\n        this.x = value;\n        break;\n\n      case 1:\n        this.y = value;\n        break;\n\n      default:\n        throw new Error('index is out of range: ' + index);\n    }\n\n    return this;\n  },\n  getComponent: function (index) {\n    switch (index) {\n      case 0:\n        return this.x;\n\n      case 1:\n        return this.y;\n\n      default:\n        throw new Error('index is out of range: ' + index);\n    }\n  },\n  clone: function () {\n    return new this.constructor(this.x, this.y);\n  },\n  copy: function (v) {\n    this.x = v.x;\n    this.y = v.y;\n    return this;\n  },\n  add: function (v, w) {\n    if (w !== undefined) {\n      console.warn('THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead.');\n      return this.addVectors(v, w);\n    }\n\n    this.x += v.x;\n    this.y += v.y;\n    return this;\n  },\n  addScalar: function (s) {\n    this.x += s;\n    this.y += s;\n    return this;\n  },\n  addVectors: function (a, b) {\n    this.x = a.x + b.x;\n    this.y = a.y + b.y;\n    return this;\n  },\n  addScaledVector: function (v, s) {\n    this.x += v.x * s;\n    this.y += v.y * s;\n    return this;\n  },\n  sub: function (v, w) {\n    if (w !== undefined) {\n      console.warn('THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.');\n      return this.subVectors(v, w);\n    }\n\n    this.x -= v.x;\n    this.y -= v.y;\n    return this;\n  },\n  subScalar: function (s) {\n    this.x -= s;\n    this.y -= s;\n    return this;\n  },\n  subVectors: function (a, b) {\n    this.x = a.x - b.x;\n    this.y = a.y - b.y;\n    return this;\n  },\n  multiply: function (v) {\n    this.x *= v.x;\n    this.y *= v.y;\n    return this;\n  },\n  multiplyScalar: function (scalar) {\n    this.x *= scalar;\n    this.y *= scalar;\n    return this;\n  },\n  divide: function (v) {\n    this.x /= v.x;\n    this.y /= v.y;\n    return this;\n  },\n  divideScalar: function (scalar) {\n    return this.multiplyScalar(1 / scalar);\n  },\n  applyMatrix3: function (m) {\n    var x = this.x,\n        y = this.y;\n    var e = m.elements;\n    this.x = e[0] * x + e[3] * y + e[6];\n    this.y = e[1] * x + e[4] * y + e[7];\n    return this;\n  },\n  min: function (v) {\n    this.x = Math.min(this.x, v.x);\n    this.y = Math.min(this.y, v.y);\n    return this;\n  },\n  max: function (v) {\n    this.x = Math.max(this.x, v.x);\n    this.y = Math.max(this.y, v.y);\n    return this;\n  },\n  clamp: function (min, max) {\n    // assumes min < max, componentwise\n    this.x = Math.max(min.x, Math.min(max.x, this.x));\n    this.y = Math.max(min.y, Math.min(max.y, this.y));\n    return this;\n  },\n  clampScalar: function (minVal, maxVal) {\n    this.x = Math.max(minVal, Math.min(maxVal, this.x));\n    this.y = Math.max(minVal, Math.min(maxVal, this.y));\n    return this;\n  },\n  clampLength: function (min, max) {\n    var length = this.length();\n    return this.divideScalar(length || 1).multiplyScalar(Math.max(min, Math.min(max, length)));\n  },\n  floor: function () {\n    this.x = Math.floor(this.x);\n    this.y = Math.floor(this.y);\n    return this;\n  },\n  ceil: function () {\n    this.x = Math.ceil(this.x);\n    this.y = Math.ceil(this.y);\n    return this;\n  },\n  round: function () {\n    this.x = Math.round(this.x);\n    this.y = Math.round(this.y);\n    return this;\n  },\n  roundToZero: function () {\n    this.x = this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x);\n    this.y = this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y);\n    return this;\n  },\n  negate: function () {\n    this.x = -this.x;\n    this.y = -this.y;\n    return this;\n  },\n  dot: function (v) {\n    return this.x * v.x + this.y * v.y;\n  },\n  cross: function (v) {\n    return this.x * v.y - this.y * v.x;\n  },\n  lengthSq: function () {\n    return this.x * this.x + this.y * this.y;\n  },\n  length: function () {\n    return Math.sqrt(this.x * this.x + this.y * this.y);\n  },\n  manhattanLength: function () {\n    return Math.abs(this.x) + Math.abs(this.y);\n  },\n  normalize: function () {\n    return this.divideScalar(this.length() || 1);\n  },\n  angle: function () {\n    // computes the angle in radians with respect to the positive x-axis\n    var angle = Math.atan2(-this.y, -this.x) + Math.PI;\n    return angle;\n  },\n  distanceTo: function (v) {\n    return Math.sqrt(this.distanceToSquared(v));\n  },\n  distanceToSquared: function (v) {\n    var dx = this.x - v.x,\n        dy = this.y - v.y;\n    return dx * dx + dy * dy;\n  },\n  manhattanDistanceTo: function (v) {\n    return Math.abs(this.x - v.x) + Math.abs(this.y - v.y);\n  },\n  setLength: function (length) {\n    return this.normalize().multiplyScalar(length);\n  },\n  lerp: function (v, alpha) {\n    this.x += (v.x - this.x) * alpha;\n    this.y += (v.y - this.y) * alpha;\n    return this;\n  },\n  lerpVectors: function (v1, v2, alpha) {\n    return this.subVectors(v2, v1).multiplyScalar(alpha).add(v1);\n  },\n  equals: function (v) {\n    return v.x === this.x && v.y === this.y;\n  },\n  fromArray: function (array, offset) {\n    if (offset === undefined) offset = 0;\n    this.x = array[offset];\n    this.y = array[offset + 1];\n    return this;\n  },\n  toArray: function (array, offset) {\n    if (array === undefined) array = [];\n    if (offset === undefined) offset = 0;\n    array[offset] = this.x;\n    array[offset + 1] = this.y;\n    return array;\n  },\n  fromBufferAttribute: function (attribute, index, offset) {\n    if (offset !== undefined) {\n      console.warn('THREE.Vector2: offset has been removed from .fromBufferAttribute().');\n    }\n\n    this.x = attribute.getX(index);\n    this.y = attribute.getY(index);\n    return this;\n  },\n  rotateAround: function (center, angle) {\n    var c = Math.cos(angle),\n        s = Math.sin(angle);\n    var x = this.x - center.x;\n    var y = this.y - center.y;\n    this.x = x * c - y * s + center.x;\n    this.y = x * s + y * c + center.y;\n    return this;\n  }\n});\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author bhouston / http://clara.io\n * @author tschw\n */\n\nfunction Matrix3() {\n  this.elements = [1, 0, 0, 0, 1, 0, 0, 0, 1];\n\n  if (arguments.length > 0) {\n    console.error('THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.');\n  }\n}\n\nObject.assign(Matrix3.prototype, {\n  isMatrix3: true,\n  set: function (n11, n12, n13, n21, n22, n23, n31, n32, n33) {\n    var te = this.elements;\n    te[0] = n11;\n    te[1] = n21;\n    te[2] = n31;\n    te[3] = n12;\n    te[4] = n22;\n    te[5] = n32;\n    te[6] = n13;\n    te[7] = n23;\n    te[8] = n33;\n    return this;\n  },\n  identity: function () {\n    this.set(1, 0, 0, 0, 1, 0, 0, 0, 1);\n    return this;\n  },\n  clone: function () {\n    return new this.constructor().fromArray(this.elements);\n  },\n  copy: function (m) {\n    var te = this.elements;\n    var me = m.elements;\n    te[0] = me[0];\n    te[1] = me[1];\n    te[2] = me[2];\n    te[3] = me[3];\n    te[4] = me[4];\n    te[5] = me[5];\n    te[6] = me[6];\n    te[7] = me[7];\n    te[8] = me[8];\n    return this;\n  },\n  extractBasis: function (xAxis, yAxis, zAxis) {\n    xAxis.setFromMatrix3Column(this, 0);\n    yAxis.setFromMatrix3Column(this, 1);\n    zAxis.setFromMatrix3Column(this, 2);\n    return this;\n  },\n  setFromMatrix4: function (m) {\n    var me = m.elements;\n    this.set(me[0], me[4], me[8], me[1], me[5], me[9], me[2], me[6], me[10]);\n    return this;\n  },\n  multiply: function (m) {\n    return this.multiplyMatrices(this, m);\n  },\n  premultiply: function (m) {\n    return this.multiplyMatrices(m, this);\n  },\n  multiplyMatrices: function (a, b) {\n    var ae = a.elements;\n    var be = b.elements;\n    var te = this.elements;\n    var a11 = ae[0],\n        a12 = ae[3],\n        a13 = ae[6];\n    var a21 = ae[1],\n        a22 = ae[4],\n        a23 = ae[7];\n    var a31 = ae[2],\n        a32 = ae[5],\n        a33 = ae[8];\n    var b11 = be[0],\n        b12 = be[3],\n        b13 = be[6];\n    var b21 = be[1],\n        b22 = be[4],\n        b23 = be[7];\n    var b31 = be[2],\n        b32 = be[5],\n        b33 = be[8];\n    te[0] = a11 * b11 + a12 * b21 + a13 * b31;\n    te[3] = a11 * b12 + a12 * b22 + a13 * b32;\n    te[6] = a11 * b13 + a12 * b23 + a13 * b33;\n    te[1] = a21 * b11 + a22 * b21 + a23 * b31;\n    te[4] = a21 * b12 + a22 * b22 + a23 * b32;\n    te[7] = a21 * b13 + a22 * b23 + a23 * b33;\n    te[2] = a31 * b11 + a32 * b21 + a33 * b31;\n    te[5] = a31 * b12 + a32 * b22 + a33 * b32;\n    te[8] = a31 * b13 + a32 * b23 + a33 * b33;\n    return this;\n  },\n  multiplyScalar: function (s) {\n    var te = this.elements;\n    te[0] *= s;\n    te[3] *= s;\n    te[6] *= s;\n    te[1] *= s;\n    te[4] *= s;\n    te[7] *= s;\n    te[2] *= s;\n    te[5] *= s;\n    te[8] *= s;\n    return this;\n  },\n  determinant: function () {\n    var te = this.elements;\n    var a = te[0],\n        b = te[1],\n        c = te[2],\n        d = te[3],\n        e = te[4],\n        f = te[5],\n        g = te[6],\n        h = te[7],\n        i = te[8];\n    return a * e * i - a * f * h - b * d * i + b * f * g + c * d * h - c * e * g;\n  },\n  getInverse: function (matrix, throwOnDegenerate) {\n    if (matrix && matrix.isMatrix4) {\n      console.error(\"THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.\");\n    }\n\n    var me = matrix.elements,\n        te = this.elements,\n        n11 = me[0],\n        n21 = me[1],\n        n31 = me[2],\n        n12 = me[3],\n        n22 = me[4],\n        n32 = me[5],\n        n13 = me[6],\n        n23 = me[7],\n        n33 = me[8],\n        t11 = n33 * n22 - n32 * n23,\n        t12 = n32 * n13 - n33 * n12,\n        t13 = n23 * n12 - n22 * n13,\n        det = n11 * t11 + n21 * t12 + n31 * t13;\n\n    if (det === 0) {\n      var msg = \"THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0\";\n\n      if (throwOnDegenerate === true) {\n        throw new Error(msg);\n      } else {\n        console.warn(msg);\n      }\n\n      return this.identity();\n    }\n\n    var detInv = 1 / det;\n    te[0] = t11 * detInv;\n    te[1] = (n31 * n23 - n33 * n21) * detInv;\n    te[2] = (n32 * n21 - n31 * n22) * detInv;\n    te[3] = t12 * detInv;\n    te[4] = (n33 * n11 - n31 * n13) * detInv;\n    te[5] = (n31 * n12 - n32 * n11) * detInv;\n    te[6] = t13 * detInv;\n    te[7] = (n21 * n13 - n23 * n11) * detInv;\n    te[8] = (n22 * n11 - n21 * n12) * detInv;\n    return this;\n  },\n  transpose: function () {\n    var tmp,\n        m = this.elements;\n    tmp = m[1];\n    m[1] = m[3];\n    m[3] = tmp;\n    tmp = m[2];\n    m[2] = m[6];\n    m[6] = tmp;\n    tmp = m[5];\n    m[5] = m[7];\n    m[7] = tmp;\n    return this;\n  },\n  getNormalMatrix: function (matrix4) {\n    return this.setFromMatrix4(matrix4).getInverse(this).transpose();\n  },\n  transposeIntoArray: function (r) {\n    var m = this.elements;\n    r[0] = m[0];\n    r[1] = m[3];\n    r[2] = m[6];\n    r[3] = m[1];\n    r[4] = m[4];\n    r[5] = m[7];\n    r[6] = m[2];\n    r[7] = m[5];\n    r[8] = m[8];\n    return this;\n  },\n  setUvTransform: function (tx, ty, sx, sy, rotation, cx, cy) {\n    var c = Math.cos(rotation);\n    var s = Math.sin(rotation);\n    this.set(sx * c, sx * s, -sx * (c * cx + s * cy) + cx + tx, -sy * s, sy * c, -sy * (-s * cx + c * cy) + cy + ty, 0, 0, 1);\n  },\n  scale: function (sx, sy) {\n    var te = this.elements;\n    te[0] *= sx;\n    te[3] *= sx;\n    te[6] *= sx;\n    te[1] *= sy;\n    te[4] *= sy;\n    te[7] *= sy;\n    return this;\n  },\n  rotate: function (theta) {\n    var c = Math.cos(theta);\n    var s = Math.sin(theta);\n    var te = this.elements;\n    var a11 = te[0],\n        a12 = te[3],\n        a13 = te[6];\n    var a21 = te[1],\n        a22 = te[4],\n        a23 = te[7];\n    te[0] = c * a11 + s * a21;\n    te[3] = c * a12 + s * a22;\n    te[6] = c * a13 + s * a23;\n    te[1] = -s * a11 + c * a21;\n    te[4] = -s * a12 + c * a22;\n    te[7] = -s * a13 + c * a23;\n    return this;\n  },\n  translate: function (tx, ty) {\n    var te = this.elements;\n    te[0] += tx * te[2];\n    te[3] += tx * te[5];\n    te[6] += tx * te[8];\n    te[1] += ty * te[2];\n    te[4] += ty * te[5];\n    te[7] += ty * te[8];\n    return this;\n  },\n  equals: function (matrix) {\n    var te = this.elements;\n    var me = matrix.elements;\n\n    for (var i = 0; i < 9; i++) {\n      if (te[i] !== me[i]) return false;\n    }\n\n    return true;\n  },\n  fromArray: function (array, offset) {\n    if (offset === undefined) offset = 0;\n\n    for (var i = 0; i < 9; i++) {\n      this.elements[i] = array[i + offset];\n    }\n\n    return this;\n  },\n  toArray: function (array, offset) {\n    if (array === undefined) array = [];\n    if (offset === undefined) offset = 0;\n    var te = this.elements;\n    array[offset] = te[0];\n    array[offset + 1] = te[1];\n    array[offset + 2] = te[2];\n    array[offset + 3] = te[3];\n    array[offset + 4] = te[4];\n    array[offset + 5] = te[5];\n    array[offset + 6] = te[6];\n    array[offset + 7] = te[7];\n    array[offset + 8] = te[8];\n    return array;\n  }\n});\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author szimek / https://github.com/szimek/\n */\n\nvar _canvas;\n\nvar ImageUtils = {\n  getDataURL: function (image) {\n    var canvas;\n\n    if (typeof HTMLCanvasElement == 'undefined') {\n      return image.src;\n    } else if (image instanceof HTMLCanvasElement) {\n      canvas = image;\n    } else {\n      if (_canvas === undefined) _canvas = document.createElementNS('http://www.w3.org/1999/xhtml', 'canvas');\n      _canvas.width = image.width;\n      _canvas.height = image.height;\n\n      var context = _canvas.getContext('2d');\n\n      if (image instanceof ImageData) {\n        context.putImageData(image, 0, 0);\n      } else {\n        context.drawImage(image, 0, 0, image.width, image.height);\n      }\n\n      canvas = _canvas;\n    }\n\n    if (canvas.width > 2048 || canvas.height > 2048) {\n      return canvas.toDataURL('image/jpeg', 0.6);\n    } else {\n      return canvas.toDataURL('image/png');\n    }\n  }\n};\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author szimek / https://github.com/szimek/\n */\n\nvar textureId = 0;\n\nfunction Texture(image, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding) {\n  Object.defineProperty(this, 'id', {\n    value: textureId++\n  });\n  this.uuid = MathUtils.generateUUID();\n  this.name = '';\n  this.image = image !== undefined ? image : Texture.DEFAULT_IMAGE;\n  this.mipmaps = [];\n  this.mapping = mapping !== undefined ? mapping : Texture.DEFAULT_MAPPING;\n  this.wrapS = wrapS !== undefined ? wrapS : ClampToEdgeWrapping;\n  this.wrapT = wrapT !== undefined ? wrapT : ClampToEdgeWrapping;\n  this.magFilter = magFilter !== undefined ? magFilter : LinearFilter;\n  this.minFilter = minFilter !== undefined ? minFilter : LinearMipmapLinearFilter;\n  this.anisotropy = anisotropy !== undefined ? anisotropy : 1;\n  this.format = format !== undefined ? format : RGBAFormat;\n  this.internalFormat = null;\n  this.type = type !== undefined ? type : UnsignedByteType;\n  this.offset = new Vector2(0, 0);\n  this.repeat = new Vector2(1, 1);\n  this.center = new Vector2(0, 0);\n  this.rotation = 0;\n  this.matrixAutoUpdate = true;\n  this.matrix = new Matrix3();\n  this.generateMipmaps = true;\n  this.premultiplyAlpha = false;\n  this.flipY = true;\n  this.unpackAlignment = 4; // valid values: 1, 2, 4, 8 (see http://www.khronos.org/opengles/sdk/docs/man/xhtml/glPixelStorei.xml)\n  // Values of encoding !== THREE.LinearEncoding only supported on map, envMap and emissiveMap.\n  //\n  // Also changing the encoding after already used by a Material will not automatically make the Material\n  // update. You need to explicitly call Material.needsUpdate to trigger it to recompile.\n\n  this.encoding = encoding !== undefined ? encoding : LinearEncoding;\n  this.version = 0;\n  this.onUpdate = null;\n}\n\nTexture.DEFAULT_IMAGE = undefined;\nTexture.DEFAULT_MAPPING = UVMapping;\nTexture.prototype = Object.assign(Object.create(EventDispatcher.prototype), {\n  constructor: Texture,\n  isTexture: true,\n  updateMatrix: function () {\n    this.matrix.setUvTransform(this.offset.x, this.offset.y, this.repeat.x, this.repeat.y, this.rotation, this.center.x, this.center.y);\n  },\n  clone: function () {\n    return new this.constructor().copy(this);\n  },\n  copy: function (source) {\n    this.name = source.name;\n    this.image = source.image;\n    this.mipmaps = source.mipmaps.slice(0);\n    this.mapping = source.mapping;\n    this.wrapS = source.wrapS;\n    this.wrapT = source.wrapT;\n    this.magFilter = source.magFilter;\n    this.minFilter = source.minFilter;\n    this.anisotropy = source.anisotropy;\n    this.format = source.format;\n    this.internalFormat = source.internalFormat;\n    this.type = source.type;\n    this.offset.copy(source.offset);\n    this.repeat.copy(source.repeat);\n    this.center.copy(source.center);\n    this.rotation = source.rotation;\n    this.matrixAutoUpdate = source.matrixAutoUpdate;\n    this.matrix.copy(source.matrix);\n    this.generateMipmaps = source.generateMipmaps;\n    this.premultiplyAlpha = source.premultiplyAlpha;\n    this.flipY = source.flipY;\n    this.unpackAlignment = source.unpackAlignment;\n    this.encoding = source.encoding;\n    return this;\n  },\n  toJSON: function (meta) {\n    var isRootObject = meta === undefined || typeof meta === 'string';\n\n    if (!isRootObject && meta.textures[this.uuid] !== undefined) {\n      return meta.textures[this.uuid];\n    }\n\n    var output = {\n      metadata: {\n        version: 4.5,\n        type: 'Texture',\n        generator: 'Texture.toJSON'\n      },\n      uuid: this.uuid,\n      name: this.name,\n      mapping: this.mapping,\n      repeat: [this.repeat.x, this.repeat.y],\n      offset: [this.offset.x, this.offset.y],\n      center: [this.center.x, this.center.y],\n      rotation: this.rotation,\n      wrap: [this.wrapS, this.wrapT],\n      format: this.format,\n      type: this.type,\n      encoding: this.encoding,\n      minFilter: this.minFilter,\n      magFilter: this.magFilter,\n      anisotropy: this.anisotropy,\n      flipY: this.flipY,\n      premultiplyAlpha: this.premultiplyAlpha,\n      unpackAlignment: this.unpackAlignment\n    };\n\n    if (this.image !== undefined) {\n      // TODO: Move to THREE.Image\n      var image = this.image;\n\n      if (image.uuid === undefined) {\n        image.uuid = MathUtils.generateUUID(); // UGH\n      }\n\n      if (!isRootObject && meta.images[image.uuid] === undefined) {\n        var url;\n\n        if (Array.isArray(image)) {\n          // process array of images e.g. CubeTexture\n          url = [];\n\n          for (var i = 0, l = image.length; i < l; i++) {\n            url.push(ImageUtils.getDataURL(image[i]));\n          }\n        } else {\n          // process single image\n          url = ImageUtils.getDataURL(image);\n        }\n\n        meta.images[image.uuid] = {\n          uuid: image.uuid,\n          url: url\n        };\n      }\n\n      output.image = image.uuid;\n    }\n\n    if (!isRootObject) {\n      meta.textures[this.uuid] = output;\n    }\n\n    return output;\n  },\n  dispose: function () {\n    this.dispatchEvent({\n      type: 'dispose'\n    });\n  },\n  transformUv: function (uv) {\n    if (this.mapping !== UVMapping) return uv;\n    uv.applyMatrix3(this.matrix);\n\n    if (uv.x < 0 || uv.x > 1) {\n      switch (this.wrapS) {\n        case RepeatWrapping:\n          uv.x = uv.x - Math.floor(uv.x);\n          break;\n\n        case ClampToEdgeWrapping:\n          uv.x = uv.x < 0 ? 0 : 1;\n          break;\n\n        case MirroredRepeatWrapping:\n          if (Math.abs(Math.floor(uv.x) % 2) === 1) {\n            uv.x = Math.ceil(uv.x) - uv.x;\n          } else {\n            uv.x = uv.x - Math.floor(uv.x);\n          }\n\n          break;\n      }\n    }\n\n    if (uv.y < 0 || uv.y > 1) {\n      switch (this.wrapT) {\n        case RepeatWrapping:\n          uv.y = uv.y - Math.floor(uv.y);\n          break;\n\n        case ClampToEdgeWrapping:\n          uv.y = uv.y < 0 ? 0 : 1;\n          break;\n\n        case MirroredRepeatWrapping:\n          if (Math.abs(Math.floor(uv.y) % 2) === 1) {\n            uv.y = Math.ceil(uv.y) - uv.y;\n          } else {\n            uv.y = uv.y - Math.floor(uv.y);\n          }\n\n          break;\n      }\n    }\n\n    if (this.flipY) {\n      uv.y = 1 - uv.y;\n    }\n\n    return uv;\n  }\n});\nObject.defineProperty(Texture.prototype, \"needsUpdate\", {\n  set: function (value) {\n    if (value === true) this.version++;\n  }\n});\n/**\n * @author supereggbert / http://www.paulbrunt.co.uk/\n * @author philogb / http://blog.thejit.org/\n * @author mikael emtinger / http://gomo.se/\n * @author egraether / http://egraether.com/\n * @author WestLangley / http://github.com/WestLangley\n */\n\nfunction Vector4(x, y, z, w) {\n  this.x = x || 0;\n  this.y = y || 0;\n  this.z = z || 0;\n  this.w = w !== undefined ? w : 1;\n}\n\nObject.defineProperties(Vector4.prototype, {\n  \"width\": {\n    get: function () {\n      return this.z;\n    },\n    set: function (value) {\n      this.z = value;\n    }\n  },\n  \"height\": {\n    get: function () {\n      return this.w;\n    },\n    set: function (value) {\n      this.w = value;\n    }\n  }\n});\nObject.assign(Vector4.prototype, {\n  isVector4: true,\n  set: function (x, y, z, w) {\n    this.x = x;\n    this.y = y;\n    this.z = z;\n    this.w = w;\n    return this;\n  },\n  setScalar: function (scalar) {\n    this.x = scalar;\n    this.y = scalar;\n    this.z = scalar;\n    this.w = scalar;\n    return this;\n  },\n  setX: function (x) {\n    this.x = x;\n    return this;\n  },\n  setY: function (y) {\n    this.y = y;\n    return this;\n  },\n  setZ: function (z) {\n    this.z = z;\n    return this;\n  },\n  setW: function (w) {\n    this.w = w;\n    return this;\n  },\n  setComponent: function (index, value) {\n    switch (index) {\n      case 0:\n        this.x = value;\n        break;\n\n      case 1:\n        this.y = value;\n        break;\n\n      case 2:\n        this.z = value;\n        break;\n\n      case 3:\n        this.w = value;\n        break;\n\n      default:\n        throw new Error('index is out of range: ' + index);\n    }\n\n    return this;\n  },\n  getComponent: function (index) {\n    switch (index) {\n      case 0:\n        return this.x;\n\n      case 1:\n        return this.y;\n\n      case 2:\n        return this.z;\n\n      case 3:\n        return this.w;\n\n      default:\n        throw new Error('index is out of range: ' + index);\n    }\n  },\n  clone: function () {\n    return new this.constructor(this.x, this.y, this.z, this.w);\n  },\n  copy: function (v) {\n    this.x = v.x;\n    this.y = v.y;\n    this.z = v.z;\n    this.w = v.w !== undefined ? v.w : 1;\n    return this;\n  },\n  add: function (v, w) {\n    if (w !== undefined) {\n      console.warn('THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead.');\n      return this.addVectors(v, w);\n    }\n\n    this.x += v.x;\n    this.y += v.y;\n    this.z += v.z;\n    this.w += v.w;\n    return this;\n  },\n  addScalar: function (s) {\n    this.x += s;\n    this.y += s;\n    this.z += s;\n    this.w += s;\n    return this;\n  },\n  addVectors: function (a, b) {\n    this.x = a.x + b.x;\n    this.y = a.y + b.y;\n    this.z = a.z + b.z;\n    this.w = a.w + b.w;\n    return this;\n  },\n  addScaledVector: function (v, s) {\n    this.x += v.x * s;\n    this.y += v.y * s;\n    this.z += v.z * s;\n    this.w += v.w * s;\n    return this;\n  },\n  sub: function (v, w) {\n    if (w !== undefined) {\n      console.warn('THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.');\n      return this.subVectors(v, w);\n    }\n\n    this.x -= v.x;\n    this.y -= v.y;\n    this.z -= v.z;\n    this.w -= v.w;\n    return this;\n  },\n  subScalar: function (s) {\n    this.x -= s;\n    this.y -= s;\n    this.z -= s;\n    this.w -= s;\n    return this;\n  },\n  subVectors: function (a, b) {\n    this.x = a.x - b.x;\n    this.y = a.y - b.y;\n    this.z = a.z - b.z;\n    this.w = a.w - b.w;\n    return this;\n  },\n  multiplyScalar: function (scalar) {\n    this.x *= scalar;\n    this.y *= scalar;\n    this.z *= scalar;\n    this.w *= scalar;\n    return this;\n  },\n  applyMatrix4: function (m) {\n    var x = this.x,\n        y = this.y,\n        z = this.z,\n        w = this.w;\n    var e = m.elements;\n    this.x = e[0] * x + e[4] * y + e[8] * z + e[12] * w;\n    this.y = e[1] * x + e[5] * y + e[9] * z + e[13] * w;\n    this.z = e[2] * x + e[6] * y + e[10] * z + e[14] * w;\n    this.w = e[3] * x + e[7] * y + e[11] * z + e[15] * w;\n    return this;\n  },\n  divideScalar: function (scalar) {\n    return this.multiplyScalar(1 / scalar);\n  },\n  setAxisAngleFromQuaternion: function (q) {\n    // http://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToAngle/index.htm\n    // q is assumed to be normalized\n    this.w = 2 * Math.acos(q.w);\n    var s = Math.sqrt(1 - q.w * q.w);\n\n    if (s < 0.0001) {\n      this.x = 1;\n      this.y = 0;\n      this.z = 0;\n    } else {\n      this.x = q.x / s;\n      this.y = q.y / s;\n      this.z = q.z / s;\n    }\n\n    return this;\n  },\n  setAxisAngleFromRotationMatrix: function (m) {\n    // http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToAngle/index.htm\n    // assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n    var angle,\n        x,\n        y,\n        z,\n        // variables for result\n    epsilon = 0.01,\n        // margin to allow for rounding errors\n    epsilon2 = 0.1,\n        // margin to distinguish between 0 and 180 degrees\n    te = m.elements,\n        m11 = te[0],\n        m12 = te[4],\n        m13 = te[8],\n        m21 = te[1],\n        m22 = te[5],\n        m23 = te[9],\n        m31 = te[2],\n        m32 = te[6],\n        m33 = te[10];\n\n    if (Math.abs(m12 - m21) < epsilon && Math.abs(m13 - m31) < epsilon && Math.abs(m23 - m32) < epsilon) {\n      // singularity found\n      // first check for identity matrix which must have +1 for all terms\n      // in leading diagonal and zero in other terms\n      if (Math.abs(m12 + m21) < epsilon2 && Math.abs(m13 + m31) < epsilon2 && Math.abs(m23 + m32) < epsilon2 && Math.abs(m11 + m22 + m33 - 3) < epsilon2) {\n        // this singularity is identity matrix so angle = 0\n        this.set(1, 0, 0, 0);\n        return this; // zero angle, arbitrary axis\n      } // otherwise this singularity is angle = 180\n\n\n      angle = Math.PI;\n      var xx = (m11 + 1) / 2;\n      var yy = (m22 + 1) / 2;\n      var zz = (m33 + 1) / 2;\n      var xy = (m12 + m21) / 4;\n      var xz = (m13 + m31) / 4;\n      var yz = (m23 + m32) / 4;\n\n      if (xx > yy && xx > zz) {\n        // m11 is the largest diagonal term\n        if (xx < epsilon) {\n          x = 0;\n          y = 0.707106781;\n          z = 0.707106781;\n        } else {\n          x = Math.sqrt(xx);\n          y = xy / x;\n          z = xz / x;\n        }\n      } else if (yy > zz) {\n        // m22 is the largest diagonal term\n        if (yy < epsilon) {\n          x = 0.707106781;\n          y = 0;\n          z = 0.707106781;\n        } else {\n          y = Math.sqrt(yy);\n          x = xy / y;\n          z = yz / y;\n        }\n      } else {\n        // m33 is the largest diagonal term so base result on this\n        if (zz < epsilon) {\n          x = 0.707106781;\n          y = 0.707106781;\n          z = 0;\n        } else {\n          z = Math.sqrt(zz);\n          x = xz / z;\n          y = yz / z;\n        }\n      }\n\n      this.set(x, y, z, angle);\n      return this; // return 180 deg rotation\n    } // as we have reached here there are no singularities so we can handle normally\n\n\n    var s = Math.sqrt((m32 - m23) * (m32 - m23) + (m13 - m31) * (m13 - m31) + (m21 - m12) * (m21 - m12)); // used to normalize\n\n    if (Math.abs(s) < 0.001) s = 1; // prevent divide by zero, should not happen if matrix is orthogonal and should be\n    // caught by singularity test above, but I've left it in just in case\n\n    this.x = (m32 - m23) / s;\n    this.y = (m13 - m31) / s;\n    this.z = (m21 - m12) / s;\n    this.w = Math.acos((m11 + m22 + m33 - 1) / 2);\n    return this;\n  },\n  min: function (v) {\n    this.x = Math.min(this.x, v.x);\n    this.y = Math.min(this.y, v.y);\n    this.z = Math.min(this.z, v.z);\n    this.w = Math.min(this.w, v.w);\n    return this;\n  },\n  max: function (v) {\n    this.x = Math.max(this.x, v.x);\n    this.y = Math.max(this.y, v.y);\n    this.z = Math.max(this.z, v.z);\n    this.w = Math.max(this.w, v.w);\n    return this;\n  },\n  clamp: function (min, max) {\n    // assumes min < max, componentwise\n    this.x = Math.max(min.x, Math.min(max.x, this.x));\n    this.y = Math.max(min.y, Math.min(max.y, this.y));\n    this.z = Math.max(min.z, Math.min(max.z, this.z));\n    this.w = Math.max(min.w, Math.min(max.w, this.w));\n    return this;\n  },\n  clampScalar: function (minVal, maxVal) {\n    this.x = Math.max(minVal, Math.min(maxVal, this.x));\n    this.y = Math.max(minVal, Math.min(maxVal, this.y));\n    this.z = Math.max(minVal, Math.min(maxVal, this.z));\n    this.w = Math.max(minVal, Math.min(maxVal, this.w));\n    return this;\n  },\n  clampLength: function (min, max) {\n    var length = this.length();\n    return this.divideScalar(length || 1).multiplyScalar(Math.max(min, Math.min(max, length)));\n  },\n  floor: function () {\n    this.x = Math.floor(this.x);\n    this.y = Math.floor(this.y);\n    this.z = Math.floor(this.z);\n    this.w = Math.floor(this.w);\n    return this;\n  },\n  ceil: function () {\n    this.x = Math.ceil(this.x);\n    this.y = Math.ceil(this.y);\n    this.z = Math.ceil(this.z);\n    this.w = Math.ceil(this.w);\n    return this;\n  },\n  round: function () {\n    this.x = Math.round(this.x);\n    this.y = Math.round(this.y);\n    this.z = Math.round(this.z);\n    this.w = Math.round(this.w);\n    return this;\n  },\n  roundToZero: function () {\n    this.x = this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x);\n    this.y = this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y);\n    this.z = this.z < 0 ? Math.ceil(this.z) : Math.floor(this.z);\n    this.w = this.w < 0 ? Math.ceil(this.w) : Math.floor(this.w);\n    return this;\n  },\n  negate: function () {\n    this.x = -this.x;\n    this.y = -this.y;\n    this.z = -this.z;\n    this.w = -this.w;\n    return this;\n  },\n  dot: function (v) {\n    return this.x * v.x + this.y * v.y + this.z * v.z + this.w * v.w;\n  },\n  lengthSq: function () {\n    return this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w;\n  },\n  length: function () {\n    return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w);\n  },\n  manhattanLength: function () {\n    return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z) + Math.abs(this.w);\n  },\n  normalize: function () {\n    return this.divideScalar(this.length() || 1);\n  },\n  setLength: function (length) {\n    return this.normalize().multiplyScalar(length);\n  },\n  lerp: function (v, alpha) {\n    this.x += (v.x - this.x) * alpha;\n    this.y += (v.y - this.y) * alpha;\n    this.z += (v.z - this.z) * alpha;\n    this.w += (v.w - this.w) * alpha;\n    return this;\n  },\n  lerpVectors: function (v1, v2, alpha) {\n    return this.subVectors(v2, v1).multiplyScalar(alpha).add(v1);\n  },\n  equals: function (v) {\n    return v.x === this.x && v.y === this.y && v.z === this.z && v.w === this.w;\n  },\n  fromArray: function (array, offset) {\n    if (offset === undefined) offset = 0;\n    this.x = array[offset];\n    this.y = array[offset + 1];\n    this.z = array[offset + 2];\n    this.w = array[offset + 3];\n    return this;\n  },\n  toArray: function (array, offset) {\n    if (array === undefined) array = [];\n    if (offset === undefined) offset = 0;\n    array[offset] = this.x;\n    array[offset + 1] = this.y;\n    array[offset + 2] = this.z;\n    array[offset + 3] = this.w;\n    return array;\n  },\n  fromBufferAttribute: function (attribute, index, offset) {\n    if (offset !== undefined) {\n      console.warn('THREE.Vector4: offset has been removed from .fromBufferAttribute().');\n    }\n\n    this.x = attribute.getX(index);\n    this.y = attribute.getY(index);\n    this.z = attribute.getZ(index);\n    this.w = attribute.getW(index);\n    return this;\n  }\n});\n/**\n * @author szimek / https://github.com/szimek/\n * @author alteredq / http://alteredqualia.com/\n * @author Marius Kintel / https://github.com/kintel\n */\n\n/*\n In options, we can specify:\n * Texture parameters for an auto-generated target texture\n * depthBuffer/stencilBuffer: Booleans to indicate if we should generate these buffers\n*/\n\nfunction WebGLRenderTarget(width, height, options) {\n  this.width = width;\n  this.height = height;\n  this.scissor = new Vector4(0, 0, width, height);\n  this.scissorTest = false;\n  this.viewport = new Vector4(0, 0, width, height);\n  options = options || {};\n  this.texture = new Texture(undefined, options.mapping, options.wrapS, options.wrapT, options.magFilter, options.minFilter, options.format, options.type, options.anisotropy, options.encoding);\n  this.texture.image = {};\n  this.texture.image.width = width;\n  this.texture.image.height = height;\n  this.texture.generateMipmaps = options.generateMipmaps !== undefined ? options.generateMipmaps : false;\n  this.texture.minFilter = options.minFilter !== undefined ? options.minFilter : LinearFilter;\n  this.depthBuffer = options.depthBuffer !== undefined ? options.depthBuffer : true;\n  this.stencilBuffer = options.stencilBuffer !== undefined ? options.stencilBuffer : true;\n  this.depthTexture = options.depthTexture !== undefined ? options.depthTexture : null;\n}\n\nWebGLRenderTarget.prototype = Object.assign(Object.create(EventDispatcher.prototype), {\n  constructor: WebGLRenderTarget,\n  isWebGLRenderTarget: true,\n  setSize: function (width, height) {\n    if (this.width !== width || this.height !== height) {\n      this.width = width;\n      this.height = height;\n      this.texture.image.width = width;\n      this.texture.image.height = height;\n      this.dispose();\n    }\n\n    this.viewport.set(0, 0, width, height);\n    this.scissor.set(0, 0, width, height);\n  },\n  clone: function () {\n    return new this.constructor().copy(this);\n  },\n  copy: function (source) {\n    this.width = source.width;\n    this.height = source.height;\n    this.viewport.copy(source.viewport);\n    this.texture = source.texture.clone();\n    this.depthBuffer = source.depthBuffer;\n    this.stencilBuffer = source.stencilBuffer;\n    this.depthTexture = source.depthTexture;\n    return this;\n  },\n  dispose: function () {\n    this.dispatchEvent({\n      type: 'dispose'\n    });\n  }\n});\n/**\n * @author Mugen87 / https://github.com/Mugen87\n * @author Matt DesLauriers / @mattdesl\n */\n\nfunction WebGLMultisampleRenderTarget(width, height, options) {\n  WebGLRenderTarget.call(this, width, height, options);\n  this.samples = 4;\n}\n\nWebGLMultisampleRenderTarget.prototype = Object.assign(Object.create(WebGLRenderTarget.prototype), {\n  constructor: WebGLMultisampleRenderTarget,\n  isWebGLMultisampleRenderTarget: true,\n  copy: function (source) {\n    WebGLRenderTarget.prototype.copy.call(this, source);\n    this.samples = source.samples;\n    return this;\n  }\n});\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author bhouston / http://clara.io\n */\n\nfunction Quaternion(x, y, z, w) {\n  this._x = x || 0;\n  this._y = y || 0;\n  this._z = z || 0;\n  this._w = w !== undefined ? w : 1;\n}\n\nObject.assign(Quaternion, {\n  slerp: function (qa, qb, qm, t) {\n    return qm.copy(qa).slerp(qb, t);\n  },\n  slerpFlat: function (dst, dstOffset, src0, srcOffset0, src1, srcOffset1, t) {\n    // fuzz-free, array-based Quaternion SLERP operation\n    var x0 = src0[srcOffset0 + 0],\n        y0 = src0[srcOffset0 + 1],\n        z0 = src0[srcOffset0 + 2],\n        w0 = src0[srcOffset0 + 3],\n        x1 = src1[srcOffset1 + 0],\n        y1 = src1[srcOffset1 + 1],\n        z1 = src1[srcOffset1 + 2],\n        w1 = src1[srcOffset1 + 3];\n\n    if (w0 !== w1 || x0 !== x1 || y0 !== y1 || z0 !== z1) {\n      var s = 1 - t,\n          cos = x0 * x1 + y0 * y1 + z0 * z1 + w0 * w1,\n          dir = cos >= 0 ? 1 : -1,\n          sqrSin = 1 - cos * cos; // Skip the Slerp for tiny steps to avoid numeric problems:\n\n      if (sqrSin > Number.EPSILON) {\n        var sin = Math.sqrt(sqrSin),\n            len = Math.atan2(sin, cos * dir);\n        s = Math.sin(s * len) / sin;\n        t = Math.sin(t * len) / sin;\n      }\n\n      var tDir = t * dir;\n      x0 = x0 * s + x1 * tDir;\n      y0 = y0 * s + y1 * tDir;\n      z0 = z0 * s + z1 * tDir;\n      w0 = w0 * s + w1 * tDir; // Normalize in case we just did a lerp:\n\n      if (s === 1 - t) {\n        var f = 1 / Math.sqrt(x0 * x0 + y0 * y0 + z0 * z0 + w0 * w0);\n        x0 *= f;\n        y0 *= f;\n        z0 *= f;\n        w0 *= f;\n      }\n    }\n\n    dst[dstOffset] = x0;\n    dst[dstOffset + 1] = y0;\n    dst[dstOffset + 2] = z0;\n    dst[dstOffset + 3] = w0;\n  }\n});\nObject.defineProperties(Quaternion.prototype, {\n  x: {\n    get: function () {\n      return this._x;\n    },\n    set: function (value) {\n      this._x = value;\n\n      this._onChangeCallback();\n    }\n  },\n  y: {\n    get: function () {\n      return this._y;\n    },\n    set: function (value) {\n      this._y = value;\n\n      this._onChangeCallback();\n    }\n  },\n  z: {\n    get: function () {\n      return this._z;\n    },\n    set: function (value) {\n      this._z = value;\n\n      this._onChangeCallback();\n    }\n  },\n  w: {\n    get: function () {\n      return this._w;\n    },\n    set: function (value) {\n      this._w = value;\n\n      this._onChangeCallback();\n    }\n  }\n});\nObject.assign(Quaternion.prototype, {\n  isQuaternion: true,\n  set: function (x, y, z, w) {\n    this._x = x;\n    this._y = y;\n    this._z = z;\n    this._w = w;\n\n    this._onChangeCallback();\n\n    return this;\n  },\n  clone: function () {\n    return new this.constructor(this._x, this._y, this._z, this._w);\n  },\n  copy: function (quaternion) {\n    this._x = quaternion.x;\n    this._y = quaternion.y;\n    this._z = quaternion.z;\n    this._w = quaternion.w;\n\n    this._onChangeCallback();\n\n    return this;\n  },\n  setFromEuler: function (euler, update) {\n    if (!(euler && euler.isEuler)) {\n      throw new Error('THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.');\n    }\n\n    var x = euler._x,\n        y = euler._y,\n        z = euler._z,\n        order = euler.order; // http://www.mathworks.com/matlabcentral/fileexchange/\n    // \t20696-function-to-convert-between-dcm-euler-angles-quaternions-and-euler-vectors/\n    //\tcontent/SpinCalc.m\n\n    var cos = Math.cos;\n    var sin = Math.sin;\n    var c1 = cos(x / 2);\n    var c2 = cos(y / 2);\n    var c3 = cos(z / 2);\n    var s1 = sin(x / 2);\n    var s2 = sin(y / 2);\n    var s3 = sin(z / 2);\n\n    if (order === 'XYZ') {\n      this._x = s1 * c2 * c3 + c1 * s2 * s3;\n      this._y = c1 * s2 * c3 - s1 * c2 * s3;\n      this._z = c1 * c2 * s3 + s1 * s2 * c3;\n      this._w = c1 * c2 * c3 - s1 * s2 * s3;\n    } else if (order === 'YXZ') {\n      this._x = s1 * c2 * c3 + c1 * s2 * s3;\n      this._y = c1 * s2 * c3 - s1 * c2 * s3;\n      this._z = c1 * c2 * s3 - s1 * s2 * c3;\n      this._w = c1 * c2 * c3 + s1 * s2 * s3;\n    } else if (order === 'ZXY') {\n      this._x = s1 * c2 * c3 - c1 * s2 * s3;\n      this._y = c1 * s2 * c3 + s1 * c2 * s3;\n      this._z = c1 * c2 * s3 + s1 * s2 * c3;\n      this._w = c1 * c2 * c3 - s1 * s2 * s3;\n    } else if (order === 'ZYX') {\n      this._x = s1 * c2 * c3 - c1 * s2 * s3;\n      this._y = c1 * s2 * c3 + s1 * c2 * s3;\n      this._z = c1 * c2 * s3 - s1 * s2 * c3;\n      this._w = c1 * c2 * c3 + s1 * s2 * s3;\n    } else if (order === 'YZX') {\n      this._x = s1 * c2 * c3 + c1 * s2 * s3;\n      this._y = c1 * s2 * c3 + s1 * c2 * s3;\n      this._z = c1 * c2 * s3 - s1 * s2 * c3;\n      this._w = c1 * c2 * c3 - s1 * s2 * s3;\n    } else if (order === 'XZY') {\n      this._x = s1 * c2 * c3 - c1 * s2 * s3;\n      this._y = c1 * s2 * c3 - s1 * c2 * s3;\n      this._z = c1 * c2 * s3 + s1 * s2 * c3;\n      this._w = c1 * c2 * c3 + s1 * s2 * s3;\n    }\n\n    if (update !== false) this._onChangeCallback();\n    return this;\n  },\n  setFromAxisAngle: function (axis, angle) {\n    // http://www.euclideanspace.com/maths/geometry/rotations/conversions/angleToQuaternion/index.htm\n    // assumes axis is normalized\n    var halfAngle = angle / 2,\n        s = Math.sin(halfAngle);\n    this._x = axis.x * s;\n    this._y = axis.y * s;\n    this._z = axis.z * s;\n    this._w = Math.cos(halfAngle);\n\n    this._onChangeCallback();\n\n    return this;\n  },\n  setFromRotationMatrix: function (m) {\n    // http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\n    // assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n    var te = m.elements,\n        m11 = te[0],\n        m12 = te[4],\n        m13 = te[8],\n        m21 = te[1],\n        m22 = te[5],\n        m23 = te[9],\n        m31 = te[2],\n        m32 = te[6],\n        m33 = te[10],\n        trace = m11 + m22 + m33,\n        s;\n\n    if (trace > 0) {\n      s = 0.5 / Math.sqrt(trace + 1.0);\n      this._w = 0.25 / s;\n      this._x = (m32 - m23) * s;\n      this._y = (m13 - m31) * s;\n      this._z = (m21 - m12) * s;\n    } else if (m11 > m22 && m11 > m33) {\n      s = 2.0 * Math.sqrt(1.0 + m11 - m22 - m33);\n      this._w = (m32 - m23) / s;\n      this._x = 0.25 * s;\n      this._y = (m12 + m21) / s;\n      this._z = (m13 + m31) / s;\n    } else if (m22 > m33) {\n      s = 2.0 * Math.sqrt(1.0 + m22 - m11 - m33);\n      this._w = (m13 - m31) / s;\n      this._x = (m12 + m21) / s;\n      this._y = 0.25 * s;\n      this._z = (m23 + m32) / s;\n    } else {\n      s = 2.0 * Math.sqrt(1.0 + m33 - m11 - m22);\n      this._w = (m21 - m12) / s;\n      this._x = (m13 + m31) / s;\n      this._y = (m23 + m32) / s;\n      this._z = 0.25 * s;\n    }\n\n    this._onChangeCallback();\n\n    return this;\n  },\n  setFromUnitVectors: function (vFrom, vTo) {\n    // assumes direction vectors vFrom and vTo are normalized\n    var EPS = 0.000001;\n    var r = vFrom.dot(vTo) + 1;\n\n    if (r < EPS) {\n      r = 0;\n\n      if (Math.abs(vFrom.x) > Math.abs(vFrom.z)) {\n        this._x = -vFrom.y;\n        this._y = vFrom.x;\n        this._z = 0;\n        this._w = r;\n      } else {\n        this._x = 0;\n        this._y = -vFrom.z;\n        this._z = vFrom.y;\n        this._w = r;\n      }\n    } else {\n      // crossVectors( vFrom, vTo ); // inlined to avoid cyclic dependency on Vector3\n      this._x = vFrom.y * vTo.z - vFrom.z * vTo.y;\n      this._y = vFrom.z * vTo.x - vFrom.x * vTo.z;\n      this._z = vFrom.x * vTo.y - vFrom.y * vTo.x;\n      this._w = r;\n    }\n\n    return this.normalize();\n  },\n  angleTo: function (q) {\n    return 2 * Math.acos(Math.abs(MathUtils.clamp(this.dot(q), -1, 1)));\n  },\n  rotateTowards: function (q, step) {\n    var angle = this.angleTo(q);\n    if (angle === 0) return this;\n    var t = Math.min(1, step / angle);\n    this.slerp(q, t);\n    return this;\n  },\n  inverse: function () {\n    // quaternion is assumed to have unit length\n    return this.conjugate();\n  },\n  conjugate: function () {\n    this._x *= -1;\n    this._y *= -1;\n    this._z *= -1;\n\n    this._onChangeCallback();\n\n    return this;\n  },\n  dot: function (v) {\n    return this._x * v._x + this._y * v._y + this._z * v._z + this._w * v._w;\n  },\n  lengthSq: function () {\n    return this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w;\n  },\n  length: function () {\n    return Math.sqrt(this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w);\n  },\n  normalize: function () {\n    var l = this.length();\n\n    if (l === 0) {\n      this._x = 0;\n      this._y = 0;\n      this._z = 0;\n      this._w = 1;\n    } else {\n      l = 1 / l;\n      this._x = this._x * l;\n      this._y = this._y * l;\n      this._z = this._z * l;\n      this._w = this._w * l;\n    }\n\n    this._onChangeCallback();\n\n    return this;\n  },\n  multiply: function (q, p) {\n    if (p !== undefined) {\n      console.warn('THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.');\n      return this.multiplyQuaternions(q, p);\n    }\n\n    return this.multiplyQuaternions(this, q);\n  },\n  premultiply: function (q) {\n    return this.multiplyQuaternions(q, this);\n  },\n  multiplyQuaternions: function (a, b) {\n    // from http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/code/index.htm\n    var qax = a._x,\n        qay = a._y,\n        qaz = a._z,\n        qaw = a._w;\n    var qbx = b._x,\n        qby = b._y,\n        qbz = b._z,\n        qbw = b._w;\n    this._x = qax * qbw + qaw * qbx + qay * qbz - qaz * qby;\n    this._y = qay * qbw + qaw * qby + qaz * qbx - qax * qbz;\n    this._z = qaz * qbw + qaw * qbz + qax * qby - qay * qbx;\n    this._w = qaw * qbw - qax * qbx - qay * qby - qaz * qbz;\n\n    this._onChangeCallback();\n\n    return this;\n  },\n  slerp: function (qb, t) {\n    if (t === 0) return this;\n    if (t === 1) return this.copy(qb);\n    var x = this._x,\n        y = this._y,\n        z = this._z,\n        w = this._w; // http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/slerp/\n\n    var cosHalfTheta = w * qb._w + x * qb._x + y * qb._y + z * qb._z;\n\n    if (cosHalfTheta < 0) {\n      this._w = -qb._w;\n      this._x = -qb._x;\n      this._y = -qb._y;\n      this._z = -qb._z;\n      cosHalfTheta = -cosHalfTheta;\n    } else {\n      this.copy(qb);\n    }\n\n    if (cosHalfTheta >= 1.0) {\n      this._w = w;\n      this._x = x;\n      this._y = y;\n      this._z = z;\n      return this;\n    }\n\n    var sqrSinHalfTheta = 1.0 - cosHalfTheta * cosHalfTheta;\n\n    if (sqrSinHalfTheta <= Number.EPSILON) {\n      var s = 1 - t;\n      this._w = s * w + t * this._w;\n      this._x = s * x + t * this._x;\n      this._y = s * y + t * this._y;\n      this._z = s * z + t * this._z;\n      this.normalize();\n\n      this._onChangeCallback();\n\n      return this;\n    }\n\n    var sinHalfTheta = Math.sqrt(sqrSinHalfTheta);\n    var halfTheta = Math.atan2(sinHalfTheta, cosHalfTheta);\n    var ratioA = Math.sin((1 - t) * halfTheta) / sinHalfTheta,\n        ratioB = Math.sin(t * halfTheta) / sinHalfTheta;\n    this._w = w * ratioA + this._w * ratioB;\n    this._x = x * ratioA + this._x * ratioB;\n    this._y = y * ratioA + this._y * ratioB;\n    this._z = z * ratioA + this._z * ratioB;\n\n    this._onChangeCallback();\n\n    return this;\n  },\n  equals: function (quaternion) {\n    return quaternion._x === this._x && quaternion._y === this._y && quaternion._z === this._z && quaternion._w === this._w;\n  },\n  fromArray: function (array, offset) {\n    if (offset === undefined) offset = 0;\n    this._x = array[offset];\n    this._y = array[offset + 1];\n    this._z = array[offset + 2];\n    this._w = array[offset + 3];\n\n    this._onChangeCallback();\n\n    return this;\n  },\n  toArray: function (array, offset) {\n    if (array === undefined) array = [];\n    if (offset === undefined) offset = 0;\n    array[offset] = this._x;\n    array[offset + 1] = this._y;\n    array[offset + 2] = this._z;\n    array[offset + 3] = this._w;\n    return array;\n  },\n  _onChange: function (callback) {\n    this._onChangeCallback = callback;\n    return this;\n  },\n  _onChangeCallback: function () {}\n});\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author kile / http://kile.stravaganza.org/\n * @author philogb / http://blog.thejit.org/\n * @author mikael emtinger / http://gomo.se/\n * @author egraether / http://egraether.com/\n * @author WestLangley / http://github.com/WestLangley\n */\n\nvar _vector = new Vector3();\n\nvar _quaternion = new Quaternion();\n\nfunction Vector3(x, y, z) {\n  this.x = x || 0;\n  this.y = y || 0;\n  this.z = z || 0;\n}\n\nObject.assign(Vector3.prototype, {\n  isVector3: true,\n  set: function (x, y, z) {\n    this.x = x;\n    this.y = y;\n    this.z = z;\n    return this;\n  },\n  setScalar: function (scalar) {\n    this.x = scalar;\n    this.y = scalar;\n    this.z = scalar;\n    return this;\n  },\n  setX: function (x) {\n    this.x = x;\n    return this;\n  },\n  setY: function (y) {\n    this.y = y;\n    return this;\n  },\n  setZ: function (z) {\n    this.z = z;\n    return this;\n  },\n  setComponent: function (index, value) {\n    switch (index) {\n      case 0:\n        this.x = value;\n        break;\n\n      case 1:\n        this.y = value;\n        break;\n\n      case 2:\n        this.z = value;\n        break;\n\n      default:\n        throw new Error('index is out of range: ' + index);\n    }\n\n    return this;\n  },\n  getComponent: function (index) {\n    switch (index) {\n      case 0:\n        return this.x;\n\n      case 1:\n        return this.y;\n\n      case 2:\n        return this.z;\n\n      default:\n        throw new Error('index is out of range: ' + index);\n    }\n  },\n  clone: function () {\n    return new this.constructor(this.x, this.y, this.z);\n  },\n  copy: function (v) {\n    this.x = v.x;\n    this.y = v.y;\n    this.z = v.z;\n    return this;\n  },\n  add: function (v, w) {\n    if (w !== undefined) {\n      console.warn('THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead.');\n      return this.addVectors(v, w);\n    }\n\n    this.x += v.x;\n    this.y += v.y;\n    this.z += v.z;\n    return this;\n  },\n  addScalar: function (s) {\n    this.x += s;\n    this.y += s;\n    this.z += s;\n    return this;\n  },\n  addVectors: function (a, b) {\n    this.x = a.x + b.x;\n    this.y = a.y + b.y;\n    this.z = a.z + b.z;\n    return this;\n  },\n  addScaledVector: function (v, s) {\n    this.x += v.x * s;\n    this.y += v.y * s;\n    this.z += v.z * s;\n    return this;\n  },\n  sub: function (v, w) {\n    if (w !== undefined) {\n      console.warn('THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.');\n      return this.subVectors(v, w);\n    }\n\n    this.x -= v.x;\n    this.y -= v.y;\n    this.z -= v.z;\n    return this;\n  },\n  subScalar: function (s) {\n    this.x -= s;\n    this.y -= s;\n    this.z -= s;\n    return this;\n  },\n  subVectors: function (a, b) {\n    this.x = a.x - b.x;\n    this.y = a.y - b.y;\n    this.z = a.z - b.z;\n    return this;\n  },\n  multiply: function (v, w) {\n    if (w !== undefined) {\n      console.warn('THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.');\n      return this.multiplyVectors(v, w);\n    }\n\n    this.x *= v.x;\n    this.y *= v.y;\n    this.z *= v.z;\n    return this;\n  },\n  multiplyScalar: function (scalar) {\n    this.x *= scalar;\n    this.y *= scalar;\n    this.z *= scalar;\n    return this;\n  },\n  multiplyVectors: function (a, b) {\n    this.x = a.x * b.x;\n    this.y = a.y * b.y;\n    this.z = a.z * b.z;\n    return this;\n  },\n  applyEuler: function (euler) {\n    if (!(euler && euler.isEuler)) {\n      console.error('THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.');\n    }\n\n    return this.applyQuaternion(_quaternion.setFromEuler(euler));\n  },\n  applyAxisAngle: function (axis, angle) {\n    return this.applyQuaternion(_quaternion.setFromAxisAngle(axis, angle));\n  },\n  applyMatrix3: function (m) {\n    var x = this.x,\n        y = this.y,\n        z = this.z;\n    var e = m.elements;\n    this.x = e[0] * x + e[3] * y + e[6] * z;\n    this.y = e[1] * x + e[4] * y + e[7] * z;\n    this.z = e[2] * x + e[5] * y + e[8] * z;\n    return this;\n  },\n  applyNormalMatrix: function (m) {\n    return this.applyMatrix3(m).normalize();\n  },\n  applyMatrix4: function (m) {\n    var x = this.x,\n        y = this.y,\n        z = this.z;\n    var e = m.elements;\n    var w = 1 / (e[3] * x + e[7] * y + e[11] * z + e[15]);\n    this.x = (e[0] * x + e[4] * y + e[8] * z + e[12]) * w;\n    this.y = (e[1] * x + e[5] * y + e[9] * z + e[13]) * w;\n    this.z = (e[2] * x + e[6] * y + e[10] * z + e[14]) * w;\n    return this;\n  },\n  applyQuaternion: function (q) {\n    var x = this.x,\n        y = this.y,\n        z = this.z;\n    var qx = q.x,\n        qy = q.y,\n        qz = q.z,\n        qw = q.w; // calculate quat * vector\n\n    var ix = qw * x + qy * z - qz * y;\n    var iy = qw * y + qz * x - qx * z;\n    var iz = qw * z + qx * y - qy * x;\n    var iw = -qx * x - qy * y - qz * z; // calculate result * inverse quat\n\n    this.x = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n    this.y = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n    this.z = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n    return this;\n  },\n  project: function (camera) {\n    return this.applyMatrix4(camera.matrixWorldInverse).applyMatrix4(camera.projectionMatrix);\n  },\n  unproject: function (camera) {\n    return this.applyMatrix4(camera.projectionMatrixInverse).applyMatrix4(camera.matrixWorld);\n  },\n  transformDirection: function (m) {\n    // input: THREE.Matrix4 affine matrix\n    // vector interpreted as a direction\n    var x = this.x,\n        y = this.y,\n        z = this.z;\n    var e = m.elements;\n    this.x = e[0] * x + e[4] * y + e[8] * z;\n    this.y = e[1] * x + e[5] * y + e[9] * z;\n    this.z = e[2] * x + e[6] * y + e[10] * z;\n    return this.normalize();\n  },\n  divide: function (v) {\n    this.x /= v.x;\n    this.y /= v.y;\n    this.z /= v.z;\n    return this;\n  },\n  divideScalar: function (scalar) {\n    return this.multiplyScalar(1 / scalar);\n  },\n  min: function (v) {\n    this.x = Math.min(this.x, v.x);\n    this.y = Math.min(this.y, v.y);\n    this.z = Math.min(this.z, v.z);\n    return this;\n  },\n  max: function (v) {\n    this.x = Math.max(this.x, v.x);\n    this.y = Math.max(this.y, v.y);\n    this.z = Math.max(this.z, v.z);\n    return this;\n  },\n  clamp: function (min, max) {\n    // assumes min < max, componentwise\n    this.x = Math.max(min.x, Math.min(max.x, this.x));\n    this.y = Math.max(min.y, Math.min(max.y, this.y));\n    this.z = Math.max(min.z, Math.min(max.z, this.z));\n    return this;\n  },\n  clampScalar: function (minVal, maxVal) {\n    this.x = Math.max(minVal, Math.min(maxVal, this.x));\n    this.y = Math.max(minVal, Math.min(maxVal, this.y));\n    this.z = Math.max(minVal, Math.min(maxVal, this.z));\n    return this;\n  },\n  clampLength: function (min, max) {\n    var length = this.length();\n    return this.divideScalar(length || 1).multiplyScalar(Math.max(min, Math.min(max, length)));\n  },\n  floor: function () {\n    this.x = Math.floor(this.x);\n    this.y = Math.floor(this.y);\n    this.z = Math.floor(this.z);\n    return this;\n  },\n  ceil: function () {\n    this.x = Math.ceil(this.x);\n    this.y = Math.ceil(this.y);\n    this.z = Math.ceil(this.z);\n    return this;\n  },\n  round: function () {\n    this.x = Math.round(this.x);\n    this.y = Math.round(this.y);\n    this.z = Math.round(this.z);\n    return this;\n  },\n  roundToZero: function () {\n    this.x = this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x);\n    this.y = this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y);\n    this.z = this.z < 0 ? Math.ceil(this.z) : Math.floor(this.z);\n    return this;\n  },\n  negate: function () {\n    this.x = -this.x;\n    this.y = -this.y;\n    this.z = -this.z;\n    return this;\n  },\n  dot: function (v) {\n    return this.x * v.x + this.y * v.y + this.z * v.z;\n  },\n  // TODO lengthSquared?\n  lengthSq: function () {\n    return this.x * this.x + this.y * this.y + this.z * this.z;\n  },\n  length: function () {\n    return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);\n  },\n  manhattanLength: function () {\n    return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z);\n  },\n  normalize: function () {\n    return this.divideScalar(this.length() || 1);\n  },\n  setLength: function (length) {\n    return this.normalize().multiplyScalar(length);\n  },\n  lerp: function (v, alpha) {\n    this.x += (v.x - this.x) * alpha;\n    this.y += (v.y - this.y) * alpha;\n    this.z += (v.z - this.z) * alpha;\n    return this;\n  },\n  lerpVectors: function (v1, v2, alpha) {\n    return this.subVectors(v2, v1).multiplyScalar(alpha).add(v1);\n  },\n  cross: function (v, w) {\n    if (w !== undefined) {\n      console.warn('THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.');\n      return this.crossVectors(v, w);\n    }\n\n    return this.crossVectors(this, v);\n  },\n  crossVectors: function (a, b) {\n    var ax = a.x,\n        ay = a.y,\n        az = a.z;\n    var bx = b.x,\n        by = b.y,\n        bz = b.z;\n    this.x = ay * bz - az * by;\n    this.y = az * bx - ax * bz;\n    this.z = ax * by - ay * bx;\n    return this;\n  },\n  projectOnVector: function (v) {\n    var denominator = v.lengthSq();\n    if (denominator === 0) return this.set(0, 0, 0);\n    var scalar = v.dot(this) / denominator;\n    return this.copy(v).multiplyScalar(scalar);\n  },\n  projectOnPlane: function (planeNormal) {\n    _vector.copy(this).projectOnVector(planeNormal);\n\n    return this.sub(_vector);\n  },\n  reflect: function (normal) {\n    // reflect incident vector off plane orthogonal to normal\n    // normal is assumed to have unit length\n    return this.sub(_vector.copy(normal).multiplyScalar(2 * this.dot(normal)));\n  },\n  angleTo: function (v) {\n    var denominator = Math.sqrt(this.lengthSq() * v.lengthSq());\n    if (denominator === 0) return Math.PI / 2;\n    var theta = this.dot(v) / denominator; // clamp, to handle numerical problems\n\n    return Math.acos(MathUtils.clamp(theta, -1, 1));\n  },\n  distanceTo: function (v) {\n    return Math.sqrt(this.distanceToSquared(v));\n  },\n  distanceToSquared: function (v) {\n    var dx = this.x - v.x,\n        dy = this.y - v.y,\n        dz = this.z - v.z;\n    return dx * dx + dy * dy + dz * dz;\n  },\n  manhattanDistanceTo: function (v) {\n    return Math.abs(this.x - v.x) + Math.abs(this.y - v.y) + Math.abs(this.z - v.z);\n  },\n  setFromSpherical: function (s) {\n    return this.setFromSphericalCoords(s.radius, s.phi, s.theta);\n  },\n  setFromSphericalCoords: function (radius, phi, theta) {\n    var sinPhiRadius = Math.sin(phi) * radius;\n    this.x = sinPhiRadius * Math.sin(theta);\n    this.y = Math.cos(phi) * radius;\n    this.z = sinPhiRadius * Math.cos(theta);\n    return this;\n  },\n  setFromCylindrical: function (c) {\n    return this.setFromCylindricalCoords(c.radius, c.theta, c.y);\n  },\n  setFromCylindricalCoords: function (radius, theta, y) {\n    this.x = radius * Math.sin(theta);\n    this.y = y;\n    this.z = radius * Math.cos(theta);\n    return this;\n  },\n  setFromMatrixPosition: function (m) {\n    var e = m.elements;\n    this.x = e[12];\n    this.y = e[13];\n    this.z = e[14];\n    return this;\n  },\n  setFromMatrixScale: function (m) {\n    var sx = this.setFromMatrixColumn(m, 0).length();\n    var sy = this.setFromMatrixColumn(m, 1).length();\n    var sz = this.setFromMatrixColumn(m, 2).length();\n    this.x = sx;\n    this.y = sy;\n    this.z = sz;\n    return this;\n  },\n  setFromMatrixColumn: function (m, index) {\n    return this.fromArray(m.elements, index * 4);\n  },\n  setFromMatrix3Column: function (m, index) {\n    return this.fromArray(m.elements, index * 3);\n  },\n  equals: function (v) {\n    return v.x === this.x && v.y === this.y && v.z === this.z;\n  },\n  fromArray: function (array, offset) {\n    if (offset === undefined) offset = 0;\n    this.x = array[offset];\n    this.y = array[offset + 1];\n    this.z = array[offset + 2];\n    return this;\n  },\n  toArray: function (array, offset) {\n    if (array === undefined) array = [];\n    if (offset === undefined) offset = 0;\n    array[offset] = this.x;\n    array[offset + 1] = this.y;\n    array[offset + 2] = this.z;\n    return array;\n  },\n  fromBufferAttribute: function (attribute, index, offset) {\n    if (offset !== undefined) {\n      console.warn('THREE.Vector3: offset has been removed from .fromBufferAttribute().');\n    }\n\n    this.x = attribute.getX(index);\n    this.y = attribute.getY(index);\n    this.z = attribute.getZ(index);\n    return this;\n  }\n});\n\nvar _v1 = new Vector3();\n\nvar _m1 = new Matrix4();\n\nvar _zero = new Vector3(0, 0, 0);\n\nvar _one = new Vector3(1, 1, 1);\n\nvar _x = new Vector3();\n\nvar _y = new Vector3();\n\nvar _z = new Vector3();\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author supereggbert / http://www.paulbrunt.co.uk/\n * @author philogb / http://blog.thejit.org/\n * @author jordi_ros / http://plattsoft.com\n * @author D1plo1d / http://github.com/D1plo1d\n * @author alteredq / http://alteredqualia.com/\n * @author mikael emtinger / http://gomo.se/\n * @author timknip / http://www.floorplanner.com/\n * @author bhouston / http://clara.io\n * @author WestLangley / http://github.com/WestLangley\n */\n\n\nfunction Matrix4() {\n  this.elements = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n\n  if (arguments.length > 0) {\n    console.error('THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.');\n  }\n}\n\nObject.assign(Matrix4.prototype, {\n  isMatrix4: true,\n  set: function (n11, n12, n13, n14, n21, n22, n23, n24, n31, n32, n33, n34, n41, n42, n43, n44) {\n    var te = this.elements;\n    te[0] = n11;\n    te[4] = n12;\n    te[8] = n13;\n    te[12] = n14;\n    te[1] = n21;\n    te[5] = n22;\n    te[9] = n23;\n    te[13] = n24;\n    te[2] = n31;\n    te[6] = n32;\n    te[10] = n33;\n    te[14] = n34;\n    te[3] = n41;\n    te[7] = n42;\n    te[11] = n43;\n    te[15] = n44;\n    return this;\n  },\n  identity: function () {\n    this.set(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);\n    return this;\n  },\n  clone: function () {\n    return new Matrix4().fromArray(this.elements);\n  },\n  copy: function (m) {\n    var te = this.elements;\n    var me = m.elements;\n    te[0] = me[0];\n    te[1] = me[1];\n    te[2] = me[2];\n    te[3] = me[3];\n    te[4] = me[4];\n    te[5] = me[5];\n    te[6] = me[6];\n    te[7] = me[7];\n    te[8] = me[8];\n    te[9] = me[9];\n    te[10] = me[10];\n    te[11] = me[11];\n    te[12] = me[12];\n    te[13] = me[13];\n    te[14] = me[14];\n    te[15] = me[15];\n    return this;\n  },\n  copyPosition: function (m) {\n    var te = this.elements,\n        me = m.elements;\n    te[12] = me[12];\n    te[13] = me[13];\n    te[14] = me[14];\n    return this;\n  },\n  extractBasis: function (xAxis, yAxis, zAxis) {\n    xAxis.setFromMatrixColumn(this, 0);\n    yAxis.setFromMatrixColumn(this, 1);\n    zAxis.setFromMatrixColumn(this, 2);\n    return this;\n  },\n  makeBasis: function (xAxis, yAxis, zAxis) {\n    this.set(xAxis.x, yAxis.x, zAxis.x, 0, xAxis.y, yAxis.y, zAxis.y, 0, xAxis.z, yAxis.z, zAxis.z, 0, 0, 0, 0, 1);\n    return this;\n  },\n  extractRotation: function (m) {\n    // this method does not support reflection matrices\n    var te = this.elements;\n    var me = m.elements;\n\n    var scaleX = 1 / _v1.setFromMatrixColumn(m, 0).length();\n\n    var scaleY = 1 / _v1.setFromMatrixColumn(m, 1).length();\n\n    var scaleZ = 1 / _v1.setFromMatrixColumn(m, 2).length();\n\n    te[0] = me[0] * scaleX;\n    te[1] = me[1] * scaleX;\n    te[2] = me[2] * scaleX;\n    te[3] = 0;\n    te[4] = me[4] * scaleY;\n    te[5] = me[5] * scaleY;\n    te[6] = me[6] * scaleY;\n    te[7] = 0;\n    te[8] = me[8] * scaleZ;\n    te[9] = me[9] * scaleZ;\n    te[10] = me[10] * scaleZ;\n    te[11] = 0;\n    te[12] = 0;\n    te[13] = 0;\n    te[14] = 0;\n    te[15] = 1;\n    return this;\n  },\n  makeRotationFromEuler: function (euler) {\n    if (!(euler && euler.isEuler)) {\n      console.error('THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.');\n    }\n\n    var te = this.elements;\n    var x = euler.x,\n        y = euler.y,\n        z = euler.z;\n    var a = Math.cos(x),\n        b = Math.sin(x);\n    var c = Math.cos(y),\n        d = Math.sin(y);\n    var e = Math.cos(z),\n        f = Math.sin(z);\n\n    if (euler.order === 'XYZ') {\n      var ae = a * e,\n          af = a * f,\n          be = b * e,\n          bf = b * f;\n      te[0] = c * e;\n      te[4] = -c * f;\n      te[8] = d;\n      te[1] = af + be * d;\n      te[5] = ae - bf * d;\n      te[9] = -b * c;\n      te[2] = bf - ae * d;\n      te[6] = be + af * d;\n      te[10] = a * c;\n    } else if (euler.order === 'YXZ') {\n      var ce = c * e,\n          cf = c * f,\n          de = d * e,\n          df = d * f;\n      te[0] = ce + df * b;\n      te[4] = de * b - cf;\n      te[8] = a * d;\n      te[1] = a * f;\n      te[5] = a * e;\n      te[9] = -b;\n      te[2] = cf * b - de;\n      te[6] = df + ce * b;\n      te[10] = a * c;\n    } else if (euler.order === 'ZXY') {\n      var ce = c * e,\n          cf = c * f,\n          de = d * e,\n          df = d * f;\n      te[0] = ce - df * b;\n      te[4] = -a * f;\n      te[8] = de + cf * b;\n      te[1] = cf + de * b;\n      te[5] = a * e;\n      te[9] = df - ce * b;\n      te[2] = -a * d;\n      te[6] = b;\n      te[10] = a * c;\n    } else if (euler.order === 'ZYX') {\n      var ae = a * e,\n          af = a * f,\n          be = b * e,\n          bf = b * f;\n      te[0] = c * e;\n      te[4] = be * d - af;\n      te[8] = ae * d + bf;\n      te[1] = c * f;\n      te[5] = bf * d + ae;\n      te[9] = af * d - be;\n      te[2] = -d;\n      te[6] = b * c;\n      te[10] = a * c;\n    } else if (euler.order === 'YZX') {\n      var ac = a * c,\n          ad = a * d,\n          bc = b * c,\n          bd = b * d;\n      te[0] = c * e;\n      te[4] = bd - ac * f;\n      te[8] = bc * f + ad;\n      te[1] = f;\n      te[5] = a * e;\n      te[9] = -b * e;\n      te[2] = -d * e;\n      te[6] = ad * f + bc;\n      te[10] = ac - bd * f;\n    } else if (euler.order === 'XZY') {\n      var ac = a * c,\n          ad = a * d,\n          bc = b * c,\n          bd = b * d;\n      te[0] = c * e;\n      te[4] = -f;\n      te[8] = d * e;\n      te[1] = ac * f + bd;\n      te[5] = a * e;\n      te[9] = ad * f - bc;\n      te[2] = bc * f - ad;\n      te[6] = b * e;\n      te[10] = bd * f + ac;\n    } // bottom row\n\n\n    te[3] = 0;\n    te[7] = 0;\n    te[11] = 0; // last column\n\n    te[12] = 0;\n    te[13] = 0;\n    te[14] = 0;\n    te[15] = 1;\n    return this;\n  },\n  makeRotationFromQuaternion: function (q) {\n    return this.compose(_zero, q, _one);\n  },\n  lookAt: function (eye, target, up) {\n    var te = this.elements;\n\n    _z.subVectors(eye, target);\n\n    if (_z.lengthSq() === 0) {\n      // eye and target are in the same position\n      _z.z = 1;\n    }\n\n    _z.normalize();\n\n    _x.crossVectors(up, _z);\n\n    if (_x.lengthSq() === 0) {\n      // up and z are parallel\n      if (Math.abs(up.z) === 1) {\n        _z.x += 0.0001;\n      } else {\n        _z.z += 0.0001;\n      }\n\n      _z.normalize();\n\n      _x.crossVectors(up, _z);\n    }\n\n    _x.normalize();\n\n    _y.crossVectors(_z, _x);\n\n    te[0] = _x.x;\n    te[4] = _y.x;\n    te[8] = _z.x;\n    te[1] = _x.y;\n    te[5] = _y.y;\n    te[9] = _z.y;\n    te[2] = _x.z;\n    te[6] = _y.z;\n    te[10] = _z.z;\n    return this;\n  },\n  multiply: function (m, n) {\n    if (n !== undefined) {\n      console.warn('THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.');\n      return this.multiplyMatrices(m, n);\n    }\n\n    return this.multiplyMatrices(this, m);\n  },\n  premultiply: function (m) {\n    return this.multiplyMatrices(m, this);\n  },\n  multiplyMatrices: function (a, b) {\n    var ae = a.elements;\n    var be = b.elements;\n    var te = this.elements;\n    var a11 = ae[0],\n        a12 = ae[4],\n        a13 = ae[8],\n        a14 = ae[12];\n    var a21 = ae[1],\n        a22 = ae[5],\n        a23 = ae[9],\n        a24 = ae[13];\n    var a31 = ae[2],\n        a32 = ae[6],\n        a33 = ae[10],\n        a34 = ae[14];\n    var a41 = ae[3],\n        a42 = ae[7],\n        a43 = ae[11],\n        a44 = ae[15];\n    var b11 = be[0],\n        b12 = be[4],\n        b13 = be[8],\n        b14 = be[12];\n    var b21 = be[1],\n        b22 = be[5],\n        b23 = be[9],\n        b24 = be[13];\n    var b31 = be[2],\n        b32 = be[6],\n        b33 = be[10],\n        b34 = be[14];\n    var b41 = be[3],\n        b42 = be[7],\n        b43 = be[11],\n        b44 = be[15];\n    te[0] = a11 * b11 + a12 * b21 + a13 * b31 + a14 * b41;\n    te[4] = a11 * b12 + a12 * b22 + a13 * b32 + a14 * b42;\n    te[8] = a11 * b13 + a12 * b23 + a13 * b33 + a14 * b43;\n    te[12] = a11 * b14 + a12 * b24 + a13 * b34 + a14 * b44;\n    te[1] = a21 * b11 + a22 * b21 + a23 * b31 + a24 * b41;\n    te[5] = a21 * b12 + a22 * b22 + a23 * b32 + a24 * b42;\n    te[9] = a21 * b13 + a22 * b23 + a23 * b33 + a24 * b43;\n    te[13] = a21 * b14 + a22 * b24 + a23 * b34 + a24 * b44;\n    te[2] = a31 * b11 + a32 * b21 + a33 * b31 + a34 * b41;\n    te[6] = a31 * b12 + a32 * b22 + a33 * b32 + a34 * b42;\n    te[10] = a31 * b13 + a32 * b23 + a33 * b33 + a34 * b43;\n    te[14] = a31 * b14 + a32 * b24 + a33 * b34 + a34 * b44;\n    te[3] = a41 * b11 + a42 * b21 + a43 * b31 + a44 * b41;\n    te[7] = a41 * b12 + a42 * b22 + a43 * b32 + a44 * b42;\n    te[11] = a41 * b13 + a42 * b23 + a43 * b33 + a44 * b43;\n    te[15] = a41 * b14 + a42 * b24 + a43 * b34 + a44 * b44;\n    return this;\n  },\n  multiplyScalar: function (s) {\n    var te = this.elements;\n    te[0] *= s;\n    te[4] *= s;\n    te[8] *= s;\n    te[12] *= s;\n    te[1] *= s;\n    te[5] *= s;\n    te[9] *= s;\n    te[13] *= s;\n    te[2] *= s;\n    te[6] *= s;\n    te[10] *= s;\n    te[14] *= s;\n    te[3] *= s;\n    te[7] *= s;\n    te[11] *= s;\n    te[15] *= s;\n    return this;\n  },\n  determinant: function () {\n    var te = this.elements;\n    var n11 = te[0],\n        n12 = te[4],\n        n13 = te[8],\n        n14 = te[12];\n    var n21 = te[1],\n        n22 = te[5],\n        n23 = te[9],\n        n24 = te[13];\n    var n31 = te[2],\n        n32 = te[6],\n        n33 = te[10],\n        n34 = te[14];\n    var n41 = te[3],\n        n42 = te[7],\n        n43 = te[11],\n        n44 = te[15]; //TODO: make this more efficient\n    //( based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm )\n\n    return n41 * (+n14 * n23 * n32 - n13 * n24 * n32 - n14 * n22 * n33 + n12 * n24 * n33 + n13 * n22 * n34 - n12 * n23 * n34) + n42 * (+n11 * n23 * n34 - n11 * n24 * n33 + n14 * n21 * n33 - n13 * n21 * n34 + n13 * n24 * n31 - n14 * n23 * n31) + n43 * (+n11 * n24 * n32 - n11 * n22 * n34 - n14 * n21 * n32 + n12 * n21 * n34 + n14 * n22 * n31 - n12 * n24 * n31) + n44 * (-n13 * n22 * n31 - n11 * n23 * n32 + n11 * n22 * n33 + n13 * n21 * n32 - n12 * n21 * n33 + n12 * n23 * n31);\n  },\n  transpose: function () {\n    var te = this.elements;\n    var tmp;\n    tmp = te[1];\n    te[1] = te[4];\n    te[4] = tmp;\n    tmp = te[2];\n    te[2] = te[8];\n    te[8] = tmp;\n    tmp = te[6];\n    te[6] = te[9];\n    te[9] = tmp;\n    tmp = te[3];\n    te[3] = te[12];\n    te[12] = tmp;\n    tmp = te[7];\n    te[7] = te[13];\n    te[13] = tmp;\n    tmp = te[11];\n    te[11] = te[14];\n    te[14] = tmp;\n    return this;\n  },\n  setPosition: function (x, y, z) {\n    var te = this.elements;\n\n    if (x.isVector3) {\n      te[12] = x.x;\n      te[13] = x.y;\n      te[14] = x.z;\n    } else {\n      te[12] = x;\n      te[13] = y;\n      te[14] = z;\n    }\n\n    return this;\n  },\n  getInverse: function (m, throwOnDegenerate) {\n    // based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm\n    var te = this.elements,\n        me = m.elements,\n        n11 = me[0],\n        n21 = me[1],\n        n31 = me[2],\n        n41 = me[3],\n        n12 = me[4],\n        n22 = me[5],\n        n32 = me[6],\n        n42 = me[7],\n        n13 = me[8],\n        n23 = me[9],\n        n33 = me[10],\n        n43 = me[11],\n        n14 = me[12],\n        n24 = me[13],\n        n34 = me[14],\n        n44 = me[15],\n        t11 = n23 * n34 * n42 - n24 * n33 * n42 + n24 * n32 * n43 - n22 * n34 * n43 - n23 * n32 * n44 + n22 * n33 * n44,\n        t12 = n14 * n33 * n42 - n13 * n34 * n42 - n14 * n32 * n43 + n12 * n34 * n43 + n13 * n32 * n44 - n12 * n33 * n44,\n        t13 = n13 * n24 * n42 - n14 * n23 * n42 + n14 * n22 * n43 - n12 * n24 * n43 - n13 * n22 * n44 + n12 * n23 * n44,\n        t14 = n14 * n23 * n32 - n13 * n24 * n32 - n14 * n22 * n33 + n12 * n24 * n33 + n13 * n22 * n34 - n12 * n23 * n34;\n    var det = n11 * t11 + n21 * t12 + n31 * t13 + n41 * t14;\n\n    if (det === 0) {\n      var msg = \"THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0\";\n\n      if (throwOnDegenerate === true) {\n        throw new Error(msg);\n      } else {\n        console.warn(msg);\n      }\n\n      return this.identity();\n    }\n\n    var detInv = 1 / det;\n    te[0] = t11 * detInv;\n    te[1] = (n24 * n33 * n41 - n23 * n34 * n41 - n24 * n31 * n43 + n21 * n34 * n43 + n23 * n31 * n44 - n21 * n33 * n44) * detInv;\n    te[2] = (n22 * n34 * n41 - n24 * n32 * n41 + n24 * n31 * n42 - n21 * n34 * n42 - n22 * n31 * n44 + n21 * n32 * n44) * detInv;\n    te[3] = (n23 * n32 * n41 - n22 * n33 * n41 - n23 * n31 * n42 + n21 * n33 * n42 + n22 * n31 * n43 - n21 * n32 * n43) * detInv;\n    te[4] = t12 * detInv;\n    te[5] = (n13 * n34 * n41 - n14 * n33 * n41 + n14 * n31 * n43 - n11 * n34 * n43 - n13 * n31 * n44 + n11 * n33 * n44) * detInv;\n    te[6] = (n14 * n32 * n41 - n12 * n34 * n41 - n14 * n31 * n42 + n11 * n34 * n42 + n12 * n31 * n44 - n11 * n32 * n44) * detInv;\n    te[7] = (n12 * n33 * n41 - n13 * n32 * n41 + n13 * n31 * n42 - n11 * n33 * n42 - n12 * n31 * n43 + n11 * n32 * n43) * detInv;\n    te[8] = t13 * detInv;\n    te[9] = (n14 * n23 * n41 - n13 * n24 * n41 - n14 * n21 * n43 + n11 * n24 * n43 + n13 * n21 * n44 - n11 * n23 * n44) * detInv;\n    te[10] = (n12 * n24 * n41 - n14 * n22 * n41 + n14 * n21 * n42 - n11 * n24 * n42 - n12 * n21 * n44 + n11 * n22 * n44) * detInv;\n    te[11] = (n13 * n22 * n41 - n12 * n23 * n41 - n13 * n21 * n42 + n11 * n23 * n42 + n12 * n21 * n43 - n11 * n22 * n43) * detInv;\n    te[12] = t14 * detInv;\n    te[13] = (n13 * n24 * n31 - n14 * n23 * n31 + n14 * n21 * n33 - n11 * n24 * n33 - n13 * n21 * n34 + n11 * n23 * n34) * detInv;\n    te[14] = (n14 * n22 * n31 - n12 * n24 * n31 - n14 * n21 * n32 + n11 * n24 * n32 + n12 * n21 * n34 - n11 * n22 * n34) * detInv;\n    te[15] = (n12 * n23 * n31 - n13 * n22 * n31 + n13 * n21 * n32 - n11 * n23 * n32 - n12 * n21 * n33 + n11 * n22 * n33) * detInv;\n    return this;\n  },\n  scale: function (v) {\n    var te = this.elements;\n    var x = v.x,\n        y = v.y,\n        z = v.z;\n    te[0] *= x;\n    te[4] *= y;\n    te[8] *= z;\n    te[1] *= x;\n    te[5] *= y;\n    te[9] *= z;\n    te[2] *= x;\n    te[6] *= y;\n    te[10] *= z;\n    te[3] *= x;\n    te[7] *= y;\n    te[11] *= z;\n    return this;\n  },\n  getMaxScaleOnAxis: function () {\n    var te = this.elements;\n    var scaleXSq = te[0] * te[0] + te[1] * te[1] + te[2] * te[2];\n    var scaleYSq = te[4] * te[4] + te[5] * te[5] + te[6] * te[6];\n    var scaleZSq = te[8] * te[8] + te[9] * te[9] + te[10] * te[10];\n    return Math.sqrt(Math.max(scaleXSq, scaleYSq, scaleZSq));\n  },\n  makeTranslation: function (x, y, z) {\n    this.set(1, 0, 0, x, 0, 1, 0, y, 0, 0, 1, z, 0, 0, 0, 1);\n    return this;\n  },\n  makeRotationX: function (theta) {\n    var c = Math.cos(theta),\n        s = Math.sin(theta);\n    this.set(1, 0, 0, 0, 0, c, -s, 0, 0, s, c, 0, 0, 0, 0, 1);\n    return this;\n  },\n  makeRotationY: function (theta) {\n    var c = Math.cos(theta),\n        s = Math.sin(theta);\n    this.set(c, 0, s, 0, 0, 1, 0, 0, -s, 0, c, 0, 0, 0, 0, 1);\n    return this;\n  },\n  makeRotationZ: function (theta) {\n    var c = Math.cos(theta),\n        s = Math.sin(theta);\n    this.set(c, -s, 0, 0, s, c, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);\n    return this;\n  },\n  makeRotationAxis: function (axis, angle) {\n    // Based on http://www.gamedev.net/reference/articles/article1199.asp\n    var c = Math.cos(angle);\n    var s = Math.sin(angle);\n    var t = 1 - c;\n    var x = axis.x,\n        y = axis.y,\n        z = axis.z;\n    var tx = t * x,\n        ty = t * y;\n    this.set(tx * x + c, tx * y - s * z, tx * z + s * y, 0, tx * y + s * z, ty * y + c, ty * z - s * x, 0, tx * z - s * y, ty * z + s * x, t * z * z + c, 0, 0, 0, 0, 1);\n    return this;\n  },\n  makeScale: function (x, y, z) {\n    this.set(x, 0, 0, 0, 0, y, 0, 0, 0, 0, z, 0, 0, 0, 0, 1);\n    return this;\n  },\n  makeShear: function (x, y, z) {\n    this.set(1, y, z, 0, x, 1, z, 0, x, y, 1, 0, 0, 0, 0, 1);\n    return this;\n  },\n  compose: function (position, quaternion, scale) {\n    var te = this.elements;\n    var x = quaternion._x,\n        y = quaternion._y,\n        z = quaternion._z,\n        w = quaternion._w;\n    var x2 = x + x,\n        y2 = y + y,\n        z2 = z + z;\n    var xx = x * x2,\n        xy = x * y2,\n        xz = x * z2;\n    var yy = y * y2,\n        yz = y * z2,\n        zz = z * z2;\n    var wx = w * x2,\n        wy = w * y2,\n        wz = w * z2;\n    var sx = scale.x,\n        sy = scale.y,\n        sz = scale.z;\n    te[0] = (1 - (yy + zz)) * sx;\n    te[1] = (xy + wz) * sx;\n    te[2] = (xz - wy) * sx;\n    te[3] = 0;\n    te[4] = (xy - wz) * sy;\n    te[5] = (1 - (xx + zz)) * sy;\n    te[6] = (yz + wx) * sy;\n    te[7] = 0;\n    te[8] = (xz + wy) * sz;\n    te[9] = (yz - wx) * sz;\n    te[10] = (1 - (xx + yy)) * sz;\n    te[11] = 0;\n    te[12] = position.x;\n    te[13] = position.y;\n    te[14] = position.z;\n    te[15] = 1;\n    return this;\n  },\n  decompose: function (position, quaternion, scale) {\n    var te = this.elements;\n\n    var sx = _v1.set(te[0], te[1], te[2]).length();\n\n    var sy = _v1.set(te[4], te[5], te[6]).length();\n\n    var sz = _v1.set(te[8], te[9], te[10]).length(); // if determine is negative, we need to invert one scale\n\n\n    var det = this.determinant();\n    if (det < 0) sx = -sx;\n    position.x = te[12];\n    position.y = te[13];\n    position.z = te[14]; // scale the rotation part\n\n    _m1.copy(this);\n\n    var invSX = 1 / sx;\n    var invSY = 1 / sy;\n    var invSZ = 1 / sz;\n    _m1.elements[0] *= invSX;\n    _m1.elements[1] *= invSX;\n    _m1.elements[2] *= invSX;\n    _m1.elements[4] *= invSY;\n    _m1.elements[5] *= invSY;\n    _m1.elements[6] *= invSY;\n    _m1.elements[8] *= invSZ;\n    _m1.elements[9] *= invSZ;\n    _m1.elements[10] *= invSZ;\n    quaternion.setFromRotationMatrix(_m1);\n    scale.x = sx;\n    scale.y = sy;\n    scale.z = sz;\n    return this;\n  },\n  makePerspective: function (left, right, top, bottom, near, far) {\n    if (far === undefined) {\n      console.warn('THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.');\n    }\n\n    var te = this.elements;\n    var x = 2 * near / (right - left);\n    var y = 2 * near / (top - bottom);\n    var a = (right + left) / (right - left);\n    var b = (top + bottom) / (top - bottom);\n    var c = -(far + near) / (far - near);\n    var d = -2 * far * near / (far - near);\n    te[0] = x;\n    te[4] = 0;\n    te[8] = a;\n    te[12] = 0;\n    te[1] = 0;\n    te[5] = y;\n    te[9] = b;\n    te[13] = 0;\n    te[2] = 0;\n    te[6] = 0;\n    te[10] = c;\n    te[14] = d;\n    te[3] = 0;\n    te[7] = 0;\n    te[11] = -1;\n    te[15] = 0;\n    return this;\n  },\n  makeOrthographic: function (left, right, top, bottom, near, far) {\n    var te = this.elements;\n    var w = 1.0 / (right - left);\n    var h = 1.0 / (top - bottom);\n    var p = 1.0 / (far - near);\n    var x = (right + left) * w;\n    var y = (top + bottom) * h;\n    var z = (far + near) * p;\n    te[0] = 2 * w;\n    te[4] = 0;\n    te[8] = 0;\n    te[12] = -x;\n    te[1] = 0;\n    te[5] = 2 * h;\n    te[9] = 0;\n    te[13] = -y;\n    te[2] = 0;\n    te[6] = 0;\n    te[10] = -2 * p;\n    te[14] = -z;\n    te[3] = 0;\n    te[7] = 0;\n    te[11] = 0;\n    te[15] = 1;\n    return this;\n  },\n  equals: function (matrix) {\n    var te = this.elements;\n    var me = matrix.elements;\n\n    for (var i = 0; i < 16; i++) {\n      if (te[i] !== me[i]) return false;\n    }\n\n    return true;\n  },\n  fromArray: function (array, offset) {\n    if (offset === undefined) offset = 0;\n\n    for (var i = 0; i < 16; i++) {\n      this.elements[i] = array[i + offset];\n    }\n\n    return this;\n  },\n  toArray: function (array, offset) {\n    if (array === undefined) array = [];\n    if (offset === undefined) offset = 0;\n    var te = this.elements;\n    array[offset] = te[0];\n    array[offset + 1] = te[1];\n    array[offset + 2] = te[2];\n    array[offset + 3] = te[3];\n    array[offset + 4] = te[4];\n    array[offset + 5] = te[5];\n    array[offset + 6] = te[6];\n    array[offset + 7] = te[7];\n    array[offset + 8] = te[8];\n    array[offset + 9] = te[9];\n    array[offset + 10] = te[10];\n    array[offset + 11] = te[11];\n    array[offset + 12] = te[12];\n    array[offset + 13] = te[13];\n    array[offset + 14] = te[14];\n    array[offset + 15] = te[15];\n    return array;\n  }\n});\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author bhouston / http://clara.io\n */\n\nvar _matrix = new Matrix4();\n\nvar _quaternion$1 = new Quaternion();\n\nfunction Euler(x, y, z, order) {\n  this._x = x || 0;\n  this._y = y || 0;\n  this._z = z || 0;\n  this._order = order || Euler.DefaultOrder;\n}\n\nEuler.RotationOrders = ['XYZ', 'YZX', 'ZXY', 'XZY', 'YXZ', 'ZYX'];\nEuler.DefaultOrder = 'XYZ';\nObject.defineProperties(Euler.prototype, {\n  x: {\n    get: function () {\n      return this._x;\n    },\n    set: function (value) {\n      this._x = value;\n\n      this._onChangeCallback();\n    }\n  },\n  y: {\n    get: function () {\n      return this._y;\n    },\n    set: function (value) {\n      this._y = value;\n\n      this._onChangeCallback();\n    }\n  },\n  z: {\n    get: function () {\n      return this._z;\n    },\n    set: function (value) {\n      this._z = value;\n\n      this._onChangeCallback();\n    }\n  },\n  order: {\n    get: function () {\n      return this._order;\n    },\n    set: function (value) {\n      this._order = value;\n\n      this._onChangeCallback();\n    }\n  }\n});\nObject.assign(Euler.prototype, {\n  isEuler: true,\n  set: function (x, y, z, order) {\n    this._x = x;\n    this._y = y;\n    this._z = z;\n    this._order = order || this._order;\n\n    this._onChangeCallback();\n\n    return this;\n  },\n  clone: function () {\n    return new this.constructor(this._x, this._y, this._z, this._order);\n  },\n  copy: function (euler) {\n    this._x = euler._x;\n    this._y = euler._y;\n    this._z = euler._z;\n    this._order = euler._order;\n\n    this._onChangeCallback();\n\n    return this;\n  },\n  setFromRotationMatrix: function (m, order, update) {\n    var clamp = MathUtils.clamp; // assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n    var te = m.elements;\n    var m11 = te[0],\n        m12 = te[4],\n        m13 = te[8];\n    var m21 = te[1],\n        m22 = te[5],\n        m23 = te[9];\n    var m31 = te[2],\n        m32 = te[6],\n        m33 = te[10];\n    order = order || this._order;\n\n    if (order === 'XYZ') {\n      this._y = Math.asin(clamp(m13, -1, 1));\n\n      if (Math.abs(m13) < 0.9999999) {\n        this._x = Math.atan2(-m23, m33);\n        this._z = Math.atan2(-m12, m11);\n      } else {\n        this._x = Math.atan2(m32, m22);\n        this._z = 0;\n      }\n    } else if (order === 'YXZ') {\n      this._x = Math.asin(-clamp(m23, -1, 1));\n\n      if (Math.abs(m23) < 0.9999999) {\n        this._y = Math.atan2(m13, m33);\n        this._z = Math.atan2(m21, m22);\n      } else {\n        this._y = Math.atan2(-m31, m11);\n        this._z = 0;\n      }\n    } else if (order === 'ZXY') {\n      this._x = Math.asin(clamp(m32, -1, 1));\n\n      if (Math.abs(m32) < 0.9999999) {\n        this._y = Math.atan2(-m31, m33);\n        this._z = Math.atan2(-m12, m22);\n      } else {\n        this._y = 0;\n        this._z = Math.atan2(m21, m11);\n      }\n    } else if (order === 'ZYX') {\n      this._y = Math.asin(-clamp(m31, -1, 1));\n\n      if (Math.abs(m31) < 0.9999999) {\n        this._x = Math.atan2(m32, m33);\n        this._z = Math.atan2(m21, m11);\n      } else {\n        this._x = 0;\n        this._z = Math.atan2(-m12, m22);\n      }\n    } else if (order === 'YZX') {\n      this._z = Math.asin(clamp(m21, -1, 1));\n\n      if (Math.abs(m21) < 0.9999999) {\n        this._x = Math.atan2(-m23, m22);\n        this._y = Math.atan2(-m31, m11);\n      } else {\n        this._x = 0;\n        this._y = Math.atan2(m13, m33);\n      }\n    } else if (order === 'XZY') {\n      this._z = Math.asin(-clamp(m12, -1, 1));\n\n      if (Math.abs(m12) < 0.9999999) {\n        this._x = Math.atan2(m32, m22);\n        this._y = Math.atan2(m13, m11);\n      } else {\n        this._x = Math.atan2(-m23, m33);\n        this._y = 0;\n      }\n    } else {\n      console.warn('THREE.Euler: .setFromRotationMatrix() given unsupported order: ' + order);\n    }\n\n    this._order = order;\n    if (update !== false) this._onChangeCallback();\n    return this;\n  },\n  setFromQuaternion: function (q, order, update) {\n    _matrix.makeRotationFromQuaternion(q);\n\n    return this.setFromRotationMatrix(_matrix, order, update);\n  },\n  setFromVector3: function (v, order) {\n    return this.set(v.x, v.y, v.z, order || this._order);\n  },\n  reorder: function (newOrder) {\n    // WARNING: this discards revolution information -bhouston\n    _quaternion$1.setFromEuler(this);\n\n    return this.setFromQuaternion(_quaternion$1, newOrder);\n  },\n  equals: function (euler) {\n    return euler._x === this._x && euler._y === this._y && euler._z === this._z && euler._order === this._order;\n  },\n  fromArray: function (array) {\n    this._x = array[0];\n    this._y = array[1];\n    this._z = array[2];\n    if (array[3] !== undefined) this._order = array[3];\n\n    this._onChangeCallback();\n\n    return this;\n  },\n  toArray: function (array, offset) {\n    if (array === undefined) array = [];\n    if (offset === undefined) offset = 0;\n    array[offset] = this._x;\n    array[offset + 1] = this._y;\n    array[offset + 2] = this._z;\n    array[offset + 3] = this._order;\n    return array;\n  },\n  toVector3: function (optionalResult) {\n    if (optionalResult) {\n      return optionalResult.set(this._x, this._y, this._z);\n    } else {\n      return new Vector3(this._x, this._y, this._z);\n    }\n  },\n  _onChange: function (callback) {\n    this._onChangeCallback = callback;\n    return this;\n  },\n  _onChangeCallback: function () {}\n});\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction Layers() {\n  this.mask = 1 | 0;\n}\n\nObject.assign(Layers.prototype, {\n  set: function (channel) {\n    this.mask = 1 << channel | 0;\n  },\n  enable: function (channel) {\n    this.mask |= 1 << channel | 0;\n  },\n  enableAll: function () {\n    this.mask = 0xffffffff | 0;\n  },\n  toggle: function (channel) {\n    this.mask ^= 1 << channel | 0;\n  },\n  disable: function (channel) {\n    this.mask &= ~(1 << channel | 0);\n  },\n  disableAll: function () {\n    this.mask = 0;\n  },\n  test: function (layers) {\n    return (this.mask & layers.mask) !== 0;\n  }\n});\nvar _object3DId = 0;\n\nvar _v1$1 = new Vector3();\n\nvar _q1 = new Quaternion();\n\nvar _m1$1 = new Matrix4();\n\nvar _target = new Vector3();\n\nvar _position = new Vector3();\n\nvar _scale = new Vector3();\n\nvar _quaternion$2 = new Quaternion();\n\nvar _xAxis = new Vector3(1, 0, 0);\n\nvar _yAxis = new Vector3(0, 1, 0);\n\nvar _zAxis = new Vector3(0, 0, 1);\n\nvar _addedEvent = {\n  type: 'added'\n};\nvar _removedEvent = {\n  type: 'removed'\n};\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author elephantatwork / www.elephantatwork.ch\n */\n\nfunction Object3D() {\n  Object.defineProperty(this, 'id', {\n    value: _object3DId++\n  });\n  this.uuid = MathUtils.generateUUID();\n  this.name = '';\n  this.type = 'Object3D';\n  this.parent = null;\n  this.children = [];\n  this.up = Object3D.DefaultUp.clone();\n  var position = new Vector3();\n  var rotation = new Euler();\n  var quaternion = new Quaternion();\n  var scale = new Vector3(1, 1, 1);\n\n  function onRotationChange() {\n    quaternion.setFromEuler(rotation, false);\n  }\n\n  function onQuaternionChange() {\n    rotation.setFromQuaternion(quaternion, undefined, false);\n  }\n\n  rotation._onChange(onRotationChange);\n\n  quaternion._onChange(onQuaternionChange);\n\n  Object.defineProperties(this, {\n    position: {\n      configurable: true,\n      enumerable: true,\n      value: position\n    },\n    rotation: {\n      configurable: true,\n      enumerable: true,\n      value: rotation\n    },\n    quaternion: {\n      configurable: true,\n      enumerable: true,\n      value: quaternion\n    },\n    scale: {\n      configurable: true,\n      enumerable: true,\n      value: scale\n    },\n    modelViewMatrix: {\n      value: new Matrix4()\n    },\n    normalMatrix: {\n      value: new Matrix3()\n    }\n  });\n  this.matrix = new Matrix4();\n  this.matrixWorld = new Matrix4();\n  this.matrixAutoUpdate = Object3D.DefaultMatrixAutoUpdate;\n  this.matrixWorldNeedsUpdate = false;\n  this.layers = new Layers();\n  this.visible = true;\n  this.castShadow = false;\n  this.receiveShadow = false;\n  this.frustumCulled = true;\n  this.renderOrder = 0;\n  this.userData = {};\n}\n\nObject3D.DefaultUp = new Vector3(0, 1, 0);\nObject3D.DefaultMatrixAutoUpdate = true;\nObject3D.prototype = Object.assign(Object.create(EventDispatcher.prototype), {\n  constructor: Object3D,\n  isObject3D: true,\n  onBeforeRender: function () {},\n  onAfterRender: function () {},\n  applyMatrix4: function (matrix) {\n    if (this.matrixAutoUpdate) this.updateMatrix();\n    this.matrix.premultiply(matrix);\n    this.matrix.decompose(this.position, this.quaternion, this.scale);\n  },\n  applyQuaternion: function (q) {\n    this.quaternion.premultiply(q);\n    return this;\n  },\n  setRotationFromAxisAngle: function (axis, angle) {\n    // assumes axis is normalized\n    this.quaternion.setFromAxisAngle(axis, angle);\n  },\n  setRotationFromEuler: function (euler) {\n    this.quaternion.setFromEuler(euler, true);\n  },\n  setRotationFromMatrix: function (m) {\n    // assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n    this.quaternion.setFromRotationMatrix(m);\n  },\n  setRotationFromQuaternion: function (q) {\n    // assumes q is normalized\n    this.quaternion.copy(q);\n  },\n  rotateOnAxis: function (axis, angle) {\n    // rotate object on axis in object space\n    // axis is assumed to be normalized\n    _q1.setFromAxisAngle(axis, angle);\n\n    this.quaternion.multiply(_q1);\n    return this;\n  },\n  rotateOnWorldAxis: function (axis, angle) {\n    // rotate object on axis in world space\n    // axis is assumed to be normalized\n    // method assumes no rotated parent\n    _q1.setFromAxisAngle(axis, angle);\n\n    this.quaternion.premultiply(_q1);\n    return this;\n  },\n  rotateX: function (angle) {\n    return this.rotateOnAxis(_xAxis, angle);\n  },\n  rotateY: function (angle) {\n    return this.rotateOnAxis(_yAxis, angle);\n  },\n  rotateZ: function (angle) {\n    return this.rotateOnAxis(_zAxis, angle);\n  },\n  translateOnAxis: function (axis, distance) {\n    // translate object by distance along axis in object space\n    // axis is assumed to be normalized\n    _v1$1.copy(axis).applyQuaternion(this.quaternion);\n\n    this.position.add(_v1$1.multiplyScalar(distance));\n    return this;\n  },\n  translateX: function (distance) {\n    return this.translateOnAxis(_xAxis, distance);\n  },\n  translateY: function (distance) {\n    return this.translateOnAxis(_yAxis, distance);\n  },\n  translateZ: function (distance) {\n    return this.translateOnAxis(_zAxis, distance);\n  },\n  localToWorld: function (vector) {\n    return vector.applyMatrix4(this.matrixWorld);\n  },\n  worldToLocal: function (vector) {\n    return vector.applyMatrix4(_m1$1.getInverse(this.matrixWorld));\n  },\n  lookAt: function (x, y, z) {\n    // This method does not support objects having non-uniformly-scaled parent(s)\n    if (x.isVector3) {\n      _target.copy(x);\n    } else {\n      _target.set(x, y, z);\n    }\n\n    var parent = this.parent;\n    this.updateWorldMatrix(true, false);\n\n    _position.setFromMatrixPosition(this.matrixWorld);\n\n    if (this.isCamera || false) {\n      _m1$1.lookAt(_position, _target, this.up);\n    } else {\n      _m1$1.lookAt(_target, _position, this.up);\n    }\n\n    this.quaternion.setFromRotationMatrix(_m1$1);\n\n    if (parent) {\n      _m1$1.extractRotation(parent.matrixWorld);\n\n      _q1.setFromRotationMatrix(_m1$1);\n\n      this.quaternion.premultiply(_q1.inverse());\n    }\n  },\n  add: function (object) {\n    if (arguments.length > 1) {\n      for (var i = 0; i < arguments.length; i++) {\n        this.add(arguments[i]);\n      }\n\n      return this;\n    }\n\n    if (object === this) {\n      console.error(\"THREE.Object3D.add: object can't be added as a child of itself.\", object);\n      return this;\n    }\n\n    if (object && object.isObject3D) {\n      if (object.parent !== null) {\n        object.parent.remove(object);\n      }\n\n      object.parent = this;\n      this.children.push(object);\n      object.dispatchEvent(_addedEvent);\n    } else {\n      console.error(\"THREE.Object3D.add: object not an instance of THREE.Object3D.\", object);\n    }\n\n    return this;\n  },\n  remove: function (object) {\n    if (arguments.length > 1) {\n      for (var i = 0; i < arguments.length; i++) {\n        this.remove(arguments[i]);\n      }\n\n      return this;\n    }\n\n    var index = this.children.indexOf(object);\n\n    if (index !== -1) {\n      object.parent = null;\n      this.children.splice(index, 1);\n      object.dispatchEvent(_removedEvent);\n    }\n\n    return this;\n  },\n  attach: function (object) {\n    // adds object as a child of this, while maintaining the object's world transform\n    this.updateWorldMatrix(true, false);\n\n    _m1$1.getInverse(this.matrixWorld);\n\n    if (object.parent !== null) {\n      object.parent.updateWorldMatrix(true, false);\n\n      _m1$1.multiply(object.parent.matrixWorld);\n    }\n\n    object.applyMatrix4(_m1$1);\n    object.updateWorldMatrix(false, false);\n    this.add(object);\n    return this;\n  },\n  getObjectById: function (id) {\n    return this.getObjectByProperty('id', id);\n  },\n  getObjectByName: function (name) {\n    return this.getObjectByProperty('name', name);\n  },\n  getObjectByProperty: function (name, value) {\n    if (this[name] === value) return this;\n\n    for (var i = 0, l = this.children.length; i < l; i++) {\n      var child = this.children[i];\n      var object = child.getObjectByProperty(name, value);\n\n      if (object !== undefined) {\n        return object;\n      }\n    }\n\n    return undefined;\n  },\n  getWorldPosition: function (target) {\n    if (target === undefined) {\n      console.warn('THREE.Object3D: .getWorldPosition() target is now required');\n      target = new Vector3();\n    }\n\n    this.updateMatrixWorld(true);\n    return target.setFromMatrixPosition(this.matrixWorld);\n  },\n  getWorldQuaternion: function (target) {\n    if (target === undefined) {\n      console.warn('THREE.Object3D: .getWorldQuaternion() target is now required');\n      target = new Quaternion();\n    }\n\n    this.updateMatrixWorld(true);\n    this.matrixWorld.decompose(_position, target, _scale);\n    return target;\n  },\n  getWorldScale: function (target) {\n    if (target === undefined) {\n      console.warn('THREE.Object3D: .getWorldScale() target is now required');\n      target = new Vector3();\n    }\n\n    this.updateMatrixWorld(true);\n    this.matrixWorld.decompose(_position, _quaternion$2, target);\n    return target;\n  },\n  getWorldDirection: function (target) {\n    if (target === undefined) {\n      console.warn('THREE.Object3D: .getWorldDirection() target is now required');\n      target = new Vector3();\n    }\n\n    this.updateMatrixWorld(true);\n    var e = this.matrixWorld.elements;\n    return target.set(e[8], e[9], e[10]).normalize();\n  },\n  raycast: function () {},\n  traverse: function (callback) {\n    callback(this);\n    var children = this.children;\n\n    for (var i = 0, l = children.length; i < l; i++) {\n      children[i].traverse(callback);\n    }\n  },\n  traverseVisible: function (callback) {\n    if (this.visible === false) return;\n    callback(this);\n    var children = this.children;\n\n    for (var i = 0, l = children.length; i < l; i++) {\n      children[i].traverseVisible(callback);\n    }\n  },\n  traverseAncestors: function (callback) {\n    var parent = this.parent;\n\n    if (parent !== null) {\n      callback(parent);\n      parent.traverseAncestors(callback);\n    }\n  },\n  updateMatrix: function () {\n    this.matrix.compose(this.position, this.quaternion, this.scale);\n    this.matrixWorldNeedsUpdate = true;\n  },\n  updateMatrixWorld: function (force) {\n    if (this.matrixAutoUpdate) this.updateMatrix();\n\n    if (this.matrixWorldNeedsUpdate || force) {\n      if (this.parent === null) {\n        this.matrixWorld.copy(this.matrix);\n      } else {\n        this.matrixWorld.multiplyMatrices(this.parent.matrixWorld, this.matrix);\n      }\n\n      this.matrixWorldNeedsUpdate = false;\n      force = true;\n    } // update children\n\n\n    var children = this.children;\n\n    for (var i = 0, l = children.length; i < l; i++) {\n      children[i].updateMatrixWorld(force);\n    }\n  },\n  updateWorldMatrix: function (updateParents, updateChildren) {\n    var parent = this.parent;\n\n    if (updateParents === true && parent !== null) {\n      parent.updateWorldMatrix(true, false);\n    }\n\n    if (this.matrixAutoUpdate) this.updateMatrix();\n\n    if (this.parent === null) {\n      this.matrixWorld.copy(this.matrix);\n    } else {\n      this.matrixWorld.multiplyMatrices(this.parent.matrixWorld, this.matrix);\n    } // update children\n\n\n    if (updateChildren === true) {\n      var children = this.children;\n\n      for (var i = 0, l = children.length; i < l; i++) {\n        children[i].updateWorldMatrix(false, true);\n      }\n    }\n  },\n  toJSON: function (meta) {\n    // meta is a string when called from JSON.stringify\n    var isRootObject = meta === undefined || typeof meta === 'string';\n    var output = {}; // meta is a hash used to collect geometries, materials.\n    // not providing it implies that this is the root object\n    // being serialized.\n\n    if (isRootObject) {\n      // initialize meta obj\n      meta = {\n        geometries: {},\n        materials: {},\n        textures: {},\n        images: {},\n        shapes: {}\n      };\n      output.metadata = {\n        version: 4.5,\n        type: 'Object',\n        generator: 'Object3D.toJSON'\n      };\n    } // standard Object3D serialization\n\n\n    var object = {};\n    object.uuid = this.uuid;\n    object.type = this.type;\n    if (this.name !== '') object.name = this.name;\n    if (this.castShadow === true) object.castShadow = true;\n    if (this.receiveShadow === true) object.receiveShadow = true;\n    if (this.visible === false) object.visible = false;\n    if (this.frustumCulled === false) object.frustumCulled = false;\n    if (this.renderOrder !== 0) object.renderOrder = this.renderOrder;\n    if (JSON.stringify(this.userData) !== '{}') object.userData = this.userData;\n    object.layers = this.layers.mask;\n    object.matrix = this.matrix.toArray();\n    if (this.matrixAutoUpdate === false) object.matrixAutoUpdate = false; //\n\n    function serialize(library, element) {\n      if (library[element.uuid] === undefined) {\n        library[element.uuid] = element.toJSON(meta);\n      }\n\n      return element.uuid;\n    }\n\n    if (this.isMesh || false || false) {\n      object.geometry = serialize(meta.geometries, this.geometry);\n      var parameters = this.geometry.parameters;\n\n      if (parameters !== undefined && parameters.shapes !== undefined) {\n        var shapes = parameters.shapes;\n\n        if (Array.isArray(shapes)) {\n          for (var i = 0, l = shapes.length; i < l; i++) {\n            var shape = shapes[i];\n            serialize(meta.shapes, shape);\n          }\n        } else {\n          serialize(meta.shapes, shapes);\n        }\n      }\n    }\n\n    if (this.material !== undefined) {\n      if (Array.isArray(this.material)) {\n        var uuids = [];\n\n        for (var i = 0, l = this.material.length; i < l; i++) {\n          uuids.push(serialize(meta.materials, this.material[i]));\n        }\n\n        object.material = uuids;\n      } else {\n        object.material = serialize(meta.materials, this.material);\n      }\n    } //\n\n\n    if (this.children.length > 0) {\n      object.children = [];\n\n      for (var i = 0; i < this.children.length; i++) {\n        object.children.push(this.children[i].toJSON(meta).object);\n      }\n    }\n\n    if (isRootObject) {\n      var geometries = extractFromCache(meta.geometries);\n      var materials = extractFromCache(meta.materials);\n      var textures = extractFromCache(meta.textures);\n      var images = extractFromCache(meta.images);\n      var shapes = extractFromCache(meta.shapes);\n      if (geometries.length > 0) output.geometries = geometries;\n      if (materials.length > 0) output.materials = materials;\n      if (textures.length > 0) output.textures = textures;\n      if (images.length > 0) output.images = images;\n      if (shapes.length > 0) output.shapes = shapes;\n    }\n\n    output.object = object;\n    return output; // extract data from the cache hash\n    // remove metadata on each item\n    // and return as array\n\n    function extractFromCache(cache) {\n      var values = [];\n\n      for (var key in cache) {\n        var data = cache[key];\n        delete data.metadata;\n        values.push(data);\n      }\n\n      return values;\n    }\n  },\n  clone: function (recursive) {\n    return new this.constructor().copy(this, recursive);\n  },\n  copy: function (source, recursive) {\n    if (recursive === undefined) recursive = true;\n    this.name = source.name;\n    this.up.copy(source.up);\n    this.position.copy(source.position);\n    this.quaternion.copy(source.quaternion);\n    this.scale.copy(source.scale);\n    this.matrix.copy(source.matrix);\n    this.matrixWorld.copy(source.matrixWorld);\n    this.matrixAutoUpdate = source.matrixAutoUpdate;\n    this.matrixWorldNeedsUpdate = source.matrixWorldNeedsUpdate;\n    this.layers.mask = source.layers.mask;\n    this.visible = source.visible;\n    this.castShadow = source.castShadow;\n    this.receiveShadow = source.receiveShadow;\n    this.frustumCulled = source.frustumCulled;\n    this.renderOrder = source.renderOrder;\n    this.userData = JSON.parse(JSON.stringify(source.userData));\n\n    if (recursive === true) {\n      for (var i = 0; i < source.children.length; i++) {\n        var child = source.children[i];\n        this.add(child.clone());\n      }\n    }\n\n    return this;\n  }\n});\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction Scene() {\n  Object3D.call(this);\n  this.type = 'Scene';\n  this.background = null;\n  this.environment = null;\n  this.fog = null;\n  this.overrideMaterial = null;\n  this.autoUpdate = true; // checked by the renderer\n\n  if (typeof __THREE_DEVTOOLS__ !== 'undefined') {\n    __THREE_DEVTOOLS__.dispatchEvent(new CustomEvent('observe', {\n      detail: this\n    })); // eslint-disable-line no-undef\n\n  }\n}\n\nScene.prototype = Object.assign(Object.create(Object3D.prototype), {\n  constructor: Scene,\n  isScene: true,\n  copy: function (source, recursive) {\n    Object3D.prototype.copy.call(this, source, recursive);\n    if (source.background !== null) this.background = source.background.clone();\n    if (source.environment !== null) this.environment = source.environment.clone();\n    if (source.fog !== null) this.fog = source.fog.clone();\n    if (source.overrideMaterial !== null) this.overrideMaterial = source.overrideMaterial.clone();\n    this.autoUpdate = source.autoUpdate;\n    this.matrixAutoUpdate = source.matrixAutoUpdate;\n    return this;\n  },\n  toJSON: function (meta) {\n    var data = Object3D.prototype.toJSON.call(this, meta);\n    if (this.background !== null) data.object.background = this.background.toJSON(meta);\n    if (this.environment !== null) data.object.environment = this.environment.toJSON(meta);\n    if (this.fog !== null) data.object.fog = this.fog.toJSON();\n    return data;\n  },\n  dispose: function () {\n    this.dispatchEvent({\n      type: 'dispose'\n    });\n  }\n});\nvar _points = [new Vector3(), new Vector3(), new Vector3(), new Vector3(), new Vector3(), new Vector3(), new Vector3(), new Vector3()];\n\nvar _vector$1 = new Vector3();\n\nvar _box = new Box3(); // triangle centered vertices\n\n\nvar _v0 = new Vector3();\n\nvar _v1$2 = new Vector3();\n\nvar _v2 = new Vector3(); // triangle edge vectors\n\n\nvar _f0 = new Vector3();\n\nvar _f1 = new Vector3();\n\nvar _f2 = new Vector3();\n\nvar _center = new Vector3();\n\nvar _extents = new Vector3();\n\nvar _triangleNormal = new Vector3();\n\nvar _testAxis = new Vector3();\n/**\n * @author bhouston / http://clara.io\n * @author WestLangley / http://github.com/WestLangley\n */\n\n\nfunction Box3(min, max) {\n  this.min = min !== undefined ? min : new Vector3(+Infinity, +Infinity, +Infinity);\n  this.max = max !== undefined ? max : new Vector3(-Infinity, -Infinity, -Infinity);\n}\n\nObject.assign(Box3.prototype, {\n  isBox3: true,\n  set: function (min, max) {\n    this.min.copy(min);\n    this.max.copy(max);\n    return this;\n  },\n  setFromArray: function (array) {\n    var minX = +Infinity;\n    var minY = +Infinity;\n    var minZ = +Infinity;\n    var maxX = -Infinity;\n    var maxY = -Infinity;\n    var maxZ = -Infinity;\n\n    for (var i = 0, l = array.length; i < l; i += 3) {\n      var x = array[i];\n      var y = array[i + 1];\n      var z = array[i + 2];\n      if (x < minX) minX = x;\n      if (y < minY) minY = y;\n      if (z < minZ) minZ = z;\n      if (x > maxX) maxX = x;\n      if (y > maxY) maxY = y;\n      if (z > maxZ) maxZ = z;\n    }\n\n    this.min.set(minX, minY, minZ);\n    this.max.set(maxX, maxY, maxZ);\n    return this;\n  },\n  setFromBufferAttribute: function (attribute) {\n    var minX = +Infinity;\n    var minY = +Infinity;\n    var minZ = +Infinity;\n    var maxX = -Infinity;\n    var maxY = -Infinity;\n    var maxZ = -Infinity;\n\n    for (var i = 0, l = attribute.count; i < l; i++) {\n      var x = attribute.getX(i);\n      var y = attribute.getY(i);\n      var z = attribute.getZ(i);\n      if (x < minX) minX = x;\n      if (y < minY) minY = y;\n      if (z < minZ) minZ = z;\n      if (x > maxX) maxX = x;\n      if (y > maxY) maxY = y;\n      if (z > maxZ) maxZ = z;\n    }\n\n    this.min.set(minX, minY, minZ);\n    this.max.set(maxX, maxY, maxZ);\n    return this;\n  },\n  setFromPoints: function (points) {\n    this.makeEmpty();\n\n    for (var i = 0, il = points.length; i < il; i++) {\n      this.expandByPoint(points[i]);\n    }\n\n    return this;\n  },\n  setFromCenterAndSize: function (center, size) {\n    var halfSize = _vector$1.copy(size).multiplyScalar(0.5);\n\n    this.min.copy(center).sub(halfSize);\n    this.max.copy(center).add(halfSize);\n    return this;\n  },\n  setFromObject: function (object) {\n    this.makeEmpty();\n    return this.expandByObject(object);\n  },\n  clone: function () {\n    return new this.constructor().copy(this);\n  },\n  copy: function (box) {\n    this.min.copy(box.min);\n    this.max.copy(box.max);\n    return this;\n  },\n  makeEmpty: function () {\n    this.min.x = this.min.y = this.min.z = +Infinity;\n    this.max.x = this.max.y = this.max.z = -Infinity;\n    return this;\n  },\n  isEmpty: function () {\n    // this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\n    return this.max.x < this.min.x || this.max.y < this.min.y || this.max.z < this.min.z;\n  },\n  getCenter: function (target) {\n    if (target === undefined) {\n      console.warn('THREE.Box3: .getCenter() target is now required');\n      target = new Vector3();\n    }\n\n    return this.isEmpty() ? target.set(0, 0, 0) : target.addVectors(this.min, this.max).multiplyScalar(0.5);\n  },\n  getSize: function (target) {\n    if (target === undefined) {\n      console.warn('THREE.Box3: .getSize() target is now required');\n      target = new Vector3();\n    }\n\n    return this.isEmpty() ? target.set(0, 0, 0) : target.subVectors(this.max, this.min);\n  },\n  expandByPoint: function (point) {\n    this.min.min(point);\n    this.max.max(point);\n    return this;\n  },\n  expandByVector: function (vector) {\n    this.min.sub(vector);\n    this.max.add(vector);\n    return this;\n  },\n  expandByScalar: function (scalar) {\n    this.min.addScalar(-scalar);\n    this.max.addScalar(scalar);\n    return this;\n  },\n  expandByObject: function (object) {\n    // Computes the world-axis-aligned bounding box of an object (including its children),\n    // accounting for both the object's, and children's, world transforms\n    object.updateWorldMatrix(false, false);\n    var geometry = object.geometry;\n\n    if (geometry !== undefined) {\n      if (geometry.boundingBox === null) {\n        geometry.computeBoundingBox();\n      }\n\n      _box.copy(geometry.boundingBox);\n\n      _box.applyMatrix4(object.matrixWorld);\n\n      this.union(_box);\n    }\n\n    var children = object.children;\n\n    for (var i = 0, l = children.length; i < l; i++) {\n      this.expandByObject(children[i]);\n    }\n\n    return this;\n  },\n  containsPoint: function (point) {\n    return point.x < this.min.x || point.x > this.max.x || point.y < this.min.y || point.y > this.max.y || point.z < this.min.z || point.z > this.max.z ? false : true;\n  },\n  containsBox: function (box) {\n    return this.min.x <= box.min.x && box.max.x <= this.max.x && this.min.y <= box.min.y && box.max.y <= this.max.y && this.min.z <= box.min.z && box.max.z <= this.max.z;\n  },\n  getParameter: function (point, target) {\n    // This can potentially have a divide by zero if the box\n    // has a size dimension of 0.\n    if (target === undefined) {\n      console.warn('THREE.Box3: .getParameter() target is now required');\n      target = new Vector3();\n    }\n\n    return target.set((point.x - this.min.x) / (this.max.x - this.min.x), (point.y - this.min.y) / (this.max.y - this.min.y), (point.z - this.min.z) / (this.max.z - this.min.z));\n  },\n  intersectsBox: function (box) {\n    // using 6 splitting planes to rule out intersections.\n    return box.max.x < this.min.x || box.min.x > this.max.x || box.max.y < this.min.y || box.min.y > this.max.y || box.max.z < this.min.z || box.min.z > this.max.z ? false : true;\n  },\n  intersectsSphere: function (sphere) {\n    // Find the point on the AABB closest to the sphere center.\n    this.clampPoint(sphere.center, _vector$1); // If that point is inside the sphere, the AABB and sphere intersect.\n\n    return _vector$1.distanceToSquared(sphere.center) <= sphere.radius * sphere.radius;\n  },\n  intersectsPlane: function (plane) {\n    // We compute the minimum and maximum dot product values. If those values\n    // are on the same side (back or front) of the plane, then there is no intersection.\n    var min, max;\n\n    if (plane.normal.x > 0) {\n      min = plane.normal.x * this.min.x;\n      max = plane.normal.x * this.max.x;\n    } else {\n      min = plane.normal.x * this.max.x;\n      max = plane.normal.x * this.min.x;\n    }\n\n    if (plane.normal.y > 0) {\n      min += plane.normal.y * this.min.y;\n      max += plane.normal.y * this.max.y;\n    } else {\n      min += plane.normal.y * this.max.y;\n      max += plane.normal.y * this.min.y;\n    }\n\n    if (plane.normal.z > 0) {\n      min += plane.normal.z * this.min.z;\n      max += plane.normal.z * this.max.z;\n    } else {\n      min += plane.normal.z * this.max.z;\n      max += plane.normal.z * this.min.z;\n    }\n\n    return min <= -plane.constant && max >= -plane.constant;\n  },\n  intersectsTriangle: function (triangle) {\n    if (this.isEmpty()) {\n      return false;\n    } // compute box center and extents\n\n\n    this.getCenter(_center);\n\n    _extents.subVectors(this.max, _center); // translate triangle to aabb origin\n\n\n    _v0.subVectors(triangle.a, _center);\n\n    _v1$2.subVectors(triangle.b, _center);\n\n    _v2.subVectors(triangle.c, _center); // compute edge vectors for triangle\n\n\n    _f0.subVectors(_v1$2, _v0);\n\n    _f1.subVectors(_v2, _v1$2);\n\n    _f2.subVectors(_v0, _v2); // test against axes that are given by cross product combinations of the edges of the triangle and the edges of the aabb\n    // make an axis testing of each of the 3 sides of the aabb against each of the 3 sides of the triangle = 9 axis of separation\n    // axis_ij = u_i x f_j (u0, u1, u2 = face normals of aabb = x,y,z axes vectors since aabb is axis aligned)\n\n\n    var axes = [0, -_f0.z, _f0.y, 0, -_f1.z, _f1.y, 0, -_f2.z, _f2.y, _f0.z, 0, -_f0.x, _f1.z, 0, -_f1.x, _f2.z, 0, -_f2.x, -_f0.y, _f0.x, 0, -_f1.y, _f1.x, 0, -_f2.y, _f2.x, 0];\n\n    if (!satForAxes(axes, _v0, _v1$2, _v2, _extents)) {\n      return false;\n    } // test 3 face normals from the aabb\n\n\n    axes = [1, 0, 0, 0, 1, 0, 0, 0, 1];\n\n    if (!satForAxes(axes, _v0, _v1$2, _v2, _extents)) {\n      return false;\n    } // finally testing the face normal of the triangle\n    // use already existing triangle edge vectors here\n\n\n    _triangleNormal.crossVectors(_f0, _f1);\n\n    axes = [_triangleNormal.x, _triangleNormal.y, _triangleNormal.z];\n    return satForAxes(axes, _v0, _v1$2, _v2, _extents);\n  },\n  clampPoint: function (point, target) {\n    if (target === undefined) {\n      console.warn('THREE.Box3: .clampPoint() target is now required');\n      target = new Vector3();\n    }\n\n    return target.copy(point).clamp(this.min, this.max);\n  },\n  distanceToPoint: function (point) {\n    var clampedPoint = _vector$1.copy(point).clamp(this.min, this.max);\n\n    return clampedPoint.sub(point).length();\n  },\n  getBoundingSphere: function (target) {\n    if (target === undefined) {\n      console.error('THREE.Box3: .getBoundingSphere() target is now required'); //target = new Sphere(); // removed to avoid cyclic dependency\n    }\n\n    this.getCenter(target.center);\n    target.radius = this.getSize(_vector$1).length() * 0.5;\n    return target;\n  },\n  intersect: function (box) {\n    this.min.max(box.min);\n    this.max.min(box.max); // ensure that if there is no overlap, the result is fully empty, not slightly empty with non-inf/+inf values that will cause subsequence intersects to erroneously return valid values.\n\n    if (this.isEmpty()) this.makeEmpty();\n    return this;\n  },\n  union: function (box) {\n    this.min.min(box.min);\n    this.max.max(box.max);\n    return this;\n  },\n  applyMatrix4: function (matrix) {\n    // transform of empty box is an empty box.\n    if (this.isEmpty()) return this; // NOTE: I am using a binary pattern to specify all 2^3 combinations below\n\n    _points[0].set(this.min.x, this.min.y, this.min.z).applyMatrix4(matrix); // 000\n\n\n    _points[1].set(this.min.x, this.min.y, this.max.z).applyMatrix4(matrix); // 001\n\n\n    _points[2].set(this.min.x, this.max.y, this.min.z).applyMatrix4(matrix); // 010\n\n\n    _points[3].set(this.min.x, this.max.y, this.max.z).applyMatrix4(matrix); // 011\n\n\n    _points[4].set(this.max.x, this.min.y, this.min.z).applyMatrix4(matrix); // 100\n\n\n    _points[5].set(this.max.x, this.min.y, this.max.z).applyMatrix4(matrix); // 101\n\n\n    _points[6].set(this.max.x, this.max.y, this.min.z).applyMatrix4(matrix); // 110\n\n\n    _points[7].set(this.max.x, this.max.y, this.max.z).applyMatrix4(matrix); // 111\n\n\n    this.setFromPoints(_points);\n    return this;\n  },\n  translate: function (offset) {\n    this.min.add(offset);\n    this.max.add(offset);\n    return this;\n  },\n  equals: function (box) {\n    return box.min.equals(this.min) && box.max.equals(this.max);\n  }\n});\n\nfunction satForAxes(axes, v0, v1, v2, extents) {\n  var i, j;\n\n  for (i = 0, j = axes.length - 3; i <= j; i += 3) {\n    _testAxis.fromArray(axes, i); // project the aabb onto the seperating axis\n\n\n    var r = extents.x * Math.abs(_testAxis.x) + extents.y * Math.abs(_testAxis.y) + extents.z * Math.abs(_testAxis.z); // project all 3 vertices of the triangle onto the seperating axis\n\n    var p0 = v0.dot(_testAxis);\n    var p1 = v1.dot(_testAxis);\n    var p2 = v2.dot(_testAxis); // actual test, basically see if either of the most extreme of the triangle points intersects r\n\n    if (Math.max(-Math.max(p0, p1, p2), Math.min(p0, p1, p2)) > r) {\n      // points of the projected triangle are outside the projected half-length of the aabb\n      // the axis is seperating and we can exit\n      return false;\n    }\n  }\n\n  return true;\n}\n\nvar _box$1 = new Box3();\n/**\n * @author bhouston / http://clara.io\n * @author mrdoob / http://mrdoob.com/\n */\n\n\nfunction Sphere(center, radius) {\n  this.center = center !== undefined ? center : new Vector3();\n  this.radius = radius !== undefined ? radius : 0;\n}\n\nObject.assign(Sphere.prototype, {\n  set: function (center, radius) {\n    this.center.copy(center);\n    this.radius = radius;\n    return this;\n  },\n  setFromPoints: function (points, optionalCenter) {\n    var center = this.center;\n\n    if (optionalCenter !== undefined) {\n      center.copy(optionalCenter);\n    } else {\n      _box$1.setFromPoints(points).getCenter(center);\n    }\n\n    var maxRadiusSq = 0;\n\n    for (var i = 0, il = points.length; i < il; i++) {\n      maxRadiusSq = Math.max(maxRadiusSq, center.distanceToSquared(points[i]));\n    }\n\n    this.radius = Math.sqrt(maxRadiusSq);\n    return this;\n  },\n  clone: function () {\n    return new this.constructor().copy(this);\n  },\n  copy: function (sphere) {\n    this.center.copy(sphere.center);\n    this.radius = sphere.radius;\n    return this;\n  },\n  empty: function () {\n    return this.radius <= 0;\n  },\n  containsPoint: function (point) {\n    return point.distanceToSquared(this.center) <= this.radius * this.radius;\n  },\n  distanceToPoint: function (point) {\n    return point.distanceTo(this.center) - this.radius;\n  },\n  intersectsSphere: function (sphere) {\n    var radiusSum = this.radius + sphere.radius;\n    return sphere.center.distanceToSquared(this.center) <= radiusSum * radiusSum;\n  },\n  intersectsBox: function (box) {\n    return box.intersectsSphere(this);\n  },\n  intersectsPlane: function (plane) {\n    return Math.abs(plane.distanceToPoint(this.center)) <= this.radius;\n  },\n  clampPoint: function (point, target) {\n    var deltaLengthSq = this.center.distanceToSquared(point);\n\n    if (target === undefined) {\n      console.warn('THREE.Sphere: .clampPoint() target is now required');\n      target = new Vector3();\n    }\n\n    target.copy(point);\n\n    if (deltaLengthSq > this.radius * this.radius) {\n      target.sub(this.center).normalize();\n      target.multiplyScalar(this.radius).add(this.center);\n    }\n\n    return target;\n  },\n  getBoundingBox: function (target) {\n    if (target === undefined) {\n      console.warn('THREE.Sphere: .getBoundingBox() target is now required');\n      target = new Box3();\n    }\n\n    target.set(this.center, this.center);\n    target.expandByScalar(this.radius);\n    return target;\n  },\n  applyMatrix4: function (matrix) {\n    this.center.applyMatrix4(matrix);\n    this.radius = this.radius * matrix.getMaxScaleOnAxis();\n    return this;\n  },\n  translate: function (offset) {\n    this.center.add(offset);\n    return this;\n  },\n  equals: function (sphere) {\n    return sphere.center.equals(this.center) && sphere.radius === this.radius;\n  }\n});\n\nfunction Ray() {}\n/**\n * @author bhouston / http://clara.io\n */\n\n\nvar _vector1 = new Vector3();\n\nvar _vector2 = new Vector3();\n\nvar _normalMatrix = new Matrix3();\n\nfunction Plane(normal, constant) {\n  // normal is assumed to be normalized\n  this.normal = normal !== undefined ? normal : new Vector3(1, 0, 0);\n  this.constant = constant !== undefined ? constant : 0;\n}\n\nObject.assign(Plane.prototype, {\n  isPlane: true,\n  set: function (normal, constant) {\n    this.normal.copy(normal);\n    this.constant = constant;\n    return this;\n  },\n  setComponents: function (x, y, z, w) {\n    this.normal.set(x, y, z);\n    this.constant = w;\n    return this;\n  },\n  setFromNormalAndCoplanarPoint: function (normal, point) {\n    this.normal.copy(normal);\n    this.constant = -point.dot(this.normal);\n    return this;\n  },\n  setFromCoplanarPoints: function (a, b, c) {\n    var normal = _vector1.subVectors(c, b).cross(_vector2.subVectors(a, b)).normalize(); // Q: should an error be thrown if normal is zero (e.g. degenerate plane)?\n\n\n    this.setFromNormalAndCoplanarPoint(normal, a);\n    return this;\n  },\n  clone: function () {\n    return new this.constructor().copy(this);\n  },\n  copy: function (plane) {\n    this.normal.copy(plane.normal);\n    this.constant = plane.constant;\n    return this;\n  },\n  normalize: function () {\n    // Note: will lead to a divide by zero if the plane is invalid.\n    var inverseNormalLength = 1.0 / this.normal.length();\n    this.normal.multiplyScalar(inverseNormalLength);\n    this.constant *= inverseNormalLength;\n    return this;\n  },\n  negate: function () {\n    this.constant *= -1;\n    this.normal.negate();\n    return this;\n  },\n  distanceToPoint: function (point) {\n    return this.normal.dot(point) + this.constant;\n  },\n  distanceToSphere: function (sphere) {\n    return this.distanceToPoint(sphere.center) - sphere.radius;\n  },\n  projectPoint: function (point, target) {\n    if (target === undefined) {\n      console.warn('THREE.Plane: .projectPoint() target is now required');\n      target = new Vector3();\n    }\n\n    return target.copy(this.normal).multiplyScalar(-this.distanceToPoint(point)).add(point);\n  },\n  intersectLine: function (line, target) {\n    if (target === undefined) {\n      console.warn('THREE.Plane: .intersectLine() target is now required');\n      target = new Vector3();\n    }\n\n    var direction = line.delta(_vector1);\n    var denominator = this.normal.dot(direction);\n\n    if (denominator === 0) {\n      // line is coplanar, return origin\n      if (this.distanceToPoint(line.start) === 0) {\n        return target.copy(line.start);\n      } // Unsure if this is the correct method to handle this case.\n\n\n      return undefined;\n    }\n\n    var t = -(line.start.dot(this.normal) + this.constant) / denominator;\n\n    if (t < 0 || t > 1) {\n      return undefined;\n    }\n\n    return target.copy(direction).multiplyScalar(t).add(line.start);\n  },\n  intersectsLine: function (line) {\n    // Note: this tests if a line intersects the plane, not whether it (or its end-points) are coplanar with it.\n    var startSign = this.distanceToPoint(line.start);\n    var endSign = this.distanceToPoint(line.end);\n    return startSign < 0 && endSign > 0 || endSign < 0 && startSign > 0;\n  },\n  intersectsBox: function (box) {\n    return box.intersectsPlane(this);\n  },\n  intersectsSphere: function (sphere) {\n    return sphere.intersectsPlane(this);\n  },\n  coplanarPoint: function (target) {\n    if (target === undefined) {\n      console.warn('THREE.Plane: .coplanarPoint() target is now required');\n      target = new Vector3();\n    }\n\n    return target.copy(this.normal).multiplyScalar(-this.constant);\n  },\n  applyMatrix4: function (matrix, optionalNormalMatrix) {\n    var normalMatrix = optionalNormalMatrix || _normalMatrix.getNormalMatrix(matrix);\n\n    var referencePoint = this.coplanarPoint(_vector1).applyMatrix4(matrix);\n    var normal = this.normal.applyMatrix3(normalMatrix).normalize();\n    this.constant = -referencePoint.dot(normal);\n    return this;\n  },\n  translate: function (offset) {\n    this.constant -= offset.dot(this.normal);\n    return this;\n  },\n  equals: function (plane) {\n    return plane.normal.equals(this.normal) && plane.constant === this.constant;\n  }\n});\n/**\n * @author bhouston / http://clara.io\n * @author mrdoob / http://mrdoob.com/\n */\n\nvar _v0$1 = new Vector3();\n\nvar _v1$3 = new Vector3();\n\nvar _v2$1 = new Vector3();\n\nvar _v3 = new Vector3();\n\nvar _vab = new Vector3();\n\nvar _vac = new Vector3();\n\nvar _vbc = new Vector3();\n\nvar _vap = new Vector3();\n\nvar _vbp = new Vector3();\n\nvar _vcp = new Vector3();\n\nfunction Triangle(a, b, c) {\n  this.a = a !== undefined ? a : new Vector3();\n  this.b = b !== undefined ? b : new Vector3();\n  this.c = c !== undefined ? c : new Vector3();\n}\n\nObject.assign(Triangle, {\n  getNormal: function (a, b, c, target) {\n    if (target === undefined) {\n      console.warn('THREE.Triangle: .getNormal() target is now required');\n      target = new Vector3();\n    }\n\n    target.subVectors(c, b);\n\n    _v0$1.subVectors(a, b);\n\n    target.cross(_v0$1);\n    var targetLengthSq = target.lengthSq();\n\n    if (targetLengthSq > 0) {\n      return target.multiplyScalar(1 / Math.sqrt(targetLengthSq));\n    }\n\n    return target.set(0, 0, 0);\n  },\n  // static/instance method to calculate barycentric coordinates\n  // based on: http://www.blackpawn.com/texts/pointinpoly/default.html\n  getBarycoord: function (point, a, b, c, target) {\n    _v0$1.subVectors(c, a);\n\n    _v1$3.subVectors(b, a);\n\n    _v2$1.subVectors(point, a);\n\n    var dot00 = _v0$1.dot(_v0$1);\n\n    var dot01 = _v0$1.dot(_v1$3);\n\n    var dot02 = _v0$1.dot(_v2$1);\n\n    var dot11 = _v1$3.dot(_v1$3);\n\n    var dot12 = _v1$3.dot(_v2$1);\n\n    var denom = dot00 * dot11 - dot01 * dot01;\n\n    if (target === undefined) {\n      console.warn('THREE.Triangle: .getBarycoord() target is now required');\n      target = new Vector3();\n    } // collinear or singular triangle\n\n\n    if (denom === 0) {\n      // arbitrary location outside of triangle?\n      // not sure if this is the best idea, maybe should be returning undefined\n      return target.set(-2, -1, -1);\n    }\n\n    var invDenom = 1 / denom;\n    var u = (dot11 * dot02 - dot01 * dot12) * invDenom;\n    var v = (dot00 * dot12 - dot01 * dot02) * invDenom; // barycentric coordinates must always sum to 1\n\n    return target.set(1 - u - v, v, u);\n  },\n  containsPoint: function (point, a, b, c) {\n    Triangle.getBarycoord(point, a, b, c, _v3);\n    return _v3.x >= 0 && _v3.y >= 0 && _v3.x + _v3.y <= 1;\n  },\n  getUV: function (point, p1, p2, p3, uv1, uv2, uv3, target) {\n    this.getBarycoord(point, p1, p2, p3, _v3);\n    target.set(0, 0);\n    target.addScaledVector(uv1, _v3.x);\n    target.addScaledVector(uv2, _v3.y);\n    target.addScaledVector(uv3, _v3.z);\n    return target;\n  },\n  isFrontFacing: function (a, b, c, direction) {\n    _v0$1.subVectors(c, b);\n\n    _v1$3.subVectors(a, b); // strictly front facing\n\n\n    return _v0$1.cross(_v1$3).dot(direction) < 0 ? true : false;\n  }\n});\nObject.assign(Triangle.prototype, {\n  set: function (a, b, c) {\n    this.a.copy(a);\n    this.b.copy(b);\n    this.c.copy(c);\n    return this;\n  },\n  setFromPointsAndIndices: function (points, i0, i1, i2) {\n    this.a.copy(points[i0]);\n    this.b.copy(points[i1]);\n    this.c.copy(points[i2]);\n    return this;\n  },\n  clone: function () {\n    return new this.constructor().copy(this);\n  },\n  copy: function (triangle) {\n    this.a.copy(triangle.a);\n    this.b.copy(triangle.b);\n    this.c.copy(triangle.c);\n    return this;\n  },\n  getArea: function () {\n    _v0$1.subVectors(this.c, this.b);\n\n    _v1$3.subVectors(this.a, this.b);\n\n    return _v0$1.cross(_v1$3).length() * 0.5;\n  },\n  getMidpoint: function (target) {\n    if (target === undefined) {\n      console.warn('THREE.Triangle: .getMidpoint() target is now required');\n      target = new Vector3();\n    }\n\n    return target.addVectors(this.a, this.b).add(this.c).multiplyScalar(1 / 3);\n  },\n  getNormal: function (target) {\n    return Triangle.getNormal(this.a, this.b, this.c, target);\n  },\n  getPlane: function (target) {\n    if (target === undefined) {\n      console.warn('THREE.Triangle: .getPlane() target is now required');\n      target = new Plane();\n    }\n\n    return target.setFromCoplanarPoints(this.a, this.b, this.c);\n  },\n  getBarycoord: function (point, target) {\n    return Triangle.getBarycoord(point, this.a, this.b, this.c, target);\n  },\n  getUV: function (point, uv1, uv2, uv3, target) {\n    return Triangle.getUV(point, this.a, this.b, this.c, uv1, uv2, uv3, target);\n  },\n  containsPoint: function (point) {\n    return Triangle.containsPoint(point, this.a, this.b, this.c);\n  },\n  isFrontFacing: function (direction) {\n    return Triangle.isFrontFacing(this.a, this.b, this.c, direction);\n  },\n  intersectsBox: function (box) {\n    return box.intersectsTriangle(this);\n  },\n  closestPointToPoint: function (p, target) {\n    if (target === undefined) {\n      console.warn('THREE.Triangle: .closestPointToPoint() target is now required');\n      target = new Vector3();\n    }\n\n    var a = this.a,\n        b = this.b,\n        c = this.c;\n    var v, w; // algorithm thanks to Real-Time Collision Detection by Christer Ericson,\n    // published by Morgan Kaufmann Publishers, (c) 2005 Elsevier Inc.,\n    // under the accompanying license; see chapter 5.1.5 for detailed explanation.\n    // basically, we're distinguishing which of the voronoi regions of the triangle\n    // the point lies in with the minimum amount of redundant computation.\n\n    _vab.subVectors(b, a);\n\n    _vac.subVectors(c, a);\n\n    _vap.subVectors(p, a);\n\n    var d1 = _vab.dot(_vap);\n\n    var d2 = _vac.dot(_vap);\n\n    if (d1 <= 0 && d2 <= 0) {\n      // vertex region of A; barycentric coords (1, 0, 0)\n      return target.copy(a);\n    }\n\n    _vbp.subVectors(p, b);\n\n    var d3 = _vab.dot(_vbp);\n\n    var d4 = _vac.dot(_vbp);\n\n    if (d3 >= 0 && d4 <= d3) {\n      // vertex region of B; barycentric coords (0, 1, 0)\n      return target.copy(b);\n    }\n\n    var vc = d1 * d4 - d3 * d2;\n\n    if (vc <= 0 && d1 >= 0 && d3 <= 0) {\n      v = d1 / (d1 - d3); // edge region of AB; barycentric coords (1-v, v, 0)\n\n      return target.copy(a).addScaledVector(_vab, v);\n    }\n\n    _vcp.subVectors(p, c);\n\n    var d5 = _vab.dot(_vcp);\n\n    var d6 = _vac.dot(_vcp);\n\n    if (d6 >= 0 && d5 <= d6) {\n      // vertex region of C; barycentric coords (0, 0, 1)\n      return target.copy(c);\n    }\n\n    var vb = d5 * d2 - d1 * d6;\n\n    if (vb <= 0 && d2 >= 0 && d6 <= 0) {\n      w = d2 / (d2 - d6); // edge region of AC; barycentric coords (1-w, 0, w)\n\n      return target.copy(a).addScaledVector(_vac, w);\n    }\n\n    var va = d3 * d6 - d5 * d4;\n\n    if (va <= 0 && d4 - d3 >= 0 && d5 - d6 >= 0) {\n      _vbc.subVectors(c, b);\n\n      w = (d4 - d3) / (d4 - d3 + (d5 - d6)); // edge region of BC; barycentric coords (0, 1-w, w)\n\n      return target.copy(b).addScaledVector(_vbc, w); // edge region of BC\n    } // face region\n\n\n    var denom = 1 / (va + vb + vc); // u = va * denom\n\n    v = vb * denom;\n    w = vc * denom;\n    return target.copy(a).addScaledVector(_vab, v).addScaledVector(_vac, w);\n  },\n  equals: function (triangle) {\n    return triangle.a.equals(this.a) && triangle.b.equals(this.b) && triangle.c.equals(this.c);\n  }\n});\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nvar _colorKeywords = {\n  'aliceblue': 0xF0F8FF,\n  'antiquewhite': 0xFAEBD7,\n  'aqua': 0x00FFFF,\n  'aquamarine': 0x7FFFD4,\n  'azure': 0xF0FFFF,\n  'beige': 0xF5F5DC,\n  'bisque': 0xFFE4C4,\n  'black': 0x000000,\n  'blanchedalmond': 0xFFEBCD,\n  'blue': 0x0000FF,\n  'blueviolet': 0x8A2BE2,\n  'brown': 0xA52A2A,\n  'burlywood': 0xDEB887,\n  'cadetblue': 0x5F9EA0,\n  'chartreuse': 0x7FFF00,\n  'chocolate': 0xD2691E,\n  'coral': 0xFF7F50,\n  'cornflowerblue': 0x6495ED,\n  'cornsilk': 0xFFF8DC,\n  'crimson': 0xDC143C,\n  'cyan': 0x00FFFF,\n  'darkblue': 0x00008B,\n  'darkcyan': 0x008B8B,\n  'darkgoldenrod': 0xB8860B,\n  'darkgray': 0xA9A9A9,\n  'darkgreen': 0x006400,\n  'darkgrey': 0xA9A9A9,\n  'darkkhaki': 0xBDB76B,\n  'darkmagenta': 0x8B008B,\n  'darkolivegreen': 0x556B2F,\n  'darkorange': 0xFF8C00,\n  'darkorchid': 0x9932CC,\n  'darkred': 0x8B0000,\n  'darksalmon': 0xE9967A,\n  'darkseagreen': 0x8FBC8F,\n  'darkslateblue': 0x483D8B,\n  'darkslategray': 0x2F4F4F,\n  'darkslategrey': 0x2F4F4F,\n  'darkturquoise': 0x00CED1,\n  'darkviolet': 0x9400D3,\n  'deeppink': 0xFF1493,\n  'deepskyblue': 0x00BFFF,\n  'dimgray': 0x696969,\n  'dimgrey': 0x696969,\n  'dodgerblue': 0x1E90FF,\n  'firebrick': 0xB22222,\n  'floralwhite': 0xFFFAF0,\n  'forestgreen': 0x228B22,\n  'fuchsia': 0xFF00FF,\n  'gainsboro': 0xDCDCDC,\n  'ghostwhite': 0xF8F8FF,\n  'gold': 0xFFD700,\n  'goldenrod': 0xDAA520,\n  'gray': 0x808080,\n  'green': 0x008000,\n  'greenyellow': 0xADFF2F,\n  'grey': 0x808080,\n  'honeydew': 0xF0FFF0,\n  'hotpink': 0xFF69B4,\n  'indianred': 0xCD5C5C,\n  'indigo': 0x4B0082,\n  'ivory': 0xFFFFF0,\n  'khaki': 0xF0E68C,\n  'lavender': 0xE6E6FA,\n  'lavenderblush': 0xFFF0F5,\n  'lawngreen': 0x7CFC00,\n  'lemonchiffon': 0xFFFACD,\n  'lightblue': 0xADD8E6,\n  'lightcoral': 0xF08080,\n  'lightcyan': 0xE0FFFF,\n  'lightgoldenrodyellow': 0xFAFAD2,\n  'lightgray': 0xD3D3D3,\n  'lightgreen': 0x90EE90,\n  'lightgrey': 0xD3D3D3,\n  'lightpink': 0xFFB6C1,\n  'lightsalmon': 0xFFA07A,\n  'lightseagreen': 0x20B2AA,\n  'lightskyblue': 0x87CEFA,\n  'lightslategray': 0x778899,\n  'lightslategrey': 0x778899,\n  'lightsteelblue': 0xB0C4DE,\n  'lightyellow': 0xFFFFE0,\n  'lime': 0x00FF00,\n  'limegreen': 0x32CD32,\n  'linen': 0xFAF0E6,\n  'magenta': 0xFF00FF,\n  'maroon': 0x800000,\n  'mediumaquamarine': 0x66CDAA,\n  'mediumblue': 0x0000CD,\n  'mediumorchid': 0xBA55D3,\n  'mediumpurple': 0x9370DB,\n  'mediumseagreen': 0x3CB371,\n  'mediumslateblue': 0x7B68EE,\n  'mediumspringgreen': 0x00FA9A,\n  'mediumturquoise': 0x48D1CC,\n  'mediumvioletred': 0xC71585,\n  'midnightblue': 0x191970,\n  'mintcream': 0xF5FFFA,\n  'mistyrose': 0xFFE4E1,\n  'moccasin': 0xFFE4B5,\n  'navajowhite': 0xFFDEAD,\n  'navy': 0x000080,\n  'oldlace': 0xFDF5E6,\n  'olive': 0x808000,\n  'olivedrab': 0x6B8E23,\n  'orange': 0xFFA500,\n  'orangered': 0xFF4500,\n  'orchid': 0xDA70D6,\n  'palegoldenrod': 0xEEE8AA,\n  'palegreen': 0x98FB98,\n  'paleturquoise': 0xAFEEEE,\n  'palevioletred': 0xDB7093,\n  'papayawhip': 0xFFEFD5,\n  'peachpuff': 0xFFDAB9,\n  'peru': 0xCD853F,\n  'pink': 0xFFC0CB,\n  'plum': 0xDDA0DD,\n  'powderblue': 0xB0E0E6,\n  'purple': 0x800080,\n  'rebeccapurple': 0x663399,\n  'red': 0xFF0000,\n  'rosybrown': 0xBC8F8F,\n  'royalblue': 0x4169E1,\n  'saddlebrown': 0x8B4513,\n  'salmon': 0xFA8072,\n  'sandybrown': 0xF4A460,\n  'seagreen': 0x2E8B57,\n  'seashell': 0xFFF5EE,\n  'sienna': 0xA0522D,\n  'silver': 0xC0C0C0,\n  'skyblue': 0x87CEEB,\n  'slateblue': 0x6A5ACD,\n  'slategray': 0x708090,\n  'slategrey': 0x708090,\n  'snow': 0xFFFAFA,\n  'springgreen': 0x00FF7F,\n  'steelblue': 0x4682B4,\n  'tan': 0xD2B48C,\n  'teal': 0x008080,\n  'thistle': 0xD8BFD8,\n  'tomato': 0xFF6347,\n  'turquoise': 0x40E0D0,\n  'violet': 0xEE82EE,\n  'wheat': 0xF5DEB3,\n  'white': 0xFFFFFF,\n  'whitesmoke': 0xF5F5F5,\n  'yellow': 0xFFFF00,\n  'yellowgreen': 0x9ACD32\n};\nvar _hslA = {\n  h: 0,\n  s: 0,\n  l: 0\n};\nvar _hslB = {\n  h: 0,\n  s: 0,\n  l: 0\n};\n\nfunction Color(r, g, b) {\n  if (g === undefined && b === undefined) {\n    // r is THREE.Color, hex or string\n    return this.set(r);\n  }\n\n  return this.setRGB(r, g, b);\n}\n\nfunction hue2rgb(p, q, t) {\n  if (t < 0) t += 1;\n  if (t > 1) t -= 1;\n  if (t < 1 / 6) return p + (q - p) * 6 * t;\n  if (t < 1 / 2) return q;\n  if (t < 2 / 3) return p + (q - p) * 6 * (2 / 3 - t);\n  return p;\n}\n\nfunction SRGBToLinear(c) {\n  return c < 0.04045 ? c * 0.0773993808 : Math.pow(c * 0.9478672986 + 0.0521327014, 2.4);\n}\n\nfunction LinearToSRGB(c) {\n  return c < 0.0031308 ? c * 12.92 : 1.055 * Math.pow(c, 0.41666) - 0.055;\n}\n\nObject.assign(Color.prototype, {\n  isColor: true,\n  r: 1,\n  g: 1,\n  b: 1,\n  set: function (value) {\n    if (value && value.isColor) {\n      this.copy(value);\n    } else if (typeof value === 'number') {\n      this.setHex(value);\n    } else if (typeof value === 'string') {\n      this.setStyle(value);\n    }\n\n    return this;\n  },\n  setScalar: function (scalar) {\n    this.r = scalar;\n    this.g = scalar;\n    this.b = scalar;\n    return this;\n  },\n  setHex: function (hex) {\n    hex = Math.floor(hex);\n    this.r = (hex >> 16 & 255) / 255;\n    this.g = (hex >> 8 & 255) / 255;\n    this.b = (hex & 255) / 255;\n    return this;\n  },\n  setRGB: function (r, g, b) {\n    this.r = r;\n    this.g = g;\n    this.b = b;\n    return this;\n  },\n  setHSL: function (h, s, l) {\n    // h,s,l ranges are in 0.0 - 1.0\n    h = MathUtils.euclideanModulo(h, 1);\n    s = MathUtils.clamp(s, 0, 1);\n    l = MathUtils.clamp(l, 0, 1);\n\n    if (s === 0) {\n      this.r = this.g = this.b = l;\n    } else {\n      var p = l <= 0.5 ? l * (1 + s) : l + s - l * s;\n      var q = 2 * l - p;\n      this.r = hue2rgb(q, p, h + 1 / 3);\n      this.g = hue2rgb(q, p, h);\n      this.b = hue2rgb(q, p, h - 1 / 3);\n    }\n\n    return this;\n  },\n  setStyle: function (style) {\n    function handleAlpha(string) {\n      if (string === undefined) return;\n\n      if (parseFloat(string) < 1) {\n        console.warn('THREE.Color: Alpha component of ' + style + ' will be ignored.');\n      }\n    }\n\n    var m;\n\n    if (m = /^((?:rgb|hsl)a?)\\(\\s*([^\\)]*)\\)/.exec(style)) {\n      // rgb / hsl\n      var color;\n      var name = m[1];\n      var components = m[2];\n\n      switch (name) {\n        case 'rgb':\n        case 'rgba':\n          if (color = /^(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec(components)) {\n            // rgb(255,0,0) rgba(255,0,0,0.5)\n            this.r = Math.min(255, parseInt(color[1], 10)) / 255;\n            this.g = Math.min(255, parseInt(color[2], 10)) / 255;\n            this.b = Math.min(255, parseInt(color[3], 10)) / 255;\n            handleAlpha(color[5]);\n            return this;\n          }\n\n          if (color = /^(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec(components)) {\n            // rgb(100%,0%,0%) rgba(100%,0%,0%,0.5)\n            this.r = Math.min(100, parseInt(color[1], 10)) / 100;\n            this.g = Math.min(100, parseInt(color[2], 10)) / 100;\n            this.b = Math.min(100, parseInt(color[3], 10)) / 100;\n            handleAlpha(color[5]);\n            return this;\n          }\n\n          break;\n\n        case 'hsl':\n        case 'hsla':\n          if (color = /^([0-9]*\\.?[0-9]+)\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec(components)) {\n            // hsl(120,50%,50%) hsla(120,50%,50%,0.5)\n            var h = parseFloat(color[1]) / 360;\n            var s = parseInt(color[2], 10) / 100;\n            var l = parseInt(color[3], 10) / 100;\n            handleAlpha(color[5]);\n            return this.setHSL(h, s, l);\n          }\n\n          break;\n      }\n    } else if (m = /^\\#([A-Fa-f0-9]+)$/.exec(style)) {\n      // hex color\n      var hex = m[1];\n      var size = hex.length;\n\n      if (size === 3) {\n        // #ff0\n        this.r = parseInt(hex.charAt(0) + hex.charAt(0), 16) / 255;\n        this.g = parseInt(hex.charAt(1) + hex.charAt(1), 16) / 255;\n        this.b = parseInt(hex.charAt(2) + hex.charAt(2), 16) / 255;\n        return this;\n      } else if (size === 6) {\n        // #ff0000\n        this.r = parseInt(hex.charAt(0) + hex.charAt(1), 16) / 255;\n        this.g = parseInt(hex.charAt(2) + hex.charAt(3), 16) / 255;\n        this.b = parseInt(hex.charAt(4) + hex.charAt(5), 16) / 255;\n        return this;\n      }\n    }\n\n    if (style && style.length > 0) {\n      return this.setColorName(style);\n    }\n\n    return this;\n  },\n  setColorName: function (style) {\n    // color keywords\n    var hex = _colorKeywords[style];\n\n    if (hex !== undefined) {\n      // red\n      this.setHex(hex);\n    } else {\n      // unknown color\n      console.warn('THREE.Color: Unknown color ' + style);\n    }\n\n    return this;\n  },\n  clone: function () {\n    return new this.constructor(this.r, this.g, this.b);\n  },\n  copy: function (color) {\n    this.r = color.r;\n    this.g = color.g;\n    this.b = color.b;\n    return this;\n  },\n  copyGammaToLinear: function (color, gammaFactor) {\n    if (gammaFactor === undefined) gammaFactor = 2.0;\n    this.r = Math.pow(color.r, gammaFactor);\n    this.g = Math.pow(color.g, gammaFactor);\n    this.b = Math.pow(color.b, gammaFactor);\n    return this;\n  },\n  copyLinearToGamma: function (color, gammaFactor) {\n    if (gammaFactor === undefined) gammaFactor = 2.0;\n    var safeInverse = gammaFactor > 0 ? 1.0 / gammaFactor : 1.0;\n    this.r = Math.pow(color.r, safeInverse);\n    this.g = Math.pow(color.g, safeInverse);\n    this.b = Math.pow(color.b, safeInverse);\n    return this;\n  },\n  convertGammaToLinear: function (gammaFactor) {\n    this.copyGammaToLinear(this, gammaFactor);\n    return this;\n  },\n  convertLinearToGamma: function (gammaFactor) {\n    this.copyLinearToGamma(this, gammaFactor);\n    return this;\n  },\n  copySRGBToLinear: function (color) {\n    this.r = SRGBToLinear(color.r);\n    this.g = SRGBToLinear(color.g);\n    this.b = SRGBToLinear(color.b);\n    return this;\n  },\n  copyLinearToSRGB: function (color) {\n    this.r = LinearToSRGB(color.r);\n    this.g = LinearToSRGB(color.g);\n    this.b = LinearToSRGB(color.b);\n    return this;\n  },\n  convertSRGBToLinear: function () {\n    this.copySRGBToLinear(this);\n    return this;\n  },\n  convertLinearToSRGB: function () {\n    this.copyLinearToSRGB(this);\n    return this;\n  },\n  getHex: function () {\n    return this.r * 255 << 16 ^ this.g * 255 << 8 ^ this.b * 255 << 0;\n  },\n  getHexString: function () {\n    return ('000000' + this.getHex().toString(16)).slice(-6);\n  },\n  getHSL: function (target) {\n    // h,s,l ranges are in 0.0 - 1.0\n    if (target === undefined) {\n      console.warn('THREE.Color: .getHSL() target is now required');\n      target = {\n        h: 0,\n        s: 0,\n        l: 0\n      };\n    }\n\n    var r = this.r,\n        g = this.g,\n        b = this.b;\n    var max = Math.max(r, g, b);\n    var min = Math.min(r, g, b);\n    var hue, saturation;\n    var lightness = (min + max) / 2.0;\n\n    if (min === max) {\n      hue = 0;\n      saturation = 0;\n    } else {\n      var delta = max - min;\n      saturation = lightness <= 0.5 ? delta / (max + min) : delta / (2 - max - min);\n\n      switch (max) {\n        case r:\n          hue = (g - b) / delta + (g < b ? 6 : 0);\n          break;\n\n        case g:\n          hue = (b - r) / delta + 2;\n          break;\n\n        case b:\n          hue = (r - g) / delta + 4;\n          break;\n      }\n\n      hue /= 6;\n    }\n\n    target.h = hue;\n    target.s = saturation;\n    target.l = lightness;\n    return target;\n  },\n  getStyle: function () {\n    return 'rgb(' + (this.r * 255 | 0) + ',' + (this.g * 255 | 0) + ',' + (this.b * 255 | 0) + ')';\n  },\n  offsetHSL: function (h, s, l) {\n    this.getHSL(_hslA);\n    _hslA.h += h;\n    _hslA.s += s;\n    _hslA.l += l;\n    this.setHSL(_hslA.h, _hslA.s, _hslA.l);\n    return this;\n  },\n  add: function (color) {\n    this.r += color.r;\n    this.g += color.g;\n    this.b += color.b;\n    return this;\n  },\n  addColors: function (color1, color2) {\n    this.r = color1.r + color2.r;\n    this.g = color1.g + color2.g;\n    this.b = color1.b + color2.b;\n    return this;\n  },\n  addScalar: function (s) {\n    this.r += s;\n    this.g += s;\n    this.b += s;\n    return this;\n  },\n  sub: function (color) {\n    this.r = Math.max(0, this.r - color.r);\n    this.g = Math.max(0, this.g - color.g);\n    this.b = Math.max(0, this.b - color.b);\n    return this;\n  },\n  multiply: function (color) {\n    this.r *= color.r;\n    this.g *= color.g;\n    this.b *= color.b;\n    return this;\n  },\n  multiplyScalar: function (s) {\n    this.r *= s;\n    this.g *= s;\n    this.b *= s;\n    return this;\n  },\n  lerp: function (color, alpha) {\n    this.r += (color.r - this.r) * alpha;\n    this.g += (color.g - this.g) * alpha;\n    this.b += (color.b - this.b) * alpha;\n    return this;\n  },\n  lerpHSL: function (color, alpha) {\n    this.getHSL(_hslA);\n    color.getHSL(_hslB);\n    var h = MathUtils.lerp(_hslA.h, _hslB.h, alpha);\n    var s = MathUtils.lerp(_hslA.s, _hslB.s, alpha);\n    var l = MathUtils.lerp(_hslA.l, _hslB.l, alpha);\n    this.setHSL(h, s, l);\n    return this;\n  },\n  equals: function (c) {\n    return c.r === this.r && c.g === this.g && c.b === this.b;\n  },\n  fromArray: function (array, offset) {\n    if (offset === undefined) offset = 0;\n    this.r = array[offset];\n    this.g = array[offset + 1];\n    this.b = array[offset + 2];\n    return this;\n  },\n  toArray: function (array, offset) {\n    if (array === undefined) array = [];\n    if (offset === undefined) offset = 0;\n    array[offset] = this.r;\n    array[offset + 1] = this.g;\n    array[offset + 2] = this.b;\n    return array;\n  },\n  toJSON: function () {\n    return this.getHex();\n  }\n});\nColor.NAMES = _colorKeywords;\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction Face3(a, b, c, normal, color, materialIndex) {\n  this.a = a;\n  this.b = b;\n  this.c = c;\n  this.normal = normal && normal.isVector3 ? normal : new Vector3();\n  this.vertexNormals = Array.isArray(normal) ? normal : [];\n  this.color = color && color.isColor ? color : new Color();\n  this.vertexColors = Array.isArray(color) ? color : [];\n  this.materialIndex = materialIndex !== undefined ? materialIndex : 0;\n}\n\nObject.assign(Face3.prototype, {\n  clone: function () {\n    return new this.constructor().copy(this);\n  },\n  copy: function (source) {\n    this.a = source.a;\n    this.b = source.b;\n    this.c = source.c;\n    this.normal.copy(source.normal);\n    this.color.copy(source.color);\n    this.materialIndex = source.materialIndex;\n\n    for (var i = 0, il = source.vertexNormals.length; i < il; i++) {\n      this.vertexNormals[i] = source.vertexNormals[i].clone();\n    }\n\n    for (var i = 0, il = source.vertexColors.length; i < il; i++) {\n      this.vertexColors[i] = source.vertexColors[i].clone();\n    }\n\n    return this;\n  }\n});\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nvar materialId = 0;\n\nfunction Material() {\n  Object.defineProperty(this, 'id', {\n    value: materialId++\n  });\n  this.uuid = MathUtils.generateUUID();\n  this.name = '';\n  this.type = 'Material';\n  this.fog = true;\n  this.blending = NormalBlending;\n  this.side = FrontSide;\n  this.flatShading = false;\n  this.vertexColors = false;\n  this.opacity = 1;\n  this.transparent = false;\n  this.blendSrc = SrcAlphaFactor;\n  this.blendDst = OneMinusSrcAlphaFactor;\n  this.blendEquation = AddEquation;\n  this.blendSrcAlpha = null;\n  this.blendDstAlpha = null;\n  this.blendEquationAlpha = null;\n  this.depthFunc = LessEqualDepth;\n  this.depthTest = true;\n  this.depthWrite = true;\n  this.stencilWriteMask = 0xff;\n  this.stencilFunc = AlwaysStencilFunc;\n  this.stencilRef = 0;\n  this.stencilFuncMask = 0xff;\n  this.stencilFail = KeepStencilOp;\n  this.stencilZFail = KeepStencilOp;\n  this.stencilZPass = KeepStencilOp;\n  this.stencilWrite = false;\n  this.clippingPlanes = null;\n  this.clipIntersection = false;\n  this.clipShadows = false;\n  this.shadowSide = null;\n  this.colorWrite = true;\n  this.precision = null; // override the renderer's default precision for this material\n\n  this.polygonOffset = false;\n  this.polygonOffsetFactor = 0;\n  this.polygonOffsetUnits = 0;\n  this.dithering = false;\n  this.alphaTest = 0;\n  this.premultipliedAlpha = false;\n  this.visible = true;\n  this.toneMapped = true;\n  this.userData = {};\n  this.version = 0;\n}\n\nMaterial.prototype = Object.assign(Object.create(EventDispatcher.prototype), {\n  constructor: Material,\n  isMaterial: true,\n  onBeforeCompile: function () {},\n  setValues: function (values) {\n    if (values === undefined) return;\n\n    for (var key in values) {\n      var newValue = values[key];\n\n      if (newValue === undefined) {\n        console.warn(\"THREE.Material: '\" + key + \"' parameter is undefined.\");\n        continue;\n      } // for backward compatability if shading is set in the constructor\n\n\n      if (key === 'shading') {\n        console.warn('THREE.' + this.type + ': .shading has been removed. Use the boolean .flatShading instead.');\n        this.flatShading = newValue === FlatShading ? true : false;\n        continue;\n      }\n\n      var currentValue = this[key];\n\n      if (currentValue === undefined) {\n        console.warn(\"THREE.\" + this.type + \": '\" + key + \"' is not a property of this material.\");\n        continue;\n      }\n\n      if (currentValue && currentValue.isColor) {\n        currentValue.set(newValue);\n      } else if (currentValue && currentValue.isVector3 && newValue && newValue.isVector3) {\n        currentValue.copy(newValue);\n      } else {\n        this[key] = newValue;\n      }\n    }\n  },\n  toJSON: function (meta) {\n    var isRoot = meta === undefined || typeof meta === 'string';\n\n    if (isRoot) {\n      meta = {\n        textures: {},\n        images: {}\n      };\n    }\n\n    var data = {\n      metadata: {\n        version: 4.5,\n        type: 'Material',\n        generator: 'Material.toJSON'\n      }\n    }; // standard Material serialization\n\n    data.uuid = this.uuid;\n    data.type = this.type;\n    if (this.name !== '') data.name = this.name;\n    if (this.color && this.color.isColor) data.color = this.color.getHex();\n    if (this.roughness !== undefined) data.roughness = this.roughness;\n    if (this.metalness !== undefined) data.metalness = this.metalness;\n    if (this.sheen && this.sheen.isColor) data.sheen = this.sheen.getHex();\n    if (this.emissive && this.emissive.isColor) data.emissive = this.emissive.getHex();\n    if (this.emissiveIntensity && this.emissiveIntensity !== 1) data.emissiveIntensity = this.emissiveIntensity;\n    if (this.specular && this.specular.isColor) data.specular = this.specular.getHex();\n    if (this.shininess !== undefined) data.shininess = this.shininess;\n    if (this.clearcoat !== undefined) data.clearcoat = this.clearcoat;\n    if (this.clearcoatRoughness !== undefined) data.clearcoatRoughness = this.clearcoatRoughness;\n\n    if (this.clearcoatNormalMap && this.clearcoatNormalMap.isTexture) {\n      data.clearcoatNormalMap = this.clearcoatNormalMap.toJSON(meta).uuid;\n      data.clearcoatNormalScale = this.clearcoatNormalScale.toArray();\n    }\n\n    if (this.map && this.map.isTexture) data.map = this.map.toJSON(meta).uuid;\n    if (this.matcap && this.matcap.isTexture) data.matcap = this.matcap.toJSON(meta).uuid;\n    if (this.alphaMap && this.alphaMap.isTexture) data.alphaMap = this.alphaMap.toJSON(meta).uuid;\n    if (this.lightMap && this.lightMap.isTexture) data.lightMap = this.lightMap.toJSON(meta).uuid;\n\n    if (this.aoMap && this.aoMap.isTexture) {\n      data.aoMap = this.aoMap.toJSON(meta).uuid;\n      data.aoMapIntensity = this.aoMapIntensity;\n    }\n\n    if (this.bumpMap && this.bumpMap.isTexture) {\n      data.bumpMap = this.bumpMap.toJSON(meta).uuid;\n      data.bumpScale = this.bumpScale;\n    }\n\n    if (this.normalMap && this.normalMap.isTexture) {\n      data.normalMap = this.normalMap.toJSON(meta).uuid;\n      data.normalMapType = this.normalMapType;\n      data.normalScale = this.normalScale.toArray();\n    }\n\n    if (this.displacementMap && this.displacementMap.isTexture) {\n      data.displacementMap = this.displacementMap.toJSON(meta).uuid;\n      data.displacementScale = this.displacementScale;\n      data.displacementBias = this.displacementBias;\n    }\n\n    if (this.roughnessMap && this.roughnessMap.isTexture) data.roughnessMap = this.roughnessMap.toJSON(meta).uuid;\n    if (this.metalnessMap && this.metalnessMap.isTexture) data.metalnessMap = this.metalnessMap.toJSON(meta).uuid;\n    if (this.emissiveMap && this.emissiveMap.isTexture) data.emissiveMap = this.emissiveMap.toJSON(meta).uuid;\n    if (this.specularMap && this.specularMap.isTexture) data.specularMap = this.specularMap.toJSON(meta).uuid;\n\n    if (this.gradientMap && this.gradientMap.isTexture) {\n      data.gradientMap = this.gradientMap.toJSON(meta).uuid;\n    }\n\n    if (this.size !== undefined) data.size = this.size;\n    if (this.sizeAttenuation !== undefined) data.sizeAttenuation = this.sizeAttenuation;\n    if (this.blending !== NormalBlending) data.blending = this.blending;\n    if (this.flatShading === true) data.flatShading = this.flatShading;\n    if (this.side !== FrontSide) data.side = this.side;\n    if (this.vertexColors) data.vertexColors = true;\n    if (this.opacity < 1) data.opacity = this.opacity;\n    if (this.transparent === true) data.transparent = this.transparent;\n    data.depthFunc = this.depthFunc;\n    data.depthTest = this.depthTest;\n    data.depthWrite = this.depthWrite;\n    data.stencilWrite = this.stencilWrite;\n    data.stencilWriteMask = this.stencilWriteMask;\n    data.stencilFunc = this.stencilFunc;\n    data.stencilRef = this.stencilRef;\n    data.stencilFuncMask = this.stencilFuncMask;\n    data.stencilFail = this.stencilFail;\n    data.stencilZFail = this.stencilZFail;\n    data.stencilZPass = this.stencilZPass; // rotation (SpriteMaterial)\n\n    if (this.rotation && this.rotation !== 0) data.rotation = this.rotation;\n    if (this.polygonOffset === true) data.polygonOffset = true;\n    if (this.polygonOffsetFactor !== 0) data.polygonOffsetFactor = this.polygonOffsetFactor;\n    if (this.polygonOffsetUnits !== 0) data.polygonOffsetUnits = this.polygonOffsetUnits;\n    if (this.linewidth && this.linewidth !== 1) data.linewidth = this.linewidth;\n    if (this.dashSize !== undefined) data.dashSize = this.dashSize;\n    if (this.gapSize !== undefined) data.gapSize = this.gapSize;\n    if (this.scale !== undefined) data.scale = this.scale;\n    if (this.dithering === true) data.dithering = true;\n    if (this.alphaTest > 0) data.alphaTest = this.alphaTest;\n    if (this.premultipliedAlpha === true) data.premultipliedAlpha = this.premultipliedAlpha;\n    if (this.wireframe === true) data.wireframe = this.wireframe;\n    if (this.wireframeLinewidth > 1) data.wireframeLinewidth = this.wireframeLinewidth;\n    if (this.wireframeLinecap !== 'round') data.wireframeLinecap = this.wireframeLinecap;\n    if (this.wireframeLinejoin !== 'round') data.wireframeLinejoin = this.wireframeLinejoin;\n    if (this.morphNormals === true) data.morphNormals = true;\n    if (this.skinning === true) data.skinning = true;\n    if (this.visible === false) data.visible = false;\n    if (this.toneMapped === false) data.toneMapped = false;\n    if (JSON.stringify(this.userData) !== '{}') data.userData = this.userData; // TODO: Copied from Object3D.toJSON\n\n    function extractFromCache(cache) {\n      var values = [];\n\n      for (var key in cache) {\n        var data = cache[key];\n        delete data.metadata;\n        values.push(data);\n      }\n\n      return values;\n    }\n\n    if (isRoot) {\n      var textures = extractFromCache(meta.textures);\n      var images = extractFromCache(meta.images);\n      if (textures.length > 0) data.textures = textures;\n      if (images.length > 0) data.images = images;\n    }\n\n    return data;\n  },\n  clone: function () {\n    return new this.constructor().copy(this);\n  },\n  copy: function (source) {\n    this.name = source.name;\n    this.fog = source.fog;\n    this.blending = source.blending;\n    this.side = source.side;\n    this.flatShading = source.flatShading;\n    this.vertexColors = source.vertexColors;\n    this.opacity = source.opacity;\n    this.transparent = source.transparent;\n    this.blendSrc = source.blendSrc;\n    this.blendDst = source.blendDst;\n    this.blendEquation = source.blendEquation;\n    this.blendSrcAlpha = source.blendSrcAlpha;\n    this.blendDstAlpha = source.blendDstAlpha;\n    this.blendEquationAlpha = source.blendEquationAlpha;\n    this.depthFunc = source.depthFunc;\n    this.depthTest = source.depthTest;\n    this.depthWrite = source.depthWrite;\n    this.stencilWriteMask = source.stencilWriteMask;\n    this.stencilFunc = source.stencilFunc;\n    this.stencilRef = source.stencilRef;\n    this.stencilFuncMask = source.stencilFuncMask;\n    this.stencilFail = source.stencilFail;\n    this.stencilZFail = source.stencilZFail;\n    this.stencilZPass = source.stencilZPass;\n    this.stencilWrite = source.stencilWrite;\n    var srcPlanes = source.clippingPlanes,\n        dstPlanes = null;\n\n    if (srcPlanes !== null) {\n      var n = srcPlanes.length;\n      dstPlanes = new Array(n);\n\n      for (var i = 0; i !== n; ++i) dstPlanes[i] = srcPlanes[i].clone();\n    }\n\n    this.clippingPlanes = dstPlanes;\n    this.clipIntersection = source.clipIntersection;\n    this.clipShadows = source.clipShadows;\n    this.shadowSide = source.shadowSide;\n    this.colorWrite = source.colorWrite;\n    this.precision = source.precision;\n    this.polygonOffset = source.polygonOffset;\n    this.polygonOffsetFactor = source.polygonOffsetFactor;\n    this.polygonOffsetUnits = source.polygonOffsetUnits;\n    this.dithering = source.dithering;\n    this.alphaTest = source.alphaTest;\n    this.premultipliedAlpha = source.premultipliedAlpha;\n    this.visible = source.visible;\n    this.toneMapped = source.toneMapped;\n    this.userData = JSON.parse(JSON.stringify(source.userData));\n    return this;\n  },\n  dispose: function () {\n    this.dispatchEvent({\n      type: 'dispose'\n    });\n  }\n});\nObject.defineProperty(Material.prototype, 'needsUpdate', {\n  set: function (value) {\n    if (value === true) this.version++;\n  }\n});\n\nfunction MeshBasicMaterial() {}\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\n\nvar _vector$3 = new Vector3();\n\nfunction BufferAttribute(array, itemSize, normalized) {\n  if (Array.isArray(array)) {\n    throw new TypeError('THREE.BufferAttribute: array should be a Typed Array.');\n  }\n\n  this.name = '';\n  this.array = array;\n  this.itemSize = itemSize;\n  this.count = array !== undefined ? array.length / itemSize : 0;\n  this.normalized = normalized === true;\n  this.usage = StaticDrawUsage;\n  this.updateRange = {\n    offset: 0,\n    count: -1\n  };\n  this.version = 0;\n}\n\nObject.defineProperty(BufferAttribute.prototype, 'needsUpdate', {\n  set: function (value) {\n    if (value === true) this.version++;\n  }\n});\nObject.assign(BufferAttribute.prototype, {\n  isBufferAttribute: true,\n  onUploadCallback: function () {},\n  setUsage: function (value) {\n    this.usage = value;\n    return this;\n  },\n  copy: function (source) {\n    this.name = source.name;\n    this.array = new source.array.constructor(source.array);\n    this.itemSize = source.itemSize;\n    this.count = source.count;\n    this.normalized = source.normalized;\n    this.usage = source.usage;\n    return this;\n  },\n  copyAt: function (index1, attribute, index2) {\n    index1 *= this.itemSize;\n    index2 *= attribute.itemSize;\n\n    for (var i = 0, l = this.itemSize; i < l; i++) {\n      this.array[index1 + i] = attribute.array[index2 + i];\n    }\n\n    return this;\n  },\n  copyArray: function (array) {\n    this.array.set(array);\n    return this;\n  },\n  copyColorsArray: function (colors) {\n    var array = this.array,\n        offset = 0;\n\n    for (var i = 0, l = colors.length; i < l; i++) {\n      var color = colors[i];\n\n      if (color === undefined) {\n        console.warn('THREE.BufferAttribute.copyColorsArray(): color is undefined', i);\n        color = new Color();\n      }\n\n      array[offset++] = color.r;\n      array[offset++] = color.g;\n      array[offset++] = color.b;\n    }\n\n    return this;\n  },\n  copyVector2sArray: function (vectors) {\n    var array = this.array,\n        offset = 0;\n\n    for (var i = 0, l = vectors.length; i < l; i++) {\n      var vector = vectors[i];\n\n      if (vector === undefined) {\n        console.warn('THREE.BufferAttribute.copyVector2sArray(): vector is undefined', i);\n        vector = new Vector2();\n      }\n\n      array[offset++] = vector.x;\n      array[offset++] = vector.y;\n    }\n\n    return this;\n  },\n  copyVector3sArray: function (vectors) {\n    var array = this.array,\n        offset = 0;\n\n    for (var i = 0, l = vectors.length; i < l; i++) {\n      var vector = vectors[i];\n\n      if (vector === undefined) {\n        console.warn('THREE.BufferAttribute.copyVector3sArray(): vector is undefined', i);\n        vector = new Vector3();\n      }\n\n      array[offset++] = vector.x;\n      array[offset++] = vector.y;\n      array[offset++] = vector.z;\n    }\n\n    return this;\n  },\n  copyVector4sArray: function (vectors) {\n    var array = this.array,\n        offset = 0;\n\n    for (var i = 0, l = vectors.length; i < l; i++) {\n      var vector = vectors[i];\n\n      if (vector === undefined) {\n        console.warn('THREE.BufferAttribute.copyVector4sArray(): vector is undefined', i);\n        vector = new Vector4();\n      }\n\n      array[offset++] = vector.x;\n      array[offset++] = vector.y;\n      array[offset++] = vector.z;\n      array[offset++] = vector.w;\n    }\n\n    return this;\n  },\n  applyMatrix3: function (m) {\n    for (var i = 0, l = this.count; i < l; i++) {\n      _vector$3.x = this.getX(i);\n      _vector$3.y = this.getY(i);\n      _vector$3.z = this.getZ(i);\n\n      _vector$3.applyMatrix3(m);\n\n      this.setXYZ(i, _vector$3.x, _vector$3.y, _vector$3.z);\n    }\n\n    return this;\n  },\n  applyMatrix4: function (m) {\n    for (var i = 0, l = this.count; i < l; i++) {\n      _vector$3.x = this.getX(i);\n      _vector$3.y = this.getY(i);\n      _vector$3.z = this.getZ(i);\n\n      _vector$3.applyMatrix4(m);\n\n      this.setXYZ(i, _vector$3.x, _vector$3.y, _vector$3.z);\n    }\n\n    return this;\n  },\n  applyNormalMatrix: function (m) {\n    for (var i = 0, l = this.count; i < l; i++) {\n      _vector$3.x = this.getX(i);\n      _vector$3.y = this.getY(i);\n      _vector$3.z = this.getZ(i);\n\n      _vector$3.applyNormalMatrix(m);\n\n      this.setXYZ(i, _vector$3.x, _vector$3.y, _vector$3.z);\n    }\n\n    return this;\n  },\n  transformDirection: function (m) {\n    for (var i = 0, l = this.count; i < l; i++) {\n      _vector$3.x = this.getX(i);\n      _vector$3.y = this.getY(i);\n      _vector$3.z = this.getZ(i);\n\n      _vector$3.transformDirection(m);\n\n      this.setXYZ(i, _vector$3.x, _vector$3.y, _vector$3.z);\n    }\n\n    return this;\n  },\n  set: function (value, offset) {\n    if (offset === undefined) offset = 0;\n    this.array.set(value, offset);\n    return this;\n  },\n  getX: function (index) {\n    return this.array[index * this.itemSize];\n  },\n  setX: function (index, x) {\n    this.array[index * this.itemSize] = x;\n    return this;\n  },\n  getY: function (index) {\n    return this.array[index * this.itemSize + 1];\n  },\n  setY: function (index, y) {\n    this.array[index * this.itemSize + 1] = y;\n    return this;\n  },\n  getZ: function (index) {\n    return this.array[index * this.itemSize + 2];\n  },\n  setZ: function (index, z) {\n    this.array[index * this.itemSize + 2] = z;\n    return this;\n  },\n  getW: function (index) {\n    return this.array[index * this.itemSize + 3];\n  },\n  setW: function (index, w) {\n    this.array[index * this.itemSize + 3] = w;\n    return this;\n  },\n  setXY: function (index, x, y) {\n    index *= this.itemSize;\n    this.array[index + 0] = x;\n    this.array[index + 1] = y;\n    return this;\n  },\n  setXYZ: function (index, x, y, z) {\n    index *= this.itemSize;\n    this.array[index + 0] = x;\n    this.array[index + 1] = y;\n    this.array[index + 2] = z;\n    return this;\n  },\n  setXYZW: function (index, x, y, z, w) {\n    index *= this.itemSize;\n    this.array[index + 0] = x;\n    this.array[index + 1] = y;\n    this.array[index + 2] = z;\n    this.array[index + 3] = w;\n    return this;\n  },\n  onUpload: function (callback) {\n    this.onUploadCallback = callback;\n    return this;\n  },\n  clone: function () {\n    return new this.constructor(this.array, this.itemSize).copy(this);\n  },\n  toJSON: function () {\n    return {\n      itemSize: this.itemSize,\n      type: this.array.constructor.name,\n      array: Array.prototype.slice.call(this.array),\n      normalized: this.normalized\n    };\n  }\n}); //\n\nfunction Int8BufferAttribute(array, itemSize, normalized) {\n  BufferAttribute.call(this, new Int8Array(array), itemSize, normalized);\n}\n\nInt8BufferAttribute.prototype = Object.create(BufferAttribute.prototype);\nInt8BufferAttribute.prototype.constructor = Int8BufferAttribute;\n\nfunction Uint8BufferAttribute(array, itemSize, normalized) {\n  BufferAttribute.call(this, new Uint8Array(array), itemSize, normalized);\n}\n\nUint8BufferAttribute.prototype = Object.create(BufferAttribute.prototype);\nUint8BufferAttribute.prototype.constructor = Uint8BufferAttribute;\n\nfunction Uint8ClampedBufferAttribute(array, itemSize, normalized) {\n  BufferAttribute.call(this, new Uint8ClampedArray(array), itemSize, normalized);\n}\n\nUint8ClampedBufferAttribute.prototype = Object.create(BufferAttribute.prototype);\nUint8ClampedBufferAttribute.prototype.constructor = Uint8ClampedBufferAttribute;\n\nfunction Int16BufferAttribute(array, itemSize, normalized) {\n  BufferAttribute.call(this, new Int16Array(array), itemSize, normalized);\n}\n\nInt16BufferAttribute.prototype = Object.create(BufferAttribute.prototype);\nInt16BufferAttribute.prototype.constructor = Int16BufferAttribute;\n\nfunction Uint16BufferAttribute(array, itemSize, normalized) {\n  BufferAttribute.call(this, new Uint16Array(array), itemSize, normalized);\n}\n\nUint16BufferAttribute.prototype = Object.create(BufferAttribute.prototype);\nUint16BufferAttribute.prototype.constructor = Uint16BufferAttribute;\n\nfunction Int32BufferAttribute(array, itemSize, normalized) {\n  BufferAttribute.call(this, new Int32Array(array), itemSize, normalized);\n}\n\nInt32BufferAttribute.prototype = Object.create(BufferAttribute.prototype);\nInt32BufferAttribute.prototype.constructor = Int32BufferAttribute;\n\nfunction Uint32BufferAttribute(array, itemSize, normalized) {\n  BufferAttribute.call(this, new Uint32Array(array), itemSize, normalized);\n}\n\nUint32BufferAttribute.prototype = Object.create(BufferAttribute.prototype);\nUint32BufferAttribute.prototype.constructor = Uint32BufferAttribute;\n\nfunction Float32BufferAttribute(array, itemSize, normalized) {\n  BufferAttribute.call(this, new Float32Array(array), itemSize, normalized);\n}\n\nFloat32BufferAttribute.prototype = Object.create(BufferAttribute.prototype);\nFloat32BufferAttribute.prototype.constructor = Float32BufferAttribute;\n\nfunction Float64BufferAttribute(array, itemSize, normalized) {\n  BufferAttribute.call(this, new Float64Array(array), itemSize, normalized);\n}\n\nFloat64BufferAttribute.prototype = Object.create(BufferAttribute.prototype);\nFloat64BufferAttribute.prototype.constructor = Float64BufferAttribute;\n\nfunction DirectGeometry() {}\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\n\nfunction arrayMax(array) {\n  if (array.length === 0) return -Infinity;\n  var max = array[0];\n\n  for (var i = 1, l = array.length; i < l; ++i) {\n    if (array[i] > max) max = array[i];\n  }\n\n  return max;\n}\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n */\n\n\nvar _bufferGeometryId = 1; // BufferGeometry uses odd numbers as Id\n\nvar _m1$2 = new Matrix4();\n\nvar _obj = new Object3D();\n\nvar _offset = new Vector3();\n\nvar _box$2 = new Box3();\n\nvar _boxMorphTargets = new Box3();\n\nvar _vector$4 = new Vector3();\n\nfunction BufferGeometry() {\n  Object.defineProperty(this, 'id', {\n    value: _bufferGeometryId += 2\n  });\n  this.uuid = MathUtils.generateUUID();\n  this.name = '';\n  this.type = 'BufferGeometry';\n  this.index = null;\n  this.attributes = {};\n  this.morphAttributes = {};\n  this.morphTargetsRelative = false;\n  this.groups = [];\n  this.boundingBox = null;\n  this.boundingSphere = null;\n  this.drawRange = {\n    start: 0,\n    count: Infinity\n  };\n  this.userData = {};\n}\n\nBufferGeometry.prototype = Object.assign(Object.create(EventDispatcher.prototype), {\n  constructor: BufferGeometry,\n  isBufferGeometry: true,\n  getIndex: function () {\n    return this.index;\n  },\n  setIndex: function (index) {\n    if (Array.isArray(index)) {\n      this.index = new (arrayMax(index) > 65535 ? Uint32BufferAttribute : Uint16BufferAttribute)(index, 1);\n    } else {\n      this.index = index;\n    }\n  },\n  getAttribute: function (name) {\n    return this.attributes[name];\n  },\n  setAttribute: function (name, attribute) {\n    this.attributes[name] = attribute;\n    return this;\n  },\n  deleteAttribute: function (name) {\n    delete this.attributes[name];\n    return this;\n  },\n  addGroup: function (start, count, materialIndex) {\n    this.groups.push({\n      start: start,\n      count: count,\n      materialIndex: materialIndex !== undefined ? materialIndex : 0\n    });\n  },\n  clearGroups: function () {\n    this.groups = [];\n  },\n  setDrawRange: function (start, count) {\n    this.drawRange.start = start;\n    this.drawRange.count = count;\n  },\n  applyMatrix4: function (matrix) {\n    var position = this.attributes.position;\n\n    if (position !== undefined) {\n      position.applyMatrix4(matrix);\n      position.needsUpdate = true;\n    }\n\n    var normal = this.attributes.normal;\n\n    if (normal !== undefined) {\n      var normalMatrix = new Matrix3().getNormalMatrix(matrix);\n      normal.applyNormalMatrix(normalMatrix);\n      normal.needsUpdate = true;\n    }\n\n    var tangent = this.attributes.tangent;\n\n    if (tangent !== undefined) {\n      tangent.transformDirection(matrix);\n      tangent.needsUpdate = true;\n    }\n\n    if (this.boundingBox !== null) {\n      this.computeBoundingBox();\n    }\n\n    if (this.boundingSphere !== null) {\n      this.computeBoundingSphere();\n    }\n\n    return this;\n  },\n  rotateX: function (angle) {\n    // rotate geometry around world x-axis\n    _m1$2.makeRotationX(angle);\n\n    this.applyMatrix4(_m1$2);\n    return this;\n  },\n  rotateY: function (angle) {\n    // rotate geometry around world y-axis\n    _m1$2.makeRotationY(angle);\n\n    this.applyMatrix4(_m1$2);\n    return this;\n  },\n  rotateZ: function (angle) {\n    // rotate geometry around world z-axis\n    _m1$2.makeRotationZ(angle);\n\n    this.applyMatrix4(_m1$2);\n    return this;\n  },\n  translate: function (x, y, z) {\n    // translate geometry\n    _m1$2.makeTranslation(x, y, z);\n\n    this.applyMatrix4(_m1$2);\n    return this;\n  },\n  scale: function (x, y, z) {\n    // scale geometry\n    _m1$2.makeScale(x, y, z);\n\n    this.applyMatrix4(_m1$2);\n    return this;\n  },\n  lookAt: function (vector) {\n    _obj.lookAt(vector);\n\n    _obj.updateMatrix();\n\n    this.applyMatrix4(_obj.matrix);\n    return this;\n  },\n  center: function () {\n    this.computeBoundingBox();\n    this.boundingBox.getCenter(_offset).negate();\n    this.translate(_offset.x, _offset.y, _offset.z);\n    return this;\n  },\n  setFromObject: function (object) {\n    // console.log( 'THREE.BufferGeometry.setFromObject(). Converting', object, this );\n    var geometry = object.geometry;\n\n    if (object.isMesh) {\n      if (geometry && geometry.isGeometry) {\n        this.fromGeometry(geometry);\n      }\n    }\n\n    return this;\n  },\n  setFromPoints: function (points) {\n    var position = [];\n\n    for (var i = 0, l = points.length; i < l; i++) {\n      var point = points[i];\n      position.push(point.x, point.y, point.z || 0);\n    }\n\n    this.setAttribute('position', new Float32BufferAttribute(position, 3));\n    return this;\n  },\n  updateFromObject: function (object) {\n    var geometry = object.geometry;\n\n    if (object.isMesh) {\n      var direct = geometry.__directGeometry;\n\n      if (geometry.elementsNeedUpdate === true) {\n        direct = undefined;\n        geometry.elementsNeedUpdate = false;\n      }\n\n      if (direct === undefined) {\n        return this.fromGeometry(geometry);\n      }\n\n      direct.verticesNeedUpdate = geometry.verticesNeedUpdate;\n      direct.normalsNeedUpdate = geometry.normalsNeedUpdate;\n      direct.colorsNeedUpdate = geometry.colorsNeedUpdate;\n      direct.uvsNeedUpdate = geometry.uvsNeedUpdate;\n      direct.groupsNeedUpdate = geometry.groupsNeedUpdate;\n      geometry.verticesNeedUpdate = false;\n      geometry.normalsNeedUpdate = false;\n      geometry.colorsNeedUpdate = false;\n      geometry.uvsNeedUpdate = false;\n      geometry.groupsNeedUpdate = false;\n      geometry = direct;\n    }\n\n    var attribute;\n\n    if (geometry.verticesNeedUpdate === true) {\n      attribute = this.attributes.position;\n\n      if (attribute !== undefined) {\n        attribute.copyVector3sArray(geometry.vertices);\n        attribute.needsUpdate = true;\n      }\n\n      geometry.verticesNeedUpdate = false;\n    }\n\n    if (geometry.normalsNeedUpdate === true) {\n      attribute = this.attributes.normal;\n\n      if (attribute !== undefined) {\n        attribute.copyVector3sArray(geometry.normals);\n        attribute.needsUpdate = true;\n      }\n\n      geometry.normalsNeedUpdate = false;\n    }\n\n    if (geometry.colorsNeedUpdate === true) {\n      attribute = this.attributes.color;\n\n      if (attribute !== undefined) {\n        attribute.copyColorsArray(geometry.colors);\n        attribute.needsUpdate = true;\n      }\n\n      geometry.colorsNeedUpdate = false;\n    }\n\n    if (geometry.uvsNeedUpdate) {\n      attribute = this.attributes.uv;\n\n      if (attribute !== undefined) {\n        attribute.copyVector2sArray(geometry.uvs);\n        attribute.needsUpdate = true;\n      }\n\n      geometry.uvsNeedUpdate = false;\n    }\n\n    if (geometry.lineDistancesNeedUpdate) {\n      attribute = this.attributes.lineDistance;\n\n      if (attribute !== undefined) {\n        attribute.copyArray(geometry.lineDistances);\n        attribute.needsUpdate = true;\n      }\n\n      geometry.lineDistancesNeedUpdate = false;\n    }\n\n    if (geometry.groupsNeedUpdate) {\n      geometry.computeGroups(object.geometry);\n      this.groups = geometry.groups;\n      geometry.groupsNeedUpdate = false;\n    }\n\n    return this;\n  },\n  fromGeometry: function (geometry) {\n    geometry.__directGeometry = new DirectGeometry().fromGeometry(geometry);\n    return this.fromDirectGeometry(geometry.__directGeometry);\n  },\n  fromDirectGeometry: function (geometry) {\n    var positions = new Float32Array(geometry.vertices.length * 3);\n    this.setAttribute('position', new BufferAttribute(positions, 3).copyVector3sArray(geometry.vertices));\n\n    if (geometry.normals.length > 0) {\n      var normals = new Float32Array(geometry.normals.length * 3);\n      this.setAttribute('normal', new BufferAttribute(normals, 3).copyVector3sArray(geometry.normals));\n    }\n\n    if (geometry.colors.length > 0) {\n      var colors = new Float32Array(geometry.colors.length * 3);\n      this.setAttribute('color', new BufferAttribute(colors, 3).copyColorsArray(geometry.colors));\n    }\n\n    if (geometry.uvs.length > 0) {\n      var uvs = new Float32Array(geometry.uvs.length * 2);\n      this.setAttribute('uv', new BufferAttribute(uvs, 2).copyVector2sArray(geometry.uvs));\n    }\n\n    if (geometry.uvs2.length > 0) {\n      var uvs2 = new Float32Array(geometry.uvs2.length * 2);\n      this.setAttribute('uv2', new BufferAttribute(uvs2, 2).copyVector2sArray(geometry.uvs2));\n    } // groups\n\n\n    this.groups = geometry.groups; // morphs\n\n    for (var name in false) {\n      var array = [];\n      var morphTargets = false[name];\n\n      for (var i = 0, l = morphTargets.length; i < l; i++) {\n        var morphTarget = morphTargets[i];\n        var attribute = new Float32BufferAttribute(morphTarget.data.length * 3, 3);\n        attribute.name = morphTarget.name;\n        array.push(attribute.copyVector3sArray(morphTarget.data));\n      }\n\n      this.morphAttributes[name] = array;\n    } // skinning\n\n\n    if (geometry.skinIndices.length > 0) {\n      var skinIndices = new Float32BufferAttribute(geometry.skinIndices.length * 4, 4);\n      this.setAttribute('skinIndex', skinIndices.copyVector4sArray(geometry.skinIndices));\n    }\n\n    if (geometry.skinWeights.length > 0) {\n      var skinWeights = new Float32BufferAttribute(geometry.skinWeights.length * 4, 4);\n      this.setAttribute('skinWeight', skinWeights.copyVector4sArray(geometry.skinWeights));\n    } //\n\n\n    if (geometry.boundingSphere !== null) {\n      this.boundingSphere = geometry.boundingSphere.clone();\n    }\n\n    if (geometry.boundingBox !== null) {\n      this.boundingBox = geometry.boundingBox.clone();\n    }\n\n    return this;\n  },\n  computeBoundingBox: function () {\n    if (this.boundingBox === null) {\n      this.boundingBox = new Box3();\n    }\n\n    var position = this.attributes.position;\n    var morphAttributesPosition = this.morphAttributes.position;\n\n    if (position !== undefined) {\n      this.boundingBox.setFromBufferAttribute(position); // process morph attributes if present\n\n      if (morphAttributesPosition) {\n        for (var i = 0, il = morphAttributesPosition.length; i < il; i++) {\n          var morphAttribute = morphAttributesPosition[i];\n\n          _box$2.setFromBufferAttribute(morphAttribute);\n\n          if (this.morphTargetsRelative) {\n            _vector$4.addVectors(this.boundingBox.min, _box$2.min);\n\n            this.boundingBox.expandByPoint(_vector$4);\n\n            _vector$4.addVectors(this.boundingBox.max, _box$2.max);\n\n            this.boundingBox.expandByPoint(_vector$4);\n          } else {\n            this.boundingBox.expandByPoint(_box$2.min);\n            this.boundingBox.expandByPoint(_box$2.max);\n          }\n        }\n      }\n    } else {\n      this.boundingBox.makeEmpty();\n    }\n\n    if (isNaN(this.boundingBox.min.x) || isNaN(this.boundingBox.min.y) || isNaN(this.boundingBox.min.z)) {\n      console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The \"position\" attribute is likely to have NaN values.', this);\n    }\n  },\n  computeBoundingSphere: function () {\n    if (this.boundingSphere === null) {\n      this.boundingSphere = new Sphere();\n    }\n\n    var position = this.attributes.position;\n    var morphAttributesPosition = this.morphAttributes.position;\n\n    if (position) {\n      // first, find the center of the bounding sphere\n      var center = this.boundingSphere.center;\n\n      _box$2.setFromBufferAttribute(position); // process morph attributes if present\n\n\n      if (morphAttributesPosition) {\n        for (var i = 0, il = morphAttributesPosition.length; i < il; i++) {\n          var morphAttribute = morphAttributesPosition[i];\n\n          _boxMorphTargets.setFromBufferAttribute(morphAttribute);\n\n          if (this.morphTargetsRelative) {\n            _vector$4.addVectors(_box$2.min, _boxMorphTargets.min);\n\n            _box$2.expandByPoint(_vector$4);\n\n            _vector$4.addVectors(_box$2.max, _boxMorphTargets.max);\n\n            _box$2.expandByPoint(_vector$4);\n          } else {\n            _box$2.expandByPoint(_boxMorphTargets.min);\n\n            _box$2.expandByPoint(_boxMorphTargets.max);\n          }\n        }\n      }\n\n      _box$2.getCenter(center); // second, try to find a boundingSphere with a radius smaller than the\n      // boundingSphere of the boundingBox: sqrt(3) smaller in the best case\n\n\n      var maxRadiusSq = 0;\n\n      for (var i = 0, il = position.count; i < il; i++) {\n        _vector$4.fromBufferAttribute(position, i);\n\n        maxRadiusSq = Math.max(maxRadiusSq, center.distanceToSquared(_vector$4));\n      } // process morph attributes if present\n\n\n      if (morphAttributesPosition) {\n        for (var i = 0, il = morphAttributesPosition.length; i < il; i++) {\n          var morphAttribute = morphAttributesPosition[i];\n          var morphTargetsRelative = this.morphTargetsRelative;\n\n          for (var j = 0, jl = morphAttribute.count; j < jl; j++) {\n            _vector$4.fromBufferAttribute(morphAttribute, j);\n\n            if (morphTargetsRelative) {\n              _offset.fromBufferAttribute(position, j);\n\n              _vector$4.add(_offset);\n            }\n\n            maxRadiusSq = Math.max(maxRadiusSq, center.distanceToSquared(_vector$4));\n          }\n        }\n      }\n\n      this.boundingSphere.radius = Math.sqrt(maxRadiusSq);\n\n      if (isNaN(this.boundingSphere.radius)) {\n        console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The \"position\" attribute is likely to have NaN values.', this);\n      }\n    }\n  },\n  computeFaceNormals: function () {// backwards compatibility\n  },\n  computeVertexNormals: function () {\n    var index = this.index;\n    var attributes = this.attributes;\n\n    if (attributes.position) {\n      var positions = attributes.position.array;\n\n      if (attributes.normal === undefined) {\n        this.setAttribute('normal', new BufferAttribute(new Float32Array(positions.length), 3));\n      } else {\n        // reset existing normals to zero\n        var array = attributes.normal.array;\n\n        for (var i = 0, il = array.length; i < il; i++) {\n          array[i] = 0;\n        }\n      }\n\n      var normals = attributes.normal.array;\n      var vA, vB, vC;\n      var pA = new Vector3(),\n          pB = new Vector3(),\n          pC = new Vector3();\n      var cb = new Vector3(),\n          ab = new Vector3(); // indexed elements\n\n      if (index) {\n        var indices = index.array;\n\n        for (var i = 0, il = index.count; i < il; i += 3) {\n          vA = indices[i + 0] * 3;\n          vB = indices[i + 1] * 3;\n          vC = indices[i + 2] * 3;\n          pA.fromArray(positions, vA);\n          pB.fromArray(positions, vB);\n          pC.fromArray(positions, vC);\n          cb.subVectors(pC, pB);\n          ab.subVectors(pA, pB);\n          cb.cross(ab);\n          normals[vA] += cb.x;\n          normals[vA + 1] += cb.y;\n          normals[vA + 2] += cb.z;\n          normals[vB] += cb.x;\n          normals[vB + 1] += cb.y;\n          normals[vB + 2] += cb.z;\n          normals[vC] += cb.x;\n          normals[vC + 1] += cb.y;\n          normals[vC + 2] += cb.z;\n        }\n      } else {\n        // non-indexed elements (unconnected triangle soup)\n        for (var i = 0, il = positions.length; i < il; i += 9) {\n          pA.fromArray(positions, i);\n          pB.fromArray(positions, i + 3);\n          pC.fromArray(positions, i + 6);\n          cb.subVectors(pC, pB);\n          ab.subVectors(pA, pB);\n          cb.cross(ab);\n          normals[i] = cb.x;\n          normals[i + 1] = cb.y;\n          normals[i + 2] = cb.z;\n          normals[i + 3] = cb.x;\n          normals[i + 4] = cb.y;\n          normals[i + 5] = cb.z;\n          normals[i + 6] = cb.x;\n          normals[i + 7] = cb.y;\n          normals[i + 8] = cb.z;\n        }\n      }\n\n      this.normalizeNormals();\n      attributes.normal.needsUpdate = true;\n    }\n  },\n  merge: function (geometry, offset) {\n    if (!(geometry && geometry.isBufferGeometry)) {\n      console.error('THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.', geometry);\n      return;\n    }\n\n    if (offset === undefined) {\n      offset = 0;\n      console.warn('THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. ' + 'Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge.');\n    }\n\n    var attributes = this.attributes;\n\n    for (var key in attributes) {\n      if (geometry.attributes[key] === undefined) continue;\n      var attribute1 = attributes[key];\n      var attributeArray1 = attribute1.array;\n      var attribute2 = geometry.attributes[key];\n      var attributeArray2 = attribute2.array;\n      var attributeOffset = attribute2.itemSize * offset;\n      var length = Math.min(attributeArray2.length, attributeArray1.length - attributeOffset);\n\n      for (var i = 0, j = attributeOffset; i < length; i++, j++) {\n        attributeArray1[j] = attributeArray2[i];\n      }\n    }\n\n    return this;\n  },\n  normalizeNormals: function () {\n    var normals = this.attributes.normal;\n\n    for (var i = 0, il = normals.count; i < il; i++) {\n      _vector$4.x = normals.getX(i);\n      _vector$4.y = normals.getY(i);\n      _vector$4.z = normals.getZ(i);\n\n      _vector$4.normalize();\n\n      normals.setXYZ(i, _vector$4.x, _vector$4.y, _vector$4.z);\n    }\n  },\n  toNonIndexed: function () {\n    function convertBufferAttribute(attribute, indices) {\n      var array = attribute.array;\n      var itemSize = attribute.itemSize;\n      var array2 = new array.constructor(indices.length * itemSize);\n      var index = 0,\n          index2 = 0;\n\n      for (var i = 0, l = indices.length; i < l; i++) {\n        index = indices[i] * itemSize;\n\n        for (var j = 0; j < itemSize; j++) {\n          array2[index2++] = array[index++];\n        }\n      }\n\n      return new BufferAttribute(array2, itemSize);\n    } //\n\n\n    if (this.index === null) {\n      console.warn('THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed.');\n      return this;\n    }\n\n    var geometry2 = new BufferGeometry();\n    var indices = this.index.array;\n    var attributes = this.attributes; // attributes\n\n    for (var name in attributes) {\n      var attribute = attributes[name];\n      var newAttribute = convertBufferAttribute(attribute, indices);\n      geometry2.setAttribute(name, newAttribute);\n    } // morph attributes\n\n\n    var morphAttributes = this.morphAttributes;\n\n    for (name in morphAttributes) {\n      var morphArray = [];\n      var morphAttribute = morphAttributes[name]; // morphAttribute: array of Float32BufferAttributes\n\n      for (var i = 0, il = morphAttribute.length; i < il; i++) {\n        var attribute = morphAttribute[i];\n        var newAttribute = convertBufferAttribute(attribute, indices);\n        morphArray.push(newAttribute);\n      }\n\n      geometry2.morphAttributes[name] = morphArray;\n    }\n\n    geometry2.morphTargetsRelative = this.morphTargetsRelative; // groups\n\n    var groups = this.groups;\n\n    for (var i = 0, l = groups.length; i < l; i++) {\n      var group = groups[i];\n      geometry2.addGroup(group.start, group.count, group.materialIndex);\n    }\n\n    return geometry2;\n  },\n  toJSON: function () {\n    var data = {\n      metadata: {\n        version: 4.5,\n        type: 'BufferGeometry',\n        generator: 'BufferGeometry.toJSON'\n      }\n    }; // standard BufferGeometry serialization\n\n    data.uuid = this.uuid;\n    data.type = this.type;\n    if (this.name !== '') data.name = this.name;\n    if (Object.keys(this.userData).length > 0) data.userData = this.userData;\n\n    if (this.parameters !== undefined) {\n      var parameters = this.parameters;\n\n      for (var key in parameters) {\n        if (parameters[key] !== undefined) data[key] = parameters[key];\n      }\n\n      return data;\n    }\n\n    data.data = {\n      attributes: {}\n    };\n    var index = this.index;\n\n    if (index !== null) {\n      data.data.index = {\n        type: index.array.constructor.name,\n        array: Array.prototype.slice.call(index.array)\n      };\n    }\n\n    var attributes = this.attributes;\n\n    for (var key in attributes) {\n      var attribute = attributes[key];\n      var attributeData = attribute.toJSON();\n      if (attribute.name !== '') attributeData.name = attribute.name;\n      data.data.attributes[key] = attributeData;\n    }\n\n    var morphAttributes = {};\n    var hasMorphAttributes = false;\n\n    for (var key in this.morphAttributes) {\n      var attributeArray = this.morphAttributes[key];\n      var array = [];\n\n      for (var i = 0, il = attributeArray.length; i < il; i++) {\n        var attribute = attributeArray[i];\n        var attributeData = attribute.toJSON();\n        if (attribute.name !== '') attributeData.name = attribute.name;\n        array.push(attributeData);\n      }\n\n      if (array.length > 0) {\n        morphAttributes[key] = array;\n        hasMorphAttributes = true;\n      }\n    }\n\n    if (hasMorphAttributes) {\n      data.data.morphAttributes = morphAttributes;\n      data.data.morphTargetsRelative = this.morphTargetsRelative;\n    }\n\n    var groups = this.groups;\n\n    if (groups.length > 0) {\n      data.data.groups = JSON.parse(JSON.stringify(groups));\n    }\n\n    var boundingSphere = this.boundingSphere;\n\n    if (boundingSphere !== null) {\n      data.data.boundingSphere = {\n        center: boundingSphere.center.toArray(),\n        radius: boundingSphere.radius\n      };\n    }\n\n    return data;\n  },\n  clone: function () {\n    /*\n     // Handle primitives\n    \t var parameters = this.parameters;\n    \t if ( parameters !== undefined ) {\n    \t var values = [];\n    \t for ( var key in parameters ) {\n    \t values.push( parameters[ key ] );\n    \t }\n    \t var geometry = Object.create( this.constructor.prototype );\n     this.constructor.apply( geometry, values );\n     return geometry;\n    \t }\n    \t return new this.constructor().copy( this );\n     */\n    return new BufferGeometry().copy(this);\n  },\n  copy: function (source) {\n    var name, i, l; // reset\n\n    this.index = null;\n    this.attributes = {};\n    this.morphAttributes = {};\n    this.groups = [];\n    this.boundingBox = null;\n    this.boundingSphere = null; // name\n\n    this.name = source.name; // index\n\n    var index = source.index;\n\n    if (index !== null) {\n      this.setIndex(index.clone());\n    } // attributes\n\n\n    var attributes = source.attributes;\n\n    for (name in attributes) {\n      var attribute = attributes[name];\n      this.setAttribute(name, attribute.clone());\n    } // morph attributes\n\n\n    var morphAttributes = source.morphAttributes;\n\n    for (name in morphAttributes) {\n      var array = [];\n      var morphAttribute = morphAttributes[name]; // morphAttribute: array of Float32BufferAttributes\n\n      for (i = 0, l = morphAttribute.length; i < l; i++) {\n        array.push(morphAttribute[i].clone());\n      }\n\n      this.morphAttributes[name] = array;\n    }\n\n    this.morphTargetsRelative = source.morphTargetsRelative; // groups\n\n    var groups = source.groups;\n\n    for (i = 0, l = groups.length; i < l; i++) {\n      var group = groups[i];\n      this.addGroup(group.start, group.count, group.materialIndex);\n    } // bounding box\n\n\n    var boundingBox = source.boundingBox;\n\n    if (boundingBox !== null) {\n      this.boundingBox = boundingBox.clone();\n    } // bounding sphere\n\n\n    var boundingSphere = source.boundingSphere;\n\n    if (boundingSphere !== null) {\n      this.boundingSphere = boundingSphere.clone();\n    } // draw range\n\n\n    this.drawRange.start = source.drawRange.start;\n    this.drawRange.count = source.drawRange.count; // user data\n\n    this.userData = source.userData;\n    return this;\n  },\n  dispose: function () {\n    this.dispatchEvent({\n      type: 'dispose'\n    });\n  }\n});\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author mikael emtinger / http://gomo.se/\n * @author jonobr1 / http://jonobr1.com/\n */\n\nvar _inverseMatrix = new Matrix4();\n\nvar _ray = new Ray();\n\nvar _sphere = new Sphere();\n\nvar _vA = new Vector3();\n\nvar _vB = new Vector3();\n\nvar _vC = new Vector3();\n\nvar _uvA = new Vector2();\n\nvar _uvB = new Vector2();\n\nvar _uvC = new Vector2();\n\nvar _intersectionPoint = new Vector3();\n\nvar _intersectionPointWorld = new Vector3();\n\nfunction Mesh(geometry, material) {\n  Object3D.call(this);\n  this.type = 'Mesh';\n  this.geometry = geometry !== undefined ? geometry : new BufferGeometry();\n  this.material = material !== undefined ? material : new MeshBasicMaterial();\n  this.updateMorphTargets();\n}\n\nMesh.prototype = Object.assign(Object.create(Object3D.prototype), {\n  constructor: Mesh,\n  isMesh: true,\n  copy: function (source) {\n    Object3D.prototype.copy.call(this, source);\n\n    if (source.morphTargetInfluences !== undefined) {\n      this.morphTargetInfluences = source.morphTargetInfluences.slice();\n    }\n\n    if (source.morphTargetDictionary !== undefined) {\n      this.morphTargetDictionary = Object.assign({}, source.morphTargetDictionary);\n    }\n\n    return this;\n  },\n  updateMorphTargets: function () {\n    var geometry = this.geometry;\n    var m, ml, name;\n\n    if (geometry.isBufferGeometry) {\n      var morphAttributes = geometry.morphAttributes;\n      var keys = Object.keys(morphAttributes);\n\n      if (keys.length > 0) {\n        var morphAttribute = morphAttributes[keys[0]];\n\n        if (morphAttribute !== undefined) {\n          this.morphTargetInfluences = [];\n          this.morphTargetDictionary = {};\n\n          for (m = 0, ml = morphAttribute.length; m < ml; m++) {\n            name = morphAttribute[m].name || String(m);\n            this.morphTargetInfluences.push(0);\n            this.morphTargetDictionary[name] = m;\n          }\n        }\n      }\n    } else {\n      var morphTargets = false;\n\n      if (morphTargets !== undefined && morphTargets.length > 0) {\n        console.error('THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.');\n      }\n    }\n  },\n  raycast: function (raycaster, intersects) {\n    var geometry = this.geometry;\n    var material = this.material;\n    var matrixWorld = this.matrixWorld;\n    if (material === undefined) return; // Checking boundingSphere distance to ray\n\n    if (geometry.boundingSphere === null) geometry.computeBoundingSphere();\n\n    _sphere.copy(geometry.boundingSphere);\n\n    _sphere.applyMatrix4(matrixWorld);\n\n    if (raycaster.ray.intersectsSphere(_sphere) === false) return; //\n\n    _inverseMatrix.getInverse(matrixWorld);\n\n    _ray.copy(raycaster.ray).applyMatrix4(_inverseMatrix); // Check boundingBox before continuing\n\n\n    if (geometry.boundingBox !== null) {\n      if (_ray.intersectsBox(geometry.boundingBox) === false) return;\n    }\n\n    var intersection;\n\n    if (geometry.isBufferGeometry) {\n      var a, b, c;\n      var index = geometry.index;\n      var position = geometry.attributes.position;\n      var morphPosition = geometry.morphAttributes.position;\n      var morphTargetsRelative = geometry.morphTargetsRelative;\n      var uv = geometry.attributes.uv;\n      var uv2 = geometry.attributes.uv2;\n      var groups = geometry.groups;\n      var drawRange = geometry.drawRange;\n      var i, j, il, jl;\n      var group, groupMaterial;\n      var start, end;\n\n      if (index !== null) {\n        // indexed buffer geometry\n        if (Array.isArray(material)) {\n          for (i = 0, il = groups.length; i < il; i++) {\n            group = groups[i];\n            groupMaterial = material[group.materialIndex];\n            start = Math.max(group.start, drawRange.start);\n            end = Math.min(group.start + group.count, drawRange.start + drawRange.count);\n\n            for (j = start, jl = end; j < jl; j += 3) {\n              a = index.getX(j);\n              b = index.getX(j + 1);\n              c = index.getX(j + 2);\n              intersection = checkBufferGeometryIntersection(this, groupMaterial, raycaster, _ray, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c);\n\n              if (intersection) {\n                intersection.faceIndex = Math.floor(j / 3); // triangle number in indexed buffer semantics\n\n                intersection.face.materialIndex = group.materialIndex;\n                intersects.push(intersection);\n              }\n            }\n          }\n        } else {\n          start = Math.max(0, drawRange.start);\n          end = Math.min(index.count, drawRange.start + drawRange.count);\n\n          for (i = start, il = end; i < il; i += 3) {\n            a = index.getX(i);\n            b = index.getX(i + 1);\n            c = index.getX(i + 2);\n            intersection = checkBufferGeometryIntersection(this, material, raycaster, _ray, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c);\n\n            if (intersection) {\n              intersection.faceIndex = Math.floor(i / 3); // triangle number in indexed buffer semantics\n\n              intersects.push(intersection);\n            }\n          }\n        }\n      } else if (position !== undefined) {\n        // non-indexed buffer geometry\n        if (Array.isArray(material)) {\n          for (i = 0, il = groups.length; i < il; i++) {\n            group = groups[i];\n            groupMaterial = material[group.materialIndex];\n            start = Math.max(group.start, drawRange.start);\n            end = Math.min(group.start + group.count, drawRange.start + drawRange.count);\n\n            for (j = start, jl = end; j < jl; j += 3) {\n              a = j;\n              b = j + 1;\n              c = j + 2;\n              intersection = checkBufferGeometryIntersection(this, groupMaterial, raycaster, _ray, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c);\n\n              if (intersection) {\n                intersection.faceIndex = Math.floor(j / 3); // triangle number in non-indexed buffer semantics\n\n                intersection.face.materialIndex = group.materialIndex;\n                intersects.push(intersection);\n              }\n            }\n          }\n        } else {\n          start = Math.max(0, drawRange.start);\n          end = Math.min(position.count, drawRange.start + drawRange.count);\n\n          for (i = start, il = end; i < il; i += 3) {\n            a = i;\n            b = i + 1;\n            c = i + 2;\n            intersection = checkBufferGeometryIntersection(this, material, raycaster, _ray, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c);\n\n            if (intersection) {\n              intersection.faceIndex = Math.floor(i / 3); // triangle number in non-indexed buffer semantics\n\n              intersects.push(intersection);\n            }\n          }\n        }\n      }\n    } else if (geometry.isGeometry) {\n      var fvA, fvB, fvC;\n      var isMultiMaterial = Array.isArray(material);\n      var vertices = geometry.vertices;\n      var faces = geometry.faces;\n      var uvs;\n      var faceVertexUvs = geometry.faceVertexUvs[0];\n      if (faceVertexUvs.length > 0) uvs = faceVertexUvs;\n\n      for (var f = 0, fl = faces.length; f < fl; f++) {\n        var face = faces[f];\n        var faceMaterial = isMultiMaterial ? material[face.materialIndex] : material;\n        if (faceMaterial === undefined) continue;\n        fvA = vertices[face.a];\n        fvB = vertices[face.b];\n        fvC = vertices[face.c];\n        intersection = checkIntersection(this, faceMaterial, raycaster, _ray, fvA, fvB, fvC, _intersectionPoint);\n\n        if (intersection) {\n          if (uvs && uvs[f]) {\n            var uvs_f = uvs[f];\n\n            _uvA.copy(uvs_f[0]);\n\n            _uvB.copy(uvs_f[1]);\n\n            _uvC.copy(uvs_f[2]);\n\n            intersection.uv = Triangle.getUV(_intersectionPoint, fvA, fvB, fvC, _uvA, _uvB, _uvC, new Vector2());\n          }\n\n          intersection.face = face;\n          intersection.faceIndex = f;\n          intersects.push(intersection);\n        }\n      }\n    }\n  },\n  clone: function () {\n    return new this.constructor(this.geometry, this.material).copy(this);\n  }\n});\n\nfunction checkIntersection(object, material, raycaster, ray, pA, pB, pC, point) {\n  var intersect;\n\n  if (material.side === BackSide) {\n    intersect = ray.intersectTriangle(pC, pB, pA, true, point);\n  } else {\n    intersect = ray.intersectTriangle(pA, pB, pC, material.side !== DoubleSide, point);\n  }\n\n  if (intersect === null) return null;\n\n  _intersectionPointWorld.copy(point);\n\n  _intersectionPointWorld.applyMatrix4(object.matrixWorld);\n\n  var distance = raycaster.ray.origin.distanceTo(_intersectionPointWorld);\n  if (distance < raycaster.near || distance > raycaster.far) return null;\n  return {\n    distance: distance,\n    point: _intersectionPointWorld.clone(),\n    object: object\n  };\n}\n\nfunction checkBufferGeometryIntersection(object, material, raycaster, ray, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c) {\n  _vA.fromBufferAttribute(position, a);\n\n  _vB.fromBufferAttribute(position, b);\n\n  _vC.fromBufferAttribute(position, c);\n\n  var morphInfluences = object.morphTargetInfluences;\n  var intersection = checkIntersection(object, material, raycaster, ray, _vA, _vB, _vC, _intersectionPoint);\n\n  if (intersection) {\n    if (uv) {\n      _uvA.fromBufferAttribute(uv, a);\n\n      _uvB.fromBufferAttribute(uv, b);\n\n      _uvC.fromBufferAttribute(uv, c);\n\n      intersection.uv = Triangle.getUV(_intersectionPoint, _vA, _vB, _vC, _uvA, _uvB, _uvC, new Vector2());\n    }\n\n    if (uv2) {\n      _uvA.fromBufferAttribute(uv2, a);\n\n      _uvB.fromBufferAttribute(uv2, b);\n\n      _uvC.fromBufferAttribute(uv2, c);\n\n      intersection.uv2 = Triangle.getUV(_intersectionPoint, _vA, _vB, _vC, _uvA, _uvB, _uvC, new Vector2());\n    }\n\n    var face = new Face3(a, b, c);\n    Triangle.getNormal(_vA, _vB, _vC, face.normal);\n    intersection.face = face;\n  }\n\n  return intersection;\n}\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author kile / http://kile.stravaganza.org/\n * @author alteredq / http://alteredqualia.com/\n * @author mikael emtinger / http://gomo.se/\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * @author bhouston / http://clara.io\n */\n\n\nvar _geometryId = 0; // Geometry uses even numbers as Id\n\nvar _m1$3 = new Matrix4();\n\nvar _obj$1 = new Object3D();\n\nvar _offset$1 = new Vector3();\n\nfunction Geometry() {\n  Object.defineProperty(this, 'id', {\n    value: _geometryId += 2\n  });\n  this.uuid = MathUtils.generateUUID();\n  this.name = '';\n  this.type = 'Geometry';\n  this.vertices = [];\n  this.colors = [];\n  this.faces = [];\n  this.faceVertexUvs = [[]];\n  this.morphTargets = [];\n  this.morphNormals = [];\n  this.skinWeights = [];\n  this.skinIndices = [];\n  this.lineDistances = [];\n  this.boundingBox = null;\n  this.boundingSphere = null; // update flags\n\n  this.elementsNeedUpdate = false;\n  this.verticesNeedUpdate = false;\n  this.uvsNeedUpdate = false;\n  this.normalsNeedUpdate = false;\n  this.colorsNeedUpdate = false;\n  this.lineDistancesNeedUpdate = false;\n  this.groupsNeedUpdate = false;\n}\n\nGeometry.prototype = Object.assign(Object.create(EventDispatcher.prototype), {\n  constructor: Geometry,\n  isGeometry: true,\n  applyMatrix4: function (matrix) {\n    var normalMatrix = new Matrix3().getNormalMatrix(matrix);\n\n    for (var i = 0, il = this.vertices.length; i < il; i++) {\n      var vertex = this.vertices[i];\n      vertex.applyMatrix4(matrix);\n    }\n\n    for (var i = 0, il = this.faces.length; i < il; i++) {\n      var face = this.faces[i];\n      face.normal.applyMatrix3(normalMatrix).normalize();\n\n      for (var j = 0, jl = face.vertexNormals.length; j < jl; j++) {\n        face.vertexNormals[j].applyMatrix3(normalMatrix).normalize();\n      }\n    }\n\n    if (this.boundingBox !== null) {\n      this.computeBoundingBox();\n    }\n\n    if (this.boundingSphere !== null) {\n      this.computeBoundingSphere();\n    }\n\n    this.verticesNeedUpdate = true;\n    this.normalsNeedUpdate = true;\n    return this;\n  },\n  rotateX: function (angle) {\n    // rotate geometry around world x-axis\n    _m1$3.makeRotationX(angle);\n\n    this.applyMatrix4(_m1$3);\n    return this;\n  },\n  rotateY: function (angle) {\n    // rotate geometry around world y-axis\n    _m1$3.makeRotationY(angle);\n\n    this.applyMatrix4(_m1$3);\n    return this;\n  },\n  rotateZ: function (angle) {\n    // rotate geometry around world z-axis\n    _m1$3.makeRotationZ(angle);\n\n    this.applyMatrix4(_m1$3);\n    return this;\n  },\n  translate: function (x, y, z) {\n    // translate geometry\n    _m1$3.makeTranslation(x, y, z);\n\n    this.applyMatrix4(_m1$3);\n    return this;\n  },\n  scale: function (x, y, z) {\n    // scale geometry\n    _m1$3.makeScale(x, y, z);\n\n    this.applyMatrix4(_m1$3);\n    return this;\n  },\n  lookAt: function (vector) {\n    _obj$1.lookAt(vector);\n\n    _obj$1.updateMatrix();\n\n    this.applyMatrix4(_obj$1.matrix);\n    return this;\n  },\n  fromBufferGeometry: function (geometry) {\n    var scope = this;\n    var indices = geometry.index !== null ? geometry.index.array : undefined;\n    var attributes = geometry.attributes;\n\n    if (attributes.position === undefined) {\n      console.error('THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion.');\n      return this;\n    }\n\n    var positions = attributes.position.array;\n    var normals = attributes.normal !== undefined ? attributes.normal.array : undefined;\n    var colors = attributes.color !== undefined ? attributes.color.array : undefined;\n    var uvs = attributes.uv !== undefined ? attributes.uv.array : undefined;\n    var uvs2 = attributes.uv2 !== undefined ? attributes.uv2.array : undefined;\n    if (uvs2 !== undefined) this.faceVertexUvs[1] = [];\n\n    for (var i = 0; i < positions.length; i += 3) {\n      scope.vertices.push(new Vector3().fromArray(positions, i));\n\n      if (colors !== undefined) {\n        scope.colors.push(new Color().fromArray(colors, i));\n      }\n    }\n\n    function addFace(a, b, c, materialIndex) {\n      var vertexColors = colors === undefined ? [] : [scope.colors[a].clone(), scope.colors[b].clone(), scope.colors[c].clone()];\n      var vertexNormals = normals === undefined ? [] : [new Vector3().fromArray(normals, a * 3), new Vector3().fromArray(normals, b * 3), new Vector3().fromArray(normals, c * 3)];\n      var face = new Face3(a, b, c, vertexNormals, vertexColors, materialIndex);\n      scope.faces.push(face);\n\n      if (uvs !== undefined) {\n        scope.faceVertexUvs[0].push([new Vector2().fromArray(uvs, a * 2), new Vector2().fromArray(uvs, b * 2), new Vector2().fromArray(uvs, c * 2)]);\n      }\n\n      if (uvs2 !== undefined) {\n        scope.faceVertexUvs[1].push([new Vector2().fromArray(uvs2, a * 2), new Vector2().fromArray(uvs2, b * 2), new Vector2().fromArray(uvs2, c * 2)]);\n      }\n    }\n\n    var groups = geometry.groups;\n\n    if (groups.length > 0) {\n      for (var i = 0; i < groups.length; i++) {\n        var group = groups[i];\n        var start = group.start;\n        var count = group.count;\n\n        for (var j = start, jl = start + count; j < jl; j += 3) {\n          if (indices !== undefined) {\n            addFace(indices[j], indices[j + 1], indices[j + 2], group.materialIndex);\n          } else {\n            addFace(j, j + 1, j + 2, group.materialIndex);\n          }\n        }\n      }\n    } else {\n      if (indices !== undefined) {\n        for (var i = 0; i < indices.length; i += 3) {\n          addFace(indices[i], indices[i + 1], indices[i + 2]);\n        }\n      } else {\n        for (var i = 0; i < positions.length / 3; i += 3) {\n          addFace(i, i + 1, i + 2);\n        }\n      }\n    }\n\n    this.computeFaceNormals();\n\n    if (geometry.boundingBox !== null) {\n      this.boundingBox = geometry.boundingBox.clone();\n    }\n\n    if (geometry.boundingSphere !== null) {\n      this.boundingSphere = geometry.boundingSphere.clone();\n    }\n\n    return this;\n  },\n  center: function () {\n    this.computeBoundingBox();\n    this.boundingBox.getCenter(_offset$1).negate();\n    this.translate(_offset$1.x, _offset$1.y, _offset$1.z);\n    return this;\n  },\n  normalize: function () {\n    this.computeBoundingSphere();\n    var center = this.boundingSphere.center;\n    var radius = this.boundingSphere.radius;\n    var s = radius === 0 ? 1 : 1.0 / radius;\n    var matrix = new Matrix4();\n    matrix.set(s, 0, 0, -s * center.x, 0, s, 0, -s * center.y, 0, 0, s, -s * center.z, 0, 0, 0, 1);\n    this.applyMatrix4(matrix);\n    return this;\n  },\n  computeFaceNormals: function () {\n    var cb = new Vector3(),\n        ab = new Vector3();\n\n    for (var f = 0, fl = this.faces.length; f < fl; f++) {\n      var face = this.faces[f];\n      var vA = this.vertices[face.a];\n      var vB = this.vertices[face.b];\n      var vC = this.vertices[face.c];\n      cb.subVectors(vC, vB);\n      ab.subVectors(vA, vB);\n      cb.cross(ab);\n      cb.normalize();\n      face.normal.copy(cb);\n    }\n  },\n  computeVertexNormals: function (areaWeighted) {\n    if (areaWeighted === undefined) areaWeighted = true;\n    var v, vl, f, fl, face, vertices;\n    vertices = new Array(this.vertices.length);\n\n    for (v = 0, vl = this.vertices.length; v < vl; v++) {\n      vertices[v] = new Vector3();\n    }\n\n    if (areaWeighted) {\n      // vertex normals weighted by triangle areas\n      // http://www.iquilezles.org/www/articles/normals/normals.htm\n      var vA, vB, vC;\n      var cb = new Vector3(),\n          ab = new Vector3();\n\n      for (f = 0, fl = this.faces.length; f < fl; f++) {\n        face = this.faces[f];\n        vA = this.vertices[face.a];\n        vB = this.vertices[face.b];\n        vC = this.vertices[face.c];\n        cb.subVectors(vC, vB);\n        ab.subVectors(vA, vB);\n        cb.cross(ab);\n        vertices[face.a].add(cb);\n        vertices[face.b].add(cb);\n        vertices[face.c].add(cb);\n      }\n    } else {\n      this.computeFaceNormals();\n\n      for (f = 0, fl = this.faces.length; f < fl; f++) {\n        face = this.faces[f];\n        vertices[face.a].add(face.normal);\n        vertices[face.b].add(face.normal);\n        vertices[face.c].add(face.normal);\n      }\n    }\n\n    for (v = 0, vl = this.vertices.length; v < vl; v++) {\n      vertices[v].normalize();\n    }\n\n    for (f = 0, fl = this.faces.length; f < fl; f++) {\n      face = this.faces[f];\n      var vertexNormals = face.vertexNormals;\n\n      if (vertexNormals.length === 3) {\n        vertexNormals[0].copy(vertices[face.a]);\n        vertexNormals[1].copy(vertices[face.b]);\n        vertexNormals[2].copy(vertices[face.c]);\n      } else {\n        vertexNormals[0] = vertices[face.a].clone();\n        vertexNormals[1] = vertices[face.b].clone();\n        vertexNormals[2] = vertices[face.c].clone();\n      }\n    }\n\n    if (this.faces.length > 0) {\n      this.normalsNeedUpdate = true;\n    }\n  },\n  computeFlatVertexNormals: function () {\n    var f, fl, face;\n    this.computeFaceNormals();\n\n    for (f = 0, fl = this.faces.length; f < fl; f++) {\n      face = this.faces[f];\n      var vertexNormals = face.vertexNormals;\n\n      if (vertexNormals.length === 3) {\n        vertexNormals[0].copy(face.normal);\n        vertexNormals[1].copy(face.normal);\n        vertexNormals[2].copy(face.normal);\n      } else {\n        vertexNormals[0] = face.normal.clone();\n        vertexNormals[1] = face.normal.clone();\n        vertexNormals[2] = face.normal.clone();\n      }\n    }\n\n    if (this.faces.length > 0) {\n      this.normalsNeedUpdate = true;\n    }\n  },\n  computeMorphNormals: function () {\n    var i, il, f, fl, face; // save original normals\n    // - create temp variables on first access\n    //   otherwise just copy (for faster repeated calls)\n\n    for (f = 0, fl = this.faces.length; f < fl; f++) {\n      face = this.faces[f];\n\n      if (!face.__originalFaceNormal) {\n        face.__originalFaceNormal = face.normal.clone();\n      } else {\n        face.__originalFaceNormal.copy(face.normal);\n      }\n\n      if (!face.__originalVertexNormals) face.__originalVertexNormals = [];\n\n      for (i = 0, il = face.vertexNormals.length; i < il; i++) {\n        if (!face.__originalVertexNormals[i]) {\n          face.__originalVertexNormals[i] = face.vertexNormals[i].clone();\n        } else {\n          face.__originalVertexNormals[i].copy(face.vertexNormals[i]);\n        }\n      }\n    } // use temp geometry to compute face and vertex normals for each morph\n\n\n    var tmpGeo = new Geometry();\n    tmpGeo.faces = this.faces;\n\n    for (i = 0, il = false.length; i < il; i++) {\n      // create on first access\n      if (!this.morphNormals[i]) {\n        this.morphNormals[i] = {};\n        this.morphNormals[i].faceNormals = [];\n        this.morphNormals[i].vertexNormals = [];\n        var dstNormalsFace = this.morphNormals[i].faceNormals;\n        var dstNormalsVertex = this.morphNormals[i].vertexNormals;\n        var faceNormal, vertexNormals;\n\n        for (f = 0, fl = this.faces.length; f < fl; f++) {\n          faceNormal = new Vector3();\n          vertexNormals = {\n            a: new Vector3(),\n            b: new Vector3(),\n            c: new Vector3()\n          };\n          dstNormalsFace.push(faceNormal);\n          dstNormalsVertex.push(vertexNormals);\n        }\n      }\n\n      var morphNormals = this.morphNormals[i]; // set vertices to morph target\n\n      tmpGeo.vertices = false[i].vertices; // compute morph normals\n\n      tmpGeo.computeFaceNormals();\n      tmpGeo.computeVertexNormals(); // store morph normals\n\n      var faceNormal, vertexNormals;\n\n      for (f = 0, fl = this.faces.length; f < fl; f++) {\n        face = this.faces[f];\n        faceNormal = morphNormals.faceNormals[f];\n        vertexNormals = morphNormals.vertexNormals[f];\n        faceNormal.copy(face.normal);\n        vertexNormals.a.copy(face.vertexNormals[0]);\n        vertexNormals.b.copy(face.vertexNormals[1]);\n        vertexNormals.c.copy(face.vertexNormals[2]);\n      }\n    } // restore original normals\n\n\n    for (f = 0, fl = this.faces.length; f < fl; f++) {\n      face = this.faces[f];\n      face.normal = face.__originalFaceNormal;\n      face.vertexNormals = face.__originalVertexNormals;\n    }\n  },\n  computeBoundingBox: function () {\n    if (this.boundingBox === null) {\n      this.boundingBox = new Box3();\n    }\n\n    this.boundingBox.setFromPoints(this.vertices);\n  },\n  computeBoundingSphere: function () {\n    if (this.boundingSphere === null) {\n      this.boundingSphere = new Sphere();\n    }\n\n    this.boundingSphere.setFromPoints(this.vertices);\n  },\n  merge: function (geometry, matrix, materialIndexOffset) {\n    if (!(geometry && geometry.isGeometry)) {\n      console.error('THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.', geometry);\n      return;\n    }\n\n    var normalMatrix,\n        vertexOffset = this.vertices.length,\n        vertices1 = this.vertices,\n        vertices2 = geometry.vertices,\n        faces1 = this.faces,\n        faces2 = geometry.faces,\n        colors1 = this.colors,\n        colors2 = geometry.colors;\n    if (materialIndexOffset === undefined) materialIndexOffset = 0;\n\n    if (matrix !== undefined) {\n      normalMatrix = new Matrix3().getNormalMatrix(matrix);\n    } // vertices\n\n\n    for (var i = 0, il = vertices2.length; i < il; i++) {\n      var vertex = vertices2[i];\n      var vertexCopy = vertex.clone();\n      if (matrix !== undefined) vertexCopy.applyMatrix4(matrix);\n      vertices1.push(vertexCopy);\n    } // colors\n\n\n    for (var i = 0, il = colors2.length; i < il; i++) {\n      colors1.push(colors2[i].clone());\n    } // faces\n\n\n    for (i = 0, il = faces2.length; i < il; i++) {\n      var face = faces2[i],\n          faceCopy,\n          normal,\n          color,\n          faceVertexNormals = face.vertexNormals,\n          faceVertexColors = face.vertexColors;\n      faceCopy = new Face3(face.a + vertexOffset, face.b + vertexOffset, face.c + vertexOffset);\n      faceCopy.normal.copy(face.normal);\n\n      if (normalMatrix !== undefined) {\n        faceCopy.normal.applyMatrix3(normalMatrix).normalize();\n      }\n\n      for (var j = 0, jl = faceVertexNormals.length; j < jl; j++) {\n        normal = faceVertexNormals[j].clone();\n\n        if (normalMatrix !== undefined) {\n          normal.applyMatrix3(normalMatrix).normalize();\n        }\n\n        faceCopy.vertexNormals.push(normal);\n      }\n\n      faceCopy.color.copy(face.color);\n\n      for (var j = 0, jl = faceVertexColors.length; j < jl; j++) {\n        color = faceVertexColors[j];\n        faceCopy.vertexColors.push(color.clone());\n      }\n\n      faceCopy.materialIndex = face.materialIndex + materialIndexOffset;\n      faces1.push(faceCopy);\n    } // uvs\n\n\n    for (var i = 0, il = geometry.faceVertexUvs.length; i < il; i++) {\n      var faceVertexUvs2 = geometry.faceVertexUvs[i];\n      if (this.faceVertexUvs[i] === undefined) this.faceVertexUvs[i] = [];\n\n      for (var j = 0, jl = faceVertexUvs2.length; j < jl; j++) {\n        var uvs2 = faceVertexUvs2[j],\n            uvsCopy = [];\n\n        for (var k = 0, kl = uvs2.length; k < kl; k++) {\n          uvsCopy.push(uvs2[k].clone());\n        }\n\n        this.faceVertexUvs[i].push(uvsCopy);\n      }\n    }\n  },\n  mergeMesh: function (mesh) {\n    if (!(mesh && mesh.isMesh)) {\n      console.error('THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.', mesh);\n      return;\n    }\n\n    if (mesh.matrixAutoUpdate) mesh.updateMatrix();\n    this.merge(mesh.geometry, mesh.matrix);\n  },\n\n  /*\n   * Checks for duplicate vertices with hashmap.\n   * Duplicated vertices are removed\n   * and faces' vertices are updated.\n   */\n  mergeVertices: function () {\n    var verticesMap = {}; // Hashmap for looking up vertices by position coordinates (and making sure they are unique)\n\n    var unique = [],\n        changes = [];\n    var v, key;\n    var precisionPoints = 4; // number of decimal points, e.g. 4 for epsilon of 0.0001\n\n    var precision = Math.pow(10, precisionPoints);\n    var i, il, face;\n    var indices, j, jl;\n\n    for (i = 0, il = this.vertices.length; i < il; i++) {\n      v = this.vertices[i];\n      key = Math.round(v.x * precision) + '_' + Math.round(v.y * precision) + '_' + Math.round(v.z * precision);\n\n      if (verticesMap[key] === undefined) {\n        verticesMap[key] = i;\n        unique.push(this.vertices[i]);\n        changes[i] = unique.length - 1;\n      } else {\n        //console.log('Duplicate vertex found. ', i, ' could be using ', verticesMap[key]);\n        changes[i] = changes[verticesMap[key]];\n      }\n    } // if faces are completely degenerate after merging vertices, we\n    // have to remove them from the geometry.\n\n\n    var faceIndicesToRemove = [];\n\n    for (i = 0, il = this.faces.length; i < il; i++) {\n      face = this.faces[i];\n      face.a = changes[face.a];\n      face.b = changes[face.b];\n      face.c = changes[face.c];\n      indices = [face.a, face.b, face.c]; // if any duplicate vertices are found in a Face3\n      // we have to remove the face as nothing can be saved\n\n      for (var n = 0; n < 3; n++) {\n        if (indices[n] === indices[(n + 1) % 3]) {\n          faceIndicesToRemove.push(i);\n          break;\n        }\n      }\n    }\n\n    for (i = faceIndicesToRemove.length - 1; i >= 0; i--) {\n      var idx = faceIndicesToRemove[i];\n      this.faces.splice(idx, 1);\n\n      for (j = 0, jl = this.faceVertexUvs.length; j < jl; j++) {\n        this.faceVertexUvs[j].splice(idx, 1);\n      }\n    } // Use unique set of vertices\n\n\n    var diff = this.vertices.length - unique.length;\n    this.vertices = unique;\n    return diff;\n  },\n  setFromPoints: function (points) {\n    this.vertices = [];\n\n    for (var i = 0, l = points.length; i < l; i++) {\n      var point = points[i];\n      this.vertices.push(new Vector3(point.x, point.y, point.z || 0));\n    }\n\n    return this;\n  },\n  sortFacesByMaterialIndex: function () {\n    var faces = this.faces;\n    var length = faces.length; // tag faces\n\n    for (var i = 0; i < length; i++) {\n      faces[i]._id = i;\n    } // sort faces\n\n\n    function materialIndexSort(a, b) {\n      return a.materialIndex - b.materialIndex;\n    }\n\n    faces.sort(materialIndexSort); // sort uvs\n\n    var uvs1 = this.faceVertexUvs[0];\n    var uvs2 = this.faceVertexUvs[1];\n    var newUvs1, newUvs2;\n    if (uvs1 && uvs1.length === length) newUvs1 = [];\n    if (uvs2 && uvs2.length === length) newUvs2 = [];\n\n    for (var i = 0; i < length; i++) {\n      var id = faces[i]._id;\n      if (newUvs1) newUvs1.push(uvs1[id]);\n      if (newUvs2) newUvs2.push(uvs2[id]);\n    }\n\n    if (newUvs1) this.faceVertexUvs[0] = newUvs1;\n    if (newUvs2) this.faceVertexUvs[1] = newUvs2;\n  },\n  toJSON: function () {\n    var data = {\n      metadata: {\n        version: 4.5,\n        type: 'Geometry',\n        generator: 'Geometry.toJSON'\n      }\n    }; // standard Geometry serialization\n\n    data.uuid = this.uuid;\n    data.type = this.type;\n    if (this.name !== '') data.name = this.name;\n\n    if (this.parameters !== undefined) {\n      var parameters = this.parameters;\n\n      for (var key in parameters) {\n        if (parameters[key] !== undefined) data[key] = parameters[key];\n      }\n\n      return data;\n    }\n\n    var vertices = [];\n\n    for (var i = 0; i < this.vertices.length; i++) {\n      var vertex = this.vertices[i];\n      vertices.push(vertex.x, vertex.y, vertex.z);\n    }\n\n    var faces = [];\n    var normals = [];\n    var normalsHash = {};\n    var colors = [];\n    var colorsHash = {};\n    var uvs = [];\n    var uvsHash = {};\n\n    for (var i = 0; i < this.faces.length; i++) {\n      var face = this.faces[i];\n      var hasMaterial = true;\n      var hasFaceUv = false; // deprecated\n\n      var hasFaceVertexUv = this.faceVertexUvs[0][i] !== undefined;\n      var hasFaceNormal = face.normal.length() > 0;\n      var hasFaceVertexNormal = face.vertexNormals.length > 0;\n      var hasFaceColor = face.color.r !== 1 || face.color.g !== 1 || face.color.b !== 1;\n      var hasFaceVertexColor = face.vertexColors.length > 0;\n      var faceType = 0;\n      faceType = setBit(faceType, 0, 0); // isQuad\n\n      faceType = setBit(faceType, 1, hasMaterial);\n      faceType = setBit(faceType, 2, hasFaceUv);\n      faceType = setBit(faceType, 3, hasFaceVertexUv);\n      faceType = setBit(faceType, 4, hasFaceNormal);\n      faceType = setBit(faceType, 5, hasFaceVertexNormal);\n      faceType = setBit(faceType, 6, hasFaceColor);\n      faceType = setBit(faceType, 7, hasFaceVertexColor);\n      faces.push(faceType);\n      faces.push(face.a, face.b, face.c);\n      faces.push(face.materialIndex);\n\n      if (hasFaceVertexUv) {\n        var faceVertexUvs = this.faceVertexUvs[0][i];\n        faces.push(getUvIndex(faceVertexUvs[0]), getUvIndex(faceVertexUvs[1]), getUvIndex(faceVertexUvs[2]));\n      }\n\n      if (hasFaceNormal) {\n        faces.push(getNormalIndex(face.normal));\n      }\n\n      if (hasFaceVertexNormal) {\n        var vertexNormals = face.vertexNormals;\n        faces.push(getNormalIndex(vertexNormals[0]), getNormalIndex(vertexNormals[1]), getNormalIndex(vertexNormals[2]));\n      }\n\n      if (hasFaceColor) {\n        faces.push(getColorIndex(face.color));\n      }\n\n      if (hasFaceVertexColor) {\n        var vertexColors = face.vertexColors;\n        faces.push(getColorIndex(vertexColors[0]), getColorIndex(vertexColors[1]), getColorIndex(vertexColors[2]));\n      }\n    }\n\n    function setBit(value, position, enabled) {\n      return enabled ? value | 1 << position : value & ~(1 << position);\n    }\n\n    function getNormalIndex(normal) {\n      var hash = normal.x.toString() + normal.y.toString() + normal.z.toString();\n\n      if (normalsHash[hash] !== undefined) {\n        return normalsHash[hash];\n      }\n\n      normalsHash[hash] = normals.length / 3;\n      normals.push(normal.x, normal.y, normal.z);\n      return normalsHash[hash];\n    }\n\n    function getColorIndex(color) {\n      var hash = color.r.toString() + color.g.toString() + color.b.toString();\n\n      if (colorsHash[hash] !== undefined) {\n        return colorsHash[hash];\n      }\n\n      colorsHash[hash] = colors.length;\n      colors.push(color.getHex());\n      return colorsHash[hash];\n    }\n\n    function getUvIndex(uv) {\n      var hash = uv.x.toString() + uv.y.toString();\n\n      if (uvsHash[hash] !== undefined) {\n        return uvsHash[hash];\n      }\n\n      uvsHash[hash] = uvs.length / 2;\n      uvs.push(uv.x, uv.y);\n      return uvsHash[hash];\n    }\n\n    data.data = {};\n    data.data.vertices = vertices;\n    data.data.normals = normals;\n    if (colors.length > 0) data.data.colors = colors;\n    if (uvs.length > 0) data.data.uvs = [uvs]; // temporal backward compatibility\n\n    data.data.faces = faces;\n    return data;\n  },\n  clone: function () {\n    /*\n     // Handle primitives\n    \t var parameters = this.parameters;\n    \t if ( parameters !== undefined ) {\n    \t var values = [];\n    \t for ( var key in parameters ) {\n    \t values.push( parameters[ key ] );\n    \t }\n    \t var geometry = Object.create( this.constructor.prototype );\n     this.constructor.apply( geometry, values );\n     return geometry;\n    \t }\n    \t return new this.constructor().copy( this );\n     */\n    return new Geometry().copy(this);\n  },\n  copy: function (source) {\n    var i, il, j, jl, k, kl; // reset\n\n    this.vertices = [];\n    this.colors = [];\n    this.faces = [];\n    this.faceVertexUvs = [[]];\n    this.morphTargets = [];\n    this.morphNormals = [];\n    this.skinWeights = [];\n    this.skinIndices = [];\n    this.lineDistances = [];\n    this.boundingBox = null;\n    this.boundingSphere = null; // name\n\n    this.name = source.name; // vertices\n\n    var vertices = source.vertices;\n\n    for (i = 0, il = vertices.length; i < il; i++) {\n      this.vertices.push(vertices[i].clone());\n    } // colors\n\n\n    var colors = source.colors;\n\n    for (i = 0, il = colors.length; i < il; i++) {\n      this.colors.push(colors[i].clone());\n    } // faces\n\n\n    var faces = source.faces;\n\n    for (i = 0, il = faces.length; i < il; i++) {\n      this.faces.push(faces[i].clone());\n    } // face vertex uvs\n\n\n    for (i = 0, il = source.faceVertexUvs.length; i < il; i++) {\n      var faceVertexUvs = source.faceVertexUvs[i];\n\n      if (this.faceVertexUvs[i] === undefined) {\n        this.faceVertexUvs[i] = [];\n      }\n\n      for (j = 0, jl = faceVertexUvs.length; j < jl; j++) {\n        var uvs = faceVertexUvs[j],\n            uvsCopy = [];\n\n        for (k = 0, kl = uvs.length; k < kl; k++) {\n          var uv = uvs[k];\n          uvsCopy.push(uv.clone());\n        }\n\n        this.faceVertexUvs[i].push(uvsCopy);\n      }\n    } // morph targets\n\n\n    var morphTargets = false;\n\n    for (i = 0, il = morphTargets.length; i < il; i++) {\n      var morphTarget = {};\n      morphTarget.name = morphTargets[i].name; // vertices\n\n      if (morphTargets[i].vertices !== undefined) {\n        morphTarget.vertices = [];\n\n        for (j = 0, jl = morphTargets[i].vertices.length; j < jl; j++) {\n          morphTarget.vertices.push(morphTargets[i].vertices[j].clone());\n        }\n      } // normals\n\n\n      if (morphTargets[i].normals !== undefined) {\n        morphTarget.normals = [];\n\n        for (j = 0, jl = morphTargets[i].normals.length; j < jl; j++) {\n          morphTarget.normals.push(morphTargets[i].normals[j].clone());\n        }\n      }\n\n      false.push(morphTarget);\n    } // morph normals\n\n\n    var morphNormals = source.morphNormals;\n\n    for (i = 0, il = morphNormals.length; i < il; i++) {\n      var morphNormal = {}; // vertex normals\n\n      if (morphNormals[i].vertexNormals !== undefined) {\n        morphNormal.vertexNormals = [];\n\n        for (j = 0, jl = morphNormals[i].vertexNormals.length; j < jl; j++) {\n          var srcVertexNormal = morphNormals[i].vertexNormals[j];\n          var destVertexNormal = {};\n          destVertexNormal.a = srcVertexNormal.a.clone();\n          destVertexNormal.b = srcVertexNormal.b.clone();\n          destVertexNormal.c = srcVertexNormal.c.clone();\n          morphNormal.vertexNormals.push(destVertexNormal);\n        }\n      } // face normals\n\n\n      if (morphNormals[i].faceNormals !== undefined) {\n        morphNormal.faceNormals = [];\n\n        for (j = 0, jl = morphNormals[i].faceNormals.length; j < jl; j++) {\n          morphNormal.faceNormals.push(morphNormals[i].faceNormals[j].clone());\n        }\n      }\n\n      this.morphNormals.push(morphNormal);\n    } // skin weights\n\n\n    var skinWeights = source.skinWeights;\n\n    for (i = 0, il = skinWeights.length; i < il; i++) {\n      this.skinWeights.push(skinWeights[i].clone());\n    } // skin indices\n\n\n    var skinIndices = source.skinIndices;\n\n    for (i = 0, il = skinIndices.length; i < il; i++) {\n      this.skinIndices.push(skinIndices[i].clone());\n    } // line distances\n\n\n    var lineDistances = source.lineDistances;\n\n    for (i = 0, il = lineDistances.length; i < il; i++) {\n      this.lineDistances.push(lineDistances[i]);\n    } // bounding box\n\n\n    var boundingBox = source.boundingBox;\n\n    if (boundingBox !== null) {\n      this.boundingBox = boundingBox.clone();\n    } // bounding sphere\n\n\n    var boundingSphere = source.boundingSphere;\n\n    if (boundingSphere !== null) {\n      this.boundingSphere = boundingSphere.clone();\n    } // update flags\n\n\n    this.elementsNeedUpdate = source.elementsNeedUpdate;\n    this.verticesNeedUpdate = source.verticesNeedUpdate;\n    this.uvsNeedUpdate = source.uvsNeedUpdate;\n    this.normalsNeedUpdate = source.normalsNeedUpdate;\n    this.colorsNeedUpdate = source.colorsNeedUpdate;\n    this.lineDistancesNeedUpdate = source.lineDistancesNeedUpdate;\n    this.groupsNeedUpdate = source.groupsNeedUpdate;\n    return this;\n  },\n  dispose: function () {\n    this.dispatchEvent({\n      type: 'dispose'\n    });\n  }\n});\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author Mugen87 / https://github.com/Mugen87\n */\n// BoxGeometry\n\nclass BoxGeometry extends Geometry {\n  constructor(width, height, depth, widthSegments, heightSegments, depthSegments) {\n    super();\n    this.type = 'BoxGeometry';\n    this.parameters = {\n      width: width,\n      height: height,\n      depth: depth,\n      widthSegments: widthSegments,\n      heightSegments: heightSegments,\n      depthSegments: depthSegments\n    };\n    this.fromBufferGeometry(new BoxBufferGeometry(width, height, depth, widthSegments, heightSegments, depthSegments));\n    this.mergeVertices();\n  }\n\n} // BoxBufferGeometry\n\n\nclass BoxBufferGeometry extends BufferGeometry {\n  constructor(width, height, depth, widthSegments, heightSegments, depthSegments) {\n    super();\n    this.type = 'BoxBufferGeometry';\n    this.parameters = {\n      width: width,\n      height: height,\n      depth: depth,\n      widthSegments: widthSegments,\n      heightSegments: heightSegments,\n      depthSegments: depthSegments\n    };\n    var scope = this;\n    width = width || 1;\n    height = height || 1;\n    depth = depth || 1; // segments\n\n    widthSegments = Math.floor(widthSegments) || 1;\n    heightSegments = Math.floor(heightSegments) || 1;\n    depthSegments = Math.floor(depthSegments) || 1; // buffers\n\n    var indices = [];\n    var vertices = [];\n    var normals = [];\n    var uvs = []; // helper variables\n\n    var numberOfVertices = 0;\n    var groupStart = 0; // build each side of the box geometry\n\n    buildPlane('z', 'y', 'x', -1, -1, depth, height, width, depthSegments, heightSegments, 0); // px\n\n    buildPlane('z', 'y', 'x', 1, -1, depth, height, -width, depthSegments, heightSegments, 1); // nx\n\n    buildPlane('x', 'z', 'y', 1, 1, width, depth, height, widthSegments, depthSegments, 2); // py\n\n    buildPlane('x', 'z', 'y', 1, -1, width, depth, -height, widthSegments, depthSegments, 3); // ny\n\n    buildPlane('x', 'y', 'z', 1, -1, width, height, depth, widthSegments, heightSegments, 4); // pz\n\n    buildPlane('x', 'y', 'z', -1, -1, width, height, -depth, widthSegments, heightSegments, 5); // nz\n    // build geometry\n\n    this.setIndex(indices);\n    this.setAttribute('position', new Float32BufferAttribute(vertices, 3));\n    this.setAttribute('normal', new Float32BufferAttribute(normals, 3));\n    this.setAttribute('uv', new Float32BufferAttribute(uvs, 2));\n\n    function buildPlane(u, v, w, udir, vdir, width, height, depth, gridX, gridY, materialIndex) {\n      var segmentWidth = width / gridX;\n      var segmentHeight = height / gridY;\n      var widthHalf = width / 2;\n      var heightHalf = height / 2;\n      var depthHalf = depth / 2;\n      var gridX1 = gridX + 1;\n      var gridY1 = gridY + 1;\n      var vertexCounter = 0;\n      var groupCount = 0;\n      var ix, iy;\n      var vector = new Vector3(); // generate vertices, normals and uvs\n\n      for (iy = 0; iy < gridY1; iy++) {\n        var y = iy * segmentHeight - heightHalf;\n\n        for (ix = 0; ix < gridX1; ix++) {\n          var x = ix * segmentWidth - widthHalf; // set values to correct vector component\n\n          vector[u] = x * udir;\n          vector[v] = y * vdir;\n          vector[w] = depthHalf; // now apply vector to vertex buffer\n\n          vertices.push(vector.x, vector.y, vector.z); // set values to correct vector component\n\n          vector[u] = 0;\n          vector[v] = 0;\n          vector[w] = depth > 0 ? 1 : -1; // now apply vector to normal buffer\n\n          normals.push(vector.x, vector.y, vector.z); // uvs\n\n          uvs.push(ix / gridX);\n          uvs.push(1 - iy / gridY); // counters\n\n          vertexCounter += 1;\n        }\n      } // indices\n      // 1. you need three indices to draw a single face\n      // 2. a single segment consists of two faces\n      // 3. so we need to generate six (2*3) indices per segment\n\n\n      for (iy = 0; iy < gridY; iy++) {\n        for (ix = 0; ix < gridX; ix++) {\n          var a = numberOfVertices + ix + gridX1 * iy;\n          var b = numberOfVertices + ix + gridX1 * (iy + 1);\n          var c = numberOfVertices + (ix + 1) + gridX1 * (iy + 1);\n          var d = numberOfVertices + (ix + 1) + gridX1 * iy; // faces\n\n          indices.push(a, b, d);\n          indices.push(b, c, d); // increase counter\n\n          groupCount += 6;\n        }\n      } // add a group to the geometry. this will ensure multi material support\n\n\n      scope.addGroup(groupStart, groupCount, materialIndex); // calculate new start value for groups\n\n      groupStart += groupCount; // update total number of vertices\n\n      numberOfVertices += vertexCounter;\n    }\n  }\n\n}\n/**\n * Uniform Utilities\n */\n\n\nfunction cloneUniforms(src) {\n  var dst = {};\n\n  for (var u in src) {\n    dst[u] = {};\n\n    for (var p in src[u]) {\n      var property = src[u][p];\n\n      if (property && (property.isColor || property.isMatrix3 || property.isMatrix4 || property.isVector2 || property.isVector3 || property.isVector4 || property.isTexture)) {\n        dst[u][p] = property.clone();\n      } else if (Array.isArray(property)) {\n        dst[u][p] = property.slice();\n      } else {\n        dst[u][p] = property;\n      }\n    }\n  }\n\n  return dst;\n}\n\nfunction mergeUniforms(uniforms) {\n  var merged = {};\n\n  for (var u = 0; u < uniforms.length; u++) {\n    var tmp = cloneUniforms(uniforms[u]);\n\n    for (var p in tmp) {\n      merged[p] = tmp[p];\n    }\n  }\n\n  return merged;\n} // Legacy\n\n\nvar UniformsUtils = {\n  clone: cloneUniforms,\n  merge: mergeUniforms\n};\nvar default_vertex = \"\";\nvar default_fragment = \"\";\n/**\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  defines: { \"label\" : \"value\" },\n *  uniforms: { \"parameter1\": { value: 1.0 }, \"parameter2\": { value2: 2 } },\n *\n *  fragmentShader: <string>,\n *  vertexShader: <string>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  lights: <bool>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\n\nfunction ShaderMaterial(parameters) {\n  Material.call(this);\n  this.type = 'ShaderMaterial';\n  this.defines = {};\n  this.uniforms = {};\n  this.vertexShader = default_vertex;\n  this.fragmentShader = default_fragment;\n  this.linewidth = 1;\n  this.wireframe = false;\n  this.wireframeLinewidth = 1;\n  this.fog = false; // set to use scene fog\n\n  this.lights = false; // set to use scene lights\n\n  this.clipping = false; // set to use user-defined clipping planes\n\n  this.skinning = false; // set to use skinning attribute streams\n\n  this.morphTargets = false; // set to use morph targets\n\n  this.morphNormals = false; // set to use morph normals\n\n  this.extensions = {\n    derivatives: false,\n    // set to use derivatives\n    fragDepth: false,\n    // set to use fragment depth values\n    drawBuffers: false,\n    // set to use draw buffers\n    shaderTextureLOD: false // set to use shader texture LOD\n\n  }; // When rendered geometry doesn't include these attributes but the material does,\n  // use these default values in WebGL. This avoids errors when buffer data is missing.\n\n  this.defaultAttributeValues = {\n    'color': [1, 1, 1],\n    'uv': [0, 0],\n    'uv2': [0, 0]\n  };\n  this.index0AttributeName = undefined;\n  this.uniformsNeedUpdate = false;\n\n  if (parameters !== undefined) {\n    if (parameters.attributes !== undefined) {\n      console.error('THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead.');\n    }\n\n    this.setValues(parameters);\n  }\n}\n\nShaderMaterial.prototype = Object.create(Material.prototype);\nShaderMaterial.prototype.constructor = ShaderMaterial;\nShaderMaterial.prototype.isShaderMaterial = true;\n\nShaderMaterial.prototype.copy = function (source) {\n  Material.prototype.copy.call(this, source);\n  this.fragmentShader = source.fragmentShader;\n  this.vertexShader = source.vertexShader;\n  this.uniforms = cloneUniforms(source.uniforms);\n  this.defines = Object.assign({}, source.defines);\n  this.wireframe = source.wireframe;\n  this.wireframeLinewidth = source.wireframeLinewidth;\n  this.lights = source.lights;\n  this.clipping = source.clipping;\n  this.skinning = source.skinning;\n  this.morphTargets = source.morphTargets;\n  this.morphNormals = source.morphNormals;\n  this.extensions = source.extensions;\n  return this;\n};\n\nShaderMaterial.prototype.toJSON = function (meta) {\n  var data = Material.prototype.toJSON.call(this, meta);\n  data.uniforms = {};\n\n  for (var name in this.uniforms) {\n    var uniform = this.uniforms[name];\n    var value = uniform.value;\n\n    if (value && value.isTexture) {\n      data.uniforms[name] = {\n        type: 't',\n        value: value.toJSON(meta).uuid\n      };\n    } else if (value && value.isColor) {\n      data.uniforms[name] = {\n        type: 'c',\n        value: value.getHex()\n      };\n    } else if (value && value.isVector2) {\n      data.uniforms[name] = {\n        type: 'v2',\n        value: value.toArray()\n      };\n    } else if (value && value.isVector3) {\n      data.uniforms[name] = {\n        type: 'v3',\n        value: value.toArray()\n      };\n    } else if (value && value.isVector4) {\n      data.uniforms[name] = {\n        type: 'v4',\n        value: value.toArray()\n      };\n    } else if (value && value.isMatrix3) {\n      data.uniforms[name] = {\n        type: 'm3',\n        value: value.toArray()\n      };\n    } else if (value && value.isMatrix4) {\n      data.uniforms[name] = {\n        type: 'm4',\n        value: value.toArray()\n      };\n    } else {\n      data.uniforms[name] = {\n        value: value\n      }; // note: the array variants v2v, v3v, v4v, m4v and tv are not supported so far\n    }\n  }\n\n  if (Object.keys(this.defines).length > 0) data.defines = this.defines;\n  data.vertexShader = this.vertexShader;\n  data.fragmentShader = this.fragmentShader;\n  var extensions = {};\n\n  for (var key in this.extensions) {\n    if (this.extensions[key] === true) extensions[key] = true;\n  }\n\n  if (Object.keys(extensions).length > 0) data.extensions = extensions;\n  return data;\n};\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author mikael emtinger / http://gomo.se/\n * @author WestLangley / http://github.com/WestLangley\n*/\n\n\nfunction Camera() {\n  Object3D.call(this);\n  this.type = 'Camera';\n  this.matrixWorldInverse = new Matrix4();\n  this.projectionMatrix = new Matrix4();\n  this.projectionMatrixInverse = new Matrix4();\n}\n\nCamera.prototype = Object.assign(Object.create(Object3D.prototype), {\n  constructor: Camera,\n  isCamera: true,\n  copy: function (source, recursive) {\n    Object3D.prototype.copy.call(this, source, recursive);\n    this.matrixWorldInverse.copy(source.matrixWorldInverse);\n    this.projectionMatrix.copy(source.projectionMatrix);\n    this.projectionMatrixInverse.copy(source.projectionMatrixInverse);\n    return this;\n  },\n  getWorldDirection: function (target) {\n    if (target === undefined) {\n      console.warn('THREE.Camera: .getWorldDirection() target is now required');\n      target = new Vector3();\n    }\n\n    this.updateMatrixWorld(true);\n    var e = this.matrixWorld.elements;\n    return target.set(-e[8], -e[9], -e[10]).normalize();\n  },\n  updateMatrixWorld: function (force) {\n    Object3D.prototype.updateMatrixWorld.call(this, force);\n    this.matrixWorldInverse.getInverse(this.matrixWorld);\n  },\n  updateWorldMatrix: function (updateParents, updateChildren) {\n    Object3D.prototype.updateWorldMatrix.call(this, updateParents, updateChildren);\n    this.matrixWorldInverse.getInverse(this.matrixWorld);\n  },\n  clone: function () {\n    return new this.constructor().copy(this);\n  }\n});\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author greggman / http://games.greggman.com/\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * @author tschw\n */\n\nfunction PerspectiveCamera(fov, aspect, near, far) {\n  Camera.call(this);\n  this.type = 'PerspectiveCamera';\n  this.fov = fov !== undefined ? fov : 50;\n  this.zoom = 1;\n  this.near = near !== undefined ? near : 0.1;\n  this.far = far !== undefined ? far : 2000;\n  this.focus = 10;\n  this.aspect = aspect !== undefined ? aspect : 1;\n  this.view = null;\n  this.filmGauge = 35; // width of the film (default in millimeters)\n\n  this.filmOffset = 0; // horizontal film offset (same unit as gauge)\n\n  this.updateProjectionMatrix();\n}\n\nPerspectiveCamera.prototype = Object.assign(Object.create(Camera.prototype), {\n  constructor: PerspectiveCamera,\n  isPerspectiveCamera: true,\n  copy: function (source, recursive) {\n    Camera.prototype.copy.call(this, source, recursive);\n    this.fov = source.fov;\n    this.zoom = source.zoom;\n    this.near = source.near;\n    this.far = source.far;\n    this.focus = source.focus;\n    this.aspect = source.aspect;\n    this.view = source.view === null ? null : Object.assign({}, source.view);\n    this.filmGauge = source.filmGauge;\n    this.filmOffset = source.filmOffset;\n    return this;\n  },\n\n  /**\n   * Sets the FOV by focal length in respect to the current .filmGauge.\n   *\n   * The default film gauge is 35, so that the focal length can be specified for\n   * a 35mm (full frame) camera.\n   *\n   * Values for focal length and film gauge must have the same unit.\n   */\n  setFocalLength: function (focalLength) {\n    // see http://www.bobatkins.com/photography/technical/field_of_view.html\n    var vExtentSlope = 0.5 * this.getFilmHeight() / focalLength;\n    this.fov = MathUtils.RAD2DEG * 2 * Math.atan(vExtentSlope);\n    this.updateProjectionMatrix();\n  },\n\n  /**\n   * Calculates the focal length from the current .fov and .filmGauge.\n   */\n  getFocalLength: function () {\n    var vExtentSlope = Math.tan(MathUtils.DEG2RAD * 0.5 * this.fov);\n    return 0.5 * this.getFilmHeight() / vExtentSlope;\n  },\n  getEffectiveFOV: function () {\n    return MathUtils.RAD2DEG * 2 * Math.atan(Math.tan(MathUtils.DEG2RAD * 0.5 * this.fov) / this.zoom);\n  },\n  getFilmWidth: function () {\n    // film not completely covered in portrait format (aspect < 1)\n    return this.filmGauge * Math.min(this.aspect, 1);\n  },\n  getFilmHeight: function () {\n    // film not completely covered in landscape format (aspect > 1)\n    return this.filmGauge / Math.max(this.aspect, 1);\n  },\n\n  /**\n   * Sets an offset in a larger frustum. This is useful for multi-window or\n   * multi-monitor/multi-machine setups.\n   *\n   * For example, if you have 3x2 monitors and each monitor is 1920x1080 and\n   * the monitors are in grid like this\n   *\n   *   +---+---+---+\n   *   | A | B | C |\n   *   +---+---+---+\n   *   | D | E | F |\n   *   +---+---+---+\n   *\n   * then for each monitor you would call it like this\n   *\n   *   var w = 1920;\n   *   var h = 1080;\n   *   var fullWidth = w * 3;\n   *   var fullHeight = h * 2;\n   *\n   *   --A--\n   *   camera.setViewOffset( fullWidth, fullHeight, w * 0, h * 0, w, h );\n   *   --B--\n   *   camera.setViewOffset( fullWidth, fullHeight, w * 1, h * 0, w, h );\n   *   --C--\n   *   camera.setViewOffset( fullWidth, fullHeight, w * 2, h * 0, w, h );\n   *   --D--\n   *   camera.setViewOffset( fullWidth, fullHeight, w * 0, h * 1, w, h );\n   *   --E--\n   *   camera.setViewOffset( fullWidth, fullHeight, w * 1, h * 1, w, h );\n   *   --F--\n   *   camera.setViewOffset( fullWidth, fullHeight, w * 2, h * 1, w, h );\n   *\n   *   Note there is no reason monitors have to be the same size or in a grid.\n   */\n  setViewOffset: function (fullWidth, fullHeight, x, y, width, height) {\n    this.aspect = fullWidth / fullHeight;\n\n    if (this.view === null) {\n      this.view = {\n        enabled: true,\n        fullWidth: 1,\n        fullHeight: 1,\n        offsetX: 0,\n        offsetY: 0,\n        width: 1,\n        height: 1\n      };\n    }\n\n    this.view.enabled = true;\n    this.view.fullWidth = fullWidth;\n    this.view.fullHeight = fullHeight;\n    this.view.offsetX = x;\n    this.view.offsetY = y;\n    this.view.width = width;\n    this.view.height = height;\n    this.updateProjectionMatrix();\n  },\n  clearViewOffset: function () {\n    if (this.view !== null) {\n      this.view.enabled = false;\n    }\n\n    this.updateProjectionMatrix();\n  },\n  updateProjectionMatrix: function () {\n    var near = this.near,\n        top = near * Math.tan(MathUtils.DEG2RAD * 0.5 * this.fov) / this.zoom,\n        height = 2 * top,\n        width = this.aspect * height,\n        left = -0.5 * width,\n        view = this.view;\n\n    if (this.view !== null && this.view.enabled) {\n      var fullWidth = view.fullWidth,\n          fullHeight = view.fullHeight;\n      left += view.offsetX * width / fullWidth;\n      top -= view.offsetY * height / fullHeight;\n      width *= view.width / fullWidth;\n      height *= view.height / fullHeight;\n    }\n\n    var skew = this.filmOffset;\n    if (skew !== 0) left += near * skew / this.getFilmWidth();\n    this.projectionMatrix.makePerspective(left, left + width, top, top - height, near, this.far);\n    this.projectionMatrixInverse.getInverse(this.projectionMatrix);\n  },\n  toJSON: function (meta) {\n    var data = Object3D.prototype.toJSON.call(this, meta);\n    data.object.fov = this.fov;\n    data.object.zoom = this.zoom;\n    data.object.near = this.near;\n    data.object.far = this.far;\n    data.object.focus = this.focus;\n    data.object.aspect = this.aspect;\n    if (this.view !== null) data.object.view = Object.assign({}, this.view);\n    data.object.filmGauge = this.filmGauge;\n    data.object.filmOffset = this.filmOffset;\n    return data;\n  }\n});\n/**\n * Camera for rendering cube maps\n *\t- renders scene into axis-aligned cube\n *\n * @author alteredq / http://alteredqualia.com/\n */\n\nvar fov = 90,\n    aspect = 1;\n\nfunction CubeCamera(near, far, cubeResolution, options) {\n  Object3D.call(this);\n  this.type = 'CubeCamera';\n  var cameraPX = new PerspectiveCamera(fov, aspect, near, far);\n  cameraPX.up.set(0, -1, 0);\n  cameraPX.lookAt(new Vector3(1, 0, 0));\n  this.add(cameraPX);\n  var cameraNX = new PerspectiveCamera(fov, aspect, near, far);\n  cameraNX.up.set(0, -1, 0);\n  cameraNX.lookAt(new Vector3(-1, 0, 0));\n  this.add(cameraNX);\n  var cameraPY = new PerspectiveCamera(fov, aspect, near, far);\n  cameraPY.up.set(0, 0, 1);\n  cameraPY.lookAt(new Vector3(0, 1, 0));\n  this.add(cameraPY);\n  var cameraNY = new PerspectiveCamera(fov, aspect, near, far);\n  cameraNY.up.set(0, 0, -1);\n  cameraNY.lookAt(new Vector3(0, -1, 0));\n  this.add(cameraNY);\n  var cameraPZ = new PerspectiveCamera(fov, aspect, near, far);\n  cameraPZ.up.set(0, -1, 0);\n  cameraPZ.lookAt(new Vector3(0, 0, 1));\n  this.add(cameraPZ);\n  var cameraNZ = new PerspectiveCamera(fov, aspect, near, far);\n  cameraNZ.up.set(0, -1, 0);\n  cameraNZ.lookAt(new Vector3(0, 0, -1));\n  this.add(cameraNZ);\n  options = options || {\n    format: RGBFormat,\n    magFilter: LinearFilter,\n    minFilter: LinearFilter\n  };\n  this.renderTarget = new WebGLCubeRenderTarget(cubeResolution, options);\n  this.renderTarget.texture.name = \"CubeCamera\";\n\n  this.update = function (renderer, scene) {\n    if (this.parent === null) this.updateMatrixWorld();\n    var currentRenderTarget = renderer.getRenderTarget();\n    var renderTarget = this.renderTarget;\n    var generateMipmaps = renderTarget.texture.generateMipmaps;\n    renderTarget.texture.generateMipmaps = false;\n    renderer.setRenderTarget(renderTarget, 0);\n    renderer.render(scene, cameraPX);\n    renderer.setRenderTarget(renderTarget, 1);\n    renderer.render(scene, cameraNX);\n    renderer.setRenderTarget(renderTarget, 2);\n    renderer.render(scene, cameraPY);\n    renderer.setRenderTarget(renderTarget, 3);\n    renderer.render(scene, cameraNY);\n    renderer.setRenderTarget(renderTarget, 4);\n    renderer.render(scene, cameraPZ);\n    renderTarget.texture.generateMipmaps = generateMipmaps;\n    renderer.setRenderTarget(renderTarget, 5);\n    renderer.render(scene, cameraNZ);\n    renderer.setRenderTarget(currentRenderTarget);\n  };\n\n  this.clear = function (renderer, color, depth, stencil) {\n    var currentRenderTarget = renderer.getRenderTarget();\n    var renderTarget = this.renderTarget;\n\n    for (var i = 0; i < 6; i++) {\n      renderer.setRenderTarget(renderTarget, i);\n      renderer.clear(color, depth, stencil);\n    }\n\n    renderer.setRenderTarget(currentRenderTarget);\n  };\n}\n\nCubeCamera.prototype = Object.create(Object3D.prototype);\nCubeCamera.prototype.constructor = CubeCamera;\n\nfunction WebGLCubeRenderTarget() {}\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\n\nfunction DataTexture(data, width, height, format, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy, encoding) {\n  Texture.call(this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding);\n  this.image = {\n    data: data || null,\n    width: width || 1,\n    height: height || 1\n  };\n  this.magFilter = magFilter !== undefined ? magFilter : NearestFilter;\n  this.minFilter = minFilter !== undefined ? minFilter : NearestFilter;\n  this.generateMipmaps = false;\n  this.flipY = false;\n  this.unpackAlignment = 1;\n  this.needsUpdate = true;\n}\n\nDataTexture.prototype = Object.create(Texture.prototype);\nDataTexture.prototype.constructor = DataTexture;\nDataTexture.prototype.isDataTexture = true;\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author bhouston / http://clara.io\n */\n\nvar _sphere$1 = new Sphere();\n\nvar _vector$5 = new Vector3();\n\nfunction Frustum(p0, p1, p2, p3, p4, p5) {\n  this.planes = [p0 !== undefined ? p0 : new Plane(), p1 !== undefined ? p1 : new Plane(), p2 !== undefined ? p2 : new Plane(), p3 !== undefined ? p3 : new Plane(), p4 !== undefined ? p4 : new Plane(), p5 !== undefined ? p5 : new Plane()];\n}\n\nObject.assign(Frustum.prototype, {\n  set: function (p0, p1, p2, p3, p4, p5) {\n    var planes = this.planes;\n    planes[0].copy(p0);\n    planes[1].copy(p1);\n    planes[2].copy(p2);\n    planes[3].copy(p3);\n    planes[4].copy(p4);\n    planes[5].copy(p5);\n    return this;\n  },\n  clone: function () {\n    return new this.constructor().copy(this);\n  },\n  copy: function (frustum) {\n    var planes = this.planes;\n\n    for (var i = 0; i < 6; i++) {\n      planes[i].copy(frustum.planes[i]);\n    }\n\n    return this;\n  },\n  setFromProjectionMatrix: function (m) {\n    var planes = this.planes;\n    var me = m.elements;\n    var me0 = me[0],\n        me1 = me[1],\n        me2 = me[2],\n        me3 = me[3];\n    var me4 = me[4],\n        me5 = me[5],\n        me6 = me[6],\n        me7 = me[7];\n    var me8 = me[8],\n        me9 = me[9],\n        me10 = me[10],\n        me11 = me[11];\n    var me12 = me[12],\n        me13 = me[13],\n        me14 = me[14],\n        me15 = me[15];\n    planes[0].setComponents(me3 - me0, me7 - me4, me11 - me8, me15 - me12).normalize();\n    planes[1].setComponents(me3 + me0, me7 + me4, me11 + me8, me15 + me12).normalize();\n    planes[2].setComponents(me3 + me1, me7 + me5, me11 + me9, me15 + me13).normalize();\n    planes[3].setComponents(me3 - me1, me7 - me5, me11 - me9, me15 - me13).normalize();\n    planes[4].setComponents(me3 - me2, me7 - me6, me11 - me10, me15 - me14).normalize();\n    planes[5].setComponents(me3 + me2, me7 + me6, me11 + me10, me15 + me14).normalize();\n    return this;\n  },\n  intersectsObject: function (object) {\n    var geometry = object.geometry;\n    if (geometry.boundingSphere === null) geometry.computeBoundingSphere();\n\n    _sphere$1.copy(geometry.boundingSphere).applyMatrix4(object.matrixWorld);\n\n    return this.intersectsSphere(_sphere$1);\n  },\n  intersectsSprite: function (sprite) {\n    _sphere$1.center.set(0, 0, 0);\n\n    _sphere$1.radius = 0.7071067811865476;\n\n    _sphere$1.applyMatrix4(sprite.matrixWorld);\n\n    return this.intersectsSphere(_sphere$1);\n  },\n  intersectsSphere: function (sphere) {\n    var planes = this.planes;\n    var center = sphere.center;\n    var negRadius = -sphere.radius;\n\n    for (var i = 0; i < 6; i++) {\n      var distance = planes[i].distanceToPoint(center);\n\n      if (distance < negRadius) {\n        return false;\n      }\n    }\n\n    return true;\n  },\n  intersectsBox: function (box) {\n    var planes = this.planes;\n\n    for (var i = 0; i < 6; i++) {\n      var plane = planes[i]; // corner at max distance\n\n      _vector$5.x = plane.normal.x > 0 ? box.max.x : box.min.x;\n      _vector$5.y = plane.normal.y > 0 ? box.max.y : box.min.y;\n      _vector$5.z = plane.normal.z > 0 ? box.max.z : box.min.z;\n\n      if (plane.distanceToPoint(_vector$5) < 0) {\n        return false;\n      }\n    }\n\n    return true;\n  },\n  containsPoint: function (point) {\n    var planes = this.planes;\n\n    for (var i = 0; i < 6; i++) {\n      if (planes[i].distanceToPoint(point) < 0) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n});\n/**\n * Uniforms library for shared webgl shaders\n */\n\nvar UniformsLib = {\n  common: {\n    diffuse: {\n      value: new Color(0xeeeeee)\n    },\n    opacity: {\n      value: 1.0\n    },\n    map: {\n      value: null\n    },\n    uvTransform: {\n      value: new Matrix3()\n    },\n    uv2Transform: {\n      value: new Matrix3()\n    },\n    alphaMap: {\n      value: null\n    }\n  },\n  specularmap: {\n    specularMap: {\n      value: null\n    }\n  },\n  envmap: {\n    envMap: {\n      value: null\n    },\n    flipEnvMap: {\n      value: -1\n    },\n    reflectivity: {\n      value: 1.0\n    },\n    refractionRatio: {\n      value: 0.98\n    },\n    maxMipLevel: {\n      value: 0\n    }\n  },\n  aomap: {\n    aoMap: {\n      value: null\n    },\n    aoMapIntensity: {\n      value: 1\n    }\n  },\n  lightmap: {\n    lightMap: {\n      value: null\n    },\n    lightMapIntensity: {\n      value: 1\n    }\n  },\n  emissivemap: {\n    emissiveMap: {\n      value: null\n    }\n  },\n  bumpmap: {\n    bumpMap: {\n      value: null\n    },\n    bumpScale: {\n      value: 1\n    }\n  },\n  normalmap: {\n    normalMap: {\n      value: null\n    },\n    normalScale: {\n      value: new Vector2(1, 1)\n    }\n  },\n  displacementmap: {\n    displacementMap: {\n      value: null\n    },\n    displacementScale: {\n      value: 1\n    },\n    displacementBias: {\n      value: 0\n    }\n  },\n  roughnessmap: {\n    roughnessMap: {\n      value: null\n    }\n  },\n  metalnessmap: {\n    metalnessMap: {\n      value: null\n    }\n  },\n  gradientmap: {\n    gradientMap: {\n      value: null\n    }\n  },\n  fog: {\n    fogDensity: {\n      value: 0.00025\n    },\n    fogNear: {\n      value: 1\n    },\n    fogFar: {\n      value: 2000\n    },\n    fogColor: {\n      value: new Color(0xffffff)\n    }\n  },\n  lights: {\n    ambientLightColor: {\n      value: []\n    },\n    lightProbe: {\n      value: []\n    },\n    directionalLights: {\n      value: [],\n      properties: {\n        direction: {},\n        color: {}\n      }\n    },\n    directionalLightShadows: {\n      value: [],\n      properties: {\n        shadowBias: {},\n        shadowRadius: {},\n        shadowMapSize: {}\n      }\n    },\n    directionalShadowMap: {\n      value: []\n    },\n    directionalShadowMatrix: {\n      value: []\n    },\n    spotLights: {\n      value: [],\n      properties: {\n        color: {},\n        position: {},\n        direction: {},\n        distance: {},\n        coneCos: {},\n        penumbraCos: {},\n        decay: {}\n      }\n    },\n    spotLightShadows: {\n      value: [],\n      properties: {\n        shadowBias: {},\n        shadowRadius: {},\n        shadowMapSize: {}\n      }\n    },\n    spotShadowMap: {\n      value: []\n    },\n    spotShadowMatrix: {\n      value: []\n    },\n    pointLights: {\n      value: [],\n      properties: {\n        color: {},\n        position: {},\n        decay: {},\n        distance: {}\n      }\n    },\n    pointLightShadows: {\n      value: [],\n      properties: {\n        shadowBias: {},\n        shadowRadius: {},\n        shadowMapSize: {},\n        shadowCameraNear: {},\n        shadowCameraFar: {}\n      }\n    },\n    pointShadowMap: {\n      value: []\n    },\n    pointShadowMatrix: {\n      value: []\n    },\n    hemisphereLights: {\n      value: [],\n      properties: {\n        direction: {},\n        skyColor: {},\n        groundColor: {}\n      }\n    },\n    // TODO (abelnation): RectAreaLight BRDF data needs to be moved from example to main src\n    rectAreaLights: {\n      value: [],\n      properties: {\n        color: {},\n        position: {},\n        width: {},\n        height: {}\n      }\n    }\n  },\n  points: {\n    diffuse: {\n      value: new Color(0xeeeeee)\n    },\n    opacity: {\n      value: 1.0\n    },\n    size: {\n      value: 1.0\n    },\n    scale: {\n      value: 1.0\n    },\n    map: {\n      value: null\n    },\n    alphaMap: {\n      value: null\n    },\n    uvTransform: {\n      value: new Matrix3()\n    }\n  },\n  sprite: {\n    diffuse: {\n      value: new Color(0xeeeeee)\n    },\n    opacity: {\n      value: 1.0\n    },\n    center: {\n      value: new Vector2(0.5, 0.5)\n    },\n    rotation: {\n      value: 0.0\n    },\n    map: {\n      value: null\n    },\n    alphaMap: {\n      value: null\n    },\n    uvTransform: {\n      value: new Matrix3()\n    }\n  }\n};\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLAnimation() {\n  var context = null;\n  var isAnimating = false;\n  var animationLoop = null;\n\n  function onAnimationFrame(time, frame) {\n    if (isAnimating === false) return;\n    animationLoop(time, frame);\n    context.requestAnimationFrame(onAnimationFrame);\n  }\n\n  return {\n    start: function () {\n      if (isAnimating === true) return;\n      if (animationLoop === null) return;\n      context.requestAnimationFrame(onAnimationFrame);\n      isAnimating = true;\n    },\n    stop: function () {\n      isAnimating = false;\n    },\n    setAnimationLoop: function (callback) {\n      animationLoop = callback;\n    },\n    setContext: function (value) {\n      context = value;\n    }\n  };\n}\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\n\nfunction WebGLAttributes(gl, capabilities) {\n  var isWebGL2 = capabilities.isWebGL2;\n  var buffers = new WeakMap();\n\n  function createBuffer(attribute, bufferType) {\n    var array = attribute.array;\n    var usage = attribute.usage;\n    var buffer = gl.createBuffer();\n    gl.bindBuffer(bufferType, buffer);\n    gl.bufferData(bufferType, array, usage);\n    attribute.onUploadCallback();\n    var type = 5126;\n\n    if (array instanceof Float32Array) {\n      type = 5126;\n    } else if (array instanceof Float64Array) {\n      console.warn('THREE.WebGLAttributes: Unsupported data buffer format: Float64Array.');\n    } else if (array instanceof Uint16Array) {\n      type = 5123;\n    } else if (array instanceof Int16Array) {\n      type = 5122;\n    } else if (array instanceof Uint32Array) {\n      type = 5125;\n    } else if (array instanceof Int32Array) {\n      type = 5124;\n    } else if (array instanceof Int8Array) {\n      type = 5120;\n    } else if (array instanceof Uint8Array) {\n      type = 5121;\n    }\n\n    return {\n      buffer: buffer,\n      type: type,\n      bytesPerElement: array.BYTES_PER_ELEMENT,\n      version: attribute.version\n    };\n  }\n\n  function updateBuffer(buffer, attribute, bufferType) {\n    var array = attribute.array;\n    var updateRange = attribute.updateRange;\n    gl.bindBuffer(bufferType, buffer);\n\n    if (updateRange.count === -1) {\n      // Not using update ranges\n      gl.bufferSubData(bufferType, 0, array);\n    } else {\n      if (isWebGL2) {\n        gl.bufferSubData(bufferType, updateRange.offset * array.BYTES_PER_ELEMENT, array, updateRange.offset, updateRange.count);\n      } else {\n        gl.bufferSubData(bufferType, updateRange.offset * array.BYTES_PER_ELEMENT, array.subarray(updateRange.offset, updateRange.offset + updateRange.count));\n      }\n\n      updateRange.count = -1; // reset range\n    }\n  } //\n\n\n  function get(attribute) {\n    if (attribute.isInterleavedBufferAttribute) attribute = attribute.data;\n    return buffers.get(attribute);\n  }\n\n  function remove(attribute) {\n    if (attribute.isInterleavedBufferAttribute) attribute = attribute.data;\n    var data = buffers.get(attribute);\n\n    if (data) {\n      gl.deleteBuffer(data.buffer);\n      buffers.delete(attribute);\n    }\n  }\n\n  function update(attribute, bufferType) {\n    if (attribute.isInterleavedBufferAttribute) attribute = attribute.data;\n    var data = buffers.get(attribute);\n\n    if (data === undefined) {\n      buffers.set(attribute, createBuffer(attribute, bufferType));\n    } else if (data.version < attribute.version) {\n      updateBuffer(data.buffer, attribute, bufferType);\n      data.version = attribute.version;\n    }\n  }\n\n  return {\n    get: get,\n    remove: remove,\n    update: update\n  };\n}\n\nfunction PlaneGeometry() {} // PlaneBufferGeometry\n\n\nfunction PlaneBufferGeometry(width, height, widthSegments, heightSegments) {\n  BufferGeometry.call(this);\n  this.type = 'PlaneBufferGeometry';\n  this.parameters = {\n    width: width,\n    height: height,\n    widthSegments: widthSegments,\n    heightSegments: heightSegments\n  };\n  width = width || 1;\n  height = height || 1;\n  var width_half = width / 2;\n  var height_half = height / 2;\n  var gridX = Math.floor(widthSegments) || 1;\n  var gridY = Math.floor(heightSegments) || 1;\n  var gridX1 = gridX + 1;\n  var gridY1 = gridY + 1;\n  var segment_width = width / gridX;\n  var segment_height = height / gridY;\n  var ix, iy; // buffers\n\n  var indices = [];\n  var vertices = [];\n  var normals = [];\n  var uvs = []; // generate vertices, normals and uvs\n\n  for (iy = 0; iy < gridY1; iy++) {\n    var y = iy * segment_height - height_half;\n\n    for (ix = 0; ix < gridX1; ix++) {\n      var x = ix * segment_width - width_half;\n      vertices.push(x, -y, 0);\n      normals.push(0, 0, 1);\n      uvs.push(ix / gridX);\n      uvs.push(1 - iy / gridY);\n    }\n  } // indices\n\n\n  for (iy = 0; iy < gridY; iy++) {\n    for (ix = 0; ix < gridX; ix++) {\n      var a = ix + gridX1 * iy;\n      var b = ix + gridX1 * (iy + 1);\n      var c = ix + 1 + gridX1 * (iy + 1);\n      var d = ix + 1 + gridX1 * iy; // faces\n\n      indices.push(a, b, d);\n      indices.push(b, c, d);\n    }\n  } // build geometry\n\n\n  this.setIndex(indices);\n  this.setAttribute('position', new Float32BufferAttribute(vertices, 3));\n  this.setAttribute('normal', new Float32BufferAttribute(normals, 3));\n  this.setAttribute('uv', new Float32BufferAttribute(uvs, 2));\n}\n\nPlaneBufferGeometry.prototype = Object.create(BufferGeometry.prototype);\nPlaneBufferGeometry.prototype.constructor = PlaneBufferGeometry;\nvar alphamap_fragment = \"\";\nvar alphamap_pars_fragment = \"\";\nvar alphatest_fragment = \"\";\nvar aomap_fragment = \"\";\nvar aomap_pars_fragment = \"\";\nvar begin_vertex = \"\";\nvar beginnormal_vertex = \"\";\nvar bsdfs = \"\";\nvar bumpmap_pars_fragment = \"\";\nvar clipping_planes_fragment = \"\";\nvar clipping_planes_pars_fragment = \"\";\nvar clipping_planes_pars_vertex = \"\";\nvar clipping_planes_vertex = \"\";\nvar color_fragment = \"\";\nvar color_pars_fragment = \"\";\nvar color_pars_vertex = \"\";\nvar color_vertex = \"\";\nvar common = \"\";\nvar cube_uv_reflection_fragment = \"\";\nvar defaultnormal_vertex = \"\";\nvar displacementmap_pars_vertex = \"\";\nvar displacementmap_vertex = \"\";\nvar emissivemap_fragment = \"\";\nvar emissivemap_pars_fragment = \"\";\nvar encodings_fragment = \"\";\nvar encodings_pars_fragment = \"\";\nvar envmap_fragment = \"\";\nvar envmap_common_pars_fragment = \"\";\nvar envmap_pars_fragment = \"\";\nvar envmap_pars_vertex = \"\";\nvar envmap_vertex = \"\";\nvar fog_vertex = \"\";\nvar fog_pars_vertex = \"\";\nvar fog_fragment = \"\";\nvar fog_pars_fragment = \"\";\nvar gradientmap_pars_fragment = \"\";\nvar lightmap_fragment = \"\";\nvar lightmap_pars_fragment = \"\";\nvar lights_lambert_vertex = \"\";\nvar lights_pars_begin = \"\";\nvar envmap_physical_pars_fragment = \"\";\nvar lights_toon_fragment = \"\";\nvar lights_toon_pars_fragment = \"\";\nvar lights_phong_fragment = \"\";\nvar lights_phong_pars_fragment = \"\";\nvar lights_physical_fragment = \"\";\nvar lights_physical_pars_fragment = \"\";\nvar lights_fragment_begin = \"\";\nvar lights_fragment_maps = \"\";\nvar lights_fragment_end = \"\";\nvar logdepthbuf_fragment = \"\";\nvar logdepthbuf_pars_fragment = \"\";\nvar logdepthbuf_pars_vertex = \"\";\nvar logdepthbuf_vertex = \"\";\nvar map_fragment = \"\";\nvar map_pars_fragment = \"\";\nvar map_particle_fragment = \"\";\nvar map_particle_pars_fragment = \"\";\nvar metalnessmap_fragment = \"\";\nvar metalnessmap_pars_fragment = \"\";\nvar morphnormal_vertex = \"\";\nvar morphtarget_pars_vertex = \"\";\nvar morphtarget_vertex = \"\";\nvar normal_fragment_begin = \"\";\nvar normal_fragment_maps = \"\";\nvar normalmap_pars_fragment = \"\";\nvar clearcoat_normal_fragment_begin = \"\";\nvar clearcoat_normal_fragment_maps = \"\";\nvar clearcoat_normalmap_pars_fragment = \"\";\nvar packing = \"\";\nvar premultiplied_alpha_fragment = \"\";\nvar project_vertex = \"\";\nvar dithering_fragment = \"\";\nvar dithering_pars_fragment = \"\";\nvar roughnessmap_fragment = \"\";\nvar roughnessmap_pars_fragment = \"\";\nvar shadowmap_pars_fragment = \"\";\nvar shadowmap_pars_vertex = \"\";\nvar shadowmap_vertex = \"\";\nvar shadowmask_pars_fragment = \"\";\nvar skinbase_vertex = \"\";\nvar skinning_pars_vertex = \"\";\nvar skinning_vertex = \"\";\nvar skinnormal_vertex = \"\";\nvar specularmap_fragment = \"\";\nvar specularmap_pars_fragment = \"\";\nvar tonemapping_fragment = \"\";\nvar tonemapping_pars_fragment = \"\";\nvar uv_pars_fragment = \"\";\nvar uv_pars_vertex = \"\";\nvar uv_vertex = \"\";\nvar uv2_pars_fragment = \"\";\nvar uv2_pars_vertex = \"\";\nvar uv2_vertex = \"\";\nvar worldpos_vertex = \"\";\nvar background_frag = \"\";\nvar background_vert = \"\";\nvar cube_frag = \"\";\nvar cube_vert = \"\";\nvar depth_frag = \"\";\nvar depth_vert = \"\";\nvar distanceRGBA_frag = \"\";\nvar distanceRGBA_vert = \"\";\nvar equirect_frag = \"\";\nvar equirect_vert = \"\";\nvar linedashed_frag = \"\";\nvar linedashed_vert = \"\";\nvar meshbasic_frag = \"\";\nvar meshbasic_vert = \"\";\nvar meshlambert_frag = \"\";\nvar meshlambert_vert = \"\";\nvar meshmatcap_frag = \"\";\nvar meshmatcap_vert = \"\";\nvar meshtoon_frag = \"\";\nvar meshtoon_vert = \"\";\nvar meshphong_frag = \"\";\nvar meshphong_vert = \"\";\nvar meshphysical_frag = \"\";\nvar meshphysical_vert = \"\";\nvar normal_frag = \"\";\nvar normal_vert = \"\";\nvar points_frag = \"\";\nvar points_vert = \"\";\nvar shadow_frag = \"\";\nvar shadow_vert = \"\";\nvar sprite_frag = \"\";\nvar sprite_vert = \"\";\nvar ShaderChunk = {\n  alphamap_fragment: alphamap_fragment,\n  alphamap_pars_fragment: alphamap_pars_fragment,\n  alphatest_fragment: alphatest_fragment,\n  aomap_fragment: aomap_fragment,\n  aomap_pars_fragment: aomap_pars_fragment,\n  begin_vertex: begin_vertex,\n  beginnormal_vertex: beginnormal_vertex,\n  bsdfs: bsdfs,\n  bumpmap_pars_fragment: bumpmap_pars_fragment,\n  clipping_planes_fragment: clipping_planes_fragment,\n  clipping_planes_pars_fragment: clipping_planes_pars_fragment,\n  clipping_planes_pars_vertex: clipping_planes_pars_vertex,\n  clipping_planes_vertex: clipping_planes_vertex,\n  color_fragment: color_fragment,\n  color_pars_fragment: color_pars_fragment,\n  color_pars_vertex: color_pars_vertex,\n  color_vertex: color_vertex,\n  common: common,\n  cube_uv_reflection_fragment: cube_uv_reflection_fragment,\n  defaultnormal_vertex: defaultnormal_vertex,\n  displacementmap_pars_vertex: displacementmap_pars_vertex,\n  displacementmap_vertex: displacementmap_vertex,\n  emissivemap_fragment: emissivemap_fragment,\n  emissivemap_pars_fragment: emissivemap_pars_fragment,\n  encodings_fragment: encodings_fragment,\n  encodings_pars_fragment: encodings_pars_fragment,\n  envmap_fragment: envmap_fragment,\n  envmap_common_pars_fragment: envmap_common_pars_fragment,\n  envmap_pars_fragment: envmap_pars_fragment,\n  envmap_pars_vertex: envmap_pars_vertex,\n  envmap_physical_pars_fragment: envmap_physical_pars_fragment,\n  envmap_vertex: envmap_vertex,\n  fog_vertex: fog_vertex,\n  fog_pars_vertex: fog_pars_vertex,\n  fog_fragment: fog_fragment,\n  fog_pars_fragment: fog_pars_fragment,\n  gradientmap_pars_fragment: gradientmap_pars_fragment,\n  lightmap_fragment: lightmap_fragment,\n  lightmap_pars_fragment: lightmap_pars_fragment,\n  lights_lambert_vertex: lights_lambert_vertex,\n  lights_pars_begin: lights_pars_begin,\n  lights_toon_fragment: lights_toon_fragment,\n  lights_toon_pars_fragment: lights_toon_pars_fragment,\n  lights_phong_fragment: lights_phong_fragment,\n  lights_phong_pars_fragment: lights_phong_pars_fragment,\n  lights_physical_fragment: lights_physical_fragment,\n  lights_physical_pars_fragment: lights_physical_pars_fragment,\n  lights_fragment_begin: lights_fragment_begin,\n  lights_fragment_maps: lights_fragment_maps,\n  lights_fragment_end: lights_fragment_end,\n  logdepthbuf_fragment: logdepthbuf_fragment,\n  logdepthbuf_pars_fragment: logdepthbuf_pars_fragment,\n  logdepthbuf_pars_vertex: logdepthbuf_pars_vertex,\n  logdepthbuf_vertex: logdepthbuf_vertex,\n  map_fragment: map_fragment,\n  map_pars_fragment: map_pars_fragment,\n  map_particle_fragment: map_particle_fragment,\n  map_particle_pars_fragment: map_particle_pars_fragment,\n  metalnessmap_fragment: metalnessmap_fragment,\n  metalnessmap_pars_fragment: metalnessmap_pars_fragment,\n  morphnormal_vertex: morphnormal_vertex,\n  morphtarget_pars_vertex: morphtarget_pars_vertex,\n  morphtarget_vertex: morphtarget_vertex,\n  normal_fragment_begin: normal_fragment_begin,\n  normal_fragment_maps: normal_fragment_maps,\n  normalmap_pars_fragment: normalmap_pars_fragment,\n  clearcoat_normal_fragment_begin: clearcoat_normal_fragment_begin,\n  clearcoat_normal_fragment_maps: clearcoat_normal_fragment_maps,\n  clearcoat_normalmap_pars_fragment: clearcoat_normalmap_pars_fragment,\n  packing: packing,\n  premultiplied_alpha_fragment: premultiplied_alpha_fragment,\n  project_vertex: project_vertex,\n  dithering_fragment: dithering_fragment,\n  dithering_pars_fragment: dithering_pars_fragment,\n  roughnessmap_fragment: roughnessmap_fragment,\n  roughnessmap_pars_fragment: roughnessmap_pars_fragment,\n  shadowmap_pars_fragment: shadowmap_pars_fragment,\n  shadowmap_pars_vertex: shadowmap_pars_vertex,\n  shadowmap_vertex: shadowmap_vertex,\n  shadowmask_pars_fragment: shadowmask_pars_fragment,\n  skinbase_vertex: skinbase_vertex,\n  skinning_pars_vertex: skinning_pars_vertex,\n  skinning_vertex: skinning_vertex,\n  skinnormal_vertex: skinnormal_vertex,\n  specularmap_fragment: specularmap_fragment,\n  specularmap_pars_fragment: specularmap_pars_fragment,\n  tonemapping_fragment: tonemapping_fragment,\n  tonemapping_pars_fragment: tonemapping_pars_fragment,\n  uv_pars_fragment: uv_pars_fragment,\n  uv_pars_vertex: uv_pars_vertex,\n  uv_vertex: uv_vertex,\n  uv2_pars_fragment: uv2_pars_fragment,\n  uv2_pars_vertex: uv2_pars_vertex,\n  uv2_vertex: uv2_vertex,\n  worldpos_vertex: worldpos_vertex,\n  background_frag: background_frag,\n  background_vert: background_vert,\n  cube_frag: cube_frag,\n  cube_vert: cube_vert,\n  depth_frag: depth_frag,\n  depth_vert: depth_vert,\n  distanceRGBA_frag: distanceRGBA_frag,\n  distanceRGBA_vert: distanceRGBA_vert,\n  equirect_frag: equirect_frag,\n  equirect_vert: equirect_vert,\n  linedashed_frag: linedashed_frag,\n  linedashed_vert: linedashed_vert,\n  meshbasic_frag: meshbasic_frag,\n  meshbasic_vert: meshbasic_vert,\n  meshlambert_frag: meshlambert_frag,\n  meshlambert_vert: meshlambert_vert,\n  meshmatcap_frag: meshmatcap_frag,\n  meshmatcap_vert: meshmatcap_vert,\n  meshtoon_frag: meshtoon_frag,\n  meshtoon_vert: meshtoon_vert,\n  meshphong_frag: meshphong_frag,\n  meshphong_vert: meshphong_vert,\n  meshphysical_frag: meshphysical_frag,\n  meshphysical_vert: meshphysical_vert,\n  normal_frag: normal_frag,\n  normal_vert: normal_vert,\n  points_frag: points_frag,\n  points_vert: points_vert,\n  shadow_frag: shadow_frag,\n  shadow_vert: shadow_vert,\n  sprite_frag: sprite_frag,\n  sprite_vert: sprite_vert\n};\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n * @author mikael emtinger / http://gomo.se/\n */\n\nvar ShaderLib = {\n  basic: {\n    uniforms: mergeUniforms([UniformsLib.common, UniformsLib.specularmap, UniformsLib.envmap, UniformsLib.aomap, UniformsLib.lightmap, UniformsLib.fog]),\n    vertexShader: ShaderChunk.meshbasic_vert,\n    fragmentShader: ShaderChunk.meshbasic_frag\n  },\n  lambert: {\n    uniforms: mergeUniforms([UniformsLib.common, UniformsLib.specularmap, UniformsLib.envmap, UniformsLib.aomap, UniformsLib.lightmap, UniformsLib.emissivemap, UniformsLib.fog, UniformsLib.lights, {\n      emissive: {\n        value: new Color(0x000000)\n      }\n    }]),\n    vertexShader: ShaderChunk.meshlambert_vert,\n    fragmentShader: ShaderChunk.meshlambert_frag\n  },\n  phong: {\n    uniforms: mergeUniforms([UniformsLib.common, UniformsLib.specularmap, UniformsLib.envmap, UniformsLib.aomap, UniformsLib.lightmap, UniformsLib.emissivemap, UniformsLib.bumpmap, UniformsLib.normalmap, UniformsLib.displacementmap, UniformsLib.fog, UniformsLib.lights, {\n      emissive: {\n        value: new Color(0x000000)\n      },\n      specular: {\n        value: new Color(0x111111)\n      },\n      shininess: {\n        value: 30\n      }\n    }]),\n    vertexShader: ShaderChunk.meshphong_vert,\n    fragmentShader: ShaderChunk.meshphong_frag\n  },\n  standard: {\n    uniforms: mergeUniforms([UniformsLib.common, UniformsLib.envmap, UniformsLib.aomap, UniformsLib.lightmap, UniformsLib.emissivemap, UniformsLib.bumpmap, UniformsLib.normalmap, UniformsLib.displacementmap, UniformsLib.roughnessmap, UniformsLib.metalnessmap, UniformsLib.fog, UniformsLib.lights, {\n      emissive: {\n        value: new Color(0x000000)\n      },\n      roughness: {\n        value: 0.5\n      },\n      metalness: {\n        value: 0.5\n      },\n      envMapIntensity: {\n        value: 1\n      } // temporary\n\n    }]),\n    vertexShader: ShaderChunk.meshphysical_vert,\n    fragmentShader: ShaderChunk.meshphysical_frag\n  },\n  toon: {\n    uniforms: mergeUniforms([UniformsLib.common, UniformsLib.specularmap, UniformsLib.aomap, UniformsLib.lightmap, UniformsLib.emissivemap, UniformsLib.bumpmap, UniformsLib.normalmap, UniformsLib.displacementmap, UniformsLib.gradientmap, UniformsLib.fog, UniformsLib.lights, {\n      emissive: {\n        value: new Color(0x000000)\n      },\n      specular: {\n        value: new Color(0x111111)\n      },\n      shininess: {\n        value: 30\n      }\n    }]),\n    vertexShader: ShaderChunk.meshtoon_vert,\n    fragmentShader: ShaderChunk.meshtoon_frag\n  },\n  matcap: {\n    uniforms: mergeUniforms([UniformsLib.common, UniformsLib.bumpmap, UniformsLib.normalmap, UniformsLib.displacementmap, UniformsLib.fog, {\n      matcap: {\n        value: null\n      }\n    }]),\n    vertexShader: ShaderChunk.meshmatcap_vert,\n    fragmentShader: ShaderChunk.meshmatcap_frag\n  },\n  points: {\n    uniforms: mergeUniforms([UniformsLib.points, UniformsLib.fog]),\n    vertexShader: ShaderChunk.points_vert,\n    fragmentShader: ShaderChunk.points_frag\n  },\n  dashed: {\n    uniforms: mergeUniforms([UniformsLib.common, UniformsLib.fog, {\n      scale: {\n        value: 1\n      },\n      dashSize: {\n        value: 1\n      },\n      totalSize: {\n        value: 2\n      }\n    }]),\n    vertexShader: ShaderChunk.linedashed_vert,\n    fragmentShader: ShaderChunk.linedashed_frag\n  },\n  depth: {\n    uniforms: mergeUniforms([UniformsLib.common, UniformsLib.displacementmap]),\n    vertexShader: ShaderChunk.depth_vert,\n    fragmentShader: ShaderChunk.depth_frag\n  },\n  normal: {\n    uniforms: mergeUniforms([UniformsLib.common, UniformsLib.bumpmap, UniformsLib.normalmap, UniformsLib.displacementmap, {\n      opacity: {\n        value: 1.0\n      }\n    }]),\n    vertexShader: ShaderChunk.normal_vert,\n    fragmentShader: ShaderChunk.normal_frag\n  },\n  sprite: {\n    uniforms: mergeUniforms([UniformsLib.sprite, UniformsLib.fog]),\n    vertexShader: ShaderChunk.sprite_vert,\n    fragmentShader: ShaderChunk.sprite_frag\n  },\n  background: {\n    uniforms: {\n      uvTransform: {\n        value: new Matrix3()\n      },\n      t2D: {\n        value: null\n      }\n    },\n    vertexShader: ShaderChunk.background_vert,\n    fragmentShader: ShaderChunk.background_frag\n  },\n\n  /* -------------------------------------------------------------------------\n  //\tCube map shader\n   ------------------------------------------------------------------------- */\n  cube: {\n    uniforms: mergeUniforms([UniformsLib.envmap, {\n      opacity: {\n        value: 1.0\n      }\n    }]),\n    vertexShader: ShaderChunk.cube_vert,\n    fragmentShader: ShaderChunk.cube_frag\n  },\n  equirect: {\n    uniforms: {\n      tEquirect: {\n        value: null\n      }\n    },\n    vertexShader: ShaderChunk.equirect_vert,\n    fragmentShader: ShaderChunk.equirect_frag\n  },\n  distanceRGBA: {\n    uniforms: mergeUniforms([UniformsLib.common, UniformsLib.displacementmap, {\n      referencePosition: {\n        value: new Vector3()\n      },\n      nearDistance: {\n        value: 1\n      },\n      farDistance: {\n        value: 1000\n      }\n    }]),\n    vertexShader: ShaderChunk.distanceRGBA_vert,\n    fragmentShader: ShaderChunk.distanceRGBA_frag\n  },\n  shadow: {\n    uniforms: mergeUniforms([UniformsLib.lights, UniformsLib.fog, {\n      color: {\n        value: new Color(0x00000)\n      },\n      opacity: {\n        value: 1.0\n      }\n    }]),\n    vertexShader: ShaderChunk.shadow_vert,\n    fragmentShader: ShaderChunk.shadow_frag\n  }\n};\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLBackground(renderer, state, objects, premultipliedAlpha) {\n  var clearColor = new Color(0x000000);\n  var clearAlpha = 0;\n  var planeMesh;\n  var boxMesh;\n  var currentBackground = null;\n  var currentBackgroundVersion = 0;\n  var currentTonemapping = null;\n\n  function render(renderList, scene, camera, forceClear) {\n    var background = scene.background; // Ignore background in AR\n    // TODO: Reconsider this.\n\n    var xr = renderer.xr;\n    var session = xr.getSession && xr.getSession();\n\n    if (session && session.environmentBlendMode === 'additive') {\n      background = null;\n    }\n\n    if (background === null) {\n      setClear(clearColor, clearAlpha);\n    } else if (background && background.isColor) {\n      setClear(background, 1);\n      forceClear = true;\n    }\n\n    if (renderer.autoClear || forceClear) {\n      renderer.clear(renderer.autoClearColor, renderer.autoClearDepth, renderer.autoClearStencil);\n    }\n\n    if (background && background.mapping === CubeUVReflectionMapping) {\n      if (boxMesh === undefined) {\n        boxMesh = new Mesh(new BoxBufferGeometry(1, 1, 1), new ShaderMaterial({\n          type: 'BackgroundCubeMaterial',\n          uniforms: cloneUniforms(ShaderLib.cube.uniforms),\n          vertexShader: ShaderLib.cube.vertexShader,\n          fragmentShader: ShaderLib.cube.fragmentShader,\n          side: BackSide,\n          depthTest: false,\n          depthWrite: false,\n          fog: false\n        }));\n        boxMesh.geometry.deleteAttribute('normal');\n        boxMesh.geometry.deleteAttribute('uv');\n\n        boxMesh.onBeforeRender = function (renderer, scene, camera) {\n          this.matrixWorld.copyPosition(camera.matrixWorld);\n        }; // enable code injection for non-built-in material\n\n\n        Object.defineProperty(boxMesh.material, 'envMap', {\n          get: function () {\n            return false.value;\n          }\n        });\n        objects.update(boxMesh);\n      }\n\n      var texture = background;\n      false.value = texture;\n      boxMesh.material.uniforms.flipEnvMap.value = 1;\n\n      if (currentBackground !== background || currentBackgroundVersion !== texture.version || currentTonemapping !== renderer.toneMapping) {\n        boxMesh.material.needsUpdate = true;\n        currentBackground = background;\n        currentBackgroundVersion = texture.version;\n        currentTonemapping = renderer.toneMapping;\n      } // push to the pre-sorted opaque render list\n\n\n      renderList.unshift(boxMesh, boxMesh.geometry, boxMesh.material, 0, 0, null);\n    } else if (background && background.isTexture) {\n      if (planeMesh === undefined) {\n        planeMesh = new Mesh(new PlaneBufferGeometry(2, 2), new ShaderMaterial({\n          type: 'BackgroundMaterial',\n          uniforms: cloneUniforms(ShaderLib.background.uniforms),\n          vertexShader: ShaderLib.background.vertexShader,\n          fragmentShader: ShaderLib.background.fragmentShader,\n          side: FrontSide,\n          depthTest: false,\n          depthWrite: false,\n          fog: false\n        }));\n        planeMesh.geometry.deleteAttribute('normal'); // enable code injection for non-built-in material\n\n        Object.defineProperty(planeMesh.material, 'map', {\n          get: function () {\n            return this.uniforms.t2D.value;\n          }\n        });\n        objects.update(planeMesh);\n      }\n\n      planeMesh.material.uniforms.t2D.value = background;\n\n      if (background.matrixAutoUpdate === true) {\n        background.updateMatrix();\n      }\n\n      planeMesh.material.uniforms.uvTransform.value.copy(background.matrix);\n\n      if (currentBackground !== background || currentBackgroundVersion !== background.version || currentTonemapping !== renderer.toneMapping) {\n        planeMesh.material.needsUpdate = true;\n        currentBackground = background;\n        currentBackgroundVersion = background.version;\n        currentTonemapping = renderer.toneMapping;\n      } // push to the pre-sorted opaque render list\n\n\n      renderList.unshift(planeMesh, planeMesh.geometry, planeMesh.material, 0, 0, null);\n    }\n  }\n\n  function setClear(color, alpha) {\n    state.buffers.color.setClear(color.r, color.g, color.b, alpha, premultipliedAlpha);\n  }\n\n  return {\n    getClearColor: function () {\n      return clearColor;\n    },\n    setClearColor: function (color, alpha) {\n      clearColor.set(color);\n      clearAlpha = alpha !== undefined ? alpha : 1;\n      setClear(clearColor, clearAlpha);\n    },\n    getClearAlpha: function () {\n      return clearAlpha;\n    },\n    setClearAlpha: function (alpha) {\n      clearAlpha = alpha;\n      setClear(clearColor, clearAlpha);\n    },\n    render: render\n  };\n}\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\n\nfunction WebGLBufferRenderer(gl, extensions, info, capabilities) {\n  var isWebGL2 = capabilities.isWebGL2;\n  var mode;\n\n  function setMode(value) {\n    mode = value;\n  }\n\n  function render(start, count) {\n    gl.drawArrays(mode, start, count);\n    info.update(count, mode);\n  }\n\n  function renderInstances(geometry, start, count, primcount) {\n    if (primcount === 0) return;\n    var extension, methodName;\n\n    if (isWebGL2) {\n      extension = gl;\n      methodName = 'drawArraysInstanced';\n    } else {\n      extension = extensions.get('ANGLE_instanced_arrays');\n      methodName = 'drawArraysInstancedANGLE';\n\n      if (extension === null) {\n        console.error('THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.');\n        return;\n      }\n    }\n\n    extension[methodName](mode, start, count, primcount);\n    info.update(count, mode, primcount);\n  } //\n\n\n  this.setMode = setMode;\n  this.render = render;\n  this.renderInstances = renderInstances;\n}\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\n\nfunction WebGLCapabilities(gl, extensions, parameters) {\n  var maxAnisotropy;\n\n  function getMaxAnisotropy() {\n    if (maxAnisotropy !== undefined) return maxAnisotropy;\n    var extension = extensions.get('EXT_texture_filter_anisotropic');\n\n    if (extension !== null) {\n      maxAnisotropy = gl.getParameter(extension.MAX_TEXTURE_MAX_ANISOTROPY_EXT);\n    } else {\n      maxAnisotropy = 0;\n    }\n\n    return maxAnisotropy;\n  }\n\n  function getMaxPrecision(precision) {\n    if (precision === 'highp') {\n      if (gl.getShaderPrecisionFormat(35633, 36338).precision > 0 && gl.getShaderPrecisionFormat(35632, 36338).precision > 0) {\n        return 'highp';\n      }\n\n      precision = 'mediump';\n    }\n\n    if (precision === 'mediump') {\n      if (gl.getShaderPrecisionFormat(35633, 36337).precision > 0 && gl.getShaderPrecisionFormat(35632, 36337).precision > 0) {\n        return 'mediump';\n      }\n    }\n\n    return 'lowp';\n  }\n  /* eslint-disable no-undef */\n\n\n  var isWebGL2 = typeof WebGL2RenderingContext !== 'undefined' && gl instanceof WebGL2RenderingContext || typeof WebGL2ComputeRenderingContext !== 'undefined' && gl instanceof WebGL2ComputeRenderingContext;\n  /* eslint-enable no-undef */\n\n  var precision = parameters.precision !== undefined ? parameters.precision : 'highp';\n  var maxPrecision = getMaxPrecision(precision);\n\n  if (maxPrecision !== precision) {\n    console.warn('THREE.WebGLRenderer:', precision, 'not supported, using', maxPrecision, 'instead.');\n    precision = maxPrecision;\n  }\n\n  var logarithmicDepthBuffer = parameters.logarithmicDepthBuffer === true;\n  var maxTextures = gl.getParameter(34930);\n  var maxVertexTextures = gl.getParameter(35660);\n  var maxTextureSize = gl.getParameter(3379);\n  var maxCubemapSize = gl.getParameter(34076);\n  var maxAttributes = gl.getParameter(34921);\n  var maxVertexUniforms = gl.getParameter(36347);\n  var maxVaryings = gl.getParameter(36348);\n  var maxFragmentUniforms = gl.getParameter(36349);\n  var vertexTextures = maxVertexTextures > 0;\n  var floatFragmentTextures = isWebGL2 || !!extensions.get('OES_texture_float');\n  var floatVertexTextures = vertexTextures && floatFragmentTextures;\n  var maxSamples = isWebGL2 ? gl.getParameter(36183) : 0;\n  return {\n    isWebGL2: isWebGL2,\n    getMaxAnisotropy: getMaxAnisotropy,\n    getMaxPrecision: getMaxPrecision,\n    precision: precision,\n    logarithmicDepthBuffer: logarithmicDepthBuffer,\n    maxTextures: maxTextures,\n    maxVertexTextures: maxVertexTextures,\n    maxTextureSize: maxTextureSize,\n    maxCubemapSize: maxCubemapSize,\n    maxAttributes: maxAttributes,\n    maxVertexUniforms: maxVertexUniforms,\n    maxVaryings: maxVaryings,\n    maxFragmentUniforms: maxFragmentUniforms,\n    vertexTextures: vertexTextures,\n    floatFragmentTextures: floatFragmentTextures,\n    floatVertexTextures: floatVertexTextures,\n    maxSamples: maxSamples\n  };\n}\n/**\n * @author tschw\n */\n\n\nfunction WebGLClipping() {\n  var scope = this,\n      globalState = null,\n      numGlobalPlanes = 0,\n      localClippingEnabled = false,\n      renderingShadows = false,\n      plane = new Plane(),\n      viewNormalMatrix = new Matrix3(),\n      uniform = {\n    value: null,\n    needsUpdate: false\n  };\n  this.uniform = uniform;\n  this.numPlanes = 0;\n  this.numIntersection = 0;\n\n  this.init = function (planes, enableLocalClipping, camera) {\n    var enabled = planes.length !== 0 || enableLocalClipping || // enable state of previous frame - the clipping code has to\n    // run another frame in order to reset the state:\n    numGlobalPlanes !== 0 || localClippingEnabled;\n    localClippingEnabled = enableLocalClipping;\n    globalState = projectPlanes(planes, camera, 0);\n    numGlobalPlanes = planes.length;\n    return enabled;\n  };\n\n  this.beginShadows = function () {\n    renderingShadows = true;\n    projectPlanes(null);\n  };\n\n  this.endShadows = function () {\n    renderingShadows = false;\n    resetGlobalState();\n  };\n\n  this.setState = function (planes, clipIntersection, clipShadows, camera, cache, fromCache) {\n    if (!localClippingEnabled || planes === null || planes.length === 0 || renderingShadows && !clipShadows) {\n      // there's no local clipping\n      if (renderingShadows) {\n        // there's no global clipping\n        projectPlanes(null);\n      } else {\n        resetGlobalState();\n      }\n    } else {\n      var nGlobal = renderingShadows ? 0 : numGlobalPlanes,\n          lGlobal = nGlobal * 4,\n          dstArray = cache.clippingState || null;\n      uniform.value = dstArray; // ensure unique state\n\n      dstArray = projectPlanes(planes, camera, lGlobal, fromCache);\n\n      for (var i = 0; i !== lGlobal; ++i) {\n        dstArray[i] = globalState[i];\n      }\n\n      cache.clippingState = dstArray;\n      this.numIntersection = clipIntersection ? this.numPlanes : 0;\n      this.numPlanes += nGlobal;\n    }\n  };\n\n  function resetGlobalState() {\n    if (uniform.value !== globalState) {\n      uniform.value = globalState;\n      uniform.needsUpdate = numGlobalPlanes > 0;\n    }\n\n    scope.numPlanes = numGlobalPlanes;\n    scope.numIntersection = 0;\n  }\n\n  function projectPlanes(planes, camera, dstOffset, skipTransform) {\n    var nPlanes = planes !== null ? planes.length : 0,\n        dstArray = null;\n\n    if (nPlanes !== 0) {\n      dstArray = uniform.value;\n\n      if (skipTransform !== true || dstArray === null) {\n        var flatSize = dstOffset + nPlanes * 4,\n            viewMatrix = camera.matrixWorldInverse;\n        viewNormalMatrix.getNormalMatrix(viewMatrix);\n\n        if (dstArray === null || dstArray.length < flatSize) {\n          dstArray = new Float32Array(flatSize);\n        }\n\n        for (var i = 0, i4 = dstOffset; i !== nPlanes; ++i, i4 += 4) {\n          plane.copy(planes[i]).applyMatrix4(viewMatrix, viewNormalMatrix);\n          plane.normal.toArray(dstArray, i4);\n          dstArray[i4 + 3] = plane.constant;\n        }\n      }\n\n      uniform.value = dstArray;\n      uniform.needsUpdate = true;\n    }\n\n    scope.numPlanes = nPlanes;\n    scope.numIntersection = 0;\n    return dstArray;\n  }\n}\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\n\nfunction WebGLExtensions(gl) {\n  var extensions = {};\n  return {\n    get: function (name) {\n      if (extensions[name] !== undefined) {\n        return extensions[name];\n      }\n\n      var extension;\n\n      switch (name) {\n        case 'WEBGL_depth_texture':\n          extension = gl.getExtension('WEBGL_depth_texture') || gl.getExtension('MOZ_WEBGL_depth_texture') || gl.getExtension('WEBKIT_WEBGL_depth_texture');\n          break;\n\n        case 'EXT_texture_filter_anisotropic':\n          extension = gl.getExtension('EXT_texture_filter_anisotropic') || gl.getExtension('MOZ_EXT_texture_filter_anisotropic') || gl.getExtension('WEBKIT_EXT_texture_filter_anisotropic');\n          break;\n\n        case 'WEBGL_compressed_texture_s3tc':\n          extension = gl.getExtension('WEBGL_compressed_texture_s3tc') || gl.getExtension('MOZ_WEBGL_compressed_texture_s3tc') || gl.getExtension('WEBKIT_WEBGL_compressed_texture_s3tc');\n          break;\n\n        case 'WEBGL_compressed_texture_pvrtc':\n          extension = gl.getExtension('WEBGL_compressed_texture_pvrtc') || gl.getExtension('WEBKIT_WEBGL_compressed_texture_pvrtc');\n          break;\n\n        default:\n          extension = gl.getExtension(name);\n      }\n\n      if (extension === null) {\n        console.warn('THREE.WebGLRenderer: ' + name + ' extension not supported.');\n      }\n\n      extensions[name] = extension;\n      return extension;\n    }\n  };\n}\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\n\nfunction WebGLGeometries(gl, attributes, info) {\n  var geometries = new WeakMap();\n  var wireframeAttributes = new WeakMap();\n\n  function onGeometryDispose(event) {\n    var geometry = event.target;\n    var buffergeometry = geometries.get(geometry);\n\n    if (buffergeometry.index !== null) {\n      attributes.remove(buffergeometry.index);\n    }\n\n    for (var name in buffergeometry.attributes) {\n      attributes.remove(buffergeometry.attributes[name]);\n    }\n\n    geometry.removeEventListener('dispose', onGeometryDispose);\n    geometries.delete(geometry);\n    var attribute = wireframeAttributes.get(buffergeometry);\n\n    if (attribute) {\n      attributes.remove(attribute);\n      wireframeAttributes.delete(buffergeometry);\n    } //\n\n\n    info.memory.geometries--;\n  }\n\n  function get(object, geometry) {\n    var buffergeometry = geometries.get(geometry);\n    if (buffergeometry) return buffergeometry;\n    geometry.addEventListener('dispose', onGeometryDispose);\n\n    if (geometry.isBufferGeometry) {\n      buffergeometry = geometry;\n    } else if (geometry.isGeometry) {\n      if (geometry._bufferGeometry === undefined) {\n        geometry._bufferGeometry = new BufferGeometry().setFromObject(object);\n      }\n\n      buffergeometry = geometry._bufferGeometry;\n    }\n\n    geometries.set(geometry, buffergeometry);\n    info.memory.geometries++;\n    return buffergeometry;\n  }\n\n  function update(geometry) {\n    var index = geometry.index;\n    var geometryAttributes = geometry.attributes;\n\n    if (index !== null) {\n      attributes.update(index, 34963);\n    }\n\n    for (var name in geometryAttributes) {\n      attributes.update(geometryAttributes[name], 34962);\n    } // morph targets\n\n\n    var morphAttributes = geometry.morphAttributes;\n\n    for (var name in morphAttributes) {\n      var array = morphAttributes[name];\n\n      for (var i = 0, l = array.length; i < l; i++) {\n        attributes.update(array[i], 34962);\n      }\n    }\n  }\n\n  function updateWireframeAttribute(geometry) {\n    var indices = [];\n    var geometryIndex = geometry.index;\n    var geometryPosition = geometry.attributes.position;\n    var version = 0;\n\n    if (geometryIndex !== null) {\n      var array = geometryIndex.array;\n      version = geometryIndex.version;\n\n      for (var i = 0, l = array.length; i < l; i += 3) {\n        var a = array[i + 0];\n        var b = array[i + 1];\n        var c = array[i + 2];\n        indices.push(a, b, b, c, c, a);\n      }\n    } else {\n      var array = geometryPosition.array;\n      version = geometryPosition.version;\n\n      for (var i = 0, l = array.length / 3 - 1; i < l; i += 3) {\n        var a = i + 0;\n        var b = i + 1;\n        var c = i + 2;\n        indices.push(a, b, b, c, c, a);\n      }\n    }\n\n    var attribute = new (arrayMax(indices) > 65535 ? Uint32BufferAttribute : Uint16BufferAttribute)(indices, 1);\n    attribute.version = version;\n    attributes.update(attribute, 34963); //\n\n    var previousAttribute = wireframeAttributes.get(geometry);\n    if (previousAttribute) attributes.remove(previousAttribute); //\n\n    wireframeAttributes.set(geometry, attribute);\n  }\n\n  function getWireframeAttribute(geometry) {\n    var currentAttribute = wireframeAttributes.get(geometry);\n\n    if (currentAttribute) {\n      var geometryIndex = geometry.index;\n\n      if (geometryIndex !== null) {\n        // if the attribute is obsolete, create a new one\n        if (currentAttribute.version < geometryIndex.version) {\n          updateWireframeAttribute(geometry);\n        }\n      }\n    } else {\n      updateWireframeAttribute(geometry);\n    }\n\n    return wireframeAttributes.get(geometry);\n  }\n\n  return {\n    get: get,\n    update: update,\n    getWireframeAttribute: getWireframeAttribute\n  };\n}\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\n\nfunction WebGLIndexedBufferRenderer(gl, extensions, info, capabilities) {\n  var isWebGL2 = capabilities.isWebGL2;\n  var mode;\n\n  function setMode(value) {\n    mode = value;\n  }\n\n  var type, bytesPerElement;\n\n  function setIndex(value) {\n    type = value.type;\n    bytesPerElement = value.bytesPerElement;\n  }\n\n  function render(start, count) {\n    gl.drawElements(mode, count, type, start * bytesPerElement);\n    info.update(count, mode);\n  }\n\n  function renderInstances(geometry, start, count, primcount) {\n    if (primcount === 0) return;\n    var extension, methodName;\n\n    if (isWebGL2) {\n      extension = gl;\n      methodName = 'drawElementsInstanced';\n    } else {\n      extension = extensions.get('ANGLE_instanced_arrays');\n      methodName = 'drawElementsInstancedANGLE';\n\n      if (extension === null) {\n        console.error('THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.');\n        return;\n      }\n    }\n\n    extension[methodName](mode, count, type, start * bytesPerElement, primcount);\n    info.update(count, mode, primcount);\n  } //\n\n\n  this.setMode = setMode;\n  this.setIndex = setIndex;\n  this.render = render;\n  this.renderInstances = renderInstances;\n}\n/**\n * @author Mugen87 / https://github.com/Mugen87\n */\n\n\nfunction WebGLInfo(gl) {\n  var memory = {\n    geometries: 0,\n    textures: 0\n  };\n  var render = {\n    frame: 0,\n    calls: 0,\n    triangles: 0,\n    points: 0,\n    lines: 0\n  };\n\n  function update(count, mode, instanceCount) {\n    instanceCount = instanceCount || 1;\n    render.calls++;\n\n    switch (mode) {\n      case 4:\n        render.triangles += instanceCount * (count / 3);\n        break;\n\n      case 1:\n        render.lines += instanceCount * (count / 2);\n        break;\n\n      case 3:\n        render.lines += instanceCount * (count - 1);\n        break;\n\n      case 2:\n        render.lines += instanceCount * count;\n        break;\n\n      case 0:\n        render.points += instanceCount * count;\n        break;\n\n      default:\n        console.error('THREE.WebGLInfo: Unknown draw mode:', mode);\n        break;\n    }\n  }\n\n  function reset() {\n    render.frame++;\n    render.calls = 0;\n    render.triangles = 0;\n    render.points = 0;\n    render.lines = 0;\n  }\n\n  return {\n    memory: memory,\n    render: render,\n    programs: null,\n    autoReset: true,\n    reset: reset,\n    update: update\n  };\n}\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\n\nfunction absNumericalSort(a, b) {\n  return Math.abs(b[1]) - Math.abs(a[1]);\n}\n\nfunction WebGLMorphtargets(gl) {\n  var influencesList = {};\n  var morphInfluences = new Float32Array(8);\n\n  function update(object, geometry, material, program) {\n    var objectInfluences = object.morphTargetInfluences; // When object doesn't have morph target influences defined, we treat it as a 0-length array\n    // This is important to make sure we set up morphTargetBaseInfluence / morphTargetInfluences\n\n    var length = objectInfluences === undefined ? 0 : objectInfluences.length;\n    var influences = influencesList[geometry.id];\n\n    if (influences === undefined) {\n      // initialise list\n      influences = [];\n\n      for (var i = 0; i < length; i++) {\n        influences[i] = [i, 0];\n      }\n\n      influencesList[geometry.id] = influences;\n    }\n\n    var morphNormals = material.morphNormals && geometry.morphAttributes.normal; // Remove current morphAttributes\n\n    for (var i = 0; i < length; i++) {\n      var influence = influences[i];\n\n      if (influence[1] !== 0) {\n        if (morphNormals) geometry.deleteAttribute('morphNormal' + i);\n      }\n    } // Collect influences\n\n\n    for (var i = 0; i < length; i++) {\n      var influence = influences[i];\n      influence[0] = i;\n      influence[1] = objectInfluences[i];\n    }\n\n    influences.sort(absNumericalSort); // Add morphAttributes\n\n    var morphInfluencesSum = 0;\n\n    for (var i = 0; i < 8; i++) {\n      var influence = influences[i];\n\n      if (influence) {\n        var index = influence[0];\n        var value = influence[1];\n\n        if (value) {\n          if (morphNormals) geometry.setAttribute('morphNormal' + i, morphNormals[index]);\n          morphInfluences[i] = value;\n          morphInfluencesSum += value;\n          continue;\n        }\n      }\n\n      morphInfluences[i] = 0;\n    } // GLSL shader uses formula baseinfluence * base + sum(target * influence)\n    // This allows us to switch between absolute morphs and relative morphs without changing shader code\n    // When baseinfluence = 1 - sum(influence), the above is equivalent to sum((target - base) * influence)\n\n\n    var morphBaseInfluence = geometry.morphTargetsRelative ? 1 : 1 - morphInfluencesSum;\n    program.getUniforms().setValue(gl, 'morphTargetBaseInfluence', morphBaseInfluence);\n    program.getUniforms().setValue(gl, 'morphTargetInfluences', morphInfluences);\n  }\n\n  return {\n    update: update\n  };\n}\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\n\nfunction WebGLObjects(gl, geometries, attributes, info) {\n  var updateMap = new WeakMap();\n\n  function update(object) {\n    var frame = info.render.frame;\n    var geometry = object.geometry;\n    var buffergeometry = geometries.get(object, geometry); // Update once per frame\n\n    if (updateMap.get(buffergeometry) !== frame) {\n      if (geometry.isGeometry) {\n        buffergeometry.updateFromObject(object);\n      }\n\n      geometries.update(buffergeometry);\n      updateMap.set(buffergeometry, frame);\n    }\n\n    return buffergeometry;\n  }\n\n  function dispose() {\n    updateMap = new WeakMap();\n  }\n\n  return {\n    update: update,\n    dispose: dispose\n  };\n}\n\nfunction CubeTexture() {}\n\nObject.defineProperty(CubeTexture.prototype, 'images', {\n  get: function () {\n    return this.image;\n  },\n  set: function (value) {\n    this.image = value;\n  }\n});\n\nfunction DataTexture2DArray() {}\n\nfunction DataTexture3D() {}\n/**\n * @author tschw\n * @author Mugen87 / https://github.com/Mugen87\n * @author mrdoob / http://mrdoob.com/\n *\n * Uniforms of a program.\n * Those form a tree structure with a special top-level container for the root,\n * which you get by calling 'new WebGLUniforms( gl, program )'.\n *\n *\n * Properties of inner nodes including the top-level container:\n *\n * .seq - array of nested uniforms\n * .map - nested uniforms by name\n *\n *\n * Methods of all nodes except the top-level container:\n *\n * .setValue( gl, value, [textures] )\n *\n * \t\tuploads a uniform value(s)\n *  \tthe 'textures' parameter is needed for sampler uniforms\n *\n *\n * Static methods of the top-level container (textures factorizations):\n *\n * .upload( gl, seq, values, textures )\n *\n * \t\tsets uniforms in 'seq' to 'values[id].value'\n *\n * .seqWithValue( seq, values ) : filteredSeq\n *\n * \t\tfilters 'seq' entries with corresponding entry in values\n *\n *\n * Methods of the top-level container (textures factorizations):\n *\n * .setValue( gl, name, value, textures )\n *\n * \t\tsets uniform with  name 'name' to 'value'\n *\n * .setOptional( gl, obj, prop )\n *\n * \t\tlike .set for an optional property of the object\n *\n */\n\n\nvar emptyTexture = new Texture();\nvar emptyTexture2dArray = new DataTexture2DArray();\nvar emptyTexture3d = new DataTexture3D();\nvar emptyCubeTexture = new CubeTexture(); // --- Utilities ---\n// Array Caches (provide typed arrays for temporary by size)\n\nvar arrayCacheF32 = [];\nvar arrayCacheI32 = []; // Float32Array caches used for uploading Matrix uniforms\n\nvar mat4array = new Float32Array(16);\nvar mat3array = new Float32Array(9);\nvar mat2array = new Float32Array(4); // Flattening for arrays of vectors and matrices\n\nfunction flatten(array, nBlocks, blockSize) {\n  var firstElem = array[0];\n  if (firstElem <= 0 || firstElem > 0) return array; // unoptimized: ! isNaN( firstElem )\n  // see http://jacksondunstan.com/articles/983\n\n  var n = nBlocks * blockSize,\n      r = arrayCacheF32[n];\n\n  if (r === undefined) {\n    r = new Float32Array(n);\n    arrayCacheF32[n] = r;\n  }\n\n  if (nBlocks !== 0) {\n    firstElem.toArray(r, 0);\n\n    for (var i = 1, offset = 0; i !== nBlocks; ++i) {\n      offset += blockSize;\n      array[i].toArray(r, offset);\n    }\n  }\n\n  return r;\n}\n\nfunction arraysEqual(a, b) {\n  if (a.length !== b.length) return false;\n\n  for (var i = 0, l = a.length; i < l; i++) {\n    if (a[i] !== b[i]) return false;\n  }\n\n  return true;\n}\n\nfunction copyArray(a, b) {\n  for (var i = 0, l = b.length; i < l; i++) {\n    a[i] = b[i];\n  }\n} // Texture unit allocation\n\n\nfunction allocTexUnits(textures, n) {\n  var r = arrayCacheI32[n];\n\n  if (r === undefined) {\n    r = new Int32Array(n);\n    arrayCacheI32[n] = r;\n  }\n\n  for (var i = 0; i !== n; ++i) r[i] = textures.allocateTextureUnit();\n\n  return r;\n} // --- Setters ---\n// Note: Defining these methods externally, because they come in a bunch\n// and this way their names minify.\n// Single scalar\n\n\nfunction setValueV1f(gl, v) {\n  var cache = this.cache;\n  if (cache[0] === v) return;\n  gl.uniform1f(this.addr, v);\n  cache[0] = v;\n} // Single float vector (from flat array or THREE.VectorN)\n\n\nfunction setValueV2f(gl, v) {\n  var cache = this.cache;\n\n  if (v.x !== undefined) {\n    if (cache[0] !== v.x || cache[1] !== v.y) {\n      gl.uniform2f(this.addr, v.x, v.y);\n      cache[0] = v.x;\n      cache[1] = v.y;\n    }\n  } else {\n    if (arraysEqual(cache, v)) return;\n    gl.uniform2fv(this.addr, v);\n    copyArray(cache, v);\n  }\n}\n\nfunction setValueV3f(gl, v) {\n  var cache = this.cache;\n\n  if (v.x !== undefined) {\n    if (cache[0] !== v.x || cache[1] !== v.y || cache[2] !== v.z) {\n      gl.uniform3f(this.addr, v.x, v.y, v.z);\n      cache[0] = v.x;\n      cache[1] = v.y;\n      cache[2] = v.z;\n    }\n  } else if (v.r !== undefined) {\n    if (cache[0] !== v.r || cache[1] !== v.g || cache[2] !== v.b) {\n      gl.uniform3f(this.addr, v.r, v.g, v.b);\n      cache[0] = v.r;\n      cache[1] = v.g;\n      cache[2] = v.b;\n    }\n  } else {\n    if (arraysEqual(cache, v)) return;\n    gl.uniform3fv(this.addr, v);\n    copyArray(cache, v);\n  }\n}\n\nfunction setValueV4f(gl, v) {\n  var cache = this.cache;\n\n  if (v.x !== undefined) {\n    if (cache[0] !== v.x || cache[1] !== v.y || cache[2] !== v.z || cache[3] !== v.w) {\n      gl.uniform4f(this.addr, v.x, v.y, v.z, v.w);\n      cache[0] = v.x;\n      cache[1] = v.y;\n      cache[2] = v.z;\n      cache[3] = v.w;\n    }\n  } else {\n    if (arraysEqual(cache, v)) return;\n    gl.uniform4fv(this.addr, v);\n    copyArray(cache, v);\n  }\n} // Single matrix (from flat array or MatrixN)\n\n\nfunction setValueM2(gl, v) {\n  var cache = this.cache;\n  var elements = v.elements;\n\n  if (elements === undefined) {\n    if (arraysEqual(cache, v)) return;\n    gl.uniformMatrix2fv(this.addr, false, v);\n    copyArray(cache, v);\n  } else {\n    if (arraysEqual(cache, elements)) return;\n    mat2array.set(elements);\n    gl.uniformMatrix2fv(this.addr, false, mat2array);\n    copyArray(cache, elements);\n  }\n}\n\nfunction setValueM3(gl, v) {\n  var cache = this.cache;\n  var elements = v.elements;\n\n  if (elements === undefined) {\n    if (arraysEqual(cache, v)) return;\n    gl.uniformMatrix3fv(this.addr, false, v);\n    copyArray(cache, v);\n  } else {\n    if (arraysEqual(cache, elements)) return;\n    mat3array.set(elements);\n    gl.uniformMatrix3fv(this.addr, false, mat3array);\n    copyArray(cache, elements);\n  }\n}\n\nfunction setValueM4(gl, v) {\n  var cache = this.cache;\n  var elements = v.elements;\n\n  if (elements === undefined) {\n    if (arraysEqual(cache, v)) return;\n    gl.uniformMatrix4fv(this.addr, false, v);\n    copyArray(cache, v);\n  } else {\n    if (arraysEqual(cache, elements)) return;\n    mat4array.set(elements);\n    gl.uniformMatrix4fv(this.addr, false, mat4array);\n    copyArray(cache, elements);\n  }\n} // Single texture (2D / Cube)\n\n\nfunction setValueT1(gl, v, textures) {\n  var cache = this.cache;\n  var unit = textures.allocateTextureUnit();\n\n  if (cache[0] !== unit) {\n    gl.uniform1i(this.addr, unit);\n    cache[0] = unit;\n  }\n\n  textures.safeSetTexture2D(v || emptyTexture, unit);\n}\n\nfunction setValueT2DArray1(gl, v, textures) {\n  var cache = this.cache;\n  var unit = textures.allocateTextureUnit();\n\n  if (cache[0] !== unit) {\n    gl.uniform1i(this.addr, unit);\n    cache[0] = unit;\n  }\n\n  textures.setTexture2DArray(v || emptyTexture2dArray, unit);\n}\n\nfunction setValueT3D1(gl, v, textures) {\n  var cache = this.cache;\n  var unit = textures.allocateTextureUnit();\n\n  if (cache[0] !== unit) {\n    gl.uniform1i(this.addr, unit);\n    cache[0] = unit;\n  }\n\n  textures.setTexture3D(v || emptyTexture3d, unit);\n}\n\nfunction setValueT6(gl, v, textures) {\n  var cache = this.cache;\n  var unit = textures.allocateTextureUnit();\n\n  if (cache[0] !== unit) {\n    gl.uniform1i(this.addr, unit);\n    cache[0] = unit;\n  }\n\n  textures.safeSetTextureCube(v || emptyCubeTexture, unit);\n} // Integer / Boolean vectors or arrays thereof (always flat arrays)\n\n\nfunction setValueV1i(gl, v) {\n  var cache = this.cache;\n  if (cache[0] === v) return;\n  gl.uniform1i(this.addr, v);\n  cache[0] = v;\n}\n\nfunction setValueV2i(gl, v) {\n  var cache = this.cache;\n  if (arraysEqual(cache, v)) return;\n  gl.uniform2iv(this.addr, v);\n  copyArray(cache, v);\n}\n\nfunction setValueV3i(gl, v) {\n  var cache = this.cache;\n  if (arraysEqual(cache, v)) return;\n  gl.uniform3iv(this.addr, v);\n  copyArray(cache, v);\n}\n\nfunction setValueV4i(gl, v) {\n  var cache = this.cache;\n  if (arraysEqual(cache, v)) return;\n  gl.uniform4iv(this.addr, v);\n  copyArray(cache, v);\n} // uint\n\n\nfunction setValueV1ui(gl, v) {\n  var cache = this.cache;\n  if (cache[0] === v) return;\n  gl.uniform1ui(this.addr, v);\n  cache[0] = v;\n} // Helper to pick the right setter for the singular case\n\n\nfunction getSingularSetter(type) {\n  switch (type) {\n    case 0x1406:\n      return setValueV1f;\n    // FLOAT\n\n    case 0x8b50:\n      return setValueV2f;\n    // _VEC2\n\n    case 0x8b51:\n      return setValueV3f;\n    // _VEC3\n\n    case 0x8b52:\n      return setValueV4f;\n    // _VEC4\n\n    case 0x8b5a:\n      return setValueM2;\n    // _MAT2\n\n    case 0x8b5b:\n      return setValueM3;\n    // _MAT3\n\n    case 0x8b5c:\n      return setValueM4;\n    // _MAT4\n\n    case 0x1404:\n    case 0x8b56:\n      return setValueV1i;\n    // INT, BOOL\n\n    case 0x8b53:\n    case 0x8b57:\n      return setValueV2i;\n    // _VEC2\n\n    case 0x8b54:\n    case 0x8b58:\n      return setValueV3i;\n    // _VEC3\n\n    case 0x8b55:\n    case 0x8b59:\n      return setValueV4i;\n    // _VEC4\n\n    case 0x1405:\n      return setValueV1ui;\n    // UINT\n\n    case 0x8b5e: // SAMPLER_2D\n\n    case 0x8d66: // SAMPLER_EXTERNAL_OES\n\n    case 0x8dca: // INT_SAMPLER_2D\n\n    case 0x8dd2: // UNSIGNED_INT_SAMPLER_2D\n\n    case 0x8b62:\n      // SAMPLER_2D_SHADOW\n      return setValueT1;\n\n    case 0x8b5f: // SAMPLER_3D\n\n    case 0x8dcb: // INT_SAMPLER_3D\n\n    case 0x8dd3:\n      // UNSIGNED_INT_SAMPLER_3D\n      return setValueT3D1;\n\n    case 0x8b60: // SAMPLER_CUBE\n\n    case 0x8dcc: // INT_SAMPLER_CUBE\n\n    case 0x8dd4: // UNSIGNED_INT_SAMPLER_CUBE\n\n    case 0x8dc5:\n      // SAMPLER_CUBE_SHADOW\n      return setValueT6;\n\n    case 0x8dc1: // SAMPLER_2D_ARRAY\n\n    case 0x8dcf: // INT_SAMPLER_2D_ARRAY\n\n    case 0x8dd7: // UNSIGNED_INT_SAMPLER_2D_ARRAY\n\n    case 0x8dc4:\n      // SAMPLER_2D_ARRAY_SHADOW\n      return setValueT2DArray1;\n  }\n} // Array of scalars\n\n\nfunction setValueV1fArray(gl, v) {\n  gl.uniform1fv(this.addr, v);\n} // Integer / Boolean vectors or arrays thereof (always flat arrays)\n\n\nfunction setValueV1iArray(gl, v) {\n  gl.uniform1iv(this.addr, v);\n}\n\nfunction setValueV2iArray(gl, v) {\n  gl.uniform2iv(this.addr, v);\n}\n\nfunction setValueV3iArray(gl, v) {\n  gl.uniform3iv(this.addr, v);\n}\n\nfunction setValueV4iArray(gl, v) {\n  gl.uniform4iv(this.addr, v);\n} // Array of vectors (flat or from THREE classes)\n\n\nfunction setValueV2fArray(gl, v) {\n  var data = flatten(v, this.size, 2);\n  gl.uniform2fv(this.addr, data);\n}\n\nfunction setValueV3fArray(gl, v) {\n  var data = flatten(v, this.size, 3);\n  gl.uniform3fv(this.addr, data);\n}\n\nfunction setValueV4fArray(gl, v) {\n  var data = flatten(v, this.size, 4);\n  gl.uniform4fv(this.addr, data);\n} // Array of matrices (flat or from THREE clases)\n\n\nfunction setValueM2Array(gl, v) {\n  var data = flatten(v, this.size, 4);\n  gl.uniformMatrix2fv(this.addr, false, data);\n}\n\nfunction setValueM3Array(gl, v) {\n  var data = flatten(v, this.size, 9);\n  gl.uniformMatrix3fv(this.addr, false, data);\n}\n\nfunction setValueM4Array(gl, v) {\n  var data = flatten(v, this.size, 16);\n  gl.uniformMatrix4fv(this.addr, false, data);\n} // Array of textures (2D / Cube)\n\n\nfunction setValueT1Array(gl, v, textures) {\n  var n = v.length;\n  var units = allocTexUnits(textures, n);\n  gl.uniform1iv(this.addr, units);\n\n  for (var i = 0; i !== n; ++i) {\n    textures.safeSetTexture2D(v[i] || emptyTexture, units[i]);\n  }\n}\n\nfunction setValueT6Array(gl, v, textures) {\n  var n = v.length;\n  var units = allocTexUnits(textures, n);\n  gl.uniform1iv(this.addr, units);\n\n  for (var i = 0; i !== n; ++i) {\n    textures.safeSetTextureCube(v[i] || emptyCubeTexture, units[i]);\n  }\n} // Helper to pick the right setter for a pure (bottom-level) array\n\n\nfunction getPureArraySetter(type) {\n  switch (type) {\n    case 0x1406:\n      return setValueV1fArray;\n    // FLOAT\n\n    case 0x8b50:\n      return setValueV2fArray;\n    // _VEC2\n\n    case 0x8b51:\n      return setValueV3fArray;\n    // _VEC3\n\n    case 0x8b52:\n      return setValueV4fArray;\n    // _VEC4\n\n    case 0x8b5a:\n      return setValueM2Array;\n    // _MAT2\n\n    case 0x8b5b:\n      return setValueM3Array;\n    // _MAT3\n\n    case 0x8b5c:\n      return setValueM4Array;\n    // _MAT4\n\n    case 0x1404:\n    case 0x8b56:\n      return setValueV1iArray;\n    // INT, BOOL\n\n    case 0x8b53:\n    case 0x8b57:\n      return setValueV2iArray;\n    // _VEC2\n\n    case 0x8b54:\n    case 0x8b58:\n      return setValueV3iArray;\n    // _VEC3\n\n    case 0x8b55:\n    case 0x8b59:\n      return setValueV4iArray;\n    // _VEC4\n\n    case 0x8b5e: // SAMPLER_2D\n\n    case 0x8d66: // SAMPLER_EXTERNAL_OES\n\n    case 0x8dca: // INT_SAMPLER_2D\n\n    case 0x8dd2: // UNSIGNED_INT_SAMPLER_2D\n\n    case 0x8b62:\n      // SAMPLER_2D_SHADOW\n      return setValueT1Array;\n\n    case 0x8b60: // SAMPLER_CUBE\n\n    case 0x8dcc: // INT_SAMPLER_CUBE\n\n    case 0x8dd4: // UNSIGNED_INT_SAMPLER_CUBE\n\n    case 0x8dc5:\n      // SAMPLER_CUBE_SHADOW\n      return setValueT6Array;\n  }\n} // --- Uniform Classes ---\n\n\nfunction SingleUniform(id, activeInfo, addr) {\n  this.id = id;\n  this.addr = addr;\n  this.cache = [];\n  this.setValue = getSingularSetter(activeInfo.type); // this.path = activeInfo.name; // DEBUG\n}\n\nfunction PureArrayUniform(id, activeInfo, addr) {\n  this.id = id;\n  this.addr = addr;\n  this.cache = [];\n  this.size = activeInfo.size;\n  this.setValue = getPureArraySetter(activeInfo.type); // this.path = activeInfo.name; // DEBUG\n}\n\nPureArrayUniform.prototype.updateCache = function (data) {\n  var cache = this.cache;\n\n  if (data instanceof Float32Array && cache.length !== data.length) {\n    this.cache = new Float32Array(data.length);\n  }\n\n  copyArray(cache, data);\n};\n\nfunction StructuredUniform(id) {\n  this.id = id;\n  this.seq = [];\n  this.map = {};\n}\n\nStructuredUniform.prototype.setValue = function (gl, value, textures) {\n  var seq = this.seq;\n\n  for (var i = 0, n = seq.length; i !== n; ++i) {\n    var u = seq[i];\n    u.setValue(gl, value[u.id], textures);\n  }\n}; // --- Top-level ---\n// Parser - builds up the property tree from the path strings\n\n\nvar RePathPart = /([\\w\\d_]+)(\\])?(\\[|\\.)?/g; // extracts\n// \t- the identifier (member name or array index)\n//  - followed by an optional right bracket (found when array index)\n//  - followed by an optional left bracket or dot (type of subscript)\n//\n// Note: These portions can be read in a non-overlapping fashion and\n// allow straightforward parsing of the hierarchy that WebGL encodes\n// in the uniform names.\n\nfunction addUniform(container, uniformObject) {\n  container.seq.push(uniformObject);\n  container.map[uniformObject.id] = uniformObject;\n}\n\nfunction parseUniform(activeInfo, addr, container) {\n  var path = activeInfo.name,\n      pathLength = path.length; // reset RegExp object, because of the early exit of a previous run\n\n  RePathPart.lastIndex = 0;\n\n  while (true) {\n    var match = RePathPart.exec(path),\n        matchEnd = RePathPart.lastIndex,\n        id = match[1],\n        idIsIndex = match[2] === ']',\n        subscript = match[3];\n    if (idIsIndex) id = id | 0; // convert to integer\n\n    if (subscript === undefined || subscript === '[' && matchEnd + 2 === pathLength) {\n      // bare name or \"pure\" bottom-level array \"[0]\" suffix\n      addUniform(container, subscript === undefined ? new SingleUniform(id, activeInfo, addr) : new PureArrayUniform(id, activeInfo, addr));\n      break;\n    } else {\n      // step into inner node / create it in case it doesn't exist\n      var map = container.map,\n          next = map[id];\n\n      if (next === undefined) {\n        next = new StructuredUniform(id);\n        addUniform(container, next);\n      }\n\n      container = next;\n    }\n  }\n} // Root Container\n\n\nfunction WebGLUniforms(gl, program) {\n  this.seq = [];\n  this.map = {};\n  var n = gl.getProgramParameter(program, 35718);\n\n  for (var i = 0; i < n; ++i) {\n    var info = gl.getActiveUniform(program, i),\n        addr = gl.getUniformLocation(program, info.name);\n    parseUniform(info, addr, this);\n  }\n}\n\nWebGLUniforms.prototype.setValue = function (gl, name, value, textures) {\n  var u = this.map[name];\n  if (u !== undefined) u.setValue(gl, value, textures);\n};\n\nWebGLUniforms.prototype.setOptional = function (gl, object, name) {\n  var v = object[name];\n  if (v !== undefined) this.setValue(gl, name, v);\n}; // Static interface\n\n\nWebGLUniforms.upload = function (gl, seq, values, textures) {\n  for (var i = 0, n = seq.length; i !== n; ++i) {\n    var u = seq[i],\n        v = values[u.id];\n\n    if (v.needsUpdate !== false) {\n      // note: always updating when .needsUpdate is undefined\n      u.setValue(gl, v.value, textures);\n    }\n  }\n};\n\nWebGLUniforms.seqWithValue = function (seq, values) {\n  var r = [];\n\n  for (var i = 0, n = seq.length; i !== n; ++i) {\n    var u = seq[i];\n    if (u.id in values) r.push(u);\n  }\n\n  return r;\n};\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\n\nfunction WebGLShader(gl, type, string) {\n  var shader = gl.createShader(type);\n  gl.shaderSource(shader, string);\n  gl.compileShader(shader);\n  return shader;\n}\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\n\nvar programIdCount = 0;\n\nfunction addLineNumbers(string) {\n  var lines = string.split('\\n');\n\n  for (var i = 0; i < lines.length; i++) {\n    lines[i] = i + 1 + ': ' + lines[i];\n  }\n\n  return lines.join('\\n');\n}\n\nfunction getShaderErrors(gl, shader, type) {\n  var status = gl.getShaderParameter(shader, 35713);\n  var log = gl.getShaderInfoLog(shader).trim();\n  if (status && log === '') return ''; // --enable-privileged-webgl-extension\n  // console.log( '**' + type + '**', gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( shader ) );\n\n  var source = gl.getShaderSource(shader);\n  return 'THREE.WebGLShader: gl.getShaderInfoLog() ' + type + '\\n' + log + addLineNumbers(source);\n}\n\nfunction generateExtensions(parameters) {\n  var chunks = [parameters.extensionDerivatives || parameters.envMapCubeUV || parameters.bumpMap || parameters.tangentSpaceNormalMap || parameters.clearcoatNormalMap || parameters.flatShading || parameters.shaderID === 'physical' ? '#extension GL_OES_standard_derivatives : enable' : '', (parameters.extensionFragDepth || parameters.logarithmicDepthBuffer) && parameters.rendererExtensionFragDepth ? '#extension GL_EXT_frag_depth : enable' : '', parameters.extensionDrawBuffers && parameters.rendererExtensionDrawBuffers ? '#extension GL_EXT_draw_buffers : require' : '', (parameters.extensionShaderTextureLOD || false) && parameters.rendererExtensionShaderTextureLod ? '#extension GL_EXT_shader_texture_lod : enable' : ''];\n  return chunks.filter(filterEmptyLine).join('\\n');\n}\n\nfunction generateDefines(defines) {\n  var chunks = [];\n\n  for (var name in defines) {\n    var value = defines[name];\n    if (value === false) continue;\n    chunks.push('#define ' + name + ' ' + value);\n  }\n\n  return chunks.join('\\n');\n}\n\nfunction fetchAttributeLocations(gl, program) {\n  var attributes = {};\n  var n = gl.getProgramParameter(program, 35721);\n\n  for (var i = 0; i < n; i++) {\n    var info = gl.getActiveAttrib(program, i);\n    var name = info.name; // console.log( 'THREE.WebGLProgram: ACTIVE VERTEX ATTRIBUTE:', name, i );\n\n    attributes[name] = gl.getAttribLocation(program, name);\n  }\n\n  return attributes;\n}\n\nfunction filterEmptyLine(string) {\n  return string !== '';\n}\n\nfunction replaceLightNums(string, parameters) {\n  return string.replace(/NUM_DIR_LIGHTS/g, parameters.numDirLights).replace(/NUM_SPOT_LIGHTS/g, parameters.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g, parameters.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g, parameters.numPointLights).replace(/NUM_HEMI_LIGHTS/g, parameters.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g, parameters.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g, parameters.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g, parameters.numPointLightShadows);\n}\n\nfunction replaceClippingPlaneNums(string, parameters) {\n  return string.replace(/NUM_CLIPPING_PLANES/g, parameters.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g, parameters.numClippingPlanes - parameters.numClipIntersection);\n} // Resolve Includes\n\n\nvar includePattern = /^[ \\t]*#include +<([\\w\\d./]+)>/gm;\n\nfunction resolveIncludes(string) {\n  return string.replace(includePattern, includeReplacer);\n}\n\nfunction includeReplacer(match, include) {\n  var string = ShaderChunk[include];\n\n  if (string === undefined) {\n    throw new Error('Can not resolve #include <' + include + '>');\n  }\n\n  return resolveIncludes(string);\n} // Unroll Loops\n\n\nvar loopPattern = /#pragma unroll_loop[\\s]+?for \\( int i \\= (\\d+)\\; i < (\\d+)\\; i \\+\\+ \\) \\{([\\s\\S]+?)(?=\\})\\}/g;\n\nfunction unrollLoops(string) {\n  return string.replace(loopPattern, loopReplacer);\n}\n\nfunction loopReplacer(match, start, end, snippet) {\n  var string = '';\n\n  for (var i = parseInt(start); i < parseInt(end); i++) {\n    string += snippet.replace(/\\[ i \\]/g, '[ ' + i + ' ]').replace(/UNROLLED_LOOP_INDEX/g, i);\n  }\n\n  return string;\n}\n\nfunction WebGLProgram(renderer, cacheKey, parameters) {\n  var gl = renderer.getContext();\n  var defines = parameters.defines;\n  var vertexShader = parameters.vertexShader;\n  var fragmentShader = parameters.fragmentShader;\n  var gammaFactorDefine = renderer.gammaFactor > 0 ? renderer.gammaFactor : 1.0;\n  var customExtensions = parameters.isWebGL2 ? '' : generateExtensions(parameters);\n  var customDefines = generateDefines(defines);\n  var program = gl.createProgram();\n  var prefixVertex, prefixFragment;\n  {\n    prefixVertex = [customDefines].filter(filterEmptyLine).join('\\n');\n\n    if (prefixVertex.length > 0) {\n      prefixVertex += '\\n';\n    }\n\n    prefixFragment = [customExtensions, customDefines].filter(filterEmptyLine).join('\\n');\n\n    if (prefixFragment.length > 0) {\n      prefixFragment += '\\n';\n    }\n  }\n  vertexShader = resolveIncludes(vertexShader);\n  vertexShader = replaceLightNums(vertexShader, parameters);\n  vertexShader = replaceClippingPlaneNums(vertexShader, parameters);\n  fragmentShader = resolveIncludes(fragmentShader);\n  fragmentShader = replaceLightNums(fragmentShader, parameters);\n  fragmentShader = replaceClippingPlaneNums(fragmentShader, parameters);\n  vertexShader = unrollLoops(vertexShader);\n  fragmentShader = unrollLoops(fragmentShader);\n\n  if (parameters.isWebGL2 && !true) {\n    var isGLSL3ShaderMaterial = false;\n    var versionRegex = /^\\s*#version\\s+300\\s+es\\s*\\n/;\n\n    if (vertexShader.match(versionRegex) !== null && fragmentShader.match(versionRegex) !== null) {\n      isGLSL3ShaderMaterial = true;\n      vertexShader = vertexShader.replace(versionRegex, '');\n      fragmentShader = fragmentShader.replace(versionRegex, '');\n    } // GLSL 3.0 conversion\n\n\n    prefixVertex = ['#version 300 es\\n', '#define attribute in', '#define varying out', '#define texture2D texture'].join('\\n') + '\\n' + prefixVertex;\n    prefixFragment = ['#version 300 es\\n', '#define varying in', isGLSL3ShaderMaterial ? '' : 'out highp vec4 pc_fragColor;', isGLSL3ShaderMaterial ? '' : '#define gl_FragColor pc_fragColor', '#define gl_FragDepthEXT gl_FragDepth', '#define texture2D texture', '#define textureCube texture', '#define texture2DProj textureProj', '#define texture2DLodEXT textureLod', '#define texture2DProjLodEXT textureProjLod', '#define textureCubeLodEXT textureLod', '#define texture2DGradEXT textureGrad', '#define texture2DProjGradEXT textureProjGrad', '#define textureCubeGradEXT textureGrad'].join('\\n') + '\\n' + prefixFragment;\n  }\n\n  var vertexGlsl = prefixVertex + vertexShader;\n  var fragmentGlsl = prefixFragment + fragmentShader; // console.log( '*VERTEX*', vertexGlsl );\n  // console.log( '*FRAGMENT*', fragmentGlsl );\n\n  var glVertexShader = WebGLShader(gl, 35633, vertexGlsl);\n  var glFragmentShader = WebGLShader(gl, 35632, fragmentGlsl);\n  gl.attachShader(program, glVertexShader);\n  gl.attachShader(program, glFragmentShader); // Force a particular attribute to index 0.\n\n  if (parameters.index0AttributeName !== undefined) {\n    gl.bindAttribLocation(program, 0, parameters.index0AttributeName);\n  }\n\n  gl.linkProgram(program); // check for link errors\n\n  if (renderer.debug.checkShaderErrors) {\n    var programLog = gl.getProgramInfoLog(program).trim();\n    var vertexLog = gl.getShaderInfoLog(glVertexShader).trim();\n    var fragmentLog = gl.getShaderInfoLog(glFragmentShader).trim();\n    var runnable = true;\n    var haveDiagnostics = true;\n\n    if (gl.getProgramParameter(program, 35714) === false) {\n      runnable = false;\n      var vertexErrors = getShaderErrors(gl, glVertexShader, 'vertex');\n      var fragmentErrors = getShaderErrors(gl, glFragmentShader, 'fragment');\n      console.error('THREE.WebGLProgram: shader error: ', gl.getError(), '35715', gl.getProgramParameter(program, 35715), 'gl.getProgramInfoLog', programLog, vertexErrors, fragmentErrors);\n    } else if (programLog !== '') {\n      console.warn('THREE.WebGLProgram: gl.getProgramInfoLog()', programLog);\n    } else if (vertexLog === '' || fragmentLog === '') {\n      haveDiagnostics = false;\n    }\n\n    if (haveDiagnostics) {\n      this.diagnostics = {\n        runnable: runnable,\n        programLog: programLog,\n        vertexShader: {\n          log: vertexLog,\n          prefix: prefixVertex\n        },\n        fragmentShader: {\n          log: fragmentLog,\n          prefix: prefixFragment\n        }\n      };\n    }\n  } // clean up\n\n\n  gl.detachShader(program, glVertexShader);\n  gl.detachShader(program, glFragmentShader);\n  gl.deleteShader(glVertexShader);\n  gl.deleteShader(glFragmentShader); // set up caching for uniform locations\n\n  var cachedUniforms;\n\n  this.getUniforms = function () {\n    if (cachedUniforms === undefined) {\n      cachedUniforms = new WebGLUniforms(gl, program);\n    }\n\n    return cachedUniforms;\n  }; // set up caching for attribute locations\n\n\n  var cachedAttributes;\n\n  this.getAttributes = function () {\n    if (cachedAttributes === undefined) {\n      cachedAttributes = fetchAttributeLocations(gl, program);\n    }\n\n    return cachedAttributes;\n  }; // free resource\n\n\n  this.destroy = function () {\n    gl.deleteProgram(program);\n    this.program = undefined;\n  }; //\n\n\n  this.name = parameters.shaderName;\n  this.id = programIdCount++;\n  this.cacheKey = cacheKey;\n  this.usedTimes = 1;\n  this.program = program;\n  this.vertexShader = glVertexShader;\n  this.fragmentShader = glFragmentShader;\n  return this;\n}\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\n\nfunction WebGLPrograms(renderer, extensions, capabilities) {\n  var programs = [];\n  var isWebGL2 = capabilities.isWebGL2;\n  var logarithmicDepthBuffer = capabilities.logarithmicDepthBuffer;\n  var floatVertexTextures = capabilities.floatVertexTextures;\n  var precision = capabilities.precision;\n  var maxVertexUniforms = capabilities.maxVertexUniforms;\n  var vertexTextures = capabilities.vertexTextures;\n  var shaderIDs = {\n    MeshDepthMaterial: 'depth',\n    MeshDistanceMaterial: 'distanceRGBA',\n    MeshNormalMaterial: 'normal',\n    MeshBasicMaterial: 'basic',\n    MeshLambertMaterial: 'lambert',\n    MeshPhongMaterial: 'phong',\n    MeshToonMaterial: 'toon',\n    MeshStandardMaterial: 'physical',\n    MeshPhysicalMaterial: 'physical',\n    MeshMatcapMaterial: 'matcap',\n    LineBasicMaterial: 'basic',\n    LineDashedMaterial: 'dashed',\n    PointsMaterial: 'points',\n    ShadowMaterial: 'shadow',\n    SpriteMaterial: 'sprite'\n  };\n\n  function getShaderObject(material, shaderID) {\n    var shaderobject;\n\n    if (shaderID) {\n      var shader = ShaderLib[shaderID];\n      shaderobject = {\n        name: material.type,\n        uniforms: UniformsUtils.clone(shader.uniforms),\n        vertexShader: shader.vertexShader,\n        fragmentShader: shader.fragmentShader\n      };\n    } else {\n      shaderobject = {\n        name: material.type,\n        uniforms: material.uniforms,\n        vertexShader: material.vertexShader,\n        fragmentShader: material.fragmentShader\n      };\n    }\n\n    return shaderobject;\n  }\n\n  function getTextureEncodingFromMap(map) {\n    var encoding;\n\n    if (!map) {\n      encoding = LinearEncoding;\n    } else if (map.isTexture) {\n      encoding = map.encoding;\n    } else if (map.isWebGLRenderTarget) {\n      console.warn(\"THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead.\");\n      encoding = map.texture.encoding;\n    }\n\n    return encoding;\n  }\n\n  this.getParameters = function (material, lights, shadows, scene, nClipPlanes, nClipIntersection, object) {\n    var fog = scene.fog;\n    var environment = null;\n    var envMap = environment;\n    var shaderID = shaderIDs[material.type]; // heuristics to create shader parameters according to lights in the scene\n    // (not to blow over maxLights budget)\n\n    var maxBones = 0;\n\n    if (material.precision !== null) {\n      precision = capabilities.getMaxPrecision(material.precision);\n\n      if (precision !== material.precision) {\n        console.warn('THREE.WebGLProgram.getParameters:', material.precision, 'not supported, using', precision, 'instead.');\n      }\n    }\n\n    var shaderobject = getShaderObject(material, shaderID);\n    material.onBeforeCompile(shaderobject, renderer);\n    var currentRenderTarget = renderer.getRenderTarget();\n    var parameters = {\n      isWebGL2: isWebGL2,\n      shaderID: shaderID,\n      shaderName: shaderobject.name,\n      uniforms: shaderobject.uniforms,\n      vertexShader: shaderobject.vertexShader,\n      fragmentShader: shaderobject.fragmentShader,\n      defines: material.defines,\n      isRawShaderMaterial: true,\n      isShaderMaterial: true,\n      precision: precision,\n      instancing: false === true,\n      supportsVertexTextures: vertexTextures,\n      outputEncoding: currentRenderTarget !== null ? getTextureEncodingFromMap(currentRenderTarget.texture) : renderer.outputEncoding,\n      map: !!material.map,\n      mapEncoding: getTextureEncodingFromMap(material.map),\n      matcap: !!material.matcap,\n      matcapEncoding: getTextureEncodingFromMap(material.matcap),\n      envMap: !!envMap,\n      envMapMode: envMap,\n      envMapEncoding: getTextureEncodingFromMap(envMap),\n      envMapCubeUV: !!envMap,\n      lightMap: !!material.lightMap,\n      lightMapEncoding: getTextureEncodingFromMap(material.lightMap),\n      aoMap: !!material.aoMap,\n      emissiveMap: !!material.emissiveMap,\n      emissiveMapEncoding: getTextureEncodingFromMap(material.emissiveMap),\n      bumpMap: !!material.bumpMap,\n      normalMap: !!material.normalMap,\n      objectSpaceNormalMap: material.normalMapType === ObjectSpaceNormalMap,\n      tangentSpaceNormalMap: material.normalMapType === TangentSpaceNormalMap,\n      clearcoatNormalMap: !!material.clearcoatNormalMap,\n      displacementMap: !!material.displacementMap,\n      roughnessMap: !!material.roughnessMap,\n      metalnessMap: !!material.metalnessMap,\n      specularMap: !!material.specularMap,\n      alphaMap: !!material.alphaMap,\n      gradientMap: !!material.gradientMap,\n      sheen: !!material.sheen,\n      combine: material.combine,\n      vertexTangents: material.normalMap && material.vertexTangents,\n      vertexColors: material.vertexColors,\n      vertexUvs: !!material.map || !!material.bumpMap || !!material.normalMap || !!material.specularMap || !!material.alphaMap || !!material.emissiveMap || !!material.roughnessMap || !!material.metalnessMap || !!material.clearcoatNormalMap || !!material.displacementMap,\n      uvsVertexOnly: !(!!material.map || !!material.bumpMap || !!material.normalMap || !!material.specularMap || !!material.alphaMap || !!material.emissiveMap || !!material.roughnessMap || !!material.metalnessMap || !!material.clearcoatNormalMap) && !!material.displacementMap,\n      fog: !!fog,\n      useFog: material.fog,\n      fogExp2: fog && fog.isFogExp2,\n      flatShading: material.flatShading,\n      sizeAttenuation: material.sizeAttenuation,\n      logarithmicDepthBuffer: logarithmicDepthBuffer,\n      skinning: material.skinning && maxBones > 0,\n      maxBones: maxBones,\n      useVertexTexture: floatVertexTextures,\n      morphTargets: false,\n      morphNormals: material.morphNormals,\n      maxMorphTargets: renderer.maxMorphTargets,\n      maxMorphNormals: renderer.maxMorphNormals,\n      numDirLights: lights.directional.length,\n      numPointLights: lights.point.length,\n      numSpotLights: lights.spot.length,\n      numRectAreaLights: lights.rectArea.length,\n      numHemiLights: lights.hemi.length,\n      numDirLightShadows: lights.directionalShadowMap.length,\n      numPointLightShadows: lights.pointShadowMap.length,\n      numSpotLightShadows: lights.spotShadowMap.length,\n      numClippingPlanes: nClipPlanes,\n      numClipIntersection: nClipIntersection,\n      dithering: material.dithering,\n      shadowMapEnabled: renderer.shadowMap.enabled && shadows.length > 0,\n      shadowMapType: renderer.shadowMap.type,\n      toneMapping: material.toneMapped ? renderer.toneMapping : NoToneMapping,\n      physicallyCorrectLights: renderer.physicallyCorrectLights,\n      premultipliedAlpha: material.premultipliedAlpha,\n      alphaTest: material.alphaTest,\n      doubleSided: material.side === DoubleSide,\n      flipSided: material.side === BackSide,\n      depthPacking: material.depthPacking !== undefined ? material.depthPacking : false,\n      index0AttributeName: material.index0AttributeName,\n      extensionDerivatives: material.extensions && material.extensions.derivatives,\n      extensionFragDepth: material.extensions && material.extensions.fragDepth,\n      extensionDrawbuffers: material.extensions && material.extensions.drawBuffers,\n      extensionShaderTextureLOD: material.extensions && material.extensions.shaderTextureLOD,\n      rendererExtensionFragDepth: isWebGL2 || extensions.get('EXT_frag_depth') !== null,\n      rendererExtensionDrawBuffers: isWebGL2 || extensions.get('WEBGL_draw_buffers') !== null,\n      rendererExtensionShaderTextureLod: isWebGL2 || extensions.get('EXT_shader_texture_lod') !== null,\n      onBeforeCompile: material.onBeforeCompile\n    };\n    return parameters;\n  };\n\n  this.getProgramCacheKey = function (parameters) {\n    var array = [];\n\n    if (parameters.shaderID) {\n      array.push(parameters.shaderID);\n    } else {\n      array.push(parameters.fragmentShader);\n      array.push(parameters.vertexShader);\n    }\n\n    if (parameters.defines !== undefined) {\n      for (var name in parameters.defines) {\n        array.push(name);\n        array.push(parameters.defines[name]);\n      }\n    }\n\n    array.push(parameters.onBeforeCompile.toString());\n    return array.join();\n  };\n\n  this.acquireProgram = function (parameters, cacheKey) {\n    var program; // Check if code has been already compiled\n\n    for (var p = 0, pl = programs.length; p < pl; p++) {\n      var preexistingProgram = programs[p];\n\n      if (preexistingProgram.cacheKey === cacheKey) {\n        program = preexistingProgram;\n        ++program.usedTimes;\n        break;\n      }\n    }\n\n    if (program === undefined) {\n      program = new WebGLProgram(renderer, cacheKey, parameters);\n      programs.push(program);\n    }\n\n    return program;\n  };\n\n  this.releaseProgram = function (program) {\n    if (--program.usedTimes === 0) {\n      // Remove from unordered set\n      var i = programs.indexOf(program);\n      programs[i] = programs[programs.length - 1];\n      programs.pop(); // Free WebGL resources\n\n      program.destroy();\n    }\n  }; // Exposed for resource monitoring & error feedback via renderer.info:\n\n\n  this.programs = programs;\n}\n/**\n * @author fordacious / fordacious.github.io\n */\n\n\nfunction WebGLProperties() {\n  var properties = new WeakMap();\n\n  function get(object) {\n    var map = properties.get(object);\n\n    if (map === undefined) {\n      map = {};\n      properties.set(object, map);\n    }\n\n    return map;\n  }\n\n  function remove(object) {\n    properties.delete(object);\n  }\n\n  function update(object, key, value) {\n    properties.get(object)[key] = value;\n  }\n\n  function dispose() {\n    properties = new WeakMap();\n  }\n\n  return {\n    get: get,\n    remove: remove,\n    update: update,\n    dispose: dispose\n  };\n}\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\n\nfunction painterSortStable(a, b) {\n  if (a.groupOrder !== b.groupOrder) {\n    return a.groupOrder - b.groupOrder;\n  } else if (a.renderOrder !== b.renderOrder) {\n    return a.renderOrder - b.renderOrder;\n  } else if (a.program !== b.program) {\n    return a.program.id - b.program.id;\n  } else if (a.material.id !== b.material.id) {\n    return a.material.id - b.material.id;\n  } else if (a.z !== b.z) {\n    return a.z - b.z;\n  } else {\n    return a.id - b.id;\n  }\n}\n\nfunction reversePainterSortStable(a, b) {\n  if (a.groupOrder !== b.groupOrder) {\n    return a.groupOrder - b.groupOrder;\n  } else if (a.renderOrder !== b.renderOrder) {\n    return a.renderOrder - b.renderOrder;\n  } else if (a.z !== b.z) {\n    return b.z - a.z;\n  } else {\n    return a.id - b.id;\n  }\n}\n\nfunction WebGLRenderList() {\n  var renderItems = [];\n  var renderItemsIndex = 0;\n  var opaque = [];\n  var transparent = [];\n  var defaultProgram = {\n    id: -1\n  };\n\n  function init() {\n    renderItemsIndex = 0;\n    opaque.length = 0;\n    transparent.length = 0;\n  }\n\n  function getNextRenderItem(object, geometry, material, groupOrder, z, group) {\n    var renderItem = renderItems[renderItemsIndex];\n\n    if (renderItem === undefined) {\n      renderItem = {\n        id: object.id,\n        object: object,\n        geometry: geometry,\n        material: material,\n        program: material.program || defaultProgram,\n        groupOrder: groupOrder,\n        renderOrder: object.renderOrder,\n        z: z,\n        group: group\n      };\n      renderItems[renderItemsIndex] = renderItem;\n    } else {\n      renderItem.id = object.id;\n      renderItem.object = object;\n      renderItem.geometry = geometry;\n      renderItem.material = material;\n      renderItem.program = material.program || defaultProgram;\n      renderItem.groupOrder = groupOrder;\n      renderItem.renderOrder = object.renderOrder;\n      renderItem.z = z;\n      renderItem.group = group;\n    }\n\n    renderItemsIndex++;\n    return renderItem;\n  }\n\n  function push(object, geometry, material, groupOrder, z, group) {\n    var renderItem = getNextRenderItem(object, geometry, material, groupOrder, z, group);\n    (material.transparent === true ? transparent : opaque).push(renderItem);\n  }\n\n  function unshift(object, geometry, material, groupOrder, z, group) {\n    var renderItem = getNextRenderItem(object, geometry, material, groupOrder, z, group);\n    (material.transparent === true ? transparent : opaque).unshift(renderItem);\n  }\n\n  function sort(customOpaqueSort, customTransparentSort) {\n    if (opaque.length > 1) opaque.sort(customOpaqueSort || painterSortStable);\n    if (transparent.length > 1) transparent.sort(customTransparentSort || reversePainterSortStable);\n  }\n\n  function finish() {\n    // Clear references from inactive renderItems in the list\n    for (var i = renderItemsIndex, il = renderItems.length; i < il; i++) {\n      var renderItem = renderItems[i];\n      if (renderItem.id === null) break;\n      renderItem.id = null;\n      renderItem.object = null;\n      renderItem.geometry = null;\n      renderItem.material = null;\n      renderItem.program = null;\n      renderItem.group = null;\n    }\n  }\n\n  return {\n    opaque: opaque,\n    transparent: transparent,\n    init: init,\n    push: push,\n    unshift: unshift,\n    finish: finish,\n    sort: sort\n  };\n}\n\nfunction WebGLRenderLists() {\n  var lists = new WeakMap();\n\n  function onSceneDispose(event) {\n    var scene = event.target;\n    scene.removeEventListener('dispose', onSceneDispose);\n    lists.delete(scene);\n  }\n\n  function get(scene, camera) {\n    var cameras = lists.get(scene);\n    var list;\n\n    if (cameras === undefined) {\n      list = new WebGLRenderList();\n      lists.set(scene, new WeakMap());\n      lists.get(scene).set(camera, list);\n      scene.addEventListener('dispose', onSceneDispose);\n    } else {\n      list = cameras.get(camera);\n\n      if (list === undefined) {\n        list = new WebGLRenderList();\n        cameras.set(camera, list);\n      }\n    }\n\n    return list;\n  }\n\n  function dispose() {\n    lists = new WeakMap();\n  }\n\n  return {\n    get: get,\n    dispose: dispose\n  };\n}\n\nvar nextVersion = 0;\n\nfunction shadowCastingLightsFirst(lightA, lightB) {\n  return (lightB.castShadow ? 1 : 0) - (lightA.castShadow ? 1 : 0);\n}\n\nfunction WebGLLights() {\n  var state = {\n    version: 0,\n    hash: {\n      directionalLength: -1,\n      pointLength: -1,\n      spotLength: -1,\n      rectAreaLength: -1,\n      hemiLength: -1,\n      numDirectionalShadows: -1,\n      numPointShadows: -1,\n      numSpotShadows: -1\n    },\n    ambient: [0, 0, 0],\n    probe: [],\n    directional: [],\n    directionalShadow: [],\n    directionalShadowMap: [],\n    directionalShadowMatrix: [],\n    spot: [],\n    spotShadow: [],\n    spotShadowMap: [],\n    spotShadowMatrix: [],\n    rectArea: [],\n    point: [],\n    pointShadow: [],\n    pointShadowMap: [],\n    pointShadowMatrix: [],\n    hemi: []\n  };\n\n  for (var i = 0; i < 9; i++) state.probe.push(new Vector3());\n\n  var matrix4 = new Matrix4();\n  var matrix42 = new Matrix4();\n\n  function setup(lights, shadows, camera) {\n    var r = 0,\n        g = 0,\n        b = 0;\n\n    for (var i = 0; i < 9; i++) state.probe[i].set(0, 0, 0);\n\n    var directionalLength = 0;\n    var pointLength = 0;\n    var spotLength = 0;\n    var rectAreaLength = 0;\n    var hemiLength = 0;\n    var numDirectionalShadows = 0;\n    var numPointShadows = 0;\n    var numSpotShadows = 0;\n    var viewMatrix = camera.matrixWorldInverse;\n    lights.sort(shadowCastingLightsFirst);\n\n    for (var i = 0, l = lights.length; i < l; i++) {\n      var light = lights[i];\n      var color = light.color;\n      var intensity = light.intensity;\n      var distance = light.distance;\n      var shadowMap = light.shadow && light.shadow.map ? light.shadow.map.texture : null;\n    }\n\n    state.ambient[0] = r;\n    state.ambient[1] = g;\n    state.ambient[2] = b;\n    var hash = state.hash;\n\n    if (hash.directionalLength !== directionalLength || hash.pointLength !== pointLength || hash.spotLength !== spotLength || hash.rectAreaLength !== rectAreaLength || hash.hemiLength !== hemiLength || hash.numDirectionalShadows !== numDirectionalShadows || hash.numPointShadows !== numPointShadows || hash.numSpotShadows !== numSpotShadows) {\n      state.directional.length = directionalLength;\n      state.spot.length = spotLength;\n      state.rectArea.length = rectAreaLength;\n      state.point.length = pointLength;\n      state.hemi.length = hemiLength;\n      state.directionalShadow.length = numDirectionalShadows;\n      state.directionalShadowMap.length = numDirectionalShadows;\n      state.pointShadow.length = numPointShadows;\n      state.pointShadowMap.length = numPointShadows;\n      state.spotShadow.length = numSpotShadows;\n      state.spotShadowMap.length = numSpotShadows;\n      state.directionalShadowMatrix.length = numDirectionalShadows;\n      state.pointShadowMatrix.length = numPointShadows;\n      state.spotShadowMatrix.length = numSpotShadows;\n      hash.directionalLength = directionalLength;\n      hash.pointLength = pointLength;\n      hash.spotLength = spotLength;\n      hash.rectAreaLength = rectAreaLength;\n      hash.hemiLength = hemiLength;\n      hash.numDirectionalShadows = numDirectionalShadows;\n      hash.numPointShadows = numPointShadows;\n      hash.numSpotShadows = numSpotShadows;\n      state.version = nextVersion++;\n    }\n  }\n\n  return {\n    setup: setup,\n    state: state\n  };\n}\n/**\n * @author Mugen87 / https://github.com/Mugen87\n */\n\n\nfunction WebGLRenderState() {\n  var lights = new WebGLLights();\n  var lightsArray = [];\n  var shadowsArray = [];\n\n  function init() {\n    lightsArray.length = 0;\n    shadowsArray.length = 0;\n  }\n\n  function pushLight(light) {\n    lightsArray.push(light);\n  }\n\n  function pushShadow(shadowLight) {\n    shadowsArray.push(shadowLight);\n  }\n\n  function setupLights(camera) {\n    lights.setup(lightsArray, shadowsArray, camera);\n  }\n\n  var state = {\n    lightsArray: lightsArray,\n    shadowsArray: shadowsArray,\n    lights: lights\n  };\n  return {\n    init: init,\n    state: state,\n    setupLights: setupLights,\n    pushLight: pushLight,\n    pushShadow: pushShadow\n  };\n}\n\nfunction WebGLRenderStates() {\n  var renderStates = new WeakMap();\n\n  function onSceneDispose(event) {\n    var scene = event.target;\n    scene.removeEventListener('dispose', onSceneDispose);\n    renderStates.delete(scene);\n  }\n\n  function get(scene, camera) {\n    var renderState;\n\n    if (renderStates.has(scene) === false) {\n      renderState = new WebGLRenderState();\n      renderStates.set(scene, new WeakMap());\n      renderStates.get(scene).set(camera, renderState);\n      scene.addEventListener('dispose', onSceneDispose);\n    } else {\n      if (renderStates.get(scene).has(camera) === false) {\n        renderState = new WebGLRenderState();\n        renderStates.get(scene).set(camera, renderState);\n      } else {\n        renderState = renderStates.get(scene).get(camera);\n      }\n    }\n\n    return renderState;\n  }\n\n  function dispose() {\n    renderStates = new WeakMap();\n  }\n\n  return {\n    get: get,\n    dispose: dispose\n  };\n}\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author bhouston / https://clara.io\n * @author WestLangley / http://github.com/WestLangley\n *\n * parameters = {\n *\n *  opacity: <float>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>\n * }\n */\n\n\nfunction MeshDepthMaterial(parameters) {\n  Material.call(this);\n  this.type = 'MeshDepthMaterial';\n  this.depthPacking = BasicDepthPacking;\n  this.skinning = false;\n  this.morphTargets = false;\n  this.map = null;\n  this.alphaMap = null;\n  this.displacementMap = null;\n  this.displacementScale = 1;\n  this.displacementBias = 0;\n  this.wireframe = false;\n  this.wireframeLinewidth = 1;\n  this.fog = false;\n  this.setValues(parameters);\n}\n\nMeshDepthMaterial.prototype = Object.create(Material.prototype);\nMeshDepthMaterial.prototype.constructor = MeshDepthMaterial;\nMeshDepthMaterial.prototype.isMeshDepthMaterial = true;\n\nMeshDepthMaterial.prototype.copy = function (source) {\n  Material.prototype.copy.call(this, source);\n  this.depthPacking = source.depthPacking;\n  this.skinning = source.skinning;\n  this.morphTargets = source.morphTargets;\n  this.map = source.map;\n  this.alphaMap = source.alphaMap;\n  this.displacementMap = source.displacementMap;\n  this.displacementScale = source.displacementScale;\n  this.displacementBias = source.displacementBias;\n  this.wireframe = source.wireframe;\n  this.wireframeLinewidth = source.wireframeLinewidth;\n  return this;\n};\n\nfunction MeshDistanceMaterial() {}\n\nfunction WebGLShadowMap() {\n  this.render = function () {};\n}\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\n\nfunction WebGLState(gl, extensions, capabilities) {\n  var isWebGL2 = capabilities.isWebGL2;\n\n  function ColorBuffer() {\n    var locked = false;\n    var color = new Vector4();\n    var currentColorMask = null;\n    var currentColorClear = new Vector4(0, 0, 0, 0);\n    return {\n      setMask: function (colorMask) {\n        if (currentColorMask !== colorMask && !locked) {\n          gl.colorMask(colorMask, colorMask, colorMask, colorMask);\n          currentColorMask = colorMask;\n        }\n      },\n      setLocked: function (lock) {\n        locked = lock;\n      },\n      setClear: function (r, g, b, a, premultipliedAlpha) {\n        if (premultipliedAlpha === true) {\n          r *= a;\n          g *= a;\n          b *= a;\n        }\n\n        color.set(r, g, b, a);\n\n        if (currentColorClear.equals(color) === false) {\n          gl.clearColor(r, g, b, a);\n          currentColorClear.copy(color);\n        }\n      },\n      reset: function () {\n        locked = false;\n        currentColorMask = null;\n        currentColorClear.set(-1, 0, 0, 0); // set to invalid state\n      }\n    };\n  }\n\n  function DepthBuffer() {\n    var locked = false;\n    var currentDepthMask = null;\n    var currentDepthFunc = null;\n    var currentDepthClear = null;\n    return {\n      setTest: function (depthTest) {\n        if (depthTest) {\n          enable(2929);\n        } else {\n          disable(2929);\n        }\n      },\n      setMask: function (depthMask) {\n        if (currentDepthMask !== depthMask && !locked) {\n          gl.depthMask(depthMask);\n          currentDepthMask = depthMask;\n        }\n      },\n      setFunc: function (depthFunc) {\n        if (currentDepthFunc !== depthFunc) {\n          if (depthFunc) {\n            switch (depthFunc) {\n              case NeverDepth:\n                gl.depthFunc(512);\n                break;\n\n              case AlwaysDepth:\n                gl.depthFunc(519);\n                break;\n\n              case LessDepth:\n                gl.depthFunc(513);\n                break;\n\n              case LessEqualDepth:\n                gl.depthFunc(515);\n                break;\n\n              case EqualDepth:\n                gl.depthFunc(514);\n                break;\n\n              case GreaterEqualDepth:\n                gl.depthFunc(518);\n                break;\n\n              case GreaterDepth:\n                gl.depthFunc(516);\n                break;\n\n              case NotEqualDepth:\n                gl.depthFunc(517);\n                break;\n\n              default:\n                gl.depthFunc(515);\n            }\n          } else {\n            gl.depthFunc(515);\n          }\n\n          currentDepthFunc = depthFunc;\n        }\n      },\n      setLocked: function (lock) {\n        locked = lock;\n      },\n      setClear: function (depth) {\n        if (currentDepthClear !== depth) {\n          gl.clearDepth(depth);\n          currentDepthClear = depth;\n        }\n      },\n      reset: function () {\n        locked = false;\n        currentDepthMask = null;\n        currentDepthFunc = null;\n        currentDepthClear = null;\n      }\n    };\n  }\n\n  function StencilBuffer() {\n    var locked = false;\n    var currentStencilMask = null;\n    var currentStencilFunc = null;\n    var currentStencilRef = null;\n    var currentStencilFuncMask = null;\n    var currentStencilFail = null;\n    var currentStencilZFail = null;\n    var currentStencilZPass = null;\n    var currentStencilClear = null;\n    return {\n      setTest: function (stencilTest) {\n        if (!locked) {\n          if (stencilTest) {\n            enable(2960);\n          } else {\n            disable(2960);\n          }\n        }\n      },\n      setMask: function (stencilMask) {\n        if (currentStencilMask !== stencilMask && !locked) {\n          gl.stencilMask(stencilMask);\n          currentStencilMask = stencilMask;\n        }\n      },\n      setFunc: function (stencilFunc, stencilRef, stencilMask) {\n        if (currentStencilFunc !== stencilFunc || currentStencilRef !== stencilRef || currentStencilFuncMask !== stencilMask) {\n          gl.stencilFunc(stencilFunc, stencilRef, stencilMask);\n          currentStencilFunc = stencilFunc;\n          currentStencilRef = stencilRef;\n          currentStencilFuncMask = stencilMask;\n        }\n      },\n      setOp: function (stencilFail, stencilZFail, stencilZPass) {\n        if (currentStencilFail !== stencilFail || currentStencilZFail !== stencilZFail || currentStencilZPass !== stencilZPass) {\n          gl.stencilOp(stencilFail, stencilZFail, stencilZPass);\n          currentStencilFail = stencilFail;\n          currentStencilZFail = stencilZFail;\n          currentStencilZPass = stencilZPass;\n        }\n      },\n      setLocked: function (lock) {\n        locked = lock;\n      },\n      setClear: function (stencil) {\n        if (currentStencilClear !== stencil) {\n          gl.clearStencil(stencil);\n          currentStencilClear = stencil;\n        }\n      },\n      reset: function () {\n        locked = false;\n        currentStencilMask = null;\n        currentStencilFunc = null;\n        currentStencilRef = null;\n        currentStencilFuncMask = null;\n        currentStencilFail = null;\n        currentStencilZFail = null;\n        currentStencilZPass = null;\n        currentStencilClear = null;\n      }\n    };\n  } //\n\n\n  var colorBuffer = new ColorBuffer();\n  var depthBuffer = new DepthBuffer();\n  var stencilBuffer = new StencilBuffer();\n  var maxVertexAttributes = gl.getParameter(34921);\n  var newAttributes = new Uint8Array(maxVertexAttributes);\n  var enabledAttributes = new Uint8Array(maxVertexAttributes);\n  var attributeDivisors = new Uint8Array(maxVertexAttributes);\n  var enabledCapabilities = {};\n  var currentProgram = null;\n  var currentBlendingEnabled = null;\n  var currentBlending = null;\n  var currentBlendEquation = null;\n  var currentBlendSrc = null;\n  var currentBlendDst = null;\n  var currentBlendEquationAlpha = null;\n  var currentBlendSrcAlpha = null;\n  var currentBlendDstAlpha = null;\n  var currentPremultipledAlpha = false;\n  var currentFlipSided = null;\n  var currentCullFace = null;\n  var currentLineWidth = null;\n  var currentPolygonOffsetFactor = null;\n  var currentPolygonOffsetUnits = null;\n  var maxTextures = gl.getParameter(35661);\n  var lineWidthAvailable = false;\n  var version = 0;\n  var glVersion = gl.getParameter(7938);\n\n  if (glVersion.indexOf('WebGL') !== -1) {\n    version = parseFloat(/^WebGL\\ ([0-9])/.exec(glVersion)[1]);\n    lineWidthAvailable = version >= 1.0;\n  } else if (glVersion.indexOf('OpenGL ES') !== -1) {\n    version = parseFloat(/^OpenGL\\ ES\\ ([0-9])/.exec(glVersion)[1]);\n    lineWidthAvailable = version >= 2.0;\n  }\n\n  var currentTextureSlot = null;\n  var currentBoundTextures = {};\n  var currentScissor = new Vector4();\n  var currentViewport = new Vector4();\n\n  function createTexture(type, target, count) {\n    var data = new Uint8Array(4); // 4 is required to match default unpack alignment of 4.\n\n    var texture = gl.createTexture();\n    gl.bindTexture(type, texture);\n    gl.texParameteri(type, 10241, 9728);\n    gl.texParameteri(type, 10240, 9728);\n\n    for (var i = 0; i < count; i++) {\n      gl.texImage2D(target + i, 0, 6408, 1, 1, 0, 6408, 5121, data);\n    }\n\n    return texture;\n  }\n\n  var emptyTextures = {};\n  emptyTextures[3553] = createTexture(3553, 3553, 1);\n  emptyTextures[34067] = createTexture(34067, 34069, 6); // init\n\n  colorBuffer.setClear(0, 0, 0, 1);\n  depthBuffer.setClear(1);\n  stencilBuffer.setClear(0);\n  enable(2929);\n  depthBuffer.setFunc(LessEqualDepth);\n  setFlipSided(false);\n  setCullFace(CullFaceBack);\n  enable(2884);\n  setBlending(NoBlending); //\n\n  function initAttributes() {\n    for (var i = 0, l = newAttributes.length; i < l; i++) {\n      newAttributes[i] = 0;\n    }\n  }\n\n  function enableAttribute(attribute) {\n    enableAttributeAndDivisor(attribute, 0);\n  }\n\n  function enableAttributeAndDivisor(attribute, meshPerAttribute) {\n    newAttributes[attribute] = 1;\n\n    if (enabledAttributes[attribute] === 0) {\n      gl.enableVertexAttribArray(attribute);\n      enabledAttributes[attribute] = 1;\n    }\n\n    if (attributeDivisors[attribute] !== meshPerAttribute) {\n      var extension = isWebGL2 ? gl : extensions.get('ANGLE_instanced_arrays');\n      extension[isWebGL2 ? 'vertexAttribDivisor' : 'vertexAttribDivisorANGLE'](attribute, meshPerAttribute);\n      attributeDivisors[attribute] = meshPerAttribute;\n    }\n  }\n\n  function disableUnusedAttributes() {\n    for (var i = 0, l = enabledAttributes.length; i !== l; ++i) {\n      if (enabledAttributes[i] !== newAttributes[i]) {\n        gl.disableVertexAttribArray(i);\n        enabledAttributes[i] = 0;\n      }\n    }\n  }\n\n  function enable(id) {\n    if (enabledCapabilities[id] !== true) {\n      gl.enable(id);\n      enabledCapabilities[id] = true;\n    }\n  }\n\n  function disable(id) {\n    if (enabledCapabilities[id] !== false) {\n      gl.disable(id);\n      enabledCapabilities[id] = false;\n    }\n  }\n\n  function useProgram(program) {\n    if (currentProgram !== program) {\n      gl.useProgram(program);\n      currentProgram = program;\n      return true;\n    }\n\n    return false;\n  }\n\n  var equationToGL = {\n    [AddEquation]: 32774,\n    [SubtractEquation]: 32778,\n    [ReverseSubtractEquation]: 32779\n  };\n\n  if (isWebGL2) {\n    equationToGL[MinEquation] = 32775;\n    equationToGL[MaxEquation] = 32776;\n  } else {\n    var extension = extensions.get('EXT_blend_minmax');\n\n    if (extension !== null) {\n      equationToGL[MinEquation] = extension.MIN_EXT;\n      equationToGL[MaxEquation] = extension.MAX_EXT;\n    }\n  }\n\n  var factorToGL = {\n    [ZeroFactor]: 0,\n    [OneFactor]: 1,\n    [SrcColorFactor]: 768,\n    [SrcAlphaFactor]: 770,\n    [SrcAlphaSaturateFactor]: 776,\n    [DstColorFactor]: 774,\n    [DstAlphaFactor]: 772,\n    [OneMinusSrcColorFactor]: 769,\n    [OneMinusSrcAlphaFactor]: 771,\n    [OneMinusDstColorFactor]: 775,\n    [OneMinusDstAlphaFactor]: 773\n  };\n\n  function setBlending(blending, blendEquation, blendSrc, blendDst, blendEquationAlpha, blendSrcAlpha, blendDstAlpha, premultipliedAlpha) {\n    if (blending === NoBlending) {\n      if (currentBlendingEnabled) {\n        disable(3042);\n        currentBlendingEnabled = false;\n      }\n\n      return;\n    }\n\n    if (!currentBlendingEnabled) {\n      enable(3042);\n      currentBlendingEnabled = true;\n    }\n\n    if (blending !== CustomBlending) {\n      if (blending !== currentBlending || premultipliedAlpha !== currentPremultipledAlpha) {\n        if (currentBlendEquation !== AddEquation || currentBlendEquationAlpha !== AddEquation) {\n          gl.blendEquation(32774);\n          currentBlendEquation = AddEquation;\n          currentBlendEquationAlpha = AddEquation;\n        }\n\n        if (premultipliedAlpha) {\n          switch (blending) {\n            case NormalBlending:\n              gl.blendFuncSeparate(1, 771, 1, 771);\n              break;\n\n            case AdditiveBlending:\n              gl.blendFunc(1, 1);\n              break;\n\n            case SubtractiveBlending:\n              gl.blendFuncSeparate(0, 0, 769, 771);\n              break;\n\n            case MultiplyBlending:\n              gl.blendFuncSeparate(0, 768, 0, 770);\n              break;\n\n            default:\n              console.error('THREE.WebGLState: Invalid blending: ', blending);\n              break;\n          }\n        } else {\n          switch (blending) {\n            case NormalBlending:\n              gl.blendFuncSeparate(770, 771, 1, 771);\n              break;\n\n            case AdditiveBlending:\n              gl.blendFunc(770, 1);\n              break;\n\n            case SubtractiveBlending:\n              gl.blendFunc(0, 769);\n              break;\n\n            case MultiplyBlending:\n              gl.blendFunc(0, 768);\n              break;\n\n            default:\n              console.error('THREE.WebGLState: Invalid blending: ', blending);\n              break;\n          }\n        }\n\n        currentBlendSrc = null;\n        currentBlendDst = null;\n        currentBlendSrcAlpha = null;\n        currentBlendDstAlpha = null;\n        currentBlending = blending;\n        currentPremultipledAlpha = premultipliedAlpha;\n      }\n\n      return;\n    } // custom blending\n\n\n    blendEquationAlpha = blendEquationAlpha || blendEquation;\n    blendSrcAlpha = blendSrcAlpha || blendSrc;\n    blendDstAlpha = blendDstAlpha || blendDst;\n\n    if (blendEquation !== currentBlendEquation || blendEquationAlpha !== currentBlendEquationAlpha) {\n      gl.blendEquationSeparate(equationToGL[blendEquation], equationToGL[blendEquationAlpha]);\n      currentBlendEquation = blendEquation;\n      currentBlendEquationAlpha = blendEquationAlpha;\n    }\n\n    if (blendSrc !== currentBlendSrc || blendDst !== currentBlendDst || blendSrcAlpha !== currentBlendSrcAlpha || blendDstAlpha !== currentBlendDstAlpha) {\n      gl.blendFuncSeparate(factorToGL[blendSrc], factorToGL[blendDst], factorToGL[blendSrcAlpha], factorToGL[blendDstAlpha]);\n      currentBlendSrc = blendSrc;\n      currentBlendDst = blendDst;\n      currentBlendSrcAlpha = blendSrcAlpha;\n      currentBlendDstAlpha = blendDstAlpha;\n    }\n\n    currentBlending = blending;\n    currentPremultipledAlpha = null;\n  }\n\n  function setMaterial(material, frontFaceCW) {\n    material.side === DoubleSide ? disable(2884) : enable(2884);\n    var flipSided = material.side === BackSide;\n    if (frontFaceCW) flipSided = !flipSided;\n    setFlipSided(flipSided);\n    material.blending === NormalBlending && material.transparent === false ? setBlending(NoBlending) : setBlending(material.blending, material.blendEquation, material.blendSrc, material.blendDst, material.blendEquationAlpha, material.blendSrcAlpha, material.blendDstAlpha, material.premultipliedAlpha);\n    depthBuffer.setFunc(material.depthFunc);\n    depthBuffer.setTest(material.depthTest);\n    depthBuffer.setMask(material.depthWrite);\n    colorBuffer.setMask(material.colorWrite);\n    var stencilWrite = material.stencilWrite;\n    stencilBuffer.setTest(stencilWrite);\n\n    if (stencilWrite) {\n      stencilBuffer.setMask(material.stencilWriteMask);\n      stencilBuffer.setFunc(material.stencilFunc, material.stencilRef, material.stencilFuncMask);\n      stencilBuffer.setOp(material.stencilFail, material.stencilZFail, material.stencilZPass);\n    }\n\n    setPolygonOffset(material.polygonOffset, material.polygonOffsetFactor, material.polygonOffsetUnits);\n  } //\n\n\n  function setFlipSided(flipSided) {\n    if (currentFlipSided !== flipSided) {\n      if (flipSided) {\n        gl.frontFace(2304);\n      } else {\n        gl.frontFace(2305);\n      }\n\n      currentFlipSided = flipSided;\n    }\n  }\n\n  function setCullFace(cullFace) {\n    if (cullFace !== CullFaceNone) {\n      enable(2884);\n\n      if (cullFace !== currentCullFace) {\n        if (cullFace === CullFaceBack) {\n          gl.cullFace(1029);\n        } else if (cullFace === CullFaceFront) {\n          gl.cullFace(1028);\n        } else {\n          gl.cullFace(1032);\n        }\n      }\n    } else {\n      disable(2884);\n    }\n\n    currentCullFace = cullFace;\n  }\n\n  function setLineWidth(width) {\n    if (width !== currentLineWidth) {\n      if (lineWidthAvailable) gl.lineWidth(width);\n      currentLineWidth = width;\n    }\n  }\n\n  function setPolygonOffset(polygonOffset, factor, units) {\n    if (polygonOffset) {\n      enable(32823);\n\n      if (currentPolygonOffsetFactor !== factor || currentPolygonOffsetUnits !== units) {\n        gl.polygonOffset(factor, units);\n        currentPolygonOffsetFactor = factor;\n        currentPolygonOffsetUnits = units;\n      }\n    } else {\n      disable(32823);\n    }\n  }\n\n  function setScissorTest(scissorTest) {\n    if (scissorTest) {\n      enable(3089);\n    } else {\n      disable(3089);\n    }\n  } // texture\n\n\n  function activeTexture(webglSlot) {\n    if (webglSlot === undefined) webglSlot = 33984 + maxTextures - 1;\n\n    if (currentTextureSlot !== webglSlot) {\n      gl.activeTexture(webglSlot);\n      currentTextureSlot = webglSlot;\n    }\n  }\n\n  function bindTexture(webglType, webglTexture) {\n    if (currentTextureSlot === null) {\n      activeTexture();\n    }\n\n    var boundTexture = currentBoundTextures[currentTextureSlot];\n\n    if (boundTexture === undefined) {\n      boundTexture = {\n        type: undefined,\n        texture: undefined\n      };\n      currentBoundTextures[currentTextureSlot] = boundTexture;\n    }\n\n    if (boundTexture.type !== webglType || boundTexture.texture !== webglTexture) {\n      gl.bindTexture(webglType, webglTexture || emptyTextures[webglType]);\n      boundTexture.type = webglType;\n      boundTexture.texture = webglTexture;\n    }\n  }\n\n  function activeAndBindTexture(webglSlot, webglType, webglTexture) {\n    const boundTexture = currentBoundTextures[webglSlot];\n    const needsUpdate = boundTexture === undefined || boundTexture.type !== webglType || boundTexture.texture !== webglTexture;\n\n    if (!needsUpdate) {\n      return;\n    }\n\n    activeTexture(webglSlot);\n    bindTexture(webglType, webglTexture);\n  }\n\n  function unbindTexture() {\n    var boundTexture = currentBoundTextures[currentTextureSlot];\n\n    if (boundTexture !== undefined && boundTexture.type !== undefined) {\n      gl.bindTexture(boundTexture.type, null);\n      boundTexture.type = undefined;\n      boundTexture.texture = undefined;\n    }\n  }\n\n  function compressedTexImage2D() {\n    try {\n      gl.compressedTexImage2D.apply(gl, arguments);\n    } catch (error) {\n      console.error('THREE.WebGLState:', error);\n    }\n  }\n\n  function texImage2D() {\n    try {\n      gl.texImage2D.apply(gl, arguments);\n    } catch (error) {\n      console.error('THREE.WebGLState:', error);\n    }\n  }\n\n  function texImage3D() {\n    try {\n      gl.texImage3D.apply(gl, arguments);\n    } catch (error) {\n      console.error('THREE.WebGLState:', error);\n    }\n  } //\n\n\n  function scissor(scissor) {\n    if (currentScissor.equals(scissor) === false) {\n      gl.scissor(scissor.x, scissor.y, scissor.z, scissor.w);\n      currentScissor.copy(scissor);\n    }\n  }\n\n  function viewport(viewport) {\n    if (currentViewport.equals(viewport) === false) {\n      gl.viewport(viewport.x, viewport.y, viewport.z, viewport.w);\n      currentViewport.copy(viewport);\n    }\n  } //\n\n\n  function reset() {\n    for (var i = 0; i < enabledAttributes.length; i++) {\n      if (enabledAttributes[i] === 1) {\n        gl.disableVertexAttribArray(i);\n        enabledAttributes[i] = 0;\n      }\n    }\n\n    enabledCapabilities = {};\n    currentTextureSlot = null;\n    currentBoundTextures = {};\n    currentProgram = null;\n    currentBlending = null;\n    currentFlipSided = null;\n    currentCullFace = null;\n    colorBuffer.reset();\n    depthBuffer.reset();\n    stencilBuffer.reset();\n  }\n\n  return {\n    buffers: {\n      color: colorBuffer,\n      depth: depthBuffer,\n      stencil: stencilBuffer\n    },\n    initAttributes: initAttributes,\n    enableAttribute: enableAttribute,\n    enableAttributeAndDivisor: enableAttributeAndDivisor,\n    disableUnusedAttributes: disableUnusedAttributes,\n    enable: enable,\n    disable: disable,\n    useProgram: useProgram,\n    setBlending: setBlending,\n    setMaterial: setMaterial,\n    setFlipSided: setFlipSided,\n    setCullFace: setCullFace,\n    setLineWidth: setLineWidth,\n    setPolygonOffset: setPolygonOffset,\n    setScissorTest: setScissorTest,\n    activeTexture: activeTexture,\n    bindTexture: bindTexture,\n    activeAndBindTexture: activeAndBindTexture,\n    unbindTexture: unbindTexture,\n    compressedTexImage2D: compressedTexImage2D,\n    texImage2D: texImage2D,\n    texImage3D: texImage3D,\n    scissor: scissor,\n    viewport: viewport,\n    reset: reset\n  };\n}\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\n\nfunction WebGLTextures(_gl, extensions, state, properties, capabilities, utils, info) {\n  var isWebGL2 = capabilities.isWebGL2;\n  var maxTextures = capabilities.maxTextures;\n  var maxCubemapSize = capabilities.maxCubemapSize;\n  var maxTextureSize = capabilities.maxTextureSize;\n  var maxSamples = capabilities.maxSamples;\n\n  var _canvas; // cordova iOS (as of 5.0) still uses UIWebView, which provides OffscreenCanvas,\n  // also OffscreenCanvas.getContext(\"webgl\"), but not OffscreenCanvas.getContext(\"2d\")!\n  // Some implementations may only implement OffscreenCanvas partially (e.g. lacking 2d).\n\n\n  var useOffscreenCanvas = false;\n\n  try {\n    useOffscreenCanvas = typeof OffscreenCanvas !== 'undefined' && new OffscreenCanvas(1, 1).getContext(\"2d\") !== null;\n  } catch (err) {// Ignore any errors\n  }\n\n  function createCanvas(width, height) {\n    // Use OffscreenCanvas when available. Specially needed in web workers\n    return useOffscreenCanvas ? new OffscreenCanvas(width, height) : document.createElementNS('http://www.w3.org/1999/xhtml', 'canvas');\n  }\n\n  function resizeImage(image, needsPowerOfTwo, needsNewCanvas, maxSize) {\n    var scale = 1; // handle case if texture exceeds max size\n\n    if (image.width > maxSize || image.height > maxSize) {\n      scale = maxSize / Math.max(image.width, image.height);\n    } // only perform resize if necessary\n\n\n    if (scale < 1 || needsPowerOfTwo === true) {\n      // only perform resize for certain image types\n      if (typeof HTMLImageElement !== 'undefined' && image instanceof HTMLImageElement || typeof HTMLCanvasElement !== 'undefined' && image instanceof HTMLCanvasElement || typeof ImageBitmap !== 'undefined' && image instanceof ImageBitmap) {\n        var floor = needsPowerOfTwo ? MathUtils.floorPowerOfTwo : Math.floor;\n        var width = floor(scale * image.width);\n        var height = floor(scale * image.height);\n        if (_canvas === undefined) _canvas = createCanvas(width, height); // cube textures can't reuse the same canvas\n\n        var canvas = needsNewCanvas ? createCanvas(width, height) : _canvas;\n        canvas.width = width;\n        canvas.height = height;\n        var context = canvas.getContext('2d');\n        context.drawImage(image, 0, 0, width, height);\n        console.warn('THREE.WebGLRenderer: Texture has been resized from (' + image.width + 'x' + image.height + ') to (' + width + 'x' + height + ').');\n        return canvas;\n      } else {\n        if ('data' in image) {\n          console.warn('THREE.WebGLRenderer: Image in DataTexture is too big (' + image.width + 'x' + image.height + ').');\n        }\n\n        return image;\n      }\n    }\n\n    return image;\n  }\n\n  function isPowerOfTwo(image) {\n    return MathUtils.isPowerOfTwo(image.width) && MathUtils.isPowerOfTwo(image.height);\n  }\n\n  function textureNeedsPowerOfTwo(texture) {\n    if (isWebGL2) return false;\n    return texture.wrapS !== ClampToEdgeWrapping || texture.wrapT !== ClampToEdgeWrapping || texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter;\n  }\n\n  function textureNeedsGenerateMipmaps(texture, supportsMips) {\n    return texture.generateMipmaps && supportsMips && texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter;\n  }\n\n  function generateMipmap(target, texture, width, height) {\n    _gl.generateMipmap(target);\n\n    var textureProperties = properties.get(texture); // Note: Math.log( x ) * Math.LOG2E used instead of Math.log2( x ) which is not supported by IE11\n\n    textureProperties.__maxMipLevel = Math.log(Math.max(width, height)) * Math.LOG2E;\n  }\n\n  function getInternalFormat(internalFormatName, glFormat, glType) {\n    if (isWebGL2 === false) return glFormat;\n\n    if (internalFormatName !== null) {\n      if (_gl[internalFormatName] !== undefined) return _gl[internalFormatName];\n      console.warn('THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format \\'' + internalFormatName + '\\'');\n    }\n\n    var internalFormat = glFormat;\n\n    if (glFormat === 6403) {\n      if (glType === 5126) internalFormat = 33326;\n      if (glType === 5131) internalFormat = 33325;\n      if (glType === 5121) internalFormat = 33321;\n    }\n\n    if (glFormat === 6407) {\n      if (glType === 5126) internalFormat = 34837;\n      if (glType === 5131) internalFormat = 34843;\n      if (glType === 5121) internalFormat = 32849;\n    }\n\n    if (glFormat === 6408) {\n      if (glType === 5126) internalFormat = 34836;\n      if (glType === 5131) internalFormat = 34842;\n      if (glType === 5121) internalFormat = 32856;\n    }\n\n    if (internalFormat === 33325 || internalFormat === 33326 || internalFormat === 34842 || internalFormat === 34836) {\n      extensions.get('EXT_color_buffer_float');\n    } else if (internalFormat === 34843 || internalFormat === 34837) {\n      console.warn('THREE.WebGLRenderer: Floating point textures with RGB format not supported. Please use RGBA instead.');\n    }\n\n    return internalFormat;\n  } // Fallback filters for non-power-of-2 textures\n\n\n  function filterFallback(f) {\n    if (f === NearestFilter || f === NearestMipmapNearestFilter || f === NearestMipmapLinearFilter) {\n      return 9728;\n    }\n\n    return 9729;\n  } //\n\n\n  function onTextureDispose(event) {\n    var texture = event.target;\n    texture.removeEventListener('dispose', onTextureDispose);\n    deallocateTexture(texture);\n    info.memory.textures--;\n  }\n\n  function onRenderTargetDispose(event) {\n    var renderTarget = event.target;\n    renderTarget.removeEventListener('dispose', onRenderTargetDispose);\n    deallocateRenderTarget(renderTarget);\n    info.memory.textures--;\n  } //\n\n\n  function deallocateTexture(texture) {\n    var textureProperties = properties.get(texture);\n    if (textureProperties.__webglInit === undefined) return;\n\n    _gl.deleteTexture(textureProperties.__webglTexture);\n\n    properties.remove(texture);\n  }\n\n  function deallocateRenderTarget(renderTarget) {\n    var renderTargetProperties = properties.get(renderTarget);\n    var textureProperties = properties.get(renderTarget.texture);\n    if (!renderTarget) return;\n\n    if (textureProperties.__webglTexture !== undefined) {\n      _gl.deleteTexture(textureProperties.__webglTexture);\n    }\n\n    if (renderTarget.depthTexture) {\n      renderTarget.depthTexture.dispose();\n    }\n\n    {\n      _gl.deleteFramebuffer(renderTargetProperties.__webglFramebuffer);\n\n      if (renderTargetProperties.__webglDepthbuffer) _gl.deleteRenderbuffer(renderTargetProperties.__webglDepthbuffer);\n    }\n    properties.remove(renderTarget.texture);\n    properties.remove(renderTarget);\n  } //\n\n\n  var textureUnits = 0;\n\n  function resetTextureUnits() {\n    textureUnits = 0;\n  }\n\n  function allocateTextureUnit() {\n    var textureUnit = textureUnits;\n\n    if (textureUnit >= maxTextures) {\n      console.warn('THREE.WebGLTextures: Trying to use ' + textureUnit + ' texture units while this GPU supports only ' + maxTextures);\n    }\n\n    textureUnits += 1;\n    return textureUnit;\n  } //\n\n\n  function setTexture2D(texture, slot) {\n    var textureProperties = properties.get(texture);\n\n    if (texture.version > 0 && textureProperties.__version !== texture.version) {\n      var image = texture.image;\n\n      if (image === undefined) {\n        console.warn('THREE.WebGLRenderer: Texture marked for update but image is undefined');\n      } else if (image.complete === false) {\n        console.warn('THREE.WebGLRenderer: Texture marked for update but image is incomplete');\n      } else {\n        uploadTexture(textureProperties, texture, slot);\n        return;\n      }\n    }\n\n    state.activeAndBindTexture(33984 + slot, 3553, textureProperties.__webglTexture);\n  }\n\n  function setTexture2DArray(texture, slot) {\n    var textureProperties = properties.get(texture);\n\n    if (texture.version > 0 && textureProperties.__version !== texture.version) {\n      uploadTexture(textureProperties, texture, slot);\n      return;\n    }\n\n    state.activeTexture(33984 + slot);\n    state.bindTexture(35866, textureProperties.__webglTexture);\n  }\n\n  function setTexture3D(texture, slot) {\n    var textureProperties = properties.get(texture);\n\n    if (texture.version > 0 && textureProperties.__version !== texture.version) {\n      uploadTexture(textureProperties, texture, slot);\n      return;\n    }\n\n    state.activeTexture(33984 + slot);\n    state.bindTexture(32879, textureProperties.__webglTexture);\n  }\n\n  function setTextureCube() {}\n\n  function setTextureCubeDynamic() {}\n\n  var wrappingToGL = {\n    [RepeatWrapping]: 10497,\n    [ClampToEdgeWrapping]: 33071,\n    [MirroredRepeatWrapping]: 33648\n  };\n  var filterToGL = {\n    [NearestFilter]: 9728,\n    [NearestMipmapNearestFilter]: 9984,\n    [NearestMipmapLinearFilter]: 9986,\n    [LinearFilter]: 9729,\n    [LinearMipmapNearestFilter]: 9985,\n    [LinearMipmapLinearFilter]: 9987\n  };\n\n  function setTextureParameters(textureType, texture, supportsMips) {\n    if (supportsMips) {\n      _gl.texParameteri(textureType, 10242, wrappingToGL[texture.wrapS]);\n\n      _gl.texParameteri(textureType, 10243, wrappingToGL[texture.wrapT]);\n\n      if (textureType === 32879 || textureType === 35866) {\n        _gl.texParameteri(textureType, 32882, wrappingToGL[texture.wrapR]);\n      }\n\n      _gl.texParameteri(textureType, 10240, filterToGL[texture.magFilter]);\n\n      _gl.texParameteri(textureType, 10241, filterToGL[texture.minFilter]);\n    } else {\n      _gl.texParameteri(textureType, 10242, 33071);\n\n      _gl.texParameteri(textureType, 10243, 33071);\n\n      if (textureType === 32879 || textureType === 35866) {\n        _gl.texParameteri(textureType, 32882, 33071);\n      }\n\n      if (texture.wrapS !== ClampToEdgeWrapping || texture.wrapT !== ClampToEdgeWrapping) {\n        console.warn('THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.');\n      }\n\n      _gl.texParameteri(textureType, 10240, filterFallback(texture.magFilter));\n\n      _gl.texParameteri(textureType, 10241, filterFallback(texture.minFilter));\n\n      if (texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter) {\n        console.warn('THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.');\n      }\n    }\n\n    var extension = extensions.get('EXT_texture_filter_anisotropic');\n\n    if (extension) {\n      if (texture.type === FloatType && extensions.get('OES_texture_float_linear') === null) return;\n      if (texture.type === HalfFloatType && (isWebGL2 || extensions.get('OES_texture_half_float_linear')) === null) return;\n\n      if (texture.anisotropy > 1 || properties.get(texture).__currentAnisotropy) {\n        _gl.texParameterf(textureType, extension.TEXTURE_MAX_ANISOTROPY_EXT, Math.min(texture.anisotropy, capabilities.getMaxAnisotropy()));\n\n        properties.get(texture).__currentAnisotropy = texture.anisotropy;\n      }\n    }\n  }\n\n  function initTexture(textureProperties, texture) {\n    if (textureProperties.__webglInit === undefined) {\n      textureProperties.__webglInit = true;\n      texture.addEventListener('dispose', onTextureDispose);\n      textureProperties.__webglTexture = _gl.createTexture();\n      info.memory.textures++;\n    }\n  }\n\n  function uploadTexture(textureProperties, texture, slot) {\n    var textureType = 3553;\n    if (texture.isDataTexture2DArray) textureType = 35866;\n    if (texture.isDataTexture3D) textureType = 32879;\n    initTexture(textureProperties, texture);\n    state.activeTexture(33984 + slot);\n    state.bindTexture(textureType, textureProperties.__webglTexture);\n\n    _gl.pixelStorei(37440, texture.flipY);\n\n    _gl.pixelStorei(37441, texture.premultiplyAlpha);\n\n    _gl.pixelStorei(3317, texture.unpackAlignment);\n\n    var needsPowerOfTwo = textureNeedsPowerOfTwo(texture) && isPowerOfTwo(texture.image) === false;\n    var image = resizeImage(texture.image, needsPowerOfTwo, false, maxTextureSize);\n    var supportsMips = isPowerOfTwo(image) || isWebGL2,\n        glFormat = utils.convert(texture.format),\n        glType = utils.convert(texture.type),\n        glInternalFormat = getInternalFormat(texture.internalFormat, glFormat, glType);\n    setTextureParameters(textureType, texture, supportsMips);\n    var mipmap,\n        mipmaps = texture.mipmaps;\n\n    if (texture.isDepthTexture) {\n      // populate depth texture with dummy data\n      glInternalFormat = 6402;\n\n      if (texture.type === FloatType) {\n        if (isWebGL2 === false) throw new Error('Float Depth Texture only supported in WebGL2.0');\n        glInternalFormat = 36012;\n      } else if (isWebGL2) {\n        // WebGL 2.0 requires signed internalformat for glTexImage2D\n        glInternalFormat = 33189;\n      }\n\n      if (texture.format === DepthFormat && glInternalFormat === 6402) {\n        // The error INVALID_OPERATION is generated by texImage2D if format and internalformat are\n        // DEPTH_COMPONENT and type is not UNSIGNED_SHORT or UNSIGNED_INT\n        // (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\n        if (texture.type !== UnsignedShortType && texture.type !== UnsignedIntType) {\n          console.warn('THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture.');\n          texture.type = UnsignedShortType;\n          glType = utils.convert(texture.type);\n        }\n      } // Depth stencil textures need the DEPTH_STENCIL internal format\n      // (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\n\n\n      if (texture.format === DepthStencilFormat) {\n        glInternalFormat = 34041; // The error INVALID_OPERATION is generated by texImage2D if format and internalformat are\n        // DEPTH_STENCIL and type is not UNSIGNED_INT_24_8_WEBGL.\n        // (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\n\n        if (texture.type !== UnsignedInt248Type) {\n          console.warn('THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture.');\n          texture.type = UnsignedInt248Type;\n          glType = utils.convert(texture.type);\n        }\n      }\n\n      state.texImage2D(3553, 0, glInternalFormat, image.width, image.height, 0, glFormat, glType, null);\n    } else if (texture.isDataTexture) {\n      // use manually created mipmaps if available\n      // if there are no manual mipmaps\n      // set 0 level mipmap and then use GL to generate other mipmap levels\n      if (mipmaps.length > 0 && supportsMips) {\n        for (var i = 0, il = mipmaps.length; i < il; i++) {\n          mipmap = mipmaps[i];\n          state.texImage2D(3553, i, glInternalFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data);\n        }\n\n        texture.generateMipmaps = false;\n        textureProperties.__maxMipLevel = mipmaps.length - 1;\n      } else {\n        state.texImage2D(3553, 0, glInternalFormat, image.width, image.height, 0, glFormat, glType, image.data);\n        textureProperties.__maxMipLevel = 0;\n      }\n    } else if (texture.isCompressedTexture) {\n      for (var i = 0, il = mipmaps.length; i < il; i++) {\n        mipmap = mipmaps[i];\n\n        if (texture.format !== RGBAFormat && texture.format !== RGBFormat) {\n          if (glFormat !== null) {\n            state.compressedTexImage2D(3553, i, glInternalFormat, mipmap.width, mipmap.height, 0, mipmap.data);\n          } else {\n            console.warn('THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()');\n          }\n        } else {\n          state.texImage2D(3553, i, glInternalFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data);\n        }\n      }\n\n      textureProperties.__maxMipLevel = mipmaps.length - 1;\n    } else if (texture.isDataTexture2DArray) {\n      state.texImage3D(35866, 0, glInternalFormat, image.width, image.height, image.depth, 0, glFormat, glType, image.data);\n      textureProperties.__maxMipLevel = 0;\n    } else if (texture.isDataTexture3D) {\n      state.texImage3D(32879, 0, glInternalFormat, image.width, image.height, image.depth, 0, glFormat, glType, image.data);\n      textureProperties.__maxMipLevel = 0;\n    } else {\n      // regular Texture (image, video, canvas)\n      // use manually created mipmaps if available\n      // if there are no manual mipmaps\n      // set 0 level mipmap and then use GL to generate other mipmap levels\n      if (mipmaps.length > 0 && supportsMips) {\n        for (var i = 0, il = mipmaps.length; i < il; i++) {\n          mipmap = mipmaps[i];\n          state.texImage2D(3553, i, glInternalFormat, glFormat, glType, mipmap);\n        }\n\n        texture.generateMipmaps = false;\n        textureProperties.__maxMipLevel = mipmaps.length - 1;\n      } else {\n        state.texImage2D(3553, 0, glInternalFormat, glFormat, glType, image);\n        textureProperties.__maxMipLevel = 0;\n      }\n    }\n\n    if (textureNeedsGenerateMipmaps(texture, supportsMips)) {\n      generateMipmap(textureType, texture, image.width, image.height);\n    }\n\n    textureProperties.__version = texture.version;\n    if (texture.onUpdate) texture.onUpdate(texture);\n  } // Render targets\n  // Setup storage for target texture and bind it to correct framebuffer\n\n\n  function setupFrameBufferTexture(framebuffer, renderTarget, attachment, textureTarget) {\n    var glFormat = utils.convert(renderTarget.texture.format);\n    var glType = utils.convert(renderTarget.texture.type);\n    var glInternalFormat = getInternalFormat(renderTarget.texture.internalFormat, glFormat, glType);\n    state.texImage2D(textureTarget, 0, glInternalFormat, renderTarget.width, renderTarget.height, 0, glFormat, glType, null);\n\n    _gl.bindFramebuffer(36160, framebuffer);\n\n    _gl.framebufferTexture2D(36160, attachment, textureTarget, properties.get(renderTarget.texture).__webglTexture, 0);\n\n    _gl.bindFramebuffer(36160, null);\n  } // Setup storage for internal depth/stencil buffers and bind to correct framebuffer\n\n\n  function setupRenderBufferStorage(renderbuffer, renderTarget, isMultisample) {\n    _gl.bindRenderbuffer(36161, renderbuffer);\n\n    if (renderTarget.depthBuffer && !renderTarget.stencilBuffer) {\n      if (isMultisample) {\n        var samples = getRenderTargetSamples(renderTarget);\n\n        _gl.renderbufferStorageMultisample(36161, samples, 33189, renderTarget.width, renderTarget.height);\n      } else {\n        _gl.renderbufferStorage(36161, 33189, renderTarget.width, renderTarget.height);\n      }\n\n      _gl.framebufferRenderbuffer(36160, 36096, 36161, renderbuffer);\n    } else if (renderTarget.depthBuffer && renderTarget.stencilBuffer) {\n      if (isMultisample) {\n        var samples = getRenderTargetSamples(renderTarget);\n\n        _gl.renderbufferStorageMultisample(36161, samples, 35056, renderTarget.width, renderTarget.height);\n      } else {\n        _gl.renderbufferStorage(36161, 34041, renderTarget.width, renderTarget.height);\n      }\n\n      _gl.framebufferRenderbuffer(36160, 33306, 36161, renderbuffer);\n    } else {\n      var glFormat = utils.convert(renderTarget.texture.format);\n      var glType = utils.convert(renderTarget.texture.type);\n      var glInternalFormat = getInternalFormat(renderTarget.texture.internalFormat, glFormat, glType);\n\n      if (isMultisample) {\n        var samples = getRenderTargetSamples(renderTarget);\n\n        _gl.renderbufferStorageMultisample(36161, samples, glInternalFormat, renderTarget.width, renderTarget.height);\n      } else {\n        _gl.renderbufferStorage(36161, glInternalFormat, renderTarget.width, renderTarget.height);\n      }\n    }\n\n    _gl.bindRenderbuffer(36161, null);\n  } // Setup resources for a Depth Texture for a FBO (needs an extension)\n\n\n  function setupDepthTexture(framebuffer, renderTarget) {\n    var isCube = renderTarget && false;\n    if (isCube) throw new Error('Depth Texture with cube render targets is not supported');\n\n    _gl.bindFramebuffer(36160, framebuffer);\n\n    if (!(renderTarget.depthTexture && renderTarget.depthTexture.isDepthTexture)) {\n      throw new Error('renderTarget.depthTexture must be an instance of THREE.DepthTexture');\n    } // upload an empty depth texture with framebuffer size\n\n\n    if (!properties.get(renderTarget.depthTexture).__webglTexture || renderTarget.depthTexture.image.width !== renderTarget.width || renderTarget.depthTexture.image.height !== renderTarget.height) {\n      renderTarget.depthTexture.image.width = renderTarget.width;\n      renderTarget.depthTexture.image.height = renderTarget.height;\n      renderTarget.depthTexture.needsUpdate = true;\n    }\n\n    setTexture2D(renderTarget.depthTexture, 0);\n\n    var webglDepthTexture = properties.get(renderTarget.depthTexture).__webglTexture;\n\n    if (renderTarget.depthTexture.format === DepthFormat) {\n      _gl.framebufferTexture2D(36160, 36096, 3553, webglDepthTexture, 0);\n    } else if (renderTarget.depthTexture.format === DepthStencilFormat) {\n      _gl.framebufferTexture2D(36160, 33306, 3553, webglDepthTexture, 0);\n    } else {\n      throw new Error('Unknown depthTexture format');\n    }\n  } // Setup GL resources for a non-texture depth buffer\n\n\n  function setupDepthRenderbuffer(renderTarget) {\n    var renderTargetProperties = properties.get(renderTarget);\n\n    if (renderTarget.depthTexture) {\n      setupDepthTexture(renderTargetProperties.__webglFramebuffer, renderTarget);\n    } else {\n      {\n        _gl.bindFramebuffer(36160, renderTargetProperties.__webglFramebuffer);\n\n        renderTargetProperties.__webglDepthbuffer = _gl.createRenderbuffer();\n        setupRenderBufferStorage(renderTargetProperties.__webglDepthbuffer, renderTarget);\n      }\n    }\n\n    _gl.bindFramebuffer(36160, null);\n  } // Set up GL resources for the render target\n\n\n  function setupRenderTarget(renderTarget) {\n    var renderTargetProperties = properties.get(renderTarget);\n    var textureProperties = properties.get(renderTarget.texture);\n    renderTarget.addEventListener('dispose', onRenderTargetDispose);\n    textureProperties.__webglTexture = _gl.createTexture();\n    info.memory.textures++;\n    var isMultisample = renderTarget.isWebGLMultisampleRenderTarget === true;\n    var supportsMips = isPowerOfTwo(renderTarget) || isWebGL2; // Setup framebuffer\n\n    {\n      renderTargetProperties.__webglFramebuffer = _gl.createFramebuffer();\n\n      if (isMultisample) {\n        if (isWebGL2) {\n          renderTargetProperties.__webglMultisampledFramebuffer = _gl.createFramebuffer();\n          renderTargetProperties.__webglColorRenderbuffer = _gl.createRenderbuffer();\n\n          _gl.bindRenderbuffer(36161, renderTargetProperties.__webglColorRenderbuffer);\n\n          var glFormat = utils.convert(renderTarget.texture.format);\n          var glType = utils.convert(renderTarget.texture.type);\n          var glInternalFormat = getInternalFormat(renderTarget.texture.internalFormat, glFormat, glType);\n          var samples = getRenderTargetSamples(renderTarget);\n\n          _gl.renderbufferStorageMultisample(36161, samples, glInternalFormat, renderTarget.width, renderTarget.height);\n\n          _gl.bindFramebuffer(36160, renderTargetProperties.__webglMultisampledFramebuffer);\n\n          _gl.framebufferRenderbuffer(36160, 36064, 36161, renderTargetProperties.__webglColorRenderbuffer);\n\n          _gl.bindRenderbuffer(36161, null);\n\n          if (renderTarget.depthBuffer) {\n            renderTargetProperties.__webglDepthRenderbuffer = _gl.createRenderbuffer();\n            setupRenderBufferStorage(renderTargetProperties.__webglDepthRenderbuffer, renderTarget, true);\n          }\n\n          _gl.bindFramebuffer(36160, null);\n        } else {\n          console.warn('THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.');\n        }\n      }\n    } // Setup color buffer\n\n    {\n      state.bindTexture(3553, textureProperties.__webglTexture);\n      setTextureParameters(3553, renderTarget.texture, supportsMips);\n      setupFrameBufferTexture(renderTargetProperties.__webglFramebuffer, renderTarget, 36064, 3553);\n\n      if (textureNeedsGenerateMipmaps(renderTarget.texture, supportsMips)) {\n        generateMipmap(3553, renderTarget.texture, renderTarget.width, renderTarget.height);\n      }\n\n      state.bindTexture(3553, null);\n    } // Setup depth and stencil buffers\n\n    if (renderTarget.depthBuffer) {\n      setupDepthRenderbuffer(renderTarget);\n    }\n  }\n\n  function updateRenderTargetMipmap(renderTarget) {\n    var texture = renderTarget.texture;\n    var supportsMips = isPowerOfTwo(renderTarget) || isWebGL2;\n\n    if (textureNeedsGenerateMipmaps(texture, supportsMips)) {\n      var target = 3553;\n\n      var webglTexture = properties.get(texture).__webglTexture;\n\n      state.bindTexture(target, webglTexture);\n      generateMipmap(target, texture, renderTarget.width, renderTarget.height);\n      state.bindTexture(target, null);\n    }\n  }\n\n  function updateMultisampleRenderTarget(renderTarget) {\n    if (renderTarget.isWebGLMultisampleRenderTarget) {\n      if (isWebGL2) {\n        var renderTargetProperties = properties.get(renderTarget);\n\n        _gl.bindFramebuffer(36008, renderTargetProperties.__webglMultisampledFramebuffer);\n\n        _gl.bindFramebuffer(36009, renderTargetProperties.__webglFramebuffer);\n\n        var width = renderTarget.width;\n        var height = renderTarget.height;\n        var mask = 16384;\n        if (renderTarget.depthBuffer) mask |= 256;\n        if (renderTarget.stencilBuffer) mask |= 1024;\n\n        _gl.blitFramebuffer(0, 0, width, height, 0, 0, width, height, mask, 9728);\n      } else {\n        console.warn('THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.');\n      }\n    }\n  }\n\n  function getRenderTargetSamples(renderTarget) {\n    return isWebGL2 && renderTarget.isWebGLMultisampleRenderTarget ? Math.min(maxSamples, renderTarget.samples) : 0;\n  } // backwards compatibility\n\n\n  var warnedTexture2D = false;\n  var warnedTextureCube = false;\n\n  function safeSetTexture2D(texture, slot) {\n    if (texture && texture.isWebGLRenderTarget) {\n      if (warnedTexture2D === false) {\n        console.warn(\"THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead.\");\n        warnedTexture2D = true;\n      }\n\n      texture = texture.texture;\n    }\n\n    setTexture2D(texture, slot);\n  }\n\n  function safeSetTextureCube(texture, slot) {\n    if (texture && false) {\n      if (warnedTextureCube === false) {\n        console.warn(\"THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead.\");\n        warnedTextureCube = true;\n      }\n\n      texture = texture.texture;\n    } // currently relying on the fact that WebGLCubeRenderTarget.texture is a Texture and NOT a CubeTexture\n    // TODO: unify these code paths\n\n\n    if (texture && false || Array.isArray(texture.image) && texture.image.length === 6) ;\n  } //\n\n\n  this.allocateTextureUnit = allocateTextureUnit;\n  this.resetTextureUnits = resetTextureUnits;\n  this.setTexture2D = setTexture2D;\n  this.setTexture2DArray = setTexture2DArray;\n  this.setTexture3D = setTexture3D;\n  this.setTextureCube = setTextureCube;\n  this.setTextureCubeDynamic = setTextureCubeDynamic;\n  this.setupRenderTarget = setupRenderTarget;\n  this.updateRenderTargetMipmap = updateRenderTargetMipmap;\n  this.updateMultisampleRenderTarget = updateMultisampleRenderTarget;\n  this.safeSetTexture2D = safeSetTexture2D;\n  this.safeSetTextureCube = safeSetTextureCube;\n}\n/**\n * @author thespite / http://www.twitter.com/thespite\n */\n\n\nfunction WebGLUtils(gl, extensions, capabilities) {\n  var isWebGL2 = capabilities.isWebGL2;\n\n  function convert(p) {\n    var extension;\n    if (p === UnsignedByteType) return 5121;\n    if (p === UnsignedShort4444Type) return 32819;\n    if (p === UnsignedShort5551Type) return 32820;\n    if (p === UnsignedShort565Type) return 33635;\n    if (p === ByteType) return 5120;\n    if (p === ShortType) return 5122;\n    if (p === UnsignedShortType) return 5123;\n    if (p === IntType) return 5124;\n    if (p === UnsignedIntType) return 5125;\n    if (p === FloatType) return 5126;\n\n    if (p === HalfFloatType) {\n      if (isWebGL2) return 5131;\n      extension = extensions.get('OES_texture_half_float');\n\n      if (extension !== null) {\n        return extension.HALF_FLOAT_OES;\n      } else {\n        return null;\n      }\n    }\n\n    if (p === AlphaFormat) return 6406;\n    if (p === RGBFormat) return 6407;\n    if (p === RGBAFormat) return 6408;\n    if (p === LuminanceFormat) return 6409;\n    if (p === LuminanceAlphaFormat) return 6410;\n    if (p === DepthFormat) return 6402;\n    if (p === DepthStencilFormat) return 34041;\n    if (p === RedFormat) return 6403; // WebGL2 formats.\n\n    if (p === RedIntegerFormat) return 36244;\n    if (p === RGFormat) return 33319;\n    if (p === RGIntegerFormat) return 33320;\n    if (p === RGBIntegerFormat) return 36248;\n    if (p === RGBAIntegerFormat) return 36249;\n\n    if (p === RGB_S3TC_DXT1_Format || p === RGBA_S3TC_DXT1_Format || p === RGBA_S3TC_DXT3_Format || p === RGBA_S3TC_DXT5_Format) {\n      extension = extensions.get('WEBGL_compressed_texture_s3tc');\n\n      if (extension !== null) {\n        if (p === RGB_S3TC_DXT1_Format) return extension.COMPRESSED_RGB_S3TC_DXT1_EXT;\n        if (p === RGBA_S3TC_DXT1_Format) return extension.COMPRESSED_RGBA_S3TC_DXT1_EXT;\n        if (p === RGBA_S3TC_DXT3_Format) return extension.COMPRESSED_RGBA_S3TC_DXT3_EXT;\n        if (p === RGBA_S3TC_DXT5_Format) return extension.COMPRESSED_RGBA_S3TC_DXT5_EXT;\n      } else {\n        return null;\n      }\n    }\n\n    if (p === RGB_PVRTC_4BPPV1_Format || p === RGB_PVRTC_2BPPV1_Format || p === RGBA_PVRTC_4BPPV1_Format || p === RGBA_PVRTC_2BPPV1_Format) {\n      extension = extensions.get('WEBGL_compressed_texture_pvrtc');\n\n      if (extension !== null) {\n        if (p === RGB_PVRTC_4BPPV1_Format) return extension.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;\n        if (p === RGB_PVRTC_2BPPV1_Format) return extension.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;\n        if (p === RGBA_PVRTC_4BPPV1_Format) return extension.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;\n        if (p === RGBA_PVRTC_2BPPV1_Format) return extension.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;\n      } else {\n        return null;\n      }\n    }\n\n    if (p === RGB_ETC1_Format) {\n      extension = extensions.get('WEBGL_compressed_texture_etc1');\n\n      if (extension !== null) {\n        return extension.COMPRESSED_RGB_ETC1_WEBGL;\n      } else {\n        return null;\n      }\n    }\n\n    if (p === RGB_ETC2_Format || p === RGBA_ETC2_EAC_Format) {\n      extension = extensions.get('WEBGL_compressed_texture_etc');\n\n      if (extension !== null) {\n        if (p === RGB_ETC2_Format) return extension.COMPRESSED_RGB8_ETC2;\n        if (p === RGBA_ETC2_EAC_Format) return extension.COMPRESSED_RGBA8_ETC2_EAC;\n      }\n    }\n\n    if (p === RGBA_ASTC_4x4_Format || p === RGBA_ASTC_5x4_Format || p === RGBA_ASTC_5x5_Format || p === RGBA_ASTC_6x5_Format || p === RGBA_ASTC_6x6_Format || p === RGBA_ASTC_8x5_Format || p === RGBA_ASTC_8x6_Format || p === RGBA_ASTC_8x8_Format || p === RGBA_ASTC_10x5_Format || p === RGBA_ASTC_10x6_Format || p === RGBA_ASTC_10x8_Format || p === RGBA_ASTC_10x10_Format || p === RGBA_ASTC_12x10_Format || p === RGBA_ASTC_12x12_Format || p === SRGB8_ALPHA8_ASTC_4x4_Format || p === SRGB8_ALPHA8_ASTC_5x4_Format || p === SRGB8_ALPHA8_ASTC_5x5_Format || p === SRGB8_ALPHA8_ASTC_6x5_Format || p === SRGB8_ALPHA8_ASTC_6x6_Format || p === SRGB8_ALPHA8_ASTC_8x5_Format || p === SRGB8_ALPHA8_ASTC_8x6_Format || p === SRGB8_ALPHA8_ASTC_8x8_Format || p === SRGB8_ALPHA8_ASTC_10x5_Format || p === SRGB8_ALPHA8_ASTC_10x6_Format || p === SRGB8_ALPHA8_ASTC_10x8_Format || p === SRGB8_ALPHA8_ASTC_10x10_Format || p === SRGB8_ALPHA8_ASTC_12x10_Format || p === SRGB8_ALPHA8_ASTC_12x12_Format) {\n      extension = extensions.get('WEBGL_compressed_texture_astc');\n\n      if (extension !== null) {\n        // TODO Complete?\n        return p;\n      } else {\n        return null;\n      }\n    }\n\n    if (p === UnsignedInt248Type) {\n      if (isWebGL2) return 34042;\n      extension = extensions.get('WEBGL_depth_texture');\n\n      if (extension !== null) {\n        return extension.UNSIGNED_INT_24_8_WEBGL;\n      } else {\n        return null;\n      }\n    }\n  }\n\n  return {\n    convert: convert\n  };\n}\n\nfunction ArrayCamera() {}\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\n\nfunction Group() {\n  Object3D.call(this);\n  this.type = 'Group';\n}\n\nGroup.prototype = Object.assign(Object.create(Object3D.prototype), {\n  constructor: Group,\n  isGroup: true\n});\n\nfunction WebXRManager() {\n  this.getDevice = function () {};\n}\n\nObject.assign(WebXRManager.prototype, EventDispatcher.prototype);\n/**\n * @author supereggbert / http://www.paulbrunt.co.uk/\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author szimek / https://github.com/szimek/\n * @author tschw\n */\n\nfunction WebGLRenderer(parameters) {\n  parameters = parameters || {};\n\n  var _canvas = parameters.canvas !== undefined ? parameters.canvas : document.createElementNS('http://www.w3.org/1999/xhtml', 'canvas'),\n      _context = parameters.context !== undefined ? parameters.context : null,\n      _alpha = parameters.alpha !== undefined ? parameters.alpha : false,\n      _depth = parameters.depth !== undefined ? parameters.depth : true,\n      _stencil = parameters.stencil !== undefined ? parameters.stencil : true,\n      _antialias = parameters.antialias !== undefined ? parameters.antialias : false,\n      _premultipliedAlpha = parameters.premultipliedAlpha !== undefined ? parameters.premultipliedAlpha : true,\n      _preserveDrawingBuffer = parameters.preserveDrawingBuffer !== undefined ? parameters.preserveDrawingBuffer : false,\n      _powerPreference = parameters.powerPreference !== undefined ? parameters.powerPreference : 'default',\n      _failIfMajorPerformanceCaveat = parameters.failIfMajorPerformanceCaveat !== undefined ? parameters.failIfMajorPerformanceCaveat : false;\n\n  var currentRenderList = null;\n  var currentRenderState = null; // public properties\n\n  this.domElement = _canvas; // Debug configuration container\n\n  this.debug = {\n    /**\n     * Enables error checking and reporting when shader programs are being compiled\n     * @type {boolean}\n     */\n    checkShaderErrors: true\n  }; // clearing\n\n  this.autoClear = true;\n  this.autoClearColor = true;\n  this.autoClearDepth = true;\n  this.autoClearStencil = true; // scene graph\n\n  this.sortObjects = true; // user-defined clipping\n\n  this.clippingPlanes = [];\n  this.localClippingEnabled = false; // physically based shading\n\n  this.gammaFactor = 2.0; // for backwards compatibility\n\n  this.outputEncoding = LinearEncoding; // physical lights\n\n  this.physicallyCorrectLights = false; // tone mapping\n\n  this.toneMapping = LinearToneMapping;\n  this.toneMappingExposure = 1.0;\n  this.toneMappingWhitePoint = 1.0; // morphs\n\n  this.maxMorphTargets = 8;\n  this.maxMorphNormals = 4; // internal properties\n\n  var _this = this,\n      _isContextLost = false,\n      // internal state cache\n  _framebuffer = null,\n      _currentActiveCubeFace = 0,\n      _currentActiveMipmapLevel = 0,\n      _currentRenderTarget = null,\n      _currentFramebuffer = null,\n      _currentMaterialId = -1,\n      // geometry and program caching\n  _currentGeometryProgram = {\n    geometry: null,\n    program: null,\n    wireframe: false\n  },\n      _currentCamera = null,\n      _currentArrayCamera = null,\n      _currentViewport = new Vector4(),\n      _currentScissor = new Vector4(),\n      _currentScissorTest = null,\n      //\n  _width = _canvas.width,\n      _height = _canvas.height,\n      _pixelRatio = 1,\n      _opaqueSort = null,\n      _transparentSort = null,\n      _viewport = new Vector4(0, 0, _width, _height),\n      _scissor = new Vector4(0, 0, _width, _height),\n      _scissorTest = false,\n      // frustum\n  _frustum = new Frustum(),\n      // clipping\n  _clipping = new WebGLClipping(),\n      _clippingEnabled = false,\n      _localClippingEnabled = false,\n      // camera matrices cache\n  _projScreenMatrix = new Matrix4(),\n      _vector3 = new Vector3();\n\n  function getTargetPixelRatio() {\n    return _currentRenderTarget === null ? _pixelRatio : 1;\n  } // initialize\n\n\n  var _gl;\n\n  try {\n    var contextAttributes = {\n      alpha: _alpha,\n      depth: _depth,\n      stencil: _stencil,\n      antialias: _antialias,\n      premultipliedAlpha: _premultipliedAlpha,\n      preserveDrawingBuffer: _preserveDrawingBuffer,\n      powerPreference: _powerPreference,\n      failIfMajorPerformanceCaveat: _failIfMajorPerformanceCaveat,\n      xrCompatible: true\n    }; // event listeners must be registered before WebGL context is created, see #12753\n\n    _canvas.addEventListener('webglcontextlost', onContextLost, false);\n\n    _canvas.addEventListener('webglcontextrestored', onContextRestore, false);\n\n    _gl = _context || _canvas.getContext('webgl', contextAttributes) || _canvas.getContext('experimental-webgl', contextAttributes);\n\n    if (_gl === null) {\n      if (_canvas.getContext('webgl') !== null) {\n        throw new Error('Error creating WebGL context with your selected attributes.');\n      } else {\n        throw new Error('Error creating WebGL context.');\n      }\n    } // Some experimental-webgl implementations do not have getShaderPrecisionFormat\n\n\n    if (_gl.getShaderPrecisionFormat === undefined) {\n      _gl.getShaderPrecisionFormat = function () {\n        return {\n          'rangeMin': 1,\n          'rangeMax': 1,\n          'precision': 1\n        };\n      };\n    }\n  } catch (error) {\n    console.error('THREE.WebGLRenderer: ' + error.message);\n    throw error;\n  }\n\n  var extensions, capabilities, state, info;\n  var properties, textures, attributes, geometries, objects;\n  var programCache, renderLists, renderStates;\n  var background, morphtargets, bufferRenderer, indexedBufferRenderer;\n  var utils;\n\n  function initGLContext() {\n    extensions = new WebGLExtensions(_gl);\n    capabilities = new WebGLCapabilities(_gl, extensions, parameters);\n\n    if (capabilities.isWebGL2 === false) {\n      extensions.get('WEBGL_depth_texture');\n      extensions.get('OES_texture_float');\n      extensions.get('OES_texture_half_float');\n      extensions.get('OES_texture_half_float_linear');\n      extensions.get('OES_standard_derivatives');\n      extensions.get('OES_element_index_uint');\n      extensions.get('ANGLE_instanced_arrays');\n    }\n\n    extensions.get('OES_texture_float_linear');\n    utils = new WebGLUtils(_gl, extensions, capabilities);\n    state = new WebGLState(_gl, extensions, capabilities);\n    state.scissor(_currentScissor.copy(_scissor).multiplyScalar(_pixelRatio).floor());\n    state.viewport(_currentViewport.copy(_viewport).multiplyScalar(_pixelRatio).floor());\n    info = new WebGLInfo(_gl);\n    properties = new WebGLProperties();\n    textures = new WebGLTextures(_gl, extensions, state, properties, capabilities, utils, info);\n    attributes = new WebGLAttributes(_gl, capabilities);\n    geometries = new WebGLGeometries(_gl, attributes, info);\n    objects = new WebGLObjects(_gl, geometries, attributes, info);\n    morphtargets = new WebGLMorphtargets(_gl);\n    programCache = new WebGLPrograms(_this, extensions, capabilities);\n    renderLists = new WebGLRenderLists();\n    renderStates = new WebGLRenderStates();\n    background = new WebGLBackground(_this, state, objects, _premultipliedAlpha);\n    bufferRenderer = new WebGLBufferRenderer(_gl, extensions, info, capabilities);\n    indexedBufferRenderer = new WebGLIndexedBufferRenderer(_gl, extensions, info, capabilities);\n    info.programs = programCache.programs;\n    _this.capabilities = capabilities;\n    _this.extensions = extensions;\n    _this.properties = properties;\n    _this.renderLists = renderLists;\n    _this.state = state;\n    _this.info = info;\n  }\n\n  initGLContext(); // xr\n\n  var xr = new WebXRManager(_this, _gl);\n  this.xr = xr; // shadow map\n\n  var shadowMap = new WebGLShadowMap(_this, objects, capabilities.maxTextureSize);\n  this.shadowMap = shadowMap; // API\n\n  this.getContext = function () {\n    return _gl;\n  };\n\n  this.getContextAttributes = function () {\n    return _gl.getContextAttributes();\n  };\n\n  this.forceContextLoss = function () {\n    var extension = extensions.get('WEBGL_lose_context');\n    if (extension) extension.loseContext();\n  };\n\n  this.forceContextRestore = function () {\n    var extension = extensions.get('WEBGL_lose_context');\n    if (extension) extension.restoreContext();\n  };\n\n  this.getPixelRatio = function () {\n    return _pixelRatio;\n  };\n\n  this.setPixelRatio = function (value) {\n    if (value === undefined) return;\n    _pixelRatio = value;\n    this.setSize(_width, _height, false);\n  };\n\n  this.getSize = function (target) {\n    if (target === undefined) {\n      console.warn('WebGLRenderer: .getsize() now requires a Vector2 as an argument');\n      target = new Vector2();\n    }\n\n    return target.set(_width, _height);\n  };\n\n  this.setSize = function (width, height, updateStyle) {\n    if (xr.isPresenting) {\n      console.warn('THREE.WebGLRenderer: Can\\'t change size while VR device is presenting.');\n      return;\n    }\n\n    _width = width;\n    _height = height;\n    _canvas.width = Math.floor(width * _pixelRatio);\n    _canvas.height = Math.floor(height * _pixelRatio);\n\n    if (updateStyle !== false) {\n      _canvas.style.width = width + 'px';\n      _canvas.style.height = height + 'px';\n    }\n\n    this.setViewport(0, 0, width, height);\n  };\n\n  this.getDrawingBufferSize = function (target) {\n    if (target === undefined) {\n      console.warn('WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument');\n      target = new Vector2();\n    }\n\n    return target.set(_width * _pixelRatio, _height * _pixelRatio).floor();\n  };\n\n  this.setDrawingBufferSize = function (width, height, pixelRatio) {\n    _width = width;\n    _height = height;\n    _pixelRatio = pixelRatio;\n    _canvas.width = Math.floor(width * pixelRatio);\n    _canvas.height = Math.floor(height * pixelRatio);\n    this.setViewport(0, 0, width, height);\n  };\n\n  this.getCurrentViewport = function (target) {\n    if (target === undefined) {\n      console.warn('WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument');\n      target = new Vector4();\n    }\n\n    return target.copy(_currentViewport);\n  };\n\n  this.getViewport = function (target) {\n    return target.copy(_viewport);\n  };\n\n  this.setViewport = function (x, y, width, height) {\n    if (x.isVector4) {\n      _viewport.set(x.x, x.y, x.z, x.w);\n    } else {\n      _viewport.set(x, y, width, height);\n    }\n\n    state.viewport(_currentViewport.copy(_viewport).multiplyScalar(_pixelRatio).floor());\n  };\n\n  this.getScissor = function (target) {\n    return target.copy(_scissor);\n  };\n\n  this.setScissor = function (x, y, width, height) {\n    if (x.isVector4) {\n      _scissor.set(x.x, x.y, x.z, x.w);\n    } else {\n      _scissor.set(x, y, width, height);\n    }\n\n    state.scissor(_currentScissor.copy(_scissor).multiplyScalar(_pixelRatio).floor());\n  };\n\n  this.getScissorTest = function () {\n    return _scissorTest;\n  };\n\n  this.setScissorTest = function (boolean) {\n    state.setScissorTest(_scissorTest = boolean);\n  };\n\n  this.setOpaqueSort = function (method) {\n    _opaqueSort = method;\n  };\n\n  this.setTransparentSort = function (method) {\n    _transparentSort = method;\n  }; // Clearing\n\n\n  this.getClearColor = function () {\n    return background.getClearColor();\n  };\n\n  this.setClearColor = function () {\n    background.setClearColor.apply(background, arguments);\n  };\n\n  this.getClearAlpha = function () {\n    return background.getClearAlpha();\n  };\n\n  this.setClearAlpha = function () {\n    background.setClearAlpha.apply(background, arguments);\n  };\n\n  this.clear = function (color, depth, stencil) {\n    var bits = 0;\n    if (color === undefined || color) bits |= 16384;\n    if (depth === undefined || depth) bits |= 256;\n    if (stencil === undefined || stencil) bits |= 1024;\n\n    _gl.clear(bits);\n  };\n\n  this.clearColor = function () {\n    this.clear(true, false, false);\n  };\n\n  this.clearDepth = function () {\n    this.clear(false, true, false);\n  };\n\n  this.clearStencil = function () {\n    this.clear(false, false, true);\n  }; //\n\n\n  this.dispose = function () {\n    _canvas.removeEventListener('webglcontextlost', onContextLost, false);\n\n    _canvas.removeEventListener('webglcontextrestored', onContextRestore, false);\n\n    renderLists.dispose();\n    renderStates.dispose();\n    properties.dispose();\n    objects.dispose();\n    xr.dispose();\n    animation.stop();\n  }; // Events\n\n\n  function onContextLost(event) {\n    event.preventDefault();\n    console.log('THREE.WebGLRenderer: Context Lost.');\n    _isContextLost = true;\n  }\n\n  function onContextRestore()\n  /* event */\n  {\n    console.log('THREE.WebGLRenderer: Context Restored.');\n    _isContextLost = false;\n    initGLContext();\n  }\n\n  function onMaterialDispose(event) {\n    var material = event.target;\n    material.removeEventListener('dispose', onMaterialDispose);\n    deallocateMaterial(material);\n  } // Buffer deallocation\n\n\n  function deallocateMaterial(material) {\n    releaseMaterialProgramReference(material);\n    properties.remove(material);\n  }\n\n  function releaseMaterialProgramReference(material) {\n    var programInfo = properties.get(material).program;\n    material.program = undefined;\n\n    if (programInfo !== undefined) {\n      programCache.releaseProgram(programInfo);\n    }\n  } // Buffer rendering\n\n\n  function renderObjectImmediate(object, program) {\n    object.render(function (object) {\n      _this.renderBufferImmediate(object, program);\n    });\n  }\n\n  this.renderBufferImmediate = function (object, program) {\n    state.initAttributes();\n    var buffers = properties.get(object);\n    if (object.hasPositions && !buffers.position) buffers.position = _gl.createBuffer();\n    if (object.hasNormals && !buffers.normal) buffers.normal = _gl.createBuffer();\n    if (object.hasUvs && !buffers.uv) buffers.uv = _gl.createBuffer();\n    if (object.hasColors && !buffers.color) buffers.color = _gl.createBuffer();\n    var programAttributes = program.getAttributes();\n\n    if (object.hasPositions) {\n      _gl.bindBuffer(34962, buffers.position);\n\n      _gl.bufferData(34962, object.positionArray, 35048);\n\n      state.enableAttribute(programAttributes.position);\n\n      _gl.vertexAttribPointer(programAttributes.position, 3, 5126, false, 0, 0);\n    }\n\n    if (object.hasNormals) {\n      _gl.bindBuffer(34962, buffers.normal);\n\n      _gl.bufferData(34962, object.normalArray, 35048);\n\n      state.enableAttribute(programAttributes.normal);\n\n      _gl.vertexAttribPointer(programAttributes.normal, 3, 5126, false, 0, 0);\n    }\n\n    if (object.hasUvs) {\n      _gl.bindBuffer(34962, buffers.uv);\n\n      _gl.bufferData(34962, object.uvArray, 35048);\n\n      state.enableAttribute(programAttributes.uv);\n\n      _gl.vertexAttribPointer(programAttributes.uv, 2, 5126, false, 0, 0);\n    }\n\n    if (object.hasColors) {\n      _gl.bindBuffer(34962, buffers.color);\n\n      _gl.bufferData(34962, object.colorArray, 35048);\n\n      state.enableAttribute(programAttributes.color);\n\n      _gl.vertexAttribPointer(programAttributes.color, 3, 5126, false, 0, 0);\n    }\n\n    state.disableUnusedAttributes();\n\n    _gl.drawArrays(4, 0, object.count);\n\n    object.count = 0;\n  };\n\n  var tempScene = new Scene();\n\n  this.renderBufferDirect = function (camera, scene, geometry, material, object, group) {\n    if (scene === null) scene = tempScene; // renderBufferDirect second parameter used to be fog (could be null)\n\n    var frontFaceCW = object.isMesh && object.matrixWorld.determinant() < 0;\n    var program = setProgram(camera, scene, material, object);\n    state.setMaterial(material, frontFaceCW);\n    var updateBuffers = false;\n\n    if (_currentGeometryProgram.geometry !== geometry.id || _currentGeometryProgram.program !== program.id || _currentGeometryProgram.wireframe !== (material.wireframe === true)) {\n      _currentGeometryProgram.geometry = geometry.id;\n      _currentGeometryProgram.program = program.id;\n      _currentGeometryProgram.wireframe = material.wireframe === true;\n      updateBuffers = true;\n    }\n\n    if (material.morphNormals) {\n      morphtargets.update(object, geometry, material, program);\n      updateBuffers = true;\n    } //\n\n\n    var index = geometry.index;\n    var position = geometry.attributes.position; //\n\n    if (index === null) {\n      if (position === undefined || position.count === 0) return;\n    } else if (index.count === 0) {\n      return;\n    } //\n\n\n    var rangeFactor = 1;\n\n    if (material.wireframe === true) {\n      index = geometries.getWireframeAttribute(geometry);\n      rangeFactor = 2;\n    }\n\n    var attribute;\n    var renderer = bufferRenderer;\n\n    if (index !== null) {\n      attribute = attributes.get(index);\n      renderer = indexedBufferRenderer;\n      renderer.setIndex(attribute);\n    }\n\n    if (updateBuffers) {\n      setupVertexAttributes(object, geometry, material, program);\n\n      if (index !== null) {\n        _gl.bindBuffer(34963, attribute.buffer);\n      }\n    } //\n\n\n    var dataCount = index !== null ? index.count : position.count;\n    var rangeStart = geometry.drawRange.start * rangeFactor;\n    var rangeCount = geometry.drawRange.count * rangeFactor;\n    var groupStart = group !== null ? group.start * rangeFactor : 0;\n    var groupCount = group !== null ? group.count * rangeFactor : Infinity;\n    var drawStart = Math.max(rangeStart, groupStart);\n    var drawEnd = Math.min(dataCount, rangeStart + rangeCount, groupStart + groupCount) - 1;\n    var drawCount = Math.max(0, drawEnd - drawStart + 1);\n    if (drawCount === 0) return; //\n\n    if (object.isMesh) {\n      if (material.wireframe === true) {\n        state.setLineWidth(material.wireframeLinewidth * getTargetPixelRatio());\n        renderer.setMode(1);\n      } else {\n        renderer.setMode(4);\n      }\n    } else if (object.isSprite) {\n      renderer.setMode(4);\n    }\n\n    if (geometry.isInstancedBufferGeometry) {\n      renderer.renderInstances(geometry, drawStart, drawCount, geometry.maxInstancedCount);\n    } else {\n      renderer.render(drawStart, drawCount);\n    }\n  };\n\n  function setupVertexAttributes(object, geometry, material, program) {\n    if (capabilities.isWebGL2 === false && geometry.isInstancedBufferGeometry) {\n      if (extensions.get('ANGLE_instanced_arrays') === null) return;\n    }\n\n    state.initAttributes();\n    var geometryAttributes = geometry.attributes;\n    var programAttributes = program.getAttributes();\n    var materialDefaultAttributeValues = material.defaultAttributeValues;\n\n    for (var name in programAttributes) {\n      var programAttribute = programAttributes[name];\n\n      if (programAttribute >= 0) {\n        var geometryAttribute = geometryAttributes[name];\n\n        if (geometryAttribute !== undefined) {\n          var normalized = geometryAttribute.normalized;\n          var size = geometryAttribute.itemSize;\n          var attribute = attributes.get(geometryAttribute); // TODO Attribute may not be available on context restore\n\n          if (attribute === undefined) continue;\n          var buffer = attribute.buffer;\n          var type = attribute.type;\n          var bytesPerElement = attribute.bytesPerElement;\n\n          if (geometryAttribute.isInterleavedBufferAttribute) {\n            var data = geometryAttribute.data;\n            var stride = data.stride;\n            var offset = geometryAttribute.offset;\n\n            if (data && data.isInstancedInterleavedBuffer) {\n              state.enableAttributeAndDivisor(programAttribute, data.meshPerAttribute);\n\n              if (geometry.maxInstancedCount === undefined) {\n                geometry.maxInstancedCount = data.meshPerAttribute * data.count;\n              }\n            } else {\n              state.enableAttribute(programAttribute);\n            }\n\n            _gl.bindBuffer(34962, buffer);\n\n            _gl.vertexAttribPointer(programAttribute, size, type, normalized, stride * bytesPerElement, offset * bytesPerElement);\n          } else {\n            if (geometryAttribute.isInstancedBufferAttribute) {\n              state.enableAttributeAndDivisor(programAttribute, geometryAttribute.meshPerAttribute);\n\n              if (geometry.maxInstancedCount === undefined) {\n                geometry.maxInstancedCount = geometryAttribute.meshPerAttribute * geometryAttribute.count;\n              }\n            } else {\n              state.enableAttribute(programAttribute);\n            }\n\n            _gl.bindBuffer(34962, buffer);\n\n            _gl.vertexAttribPointer(programAttribute, size, type, normalized, 0, 0);\n          }\n        } else if (name === 'instanceMatrix') {\n          var attribute = attributes.get(object.instanceMatrix); // TODO Attribute may not be available on context restore\n\n          if (attribute === undefined) continue;\n          var buffer = attribute.buffer;\n          var type = attribute.type;\n          state.enableAttributeAndDivisor(programAttribute + 0, 1);\n          state.enableAttributeAndDivisor(programAttribute + 1, 1);\n          state.enableAttributeAndDivisor(programAttribute + 2, 1);\n          state.enableAttributeAndDivisor(programAttribute + 3, 1);\n\n          _gl.bindBuffer(34962, buffer);\n\n          _gl.vertexAttribPointer(programAttribute + 0, 4, type, false, 64, 0);\n\n          _gl.vertexAttribPointer(programAttribute + 1, 4, type, false, 64, 16);\n\n          _gl.vertexAttribPointer(programAttribute + 2, 4, type, false, 64, 32);\n\n          _gl.vertexAttribPointer(programAttribute + 3, 4, type, false, 64, 48);\n        } else if (materialDefaultAttributeValues !== undefined) {\n          var value = materialDefaultAttributeValues[name];\n\n          if (value !== undefined) {\n            switch (value.length) {\n              case 2:\n                _gl.vertexAttrib2fv(programAttribute, value);\n\n                break;\n\n              case 3:\n                _gl.vertexAttrib3fv(programAttribute, value);\n\n                break;\n\n              case 4:\n                _gl.vertexAttrib4fv(programAttribute, value);\n\n                break;\n\n              default:\n                _gl.vertexAttrib1fv(programAttribute, value);\n\n            }\n          }\n        }\n      }\n    }\n\n    state.disableUnusedAttributes();\n  } // Compile\n\n\n  this.compile = function (scene, camera) {\n    currentRenderState = renderStates.get(scene, camera);\n    currentRenderState.init();\n    scene.traverse(function (object) {});\n    currentRenderState.setupLights(camera);\n    var compiled = {};\n    scene.traverse(function (object) {\n      if (object.material) {\n        if (Array.isArray(object.material)) {\n          for (var i = 0; i < object.material.length; i++) {\n            if (object.material[i].uuid in compiled === false) {\n              initMaterial(object.material[i], scene, object);\n              compiled[object.material[i].uuid] = true;\n            }\n          }\n        } else if (object.material.uuid in compiled === false) {\n          initMaterial(object.material, scene, object);\n          compiled[object.material.uuid] = true;\n        }\n      }\n    });\n  }; // Animation Loop\n\n\n  var onAnimationFrameCallback = null;\n\n  function onAnimationFrame(time) {\n    if (xr.isPresenting) return;\n    if (onAnimationFrameCallback) onAnimationFrameCallback(time);\n  }\n\n  var animation = new WebGLAnimation();\n  animation.setAnimationLoop(onAnimationFrame);\n  if (typeof window !== 'undefined') animation.setContext(window);\n\n  this.setAnimationLoop = function (callback) {\n    onAnimationFrameCallback = callback;\n    xr.setAnimationLoop(callback);\n    animation.start();\n  }; // Rendering\n\n\n  this.render = function (scene, camera) {\n    var renderTarget, forceClear;\n\n    if (arguments[2] !== undefined) {\n      console.warn('THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead.');\n      renderTarget = arguments[2];\n    }\n\n    if (arguments[3] !== undefined) {\n      console.warn('THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead.');\n      forceClear = arguments[3];\n    }\n\n    if (!(camera && camera.isCamera)) {\n      console.error('THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.');\n      return;\n    }\n\n    if (_isContextLost) return; // reset caching for this frame\n\n    _currentGeometryProgram.geometry = null;\n    _currentGeometryProgram.program = null;\n    _currentGeometryProgram.wireframe = false;\n    _currentMaterialId = -1;\n    _currentCamera = null; // update scene graph\n\n    if (scene.autoUpdate === true) scene.updateMatrixWorld(); // update camera matrices and frustum\n\n    if (camera.parent === null) camera.updateMatrixWorld();\n\n    if (xr.enabled && xr.isPresenting) {\n      camera = xr.getCamera(camera);\n    } //\n\n\n    currentRenderState = renderStates.get(scene, camera);\n    currentRenderState.init();\n    scene.onBeforeRender(_this, scene, camera, renderTarget || _currentRenderTarget);\n\n    _projScreenMatrix.multiplyMatrices(camera.projectionMatrix, camera.matrixWorldInverse);\n\n    _frustum.setFromProjectionMatrix(_projScreenMatrix);\n\n    _localClippingEnabled = this.localClippingEnabled;\n    _clippingEnabled = _clipping.init(this.clippingPlanes, _localClippingEnabled, camera);\n    currentRenderList = renderLists.get(scene, camera);\n    currentRenderList.init();\n    projectObject(scene, camera, 0, _this.sortObjects);\n    currentRenderList.finish();\n\n    if (_this.sortObjects === true) {\n      currentRenderList.sort(_opaqueSort, _transparentSort);\n    } //\n\n\n    if (_clippingEnabled) _clipping.beginShadows();\n    var shadowsArray = currentRenderState.state.shadowsArray;\n    shadowMap.render(shadowsArray, scene, camera);\n    currentRenderState.setupLights(camera);\n    if (_clippingEnabled) _clipping.endShadows(); //\n\n    if (this.info.autoReset) this.info.reset();\n\n    if (renderTarget !== undefined) {\n      this.setRenderTarget(renderTarget);\n    } //\n\n\n    background.render(currentRenderList, scene, camera, forceClear); // render scene\n\n    var opaqueObjects = currentRenderList.opaque;\n    var transparentObjects = currentRenderList.transparent;\n\n    if (scene.overrideMaterial) {\n      var overrideMaterial = scene.overrideMaterial;\n      if (opaqueObjects.length) renderObjects(opaqueObjects, scene, camera, overrideMaterial);\n      if (transparentObjects.length) renderObjects(transparentObjects, scene, camera, overrideMaterial);\n    } else {\n      // opaque pass (front-to-back order)\n      if (opaqueObjects.length) renderObjects(opaqueObjects, scene, camera); // transparent pass (back-to-front order)\n\n      if (transparentObjects.length) renderObjects(transparentObjects, scene, camera);\n    } //\n\n\n    scene.onAfterRender(_this, scene, camera); //\n\n    if (_currentRenderTarget !== null) {\n      // Generate mipmap if we're using any kind of mipmap filtering\n      textures.updateRenderTargetMipmap(_currentRenderTarget); // resolve multisample renderbuffers to a single-sample texture if necessary\n\n      textures.updateMultisampleRenderTarget(_currentRenderTarget);\n    } // Ensure depth buffer writing is enabled so it can be cleared on next render\n\n\n    state.buffers.depth.setTest(true);\n    state.buffers.depth.setMask(true);\n    state.buffers.color.setMask(true);\n    state.setPolygonOffset(false); // _gl.finish();\n\n    currentRenderList = null;\n    currentRenderState = null;\n  };\n\n  function projectObject(object, camera, groupOrder, sortObjects) {\n    if (object.visible === false) return;\n    var visible = object.layers.test(camera.layers);\n\n    if (visible) {\n      if (object.isGroup) {\n        groupOrder = object.renderOrder;\n      } else if (object.isLOD) {\n        if (object.autoUpdate === true) object.update(camera);\n      } else if (object.isSprite) {\n        if (!object.frustumCulled || _frustum.intersectsSprite(object)) {\n          if (sortObjects) {\n            _vector3.setFromMatrixPosition(object.matrixWorld).applyMatrix4(_projScreenMatrix);\n          }\n\n          var geometry = objects.update(object);\n          var material = object.material;\n\n          if (material.visible) {\n            currentRenderList.push(object, geometry, material, groupOrder, _vector3.z, null);\n          }\n        }\n      } else if (object.isImmediateRenderObject) {\n        if (sortObjects) {\n          _vector3.setFromMatrixPosition(object.matrixWorld).applyMatrix4(_projScreenMatrix);\n        }\n\n        currentRenderList.push(object, null, object.material, groupOrder, _vector3.z, null);\n      } else if (object.isMesh || false || false) {\n        if (!object.frustumCulled || _frustum.intersectsObject(object)) {\n          if (sortObjects) {\n            _vector3.setFromMatrixPosition(object.matrixWorld).applyMatrix4(_projScreenMatrix);\n          }\n\n          var geometry = objects.update(object);\n          var material = object.material;\n\n          if (Array.isArray(material)) {\n            var groups = geometry.groups;\n\n            for (var i = 0, l = groups.length; i < l; i++) {\n              var group = groups[i];\n              var groupMaterial = material[group.materialIndex];\n\n              if (groupMaterial && groupMaterial.visible) {\n                currentRenderList.push(object, geometry, groupMaterial, groupOrder, _vector3.z, group);\n              }\n            }\n          } else if (material.visible) {\n            currentRenderList.push(object, geometry, material, groupOrder, _vector3.z, null);\n          }\n        }\n      }\n    }\n\n    var children = object.children;\n\n    for (var i = 0, l = children.length; i < l; i++) {\n      projectObject(children[i], camera, groupOrder, sortObjects);\n    }\n  }\n\n  function renderObjects(renderList, scene, camera, overrideMaterial) {\n    for (var i = 0, l = renderList.length; i < l; i++) {\n      var renderItem = renderList[i];\n      var object = renderItem.object;\n      var geometry = renderItem.geometry;\n      var material = overrideMaterial === undefined ? renderItem.material : overrideMaterial;\n      var group = renderItem.group;\n\n      if (camera.isArrayCamera) {\n        _currentArrayCamera = camera;\n        var cameras = camera.cameras;\n\n        for (var j = 0, jl = cameras.length; j < jl; j++) {\n          var camera2 = cameras[j];\n\n          if (object.layers.test(camera2.layers)) {\n            state.viewport(_currentViewport.copy(camera2.viewport));\n            currentRenderState.setupLights(camera2);\n            renderObject(object, scene, camera2, geometry, material, group);\n          }\n        }\n      } else {\n        _currentArrayCamera = null;\n        renderObject(object, scene, camera, geometry, material, group);\n      }\n    }\n  }\n\n  function renderObject(object, scene, camera, geometry, material, group) {\n    object.onBeforeRender(_this, scene, camera, geometry, material, group);\n    currentRenderState = renderStates.get(scene, _currentArrayCamera || camera);\n    object.modelViewMatrix.multiplyMatrices(camera.matrixWorldInverse, object.matrixWorld);\n    object.normalMatrix.getNormalMatrix(object.modelViewMatrix);\n\n    if (object.isImmediateRenderObject) {\n      var program = setProgram(camera, scene, material, object);\n      state.setMaterial(material);\n      _currentGeometryProgram.geometry = null;\n      _currentGeometryProgram.program = null;\n      _currentGeometryProgram.wireframe = false;\n      renderObjectImmediate(object, program);\n    } else {\n      _this.renderBufferDirect(camera, scene, geometry, material, object, group);\n    }\n\n    object.onAfterRender(_this, scene, camera, geometry, material, group);\n    currentRenderState = renderStates.get(scene, _currentArrayCamera || camera);\n  }\n\n  function initMaterial(material, scene, object) {\n    var materialProperties = properties.get(material);\n    var lights = currentRenderState.state.lights;\n    var shadowsArray = currentRenderState.state.shadowsArray;\n    var lightsStateVersion = lights.state.version;\n    var parameters = programCache.getParameters(material, lights.state, shadowsArray, scene, _clipping.numPlanes, _clipping.numIntersection, object);\n    var programCacheKey = programCache.getProgramCacheKey(parameters);\n    var program = materialProperties.program;\n    var programChange = true;\n\n    if (program === undefined) {\n      // new material\n      material.addEventListener('dispose', onMaterialDispose);\n    } else if (program.cacheKey !== programCacheKey) {\n      // changed glsl or parameters\n      releaseMaterialProgramReference(material);\n    } else if (materialProperties.lightsStateVersion !== lightsStateVersion) {\n      materialProperties.lightsStateVersion = lightsStateVersion;\n      programChange = false;\n    } else if (parameters.shaderID !== undefined) {\n      // same glsl and uniform list\n      return;\n    } else {\n      // only rebuild uniform list\n      programChange = false;\n    }\n\n    if (programChange) {\n      program = programCache.acquireProgram(parameters, programCacheKey);\n      materialProperties.program = program;\n      materialProperties.uniforms = parameters.uniforms;\n      materialProperties.environment = null;\n      materialProperties.outputEncoding = _this.outputEncoding;\n      material.program = program;\n    }\n\n    var programAttributes = program.getAttributes();\n\n    if (false) {\n      for (var i; i < _this.maxMorphTargets; i++) {}\n    }\n\n    if (material.morphNormals) {\n      material.numSupportedMorphNormals = 0;\n\n      for (var i = 0; i < _this.maxMorphNormals; i++) {\n        if (programAttributes['morphNormal' + i] >= 0) {\n          material.numSupportedMorphNormals++;\n        }\n      }\n    }\n\n    var uniforms = materialProperties.uniforms;\n\n    if (material.clipping === true) {\n      materialProperties.numClippingPlanes = _clipping.numPlanes;\n      materialProperties.numIntersection = _clipping.numIntersection;\n      uniforms.clippingPlanes = _clipping.uniform;\n    }\n\n    materialProperties.fog = scene.fog; // store the light setup it was created for\n\n    materialProperties.needsLights = materialNeedsLights(material);\n    materialProperties.lightsStateVersion = lightsStateVersion;\n\n    if (materialProperties.needsLights) {\n      // wire up the material to this renderer's lighting state\n      uniforms.ambientLightColor.value = lights.state.ambient;\n      uniforms.lightProbe.value = lights.state.probe;\n      uniforms.directionalLights.value = lights.state.directional;\n      uniforms.directionalLightShadows.value = lights.state.directionalShadow;\n      uniforms.spotLights.value = lights.state.spot;\n      uniforms.spotLightShadows.value = lights.state.spotShadow;\n      uniforms.rectAreaLights.value = lights.state.rectArea;\n      uniforms.pointLights.value = lights.state.point;\n      uniforms.pointLightShadows.value = lights.state.pointShadow;\n      uniforms.hemisphereLights.value = lights.state.hemi;\n      uniforms.directionalShadowMap.value = lights.state.directionalShadowMap;\n      uniforms.directionalShadowMatrix.value = lights.state.directionalShadowMatrix;\n      uniforms.spotShadowMap.value = lights.state.spotShadowMap;\n      uniforms.spotShadowMatrix.value = lights.state.spotShadowMatrix;\n      uniforms.pointShadowMap.value = lights.state.pointShadowMap;\n      uniforms.pointShadowMatrix.value = lights.state.pointShadowMatrix; // TODO (abelnation): add area lights shadow info to uniforms\n    }\n\n    var progUniforms = materialProperties.program.getUniforms(),\n        uniformsList = WebGLUniforms.seqWithValue(progUniforms.seq, uniforms);\n    materialProperties.uniformsList = uniformsList;\n  }\n\n  function setProgram(camera, scene, material, object) {\n    textures.resetTextureUnits();\n    var fog = scene.fog;\n    var environment = null;\n    var materialProperties = properties.get(material);\n    var lights = currentRenderState.state.lights;\n\n    if (_clippingEnabled) {\n      if (_localClippingEnabled || camera !== _currentCamera) {\n        var useCache = camera === _currentCamera && material.id === _currentMaterialId; // we might want to call this function with some ClippingGroup\n        // object instead of the material, once it becomes feasible\n        // (#8465, #8379)\n\n        _clipping.setState(material.clippingPlanes, material.clipIntersection, material.clipShadows, camera, materialProperties, useCache);\n      }\n    }\n\n    if (material.version === materialProperties.__version) {\n      if (materialProperties.program === undefined) {\n        initMaterial(material, scene, object);\n      } else if (material.fog && materialProperties.fog !== fog) {\n        initMaterial(material, scene, object);\n      } else if (materialProperties.environment !== environment) {\n        initMaterial(material, scene, object);\n      } else if (materialProperties.needsLights && materialProperties.lightsStateVersion !== lights.state.version) {\n        initMaterial(material, scene, object);\n      } else if (materialProperties.numClippingPlanes !== undefined && (materialProperties.numClippingPlanes !== _clipping.numPlanes || materialProperties.numIntersection !== _clipping.numIntersection)) {\n        initMaterial(material, scene, object);\n      } else if (materialProperties.outputEncoding !== _this.outputEncoding) {\n        initMaterial(material, scene, object);\n      }\n    } else {\n      initMaterial(material, scene, object);\n      materialProperties.__version = material.version;\n    }\n\n    var refreshProgram = false;\n    var refreshMaterial = false;\n    var refreshLights = false;\n    var program = materialProperties.program,\n        p_uniforms = program.getUniforms(),\n        m_uniforms = materialProperties.uniforms;\n\n    if (state.useProgram(program.program)) {\n      refreshProgram = true;\n      refreshMaterial = true;\n      refreshLights = true;\n    }\n\n    if (material.id !== _currentMaterialId) {\n      _currentMaterialId = material.id;\n      refreshMaterial = true;\n    }\n\n    if (refreshProgram || _currentCamera !== camera) {\n      p_uniforms.setValue(_gl, 'projectionMatrix', camera.projectionMatrix);\n\n      if (capabilities.logarithmicDepthBuffer) {\n        p_uniforms.setValue(_gl, 'logDepthBufFC', 2.0 / (Math.log(camera.far + 1.0) / Math.LN2));\n      }\n\n      if (_currentCamera !== camera) {\n        _currentCamera = camera; // lighting uniforms depend on the camera so enforce an update\n        // now, in case this material supports lights - or later, when\n        // the next material that does gets activated:\n\n        refreshMaterial = true; // set to true on material change\n\n        refreshLights = true; // remains set until update done\n      } // load material specific uniforms\n      // (shader material also gets them for the sake of genericity)\n\n\n      {\n        var uCamPos = p_uniforms.map.cameraPosition;\n\n        if (uCamPos !== undefined) {\n          uCamPos.setValue(_gl, _vector3.setFromMatrixPosition(camera.matrixWorld));\n        }\n      }\n\n      if (material.isMeshBasicMaterial || false || true) {\n        p_uniforms.setValue(_gl, 'isOrthographic', camera.isOrthographicCamera === true);\n      }\n\n      if (material.isMeshBasicMaterial || false || true || material.skinning) {\n        p_uniforms.setValue(_gl, 'viewMatrix', camera.matrixWorldInverse);\n      }\n    } // skinning uniforms must be set even if material didn't change\n    // auto-setting of texture unit for bone texture must go before other textures\n    // otherwise textures used for skinning can take over texture units reserved for other material textures\n\n\n    if (material.skinning) {\n      p_uniforms.setOptional(_gl, object, 'bindMatrix');\n      p_uniforms.setOptional(_gl, object, 'bindMatrixInverse');\n      var skeleton = object.skeleton;\n\n      if (skeleton) {\n        var bones = skeleton.bones;\n\n        if (capabilities.floatVertexTextures) {\n          if (skeleton.boneTexture === undefined) {\n            // layout (1 matrix = 4 pixels)\n            //      RGBA RGBA RGBA RGBA (=> column1, column2, column3, column4)\n            //  with  8x8  pixel texture max   16 bones * 4 pixels =  (8 * 8)\n            //       16x16 pixel texture max   64 bones * 4 pixels = (16 * 16)\n            //       32x32 pixel texture max  256 bones * 4 pixels = (32 * 32)\n            //       64x64 pixel texture max 1024 bones * 4 pixels = (64 * 64)\n            var size = Math.sqrt(bones.length * 4); // 4 pixels needed for 1 matrix\n\n            size = MathUtils.ceilPowerOfTwo(size);\n            size = Math.max(size, 4);\n            var boneMatrices = new Float32Array(size * size * 4); // 4 floats per RGBA pixel\n\n            boneMatrices.set(skeleton.boneMatrices); // copy current values\n\n            var boneTexture = new DataTexture(boneMatrices, size, size, RGBAFormat, FloatType);\n            skeleton.boneMatrices = boneMatrices;\n            skeleton.boneTexture = boneTexture;\n            skeleton.boneTextureSize = size;\n          }\n\n          p_uniforms.setValue(_gl, 'boneTexture', skeleton.boneTexture, textures);\n          p_uniforms.setValue(_gl, 'boneTextureSize', skeleton.boneTextureSize);\n        } else {\n          p_uniforms.setOptional(_gl, skeleton, 'boneMatrices');\n        }\n      }\n    }\n\n    if (refreshMaterial || materialProperties.receiveShadow !== object.receiveShadow) {\n      materialProperties.receiveShadow = object.receiveShadow;\n      p_uniforms.setValue(_gl, 'receiveShadow', object.receiveShadow);\n    }\n\n    if (refreshMaterial) {\n      p_uniforms.setValue(_gl, 'toneMappingExposure', _this.toneMappingExposure);\n      p_uniforms.setValue(_gl, 'toneMappingWhitePoint', _this.toneMappingWhitePoint);\n\n      if (materialProperties.needsLights) {\n        // the current material requires lighting info\n        // note: all lighting uniforms are always set correctly\n        // they simply reference the renderer's state for their\n        // values\n        //\n        // use the current material's .needsUpdate flags to set\n        // the GL state when required\n        markUniformsLightsNeedsUpdate(m_uniforms, refreshLights);\n      } // refresh uniforms common to several materials\n\n\n      if (fog && material.fog) {\n        refreshUniformsFog(m_uniforms, fog);\n      }\n\n      if (material.isMeshBasicMaterial) {\n        refreshUniformsCommon(m_uniforms, material);\n      } else if (material.isMeshMatcapMaterial) {\n        refreshUniformsCommon(m_uniforms, material);\n        refreshUniformsMatcap(m_uniforms, material);\n      } else if (material.isMeshDepthMaterial) {\n        refreshUniformsCommon(m_uniforms, material);\n        refreshUniformsDepth(m_uniforms, material);\n      } else if (material.isMeshNormalMaterial) {\n        refreshUniformsCommon(m_uniforms, material);\n        refreshUniformsNormal(m_uniforms, material);\n      } else if (material.isLineBasicMaterial) {\n        refreshUniformsLine(m_uniforms, material);\n\n        if (material.isLineDashedMaterial) {\n          refreshUniformsDash(m_uniforms, material);\n        }\n      } else if (material.isPointsMaterial) {\n        refreshUniformsPoints(m_uniforms, material);\n      } else if (material.isSpriteMaterial) {\n        refreshUniformsSprites(m_uniforms, material);\n      } else if (material.isShadowMaterial) {\n        m_uniforms.color.value.copy(material.color);\n        m_uniforms.opacity.value = material.opacity;\n      } // RectAreaLight Texture\n      // TODO (mrdoob): Find a nicer implementation\n\n\n      if (m_uniforms.ltc_1 !== undefined) m_uniforms.ltc_1.value = UniformsLib.LTC_1;\n      if (m_uniforms.ltc_2 !== undefined) m_uniforms.ltc_2.value = UniformsLib.LTC_2;\n      WebGLUniforms.upload(_gl, materialProperties.uniformsList, m_uniforms, textures);\n      {\n        material.uniformsNeedUpdate = false; // #15581\n      }\n    }\n\n    if (material.uniformsNeedUpdate === true) {\n      WebGLUniforms.upload(_gl, materialProperties.uniformsList, m_uniforms, textures);\n      material.uniformsNeedUpdate = false;\n    }\n\n    if (material.isSpriteMaterial) {\n      p_uniforms.setValue(_gl, 'center', object.center);\n    } // common matrices\n\n\n    p_uniforms.setValue(_gl, 'modelViewMatrix', object.modelViewMatrix);\n    p_uniforms.setValue(_gl, 'normalMatrix', object.normalMatrix);\n    p_uniforms.setValue(_gl, 'modelMatrix', object.matrixWorld);\n    return program;\n  } // Uniforms (refresh uniforms objects)\n\n\n  function refreshUniformsCommon(uniforms, material, environment) {\n    uniforms.opacity.value = material.opacity;\n\n    if (material.color) {\n      uniforms.diffuse.value.copy(material.color);\n    }\n\n    if (material.emissive) {\n      uniforms.emissive.value.copy(material.emissive).multiplyScalar(material.emissiveIntensity);\n    }\n\n    if (material.map) {\n      uniforms.map.value = material.map;\n    }\n\n    if (material.alphaMap) {\n      uniforms.alphaMap.value = material.alphaMap;\n    }\n\n    if (material.specularMap) {\n      uniforms.specularMap.value = material.specularMap;\n    }\n\n    var envMap = environment;\n\n    if (envMap) {\n      false.value = envMap;\n      uniforms.flipEnvMap.value = 1;\n      uniforms.reflectivity.value = material.reflectivity;\n      uniforms.refractionRatio.value = material.refractionRatio;\n      uniforms.maxMipLevel.value = properties.get(envMap).__maxMipLevel;\n    }\n\n    if (material.lightMap) {\n      uniforms.lightMap.value = material.lightMap;\n      uniforms.lightMapIntensity.value = material.lightMapIntensity;\n    }\n\n    if (material.aoMap) {\n      uniforms.aoMap.value = material.aoMap;\n      uniforms.aoMapIntensity.value = material.aoMapIntensity;\n    } // uv repeat and offset setting priorities\n    // 1. color map\n    // 2. specular map\n    // 3. normal map\n    // 4. bump map\n    // 5. alpha map\n    // 6. emissive map\n\n\n    var uvScaleMap;\n\n    if (material.map) {\n      uvScaleMap = material.map;\n    } else if (material.specularMap) {\n      uvScaleMap = material.specularMap;\n    } else if (material.displacementMap) {\n      uvScaleMap = material.displacementMap;\n    } else if (material.normalMap) {\n      uvScaleMap = material.normalMap;\n    } else if (material.bumpMap) {\n      uvScaleMap = material.bumpMap;\n    } else if (material.roughnessMap) {\n      uvScaleMap = material.roughnessMap;\n    } else if (material.metalnessMap) {\n      uvScaleMap = material.metalnessMap;\n    } else if (material.alphaMap) {\n      uvScaleMap = material.alphaMap;\n    } else if (material.emissiveMap) {\n      uvScaleMap = material.emissiveMap;\n    }\n\n    if (uvScaleMap !== undefined) {\n      // backwards compatibility\n      if (uvScaleMap.isWebGLRenderTarget) {\n        uvScaleMap = uvScaleMap.texture;\n      }\n\n      if (uvScaleMap.matrixAutoUpdate === true) {\n        uvScaleMap.updateMatrix();\n      }\n\n      uniforms.uvTransform.value.copy(uvScaleMap.matrix);\n    } // uv repeat and offset setting priorities for uv2\n    // 1. ao map\n    // 2. light map\n\n\n    var uv2ScaleMap;\n\n    if (material.aoMap) {\n      uv2ScaleMap = material.aoMap;\n    } else if (material.lightMap) {\n      uv2ScaleMap = material.lightMap;\n    }\n\n    if (uv2ScaleMap !== undefined) {\n      // backwards compatibility\n      if (uv2ScaleMap.isWebGLRenderTarget) {\n        uv2ScaleMap = uv2ScaleMap.texture;\n      }\n\n      if (uv2ScaleMap.matrixAutoUpdate === true) {\n        uv2ScaleMap.updateMatrix();\n      }\n\n      uniforms.uv2Transform.value.copy(uv2ScaleMap.matrix);\n    }\n  }\n\n  function refreshUniformsLine(uniforms, material) {\n    uniforms.diffuse.value.copy(material.color);\n    uniforms.opacity.value = material.opacity;\n  }\n\n  function refreshUniformsDash(uniforms, material) {\n    uniforms.dashSize.value = material.dashSize;\n    uniforms.totalSize.value = material.dashSize + material.gapSize;\n    uniforms.scale.value = material.scale;\n  }\n\n  function refreshUniformsPoints(uniforms, material) {\n    uniforms.diffuse.value.copy(material.color);\n    uniforms.opacity.value = material.opacity;\n    uniforms.size.value = material.size * _pixelRatio;\n    uniforms.scale.value = _height * 0.5;\n\n    if (material.map) {\n      uniforms.map.value = material.map;\n    }\n\n    if (material.alphaMap) {\n      uniforms.alphaMap.value = material.alphaMap;\n    } // uv repeat and offset setting priorities\n    // 1. color map\n    // 2. alpha map\n\n\n    var uvScaleMap;\n\n    if (material.map) {\n      uvScaleMap = material.map;\n    } else if (material.alphaMap) {\n      uvScaleMap = material.alphaMap;\n    }\n\n    if (uvScaleMap !== undefined) {\n      if (uvScaleMap.matrixAutoUpdate === true) {\n        uvScaleMap.updateMatrix();\n      }\n\n      uniforms.uvTransform.value.copy(uvScaleMap.matrix);\n    }\n  }\n\n  function refreshUniformsSprites(uniforms, material) {\n    uniforms.diffuse.value.copy(material.color);\n    uniforms.opacity.value = material.opacity;\n    uniforms.rotation.value = material.rotation;\n\n    if (material.map) {\n      uniforms.map.value = material.map;\n    }\n\n    if (material.alphaMap) {\n      uniforms.alphaMap.value = material.alphaMap;\n    } // uv repeat and offset setting priorities\n    // 1. color map\n    // 2. alpha map\n\n\n    var uvScaleMap;\n\n    if (material.map) {\n      uvScaleMap = material.map;\n    } else if (material.alphaMap) {\n      uvScaleMap = material.alphaMap;\n    }\n\n    if (uvScaleMap !== undefined) {\n      if (uvScaleMap.matrixAutoUpdate === true) {\n        uvScaleMap.updateMatrix();\n      }\n\n      uniforms.uvTransform.value.copy(uvScaleMap.matrix);\n    }\n  }\n\n  function refreshUniformsFog(uniforms, fog) {\n    uniforms.fogColor.value.copy(fog.color);\n\n    if (fog.isFog) {\n      uniforms.fogNear.value = fog.near;\n      uniforms.fogFar.value = fog.far;\n    } else if (fog.isFogExp2) {\n      uniforms.fogDensity.value = fog.density;\n    }\n  }\n\n  function refreshUniformsMatcap(uniforms, material) {\n    if (material.matcap) {\n      uniforms.matcap.value = material.matcap;\n    }\n\n    if (material.bumpMap) {\n      uniforms.bumpMap.value = material.bumpMap;\n      uniforms.bumpScale.value = material.bumpScale;\n      if (material.side === BackSide) uniforms.bumpScale.value *= -1;\n    }\n\n    if (material.normalMap) {\n      uniforms.normalMap.value = material.normalMap;\n      uniforms.normalScale.value.copy(material.normalScale);\n      if (material.side === BackSide) uniforms.normalScale.value.negate();\n    }\n\n    if (material.displacementMap) {\n      uniforms.displacementMap.value = material.displacementMap;\n      uniforms.displacementScale.value = material.displacementScale;\n      uniforms.displacementBias.value = material.displacementBias;\n    }\n  }\n\n  function refreshUniformsDepth(uniforms, material) {\n    if (material.displacementMap) {\n      uniforms.displacementMap.value = material.displacementMap;\n      uniforms.displacementScale.value = material.displacementScale;\n      uniforms.displacementBias.value = material.displacementBias;\n    }\n  }\n\n  function refreshUniformsNormal(uniforms, material) {\n    if (material.bumpMap) {\n      uniforms.bumpMap.value = material.bumpMap;\n      uniforms.bumpScale.value = material.bumpScale;\n      if (material.side === BackSide) uniforms.bumpScale.value *= -1;\n    }\n\n    if (material.normalMap) {\n      uniforms.normalMap.value = material.normalMap;\n      uniforms.normalScale.value.copy(material.normalScale);\n      if (material.side === BackSide) uniforms.normalScale.value.negate();\n    }\n\n    if (material.displacementMap) {\n      uniforms.displacementMap.value = material.displacementMap;\n      uniforms.displacementScale.value = material.displacementScale;\n      uniforms.displacementBias.value = material.displacementBias;\n    }\n  } // If uniforms are marked as clean, they don't need to be loaded to the GPU.\n\n\n  function markUniformsLightsNeedsUpdate(uniforms, value) {\n    uniforms.ambientLightColor.needsUpdate = value;\n    uniforms.lightProbe.needsUpdate = value;\n    uniforms.directionalLights.needsUpdate = value;\n    uniforms.directionalLightShadows.needsUpdate = value;\n    uniforms.pointLights.needsUpdate = value;\n    uniforms.pointLightShadows.needsUpdate = value;\n    uniforms.spotLights.needsUpdate = value;\n    uniforms.spotLightShadows.needsUpdate = value;\n    uniforms.rectAreaLights.needsUpdate = value;\n    uniforms.hemisphereLights.needsUpdate = value;\n  }\n\n  function materialNeedsLights(material) {\n    return material.isShadowMaterial || material.lights === true;\n  } //\n\n\n  this.setFramebuffer = function (value) {\n    if (_framebuffer !== value && _currentRenderTarget === null) _gl.bindFramebuffer(36160, value);\n    _framebuffer = value;\n  };\n\n  this.getActiveCubeFace = function () {\n    return _currentActiveCubeFace;\n  };\n\n  this.getActiveMipmapLevel = function () {\n    return _currentActiveMipmapLevel;\n  };\n\n  this.getRenderTarget = function () {\n    return _currentRenderTarget;\n  };\n\n  this.setRenderTarget = function (renderTarget, activeCubeFace, activeMipmapLevel) {\n    _currentRenderTarget = renderTarget;\n    _currentActiveCubeFace = activeCubeFace;\n    _currentActiveMipmapLevel = activeMipmapLevel;\n\n    if (renderTarget && properties.get(renderTarget).__webglFramebuffer === undefined) {\n      textures.setupRenderTarget(renderTarget);\n    }\n\n    var framebuffer = _framebuffer;\n\n    if (renderTarget) {\n      var __webglFramebuffer = properties.get(renderTarget).__webglFramebuffer;\n\n      if (renderTarget.isWebGLMultisampleRenderTarget) {\n        framebuffer = properties.get(renderTarget).__webglMultisampledFramebuffer;\n      } else {\n        framebuffer = __webglFramebuffer;\n      }\n\n      _currentViewport.copy(renderTarget.viewport);\n\n      _currentScissor.copy(renderTarget.scissor);\n\n      _currentScissorTest = renderTarget.scissorTest;\n    } else {\n      _currentViewport.copy(_viewport).multiplyScalar(_pixelRatio).floor();\n\n      _currentScissor.copy(_scissor).multiplyScalar(_pixelRatio).floor();\n\n      _currentScissorTest = _scissorTest;\n    }\n\n    if (_currentFramebuffer !== framebuffer) {\n      _gl.bindFramebuffer(36160, framebuffer);\n\n      _currentFramebuffer = framebuffer;\n    }\n\n    state.viewport(_currentViewport);\n    state.scissor(_currentScissor);\n    state.setScissorTest(_currentScissorTest);\n  };\n\n  this.readRenderTargetPixels = function (renderTarget, x, y, width, height, buffer, activeCubeFaceIndex) {\n    if (!(renderTarget && renderTarget.isWebGLRenderTarget)) {\n      console.error('THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.');\n      return;\n    }\n\n    var framebuffer = properties.get(renderTarget).__webglFramebuffer;\n\n    if (framebuffer) {\n      var restore = false;\n\n      if (framebuffer !== _currentFramebuffer) {\n        _gl.bindFramebuffer(36160, framebuffer);\n\n        restore = true;\n      }\n\n      try {\n        var texture = renderTarget.texture;\n        var textureFormat = texture.format;\n        var textureType = texture.type;\n\n        if (textureFormat !== RGBAFormat && utils.convert(textureFormat) !== _gl.getParameter(35739)) {\n          console.error('THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.');\n          return;\n        }\n\n        if (textureType !== UnsignedByteType && utils.convert(textureType) !== _gl.getParameter(35738) && // IE11, Edge and Chrome Mac < 52 (#9513)\n        !(textureType === FloatType && (capabilities.isWebGL2 || extensions.get('OES_texture_float') || extensions.get('WEBGL_color_buffer_float'))) && // Chrome Mac >= 52 and Firefox\n        !(textureType === HalfFloatType && (capabilities.isWebGL2 ? extensions.get('EXT_color_buffer_float') : extensions.get('EXT_color_buffer_half_float')))) {\n          console.error('THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.');\n          return;\n        } //if ( _gl.checkFramebufferStatus( 36160 ) === 36053 ) {\n\n\n        if (true) {\n          // the following if statement ensures valid read requests (no out-of-bounds pixels, see #8604)\n          if (x >= 0 && x <= renderTarget.width - width && y >= 0 && y <= renderTarget.height - height) {\n            _gl.readPixels(x, y, width, height, utils.convert(textureFormat), utils.convert(textureType), buffer);\n          }\n        } else {\n          console.error('THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.');\n        }\n      } finally {\n        if (restore) {\n          _gl.bindFramebuffer(36160, _currentFramebuffer);\n        }\n      }\n    }\n  };\n\n  this.copyFramebufferToTexture = function (position, texture, level) {\n    if (level === undefined) level = 0;\n    var levelScale = Math.pow(2, -level);\n    var width = Math.floor(texture.image.width * levelScale);\n    var height = Math.floor(texture.image.height * levelScale);\n    var glFormat = utils.convert(texture.format);\n    textures.setTexture2D(texture, 0);\n\n    _gl.copyTexImage2D(3553, level, glFormat, position.x, position.y, width, height, 0);\n\n    state.unbindTexture();\n  };\n\n  this.copyTextureToTexture = function (position, srcTexture, dstTexture, level) {\n    var width = srcTexture.image.width;\n    var height = srcTexture.image.height;\n    var glFormat = utils.convert(dstTexture.format);\n    var glType = utils.convert(dstTexture.type);\n    textures.setTexture2D(dstTexture, 0);\n\n    _gl.pixelStorei(37440, dstTexture.flipY);\n\n    _gl.pixelStorei(37441, dstTexture.premultiplyAlpha);\n\n    _gl.pixelStorei(3317, dstTexture.unpackAlignment);\n\n    if (srcTexture.isDataTexture) {\n      _gl.texSubImage2D(3553, level || 0, position.x, position.y, width, height, glFormat, glType, srcTexture.image.data);\n    } else {\n      _gl.texSubImage2D(3553, level || 0, position.x, position.y, glFormat, glType, srcTexture.image);\n    }\n\n    state.unbindTexture();\n  };\n\n  this.initTexture = function (texture) {\n    textures.setTexture2D(texture, 0);\n    state.unbindTexture();\n  };\n\n  if (typeof __THREE_DEVTOOLS__ !== 'undefined') {\n    __THREE_DEVTOOLS__.dispatchEvent(new CustomEvent('observe', {\n      detail: this\n    })); // eslint-disable-line no-undef\n\n  }\n}\n\nfunction FogExp2() {}\n\nfunction Fog() {}\n/**\n * @author benaadams / https://twitter.com/ben_a_adams\n */\n\n\nfunction InterleavedBuffer(array, stride) {\n  this.array = array;\n  this.stride = stride;\n  this.count = array !== undefined ? array.length / stride : 0;\n  this.usage = StaticDrawUsage;\n  this.updateRange = {\n    offset: 0,\n    count: -1\n  };\n  this.version = 0;\n}\n\nObject.defineProperty(InterleavedBuffer.prototype, 'needsUpdate', {\n  set: function (value) {\n    if (value === true) this.version++;\n  }\n});\nObject.assign(InterleavedBuffer.prototype, {\n  isInterleavedBuffer: true,\n  onUploadCallback: function () {},\n  setUsage: function (value) {\n    this.usage = value;\n    return this;\n  },\n  copy: function (source) {\n    this.array = new source.array.constructor(source.array);\n    this.count = source.count;\n    this.stride = source.stride;\n    this.usage = source.usage;\n    return this;\n  },\n  copyAt: function (index1, attribute, index2) {\n    index1 *= this.stride;\n    index2 *= attribute.stride;\n\n    for (var i = 0, l = this.stride; i < l; i++) {\n      this.array[index1 + i] = attribute.array[index2 + i];\n    }\n\n    return this;\n  },\n  set: function (value, offset) {\n    if (offset === undefined) offset = 0;\n    this.array.set(value, offset);\n    return this;\n  },\n  clone: function () {\n    return new this.constructor().copy(this);\n  },\n  onUpload: function (callback) {\n    this.onUploadCallback = callback;\n    return this;\n  }\n});\n/**\n * @author benaadams / https://twitter.com/ben_a_adams\n */\n\nvar _vector$6 = new Vector3();\n\nfunction InterleavedBufferAttribute(interleavedBuffer, itemSize, offset, normalized) {\n  this.data = interleavedBuffer;\n  this.itemSize = itemSize;\n  this.offset = offset;\n  this.normalized = normalized === true;\n}\n\nObject.defineProperties(InterleavedBufferAttribute.prototype, {\n  count: {\n    get: function () {\n      return this.data.count;\n    }\n  },\n  array: {\n    get: function () {\n      return this.data.array;\n    }\n  }\n});\nObject.assign(InterleavedBufferAttribute.prototype, {\n  isInterleavedBufferAttribute: true,\n  applyMatrix4: function (m) {\n    for (var i = 0, l = this.data.count; i < l; i++) {\n      _vector$6.x = this.getX(i);\n      _vector$6.y = this.getY(i);\n      _vector$6.z = this.getZ(i);\n\n      _vector$6.applyMatrix4(m);\n\n      this.setXYZ(i, _vector$6.x, _vector$6.y, _vector$6.z);\n    }\n\n    return this;\n  },\n  setX: function (index, x) {\n    this.data.array[index * this.data.stride + this.offset] = x;\n    return this;\n  },\n  setY: function (index, y) {\n    this.data.array[index * this.data.stride + this.offset + 1] = y;\n    return this;\n  },\n  setZ: function (index, z) {\n    this.data.array[index * this.data.stride + this.offset + 2] = z;\n    return this;\n  },\n  setW: function (index, w) {\n    this.data.array[index * this.data.stride + this.offset + 3] = w;\n    return this;\n  },\n  getX: function (index) {\n    return this.data.array[index * this.data.stride + this.offset];\n  },\n  getY: function (index) {\n    return this.data.array[index * this.data.stride + this.offset + 1];\n  },\n  getZ: function (index) {\n    return this.data.array[index * this.data.stride + this.offset + 2];\n  },\n  getW: function (index) {\n    return this.data.array[index * this.data.stride + this.offset + 3];\n  },\n  setXY: function (index, x, y) {\n    index = index * this.data.stride + this.offset;\n    this.data.array[index + 0] = x;\n    this.data.array[index + 1] = y;\n    return this;\n  },\n  setXYZ: function (index, x, y, z) {\n    index = index * this.data.stride + this.offset;\n    this.data.array[index + 0] = x;\n    this.data.array[index + 1] = y;\n    this.data.array[index + 2] = z;\n    return this;\n  },\n  setXYZW: function (index, x, y, z, w) {\n    index = index * this.data.stride + this.offset;\n    this.data.array[index + 0] = x;\n    this.data.array[index + 1] = y;\n    this.data.array[index + 2] = z;\n    this.data.array[index + 3] = w;\n    return this;\n  }\n});\n\nfunction SpriteMaterial() {}\n\nvar _viewWorldMatrix = new Matrix4();\n\nfunction Sprite() {}\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n */\n\n\nvar _v1$4 = new Vector3();\n\nvar _v2$2 = new Vector3();\n\nfunction LOD() {\n  Object3D.call(this);\n  this._currentLevel = 0;\n  this.type = 'LOD';\n  Object.defineProperties(this, {\n    levels: {\n      enumerable: true,\n      value: []\n    }\n  });\n  this.autoUpdate = true;\n}\n\nLOD.prototype = Object.assign(Object.create(Object3D.prototype), {\n  constructor: LOD,\n  isLOD: true,\n  copy: function (source) {\n    Object3D.prototype.copy.call(this, source, false);\n    var levels = source.levels;\n\n    for (var i = 0, l = levels.length; i < l; i++) {\n      var level = levels[i];\n      this.addLevel(level.object.clone(), level.distance);\n    }\n\n    this.autoUpdate = source.autoUpdate;\n    return this;\n  },\n  addLevel: function (object, distance) {\n    if (distance === undefined) distance = 0;\n    distance = Math.abs(distance);\n    var levels = this.levels;\n\n    for (var l = 0; l < levels.length; l++) {\n      if (distance < levels[l].distance) {\n        break;\n      }\n    }\n\n    levels.splice(l, 0, {\n      distance: distance,\n      object: object\n    });\n    this.add(object);\n    return this;\n  },\n  getCurrentLevel: function () {\n    return this._currentLevel;\n  },\n  getObjectForDistance: function (distance) {\n    var levels = this.levels;\n\n    if (levels.length > 0) {\n      for (var i = 1, l = levels.length; i < l; i++) {\n        if (distance < levels[i].distance) {\n          break;\n        }\n      }\n\n      return levels[i - 1].object;\n    }\n\n    return null;\n  },\n  raycast: function (raycaster, intersects) {\n    var levels = this.levels;\n\n    if (levels.length > 0) {\n      _v1$4.setFromMatrixPosition(this.matrixWorld);\n\n      var distance = raycaster.ray.origin.distanceTo(_v1$4);\n      this.getObjectForDistance(distance).raycast(raycaster, intersects);\n    }\n  },\n  update: function (camera) {\n    var levels = this.levels;\n\n    if (levels.length > 1) {\n      _v1$4.setFromMatrixPosition(camera.matrixWorld);\n\n      _v2$2.setFromMatrixPosition(this.matrixWorld);\n\n      var distance = _v1$4.distanceTo(_v2$2) / camera.zoom;\n      levels[0].object.visible = true;\n\n      for (var i = 1, l = levels.length; i < l; i++) {\n        if (distance >= levels[i].distance) {\n          levels[i - 1].object.visible = false;\n          levels[i].object.visible = true;\n        } else {\n          break;\n        }\n      }\n\n      this._currentLevel = i - 1;\n\n      for (; i < l; i++) {\n        levels[i].object.visible = false;\n      }\n    }\n  },\n  toJSON: function (meta) {\n    var data = Object3D.prototype.toJSON.call(this, meta);\n    if (this.autoUpdate === false) data.object.autoUpdate = false;\n    data.object.levels = [];\n    var levels = this.levels;\n\n    for (var i = 0, l = levels.length; i < l; i++) {\n      var level = levels[i];\n      data.object.levels.push({\n        object: level.object.uuid,\n        distance: level.distance\n      });\n    }\n\n    return data;\n  }\n});\n\nfunction SkinnedMesh() {}\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n * @author michael guerrero / http://realitymeltdown.com\n * @author ikerr / http://verold.com\n */\n\n\nvar _offsetMatrix = new Matrix4();\n\nvar _identityMatrix = new Matrix4();\n\nfunction Skeleton() {}\n\nfunction Bone() {}\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\n\nvar _instanceLocalMatrix = new Matrix4();\n\nvar _instanceWorldMatrix = new Matrix4();\n\nvar _mesh = new Mesh();\n\nfunction InstancedMesh() {}\n\nfunction LineBasicMaterial() {}\n\nvar _inverseMatrix$1 = new Matrix4();\n\nfunction Line() {}\n\nfunction LineSegments() {}\n\nfunction LineLoop() {}\n\nfunction PointsMaterial() {}\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\n\nvar _inverseMatrix$2 = new Matrix4();\n\nfunction Points() {}\n\nfunction VideoTexture() {}\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\n\nfunction CompressedTexture(mipmaps, width, height, format, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy, encoding) {\n  Texture.call(this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding);\n  this.image = {\n    width: width,\n    height: height\n  };\n  this.mipmaps = mipmaps; // no flipping for cube textures\n  // (also flipping doesn't work for compressed textures )\n\n  this.flipY = false; // can't generate mipmaps for compressed textures\n  // mips must be embedded in DDS files\n\n  this.generateMipmaps = false;\n}\n\nCompressedTexture.prototype = Object.create(Texture.prototype);\nCompressedTexture.prototype.constructor = CompressedTexture;\nCompressedTexture.prototype.isCompressedTexture = true;\n\nfunction CanvasTexture() {}\n/**\n * @author Matt DesLauriers / @mattdesl\n * @author atix / arthursilber.de\n */\n\n\nfunction DepthTexture(width, height, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy, format) {\n  format = format !== undefined ? format : DepthFormat;\n\n  if (format !== DepthFormat && format !== DepthStencilFormat) {\n    throw new Error('DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat');\n  }\n\n  if (type === undefined && format === DepthFormat) type = UnsignedShortType;\n  if (type === undefined && format === DepthStencilFormat) type = UnsignedInt248Type;\n  Texture.call(this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy);\n  this.image = {\n    width: width,\n    height: height\n  };\n  this.magFilter = magFilter !== undefined ? magFilter : NearestFilter;\n  this.minFilter = minFilter !== undefined ? minFilter : NearestFilter;\n  this.flipY = false;\n  this.generateMipmaps = false;\n}\n\nDepthTexture.prototype = Object.create(Texture.prototype);\nDepthTexture.prototype.constructor = DepthTexture;\nDepthTexture.prototype.isDepthTexture = true;\n\nfunction WireframeGeometry() {}\n\nfunction ParametricGeometry() {}\n\nfunction ParametricBufferGeometry() {}\n\nfunction PolyhedronGeometry() {}\n\nfunction PolyhedronBufferGeometry() {}\n\nfunction TetrahedronGeometry() {}\n\nfunction TetrahedronBufferGeometry() {}\n\nfunction OctahedronGeometry() {}\n\nfunction OctahedronBufferGeometry() {}\n\nfunction IcosahedronGeometry() {}\n\nfunction IcosahedronBufferGeometry() {}\n\nfunction DodecahedronGeometry() {}\n\nfunction DodecahedronBufferGeometry() {}\n\nfunction TubeGeometry() {}\n\nfunction TubeBufferGeometry() {}\n\nfunction TorusKnotGeometry() {}\n\nfunction TorusKnotBufferGeometry() {}\n\nfunction TorusGeometry() {}\n\nfunction TorusBufferGeometry() {}\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n */\n\n\nvar ShapeUtils = {\n  // calculate area of the contour polygon\n  area: function (contour) {\n    var n = contour.length;\n    var a = 0.0;\n\n    for (var p = n - 1, q = 0; q < n; p = q++) {\n      a += contour[p].x * contour[q].y - contour[q].x * contour[p].y;\n    }\n\n    return a * 0.5;\n  },\n  isClockWise: function (pts) {\n    return ShapeUtils.area(pts) < 0;\n  },\n  triangulateShape: \"\"\n};\n\nfunction ExtrudeGeometry() {}\n\nfunction ExtrudeBufferGeometry() {}\n\nfunction TextGeometry() {}\n\nfunction TextBufferGeometry() {}\n\nfunction SphereGeometry() {} // SphereBufferGeometry\n\n\nfunction SphereBufferGeometry(radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength) {\n  BufferGeometry.call(this);\n  this.type = 'SphereBufferGeometry';\n  this.parameters = {\n    radius: radius,\n    widthSegments: widthSegments,\n    heightSegments: heightSegments,\n    phiStart: phiStart,\n    phiLength: phiLength,\n    thetaStart: thetaStart,\n    thetaLength: thetaLength\n  };\n  radius = radius || 1;\n  widthSegments = Math.max(3, Math.floor(widthSegments) || 8);\n  heightSegments = Math.max(2, Math.floor(heightSegments) || 6);\n  phiStart = phiStart !== undefined ? phiStart : 0;\n  phiLength = phiLength !== undefined ? phiLength : Math.PI * 2;\n  thetaStart = thetaStart !== undefined ? thetaStart : 0;\n  thetaLength = thetaLength !== undefined ? thetaLength : Math.PI;\n  var thetaEnd = Math.min(thetaStart + thetaLength, Math.PI);\n  var ix, iy;\n  var index = 0;\n  var grid = [];\n  var vertex = new Vector3();\n  var normal = new Vector3(); // buffers\n\n  var indices = [];\n  var vertices = [];\n  var normals = [];\n  var uvs = []; // generate vertices, normals and uvs\n\n  for (iy = 0; iy <= heightSegments; iy++) {\n    var verticesRow = [];\n    var v = iy / heightSegments; // special case for the poles\n\n    var uOffset = 0;\n\n    if (iy == 0 && thetaStart == 0) {\n      uOffset = 0.5 / widthSegments;\n    } else if (iy == heightSegments && thetaEnd == Math.PI) {\n      uOffset = -0.5 / widthSegments;\n    }\n\n    for (ix = 0; ix <= widthSegments; ix++) {\n      var u = ix / widthSegments; // vertex\n\n      vertex.x = -radius * Math.cos(phiStart + u * phiLength) * Math.sin(thetaStart + v * thetaLength);\n      vertex.y = radius * Math.cos(thetaStart + v * thetaLength);\n      vertex.z = radius * Math.sin(phiStart + u * phiLength) * Math.sin(thetaStart + v * thetaLength);\n      vertices.push(vertex.x, vertex.y, vertex.z); // normal\n\n      normal.copy(vertex).normalize();\n      normals.push(normal.x, normal.y, normal.z); // uv\n\n      uvs.push(u + uOffset, 1 - v);\n      verticesRow.push(index++);\n    }\n\n    grid.push(verticesRow);\n  } // indices\n\n\n  for (iy = 0; iy < heightSegments; iy++) {\n    for (ix = 0; ix < widthSegments; ix++) {\n      var a = grid[iy][ix + 1];\n      var b = grid[iy][ix];\n      var c = grid[iy + 1][ix];\n      var d = grid[iy + 1][ix + 1];\n      if (iy !== 0 || thetaStart > 0) indices.push(a, b, d);\n      if (iy !== heightSegments - 1 || thetaEnd < Math.PI) indices.push(b, c, d);\n    }\n  } // build geometry\n\n\n  this.setIndex(indices);\n  this.setAttribute('position', new Float32BufferAttribute(vertices, 3));\n  this.setAttribute('normal', new Float32BufferAttribute(normals, 3));\n  this.setAttribute('uv', new Float32BufferAttribute(uvs, 2));\n}\n\nSphereBufferGeometry.prototype = Object.create(BufferGeometry.prototype);\nSphereBufferGeometry.prototype.constructor = SphereBufferGeometry;\n\nfunction RingGeometry() {}\n\nfunction RingBufferGeometry() {}\n\nfunction LatheGeometry() {}\n\nfunction LatheBufferGeometry() {}\n\nfunction ShapeGeometry() {}\n\nfunction ShapeBufferGeometry() {}\n\nfunction EdgesGeometry() {}\n\nfunction CylinderGeometry() {}\n\nfunction CylinderBufferGeometry() {}\n\nfunction ConeGeometry() {}\n\nfunction ConeBufferGeometry() {}\n\nfunction CircleGeometry() {}\n\nfunction CircleBufferGeometry() {}\n\nfunction ShadowMaterial() {}\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\n\nfunction RawShaderMaterial(parameters) {\n  ShaderMaterial.call(this, parameters);\n  this.type = 'RawShaderMaterial';\n}\n\nRawShaderMaterial.prototype = Object.create(ShaderMaterial.prototype);\nRawShaderMaterial.prototype.constructor = RawShaderMaterial;\nRawShaderMaterial.prototype.isRawShaderMaterial = true;\n\nfunction MeshStandardMaterial() {}\n\nfunction MeshPhysicalMaterial() {}\n\nfunction MeshPhongMaterial() {}\n\nfunction MeshToonMaterial() {}\n\nfunction MeshNormalMaterial() {}\n\nfunction MeshLambertMaterial() {}\n/**\n * @author WestLangley / http://github.com/WestLangley\n *\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *\n *  matcap: new THREE.Texture( <Image> ),\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  bumpMap: new THREE.Texture( <Image> ),\n *  bumpScale: <float>,\n *\n *  normalMap: new THREE.Texture( <Image> ),\n *  normalMapType: THREE.TangentSpaceNormalMap,\n *  normalScale: <Vector2>,\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>,\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\n\n\nfunction MeshMatcapMaterial(parameters) {\n  Material.call(this);\n  this.defines = {\n    'MATCAP': ''\n  };\n  this.type = 'MeshMatcapMaterial';\n  this.color = new Color(0xffffff); // diffuse\n\n  this.matcap = null;\n  this.map = null;\n  this.bumpMap = null;\n  this.bumpScale = 1;\n  this.normalMap = null;\n  this.normalMapType = TangentSpaceNormalMap;\n  this.normalScale = new Vector2(1, 1);\n  this.displacementMap = null;\n  this.displacementScale = 1;\n  this.displacementBias = 0;\n  this.alphaMap = null;\n  this.skinning = false;\n  this.morphTargets = false;\n  this.morphNormals = false;\n  this.setValues(parameters);\n}\n\nMeshMatcapMaterial.prototype = Object.create(Material.prototype);\nMeshMatcapMaterial.prototype.constructor = MeshMatcapMaterial;\nMeshMatcapMaterial.prototype.isMeshMatcapMaterial = true;\n\nMeshMatcapMaterial.prototype.copy = function (source) {\n  Material.prototype.copy.call(this, source);\n  this.defines = {\n    'MATCAP': ''\n  };\n  this.color.copy(source.color);\n  this.matcap = source.matcap;\n  this.map = source.map;\n  this.bumpMap = source.bumpMap;\n  this.bumpScale = source.bumpScale;\n  this.normalMap = source.normalMap;\n  this.normalMapType = source.normalMapType;\n  this.normalScale.copy(source.normalScale);\n  this.displacementMap = source.displacementMap;\n  this.displacementScale = source.displacementScale;\n  this.displacementBias = source.displacementBias;\n  this.alphaMap = source.alphaMap;\n  this.skinning = source.skinning;\n  this.morphTargets = source.morphTargets;\n  this.morphNormals = source.morphNormals;\n  return this;\n};\n\nfunction LineDashedMaterial() {}\n/**\n * @author tschw\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n */\n\n\nvar AnimationUtils = {\n  // same as Array.prototype.slice, but also works on typed arrays\n  arraySlice: function (array, from, to) {\n    if (AnimationUtils.isTypedArray(array)) {\n      // in ios9 array.subarray(from, undefined) will return empty array\n      // but array.subarray(from) or array.subarray(from, len) is correct\n      return new array.constructor(array.subarray(from, to !== undefined ? to : array.length));\n    }\n\n    return array.slice(from, to);\n  },\n  // converts an array to a specific type\n  convertArray: function (array, type, forceClone) {\n    if (!array || // let 'undefined' and 'null' pass\n    !forceClone && array.constructor === type) return array;\n\n    if (typeof type.BYTES_PER_ELEMENT === 'number') {\n      return new type(array); // create typed array\n    }\n\n    return Array.prototype.slice.call(array); // create Array\n  },\n  isTypedArray: function (object) {\n    return ArrayBuffer.isView(object) && !(object instanceof DataView);\n  },\n  // returns an array by which times and values can be sorted\n  getKeyframeOrder: function (times) {\n    function compareTime(i, j) {\n      return times[i] - times[j];\n    }\n\n    var n = times.length;\n    var result = new Array(n);\n\n    for (var i = 0; i !== n; ++i) result[i] = i;\n\n    result.sort(compareTime);\n    return result;\n  },\n  // uses the array previously returned by 'getKeyframeOrder' to sort data\n  sortedArray: function (values, stride, order) {\n    var nValues = values.length;\n    var result = new values.constructor(nValues);\n\n    for (var i = 0, dstOffset = 0; dstOffset !== nValues; ++i) {\n      var srcOffset = order[i] * stride;\n\n      for (var j = 0; j !== stride; ++j) {\n        result[dstOffset++] = values[srcOffset + j];\n      }\n    }\n\n    return result;\n  },\n  // function for parsing AOS keyframe formats\n  flattenJSON: function (jsonKeys, times, values, valuePropertyName) {\n    var i = 1,\n        key = jsonKeys[0];\n\n    while (key !== undefined && key[valuePropertyName] === undefined) {\n      key = jsonKeys[i++];\n    }\n\n    if (key === undefined) return; // no data\n\n    var value = key[valuePropertyName];\n    if (value === undefined) return; // no data\n\n    if (Array.isArray(value)) {\n      do {\n        value = key[valuePropertyName];\n\n        if (value !== undefined) {\n          times.push(key.time);\n          values.push.apply(values, value); // push all elements\n        }\n\n        key = jsonKeys[i++];\n      } while (key !== undefined);\n    } else if (value.toArray !== undefined) {\n      // ...assume THREE.Math-ish\n      do {\n        value = key[valuePropertyName];\n\n        if (value !== undefined) {\n          times.push(key.time);\n          value.toArray(values, values.length);\n        }\n\n        key = jsonKeys[i++];\n      } while (key !== undefined);\n    } else {\n      // otherwise push as-is\n      do {\n        value = key[valuePropertyName];\n\n        if (value !== undefined) {\n          times.push(key.time);\n          values.push(value);\n        }\n\n        key = jsonKeys[i++];\n      } while (key !== undefined);\n    }\n  },\n  subclip: function (sourceClip, name, startFrame, endFrame, fps) {\n    fps = fps || 30;\n    var clip = sourceClip.clone();\n    clip.name = name;\n    var tracks = [];\n\n    for (var i = 0; i < clip.tracks.length; ++i) {\n      var track = clip.tracks[i];\n      var valueSize = track.getValueSize();\n      var times = [];\n      var values = [];\n\n      for (var j = 0; j < track.times.length; ++j) {\n        var frame = track.times[j] * fps;\n        if (frame < startFrame || frame >= endFrame) continue;\n        times.push(track.times[j]);\n\n        for (var k = 0; k < valueSize; ++k) {\n          values.push(track.values[j * valueSize + k]);\n        }\n      }\n\n      if (times.length === 0) continue;\n      track.times = AnimationUtils.convertArray(times, track.times.constructor);\n      track.values = AnimationUtils.convertArray(values, track.values.constructor);\n      tracks.push(track);\n    }\n\n    clip.tracks = tracks; // find minimum .times value across all tracks in the trimmed clip\n\n    var minStartTime = Infinity;\n\n    for (var i = 0; i < clip.tracks.length; ++i) {\n      if (minStartTime > clip.tracks[i].times[0]) {\n        minStartTime = clip.tracks[i].times[0];\n      }\n    } // shift all tracks such that clip begins at t=0\n\n\n    for (var i = 0; i < clip.tracks.length; ++i) {\n      clip.tracks[i].shift(-1 * minStartTime);\n    }\n\n    clip.resetDuration();\n    return clip;\n  }\n};\n/**\n * Abstract base class of interpolants over parametric samples.\n *\n * The parameter domain is one dimensional, typically the time or a path\n * along a curve defined by the data.\n *\n * The sample values can have any dimensionality and derived classes may\n * apply special interpretations to the data.\n *\n * This class provides the interval seek in a Template Method, deferring\n * the actual interpolation to derived classes.\n *\n * Time complexity is O(1) for linear access crossing at most two points\n * and O(log N) for random access, where N is the number of positions.\n *\n * References:\n *\n * \t\thttp://www.oodesign.com/template-method-pattern.html\n *\n * @author tschw\n */\n\nfunction Interpolant(parameterPositions, sampleValues, sampleSize, resultBuffer) {\n  this.parameterPositions = parameterPositions;\n  this._cachedIndex = 0;\n  this.resultBuffer = resultBuffer !== undefined ? resultBuffer : new sampleValues.constructor(sampleSize);\n  this.sampleValues = sampleValues;\n  this.valueSize = sampleSize;\n}\n\nObject.assign(Interpolant.prototype, {\n  evaluate: function (t) {\n    var pp = this.parameterPositions,\n        i1 = this._cachedIndex,\n        t1 = pp[i1],\n        t0 = pp[i1 - 1];\n\n    validate_interval: {\n      seek: {\n        var right;\n\n        linear_scan: {\n          //- See http://jsperf.com/comparison-to-undefined/3\n          //- slower code:\n          //-\n          //- \t\t\t\tif ( t >= t1 || t1 === undefined ) {\n          forward_scan: if (!(t < t1)) {\n            for (var giveUpAt = i1 + 2;;) {\n              if (t1 === undefined) {\n                if (t < t0) break forward_scan; // after end\n\n                i1 = pp.length;\n                this._cachedIndex = i1;\n                return this.afterEnd_(i1 - 1, t, t0);\n              }\n\n              if (i1 === giveUpAt) break; // this loop\n\n              t0 = t1;\n              t1 = pp[++i1];\n\n              if (t < t1) {\n                // we have arrived at the sought interval\n                break seek;\n              }\n            } // prepare binary search on the right side of the index\n\n\n            right = pp.length;\n            break linear_scan;\n          } //- slower code:\n          //-\t\t\t\t\tif ( t < t0 || t0 === undefined ) {\n\n\n          if (!(t >= t0)) {\n            // looping?\n            var t1global = pp[1];\n\n            if (t < t1global) {\n              i1 = 2; // + 1, using the scan for the details\n\n              t0 = t1global;\n            } // linear reverse scan\n\n\n            for (var giveUpAt = i1 - 2;;) {\n              if (t0 === undefined) {\n                // before start\n                this._cachedIndex = 0;\n                return this.beforeStart_(0, t, t1);\n              }\n\n              if (i1 === giveUpAt) break; // this loop\n\n              t1 = t0;\n              t0 = pp[--i1 - 1];\n\n              if (t >= t0) {\n                // we have arrived at the sought interval\n                break seek;\n              }\n            } // prepare binary search on the left side of the index\n\n\n            right = i1;\n            i1 = 0;\n            break linear_scan;\n          } // the interval is valid\n\n\n          break validate_interval;\n        } // linear scan\n        // binary search\n\n\n        while (i1 < right) {\n          var mid = i1 + right >>> 1;\n\n          if (t < pp[mid]) {\n            right = mid;\n          } else {\n            i1 = mid + 1;\n          }\n        }\n\n        t1 = pp[i1];\n        t0 = pp[i1 - 1]; // check boundary cases, again\n\n        if (t0 === undefined) {\n          this._cachedIndex = 0;\n          return this.beforeStart_(0, t, t1);\n        }\n\n        if (t1 === undefined) {\n          i1 = pp.length;\n          this._cachedIndex = i1;\n          return this.afterEnd_(i1 - 1, t0, t);\n        }\n      } // seek\n\n\n      this._cachedIndex = i1;\n      this.intervalChanged_(i1, t0, t1);\n    } // validate_interval\n\n\n    return this.interpolate_(i1, t0, t, t1);\n  },\n  settings: null,\n  // optional, subclass-specific settings structure\n  // Note: The indirection allows central control of many interpolants.\n  // --- Protected interface\n  DefaultSettings_: {},\n  getSettings_: function () {\n    return this.settings || this.DefaultSettings_;\n  },\n  copySampleValue_: function (index) {\n    // copies a sample value to the result buffer\n    var result = this.resultBuffer,\n        values = this.sampleValues,\n        stride = this.valueSize,\n        offset = index * stride;\n\n    for (var i = 0; i !== stride; ++i) {\n      result[i] = values[offset + i];\n    }\n\n    return result;\n  },\n  // Template methods for derived classes:\n  interpolate_: function ()\n  /* i1, t0, t, t1 */\n  {\n    throw new Error('call to abstract method'); // implementations shall return this.resultBuffer\n  },\n  intervalChanged_: function ()\n  /* i1, t0, t1 */\n  {// empty\n  }\n}); //!\\ DECLARE ALIAS AFTER assign prototype !\n\nObject.assign(Interpolant.prototype, {\n  //( 0, t, t0 ), returns this.resultBuffer\n  beforeStart_: Interpolant.prototype.copySampleValue_,\n  //( N-1, tN-1, t ), returns this.resultBuffer\n  afterEnd_: Interpolant.prototype.copySampleValue_\n});\n/**\n * Fast and simple cubic spline interpolant.\n *\n * It was derived from a Hermitian construction setting the first derivative\n * at each sample position to the linear slope between neighboring positions\n * over their parameter interval.\n *\n * @author tschw\n */\n\nfunction CubicInterpolant(parameterPositions, sampleValues, sampleSize, resultBuffer) {\n  Interpolant.call(this, parameterPositions, sampleValues, sampleSize, resultBuffer);\n  this._weightPrev = -0;\n  this._offsetPrev = -0;\n  this._weightNext = -0;\n  this._offsetNext = -0;\n}\n\nCubicInterpolant.prototype = Object.assign(Object.create(Interpolant.prototype), {\n  constructor: CubicInterpolant,\n  DefaultSettings_: {\n    endingStart: ZeroCurvatureEnding,\n    endingEnd: ZeroCurvatureEnding\n  },\n  intervalChanged_: function (i1, t0, t1) {\n    var pp = this.parameterPositions,\n        iPrev = i1 - 2,\n        iNext = i1 + 1,\n        tPrev = pp[iPrev],\n        tNext = pp[iNext];\n\n    if (tPrev === undefined) {\n      switch (this.getSettings_().endingStart) {\n        case ZeroSlopeEnding:\n          // f'(t0) = 0\n          iPrev = i1;\n          tPrev = 2 * t0 - t1;\n          break;\n\n        case WrapAroundEnding:\n          // use the other end of the curve\n          iPrev = pp.length - 2;\n          tPrev = t0 + pp[iPrev] - pp[iPrev + 1];\n          break;\n\n        default:\n          // ZeroCurvatureEnding\n          // f''(t0) = 0 a.k.a. Natural Spline\n          iPrev = i1;\n          tPrev = t1;\n      }\n    }\n\n    if (tNext === undefined) {\n      switch (this.getSettings_().endingEnd) {\n        case ZeroSlopeEnding:\n          // f'(tN) = 0\n          iNext = i1;\n          tNext = 2 * t1 - t0;\n          break;\n\n        case WrapAroundEnding:\n          // use the other end of the curve\n          iNext = 1;\n          tNext = t1 + pp[1] - pp[0];\n          break;\n\n        default:\n          // ZeroCurvatureEnding\n          // f''(tN) = 0, a.k.a. Natural Spline\n          iNext = i1 - 1;\n          tNext = t0;\n      }\n    }\n\n    var halfDt = (t1 - t0) * 0.5,\n        stride = this.valueSize;\n    this._weightPrev = halfDt / (t0 - tPrev);\n    this._weightNext = halfDt / (tNext - t1);\n    this._offsetPrev = iPrev * stride;\n    this._offsetNext = iNext * stride;\n  },\n  interpolate_: function (i1, t0, t, t1) {\n    var result = this.resultBuffer,\n        values = this.sampleValues,\n        stride = this.valueSize,\n        o1 = i1 * stride,\n        o0 = o1 - stride,\n        oP = this._offsetPrev,\n        oN = this._offsetNext,\n        wP = this._weightPrev,\n        wN = this._weightNext,\n        p = (t - t0) / (t1 - t0),\n        pp = p * p,\n        ppp = pp * p; // evaluate polynomials\n\n    var sP = -wP * ppp + 2 * wP * pp - wP * p;\n    var s0 = (1 + wP) * ppp + (-1.5 - 2 * wP) * pp + (-0.5 + wP) * p + 1;\n    var s1 = (-1 - wN) * ppp + (1.5 + wN) * pp + 0.5 * p;\n    var sN = wN * ppp - wN * pp; // combine data linearly\n\n    for (var i = 0; i !== stride; ++i) {\n      result[i] = sP * values[oP + i] + s0 * values[o0 + i] + s1 * values[o1 + i] + sN * values[oN + i];\n    }\n\n    return result;\n  }\n});\n/**\n * @author tschw\n */\n\nfunction LinearInterpolant(parameterPositions, sampleValues, sampleSize, resultBuffer) {\n  Interpolant.call(this, parameterPositions, sampleValues, sampleSize, resultBuffer);\n}\n\nLinearInterpolant.prototype = Object.assign(Object.create(Interpolant.prototype), {\n  constructor: LinearInterpolant,\n  interpolate_: function (i1, t0, t, t1) {\n    var result = this.resultBuffer,\n        values = this.sampleValues,\n        stride = this.valueSize,\n        offset1 = i1 * stride,\n        offset0 = offset1 - stride,\n        weight1 = (t - t0) / (t1 - t0),\n        weight0 = 1 - weight1;\n\n    for (var i = 0; i !== stride; ++i) {\n      result[i] = values[offset0 + i] * weight0 + values[offset1 + i] * weight1;\n    }\n\n    return result;\n  }\n});\n/**\n *\n * Interpolant that evaluates to the sample value at the position preceeding\n * the parameter.\n *\n * @author tschw\n */\n\nfunction DiscreteInterpolant(parameterPositions, sampleValues, sampleSize, resultBuffer) {\n  Interpolant.call(this, parameterPositions, sampleValues, sampleSize, resultBuffer);\n}\n\nDiscreteInterpolant.prototype = Object.assign(Object.create(Interpolant.prototype), {\n  constructor: DiscreteInterpolant,\n  interpolate_: function (i1\n  /*, t0, t, t1 */\n  ) {\n    return this.copySampleValue_(i1 - 1);\n  }\n});\n\nfunction KeyframeTrack() {}\n\nfunction BooleanKeyframeTrack() {}\n\nfunction ColorKeyframeTrack() {}\n\nfunction NumberKeyframeTrack() {}\n\nfunction QuaternionLinearInterpolant() {}\n\nfunction QuaternionKeyframeTrack() {}\n\nfunction StringKeyframeTrack() {}\n\nfunction VectorKeyframeTrack() {}\n\nfunction AnimationClip() {}\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\n\nvar Cache = {\n  enabled: false,\n  files: {},\n  add: function (key, file) {\n    if (this.enabled === false) return; // console.log( 'THREE.Cache', 'Adding key:', key );\n\n    this.files[key] = file;\n  },\n  get: function (key) {\n    if (this.enabled === false) return; // console.log( 'THREE.Cache', 'Checking key:', key );\n\n    return this.files[key];\n  },\n  remove: function (key) {\n    delete this.files[key];\n  },\n  clear: function () {\n    this.files = {};\n  }\n};\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction LoadingManager(onLoad, onProgress, onError) {\n  var scope = this;\n  var isLoading = false;\n  var itemsLoaded = 0;\n  var itemsTotal = 0;\n  var urlModifier = undefined;\n  var handlers = []; // Refer to #5689 for the reason why we don't set .onStart\n  // in the constructor\n\n  this.onStart = undefined;\n  this.onLoad = onLoad;\n  this.onProgress = onProgress;\n  this.onError = onError;\n\n  this.itemStart = function (url) {\n    itemsTotal++;\n\n    if (isLoading === false) {\n      if (scope.onStart !== undefined) {\n        scope.onStart(url, itemsLoaded, itemsTotal);\n      }\n    }\n\n    isLoading = true;\n  };\n\n  this.itemEnd = function (url) {\n    itemsLoaded++;\n\n    if (scope.onProgress !== undefined) {\n      scope.onProgress(url, itemsLoaded, itemsTotal);\n    }\n\n    if (itemsLoaded === itemsTotal) {\n      isLoading = false;\n\n      if (scope.onLoad !== undefined) {\n        scope.onLoad();\n      }\n    }\n  };\n\n  this.itemError = function (url) {\n    if (scope.onError !== undefined) {\n      scope.onError(url);\n    }\n  };\n\n  this.resolveURL = function (url) {\n    if (urlModifier) {\n      return urlModifier(url);\n    }\n\n    return url;\n  };\n\n  this.setURLModifier = function (transform) {\n    urlModifier = transform;\n    return this;\n  };\n\n  this.addHandler = function (regex, loader) {\n    handlers.push(regex, loader);\n    return this;\n  };\n\n  this.removeHandler = function (regex) {\n    var index = handlers.indexOf(regex);\n\n    if (index !== -1) {\n      handlers.splice(index, 2);\n    }\n\n    return this;\n  };\n\n  this.getHandler = function (file) {\n    for (var i = 0, l = handlers.length; i < l; i += 2) {\n      var regex = handlers[i];\n      var loader = handlers[i + 1];\n      if (regex.global) regex.lastIndex = 0; // see #17920\n\n      if (regex.test(file)) {\n        return loader;\n      }\n    }\n\n    return null;\n  };\n}\n\nvar DefaultLoadingManager = new LoadingManager();\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction Loader(manager) {\n  this.manager = manager !== undefined ? manager : DefaultLoadingManager;\n  this.crossOrigin = 'anonymous';\n  this.path = '';\n  this.resourcePath = '';\n}\n\nObject.assign(Loader.prototype, {\n  load: function ()\n  /* url, onLoad, onProgress, onError */\n  {},\n  parse: function ()\n  /* data */\n  {},\n  setCrossOrigin: function (crossOrigin) {\n    this.crossOrigin = crossOrigin;\n    return this;\n  },\n  setPath: function (path) {\n    this.path = path;\n    return this;\n  },\n  setResourcePath: function (resourcePath) {\n    this.resourcePath = resourcePath;\n    return this;\n  }\n});\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nvar loading = {};\n\nfunction FileLoader(manager) {\n  Loader.call(this, manager);\n}\n\nFileLoader.prototype = Object.assign(Object.create(Loader.prototype), {\n  constructor: FileLoader,\n  load: function (url, onLoad, onProgress, onError) {\n    if (url === undefined) url = '';\n    if (this.path !== undefined) url = this.path + url;\n    url = this.manager.resolveURL(url);\n    var scope = this;\n    var cached = Cache.get(url);\n\n    if (cached !== undefined) {\n      scope.manager.itemStart(url);\n      setTimeout(function () {\n        if (onLoad) onLoad(cached);\n        scope.manager.itemEnd(url);\n      }, 0);\n      return cached;\n    } // Check if request is duplicate\n\n\n    if (loading[url] !== undefined) {\n      loading[url].push({\n        onLoad: onLoad,\n        onProgress: onProgress,\n        onError: onError\n      });\n      return;\n    } // Check for data: URI\n\n\n    var dataUriRegex = /^data:(.*?)(;base64)?,(.*)$/;\n    var dataUriRegexResult = url.match(dataUriRegex); // Safari can not handle Data URIs through XMLHttpRequest so process manually\n\n    if (dataUriRegexResult) {\n      var mimeType = dataUriRegexResult[1];\n      var isBase64 = !!dataUriRegexResult[2];\n      var data = dataUriRegexResult[3];\n      data = decodeURIComponent(data);\n      if (isBase64) data = atob(data);\n\n      try {\n        var response;\n        var responseType = (this.responseType || '').toLowerCase();\n\n        switch (responseType) {\n          case 'arraybuffer':\n          case 'blob':\n            var view = new Uint8Array(data.length);\n\n            for (var i = 0; i < data.length; i++) {\n              view[i] = data.charCodeAt(i);\n            }\n\n            if (responseType === 'blob') {\n              response = new Blob([view.buffer], {\n                type: mimeType\n              });\n            } else {\n              response = view.buffer;\n            }\n\n            break;\n\n          case 'document':\n            var parser = new DOMParser();\n            response = parser.parseFromString(data, mimeType);\n            break;\n\n          case 'json':\n            response = JSON.parse(data);\n            break;\n\n          default:\n            // 'text' or other\n            response = data;\n            break;\n        } // Wait for next browser tick like standard XMLHttpRequest event dispatching does\n\n\n        setTimeout(function () {\n          if (onLoad) onLoad(response);\n          scope.manager.itemEnd(url);\n        }, 0);\n      } catch (error) {\n        // Wait for next browser tick like standard XMLHttpRequest event dispatching does\n        setTimeout(function () {\n          if (onError) onError(error);\n          scope.manager.itemError(url);\n          scope.manager.itemEnd(url);\n        }, 0);\n      }\n    } else {\n      // Initialise array for duplicate requests\n      loading[url] = [];\n      loading[url].push({\n        onLoad: onLoad,\n        onProgress: onProgress,\n        onError: onError\n      });\n      var request = new XMLHttpRequest();\n      request.open('GET', url, true);\n      request.addEventListener('load', function (event) {\n        var response = this.response;\n        var callbacks = loading[url];\n        delete loading[url];\n\n        if (this.status === 200 || this.status === 0) {\n          // Some browsers return HTTP Status 0 when using non-http protocol\n          // e.g. 'file://' or 'data://'. Handle as success.\n          if (this.status === 0) console.warn('THREE.FileLoader: HTTP Status 0 received.'); // Add to cache only on HTTP success, so that we do not cache\n          // error response bodies as proper responses to requests.\n\n          Cache.add(url, response);\n\n          for (var i = 0, il = callbacks.length; i < il; i++) {\n            var callback = callbacks[i];\n            if (callback.onLoad) callback.onLoad(response);\n          }\n\n          scope.manager.itemEnd(url);\n        } else {\n          for (var i = 0, il = callbacks.length; i < il; i++) {\n            var callback = callbacks[i];\n            if (callback.onError) callback.onError(event);\n          }\n\n          scope.manager.itemError(url);\n          scope.manager.itemEnd(url);\n        }\n      }, false);\n      request.addEventListener('progress', function (event) {\n        var callbacks = loading[url];\n\n        for (var i = 0, il = callbacks.length; i < il; i++) {\n          var callback = callbacks[i];\n          if (callback.onProgress) callback.onProgress(event);\n        }\n      }, false);\n      request.addEventListener('error', function (event) {\n        var callbacks = loading[url];\n        delete loading[url];\n\n        for (var i = 0, il = callbacks.length; i < il; i++) {\n          var callback = callbacks[i];\n          if (callback.onError) callback.onError(event);\n        }\n\n        scope.manager.itemError(url);\n        scope.manager.itemEnd(url);\n      }, false);\n      request.addEventListener('abort', function (event) {\n        var callbacks = loading[url];\n        delete loading[url];\n\n        for (var i = 0, il = callbacks.length; i < il; i++) {\n          var callback = callbacks[i];\n          if (callback.onError) callback.onError(event);\n        }\n\n        scope.manager.itemError(url);\n        scope.manager.itemEnd(url);\n      }, false);\n      if (this.responseType !== undefined) request.responseType = this.responseType;\n      if (this.withCredentials !== undefined) request.withCredentials = this.withCredentials;\n      if (request.overrideMimeType) request.overrideMimeType(this.mimeType !== undefined ? this.mimeType : 'text/plain');\n\n      for (var header in this.requestHeader) {\n        request.setRequestHeader(header, this.requestHeader[header]);\n      }\n\n      request.send(null);\n    }\n\n    scope.manager.itemStart(url);\n    return request;\n  },\n  setResponseType: function (value) {\n    this.responseType = value;\n    return this;\n  },\n  setWithCredentials: function (value) {\n    this.withCredentials = value;\n    return this;\n  },\n  setMimeType: function (value) {\n    this.mimeType = value;\n    return this;\n  },\n  setRequestHeader: function (value) {\n    this.requestHeader = value;\n    return this;\n  }\n});\n/**\n * @author bhouston / http://clara.io/\n */\n\nfunction AnimationLoader(manager) {\n  Loader.call(this, manager);\n}\n\nAnimationLoader.prototype = Object.assign(Object.create(Loader.prototype), {\n  constructor: AnimationLoader,\n  load: function (url, onLoad, onProgress, onError) {\n    var scope = this;\n    var loader = new FileLoader(scope.manager);\n    loader.setPath(scope.path);\n    loader.load(url, function (text) {\n      onLoad(scope.parse(JSON.parse(text)));\n    }, onProgress, onError);\n  },\n  parse: function (json) {\n    var animations = [];\n\n    for (var i = 0; i < json.length; i++) {\n      var clip = AnimationClip.parse(json[i]);\n      animations.push(clip);\n    }\n\n    return animations;\n  }\n});\n/**\n * @author mrdoob / http://mrdoob.com/\n *\n * Abstract Base class to block based textures loader (dds, pvr, ...)\n *\n * Sub classes have to implement the parse() method which will be used in load().\n */\n\nfunction CompressedTextureLoader(manager) {\n  Loader.call(this, manager);\n}\n\nCompressedTextureLoader.prototype = Object.assign(Object.create(Loader.prototype), {\n  constructor: CompressedTextureLoader,\n  load: function (url, onLoad, onProgress, onError) {\n    var scope = this;\n    var images = [];\n    var texture = new CompressedTexture();\n    texture.image = images;\n    var loader = new FileLoader(this.manager);\n    loader.setPath(this.path);\n    loader.setResponseType('arraybuffer');\n\n    function loadTexture(i) {\n      loader.load(url[i], function (buffer) {\n        var texDatas = scope.parse(buffer, true);\n        images[i] = {\n          width: texDatas.width,\n          height: texDatas.height,\n          format: texDatas.format,\n          mipmaps: texDatas.mipmaps\n        };\n        loaded += 1;\n\n        if (loaded === 6) {\n          if (texDatas.mipmapCount === 1) texture.minFilter = LinearFilter;\n          texture.format = texDatas.format;\n          texture.needsUpdate = true;\n          if (onLoad) onLoad(texture);\n        }\n      }, onProgress, onError);\n    }\n\n    if (Array.isArray(url)) {\n      var loaded = 0;\n\n      for (var i = 0, il = url.length; i < il; ++i) {\n        loadTexture(i);\n      }\n    } else {\n      // compressed cubemap texture stored in a single DDS file\n      loader.load(url, function (buffer) {\n        var texDatas = scope.parse(buffer, true);\n\n        if (texDatas.isCubemap) {\n          var faces = texDatas.mipmaps.length / texDatas.mipmapCount;\n\n          for (var f = 0; f < faces; f++) {\n            images[f] = {\n              mipmaps: []\n            };\n\n            for (var i = 0; i < texDatas.mipmapCount; i++) {\n              images[f].mipmaps.push(texDatas.mipmaps[f * texDatas.mipmapCount + i]);\n              images[f].format = texDatas.format;\n              images[f].width = texDatas.width;\n              images[f].height = texDatas.height;\n            }\n          }\n        } else {\n          texture.image.width = texDatas.width;\n          texture.image.height = texDatas.height;\n          texture.mipmaps = texDatas.mipmaps;\n        }\n\n        if (texDatas.mipmapCount === 1) {\n          texture.minFilter = LinearFilter;\n        }\n\n        texture.format = texDatas.format;\n        texture.needsUpdate = true;\n        if (onLoad) onLoad(texture);\n      }, onProgress, onError);\n    }\n\n    return texture;\n  }\n});\n\nfunction DataTextureLoader() {}\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\n\nfunction ImageLoader(manager) {\n  Loader.call(this, manager);\n}\n\nImageLoader.prototype = Object.assign(Object.create(Loader.prototype), {\n  constructor: ImageLoader,\n  load: function (url, onLoad, onProgress, onError) {\n    if (this.path !== undefined) url = this.path + url;\n    url = this.manager.resolveURL(url);\n    var scope = this;\n    var cached = Cache.get(url);\n\n    if (cached !== undefined) {\n      scope.manager.itemStart(url);\n      setTimeout(function () {\n        if (onLoad) onLoad(cached);\n        scope.manager.itemEnd(url);\n      }, 0);\n      return cached;\n    }\n\n    var image = document.createElementNS('http://www.w3.org/1999/xhtml', 'img');\n\n    function onImageLoad() {\n      image.removeEventListener('load', onImageLoad, false);\n      image.removeEventListener('error', onImageError, false);\n      Cache.add(url, this);\n      if (onLoad) onLoad(this);\n      scope.manager.itemEnd(url);\n    }\n\n    function onImageError(event) {\n      image.removeEventListener('load', onImageLoad, false);\n      image.removeEventListener('error', onImageError, false);\n      if (onError) onError(event);\n      scope.manager.itemError(url);\n      scope.manager.itemEnd(url);\n    }\n\n    image.addEventListener('load', onImageLoad, false);\n    image.addEventListener('error', onImageError, false);\n\n    if (url.substr(0, 5) !== 'data:') {\n      if (this.crossOrigin !== undefined) image.crossOrigin = this.crossOrigin;\n    }\n\n    scope.manager.itemStart(url);\n    image.src = url;\n    return image;\n  }\n});\n\nfunction CubeTextureLoader() {}\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\n\nfunction TextureLoader(manager) {\n  Loader.call(this, manager);\n}\n\nTextureLoader.prototype = Object.assign(Object.create(Loader.prototype), {\n  constructor: TextureLoader,\n  load: function (url, onLoad, onProgress, onError) {\n    var texture = new Texture();\n    var loader = new ImageLoader(this.manager);\n    loader.setCrossOrigin(this.crossOrigin);\n    loader.setPath(this.path);\n    loader.load(url, function (image) {\n      texture.image = image; // JPEGs can't have an alpha channel, so memory can be saved by storing them as RGB.\n\n      var isJPEG = url.search(/\\.jpe?g($|\\?)/i) > 0 || url.search(/^data\\:image\\/jpeg/) === 0;\n      texture.format = isJPEG ? RGBFormat : RGBAFormat;\n      texture.needsUpdate = true;\n\n      if (onLoad !== undefined) {\n        onLoad(texture);\n      }\n    }, onProgress, onError);\n    return texture;\n  }\n});\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * Extensible curve object\n *\n * Some common of curve methods:\n * .getPoint( t, optionalTarget ), .getTangent( t )\n * .getPointAt( u, optionalTarget ), .getTangentAt( u )\n * .getPoints(), .getSpacedPoints()\n * .getLength()\n * .updateArcLengths()\n *\n * This following curves inherit from THREE.Curve:\n *\n * -- 2D curves --\n * THREE.ArcCurve\n * THREE.CubicBezierCurve\n * THREE.EllipseCurve\n * THREE.LineCurve\n * THREE.QuadraticBezierCurve\n * THREE.SplineCurve\n *\n * -- 3D curves --\n * THREE.CatmullRomCurve3\n * THREE.CubicBezierCurve3\n * THREE.LineCurve3\n * THREE.QuadraticBezierCurve3\n *\n * A series of curves can be represented as a THREE.CurvePath.\n *\n **/\n\n/**************************************************************\n *\tAbstract Curve base class\n **************************************************************/\n\nfunction Curve() {\n  this.type = 'Curve';\n  this.arcLengthDivisions = 200;\n}\n\nObject.assign(Curve.prototype, {\n  // Virtual base class method to overwrite and implement in subclasses\n  //\t- t [0 .. 1]\n  getPoint: function ()\n  /* t, optionalTarget */\n  {\n    console.warn('THREE.Curve: .getPoint() not implemented.');\n    return null;\n  },\n  // Get point at relative position in curve according to arc length\n  // - u [0 .. 1]\n  getPointAt: function (u, optionalTarget) {\n    var t = this.getUtoTmapping(u);\n    return this.getPoint(t, optionalTarget);\n  },\n  // Get sequence of points using getPoint( t )\n  getPoints: function (divisions) {\n    if (divisions === undefined) divisions = 5;\n    var points = [];\n\n    for (var d = 0; d <= divisions; d++) {\n      points.push(this.getPoint(d / divisions));\n    }\n\n    return points;\n  },\n  // Get sequence of points using getPointAt( u )\n  getSpacedPoints: function (divisions) {\n    if (divisions === undefined) divisions = 5;\n    var points = [];\n\n    for (var d = 0; d <= divisions; d++) {\n      points.push(this.getPointAt(d / divisions));\n    }\n\n    return points;\n  },\n  // Get total curve arc length\n  getLength: function () {\n    var lengths = this.getLengths();\n    return lengths[lengths.length - 1];\n  },\n  // Get list of cumulative segment lengths\n  getLengths: function (divisions) {\n    if (divisions === undefined) divisions = this.arcLengthDivisions;\n\n    if (this.cacheArcLengths && this.cacheArcLengths.length === divisions + 1 && !this.needsUpdate) {\n      return this.cacheArcLengths;\n    }\n\n    this.needsUpdate = false;\n    var cache = [];\n    var current,\n        last = this.getPoint(0);\n    var p,\n        sum = 0;\n    cache.push(0);\n\n    for (p = 1; p <= divisions; p++) {\n      current = this.getPoint(p / divisions);\n      sum += current.distanceTo(last);\n      cache.push(sum);\n      last = current;\n    }\n\n    this.cacheArcLengths = cache;\n    return cache; // { sums: cache, sum: sum }; Sum is in the last element.\n  },\n  updateArcLengths: function () {\n    this.needsUpdate = true;\n    this.getLengths();\n  },\n  // Given u ( 0 .. 1 ), get a t to find p. This gives you points which are equidistant\n  getUtoTmapping: function (u, distance) {\n    var arcLengths = this.getLengths();\n    var i = 0,\n        il = arcLengths.length;\n    var targetArcLength; // The targeted u distance value to get\n\n    if (distance) {\n      targetArcLength = distance;\n    } else {\n      targetArcLength = u * arcLengths[il - 1];\n    } // binary search for the index with largest value smaller than target u distance\n\n\n    var low = 0,\n        high = il - 1,\n        comparison;\n\n    while (low <= high) {\n      i = Math.floor(low + (high - low) / 2); // less likely to overflow, though probably not issue here, JS doesn't really have integers, all numbers are floats\n\n      comparison = arcLengths[i] - targetArcLength;\n\n      if (comparison < 0) {\n        low = i + 1;\n      } else if (comparison > 0) {\n        high = i - 1;\n      } else {\n        high = i;\n        break; // DONE\n      }\n    }\n\n    i = high;\n\n    if (arcLengths[i] === targetArcLength) {\n      return i / (il - 1);\n    } // we could get finer grain at lengths, or use simple interpolation between two points\n\n\n    var lengthBefore = arcLengths[i];\n    var lengthAfter = arcLengths[i + 1];\n    var segmentLength = lengthAfter - lengthBefore; // determine where we are between the 'before' and 'after' points\n\n    var segmentFraction = (targetArcLength - lengthBefore) / segmentLength; // add that fractional amount to t\n\n    var t = (i + segmentFraction) / (il - 1);\n    return t;\n  },\n  // Returns a unit vector tangent at t\n  // In case any sub curve does not implement its tangent derivation,\n  // 2 points a small delta apart will be used to find its gradient\n  // which seems to give a reasonable approximation\n  getTangent: function (t) {\n    var delta = 0.0001;\n    var t1 = t - delta;\n    var t2 = t + delta; // Capping in case of danger\n\n    if (t1 < 0) t1 = 0;\n    if (t2 > 1) t2 = 1;\n    var pt1 = this.getPoint(t1);\n    var pt2 = this.getPoint(t2);\n    var vec = pt2.clone().sub(pt1);\n    return vec.normalize();\n  },\n  getTangentAt: function (u) {\n    var t = this.getUtoTmapping(u);\n    return this.getTangent(t);\n  },\n  computeFrenetFrames: function (segments, closed) {\n    // see http://www.cs.indiana.edu/pub/techreports/TR425.pdf\n    var normal = new Vector3();\n    var tangents = [];\n    var normals = [];\n    var binormals = [];\n    var vec = new Vector3();\n    var mat = new Matrix4();\n    var i, u, theta; // compute the tangent vectors for each segment on the curve\n\n    for (i = 0; i <= segments; i++) {\n      u = i / segments;\n      tangents[i] = this.getTangentAt(u);\n      tangents[i].normalize();\n    } // select an initial normal vector perpendicular to the first tangent vector,\n    // and in the direction of the minimum tangent xyz component\n\n\n    normals[0] = new Vector3();\n    binormals[0] = new Vector3();\n    var min = Number.MAX_VALUE;\n    var tx = Math.abs(tangents[0].x);\n    var ty = Math.abs(tangents[0].y);\n    var tz = Math.abs(tangents[0].z);\n\n    if (tx <= min) {\n      min = tx;\n      normal.set(1, 0, 0);\n    }\n\n    if (ty <= min) {\n      min = ty;\n      normal.set(0, 1, 0);\n    }\n\n    if (tz <= min) {\n      normal.set(0, 0, 1);\n    }\n\n    vec.crossVectors(tangents[0], normal).normalize();\n    normals[0].crossVectors(tangents[0], vec);\n    binormals[0].crossVectors(tangents[0], normals[0]); // compute the slowly-varying normal and binormal vectors for each segment on the curve\n\n    for (i = 1; i <= segments; i++) {\n      normals[i] = normals[i - 1].clone();\n      binormals[i] = binormals[i - 1].clone();\n      vec.crossVectors(tangents[i - 1], tangents[i]);\n\n      if (vec.length() > Number.EPSILON) {\n        vec.normalize();\n        theta = Math.acos(MathUtils.clamp(tangents[i - 1].dot(tangents[i]), -1, 1)); // clamp for floating pt errors\n\n        normals[i].applyMatrix4(mat.makeRotationAxis(vec, theta));\n      }\n\n      binormals[i].crossVectors(tangents[i], normals[i]);\n    } // if the curve is closed, postprocess the vectors so the first and last normal vectors are the same\n\n\n    if (closed === true) {\n      theta = Math.acos(MathUtils.clamp(normals[0].dot(normals[segments]), -1, 1));\n      theta /= segments;\n\n      if (tangents[0].dot(vec.crossVectors(normals[0], normals[segments])) > 0) {\n        theta = -theta;\n      }\n\n      for (i = 1; i <= segments; i++) {\n        // twist a little...\n        normals[i].applyMatrix4(mat.makeRotationAxis(tangents[i], theta * i));\n        binormals[i].crossVectors(tangents[i], normals[i]);\n      }\n    }\n\n    return {\n      tangents: tangents,\n      normals: normals,\n      binormals: binormals\n    };\n  },\n  clone: function () {\n    return new this.constructor().copy(this);\n  },\n  copy: function (source) {\n    this.arcLengthDivisions = source.arcLengthDivisions;\n    return this;\n  },\n  toJSON: function () {\n    var data = {\n      metadata: {\n        version: 4.5,\n        type: 'Curve',\n        generator: 'Curve.toJSON'\n      }\n    };\n    data.arcLengthDivisions = this.arcLengthDivisions;\n    data.type = this.type;\n    return data;\n  },\n  fromJSON: function (json) {\n    this.arcLengthDivisions = json.arcLengthDivisions;\n    return this;\n  }\n});\n\nfunction EllipseCurve(aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation) {\n  Curve.call(this);\n  this.type = 'EllipseCurve';\n  this.aX = aX || 0;\n  this.aY = aY || 0;\n  this.xRadius = xRadius || 1;\n  this.yRadius = yRadius || 1;\n  this.aStartAngle = aStartAngle || 0;\n  this.aEndAngle = aEndAngle || 2 * Math.PI;\n  this.aClockwise = aClockwise || false;\n  this.aRotation = aRotation || 0;\n}\n\nEllipseCurve.prototype = Object.create(Curve.prototype);\nEllipseCurve.prototype.constructor = EllipseCurve;\nEllipseCurve.prototype.isEllipseCurve = true;\n\nEllipseCurve.prototype.getPoint = function (t, optionalTarget) {\n  var point = optionalTarget || new Vector2();\n  var twoPi = Math.PI * 2;\n  var deltaAngle = this.aEndAngle - this.aStartAngle;\n  var samePoints = Math.abs(deltaAngle) < Number.EPSILON; // ensures that deltaAngle is 0 .. 2 PI\n\n  while (deltaAngle < 0) deltaAngle += twoPi;\n\n  while (deltaAngle > twoPi) deltaAngle -= twoPi;\n\n  if (deltaAngle < Number.EPSILON) {\n    if (samePoints) {\n      deltaAngle = 0;\n    } else {\n      deltaAngle = twoPi;\n    }\n  }\n\n  if (this.aClockwise === true && !samePoints) {\n    if (deltaAngle === twoPi) {\n      deltaAngle = -twoPi;\n    } else {\n      deltaAngle = deltaAngle - twoPi;\n    }\n  }\n\n  var angle = this.aStartAngle + t * deltaAngle;\n  var x = this.aX + this.xRadius * Math.cos(angle);\n  var y = this.aY + this.yRadius * Math.sin(angle);\n\n  if (this.aRotation !== 0) {\n    var cos = Math.cos(this.aRotation);\n    var sin = Math.sin(this.aRotation);\n    var tx = x - this.aX;\n    var ty = y - this.aY; // Rotate the point about the center of the ellipse.\n\n    x = tx * cos - ty * sin + this.aX;\n    y = tx * sin + ty * cos + this.aY;\n  }\n\n  return point.set(x, y);\n};\n\nEllipseCurve.prototype.copy = function (source) {\n  Curve.prototype.copy.call(this, source);\n  this.aX = source.aX;\n  this.aY = source.aY;\n  this.xRadius = source.xRadius;\n  this.yRadius = source.yRadius;\n  this.aStartAngle = source.aStartAngle;\n  this.aEndAngle = source.aEndAngle;\n  this.aClockwise = source.aClockwise;\n  this.aRotation = source.aRotation;\n  return this;\n};\n\nEllipseCurve.prototype.toJSON = function () {\n  var data = Curve.prototype.toJSON.call(this);\n  data.aX = this.aX;\n  data.aY = this.aY;\n  data.xRadius = this.xRadius;\n  data.yRadius = this.yRadius;\n  data.aStartAngle = this.aStartAngle;\n  data.aEndAngle = this.aEndAngle;\n  data.aClockwise = this.aClockwise;\n  data.aRotation = this.aRotation;\n  return data;\n};\n\nEllipseCurve.prototype.fromJSON = function (json) {\n  Curve.prototype.fromJSON.call(this, json);\n  this.aX = json.aX;\n  this.aY = json.aY;\n  this.xRadius = json.xRadius;\n  this.yRadius = json.yRadius;\n  this.aStartAngle = json.aStartAngle;\n  this.aEndAngle = json.aEndAngle;\n  this.aClockwise = json.aClockwise;\n  this.aRotation = json.aRotation;\n  return this;\n};\n\nfunction ArcCurve(aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise) {\n  EllipseCurve.call(this, aX, aY, aRadius, aRadius, aStartAngle, aEndAngle, aClockwise);\n  this.type = 'ArcCurve';\n}\n\nArcCurve.prototype = Object.create(EllipseCurve.prototype);\nArcCurve.prototype.constructor = ArcCurve;\nArcCurve.prototype.isArcCurve = true;\n/**\n * @author zz85 https://github.com/zz85\n *\n * Centripetal CatmullRom Curve - which is useful for avoiding\n * cusps and self-intersections in non-uniform catmull rom curves.\n * http://www.cemyuksel.com/research/catmullrom_param/catmullrom.pdf\n *\n * curve.type accepts centripetal(default), chordal and catmullrom\n * curve.tension is used for catmullrom which defaults to 0.5\n */\n\n/*\nBased on an optimized c++ solution in\n - http://stackoverflow.com/questions/9489736/catmull-rom-curve-with-no-cusps-and-no-self-intersections/\n - http://ideone.com/NoEbVM\n\nThis CubicPoly class could be used for reusing some variables and calculations,\nbut for three.js curve use, it could be possible inlined and flatten into a single function call\nwhich can be placed in CurveUtils.\n*/\n\nfunction CubicPoly() {\n  var c0 = 0,\n      c1 = 0,\n      c2 = 0,\n      c3 = 0;\n  /*\n   * Compute coefficients for a cubic polynomial\n   *   p(s) = c0 + c1*s + c2*s^2 + c3*s^3\n   * such that\n   *   p(0) = x0, p(1) = x1\n   *  and\n   *   p'(0) = t0, p'(1) = t1.\n   */\n\n  function init(x0, x1, t0, t1) {\n    c0 = x0;\n    c1 = t0;\n    c2 = -3 * x0 + 3 * x1 - 2 * t0 - t1;\n    c3 = 2 * x0 - 2 * x1 + t0 + t1;\n  }\n\n  return {\n    initCatmullRom: function (x0, x1, x2, x3, tension) {\n      init(x1, x2, tension * (x2 - x0), tension * (x3 - x1));\n    },\n    initNonuniformCatmullRom: function (x0, x1, x2, x3, dt0, dt1, dt2) {\n      // compute tangents when parameterized in [t1,t2]\n      var t1 = (x1 - x0) / dt0 - (x2 - x0) / (dt0 + dt1) + (x2 - x1) / dt1;\n      var t2 = (x2 - x1) / dt1 - (x3 - x1) / (dt1 + dt2) + (x3 - x2) / dt2; // rescale tangents for parametrization in [0,1]\n\n      t1 *= dt1;\n      t2 *= dt1;\n      init(x1, x2, t1, t2);\n    },\n    calc: function (t) {\n      var t2 = t * t;\n      var t3 = t2 * t;\n      return c0 + c1 * t + c2 * t2 + c3 * t3;\n    }\n  };\n} //\n\n\nvar tmp = new Vector3();\nvar px = new CubicPoly(),\n    py = new CubicPoly(),\n    pz = new CubicPoly();\n\nfunction CatmullRomCurve3(points, closed, curveType, tension) {\n  Curve.call(this);\n  this.type = 'CatmullRomCurve3';\n  this.points = points || [];\n  this.closed = closed || false;\n  this.curveType = curveType || 'centripetal';\n  this.tension = tension || 0.5;\n}\n\nCatmullRomCurve3.prototype = Object.create(Curve.prototype);\nCatmullRomCurve3.prototype.constructor = CatmullRomCurve3;\nCatmullRomCurve3.prototype.isCatmullRomCurve3 = true;\n\nCatmullRomCurve3.prototype.getPoint = function (t, optionalTarget) {\n  var point = optionalTarget || new Vector3();\n  var points = this.points;\n  var l = points.length;\n  var p = (l - (this.closed ? 0 : 1)) * t;\n  var intPoint = Math.floor(p);\n  var weight = p - intPoint;\n\n  if (this.closed) {\n    intPoint += intPoint > 0 ? 0 : (Math.floor(Math.abs(intPoint) / l) + 1) * l;\n  } else if (weight === 0 && intPoint === l - 1) {\n    intPoint = l - 2;\n    weight = 1;\n  }\n\n  var p0, p1, p2, p3; // 4 points\n\n  if (this.closed || intPoint > 0) {\n    p0 = points[(intPoint - 1) % l];\n  } else {\n    // extrapolate first point\n    tmp.subVectors(points[0], points[1]).add(points[0]);\n    p0 = tmp;\n  }\n\n  p1 = points[intPoint % l];\n  p2 = points[(intPoint + 1) % l];\n\n  if (this.closed || intPoint + 2 < l) {\n    p3 = points[(intPoint + 2) % l];\n  } else {\n    // extrapolate last point\n    tmp.subVectors(points[l - 1], points[l - 2]).add(points[l - 1]);\n    p3 = tmp;\n  }\n\n  if (this.curveType === 'centripetal' || this.curveType === 'chordal') {\n    // init Centripetal / Chordal Catmull-Rom\n    var pow = this.curveType === 'chordal' ? 0.5 : 0.25;\n    var dt0 = Math.pow(p0.distanceToSquared(p1), pow);\n    var dt1 = Math.pow(p1.distanceToSquared(p2), pow);\n    var dt2 = Math.pow(p2.distanceToSquared(p3), pow); // safety check for repeated points\n\n    if (dt1 < 1e-4) dt1 = 1.0;\n    if (dt0 < 1e-4) dt0 = dt1;\n    if (dt2 < 1e-4) dt2 = dt1;\n    px.initNonuniformCatmullRom(p0.x, p1.x, p2.x, p3.x, dt0, dt1, dt2);\n    py.initNonuniformCatmullRom(p0.y, p1.y, p2.y, p3.y, dt0, dt1, dt2);\n    pz.initNonuniformCatmullRom(p0.z, p1.z, p2.z, p3.z, dt0, dt1, dt2);\n  } else if (this.curveType === 'catmullrom') {\n    px.initCatmullRom(p0.x, p1.x, p2.x, p3.x, this.tension);\n    py.initCatmullRom(p0.y, p1.y, p2.y, p3.y, this.tension);\n    pz.initCatmullRom(p0.z, p1.z, p2.z, p3.z, this.tension);\n  }\n\n  point.set(px.calc(weight), py.calc(weight), pz.calc(weight));\n  return point;\n};\n\nCatmullRomCurve3.prototype.copy = function (source) {\n  Curve.prototype.copy.call(this, source);\n  this.points = [];\n\n  for (var i = 0, l = source.points.length; i < l; i++) {\n    var point = source.points[i];\n    this.points.push(point.clone());\n  }\n\n  this.closed = source.closed;\n  this.curveType = source.curveType;\n  this.tension = source.tension;\n  return this;\n};\n\nCatmullRomCurve3.prototype.toJSON = function () {\n  var data = Curve.prototype.toJSON.call(this);\n  data.points = [];\n\n  for (var i = 0, l = this.points.length; i < l; i++) {\n    var point = this.points[i];\n    data.points.push(point.toArray());\n  }\n\n  data.closed = this.closed;\n  data.curveType = this.curveType;\n  data.tension = this.tension;\n  return data;\n};\n\nCatmullRomCurve3.prototype.fromJSON = function (json) {\n  Curve.prototype.fromJSON.call(this, json);\n  this.points = [];\n\n  for (var i = 0, l = json.points.length; i < l; i++) {\n    var point = json.points[i];\n    this.points.push(new Vector3().fromArray(point));\n  }\n\n  this.closed = json.closed;\n  this.curveType = json.curveType;\n  this.tension = json.tension;\n  return this;\n};\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n *\n * Bezier Curves formulas obtained from\n * http://en.wikipedia.org/wiki/Bézier_curve\n */\n\n\nfunction CatmullRom(t, p0, p1, p2, p3) {\n  var v0 = (p2 - p0) * 0.5;\n  var v1 = (p3 - p1) * 0.5;\n  var t2 = t * t;\n  var t3 = t * t2;\n  return (2 * p1 - 2 * p2 + v0 + v1) * t3 + (-3 * p1 + 3 * p2 - 2 * v0 - v1) * t2 + v0 * t + p1;\n} //\n\n\nfunction QuadraticBezierP0(t, p) {\n  var k = 1 - t;\n  return k * k * p;\n}\n\nfunction QuadraticBezierP1(t, p) {\n  return 2 * (1 - t) * t * p;\n}\n\nfunction QuadraticBezierP2(t, p) {\n  return t * t * p;\n}\n\nfunction QuadraticBezier(t, p0, p1, p2) {\n  return QuadraticBezierP0(t, p0) + QuadraticBezierP1(t, p1) + QuadraticBezierP2(t, p2);\n} //\n\n\nfunction CubicBezierP0(t, p) {\n  var k = 1 - t;\n  return k * k * k * p;\n}\n\nfunction CubicBezierP1(t, p) {\n  var k = 1 - t;\n  return 3 * k * k * t * p;\n}\n\nfunction CubicBezierP2(t, p) {\n  return 3 * (1 - t) * t * t * p;\n}\n\nfunction CubicBezierP3(t, p) {\n  return t * t * t * p;\n}\n\nfunction CubicBezier(t, p0, p1, p2, p3) {\n  return CubicBezierP0(t, p0) + CubicBezierP1(t, p1) + CubicBezierP2(t, p2) + CubicBezierP3(t, p3);\n}\n\nfunction CubicBezierCurve(v0, v1, v2, v3) {\n  Curve.call(this);\n  this.type = 'CubicBezierCurve';\n  this.v0 = v0 || new Vector2();\n  this.v1 = v1 || new Vector2();\n  this.v2 = v2 || new Vector2();\n  this.v3 = v3 || new Vector2();\n}\n\nCubicBezierCurve.prototype = Object.create(Curve.prototype);\nCubicBezierCurve.prototype.constructor = CubicBezierCurve;\nCubicBezierCurve.prototype.isCubicBezierCurve = true;\n\nCubicBezierCurve.prototype.getPoint = function (t, optionalTarget) {\n  var point = optionalTarget || new Vector2();\n  var v0 = this.v0,\n      v1 = this.v1,\n      v2 = this.v2,\n      v3 = this.v3;\n  point.set(CubicBezier(t, v0.x, v1.x, v2.x, v3.x), CubicBezier(t, v0.y, v1.y, v2.y, v3.y));\n  return point;\n};\n\nCubicBezierCurve.prototype.copy = function (source) {\n  Curve.prototype.copy.call(this, source);\n  this.v0.copy(source.v0);\n  this.v1.copy(source.v1);\n  this.v2.copy(source.v2);\n  this.v3.copy(source.v3);\n  return this;\n};\n\nCubicBezierCurve.prototype.toJSON = function () {\n  var data = Curve.prototype.toJSON.call(this);\n  data.v0 = this.v0.toArray();\n  data.v1 = this.v1.toArray();\n  data.v2 = this.v2.toArray();\n  data.v3 = this.v3.toArray();\n  return data;\n};\n\nCubicBezierCurve.prototype.fromJSON = function (json) {\n  Curve.prototype.fromJSON.call(this, json);\n  this.v0.fromArray(json.v0);\n  this.v1.fromArray(json.v1);\n  this.v2.fromArray(json.v2);\n  this.v3.fromArray(json.v3);\n  return this;\n};\n\nfunction CubicBezierCurve3(v0, v1, v2, v3) {\n  Curve.call(this);\n  this.type = 'CubicBezierCurve3';\n  this.v0 = v0 || new Vector3();\n  this.v1 = v1 || new Vector3();\n  this.v2 = v2 || new Vector3();\n  this.v3 = v3 || new Vector3();\n}\n\nCubicBezierCurve3.prototype = Object.create(Curve.prototype);\nCubicBezierCurve3.prototype.constructor = CubicBezierCurve3;\nCubicBezierCurve3.prototype.isCubicBezierCurve3 = true;\n\nCubicBezierCurve3.prototype.getPoint = function (t, optionalTarget) {\n  var point = optionalTarget || new Vector3();\n  var v0 = this.v0,\n      v1 = this.v1,\n      v2 = this.v2,\n      v3 = this.v3;\n  point.set(CubicBezier(t, v0.x, v1.x, v2.x, v3.x), CubicBezier(t, v0.y, v1.y, v2.y, v3.y), CubicBezier(t, v0.z, v1.z, v2.z, v3.z));\n  return point;\n};\n\nCubicBezierCurve3.prototype.copy = function (source) {\n  Curve.prototype.copy.call(this, source);\n  this.v0.copy(source.v0);\n  this.v1.copy(source.v1);\n  this.v2.copy(source.v2);\n  this.v3.copy(source.v3);\n  return this;\n};\n\nCubicBezierCurve3.prototype.toJSON = function () {\n  var data = Curve.prototype.toJSON.call(this);\n  data.v0 = this.v0.toArray();\n  data.v1 = this.v1.toArray();\n  data.v2 = this.v2.toArray();\n  data.v3 = this.v3.toArray();\n  return data;\n};\n\nCubicBezierCurve3.prototype.fromJSON = function (json) {\n  Curve.prototype.fromJSON.call(this, json);\n  this.v0.fromArray(json.v0);\n  this.v1.fromArray(json.v1);\n  this.v2.fromArray(json.v2);\n  this.v3.fromArray(json.v3);\n  return this;\n};\n\nfunction LineCurve(v1, v2) {\n  Curve.call(this);\n  this.type = 'LineCurve';\n  this.v1 = v1 || new Vector2();\n  this.v2 = v2 || new Vector2();\n}\n\nLineCurve.prototype = Object.create(Curve.prototype);\nLineCurve.prototype.constructor = LineCurve;\nLineCurve.prototype.isLineCurve = true;\n\nLineCurve.prototype.getPoint = function (t, optionalTarget) {\n  var point = optionalTarget || new Vector2();\n\n  if (t === 1) {\n    point.copy(this.v2);\n  } else {\n    point.copy(this.v2).sub(this.v1);\n    point.multiplyScalar(t).add(this.v1);\n  }\n\n  return point;\n}; // Line curve is linear, so we can overwrite default getPointAt\n\n\nLineCurve.prototype.getPointAt = function (u, optionalTarget) {\n  return this.getPoint(u, optionalTarget);\n};\n\nLineCurve.prototype.getTangent = function ()\n/* t */\n{\n  var tangent = this.v2.clone().sub(this.v1);\n  return tangent.normalize();\n};\n\nLineCurve.prototype.copy = function (source) {\n  Curve.prototype.copy.call(this, source);\n  this.v1.copy(source.v1);\n  this.v2.copy(source.v2);\n  return this;\n};\n\nLineCurve.prototype.toJSON = function () {\n  var data = Curve.prototype.toJSON.call(this);\n  data.v1 = this.v1.toArray();\n  data.v2 = this.v2.toArray();\n  return data;\n};\n\nLineCurve.prototype.fromJSON = function (json) {\n  Curve.prototype.fromJSON.call(this, json);\n  this.v1.fromArray(json.v1);\n  this.v2.fromArray(json.v2);\n  return this;\n};\n\nfunction LineCurve3(v1, v2) {\n  Curve.call(this);\n  this.type = 'LineCurve3';\n  this.v1 = v1 || new Vector3();\n  this.v2 = v2 || new Vector3();\n}\n\nLineCurve3.prototype = Object.create(Curve.prototype);\nLineCurve3.prototype.constructor = LineCurve3;\nLineCurve3.prototype.isLineCurve3 = true;\n\nLineCurve3.prototype.getPoint = function (t, optionalTarget) {\n  var point = optionalTarget || new Vector3();\n\n  if (t === 1) {\n    point.copy(this.v2);\n  } else {\n    point.copy(this.v2).sub(this.v1);\n    point.multiplyScalar(t).add(this.v1);\n  }\n\n  return point;\n}; // Line curve is linear, so we can overwrite default getPointAt\n\n\nLineCurve3.prototype.getPointAt = function (u, optionalTarget) {\n  return this.getPoint(u, optionalTarget);\n};\n\nLineCurve3.prototype.copy = function (source) {\n  Curve.prototype.copy.call(this, source);\n  this.v1.copy(source.v1);\n  this.v2.copy(source.v2);\n  return this;\n};\n\nLineCurve3.prototype.toJSON = function () {\n  var data = Curve.prototype.toJSON.call(this);\n  data.v1 = this.v1.toArray();\n  data.v2 = this.v2.toArray();\n  return data;\n};\n\nLineCurve3.prototype.fromJSON = function (json) {\n  Curve.prototype.fromJSON.call(this, json);\n  this.v1.fromArray(json.v1);\n  this.v2.fromArray(json.v2);\n  return this;\n};\n\nfunction QuadraticBezierCurve(v0, v1, v2) {\n  Curve.call(this);\n  this.type = 'QuadraticBezierCurve';\n  this.v0 = v0 || new Vector2();\n  this.v1 = v1 || new Vector2();\n  this.v2 = v2 || new Vector2();\n}\n\nQuadraticBezierCurve.prototype = Object.create(Curve.prototype);\nQuadraticBezierCurve.prototype.constructor = QuadraticBezierCurve;\nQuadraticBezierCurve.prototype.isQuadraticBezierCurve = true;\n\nQuadraticBezierCurve.prototype.getPoint = function (t, optionalTarget) {\n  var point = optionalTarget || new Vector2();\n  var v0 = this.v0,\n      v1 = this.v1,\n      v2 = this.v2;\n  point.set(QuadraticBezier(t, v0.x, v1.x, v2.x), QuadraticBezier(t, v0.y, v1.y, v2.y));\n  return point;\n};\n\nQuadraticBezierCurve.prototype.copy = function (source) {\n  Curve.prototype.copy.call(this, source);\n  this.v0.copy(source.v0);\n  this.v1.copy(source.v1);\n  this.v2.copy(source.v2);\n  return this;\n};\n\nQuadraticBezierCurve.prototype.toJSON = function () {\n  var data = Curve.prototype.toJSON.call(this);\n  data.v0 = this.v0.toArray();\n  data.v1 = this.v1.toArray();\n  data.v2 = this.v2.toArray();\n  return data;\n};\n\nQuadraticBezierCurve.prototype.fromJSON = function (json) {\n  Curve.prototype.fromJSON.call(this, json);\n  this.v0.fromArray(json.v0);\n  this.v1.fromArray(json.v1);\n  this.v2.fromArray(json.v2);\n  return this;\n};\n\nfunction QuadraticBezierCurve3(v0, v1, v2) {\n  Curve.call(this);\n  this.type = 'QuadraticBezierCurve3';\n  this.v0 = v0 || new Vector3();\n  this.v1 = v1 || new Vector3();\n  this.v2 = v2 || new Vector3();\n}\n\nQuadraticBezierCurve3.prototype = Object.create(Curve.prototype);\nQuadraticBezierCurve3.prototype.constructor = QuadraticBezierCurve3;\nQuadraticBezierCurve3.prototype.isQuadraticBezierCurve3 = true;\n\nQuadraticBezierCurve3.prototype.getPoint = function (t, optionalTarget) {\n  var point = optionalTarget || new Vector3();\n  var v0 = this.v0,\n      v1 = this.v1,\n      v2 = this.v2;\n  point.set(QuadraticBezier(t, v0.x, v1.x, v2.x), QuadraticBezier(t, v0.y, v1.y, v2.y), QuadraticBezier(t, v0.z, v1.z, v2.z));\n  return point;\n};\n\nQuadraticBezierCurve3.prototype.copy = function (source) {\n  Curve.prototype.copy.call(this, source);\n  this.v0.copy(source.v0);\n  this.v1.copy(source.v1);\n  this.v2.copy(source.v2);\n  return this;\n};\n\nQuadraticBezierCurve3.prototype.toJSON = function () {\n  var data = Curve.prototype.toJSON.call(this);\n  data.v0 = this.v0.toArray();\n  data.v1 = this.v1.toArray();\n  data.v2 = this.v2.toArray();\n  return data;\n};\n\nQuadraticBezierCurve3.prototype.fromJSON = function (json) {\n  Curve.prototype.fromJSON.call(this, json);\n  this.v0.fromArray(json.v0);\n  this.v1.fromArray(json.v1);\n  this.v2.fromArray(json.v2);\n  return this;\n};\n\nfunction SplineCurve(points\n/* array of Vector2 */\n) {\n  Curve.call(this);\n  this.type = 'SplineCurve';\n  this.points = points || [];\n}\n\nSplineCurve.prototype = Object.create(Curve.prototype);\nSplineCurve.prototype.constructor = SplineCurve;\nSplineCurve.prototype.isSplineCurve = true;\n\nSplineCurve.prototype.getPoint = function (t, optionalTarget) {\n  var point = optionalTarget || new Vector2();\n  var points = this.points;\n  var p = (points.length - 1) * t;\n  var intPoint = Math.floor(p);\n  var weight = p - intPoint;\n  var p0 = points[intPoint === 0 ? intPoint : intPoint - 1];\n  var p1 = points[intPoint];\n  var p2 = points[intPoint > points.length - 2 ? points.length - 1 : intPoint + 1];\n  var p3 = points[intPoint > points.length - 3 ? points.length - 1 : intPoint + 2];\n  point.set(CatmullRom(weight, p0.x, p1.x, p2.x, p3.x), CatmullRom(weight, p0.y, p1.y, p2.y, p3.y));\n  return point;\n};\n\nSplineCurve.prototype.copy = function (source) {\n  Curve.prototype.copy.call(this, source);\n  this.points = [];\n\n  for (var i = 0, l = source.points.length; i < l; i++) {\n    var point = source.points[i];\n    this.points.push(point.clone());\n  }\n\n  return this;\n};\n\nSplineCurve.prototype.toJSON = function () {\n  var data = Curve.prototype.toJSON.call(this);\n  data.points = [];\n\n  for (var i = 0, l = this.points.length; i < l; i++) {\n    var point = this.points[i];\n    data.points.push(point.toArray());\n  }\n\n  return data;\n};\n\nSplineCurve.prototype.fromJSON = function (json) {\n  Curve.prototype.fromJSON.call(this, json);\n  this.points = [];\n\n  for (var i = 0, l = json.points.length; i < l; i++) {\n    var point = json.points[i];\n    this.points.push(new Vector2().fromArray(point));\n  }\n\n  return this;\n};\n\nvar Curves = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  ArcCurve: ArcCurve,\n  CatmullRomCurve3: CatmullRomCurve3,\n  CubicBezierCurve: CubicBezierCurve,\n  CubicBezierCurve3: CubicBezierCurve3,\n  EllipseCurve: EllipseCurve,\n  LineCurve: LineCurve,\n  LineCurve3: LineCurve3,\n  QuadraticBezierCurve: QuadraticBezierCurve,\n  QuadraticBezierCurve3: QuadraticBezierCurve3,\n  SplineCurve: SplineCurve\n});\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n *\n **/\n\n/**************************************************************\n *\tCurved Path - a curve path is simply a array of connected\n *  curves, but retains the api of a curve\n **************************************************************/\n\nfunction CurvePath() {\n  Curve.call(this);\n  this.type = 'CurvePath';\n  this.curves = [];\n  this.autoClose = false; // Automatically closes the path\n}\n\nCurvePath.prototype = Object.assign(Object.create(Curve.prototype), {\n  constructor: CurvePath,\n  add: function (curve) {\n    this.curves.push(curve);\n  },\n  closePath: function () {\n    // Add a line curve if start and end of lines are not connected\n    var startPoint = this.curves[0].getPoint(0);\n    var endPoint = this.curves[this.curves.length - 1].getPoint(1);\n\n    if (!startPoint.equals(endPoint)) {\n      this.curves.push(new LineCurve(endPoint, startPoint));\n    }\n  },\n  // To get accurate point with reference to\n  // entire path distance at time t,\n  // following has to be done:\n  // 1. Length of each sub path have to be known\n  // 2. Locate and identify type of curve\n  // 3. Get t for the curve\n  // 4. Return curve.getPointAt(t')\n  getPoint: function (t) {\n    var d = t * this.getLength();\n    var curveLengths = this.getCurveLengths();\n    var i = 0; // To think about boundaries points.\n\n    while (i < curveLengths.length) {\n      if (curveLengths[i] >= d) {\n        var diff = curveLengths[i] - d;\n        var curve = this.curves[i];\n        var segmentLength = curve.getLength();\n        var u = segmentLength === 0 ? 0 : 1 - diff / segmentLength;\n        return curve.getPointAt(u);\n      }\n\n      i++;\n    }\n\n    return null; // loop where sum != 0, sum > d , sum+1 <d\n  },\n  // We cannot use the default THREE.Curve getPoint() with getLength() because in\n  // THREE.Curve, getLength() depends on getPoint() but in THREE.CurvePath\n  // getPoint() depends on getLength\n  getLength: function () {\n    var lens = this.getCurveLengths();\n    return lens[lens.length - 1];\n  },\n  // cacheLengths must be recalculated.\n  updateArcLengths: function () {\n    this.needsUpdate = true;\n    this.cacheLengths = null;\n    this.getCurveLengths();\n  },\n  // Compute lengths and cache them\n  // We cannot overwrite getLengths() because UtoT mapping uses it.\n  getCurveLengths: function () {\n    // We use cache values if curves and cache array are same length\n    if (this.cacheLengths && this.cacheLengths.length === this.curves.length) {\n      return this.cacheLengths;\n    } // Get length of sub-curve\n    // Push sums into cached array\n\n\n    var lengths = [],\n        sums = 0;\n\n    for (var i = 0, l = this.curves.length; i < l; i++) {\n      sums += this.curves[i].getLength();\n      lengths.push(sums);\n    }\n\n    this.cacheLengths = lengths;\n    return lengths;\n  },\n  getSpacedPoints: function (divisions) {\n    if (divisions === undefined) divisions = 40;\n    var points = [];\n\n    for (var i = 0; i <= divisions; i++) {\n      points.push(this.getPoint(i / divisions));\n    }\n\n    if (this.autoClose) {\n      points.push(points[0]);\n    }\n\n    return points;\n  },\n  getPoints: function (divisions) {\n    divisions = divisions || 12;\n    var points = [],\n        last;\n\n    for (var i = 0, curves = this.curves; i < curves.length; i++) {\n      var curve = curves[i];\n      var resolution = curve && curve.isEllipseCurve ? divisions * 2 : curve && (curve.isLineCurve || curve.isLineCurve3) ? 1 : curve && curve.isSplineCurve ? divisions * curve.points.length : divisions;\n      var pts = curve.getPoints(resolution);\n\n      for (var j = 0; j < pts.length; j++) {\n        var point = pts[j];\n        if (last && last.equals(point)) continue; // ensures no consecutive points are duplicates\n\n        points.push(point);\n        last = point;\n      }\n    }\n\n    if (this.autoClose && points.length > 1 && !points[points.length - 1].equals(points[0])) {\n      points.push(points[0]);\n    }\n\n    return points;\n  },\n  copy: function (source) {\n    Curve.prototype.copy.call(this, source);\n    this.curves = [];\n\n    for (var i = 0, l = source.curves.length; i < l; i++) {\n      var curve = source.curves[i];\n      this.curves.push(curve.clone());\n    }\n\n    this.autoClose = source.autoClose;\n    return this;\n  },\n  toJSON: function () {\n    var data = Curve.prototype.toJSON.call(this);\n    data.autoClose = this.autoClose;\n    data.curves = [];\n\n    for (var i = 0, l = this.curves.length; i < l; i++) {\n      var curve = this.curves[i];\n      data.curves.push(curve.toJSON());\n    }\n\n    return data;\n  },\n  fromJSON: function (json) {\n    Curve.prototype.fromJSON.call(this, json);\n    this.autoClose = json.autoClose;\n    this.curves = [];\n\n    for (var i = 0, l = json.curves.length; i < l; i++) {\n      var curve = json.curves[i];\n      this.curves.push(new Curves[curve.type]().fromJSON(curve));\n    }\n\n    return this;\n  }\n});\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * Creates free form 2d path using series of points, lines or curves.\n **/\n\nfunction Path(points) {\n  CurvePath.call(this);\n  this.type = 'Path';\n  this.currentPoint = new Vector2();\n\n  if (points) {\n    this.setFromPoints(points);\n  }\n}\n\nPath.prototype = Object.assign(Object.create(CurvePath.prototype), {\n  constructor: Path,\n  setFromPoints: function (points) {\n    this.moveTo(points[0].x, points[0].y);\n\n    for (var i = 1, l = points.length; i < l; i++) {\n      this.lineTo(points[i].x, points[i].y);\n    }\n\n    return this;\n  },\n  moveTo: function (x, y) {\n    this.currentPoint.set(x, y); // TODO consider referencing vectors instead of copying?\n\n    return this;\n  },\n  lineTo: function (x, y) {\n    var curve = new LineCurve(this.currentPoint.clone(), new Vector2(x, y));\n    this.curves.push(curve);\n    this.currentPoint.set(x, y);\n    return this;\n  },\n  quadraticCurveTo: function (aCPx, aCPy, aX, aY) {\n    var curve = new QuadraticBezierCurve(this.currentPoint.clone(), new Vector2(aCPx, aCPy), new Vector2(aX, aY));\n    this.curves.push(curve);\n    this.currentPoint.set(aX, aY);\n    return this;\n  },\n  bezierCurveTo: function (aCP1x, aCP1y, aCP2x, aCP2y, aX, aY) {\n    var curve = new CubicBezierCurve(this.currentPoint.clone(), new Vector2(aCP1x, aCP1y), new Vector2(aCP2x, aCP2y), new Vector2(aX, aY));\n    this.curves.push(curve);\n    this.currentPoint.set(aX, aY);\n    return this;\n  },\n  splineThru: function (pts\n  /*Array of Vector*/\n  ) {\n    var npts = [this.currentPoint.clone()].concat(pts);\n    var curve = new SplineCurve(npts);\n    this.curves.push(curve);\n    this.currentPoint.copy(pts[pts.length - 1]);\n    return this;\n  },\n  arc: function (aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise) {\n    var x0 = this.currentPoint.x;\n    var y0 = this.currentPoint.y;\n    this.absarc(aX + x0, aY + y0, aRadius, aStartAngle, aEndAngle, aClockwise);\n    return this;\n  },\n  absarc: function (aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise) {\n    this.absellipse(aX, aY, aRadius, aRadius, aStartAngle, aEndAngle, aClockwise);\n    return this;\n  },\n  ellipse: function (aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation) {\n    var x0 = this.currentPoint.x;\n    var y0 = this.currentPoint.y;\n    this.absellipse(aX + x0, aY + y0, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation);\n    return this;\n  },\n  absellipse: function (aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation) {\n    var curve = new EllipseCurve(aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation);\n\n    if (this.curves.length > 0) {\n      // if a previous curve is present, attempt to join\n      var firstPoint = curve.getPoint(0);\n\n      if (!firstPoint.equals(this.currentPoint)) {\n        this.lineTo(firstPoint.x, firstPoint.y);\n      }\n    }\n\n    this.curves.push(curve);\n    var lastPoint = curve.getPoint(1);\n    this.currentPoint.copy(lastPoint);\n    return this;\n  },\n  copy: function (source) {\n    CurvePath.prototype.copy.call(this, source);\n    this.currentPoint.copy(source.currentPoint);\n    return this;\n  },\n  toJSON: function () {\n    var data = CurvePath.prototype.toJSON.call(this);\n    data.currentPoint = this.currentPoint.toArray();\n    return data;\n  },\n  fromJSON: function (json) {\n    CurvePath.prototype.fromJSON.call(this, json);\n    this.currentPoint.fromArray(json.currentPoint);\n    return this;\n  }\n});\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * Defines a 2d shape plane using paths.\n **/\n// STEP 1 Create a path.\n// STEP 2 Turn path into shape.\n// STEP 3 ExtrudeGeometry takes in Shape/Shapes\n// STEP 3a - Extract points from each shape, turn to vertices\n// STEP 3b - Triangulate each shape, add faces.\n\nfunction Shape(points) {\n  Path.call(this, points);\n  this.uuid = MathUtils.generateUUID();\n  this.type = 'Shape';\n  this.holes = [];\n}\n\nShape.prototype = Object.assign(Object.create(Path.prototype), {\n  constructor: Shape,\n  getPointsHoles: function (divisions) {\n    var holesPts = [];\n\n    for (var i = 0, l = this.holes.length; i < l; i++) {\n      holesPts[i] = this.holes[i].getPoints(divisions);\n    }\n\n    return holesPts;\n  },\n  // get points of shape and holes (keypoints based on segments parameter)\n  extractPoints: function (divisions) {\n    return {\n      shape: this.getPoints(divisions),\n      holes: this.getPointsHoles(divisions)\n    };\n  },\n  copy: function (source) {\n    Path.prototype.copy.call(this, source);\n    this.holes = [];\n\n    for (var i = 0, l = source.holes.length; i < l; i++) {\n      var hole = source.holes[i];\n      this.holes.push(hole.clone());\n    }\n\n    return this;\n  },\n  toJSON: function () {\n    var data = Path.prototype.toJSON.call(this);\n    data.uuid = this.uuid;\n    data.holes = [];\n\n    for (var i = 0, l = this.holes.length; i < l; i++) {\n      var hole = this.holes[i];\n      data.holes.push(hole.toJSON());\n    }\n\n    return data;\n  },\n  fromJSON: function (json) {\n    Path.prototype.fromJSON.call(this, json);\n    this.uuid = json.uuid;\n    this.holes = [];\n\n    for (var i = 0, l = json.holes.length; i < l; i++) {\n      var hole = json.holes[i];\n      this.holes.push(new Path().fromJSON(hole));\n    }\n\n    return this;\n  }\n});\n\nfunction Light() {}\n\nfunction HemisphereLight() {}\n\nfunction LightShadow() {}\n\nfunction SpotLightShadow() {}\n\nfunction SpotLight() {}\n\nfunction PointLight() {}\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author arose / http://github.com/arose\n */\n\n\nfunction OrthographicCamera(left, right, top, bottom, near, far) {\n  Camera.call(this);\n  this.type = 'OrthographicCamera';\n  this.zoom = 1;\n  this.view = null;\n  this.left = left !== undefined ? left : -1;\n  this.right = right !== undefined ? right : 1;\n  this.top = top !== undefined ? top : 1;\n  this.bottom = bottom !== undefined ? bottom : -1;\n  this.near = near !== undefined ? near : 0.1;\n  this.far = far !== undefined ? far : 2000;\n  this.updateProjectionMatrix();\n}\n\nOrthographicCamera.prototype = Object.assign(Object.create(Camera.prototype), {\n  constructor: OrthographicCamera,\n  isOrthographicCamera: true,\n  copy: function (source, recursive) {\n    Camera.prototype.copy.call(this, source, recursive);\n    this.left = source.left;\n    this.right = source.right;\n    this.top = source.top;\n    this.bottom = source.bottom;\n    this.near = source.near;\n    this.far = source.far;\n    this.zoom = source.zoom;\n    this.view = source.view === null ? null : Object.assign({}, source.view);\n    return this;\n  },\n  setViewOffset: function (fullWidth, fullHeight, x, y, width, height) {\n    if (this.view === null) {\n      this.view = {\n        enabled: true,\n        fullWidth: 1,\n        fullHeight: 1,\n        offsetX: 0,\n        offsetY: 0,\n        width: 1,\n        height: 1\n      };\n    }\n\n    this.view.enabled = true;\n    this.view.fullWidth = fullWidth;\n    this.view.fullHeight = fullHeight;\n    this.view.offsetX = x;\n    this.view.offsetY = y;\n    this.view.width = width;\n    this.view.height = height;\n    this.updateProjectionMatrix();\n  },\n  clearViewOffset: function () {\n    if (this.view !== null) {\n      this.view.enabled = false;\n    }\n\n    this.updateProjectionMatrix();\n  },\n  updateProjectionMatrix: function () {\n    var dx = (this.right - this.left) / (2 * this.zoom);\n    var dy = (this.top - this.bottom) / (2 * this.zoom);\n    var cx = (this.right + this.left) / 2;\n    var cy = (this.top + this.bottom) / 2;\n    var left = cx - dx;\n    var right = cx + dx;\n    var top = cy + dy;\n    var bottom = cy - dy;\n\n    if (this.view !== null && this.view.enabled) {\n      var scaleW = (this.right - this.left) / this.view.fullWidth / this.zoom;\n      var scaleH = (this.top - this.bottom) / this.view.fullHeight / this.zoom;\n      left += scaleW * this.view.offsetX;\n      right = left + scaleW * this.view.width;\n      top -= scaleH * this.view.offsetY;\n      bottom = top - scaleH * this.view.height;\n    }\n\n    this.projectionMatrix.makeOrthographic(left, right, top, bottom, this.near, this.far);\n    this.projectionMatrixInverse.getInverse(this.projectionMatrix);\n  },\n  toJSON: function (meta) {\n    var data = Object3D.prototype.toJSON.call(this, meta);\n    data.object.zoom = this.zoom;\n    data.object.left = this.left;\n    data.object.right = this.right;\n    data.object.top = this.top;\n    data.object.bottom = this.bottom;\n    data.object.near = this.near;\n    data.object.far = this.far;\n    if (this.view !== null) data.object.view = Object.assign({}, this.view);\n    return data;\n  }\n});\n\nfunction DirectionalLightShadow() {}\n\nfunction DirectionalLight() {}\n\nfunction AmbientLight() {}\n\nfunction RectAreaLight() {}\n\nfunction MaterialLoader() {}\n/**\n * @author Don McCurdy / https://www.donmccurdy.com\n */\n\n\nvar LoaderUtils = {\n  decodeText: function (array) {\n    if (typeof TextDecoder !== 'undefined') {\n      return new TextDecoder().decode(array);\n    } // Avoid the String.fromCharCode.apply(null, array) shortcut, which\n    // throws a \"maximum call stack size exceeded\" error for large arrays.\n\n\n    var s = '';\n\n    for (var i = 0, il = array.length; i < il; i++) {\n      // Implicitly assumes little-endian.\n      s += String.fromCharCode(array[i]);\n    }\n\n    try {\n      // merges multi-byte utf-8 characters.\n      return decodeURIComponent(escape(s));\n    } catch (e) {\n      // see #16358\n      return s;\n    }\n  },\n  extractUrlBase: function (url) {\n    var index = url.lastIndexOf('/');\n    if (index === -1) return './';\n    return url.substr(0, index + 1);\n  }\n};\n/**\n * @author benaadams / https://twitter.com/ben_a_adams\n */\n\nfunction InstancedBufferGeometry() {\n  BufferGeometry.call(this);\n  this.type = 'InstancedBufferGeometry';\n  this.maxInstancedCount = undefined;\n}\n\nInstancedBufferGeometry.prototype = Object.assign(Object.create(BufferGeometry.prototype), {\n  constructor: InstancedBufferGeometry,\n  isInstancedBufferGeometry: true,\n  copy: function (source) {\n    BufferGeometry.prototype.copy.call(this, source);\n    this.maxInstancedCount = source.maxInstancedCount;\n    return this;\n  },\n  clone: function () {\n    return new this.constructor().copy(this);\n  },\n  toJSON: function () {\n    var data = BufferGeometry.prototype.toJSON.call(this);\n    data.maxInstancedCount = this.maxInstancedCount;\n    data.isInstancedBufferGeometry = true;\n    return data;\n  }\n});\n/**\n * @author benaadams / https://twitter.com/ben_a_adams\n */\n\nfunction InstancedBufferAttribute(array, itemSize, normalized, meshPerAttribute) {\n  if (typeof normalized === 'number') {\n    meshPerAttribute = normalized;\n    normalized = false;\n    console.error('THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.');\n  }\n\n  BufferAttribute.call(this, array, itemSize, normalized);\n  this.meshPerAttribute = meshPerAttribute || 1;\n}\n\nInstancedBufferAttribute.prototype = Object.assign(Object.create(BufferAttribute.prototype), {\n  constructor: InstancedBufferAttribute,\n  isInstancedBufferAttribute: true,\n  copy: function (source) {\n    BufferAttribute.prototype.copy.call(this, source);\n    this.meshPerAttribute = source.meshPerAttribute;\n    return this;\n  },\n  toJSON: function () {\n    var data = BufferAttribute.prototype.toJSON.call(this);\n    data.meshPerAttribute = this.meshPerAttribute;\n    data.isInstancedBufferAttribute = true;\n    return data;\n  }\n});\n\nfunction BufferGeometryLoader() {}\n\nfunction ObjectLoader() {}\n/**\n * @author thespite / http://clicktorelease.com/\n */\n\n\nfunction ImageBitmapLoader(manager) {\n  if (typeof createImageBitmap === 'undefined') {\n    console.warn('THREE.ImageBitmapLoader: createImageBitmap() not supported.');\n  }\n\n  if (typeof fetch === 'undefined') {\n    console.warn('THREE.ImageBitmapLoader: fetch() not supported.');\n  }\n\n  Loader.call(this, manager);\n  this.options = undefined;\n}\n\nImageBitmapLoader.prototype = Object.assign(Object.create(Loader.prototype), {\n  constructor: ImageBitmapLoader,\n  setOptions: function setOptions(options) {\n    this.options = options;\n    return this;\n  },\n  load: function (url, onLoad, onProgress, onError) {\n    if (url === undefined) url = '';\n    if (this.path !== undefined) url = this.path + url;\n    url = this.manager.resolveURL(url);\n    var scope = this;\n    var cached = Cache.get(url);\n\n    if (cached !== undefined) {\n      scope.manager.itemStart(url);\n      setTimeout(function () {\n        if (onLoad) onLoad(cached);\n        scope.manager.itemEnd(url);\n      }, 0);\n      return cached;\n    }\n\n    fetch(url).then(function (res) {\n      return res.blob();\n    }).then(function (blob) {\n      if (scope.options === undefined) {\n        // Workaround for FireFox. It causes an error if you pass options.\n        return createImageBitmap(blob);\n      } else {\n        return createImageBitmap(blob, scope.options);\n      }\n    }).then(function (imageBitmap) {\n      Cache.add(url, imageBitmap);\n      if (onLoad) onLoad(imageBitmap);\n      scope.manager.itemEnd(url);\n    }).catch(function (e) {\n      if (onError) onError(e);\n      scope.manager.itemError(url);\n      scope.manager.itemEnd(url);\n    });\n    scope.manager.itemStart(url);\n  }\n});\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * minimal class for proxing functions to Path. Replaces old \"extractSubpaths()\"\n **/\n\nfunction ShapePath() {\n  this.type = 'ShapePath';\n  this.color = new Color();\n  this.subPaths = [];\n  this.currentPath = null;\n}\n\nObject.assign(ShapePath.prototype, {\n  moveTo: function (x, y) {\n    this.currentPath = new Path();\n    this.subPaths.push(this.currentPath);\n    this.currentPath.moveTo(x, y);\n    return this;\n  },\n  lineTo: function (x, y) {\n    this.currentPath.lineTo(x, y);\n    return this;\n  },\n  quadraticCurveTo: function (aCPx, aCPy, aX, aY) {\n    this.currentPath.quadraticCurveTo(aCPx, aCPy, aX, aY);\n    return this;\n  },\n  bezierCurveTo: function (aCP1x, aCP1y, aCP2x, aCP2y, aX, aY) {\n    this.currentPath.bezierCurveTo(aCP1x, aCP1y, aCP2x, aCP2y, aX, aY);\n    return this;\n  },\n  splineThru: function (pts) {\n    this.currentPath.splineThru(pts);\n    return this;\n  },\n  toShapes: function (isCCW, noHoles) {\n    function toShapesNoHoles(inSubpaths) {\n      var shapes = [];\n\n      for (var i = 0, l = inSubpaths.length; i < l; i++) {\n        var tmpPath = inSubpaths[i];\n        var tmpShape = new Shape();\n        tmpShape.curves = tmpPath.curves;\n        shapes.push(tmpShape);\n      }\n\n      return shapes;\n    }\n\n    function isPointInsidePolygon(inPt, inPolygon) {\n      var polyLen = inPolygon.length; // inPt on polygon contour => immediate success    or\n      // toggling of inside/outside at every single! intersection point of an edge\n      //  with the horizontal line through inPt, left of inPt\n      //  not counting lowerY endpoints of edges and whole edges on that line\n\n      var inside = false;\n\n      for (var p = polyLen - 1, q = 0; q < polyLen; p = q++) {\n        var edgeLowPt = inPolygon[p];\n        var edgeHighPt = inPolygon[q];\n        var edgeDx = edgeHighPt.x - edgeLowPt.x;\n        var edgeDy = edgeHighPt.y - edgeLowPt.y;\n\n        if (Math.abs(edgeDy) > Number.EPSILON) {\n          // not parallel\n          if (edgeDy < 0) {\n            edgeLowPt = inPolygon[q];\n            edgeDx = -edgeDx;\n            edgeHighPt = inPolygon[p];\n            edgeDy = -edgeDy;\n          }\n\n          if (inPt.y < edgeLowPt.y || inPt.y > edgeHighPt.y) continue;\n\n          if (inPt.y === edgeLowPt.y) {\n            if (inPt.x === edgeLowPt.x) return true; // inPt is on contour ?\n            // continue;\t\t\t\t// no intersection or edgeLowPt => doesn't count !!!\n          } else {\n            var perpEdge = edgeDy * (inPt.x - edgeLowPt.x) - edgeDx * (inPt.y - edgeLowPt.y);\n            if (perpEdge === 0) return true; // inPt is on contour ?\n\n            if (perpEdge < 0) continue;\n            inside = !inside; // true intersection left of inPt\n          }\n        } else {\n          // parallel or collinear\n          if (inPt.y !== edgeLowPt.y) continue; // parallel\n          // edge lies on the same horizontal line as inPt\n\n          if (edgeHighPt.x <= inPt.x && inPt.x <= edgeLowPt.x || edgeLowPt.x <= inPt.x && inPt.x <= edgeHighPt.x) return true; // inPt: Point on contour !\n          // continue;\n        }\n      }\n\n      return inside;\n    }\n\n    var isClockWise = ShapeUtils.isClockWise;\n    var subPaths = this.subPaths;\n    if (subPaths.length === 0) return [];\n    if (noHoles === true) return toShapesNoHoles(subPaths);\n    var solid,\n        tmpPath,\n        tmpShape,\n        shapes = [];\n\n    if (subPaths.length === 1) {\n      tmpPath = subPaths[0];\n      tmpShape = new Shape();\n      tmpShape.curves = tmpPath.curves;\n      shapes.push(tmpShape);\n      return shapes;\n    }\n\n    var holesFirst = !isClockWise(subPaths[0].getPoints());\n    holesFirst = isCCW ? !holesFirst : holesFirst; // console.log(\"Holes first\", holesFirst);\n\n    var betterShapeHoles = [];\n    var newShapes = [];\n    var newShapeHoles = [];\n    var mainIdx = 0;\n    var tmpPoints;\n    newShapes[mainIdx] = undefined;\n    newShapeHoles[mainIdx] = [];\n\n    for (var i = 0, l = subPaths.length; i < l; i++) {\n      tmpPath = subPaths[i];\n      tmpPoints = tmpPath.getPoints();\n      solid = isClockWise(tmpPoints);\n      solid = isCCW ? !solid : solid;\n\n      if (solid) {\n        if (!holesFirst && newShapes[mainIdx]) mainIdx++;\n        newShapes[mainIdx] = {\n          s: new Shape(),\n          p: tmpPoints\n        };\n        newShapes[mainIdx].s.curves = tmpPath.curves;\n        if (holesFirst) mainIdx++;\n        newShapeHoles[mainIdx] = []; //console.log('cw', i);\n      } else {\n        newShapeHoles[mainIdx].push({\n          h: tmpPath,\n          p: tmpPoints[0]\n        }); //console.log('ccw', i);\n      }\n    } // only Holes? -> probably all Shapes with wrong orientation\n\n\n    if (!newShapes[0]) return toShapesNoHoles(subPaths);\n\n    if (newShapes.length > 1) {\n      var ambiguous = false;\n      var toChange = [];\n\n      for (var sIdx = 0, sLen = newShapes.length; sIdx < sLen; sIdx++) {\n        betterShapeHoles[sIdx] = [];\n      }\n\n      for (var sIdx = 0, sLen = newShapes.length; sIdx < sLen; sIdx++) {\n        var sho = newShapeHoles[sIdx];\n\n        for (var hIdx = 0; hIdx < sho.length; hIdx++) {\n          var ho = sho[hIdx];\n          var hole_unassigned = true;\n\n          for (var s2Idx = 0; s2Idx < newShapes.length; s2Idx++) {\n            if (isPointInsidePolygon(ho.p, newShapes[s2Idx].p)) {\n              if (sIdx !== s2Idx) toChange.push({\n                froms: sIdx,\n                tos: s2Idx,\n                hole: hIdx\n              });\n\n              if (hole_unassigned) {\n                hole_unassigned = false;\n                betterShapeHoles[s2Idx].push(ho);\n              } else {\n                ambiguous = true;\n              }\n            }\n          }\n\n          if (hole_unassigned) {\n            betterShapeHoles[sIdx].push(ho);\n          }\n        }\n      } // console.log(\"ambiguous: \", ambiguous);\n\n\n      if (toChange.length > 0) {\n        // console.log(\"to change: \", toChange);\n        if (!ambiguous) newShapeHoles = betterShapeHoles;\n      }\n    }\n\n    var tmpHoles;\n\n    for (var i = 0, il = newShapes.length; i < il; i++) {\n      tmpShape = newShapes[i].s;\n      shapes.push(tmpShape);\n      tmpHoles = newShapeHoles[i];\n\n      for (var j = 0, jl = tmpHoles.length; j < jl; j++) {\n        tmpShape.holes.push(tmpHoles[j].h);\n      }\n    } //console.log(\"shape\", shapes);\n\n\n    return shapes;\n  }\n});\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction Font(data) {\n  this.type = 'Font';\n  this.data = data;\n}\n\nObject.assign(Font.prototype, {\n  isFont: true,\n  generateShapes: function (text, size) {\n    if (size === undefined) size = 100;\n    var shapes = [];\n    var paths = createPaths(text, size, this.data);\n\n    for (var p = 0, pl = paths.length; p < pl; p++) {\n      Array.prototype.push.apply(shapes, paths[p].toShapes());\n    }\n\n    return shapes;\n  }\n});\n\nfunction createPaths(text, size, data) {\n  var chars = Array.from ? Array.from(text) : String(text).split(''); // workaround for IE11, see #13988\n\n  var scale = size / data.resolution;\n  var line_height = (data.boundingBox.yMax - data.boundingBox.yMin + data.underlineThickness) * scale;\n  var paths = [];\n  var offsetX = 0,\n      offsetY = 0;\n\n  for (var i = 0; i < chars.length; i++) {\n    var char = chars[i];\n\n    if (char === '\\n') {\n      offsetX = 0;\n      offsetY -= line_height;\n    } else {\n      var ret = createPath(char, scale, offsetX, offsetY, data);\n      offsetX += ret.offsetX;\n      paths.push(ret.path);\n    }\n  }\n\n  return paths;\n}\n\nfunction createPath(char, scale, offsetX, offsetY, data) {\n  var glyph = data.glyphs[char] || data.glyphs['?'];\n\n  if (!glyph) {\n    console.error('THREE.Font: character \"' + char + '\" does not exists in font family ' + data.familyName + '.');\n    return;\n  }\n\n  var path = new ShapePath();\n  var x, y, cpx, cpy, cpx1, cpy1, cpx2, cpy2;\n\n  if (glyph.o) {\n    var outline = glyph._cachedOutline || (glyph._cachedOutline = glyph.o.split(' '));\n\n    for (var i = 0, l = outline.length; i < l;) {\n      var action = outline[i++];\n\n      switch (action) {\n        case 'm':\n          // moveTo\n          x = outline[i++] * scale + offsetX;\n          y = outline[i++] * scale + offsetY;\n          path.moveTo(x, y);\n          break;\n\n        case 'l':\n          // lineTo\n          x = outline[i++] * scale + offsetX;\n          y = outline[i++] * scale + offsetY;\n          path.lineTo(x, y);\n          break;\n\n        case 'q':\n          // quadraticCurveTo\n          cpx = outline[i++] * scale + offsetX;\n          cpy = outline[i++] * scale + offsetY;\n          cpx1 = outline[i++] * scale + offsetX;\n          cpy1 = outline[i++] * scale + offsetY;\n          path.quadraticCurveTo(cpx1, cpy1, cpx, cpy);\n          break;\n\n        case 'b':\n          // bezierCurveTo\n          cpx = outline[i++] * scale + offsetX;\n          cpy = outline[i++] * scale + offsetY;\n          cpx1 = outline[i++] * scale + offsetX;\n          cpy1 = outline[i++] * scale + offsetY;\n          cpx2 = outline[i++] * scale + offsetX;\n          cpy2 = outline[i++] * scale + offsetY;\n          path.bezierCurveTo(cpx1, cpy1, cpx2, cpy2, cpx, cpy);\n          break;\n      }\n    }\n  }\n\n  return {\n    offsetX: glyph.ha * scale,\n    path: path\n  };\n}\n\nfunction FontLoader() {}\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\n\nvar _context;\n\nvar AudioContext = {\n  getContext: function () {\n    if (_context === undefined) {\n      _context = new (window.AudioContext || window.webkitAudioContext)();\n    }\n\n    return _context;\n  },\n  setContext: function (value) {\n    _context = value;\n  }\n};\n\nfunction AudioLoader() {}\n\nfunction SphericalHarmonics3() {}\n\nfunction LightProbe() {}\n/**\n * @author WestLangley / http://github.com/WestLangley\n */\n\n\nfunction HemisphereLightProbe(skyColor, groundColor, intensity) {\n  LightProbe.call(this, undefined, intensity);\n  var color1 = new Color().set(skyColor);\n  var color2 = new Color().set(groundColor);\n  var sky = new Vector3(color1.r, color1.g, color1.b);\n  var ground = new Vector3(color2.r, color2.g, color2.b); // without extra factor of PI in the shader, should = 1 / Math.sqrt( Math.PI );\n\n  var c0 = Math.sqrt(Math.PI);\n  var c1 = c0 * Math.sqrt(0.75);\n  this.sh.coefficients[0].copy(sky).add(ground).multiplyScalar(c0);\n  this.sh.coefficients[1].copy(sky).sub(ground).multiplyScalar(c1);\n}\n\nHemisphereLightProbe.prototype = Object.assign(Object.create(LightProbe.prototype), {\n  constructor: HemisphereLightProbe,\n  isHemisphereLightProbe: true,\n  copy: function (source) {\n    // modifying colors not currently supported\n    LightProbe.prototype.copy.call(this, source);\n    return this;\n  },\n  toJSON: function (meta) {\n    var data = LightProbe.prototype.toJSON.call(this, meta); // data.sh = this.sh.toArray(); // todo\n\n    return data;\n  }\n});\n/**\n * @author WestLangley / http://github.com/WestLangley\n */\n\nfunction AmbientLightProbe(color, intensity) {\n  LightProbe.call(this, undefined, intensity);\n  var color1 = new Color().set(color); // without extra factor of PI in the shader, would be 2 / Math.sqrt( Math.PI );\n\n  this.sh.coefficients[0].set(color1.r, color1.g, color1.b).multiplyScalar(2 * Math.sqrt(Math.PI));\n}\n\nAmbientLightProbe.prototype = Object.assign(Object.create(LightProbe.prototype), {\n  constructor: AmbientLightProbe,\n  isAmbientLightProbe: true,\n  copy: function (source) {\n    // modifying color not currently supported\n    LightProbe.prototype.copy.call(this, source);\n    return this;\n  },\n  toJSON: function (meta) {\n    var data = LightProbe.prototype.toJSON.call(this, meta); // data.sh = this.sh.toArray(); // todo\n\n    return data;\n  }\n});\n\nvar _eyeRight = new Matrix4();\n\nvar _eyeLeft = new Matrix4();\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\n\nfunction StereoCamera() {\n  this.type = 'StereoCamera';\n  this.aspect = 1;\n  this.eyeSep = 0.064;\n  this.cameraL = new PerspectiveCamera();\n  this.cameraL.layers.enable(1);\n  this.cameraL.matrixAutoUpdate = false;\n  this.cameraR = new PerspectiveCamera();\n  this.cameraR.layers.enable(2);\n  this.cameraR.matrixAutoUpdate = false;\n  this._cache = {\n    focus: null,\n    fov: null,\n    aspect: null,\n    near: null,\n    far: null,\n    zoom: null,\n    eyeSep: null\n  };\n}\n\nObject.assign(StereoCamera.prototype, {\n  update: function (camera) {\n    var cache = this._cache;\n    var needsUpdate = cache.focus !== camera.focus || cache.fov !== camera.fov || cache.aspect !== camera.aspect * this.aspect || cache.near !== camera.near || cache.far !== camera.far || cache.zoom !== camera.zoom || cache.eyeSep !== this.eyeSep;\n\n    if (needsUpdate) {\n      cache.focus = camera.focus;\n      cache.fov = camera.fov;\n      cache.aspect = camera.aspect * this.aspect;\n      cache.near = camera.near;\n      cache.far = camera.far;\n      cache.zoom = camera.zoom;\n      cache.eyeSep = this.eyeSep; // Off-axis stereoscopic effect based on\n      // http://paulbourke.net/stereographics/stereorender/\n\n      var projectionMatrix = camera.projectionMatrix.clone();\n      var eyeSepHalf = cache.eyeSep / 2;\n      var eyeSepOnProjection = eyeSepHalf * cache.near / cache.focus;\n      var ymax = cache.near * Math.tan(MathUtils.DEG2RAD * cache.fov * 0.5) / cache.zoom;\n      var xmin, xmax; // translate xOffset\n\n      _eyeLeft.elements[12] = -eyeSepHalf;\n      _eyeRight.elements[12] = eyeSepHalf; // for left eye\n\n      xmin = -ymax * cache.aspect + eyeSepOnProjection;\n      xmax = ymax * cache.aspect + eyeSepOnProjection;\n      projectionMatrix.elements[0] = 2 * cache.near / (xmax - xmin);\n      projectionMatrix.elements[8] = (xmax + xmin) / (xmax - xmin);\n      this.cameraL.projectionMatrix.copy(projectionMatrix); // for right eye\n\n      xmin = -ymax * cache.aspect - eyeSepOnProjection;\n      xmax = ymax * cache.aspect - eyeSepOnProjection;\n      projectionMatrix.elements[0] = 2 * cache.near / (xmax - xmin);\n      projectionMatrix.elements[8] = (xmax + xmin) / (xmax - xmin);\n      this.cameraR.projectionMatrix.copy(projectionMatrix);\n    }\n\n    this.cameraL.matrixWorld.copy(camera.matrixWorld).multiply(_eyeLeft);\n    this.cameraR.matrixWorld.copy(camera.matrixWorld).multiply(_eyeRight);\n  }\n});\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction Clock(autoStart) {\n  this.autoStart = autoStart !== undefined ? autoStart : true;\n  this.startTime = 0;\n  this.oldTime = 0;\n  this.elapsedTime = 0;\n  this.running = false;\n}\n\nObject.assign(Clock.prototype, {\n  start: function () {\n    this.startTime = (typeof performance === 'undefined' ? Date : performance).now(); // see #10732\n\n    this.oldTime = this.startTime;\n    this.elapsedTime = 0;\n    this.running = true;\n  },\n  stop: function () {\n    this.getElapsedTime();\n    this.running = false;\n    this.autoStart = false;\n  },\n  getElapsedTime: function () {\n    this.getDelta();\n    return this.elapsedTime;\n  },\n  getDelta: function () {\n    var diff = 0;\n\n    if (this.autoStart && !this.running) {\n      this.start();\n      return 0;\n    }\n\n    if (this.running) {\n      var newTime = (typeof performance === 'undefined' ? Date : performance).now();\n      diff = (newTime - this.oldTime) / 1000;\n      this.oldTime = newTime;\n      this.elapsedTime += diff;\n    }\n\n    return diff;\n  }\n});\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nvar _position$2 = new Vector3();\n\nvar _quaternion$3 = new Quaternion();\n\nvar _scale$1 = new Vector3();\n\nvar _orientation = new Vector3();\n\nfunction AudioListener() {\n  Object3D.call(this);\n  this.type = 'AudioListener';\n  this.context = AudioContext.getContext();\n  this.gain = this.context.createGain();\n  this.gain.connect(this.context.destination);\n  this.filter = null;\n  this.timeDelta = 0; // private\n\n  this._clock = new Clock();\n}\n\nAudioListener.prototype = Object.assign(Object.create(Object3D.prototype), {\n  constructor: AudioListener,\n  getInput: function () {\n    return this.gain;\n  },\n  removeFilter: function () {\n    if (this.filter !== null) {\n      this.gain.disconnect(this.filter);\n      this.filter.disconnect(this.context.destination);\n      this.gain.connect(this.context.destination);\n      this.filter = null;\n    }\n\n    return this;\n  },\n  getFilter: function () {\n    return this.filter;\n  },\n  setFilter: function (value) {\n    if (this.filter !== null) {\n      this.gain.disconnect(this.filter);\n      this.filter.disconnect(this.context.destination);\n    } else {\n      this.gain.disconnect(this.context.destination);\n    }\n\n    this.filter = value;\n    this.gain.connect(this.filter);\n    this.filter.connect(this.context.destination);\n    return this;\n  },\n  getMasterVolume: function () {\n    return this.gain.gain.value;\n  },\n  setMasterVolume: function (value) {\n    this.gain.gain.setTargetAtTime(value, this.context.currentTime, 0.01);\n    return this;\n  },\n  updateMatrixWorld: function (force) {\n    Object3D.prototype.updateMatrixWorld.call(this, force);\n    var listener = this.context.listener;\n    var up = this.up;\n    this.timeDelta = this._clock.getDelta();\n    this.matrixWorld.decompose(_position$2, _quaternion$3, _scale$1);\n\n    _orientation.set(0, 0, -1).applyQuaternion(_quaternion$3);\n\n    if (listener.positionX) {\n      // code path for Chrome (see #14393)\n      var endTime = this.context.currentTime + this.timeDelta;\n      listener.positionX.linearRampToValueAtTime(_position$2.x, endTime);\n      listener.positionY.linearRampToValueAtTime(_position$2.y, endTime);\n      listener.positionZ.linearRampToValueAtTime(_position$2.z, endTime);\n      listener.forwardX.linearRampToValueAtTime(_orientation.x, endTime);\n      listener.forwardY.linearRampToValueAtTime(_orientation.y, endTime);\n      listener.forwardZ.linearRampToValueAtTime(_orientation.z, endTime);\n      listener.upX.linearRampToValueAtTime(up.x, endTime);\n      listener.upY.linearRampToValueAtTime(up.y, endTime);\n      listener.upZ.linearRampToValueAtTime(up.z, endTime);\n    } else {\n      listener.setPosition(_position$2.x, _position$2.y, _position$2.z);\n      listener.setOrientation(_orientation.x, _orientation.y, _orientation.z, up.x, up.y, up.z);\n    }\n  }\n});\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author Reece Aaron Lecrivain / http://reecenotes.com/\n */\n\nfunction Audio(listener) {\n  Object3D.call(this);\n  this.type = 'Audio';\n  this.listener = listener;\n  this.context = listener.context;\n  this.gain = this.context.createGain();\n  this.gain.connect(listener.getInput());\n  this.autoplay = false;\n  this.buffer = null;\n  this.detune = 0;\n  this.loop = false;\n  this.loopStart = 0;\n  this.loopEnd = 0;\n  this.offset = 0;\n  this.duration = undefined;\n  this.playbackRate = 1;\n  this.isPlaying = false;\n  this.hasPlaybackControl = true;\n  this.sourceType = 'empty';\n  this._startedAt = 0;\n  this._pausedAt = 0;\n  this.filters = [];\n}\n\nAudio.prototype = Object.assign(Object.create(Object3D.prototype), {\n  constructor: Audio,\n  getOutput: function () {\n    return this.gain;\n  },\n  setNodeSource: function (audioNode) {\n    this.hasPlaybackControl = false;\n    this.sourceType = 'audioNode';\n    this.source = audioNode;\n    this.connect();\n    return this;\n  },\n  setMediaElementSource: function (mediaElement) {\n    this.hasPlaybackControl = false;\n    this.sourceType = 'mediaNode';\n    this.source = this.context.createMediaElementSource(mediaElement);\n    this.connect();\n    return this;\n  },\n  setMediaStreamSource: function (mediaStream) {\n    this.hasPlaybackControl = false;\n    this.sourceType = 'mediaStreamNode';\n    this.source = this.context.createMediaStreamSource(mediaStream);\n    this.connect();\n    return this;\n  },\n  setBuffer: function (audioBuffer) {\n    this.buffer = audioBuffer;\n    this.sourceType = 'buffer';\n    if (this.autoplay) this.play();\n    return this;\n  },\n  play: function (delay) {\n    if (delay === undefined) delay = 0;\n\n    if (this.isPlaying === true) {\n      console.warn('THREE.Audio: Audio is already playing.');\n      return;\n    }\n\n    if (this.hasPlaybackControl === false) {\n      console.warn('THREE.Audio: this Audio has no playback control.');\n      return;\n    }\n\n    this._startedAt = this.context.currentTime + delay;\n    var source = this.context.createBufferSource();\n    source.buffer = this.buffer;\n    source.loop = this.loop;\n    source.loopStart = this.loopStart;\n    source.loopEnd = this.loopEnd;\n    source.onended = this.onEnded.bind(this);\n    source.start(this._startedAt, this._pausedAt + this.offset, this.duration);\n    this.isPlaying = true;\n    this.source = source;\n    this.setDetune(this.detune);\n    this.setPlaybackRate(this.playbackRate);\n    return this.connect();\n  },\n  pause: function () {\n    if (this.hasPlaybackControl === false) {\n      console.warn('THREE.Audio: this Audio has no playback control.');\n      return;\n    }\n\n    if (this.isPlaying === true) {\n      this._pausedAt += Math.max(this.context.currentTime - this._startedAt, 0) * this.playbackRate;\n      this.source.stop();\n      this.source.onended = null;\n      this.isPlaying = false;\n    }\n\n    return this;\n  },\n  stop: function () {\n    if (this.hasPlaybackControl === false) {\n      console.warn('THREE.Audio: this Audio has no playback control.');\n      return;\n    }\n\n    this._pausedAt = 0;\n    this.source.stop();\n    this.source.onended = null;\n    this.isPlaying = false;\n    return this;\n  },\n  connect: function () {\n    if (this.filters.length > 0) {\n      this.source.connect(this.filters[0]);\n\n      for (var i = 1, l = this.filters.length; i < l; i++) {\n        this.filters[i - 1].connect(this.filters[i]);\n      }\n\n      this.filters[this.filters.length - 1].connect(this.getOutput());\n    } else {\n      this.source.connect(this.getOutput());\n    }\n\n    return this;\n  },\n  disconnect: function () {\n    if (this.filters.length > 0) {\n      this.source.disconnect(this.filters[0]);\n\n      for (var i = 1, l = this.filters.length; i < l; i++) {\n        this.filters[i - 1].disconnect(this.filters[i]);\n      }\n\n      this.filters[this.filters.length - 1].disconnect(this.getOutput());\n    } else {\n      this.source.disconnect(this.getOutput());\n    }\n\n    return this;\n  },\n  getFilters: function () {\n    return this.filters;\n  },\n  setFilters: function (value) {\n    if (!value) value = [];\n\n    if (this.isPlaying === true) {\n      this.disconnect();\n      this.filters = value;\n      this.connect();\n    } else {\n      this.filters = value;\n    }\n\n    return this;\n  },\n  setDetune: function (value) {\n    this.detune = value;\n    if (this.source.detune === undefined) return; // only set detune when available\n\n    if (this.isPlaying === true) {\n      this.source.detune.setTargetAtTime(this.detune, this.context.currentTime, 0.01);\n    }\n\n    return this;\n  },\n  getDetune: function () {\n    return this.detune;\n  },\n  getFilter: function () {\n    return this.getFilters()[0];\n  },\n  setFilter: function (filter) {\n    return this.setFilters(filter ? [filter] : []);\n  },\n  setPlaybackRate: function (value) {\n    if (this.hasPlaybackControl === false) {\n      console.warn('THREE.Audio: this Audio has no playback control.');\n      return;\n    }\n\n    this.playbackRate = value;\n\n    if (this.isPlaying === true) {\n      this.source.playbackRate.setTargetAtTime(this.playbackRate, this.context.currentTime, 0.01);\n    }\n\n    return this;\n  },\n  getPlaybackRate: function () {\n    return this.playbackRate;\n  },\n  onEnded: function () {\n    this.isPlaying = false;\n  },\n  getLoop: function () {\n    if (this.hasPlaybackControl === false) {\n      console.warn('THREE.Audio: this Audio has no playback control.');\n      return false;\n    }\n\n    return this.loop;\n  },\n  setLoop: function (value) {\n    if (this.hasPlaybackControl === false) {\n      console.warn('THREE.Audio: this Audio has no playback control.');\n      return;\n    }\n\n    this.loop = value;\n\n    if (this.isPlaying === true) {\n      this.source.loop = this.loop;\n    }\n\n    return this;\n  },\n  setLoopStart: function (value) {\n    this.loopStart = value;\n    return this;\n  },\n  setLoopEnd: function (value) {\n    this.loopEnd = value;\n    return this;\n  },\n  getVolume: function () {\n    return this.gain.gain.value;\n  },\n  setVolume: function (value) {\n    this.gain.gain.setTargetAtTime(value, this.context.currentTime, 0.01);\n    return this;\n  }\n});\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nvar _position$3 = new Vector3();\n\nvar _quaternion$4 = new Quaternion();\n\nvar _scale$2 = new Vector3();\n\nvar _orientation$1 = new Vector3();\n\nfunction PositionalAudio(listener) {\n  Audio.call(this, listener);\n  this.panner = this.context.createPanner();\n  this.panner.panningModel = 'HRTF';\n  this.panner.connect(this.gain);\n}\n\nPositionalAudio.prototype = Object.assign(Object.create(Audio.prototype), {\n  constructor: PositionalAudio,\n  getOutput: function () {\n    return this.panner;\n  },\n  getRefDistance: function () {\n    return this.panner.refDistance;\n  },\n  setRefDistance: function (value) {\n    this.panner.refDistance = value;\n    return this;\n  },\n  getRolloffFactor: function () {\n    return this.panner.rolloffFactor;\n  },\n  setRolloffFactor: function (value) {\n    this.panner.rolloffFactor = value;\n    return this;\n  },\n  getDistanceModel: function () {\n    return this.panner.distanceModel;\n  },\n  setDistanceModel: function (value) {\n    this.panner.distanceModel = value;\n    return this;\n  },\n  getMaxDistance: function () {\n    return this.panner.maxDistance;\n  },\n  setMaxDistance: function (value) {\n    this.panner.maxDistance = value;\n    return this;\n  },\n  setDirectionalCone: function (coneInnerAngle, coneOuterAngle, coneOuterGain) {\n    this.panner.coneInnerAngle = coneInnerAngle;\n    this.panner.coneOuterAngle = coneOuterAngle;\n    this.panner.coneOuterGain = coneOuterGain;\n    return this;\n  },\n  updateMatrixWorld: function (force) {\n    Object3D.prototype.updateMatrixWorld.call(this, force);\n    if (this.hasPlaybackControl === true && this.isPlaying === false) return;\n    this.matrixWorld.decompose(_position$3, _quaternion$4, _scale$2);\n\n    _orientation$1.set(0, 0, 1).applyQuaternion(_quaternion$4);\n\n    var panner = this.panner;\n\n    if (panner.positionX) {\n      // code path for Chrome and Firefox (see #14393)\n      var endTime = this.context.currentTime + this.listener.timeDelta;\n      panner.positionX.linearRampToValueAtTime(_position$3.x, endTime);\n      panner.positionY.linearRampToValueAtTime(_position$3.y, endTime);\n      panner.positionZ.linearRampToValueAtTime(_position$3.z, endTime);\n      panner.orientationX.linearRampToValueAtTime(_orientation$1.x, endTime);\n      panner.orientationY.linearRampToValueAtTime(_orientation$1.y, endTime);\n      panner.orientationZ.linearRampToValueAtTime(_orientation$1.z, endTime);\n    } else {\n      panner.setPosition(_position$3.x, _position$3.y, _position$3.z);\n      panner.setOrientation(_orientation$1.x, _orientation$1.y, _orientation$1.z);\n    }\n  }\n});\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction AudioAnalyser(audio, fftSize) {\n  this.analyser = audio.context.createAnalyser();\n  this.analyser.fftSize = fftSize !== undefined ? fftSize : 2048;\n  this.data = new Uint8Array(this.analyser.frequencyBinCount);\n  audio.getOutput().connect(this.analyser);\n}\n\nObject.assign(AudioAnalyser.prototype, {\n  getFrequencyData: function () {\n    this.analyser.getByteFrequencyData(this.data);\n    return this.data;\n  },\n  getAverageFrequency: function () {\n    var value = 0,\n        data = this.getFrequencyData();\n\n    for (var i = 0; i < data.length; i++) {\n      value += data[i];\n    }\n\n    return value / data.length;\n  }\n});\n\nfunction PropertyMixer() {}\n/**\n *\n * A reference to a real property in the scene graph.\n *\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n * @author tschw\n */\n// Characters [].:/ are reserved for track binding syntax.\n\n\nvar _RESERVED_CHARS_RE = '\\\\[\\\\]\\\\.:\\\\/';\n\nvar _reservedRe = new RegExp('[' + _RESERVED_CHARS_RE + ']', 'g'); // Attempts to allow node names from any language. ES5's `\\w` regexp matches\n// only latin characters, and the unicode \\p{L} is not yet supported. So\n// instead, we exclude reserved characters and match everything else.\n\n\nvar _wordChar = '[^' + _RESERVED_CHARS_RE + ']';\n\nvar _wordCharOrDot = '[^' + _RESERVED_CHARS_RE.replace('\\\\.', '') + ']'; // Parent directories, delimited by '/' or ':'. Currently unused, but must\n// be matched to parse the rest of the track name.\n\n\nvar _directoryRe = /((?:WC+[\\/:])*)/.source.replace('WC', _wordChar); // Target node. May contain word characters (a-zA-Z0-9_) and '.' or '-'.\n\n\nvar _nodeRe = /(WCOD+)?/.source.replace('WCOD', _wordCharOrDot); // Object on target node, and accessor. May not contain reserved\n// characters. Accessor may contain any character except closing bracket.\n\n\nvar _objectRe = /(?:\\.(WC+)(?:\\[(.+)\\])?)?/.source.replace('WC', _wordChar); // Property and accessor. May not contain reserved characters. Accessor may\n// contain any non-bracket characters.\n\n\nvar _propertyRe = /\\.(WC+)(?:\\[(.+)\\])?/.source.replace('WC', _wordChar);\n\nvar _trackRe = new RegExp('' + '^' + _directoryRe + _nodeRe + _objectRe + _propertyRe + '$');\n\nvar _supportedObjectNames = ['material', 'materials', 'bones'];\n\nfunction Composite() {}\n\nfunction PropertyBinding(rootNode, path, parsedPath) {\n  this.path = path;\n  this.parsedPath = parsedPath || PropertyBinding.parseTrackName(path);\n  this.node = PropertyBinding.findNode(rootNode, this.parsedPath.nodeName) || rootNode;\n  this.rootNode = rootNode;\n}\n\nObject.assign(PropertyBinding, {\n  Composite: Composite,\n  create: function (root, path, parsedPath) {\n    if (!(root && false)) {\n      return new PropertyBinding(root, path, parsedPath);\n    } else {\n      return new PropertyBinding.Composite(root, path, parsedPath);\n    }\n  },\n\n  /**\n   * Replaces spaces with underscores and removes unsupported characters from\n   * node names, to ensure compatibility with parseTrackName().\n   *\n   * @param {string} name Node name to be sanitized.\n   * @return {string}\n   */\n  sanitizeNodeName: function (name) {\n    return name.replace(/\\s/g, '_').replace(_reservedRe, '');\n  },\n  parseTrackName: function (trackName) {\n    var matches = _trackRe.exec(trackName);\n\n    if (!matches) {\n      throw new Error('PropertyBinding: Cannot parse trackName: ' + trackName);\n    }\n\n    var results = {\n      // directoryName: matches[ 1 ], // (tschw) currently unused\n      nodeName: matches[2],\n      objectName: matches[3],\n      objectIndex: matches[4],\n      propertyName: matches[5],\n      // required\n      propertyIndex: matches[6]\n    };\n    var lastDot = results.nodeName && results.nodeName.lastIndexOf('.');\n\n    if (lastDot !== undefined && lastDot !== -1) {\n      var objectName = results.nodeName.substring(lastDot + 1); // Object names must be checked against a whitelist. Otherwise, there\n      // is no way to parse 'foo.bar.baz': 'baz' must be a property, but\n      // 'bar' could be the objectName, or part of a nodeName (which can\n      // include '.' characters).\n\n      if (_supportedObjectNames.indexOf(objectName) !== -1) {\n        results.nodeName = results.nodeName.substring(0, lastDot);\n        results.objectName = objectName;\n      }\n    }\n\n    if (results.propertyName === null || results.propertyName.length === 0) {\n      throw new Error('PropertyBinding: can not parse propertyName from trackName: ' + trackName);\n    }\n\n    return results;\n  },\n  findNode: function (root, nodeName) {\n    if (!nodeName || nodeName === \"\" || nodeName === \".\" || nodeName === -1 || nodeName === root.name || nodeName === root.uuid) {\n      return root;\n    } // search into skeleton bones.\n\n\n    if (root.skeleton) {\n      var bone = root.skeleton.getBoneByName(nodeName);\n\n      if (bone !== undefined) {\n        return bone;\n      }\n    } // search into node subtree.\n\n\n    if (root.children) {\n      var searchNodeSubtree = function (children) {\n        for (var i = 0; i < children.length; i++) {\n          var childNode = children[i];\n\n          if (childNode.name === nodeName || childNode.uuid === nodeName) {\n            return childNode;\n          }\n\n          var result = searchNodeSubtree(childNode.children);\n          if (result) return result;\n        }\n\n        return null;\n      };\n\n      var subTreeNode = searchNodeSubtree(root.children);\n\n      if (subTreeNode) {\n        return subTreeNode;\n      }\n    }\n\n    return null;\n  }\n});\nObject.assign(PropertyBinding.prototype, {\n  // prototype, continued\n  // these are used to \"bind\" a nonexistent property\n  _getValue_unavailable: function () {},\n  _setValue_unavailable: function () {},\n  BindingType: {\n    Direct: 0,\n    EntireArray: 1,\n    ArrayElement: 2,\n    HasFromToArray: 3\n  },\n  Versioning: {\n    None: 0,\n    NeedsUpdate: 1,\n    MatrixWorldNeedsUpdate: 2\n  },\n  GetterByBindingType: [function getValue_direct(buffer, offset) {\n    buffer[offset] = this.node[this.propertyName];\n  }, function getValue_array(buffer, offset) {\n    var source = this.resolvedProperty;\n\n    for (var i = 0, n = source.length; i !== n; ++i) {\n      buffer[offset++] = source[i];\n    }\n  }, function getValue_arrayElement(buffer, offset) {\n    buffer[offset] = this.resolvedProperty[this.propertyIndex];\n  }, function getValue_toArray(buffer, offset) {\n    this.resolvedProperty.toArray(buffer, offset);\n  }],\n  SetterByBindingTypeAndVersioning: [[// Direct\n  function setValue_direct(buffer, offset) {\n    this.targetObject[this.propertyName] = buffer[offset];\n  }, function setValue_direct_setNeedsUpdate(buffer, offset) {\n    this.targetObject[this.propertyName] = buffer[offset];\n    this.targetObject.needsUpdate = true;\n  }, function setValue_direct_setMatrixWorldNeedsUpdate(buffer, offset) {\n    this.targetObject[this.propertyName] = buffer[offset];\n    this.targetObject.matrixWorldNeedsUpdate = true;\n  }], [// EntireArray\n  function setValue_array(buffer, offset) {\n    var dest = this.resolvedProperty;\n\n    for (var i = 0, n = dest.length; i !== n; ++i) {\n      dest[i] = buffer[offset++];\n    }\n  }, function setValue_array_setNeedsUpdate(buffer, offset) {\n    var dest = this.resolvedProperty;\n\n    for (var i = 0, n = dest.length; i !== n; ++i) {\n      dest[i] = buffer[offset++];\n    }\n\n    this.targetObject.needsUpdate = true;\n  }, function setValue_array_setMatrixWorldNeedsUpdate(buffer, offset) {\n    var dest = this.resolvedProperty;\n\n    for (var i = 0, n = dest.length; i !== n; ++i) {\n      dest[i] = buffer[offset++];\n    }\n\n    this.targetObject.matrixWorldNeedsUpdate = true;\n  }], [// ArrayElement\n  function setValue_arrayElement(buffer, offset) {\n    this.resolvedProperty[this.propertyIndex] = buffer[offset];\n  }, function setValue_arrayElement_setNeedsUpdate(buffer, offset) {\n    this.resolvedProperty[this.propertyIndex] = buffer[offset];\n    this.targetObject.needsUpdate = true;\n  }, function setValue_arrayElement_setMatrixWorldNeedsUpdate(buffer, offset) {\n    this.resolvedProperty[this.propertyIndex] = buffer[offset];\n    this.targetObject.matrixWorldNeedsUpdate = true;\n  }], [// HasToFromArray\n  function setValue_fromArray(buffer, offset) {\n    this.resolvedProperty.fromArray(buffer, offset);\n  }, function setValue_fromArray_setNeedsUpdate(buffer, offset) {\n    this.resolvedProperty.fromArray(buffer, offset);\n    this.targetObject.needsUpdate = true;\n  }, function setValue_fromArray_setMatrixWorldNeedsUpdate(buffer, offset) {\n    this.resolvedProperty.fromArray(buffer, offset);\n    this.targetObject.matrixWorldNeedsUpdate = true;\n  }]],\n  getValue: function getValue_unbound(targetArray, offset) {\n    this.bind();\n    this.getValue(targetArray, offset); // Note: This class uses a State pattern on a per-method basis:\n    // 'bind' sets 'this.getValue' / 'setValue' and shadows the\n    // prototype version of these methods with one that represents\n    // the bound state. When the property is not found, the methods\n    // become no-ops.\n  },\n  setValue: function getValue_unbound(sourceArray, offset) {\n    this.bind();\n    this.setValue(sourceArray, offset);\n  },\n  // create getter / setter pair for a property in the scene graph\n  bind: function () {\n    var targetObject = this.node,\n        parsedPath = this.parsedPath,\n        objectName = parsedPath.objectName,\n        propertyName = parsedPath.propertyName,\n        propertyIndex = parsedPath.propertyIndex;\n\n    if (!targetObject) {\n      targetObject = PropertyBinding.findNode(this.rootNode, parsedPath.nodeName) || this.rootNode;\n      this.node = targetObject;\n    } // set fail state so we can just 'return' on error\n\n\n    this.getValue = this._getValue_unavailable;\n    this.setValue = this._setValue_unavailable; // ensure there is a value node\n\n    if (!targetObject) {\n      console.error('THREE.PropertyBinding: Trying to update node for track: ' + this.path + ' but it wasn\\'t found.');\n      return;\n    }\n\n    if (objectName) {\n      var objectIndex = parsedPath.objectIndex; // special cases were we need to reach deeper into the hierarchy to get the face materials....\n\n      switch (objectName) {\n        case 'materials':\n          if (!targetObject.material) {\n            console.error('THREE.PropertyBinding: Can not bind to material as node does not have a material.', this);\n            return;\n          }\n\n          if (!targetObject.material.materials) {\n            console.error('THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.', this);\n            return;\n          }\n\n          targetObject = targetObject.material.materials;\n          break;\n\n        case 'bones':\n          if (!targetObject.skeleton) {\n            console.error('THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.', this);\n            return;\n          } // potential future optimization: skip this if propertyIndex is already an integer\n          // and convert the integer string to a true integer.\n\n\n          targetObject = targetObject.skeleton.bones; // support resolving morphTarget names into indices.\n\n          for (var i = 0; i < targetObject.length; i++) {\n            if (targetObject[i].name === objectIndex) {\n              objectIndex = i;\n              break;\n            }\n          }\n\n          break;\n\n        default:\n          if (targetObject[objectName] === undefined) {\n            console.error('THREE.PropertyBinding: Can not bind to objectName of node undefined.', this);\n            return;\n          }\n\n          targetObject = targetObject[objectName];\n      }\n\n      if (objectIndex !== undefined) {\n        if (targetObject[objectIndex] === undefined) {\n          console.error('THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.', this, targetObject);\n          return;\n        }\n\n        targetObject = targetObject[objectIndex];\n      }\n    } // resolve property\n\n\n    var nodeProperty = targetObject[propertyName];\n\n    if (nodeProperty === undefined) {\n      var nodeName = parsedPath.nodeName;\n      console.error('THREE.PropertyBinding: Trying to update property for track: ' + nodeName + '.' + propertyName + ' but it wasn\\'t found.', targetObject);\n      return;\n    } // determine versioning scheme\n\n\n    var versioning = this.Versioning.None;\n    this.targetObject = targetObject;\n\n    if (targetObject.needsUpdate !== undefined) {\n      // material\n      versioning = this.Versioning.NeedsUpdate;\n    } else if (targetObject.matrixWorldNeedsUpdate !== undefined) {\n      // node transform\n      versioning = this.Versioning.MatrixWorldNeedsUpdate;\n    } // determine how the property gets bound\n\n\n    var bindingType = this.BindingType.Direct;\n\n    if (propertyIndex !== undefined) {\n      // access a sub element of the property array (only primitives are supported right now)\n      if (propertyName === \"morphTargetInfluences\") {\n        // potential optimization, skip this if propertyIndex is already an integer, and convert the integer string to a true integer.\n        // support resolving morphTarget names into indices.\n        if (!targetObject.geometry) {\n          console.error('THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.', this);\n          return;\n        }\n\n        if (targetObject.geometry.isBufferGeometry) {\n          if (!targetObject.geometry.morphAttributes) {\n            console.error('THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.', this);\n            return;\n          }\n\n          for (var i = 0; i < this.node.geometry.morphAttributes.position.length; i++) {\n            if (targetObject.geometry.morphAttributes.position[i].name === propertyIndex) {\n              propertyIndex = i;\n              break;\n            }\n          }\n        } else {\n          {\n            console.error('THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.', this);\n            return;\n          }\n\n          for (var i = 0; i < false.length; i++) {}\n        }\n      }\n\n      bindingType = this.BindingType.ArrayElement;\n      this.resolvedProperty = nodeProperty;\n      this.propertyIndex = propertyIndex;\n    } else if (nodeProperty.fromArray !== undefined && nodeProperty.toArray !== undefined) {\n      // must use copy for Object3D.Euler/Quaternion\n      bindingType = this.BindingType.HasFromToArray;\n      this.resolvedProperty = nodeProperty;\n    } else if (Array.isArray(nodeProperty)) {\n      bindingType = this.BindingType.EntireArray;\n      this.resolvedProperty = nodeProperty;\n    } else {\n      this.propertyName = propertyName;\n    } // select getter / setter\n\n\n    this.getValue = this.GetterByBindingType[bindingType];\n    this.setValue = this.SetterByBindingTypeAndVersioning[bindingType][versioning];\n  },\n  unbind: function () {\n    this.node = null; // back to the prototype version of getValue / setValue\n    // note: avoiding to mutate the shape of 'this' via 'delete'\n\n    this.getValue = this._getValue_unbound;\n    this.setValue = this._setValue_unbound;\n  }\n}); //!\\ DECLARE ALIAS AFTER assign prototype !\n\nObject.assign(PropertyBinding.prototype, {\n  // initial state of these methods that calls 'bind'\n  _getValue_unbound: PropertyBinding.prototype.getValue,\n  _setValue_unbound: PropertyBinding.prototype.setValue\n});\n\nfunction AnimationObjectGroup() {}\n\nfunction AnimationMixer() {}\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\n\nfunction Uniform(value) {\n  if (typeof value === 'string') {\n    console.warn('THREE.Uniform: Type parameter is no longer needed.');\n    value = arguments[1];\n  }\n\n  this.value = value;\n}\n\nUniform.prototype.clone = function () {\n  return new Uniform(this.value.clone === undefined ? this.value : this.value.clone());\n};\n/**\n * @author benaadams / https://twitter.com/ben_a_adams\n */\n\n\nfunction InstancedInterleavedBuffer(array, stride, meshPerAttribute) {\n  InterleavedBuffer.call(this, array, stride);\n  this.meshPerAttribute = meshPerAttribute || 1;\n}\n\nInstancedInterleavedBuffer.prototype = Object.assign(Object.create(InterleavedBuffer.prototype), {\n  constructor: InstancedInterleavedBuffer,\n  isInstancedInterleavedBuffer: true,\n  copy: function (source) {\n    InterleavedBuffer.prototype.copy.call(this, source);\n    this.meshPerAttribute = source.meshPerAttribute;\n    return this;\n  }\n});\n\nfunction Raycaster() {}\n/**\n * @author bhouston / http://clara.io\n * @author WestLangley / http://github.com/WestLangley\n *\n * Ref: https://en.wikipedia.org/wiki/Spherical_coordinate_system\n *\n * The polar angle (phi) is measured from the positive y-axis. The positive y-axis is up.\n * The azimuthal angle (theta) is measured from the positive z-axis.\n */\n\n\nfunction Spherical(radius, phi, theta) {\n  this.radius = radius !== undefined ? radius : 1.0;\n  this.phi = phi !== undefined ? phi : 0; // polar angle\n\n  this.theta = theta !== undefined ? theta : 0; // azimuthal angle\n\n  return this;\n}\n\nObject.assign(Spherical.prototype, {\n  set: function (radius, phi, theta) {\n    this.radius = radius;\n    this.phi = phi;\n    this.theta = theta;\n    return this;\n  },\n  clone: function () {\n    return new this.constructor().copy(this);\n  },\n  copy: function (other) {\n    this.radius = other.radius;\n    this.phi = other.phi;\n    this.theta = other.theta;\n    return this;\n  },\n  // restrict phi to be betwee EPS and PI-EPS\n  makeSafe: function () {\n    var EPS = 0.000001;\n    this.phi = Math.max(EPS, Math.min(Math.PI - EPS, this.phi));\n    return this;\n  },\n  setFromVector3: function (v) {\n    return this.setFromCartesianCoords(v.x, v.y, v.z);\n  },\n  setFromCartesianCoords: function (x, y, z) {\n    this.radius = Math.sqrt(x * x + y * y + z * z);\n\n    if (this.radius === 0) {\n      this.theta = 0;\n      this.phi = 0;\n    } else {\n      this.theta = Math.atan2(x, z);\n      this.phi = Math.acos(MathUtils.clamp(y / this.radius, -1, 1));\n    }\n\n    return this;\n  }\n});\n\nfunction Cylindrical() {}\n\nfunction Box2() {}\n\nfunction Line3() {}\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\n\nfunction ImmediateRenderObject(material) {\n  Object3D.call(this);\n  this.material = material;\n\n  this.render = function ()\n  /* renderCallback */\n  {};\n}\n\nImmediateRenderObject.prototype = Object.create(Object3D.prototype);\nImmediateRenderObject.prototype.constructor = ImmediateRenderObject;\nImmediateRenderObject.prototype.isImmediateRenderObject = true;\n\nfunction SpotLightHelper() {}\n\nvar _boneMatrix = new Matrix4();\n\nvar _matrixWorldInv = new Matrix4();\n\nfunction SkeletonHelper() {}\n\nfunction PointLightHelper() {}\n\nvar _color1 = new Color();\n\nvar _color2 = new Color();\n\nfunction HemisphereLightHelper() {}\n\nfunction GridHelper() {}\n\nfunction PolarGridHelper() {}\n\nfunction DirectionalLightHelper() {}\n\nvar _camera = new Camera();\n\nfunction CameraHelper() {}\n\nfunction BoxHelper() {}\n\nfunction Box3Helper() {}\n\nfunction PlaneHelper() {}\n\nfunction ArrowHelper() {}\n\nfunction AxesHelper() {}\n\nvar _flatCamera = new OrthographicCamera();\n\nfunction PMREMGenerator() {}\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\n\nfunction Face4(a, b, c, d, normal, color, materialIndex) {\n  console.warn('THREE.Face4 has been removed. A THREE.Face3 will be created instead.');\n  return new Face3(a, b, c, normal, color, materialIndex);\n}\n\nvar LineStrip = 0;\nvar LinePieces = 1;\nvar NoColors = 0;\nvar FaceColors = 1;\nvar VertexColors = 2;\n\nfunction MeshFaceMaterial() {}\n\nfunction MultiMaterial() {}\n\nfunction PointCloud() {}\n\nfunction Particle() {}\n\nfunction ParticleSystem() {}\n\nfunction PointCloudMaterial() {}\n\nfunction ParticleBasicMaterial() {}\n\nfunction ParticleSystemMaterial() {}\n\nfunction Vertex() {}\n\nfunction DynamicBufferAttribute() {}\n\nfunction Int8Attribute() {}\n\nfunction Uint8Attribute() {}\n\nfunction Uint8ClampedAttribute() {}\n\nfunction Int16Attribute() {}\n\nfunction Uint16Attribute() {}\n\nfunction Int32Attribute() {}\n\nfunction Uint32Attribute() {}\n\nfunction Float32Attribute() {}\n\nfunction Float64Attribute() {} //\n\n\nCurve.create = function (construct, getPoint) {\n  console.log('THREE.Curve.create() has been deprecated');\n  construct.prototype = Object.create(Curve.prototype);\n  construct.prototype.constructor = construct;\n  construct.prototype.getPoint = getPoint;\n  return construct;\n}; //\n\n\nObject.assign(CurvePath.prototype, {\n  createPointsGeometry: function (divisions) {\n    console.warn('THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.'); // generate geometry from path points (for Line or Points objects)\n\n    var pts = this.getPoints(divisions);\n    return this.createGeometry(pts);\n  },\n  createSpacedPointsGeometry: function (divisions) {\n    console.warn('THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.'); // generate geometry from equidistant sampling along the path\n\n    var pts = this.getSpacedPoints(divisions);\n    return this.createGeometry(pts);\n  },\n  createGeometry: function (points) {\n    console.warn('THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.');\n    var geometry = new Geometry();\n\n    for (var i = 0, l = points.length; i < l; i++) {\n      var point = points[i];\n      geometry.vertices.push(new Vector3(point.x, point.y, point.z || 0));\n    }\n\n    return geometry;\n  }\n}); //\n\nObject.assign(Path.prototype, {\n  fromPoints: function (points) {\n    console.warn('THREE.Path: .fromPoints() has been renamed to .setFromPoints().');\n    return this.setFromPoints(points);\n  }\n}); //\n\nfunction ClosedSplineCurve3(points) {\n  console.warn('THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.');\n  CatmullRomCurve3.call(this, points);\n  this.type = 'catmullrom';\n  this.closed = true;\n}\n\nClosedSplineCurve3.prototype = Object.create(CatmullRomCurve3.prototype); //\n\nfunction SplineCurve3(points) {\n  console.warn('THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.');\n  CatmullRomCurve3.call(this, points);\n  this.type = 'catmullrom';\n}\n\nSplineCurve3.prototype = Object.create(CatmullRomCurve3.prototype); //\n\nfunction Spline(points) {\n  console.warn('THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead.');\n  CatmullRomCurve3.call(this, points);\n  this.type = 'catmullrom';\n}\n\nSpline.prototype = Object.create(CatmullRomCurve3.prototype);\nObject.assign(Spline.prototype, {\n  initFromArray: function ()\n  /* a */\n  {\n    console.error('THREE.Spline: .initFromArray() has been removed.');\n  },\n  getControlPointsArray: function ()\n  /* optionalTarget */\n  {\n    console.error('THREE.Spline: .getControlPointsArray() has been removed.');\n  },\n  reparametrizeByArcLength: function ()\n  /* samplingCoef */\n  {\n    console.error('THREE.Spline: .reparametrizeByArcLength() has been removed.');\n  }\n});\n\nfunction AxisHelper() {}\n\nfunction BoundingBoxHelper() {}\n\nfunction EdgesHelper() {}\n\nfunction WireframeHelper() {} //\n\n\nObject.assign(Loader.prototype, {\n  extractUrlBase: function (url) {\n    console.warn('THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead.');\n    return LoaderUtils.extractUrlBase(url);\n  }\n});\nLoader.Handlers = {\n  add: function ()\n  /* regex, loader */\n  {\n    console.error('THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.');\n  },\n  get: function ()\n  /* file */\n  {\n    console.error('THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.');\n  }\n};\n\nfunction XHRLoader() {}\n\nfunction BinaryTextureLoader() {}\n\nObject.assign(Box3.prototype, {\n  center: function (optionalTarget) {\n    console.warn('THREE.Box3: .center() has been renamed to .getCenter().');\n    return this.getCenter(optionalTarget);\n  },\n  empty: function () {\n    console.warn('THREE.Box3: .empty() has been renamed to .isEmpty().');\n    return this.isEmpty();\n  },\n  isIntersectionBox: function (box) {\n    console.warn('THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox().');\n    return this.intersectsBox(box);\n  },\n  isIntersectionSphere: function (sphere) {\n    console.warn('THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere().');\n    return this.intersectsSphere(sphere);\n  },\n  size: function (optionalTarget) {\n    console.warn('THREE.Box3: .size() has been renamed to .getSize().');\n    return this.getSize(optionalTarget);\n  }\n});\n\nFrustum.prototype.setFromMatrix = function (m) {\n  console.warn('THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix().');\n  return this.setFromProjectionMatrix(m);\n};\n\nObject.assign(MathUtils, {\n  random16: function () {\n    console.warn('THREE.Math: .random16() has been deprecated. Use Math.random() instead.');\n    return Math.random();\n  },\n  nearestPowerOfTwo: function (value) {\n    console.warn('THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo().');\n    return MathUtils.floorPowerOfTwo(value);\n  },\n  nextPowerOfTwo: function (value) {\n    console.warn('THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo().');\n    return MathUtils.ceilPowerOfTwo(value);\n  }\n});\nObject.assign(Matrix3.prototype, {\n  flattenToArrayOffset: function (array, offset) {\n    console.warn(\"THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.\");\n    return this.toArray(array, offset);\n  },\n  multiplyVector3: function (vector) {\n    console.warn('THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.');\n    return vector.applyMatrix3(this);\n  },\n  multiplyVector3Array: function ()\n  /* a */\n  {\n    console.error('THREE.Matrix3: .multiplyVector3Array() has been removed.');\n  },\n  applyToBufferAttribute: function (attribute) {\n    console.warn('THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead.');\n    return attribute.applyMatrix3(this);\n  },\n  applyToVector3Array: function ()\n  /* array, offset, length */\n  {\n    console.error('THREE.Matrix3: .applyToVector3Array() has been removed.');\n  }\n});\nObject.assign(Matrix4.prototype, {\n  extractPosition: function (m) {\n    console.warn('THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().');\n    return this.copyPosition(m);\n  },\n  flattenToArrayOffset: function (array, offset) {\n    console.warn(\"THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.\");\n    return this.toArray(array, offset);\n  },\n  getPosition: function () {\n    console.warn('THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.');\n    return new Vector3().setFromMatrixColumn(this, 3);\n  },\n  setRotationFromQuaternion: function (q) {\n    console.warn('THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().');\n    return this.makeRotationFromQuaternion(q);\n  },\n  multiplyToArray: function () {\n    console.warn('THREE.Matrix4: .multiplyToArray() has been removed.');\n  },\n  multiplyVector3: function (vector) {\n    console.warn('THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead.');\n    return vector.applyMatrix4(this);\n  },\n  multiplyVector4: function (vector) {\n    console.warn('THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.');\n    return vector.applyMatrix4(this);\n  },\n  multiplyVector3Array: function ()\n  /* a */\n  {\n    console.error('THREE.Matrix4: .multiplyVector3Array() has been removed.');\n  },\n  rotateAxis: function (v) {\n    console.warn('THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.');\n    v.transformDirection(this);\n  },\n  crossVector: function (vector) {\n    console.warn('THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.');\n    return vector.applyMatrix4(this);\n  },\n  translate: function () {\n    console.error('THREE.Matrix4: .translate() has been removed.');\n  },\n  rotateX: function () {\n    console.error('THREE.Matrix4: .rotateX() has been removed.');\n  },\n  rotateY: function () {\n    console.error('THREE.Matrix4: .rotateY() has been removed.');\n  },\n  rotateZ: function () {\n    console.error('THREE.Matrix4: .rotateZ() has been removed.');\n  },\n  rotateByAxis: function () {\n    console.error('THREE.Matrix4: .rotateByAxis() has been removed.');\n  },\n  applyToBufferAttribute: function (attribute) {\n    console.warn('THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead.');\n    return attribute.applyMatrix4(this);\n  },\n  applyToVector3Array: function ()\n  /* array, offset, length */\n  {\n    console.error('THREE.Matrix4: .applyToVector3Array() has been removed.');\n  },\n  makeFrustum: function (left, right, bottom, top, near, far) {\n    console.warn('THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead.');\n    return this.makePerspective(left, right, top, bottom, near, far);\n  }\n});\n\nPlane.prototype.isIntersectionLine = function (line) {\n  console.warn('THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine().');\n  return this.intersectsLine(line);\n};\n\nQuaternion.prototype.multiplyVector3 = function (vector) {\n  console.warn('THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.');\n  return vector.applyQuaternion(this);\n};\n\nObject.assign(Triangle.prototype, {\n  area: function () {\n    console.warn('THREE.Triangle: .area() has been renamed to .getArea().');\n    return this.getArea();\n  },\n  barycoordFromPoint: function (point, target) {\n    console.warn('THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord().');\n    return this.getBarycoord(point, target);\n  },\n  midpoint: function (target) {\n    console.warn('THREE.Triangle: .midpoint() has been renamed to .getMidpoint().');\n    return this.getMidpoint(target);\n  },\n  normal: function (target) {\n    console.warn('THREE.Triangle: .normal() has been renamed to .getNormal().');\n    return this.getNormal(target);\n  },\n  plane: function (target) {\n    console.warn('THREE.Triangle: .plane() has been renamed to .getPlane().');\n    return this.getPlane(target);\n  }\n});\nObject.assign(Triangle, {\n  barycoordFromPoint: function (point, a, b, c, target) {\n    console.warn('THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord().');\n    return Triangle.getBarycoord(point, a, b, c, target);\n  },\n  normal: function (a, b, c, target) {\n    console.warn('THREE.Triangle: .normal() has been renamed to .getNormal().');\n    return Triangle.getNormal(a, b, c, target);\n  }\n});\nObject.assign(Shape.prototype, {\n  extractAllPoints: function (divisions) {\n    console.warn('THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead.');\n    return this.extractPoints(divisions);\n  },\n  extrude: function (options) {\n    console.warn('THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead.');\n    return new ExtrudeGeometry(this, options);\n  },\n  makeGeometry: function (options) {\n    console.warn('THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead.');\n    return new ShapeGeometry(this, options);\n  }\n});\nObject.assign(Vector2.prototype, {\n  fromAttribute: function (attribute, index, offset) {\n    console.warn('THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute().');\n    return this.fromBufferAttribute(attribute, index, offset);\n  },\n  distanceToManhattan: function (v) {\n    console.warn('THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo().');\n    return this.manhattanDistanceTo(v);\n  },\n  lengthManhattan: function () {\n    console.warn('THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength().');\n    return this.manhattanLength();\n  }\n});\nObject.assign(Vector3.prototype, {\n  setEulerFromRotationMatrix: function () {\n    console.error('THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.');\n  },\n  setEulerFromQuaternion: function () {\n    console.error('THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.');\n  },\n  getPositionFromMatrix: function (m) {\n    console.warn('THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().');\n    return this.setFromMatrixPosition(m);\n  },\n  getScaleFromMatrix: function (m) {\n    console.warn('THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().');\n    return this.setFromMatrixScale(m);\n  },\n  getColumnFromMatrix: function (index, matrix) {\n    console.warn('THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().');\n    return this.setFromMatrixColumn(matrix, index);\n  },\n  applyProjection: function (m) {\n    console.warn('THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead.');\n    return this.applyMatrix4(m);\n  },\n  fromAttribute: function (attribute, index, offset) {\n    console.warn('THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute().');\n    return this.fromBufferAttribute(attribute, index, offset);\n  },\n  distanceToManhattan: function (v) {\n    console.warn('THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo().');\n    return this.manhattanDistanceTo(v);\n  },\n  lengthManhattan: function () {\n    console.warn('THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength().');\n    return this.manhattanLength();\n  }\n});\nObject.assign(Vector4.prototype, {\n  fromAttribute: function (attribute, index, offset) {\n    console.warn('THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute().');\n    return this.fromBufferAttribute(attribute, index, offset);\n  },\n  lengthManhattan: function () {\n    console.warn('THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength().');\n    return this.manhattanLength();\n  }\n}); //\n\nObject.assign(Geometry.prototype, {\n  computeTangents: function () {\n    console.error('THREE.Geometry: .computeTangents() has been removed.');\n  },\n  computeLineDistances: function () {\n    console.error('THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.');\n  },\n  applyMatrix: function (matrix) {\n    console.warn('THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4().');\n    return this.applyMatrix4(matrix);\n  }\n});\nObject.assign(Object3D.prototype, {\n  getChildByName: function (name) {\n    console.warn('THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().');\n    return this.getObjectByName(name);\n  },\n  renderDepth: function () {\n    console.warn('THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.');\n  },\n  translate: function (distance, axis) {\n    console.warn('THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.');\n    return this.translateOnAxis(axis, distance);\n  },\n  getWorldRotation: function () {\n    console.error('THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.');\n  },\n  applyMatrix: function (matrix) {\n    console.warn('THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4().');\n    return this.applyMatrix4(matrix);\n  }\n});\nObject.defineProperties(Object3D.prototype, {\n  eulerOrder: {\n    get: function () {\n      console.warn('THREE.Object3D: .eulerOrder is now .rotation.order.');\n      return this.rotation.order;\n    },\n    set: function (value) {\n      console.warn('THREE.Object3D: .eulerOrder is now .rotation.order.');\n      this.rotation.order = value;\n    }\n  },\n  useQuaternion: {\n    get: function () {\n      console.warn('THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.');\n    },\n    set: function () {\n      console.warn('THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.');\n    }\n  }\n});\nObject.assign(Mesh.prototype, {\n  setDrawMode: function () {\n    console.error('THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.');\n  }\n});\nObject.defineProperties(Mesh.prototype, {\n  drawMode: {\n    get: function () {\n      console.error('THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode.');\n      return TrianglesDrawMode;\n    },\n    set: function () {\n      console.error('THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.');\n    }\n  }\n});\nObject.defineProperties(LOD.prototype, {\n  objects: {\n    get: function () {\n      console.warn('THREE.LOD: .objects has been renamed to .levels.');\n      return this.levels;\n    }\n  }\n});\nObject.defineProperty(Skeleton.prototype, 'useVertexTexture', {\n  get: function () {\n    console.warn('THREE.Skeleton: useVertexTexture has been removed.');\n  },\n  set: function () {\n    console.warn('THREE.Skeleton: useVertexTexture has been removed.');\n  }\n});\nObject.defineProperty(Curve.prototype, '__arcLengthDivisions', {\n  get: function () {\n    console.warn('THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.');\n    return this.arcLengthDivisions;\n  },\n  set: function (value) {\n    console.warn('THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.');\n    this.arcLengthDivisions = value;\n  }\n}); //\n\nPerspectiveCamera.prototype.setLens = function (focalLength, filmGauge) {\n  console.warn(\"THREE.PerspectiveCamera.setLens is deprecated. \" + \"Use .setFocalLength and .filmGauge for a photographic setup.\");\n  if (filmGauge !== undefined) this.filmGauge = filmGauge;\n  this.setFocalLength(focalLength);\n}; //\n\n\nObject.defineProperties(Light.prototype, {\n  onlyShadow: {\n    set: function () {\n      console.warn('THREE.Light: .onlyShadow has been removed.');\n    }\n  },\n  shadowCameraFov: {\n    set: function (value) {\n      console.warn('THREE.Light: .shadowCameraFov is now .shadow.camera.fov.');\n      this.shadow.camera.fov = value;\n    }\n  },\n  shadowCameraLeft: {\n    set: function (value) {\n      console.warn('THREE.Light: .shadowCameraLeft is now .shadow.camera.left.');\n      this.shadow.camera.left = value;\n    }\n  },\n  shadowCameraRight: {\n    set: function (value) {\n      console.warn('THREE.Light: .shadowCameraRight is now .shadow.camera.right.');\n      this.shadow.camera.right = value;\n    }\n  },\n  shadowCameraTop: {\n    set: function (value) {\n      console.warn('THREE.Light: .shadowCameraTop is now .shadow.camera.top.');\n      this.shadow.camera.top = value;\n    }\n  },\n  shadowCameraBottom: {\n    set: function (value) {\n      console.warn('THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom.');\n      this.shadow.camera.bottom = value;\n    }\n  },\n  shadowCameraNear: {\n    set: function (value) {\n      console.warn('THREE.Light: .shadowCameraNear is now .shadow.camera.near.');\n      this.shadow.camera.near = value;\n    }\n  },\n  shadowCameraFar: {\n    set: function (value) {\n      console.warn('THREE.Light: .shadowCameraFar is now .shadow.camera.far.');\n      this.shadow.camera.far = value;\n    }\n  },\n  shadowCameraVisible: {\n    set: function () {\n      console.warn('THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.');\n    }\n  },\n  shadowBias: {\n    set: function (value) {\n      console.warn('THREE.Light: .shadowBias is now .shadow.bias.');\n      this.shadow.bias = value;\n    }\n  },\n  shadowDarkness: {\n    set: function () {\n      console.warn('THREE.Light: .shadowDarkness has been removed.');\n    }\n  },\n  shadowMapWidth: {\n    set: function (value) {\n      console.warn('THREE.Light: .shadowMapWidth is now .shadow.mapSize.width.');\n      this.shadow.mapSize.width = value;\n    }\n  },\n  shadowMapHeight: {\n    set: function (value) {\n      console.warn('THREE.Light: .shadowMapHeight is now .shadow.mapSize.height.');\n      this.shadow.mapSize.height = value;\n    }\n  }\n}); //\n\nObject.defineProperties(BufferAttribute.prototype, {\n  length: {\n    get: function () {\n      console.warn('THREE.BufferAttribute: .length has been deprecated. Use .count instead.');\n      return this.array.length;\n    }\n  },\n  dynamic: {\n    get: function () {\n      console.warn('THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead.');\n      return this.usage === DynamicDrawUsage;\n    },\n    set: function ()\n    /* value */\n    {\n      console.warn('THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead.');\n      this.setUsage(DynamicDrawUsage);\n    }\n  }\n});\nObject.assign(BufferAttribute.prototype, {\n  setDynamic: function (value) {\n    console.warn('THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead.');\n    this.setUsage(value === true ? DynamicDrawUsage : StaticDrawUsage);\n    return this;\n  },\n  copyIndicesArray: function ()\n  /* indices */\n  {\n    console.error('THREE.BufferAttribute: .copyIndicesArray() has been removed.');\n  },\n  setArray: function ()\n  /* array */\n  {\n    console.error('THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers');\n  }\n});\nObject.assign(BufferGeometry.prototype, {\n  addIndex: function (index) {\n    console.warn('THREE.BufferGeometry: .addIndex() has been renamed to .setIndex().');\n    this.setIndex(index);\n  },\n  addAttribute: function (name, attribute) {\n    console.warn('THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute().');\n\n    if (!(attribute && attribute.isBufferAttribute) && !(attribute && attribute.isInterleavedBufferAttribute)) {\n      console.warn('THREE.BufferGeometry: .addAttribute() now expects ( name, attribute ).');\n      return this.setAttribute(name, new BufferAttribute(arguments[1], arguments[2]));\n    }\n\n    if (name === 'index') {\n      console.warn('THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute.');\n      this.setIndex(attribute);\n      return this;\n    }\n\n    return this.setAttribute(name, attribute);\n  },\n  addDrawCall: function (start, count, indexOffset) {\n    if (indexOffset !== undefined) {\n      console.warn('THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset.');\n    }\n\n    console.warn('THREE.BufferGeometry: .addDrawCall() is now .addGroup().');\n    this.addGroup(start, count);\n  },\n  clearDrawCalls: function () {\n    console.warn('THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups().');\n    this.clearGroups();\n  },\n  computeTangents: function () {\n    console.warn('THREE.BufferGeometry: .computeTangents() has been removed.');\n  },\n  computeOffsets: function () {\n    console.warn('THREE.BufferGeometry: .computeOffsets() has been removed.');\n  },\n  removeAttribute: function (name) {\n    console.warn('THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute().');\n    return this.deleteAttribute(name);\n  },\n  applyMatrix: function (matrix) {\n    console.warn('THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4().');\n    return this.applyMatrix4(matrix);\n  }\n});\nObject.defineProperties(BufferGeometry.prototype, {\n  drawcalls: {\n    get: function () {\n      console.error('THREE.BufferGeometry: .drawcalls has been renamed to .groups.');\n      return this.groups;\n    }\n  },\n  offsets: {\n    get: function () {\n      console.warn('THREE.BufferGeometry: .offsets has been renamed to .groups.');\n      return this.groups;\n    }\n  }\n});\nObject.defineProperties(Raycaster.prototype, {\n  linePrecision: {\n    get: function () {\n      console.warn('THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead.');\n      return this.params.Line.threshold;\n    },\n    set: function (value) {\n      console.warn('THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead.');\n      this.params.Line.threshold = value;\n    }\n  }\n});\nObject.defineProperties(InterleavedBuffer.prototype, {\n  dynamic: {\n    get: function () {\n      console.warn('THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead.');\n      return this.usage === DynamicDrawUsage;\n    },\n    set: function (value) {\n      console.warn('THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead.');\n      this.setUsage(value);\n    }\n  }\n});\nObject.assign(InterleavedBuffer.prototype, {\n  setDynamic: function (value) {\n    console.warn('THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead.');\n    this.setUsage(value === true ? DynamicDrawUsage : StaticDrawUsage);\n    return this;\n  },\n  setArray: function ()\n  /* array */\n  {\n    console.error('THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers');\n  }\n}); //\n\nObject.defineProperties(Uniform.prototype, {\n  dynamic: {\n    set: function () {\n      console.warn('THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.');\n    }\n  },\n  onUpdate: {\n    value: function () {\n      console.warn('THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead.');\n      return this;\n    }\n  }\n}); //\n\nObject.defineProperties(Material.prototype, {\n  wrapAround: {\n    get: function () {\n      console.warn('THREE.Material: .wrapAround has been removed.');\n    },\n    set: function () {\n      console.warn('THREE.Material: .wrapAround has been removed.');\n    }\n  },\n  overdraw: {\n    get: function () {\n      console.warn('THREE.Material: .overdraw has been removed.');\n    },\n    set: function () {\n      console.warn('THREE.Material: .overdraw has been removed.');\n    }\n  },\n  wrapRGB: {\n    get: function () {\n      console.warn('THREE.Material: .wrapRGB has been removed.');\n      return new Color();\n    }\n  },\n  shading: {\n    get: function () {\n      console.error('THREE.' + this.type + ': .shading has been removed. Use the boolean .flatShading instead.');\n    },\n    set: function (value) {\n      console.warn('THREE.' + this.type + ': .shading has been removed. Use the boolean .flatShading instead.');\n      this.flatShading = value === FlatShading;\n    }\n  },\n  stencilMask: {\n    get: function () {\n      console.warn('THREE.' + this.type + ': .stencilMask has been removed. Use .stencilFuncMask instead.');\n      return this.stencilFuncMask;\n    },\n    set: function (value) {\n      console.warn('THREE.' + this.type + ': .stencilMask has been removed. Use .stencilFuncMask instead.');\n      this.stencilFuncMask = value;\n    }\n  }\n});\nObject.defineProperties(MeshPhongMaterial.prototype, {\n  metal: {\n    get: function () {\n      console.warn('THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead.');\n      return false;\n    },\n    set: function () {\n      console.warn('THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead');\n    }\n  }\n});\nObject.defineProperties(ShaderMaterial.prototype, {\n  derivatives: {\n    get: function () {\n      console.warn('THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives.');\n      return this.extensions.derivatives;\n    },\n    set: function (value) {\n      console.warn('THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives.');\n      this.extensions.derivatives = value;\n    }\n  }\n}); //\n\nObject.assign(WebGLRenderer.prototype, {\n  clearTarget: function (renderTarget, color, depth, stencil) {\n    console.warn('THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead.');\n    this.setRenderTarget(renderTarget);\n    this.clear(color, depth, stencil);\n  },\n  animate: function (callback) {\n    console.warn('THREE.WebGLRenderer: .animate() is now .setAnimationLoop().');\n    this.setAnimationLoop(callback);\n  },\n  getCurrentRenderTarget: function () {\n    console.warn('THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget().');\n    return this.getRenderTarget();\n  },\n  getMaxAnisotropy: function () {\n    console.warn('THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy().');\n    return this.capabilities.getMaxAnisotropy();\n  },\n  getPrecision: function () {\n    console.warn('THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision.');\n    return this.capabilities.precision;\n  },\n  resetGLState: function () {\n    console.warn('THREE.WebGLRenderer: .resetGLState() is now .state.reset().');\n    return this.state.reset();\n  },\n  supportsFloatTextures: function () {\n    console.warn('THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( \\'OES_texture_float\\' ).');\n    return this.extensions.get('OES_texture_float');\n  },\n  supportsHalfFloatTextures: function () {\n    console.warn('THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( \\'OES_texture_half_float\\' ).');\n    return this.extensions.get('OES_texture_half_float');\n  },\n  supportsStandardDerivatives: function () {\n    console.warn('THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( \\'OES_standard_derivatives\\' ).');\n    return this.extensions.get('OES_standard_derivatives');\n  },\n  supportsCompressedTextureS3TC: function () {\n    console.warn('THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( \\'WEBGL_compressed_texture_s3tc\\' ).');\n    return this.extensions.get('WEBGL_compressed_texture_s3tc');\n  },\n  supportsCompressedTexturePVRTC: function () {\n    console.warn('THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( \\'WEBGL_compressed_texture_pvrtc\\' ).');\n    return this.extensions.get('WEBGL_compressed_texture_pvrtc');\n  },\n  supportsBlendMinMax: function () {\n    console.warn('THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( \\'EXT_blend_minmax\\' ).');\n    return this.extensions.get('EXT_blend_minmax');\n  },\n  supportsVertexTextures: function () {\n    console.warn('THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures.');\n    return this.capabilities.vertexTextures;\n  },\n  supportsInstancedArrays: function () {\n    console.warn('THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( \\'ANGLE_instanced_arrays\\' ).');\n    return this.extensions.get('ANGLE_instanced_arrays');\n  },\n  enableScissorTest: function (boolean) {\n    console.warn('THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest().');\n    this.setScissorTest(boolean);\n  },\n  initMaterial: function () {\n    console.warn('THREE.WebGLRenderer: .initMaterial() has been removed.');\n  },\n  addPrePlugin: function () {\n    console.warn('THREE.WebGLRenderer: .addPrePlugin() has been removed.');\n  },\n  addPostPlugin: function () {\n    console.warn('THREE.WebGLRenderer: .addPostPlugin() has been removed.');\n  },\n  updateShadowMap: function () {\n    console.warn('THREE.WebGLRenderer: .updateShadowMap() has been removed.');\n  },\n  setFaceCulling: function () {\n    console.warn('THREE.WebGLRenderer: .setFaceCulling() has been removed.');\n  },\n  allocTextureUnit: function () {\n    console.warn('THREE.WebGLRenderer: .allocTextureUnit() has been removed.');\n  },\n  setTexture: function () {\n    console.warn('THREE.WebGLRenderer: .setTexture() has been removed.');\n  },\n  setTexture2D: function () {\n    console.warn('THREE.WebGLRenderer: .setTexture2D() has been removed.');\n  },\n  setTextureCube: function () {\n    console.warn('THREE.WebGLRenderer: .setTextureCube() has been removed.');\n  },\n  getActiveMipMapLevel: function () {\n    console.warn('THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel().');\n    return this.getActiveMipmapLevel();\n  }\n});\nObject.defineProperties(WebGLRenderer.prototype, {\n  shadowMapEnabled: {\n    get: function () {\n      return this.shadowMap.enabled;\n    },\n    set: function (value) {\n      console.warn('THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.');\n      this.shadowMap.enabled = value;\n    }\n  },\n  shadowMapType: {\n    get: function () {\n      return this.shadowMap.type;\n    },\n    set: function (value) {\n      console.warn('THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.');\n      this.shadowMap.type = value;\n    }\n  },\n  shadowMapCullFace: {\n    get: function () {\n      console.warn('THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.');\n      return undefined;\n    },\n    set: function ()\n    /* value */\n    {\n      console.warn('THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.');\n    }\n  },\n  context: {\n    get: function () {\n      console.warn('THREE.WebGLRenderer: .context has been removed. Use .getContext() instead.');\n      return this.getContext();\n    }\n  },\n  vr: {\n    get: function () {\n      console.warn('THREE.WebGLRenderer: .vr has been renamed to .xr');\n      return this.xr;\n    }\n  },\n  gammaInput: {\n    get: function () {\n      console.warn('THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.');\n      return false;\n    },\n    set: function () {\n      console.warn('THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.');\n    }\n  },\n  gammaOutput: {\n    get: function () {\n      console.warn('THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead.');\n      return false;\n    },\n    set: function (value) {\n      console.warn('THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead.');\n      this.outputEncoding = value === true ? sRGBEncoding : LinearEncoding;\n    }\n  }\n});\nObject.defineProperties(WebGLShadowMap.prototype, {\n  cullFace: {\n    get: function () {\n      console.warn('THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.');\n      return undefined;\n    },\n    set: function ()\n    /* cullFace */\n    {\n      console.warn('THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.');\n    }\n  },\n  renderReverseSided: {\n    get: function () {\n      console.warn('THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.');\n      return undefined;\n    },\n    set: function () {\n      console.warn('THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.');\n    }\n  },\n  renderSingleSided: {\n    get: function () {\n      console.warn('THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.');\n      return undefined;\n    },\n    set: function () {\n      console.warn('THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.');\n    }\n  }\n});\n\nfunction WebGLRenderTargetCube() {} //\n\n\nObject.defineProperties(WebGLRenderTarget.prototype, {\n  wrapS: {\n    get: function () {\n      console.warn('THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.');\n      return this.texture.wrapS;\n    },\n    set: function (value) {\n      console.warn('THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.');\n      this.texture.wrapS = value;\n    }\n  },\n  wrapT: {\n    get: function () {\n      console.warn('THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.');\n      return this.texture.wrapT;\n    },\n    set: function (value) {\n      console.warn('THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.');\n      this.texture.wrapT = value;\n    }\n  },\n  magFilter: {\n    get: function () {\n      console.warn('THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.');\n      return this.texture.magFilter;\n    },\n    set: function (value) {\n      console.warn('THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.');\n      this.texture.magFilter = value;\n    }\n  },\n  minFilter: {\n    get: function () {\n      console.warn('THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.');\n      return this.texture.minFilter;\n    },\n    set: function (value) {\n      console.warn('THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.');\n      this.texture.minFilter = value;\n    }\n  },\n  anisotropy: {\n    get: function () {\n      console.warn('THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.');\n      return this.texture.anisotropy;\n    },\n    set: function (value) {\n      console.warn('THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.');\n      this.texture.anisotropy = value;\n    }\n  },\n  offset: {\n    get: function () {\n      console.warn('THREE.WebGLRenderTarget: .offset is now .texture.offset.');\n      return this.texture.offset;\n    },\n    set: function (value) {\n      console.warn('THREE.WebGLRenderTarget: .offset is now .texture.offset.');\n      this.texture.offset = value;\n    }\n  },\n  repeat: {\n    get: function () {\n      console.warn('THREE.WebGLRenderTarget: .repeat is now .texture.repeat.');\n      return this.texture.repeat;\n    },\n    set: function (value) {\n      console.warn('THREE.WebGLRenderTarget: .repeat is now .texture.repeat.');\n      this.texture.repeat = value;\n    }\n  },\n  format: {\n    get: function () {\n      console.warn('THREE.WebGLRenderTarget: .format is now .texture.format.');\n      return this.texture.format;\n    },\n    set: function (value) {\n      console.warn('THREE.WebGLRenderTarget: .format is now .texture.format.');\n      this.texture.format = value;\n    }\n  },\n  type: {\n    get: function () {\n      console.warn('THREE.WebGLRenderTarget: .type is now .texture.type.');\n      return this.texture.type;\n    },\n    set: function (value) {\n      console.warn('THREE.WebGLRenderTarget: .type is now .texture.type.');\n      this.texture.type = value;\n    }\n  },\n  generateMipmaps: {\n    get: function () {\n      console.warn('THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.');\n      return this.texture.generateMipmaps;\n    },\n    set: function (value) {\n      console.warn('THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.');\n      this.texture.generateMipmaps = value;\n    }\n  }\n}); //\n\nObject.defineProperties(Audio.prototype, {\n  load: {\n    value: function (file) {\n      console.warn('THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.');\n      var scope = this;\n      var audioLoader = new AudioLoader();\n      audioLoader.load(file, function (buffer) {\n        scope.setBuffer(buffer);\n      });\n      return this;\n    }\n  },\n  startTime: {\n    set: function () {\n      console.warn('THREE.Audio: .startTime is now .play( delay ).');\n    }\n  }\n});\n\nAudioAnalyser.prototype.getData = function () {\n  console.warn('THREE.AudioAnalyser: .getData() is now .getFrequencyData().');\n  return this.getFrequencyData();\n}; //\n\n\nCubeCamera.prototype.updateCubeMap = function (renderer, scene) {\n  console.warn('THREE.CubeCamera: .updateCubeMap() is now .update().');\n  return this.update(renderer, scene);\n}; //\n\n\nvar GeometryUtils = {\n  merge: function (geometry1, geometry2, materialIndexOffset) {\n    console.warn('THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.');\n    var matrix;\n\n    if (geometry2.isMesh) {\n      geometry2.matrixAutoUpdate && geometry2.updateMatrix();\n      matrix = geometry2.matrix;\n      geometry2 = geometry2.geometry;\n    }\n\n    geometry1.merge(geometry2, matrix, materialIndexOffset);\n  },\n  center: function (geometry) {\n    console.warn('THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead.');\n    return geometry.center();\n  }\n};\nImageUtils.crossOrigin = undefined;\n\nImageUtils.loadTexture = function (url, mapping, onLoad, onError) {\n  console.warn('THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.');\n  var loader = new TextureLoader();\n  loader.setCrossOrigin(this.crossOrigin);\n  var texture = loader.load(url, onLoad, undefined, onError);\n  if (mapping) texture.mapping = mapping;\n  return texture;\n};\n\nImageUtils.loadTextureCube = function (urls, mapping, onLoad, onError) {\n  console.warn('THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.');\n  var loader = new CubeTextureLoader();\n  loader.setCrossOrigin(this.crossOrigin);\n  var texture = loader.load(urls, onLoad, undefined, onError);\n  if (mapping) texture.mapping = mapping;\n  return texture;\n};\n\nImageUtils.loadCompressedTexture = function () {\n  console.error('THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.');\n};\n\nImageUtils.loadCompressedTextureCube = function () {\n  console.error('THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.');\n};\n\nfunction CanvasRenderer() {}\n\nfunction JSONLoader() {} //\n\n\nvar SceneUtils = {\n  createMultiMaterialObject: function ()\n  /* geometry, materials */\n  {\n    console.error('THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js');\n  },\n  detach: function ()\n  /* child, parent, scene */\n  {\n    console.error('THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js');\n  },\n  attach: function ()\n  /* child, scene, parent */\n  {\n    console.error('THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js');\n  }\n};\n\nfunction LensFlare() {}\n\nif (typeof __THREE_DEVTOOLS__ !== 'undefined') {\n  /* eslint-disable no-undef */\n  __THREE_DEVTOOLS__.dispatchEvent(new CustomEvent('register', {\n    detail: {\n      revision: REVISION\n    }\n  }));\n  /* eslint-enable no-undef */\n\n}\n\nvar THREE = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  ACESFilmicToneMapping: ACESFilmicToneMapping,\n  AddEquation: AddEquation,\n  AddOperation: AddOperation,\n  AdditiveBlending: AdditiveBlending,\n  AlphaFormat: AlphaFormat,\n  AlwaysDepth: AlwaysDepth,\n  AlwaysStencilFunc: AlwaysStencilFunc,\n  AmbientLight: AmbientLight,\n  AmbientLightProbe: AmbientLightProbe,\n  AnimationClip: AnimationClip,\n  AnimationLoader: AnimationLoader,\n  AnimationMixer: AnimationMixer,\n  AnimationObjectGroup: AnimationObjectGroup,\n  AnimationUtils: AnimationUtils,\n  ArcCurve: ArcCurve,\n  ArrayCamera: ArrayCamera,\n  ArrowHelper: ArrowHelper,\n  Audio: Audio,\n  AudioAnalyser: AudioAnalyser,\n  AudioContext: AudioContext,\n  AudioListener: AudioListener,\n  AudioLoader: AudioLoader,\n  AxesHelper: AxesHelper,\n  AxisHelper: AxisHelper,\n  BackSide: BackSide,\n  BasicDepthPacking: BasicDepthPacking,\n  BasicShadowMap: BasicShadowMap,\n  BinaryTextureLoader: BinaryTextureLoader,\n  Bone: Bone,\n  BooleanKeyframeTrack: BooleanKeyframeTrack,\n  BoundingBoxHelper: BoundingBoxHelper,\n  Box2: Box2,\n  Box3: Box3,\n  Box3Helper: Box3Helper,\n  BoxBufferGeometry: BoxBufferGeometry,\n  BoxGeometry: BoxGeometry,\n  BoxHelper: BoxHelper,\n  BufferAttribute: BufferAttribute,\n  BufferGeometry: BufferGeometry,\n  BufferGeometryLoader: BufferGeometryLoader,\n  ByteType: ByteType,\n  Cache: Cache,\n  Camera: Camera,\n  CameraHelper: CameraHelper,\n  CanvasRenderer: CanvasRenderer,\n  CanvasTexture: CanvasTexture,\n  CatmullRomCurve3: CatmullRomCurve3,\n  CineonToneMapping: CineonToneMapping,\n  CircleBufferGeometry: CircleBufferGeometry,\n  CircleGeometry: CircleGeometry,\n  ClampToEdgeWrapping: ClampToEdgeWrapping,\n  Clock: Clock,\n  ClosedSplineCurve3: ClosedSplineCurve3,\n  Color: Color,\n  ColorKeyframeTrack: ColorKeyframeTrack,\n  CompressedTexture: CompressedTexture,\n  CompressedTextureLoader: CompressedTextureLoader,\n  ConeBufferGeometry: ConeBufferGeometry,\n  ConeGeometry: ConeGeometry,\n  CubeCamera: CubeCamera,\n  CubeGeometry: BoxGeometry,\n  CubeReflectionMapping: CubeReflectionMapping,\n  CubeRefractionMapping: CubeRefractionMapping,\n  CubeTexture: CubeTexture,\n  CubeTextureLoader: CubeTextureLoader,\n  CubeUVReflectionMapping: CubeUVReflectionMapping,\n  CubeUVRefractionMapping: CubeUVRefractionMapping,\n  CubicBezierCurve: CubicBezierCurve,\n  CubicBezierCurve3: CubicBezierCurve3,\n  CubicInterpolant: CubicInterpolant,\n  CullFaceBack: CullFaceBack,\n  CullFaceFront: CullFaceFront,\n  CullFaceFrontBack: CullFaceFrontBack,\n  CullFaceNone: CullFaceNone,\n  Curve: Curve,\n  CurvePath: CurvePath,\n  CustomBlending: CustomBlending,\n  CylinderBufferGeometry: CylinderBufferGeometry,\n  CylinderGeometry: CylinderGeometry,\n  Cylindrical: Cylindrical,\n  DataTexture: DataTexture,\n  DataTexture2DArray: DataTexture2DArray,\n  DataTexture3D: DataTexture3D,\n  DataTextureLoader: DataTextureLoader,\n  DecrementStencilOp: DecrementStencilOp,\n  DecrementWrapStencilOp: DecrementWrapStencilOp,\n  DefaultLoadingManager: DefaultLoadingManager,\n  DepthFormat: DepthFormat,\n  DepthStencilFormat: DepthStencilFormat,\n  DepthTexture: DepthTexture,\n  DirectionalLight: DirectionalLight,\n  DirectionalLightHelper: DirectionalLightHelper,\n  DirectionalLightShadow: DirectionalLightShadow,\n  DiscreteInterpolant: DiscreteInterpolant,\n  DodecahedronBufferGeometry: DodecahedronBufferGeometry,\n  DodecahedronGeometry: DodecahedronGeometry,\n  DoubleSide: DoubleSide,\n  DstAlphaFactor: DstAlphaFactor,\n  DstColorFactor: DstColorFactor,\n  DynamicBufferAttribute: DynamicBufferAttribute,\n  DynamicCopyUsage: DynamicCopyUsage,\n  DynamicDrawUsage: DynamicDrawUsage,\n  DynamicReadUsage: DynamicReadUsage,\n  EdgesGeometry: EdgesGeometry,\n  EdgesHelper: EdgesHelper,\n  EllipseCurve: EllipseCurve,\n  EqualDepth: EqualDepth,\n  EqualStencilFunc: EqualStencilFunc,\n  EquirectangularReflectionMapping: EquirectangularReflectionMapping,\n  EquirectangularRefractionMapping: EquirectangularRefractionMapping,\n  Euler: Euler,\n  EventDispatcher: EventDispatcher,\n  ExtrudeBufferGeometry: ExtrudeBufferGeometry,\n  ExtrudeGeometry: ExtrudeGeometry,\n  Face3: Face3,\n  Face4: Face4,\n  FaceColors: FaceColors,\n  FileLoader: FileLoader,\n  FlatShading: FlatShading,\n  Float32Attribute: Float32Attribute,\n  Float32BufferAttribute: Float32BufferAttribute,\n  Float64Attribute: Float64Attribute,\n  Float64BufferAttribute: Float64BufferAttribute,\n  FloatType: FloatType,\n  Fog: Fog,\n  FogExp2: FogExp2,\n  Font: Font,\n  FontLoader: FontLoader,\n  FrontFaceDirectionCCW: FrontFaceDirectionCCW,\n  FrontFaceDirectionCW: FrontFaceDirectionCW,\n  FrontSide: FrontSide,\n  Frustum: Frustum,\n  GammaEncoding: GammaEncoding,\n  Geometry: Geometry,\n  GeometryUtils: GeometryUtils,\n  GreaterDepth: GreaterDepth,\n  GreaterEqualDepth: GreaterEqualDepth,\n  GreaterEqualStencilFunc: GreaterEqualStencilFunc,\n  GreaterStencilFunc: GreaterStencilFunc,\n  GridHelper: GridHelper,\n  Group: Group,\n  HalfFloatType: HalfFloatType,\n  HemisphereLight: HemisphereLight,\n  HemisphereLightHelper: HemisphereLightHelper,\n  HemisphereLightProbe: HemisphereLightProbe,\n  IcosahedronBufferGeometry: IcosahedronBufferGeometry,\n  IcosahedronGeometry: IcosahedronGeometry,\n  ImageBitmapLoader: ImageBitmapLoader,\n  ImageLoader: ImageLoader,\n  ImageUtils: ImageUtils,\n  ImmediateRenderObject: ImmediateRenderObject,\n  IncrementStencilOp: IncrementStencilOp,\n  IncrementWrapStencilOp: IncrementWrapStencilOp,\n  InstancedBufferAttribute: InstancedBufferAttribute,\n  InstancedBufferGeometry: InstancedBufferGeometry,\n  InstancedInterleavedBuffer: InstancedInterleavedBuffer,\n  InstancedMesh: InstancedMesh,\n  Int16Attribute: Int16Attribute,\n  Int16BufferAttribute: Int16BufferAttribute,\n  Int32Attribute: Int32Attribute,\n  Int32BufferAttribute: Int32BufferAttribute,\n  Int8Attribute: Int8Attribute,\n  Int8BufferAttribute: Int8BufferAttribute,\n  IntType: IntType,\n  InterleavedBuffer: InterleavedBuffer,\n  InterleavedBufferAttribute: InterleavedBufferAttribute,\n  Interpolant: Interpolant,\n  InterpolateDiscrete: InterpolateDiscrete,\n  InterpolateLinear: InterpolateLinear,\n  InterpolateSmooth: InterpolateSmooth,\n  InvertStencilOp: InvertStencilOp,\n  JSONLoader: JSONLoader,\n  KeepStencilOp: KeepStencilOp,\n  KeyframeTrack: KeyframeTrack,\n  LOD: LOD,\n  LatheBufferGeometry: LatheBufferGeometry,\n  LatheGeometry: LatheGeometry,\n  Layers: Layers,\n  LensFlare: LensFlare,\n  LessDepth: LessDepth,\n  LessEqualDepth: LessEqualDepth,\n  LessEqualStencilFunc: LessEqualStencilFunc,\n  LessStencilFunc: LessStencilFunc,\n  Light: Light,\n  LightProbe: LightProbe,\n  LightShadow: LightShadow,\n  Line: Line,\n  Line3: Line3,\n  LineBasicMaterial: LineBasicMaterial,\n  LineCurve: LineCurve,\n  LineCurve3: LineCurve3,\n  LineDashedMaterial: LineDashedMaterial,\n  LineLoop: LineLoop,\n  LinePieces: LinePieces,\n  LineSegments: LineSegments,\n  LineStrip: LineStrip,\n  LinearEncoding: LinearEncoding,\n  LinearFilter: LinearFilter,\n  LinearInterpolant: LinearInterpolant,\n  LinearMipMapLinearFilter: LinearMipMapLinearFilter,\n  LinearMipMapNearestFilter: LinearMipMapNearestFilter,\n  LinearMipmapLinearFilter: LinearMipmapLinearFilter,\n  LinearMipmapNearestFilter: LinearMipmapNearestFilter,\n  LinearToneMapping: LinearToneMapping,\n  Loader: Loader,\n  LoaderUtils: LoaderUtils,\n  LoadingManager: LoadingManager,\n  LogLuvEncoding: LogLuvEncoding,\n  LoopOnce: LoopOnce,\n  LoopPingPong: LoopPingPong,\n  LoopRepeat: LoopRepeat,\n  LuminanceAlphaFormat: LuminanceAlphaFormat,\n  LuminanceFormat: LuminanceFormat,\n  MOUSE: MOUSE,\n  Material: Material,\n  MaterialLoader: MaterialLoader,\n  Math: MathUtils,\n  MathUtils: MathUtils,\n  Matrix3: Matrix3,\n  Matrix4: Matrix4,\n  MaxEquation: MaxEquation,\n  Mesh: Mesh,\n  MeshBasicMaterial: MeshBasicMaterial,\n  MeshDepthMaterial: MeshDepthMaterial,\n  MeshDistanceMaterial: MeshDistanceMaterial,\n  MeshFaceMaterial: MeshFaceMaterial,\n  MeshLambertMaterial: MeshLambertMaterial,\n  MeshMatcapMaterial: MeshMatcapMaterial,\n  MeshNormalMaterial: MeshNormalMaterial,\n  MeshPhongMaterial: MeshPhongMaterial,\n  MeshPhysicalMaterial: MeshPhysicalMaterial,\n  MeshStandardMaterial: MeshStandardMaterial,\n  MeshToonMaterial: MeshToonMaterial,\n  MinEquation: MinEquation,\n  MirroredRepeatWrapping: MirroredRepeatWrapping,\n  MixOperation: MixOperation,\n  MultiMaterial: MultiMaterial,\n  MultiplyBlending: MultiplyBlending,\n  MultiplyOperation: MultiplyOperation,\n  NearestFilter: NearestFilter,\n  NearestMipMapLinearFilter: NearestMipMapLinearFilter,\n  NearestMipMapNearestFilter: NearestMipMapNearestFilter,\n  NearestMipmapLinearFilter: NearestMipmapLinearFilter,\n  NearestMipmapNearestFilter: NearestMipmapNearestFilter,\n  NeverDepth: NeverDepth,\n  NeverStencilFunc: NeverStencilFunc,\n  NoBlending: NoBlending,\n  NoColors: NoColors,\n  NoToneMapping: NoToneMapping,\n  NormalBlending: NormalBlending,\n  NotEqualDepth: NotEqualDepth,\n  NotEqualStencilFunc: NotEqualStencilFunc,\n  NumberKeyframeTrack: NumberKeyframeTrack,\n  Object3D: Object3D,\n  ObjectLoader: ObjectLoader,\n  ObjectSpaceNormalMap: ObjectSpaceNormalMap,\n  OctahedronBufferGeometry: OctahedronBufferGeometry,\n  OctahedronGeometry: OctahedronGeometry,\n  OneFactor: OneFactor,\n  OneMinusDstAlphaFactor: OneMinusDstAlphaFactor,\n  OneMinusDstColorFactor: OneMinusDstColorFactor,\n  OneMinusSrcAlphaFactor: OneMinusSrcAlphaFactor,\n  OneMinusSrcColorFactor: OneMinusSrcColorFactor,\n  OrthographicCamera: OrthographicCamera,\n  PCFShadowMap: PCFShadowMap,\n  PCFSoftShadowMap: PCFSoftShadowMap,\n  PMREMGenerator: PMREMGenerator,\n  ParametricBufferGeometry: ParametricBufferGeometry,\n  ParametricGeometry: ParametricGeometry,\n  Particle: Particle,\n  ParticleBasicMaterial: ParticleBasicMaterial,\n  ParticleSystem: ParticleSystem,\n  ParticleSystemMaterial: ParticleSystemMaterial,\n  Path: Path,\n  PerspectiveCamera: PerspectiveCamera,\n  Plane: Plane,\n  PlaneBufferGeometry: PlaneBufferGeometry,\n  PlaneGeometry: PlaneGeometry,\n  PlaneHelper: PlaneHelper,\n  PointCloud: PointCloud,\n  PointCloudMaterial: PointCloudMaterial,\n  PointLight: PointLight,\n  PointLightHelper: PointLightHelper,\n  Points: Points,\n  PointsMaterial: PointsMaterial,\n  PolarGridHelper: PolarGridHelper,\n  PolyhedronBufferGeometry: PolyhedronBufferGeometry,\n  PolyhedronGeometry: PolyhedronGeometry,\n  PositionalAudio: PositionalAudio,\n  PropertyBinding: PropertyBinding,\n  PropertyMixer: PropertyMixer,\n  QuadraticBezierCurve: QuadraticBezierCurve,\n  QuadraticBezierCurve3: QuadraticBezierCurve3,\n  Quaternion: Quaternion,\n  QuaternionKeyframeTrack: QuaternionKeyframeTrack,\n  QuaternionLinearInterpolant: QuaternionLinearInterpolant,\n  REVISION: REVISION,\n  RGBADepthPacking: RGBADepthPacking,\n  RGBAFormat: RGBAFormat,\n  RGBAIntegerFormat: RGBAIntegerFormat,\n  RGBA_ASTC_10x10_Format: RGBA_ASTC_10x10_Format,\n  RGBA_ASTC_10x5_Format: RGBA_ASTC_10x5_Format,\n  RGBA_ASTC_10x6_Format: RGBA_ASTC_10x6_Format,\n  RGBA_ASTC_10x8_Format: RGBA_ASTC_10x8_Format,\n  RGBA_ASTC_12x10_Format: RGBA_ASTC_12x10_Format,\n  RGBA_ASTC_12x12_Format: RGBA_ASTC_12x12_Format,\n  RGBA_ASTC_4x4_Format: RGBA_ASTC_4x4_Format,\n  RGBA_ASTC_5x4_Format: RGBA_ASTC_5x4_Format,\n  RGBA_ASTC_5x5_Format: RGBA_ASTC_5x5_Format,\n  RGBA_ASTC_6x5_Format: RGBA_ASTC_6x5_Format,\n  RGBA_ASTC_6x6_Format: RGBA_ASTC_6x6_Format,\n  RGBA_ASTC_8x5_Format: RGBA_ASTC_8x5_Format,\n  RGBA_ASTC_8x6_Format: RGBA_ASTC_8x6_Format,\n  RGBA_ASTC_8x8_Format: RGBA_ASTC_8x8_Format,\n  RGBA_ETC2_EAC_Format: RGBA_ETC2_EAC_Format,\n  RGBA_PVRTC_2BPPV1_Format: RGBA_PVRTC_2BPPV1_Format,\n  RGBA_PVRTC_4BPPV1_Format: RGBA_PVRTC_4BPPV1_Format,\n  RGBA_S3TC_DXT1_Format: RGBA_S3TC_DXT1_Format,\n  RGBA_S3TC_DXT3_Format: RGBA_S3TC_DXT3_Format,\n  RGBA_S3TC_DXT5_Format: RGBA_S3TC_DXT5_Format,\n  RGBDEncoding: RGBDEncoding,\n  RGBEEncoding: RGBEEncoding,\n  RGBEFormat: RGBEFormat,\n  RGBFormat: RGBFormat,\n  RGBIntegerFormat: RGBIntegerFormat,\n  RGBM16Encoding: RGBM16Encoding,\n  RGBM7Encoding: RGBM7Encoding,\n  RGB_ETC1_Format: RGB_ETC1_Format,\n  RGB_ETC2_Format: RGB_ETC2_Format,\n  RGB_PVRTC_2BPPV1_Format: RGB_PVRTC_2BPPV1_Format,\n  RGB_PVRTC_4BPPV1_Format: RGB_PVRTC_4BPPV1_Format,\n  RGB_S3TC_DXT1_Format: RGB_S3TC_DXT1_Format,\n  RGFormat: RGFormat,\n  RGIntegerFormat: RGIntegerFormat,\n  RawShaderMaterial: RawShaderMaterial,\n  Ray: Ray,\n  Raycaster: Raycaster,\n  RectAreaLight: RectAreaLight,\n  RedFormat: RedFormat,\n  RedIntegerFormat: RedIntegerFormat,\n  ReinhardToneMapping: ReinhardToneMapping,\n  RepeatWrapping: RepeatWrapping,\n  ReplaceStencilOp: ReplaceStencilOp,\n  ReverseSubtractEquation: ReverseSubtractEquation,\n  RingBufferGeometry: RingBufferGeometry,\n  RingGeometry: RingGeometry,\n  SRGB8_ALPHA8_ASTC_10x10_Format: SRGB8_ALPHA8_ASTC_10x10_Format,\n  SRGB8_ALPHA8_ASTC_10x5_Format: SRGB8_ALPHA8_ASTC_10x5_Format,\n  SRGB8_ALPHA8_ASTC_10x6_Format: SRGB8_ALPHA8_ASTC_10x6_Format,\n  SRGB8_ALPHA8_ASTC_10x8_Format: SRGB8_ALPHA8_ASTC_10x8_Format,\n  SRGB8_ALPHA8_ASTC_12x10_Format: SRGB8_ALPHA8_ASTC_12x10_Format,\n  SRGB8_ALPHA8_ASTC_12x12_Format: SRGB8_ALPHA8_ASTC_12x12_Format,\n  SRGB8_ALPHA8_ASTC_4x4_Format: SRGB8_ALPHA8_ASTC_4x4_Format,\n  SRGB8_ALPHA8_ASTC_5x4_Format: SRGB8_ALPHA8_ASTC_5x4_Format,\n  SRGB8_ALPHA8_ASTC_5x5_Format: SRGB8_ALPHA8_ASTC_5x5_Format,\n  SRGB8_ALPHA8_ASTC_6x5_Format: SRGB8_ALPHA8_ASTC_6x5_Format,\n  SRGB8_ALPHA8_ASTC_6x6_Format: SRGB8_ALPHA8_ASTC_6x6_Format,\n  SRGB8_ALPHA8_ASTC_8x5_Format: SRGB8_ALPHA8_ASTC_8x5_Format,\n  SRGB8_ALPHA8_ASTC_8x6_Format: SRGB8_ALPHA8_ASTC_8x6_Format,\n  SRGB8_ALPHA8_ASTC_8x8_Format: SRGB8_ALPHA8_ASTC_8x8_Format,\n  Scene: Scene,\n  SceneUtils: SceneUtils,\n  ShaderChunk: ShaderChunk,\n  ShaderLib: ShaderLib,\n  ShaderMaterial: ShaderMaterial,\n  ShadowMaterial: ShadowMaterial,\n  Shape: Shape,\n  ShapeBufferGeometry: ShapeBufferGeometry,\n  ShapeGeometry: ShapeGeometry,\n  ShapePath: ShapePath,\n  ShapeUtils: ShapeUtils,\n  ShortType: ShortType,\n  Skeleton: Skeleton,\n  SkeletonHelper: SkeletonHelper,\n  SkinnedMesh: SkinnedMesh,\n  SmoothShading: SmoothShading,\n  Sphere: Sphere,\n  SphereBufferGeometry: SphereBufferGeometry,\n  SphereGeometry: SphereGeometry,\n  Spherical: Spherical,\n  SphericalHarmonics3: SphericalHarmonics3,\n  SphericalReflectionMapping: SphericalReflectionMapping,\n  Spline: Spline,\n  SplineCurve: SplineCurve,\n  SplineCurve3: SplineCurve3,\n  SpotLight: SpotLight,\n  SpotLightHelper: SpotLightHelper,\n  SpotLightShadow: SpotLightShadow,\n  Sprite: Sprite,\n  SpriteMaterial: SpriteMaterial,\n  SrcAlphaFactor: SrcAlphaFactor,\n  SrcAlphaSaturateFactor: SrcAlphaSaturateFactor,\n  SrcColorFactor: SrcColorFactor,\n  StaticCopyUsage: StaticCopyUsage,\n  StaticDrawUsage: StaticDrawUsage,\n  StaticReadUsage: StaticReadUsage,\n  StereoCamera: StereoCamera,\n  StreamCopyUsage: StreamCopyUsage,\n  StreamDrawUsage: StreamDrawUsage,\n  StreamReadUsage: StreamReadUsage,\n  StringKeyframeTrack: StringKeyframeTrack,\n  SubtractEquation: SubtractEquation,\n  SubtractiveBlending: SubtractiveBlending,\n  TOUCH: TOUCH,\n  TangentSpaceNormalMap: TangentSpaceNormalMap,\n  TetrahedronBufferGeometry: TetrahedronBufferGeometry,\n  TetrahedronGeometry: TetrahedronGeometry,\n  TextBufferGeometry: TextBufferGeometry,\n  TextGeometry: TextGeometry,\n  Texture: Texture,\n  TextureLoader: TextureLoader,\n  TorusBufferGeometry: TorusBufferGeometry,\n  TorusGeometry: TorusGeometry,\n  TorusKnotBufferGeometry: TorusKnotBufferGeometry,\n  TorusKnotGeometry: TorusKnotGeometry,\n  Triangle: Triangle,\n  TriangleFanDrawMode: TriangleFanDrawMode,\n  TriangleStripDrawMode: TriangleStripDrawMode,\n  TrianglesDrawMode: TrianglesDrawMode,\n  TubeBufferGeometry: TubeBufferGeometry,\n  TubeGeometry: TubeGeometry,\n  UVMapping: UVMapping,\n  Uint16Attribute: Uint16Attribute,\n  Uint16BufferAttribute: Uint16BufferAttribute,\n  Uint32Attribute: Uint32Attribute,\n  Uint32BufferAttribute: Uint32BufferAttribute,\n  Uint8Attribute: Uint8Attribute,\n  Uint8BufferAttribute: Uint8BufferAttribute,\n  Uint8ClampedAttribute: Uint8ClampedAttribute,\n  Uint8ClampedBufferAttribute: Uint8ClampedBufferAttribute,\n  Uncharted2ToneMapping: Uncharted2ToneMapping,\n  Uniform: Uniform,\n  UniformsLib: UniformsLib,\n  UniformsUtils: UniformsUtils,\n  UnsignedByteType: UnsignedByteType,\n  UnsignedInt248Type: UnsignedInt248Type,\n  UnsignedIntType: UnsignedIntType,\n  UnsignedShort4444Type: UnsignedShort4444Type,\n  UnsignedShort5551Type: UnsignedShort5551Type,\n  UnsignedShort565Type: UnsignedShort565Type,\n  UnsignedShortType: UnsignedShortType,\n  VSMShadowMap: VSMShadowMap,\n  Vector2: Vector2,\n  Vector3: Vector3,\n  Vector4: Vector4,\n  VectorKeyframeTrack: VectorKeyframeTrack,\n  Vertex: Vertex,\n  VertexColors: VertexColors,\n  VideoTexture: VideoTexture,\n  WebGLCubeRenderTarget: WebGLCubeRenderTarget,\n  WebGLMultisampleRenderTarget: WebGLMultisampleRenderTarget,\n  WebGLRenderTarget: WebGLRenderTarget,\n  WebGLRenderTargetCube: WebGLRenderTargetCube,\n  WebGLRenderer: WebGLRenderer,\n  WebGLUtils: WebGLUtils,\n  WireframeGeometry: WireframeGeometry,\n  WireframeHelper: WireframeHelper,\n  WrapAroundEnding: WrapAroundEnding,\n  XHRLoader: XHRLoader,\n  ZeroCurvatureEnding: ZeroCurvatureEnding,\n  ZeroFactor: ZeroFactor,\n  ZeroSlopeEnding: ZeroSlopeEnding,\n  ZeroStencilOp: ZeroStencilOp,\n  sRGBEncoding: sRGBEncoding\n}); // Optimized version of getInverse (5% boost in Chrome, 20% others)\n// Probably not the most important optimization but we have it so\n// keep it\n\nMatrix4.prototype.getInverse = function (m, throwOnDegenerate) {\n  // based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm\n  var te = this.elements,\n      me = m.elements,\n      n11 = me[0],\n      n21 = me[1],\n      n31 = me[2],\n      n41 = me[3],\n      n12 = me[4],\n      n22 = me[5],\n      n32 = me[6],\n      n42 = me[7],\n      n13 = me[8],\n      n23 = me[9],\n      n33 = me[10],\n      n43 = me[11],\n      n14 = me[12],\n      n24 = me[13],\n      n34 = me[14],\n      n44 = me[15],\n      // Precalculate common multiples (usage count in brackets)\n  n11n22 = n11 * n22,\n      // 3\n  n11n23 = n11 * n23,\n      // 2\n  n11n24 = n11 * n24,\n      // 2\n  n11n32 = n11 * n32,\n      // 2\n  n12n21 = n12 * n21,\n      // 4\n  n12n23 = n12 * n23,\n      // 4\n  n12n24 = n12 * n24,\n      // 3\n  n12n31 = n12 * n31,\n      // 2\n  n13n21 = n13 * n21,\n      // 2\n  n13n22 = n13 * n22,\n      // 4\n  n13n24 = n13 * n24,\n      // 3\n  n13n31 = n13 * n31,\n      // 2\n  n13n32 = n13 * n32,\n      // 3\n  n14n23 = n14 * n23,\n      // 3\n  n14n33 = n14 * n33,\n      // 4\n  n14n41 = n14 * n41,\n      // 2\n  n14n43 = n14 * n43,\n      // 4\n  n21n32 = n21 * n32,\n      // 3\n  n21n42 = n21 * n42,\n      // 3\n  n22n31 = n22 * n31,\n      // 3\n  n22n33 = n22 * n33,\n      // 2\n  n23n31 = n23 * n31,\n      // 2\n  n23n32 = n23 * n32,\n      // 4\n  n23n34 = n23 * n34,\n      // 2\n  n24n31 = n24 * n31,\n      // 2\n  n24n32 = n24 * n32,\n      // 4\n  n24n33 = n24 * n33,\n      // 4\n  n33n44 = n33 * n44,\n      // 4\n  n34n41 = n34 * n41,\n      // 3\n  n34n42 = n34 * n42,\n      // 4\n  n34n43 = n34 * n43,\n      // 4\n  //                   = 62 multiplications saved\n  t11 = n23 * n34n42 - n24n33 * n42 + n24n32 * n43 - n22 * n34n43 - n23n32 * n44 + n22 * n33n44,\n      t12 = n14n33 * n42 - n13 * n34n42 - n14n43 * n32 + n12 * n34n43 + n13n32 * n44 - n12 * n33n44,\n      t13 = n13n24 * n42 - n14n23 * n42 + n14n43 * n22 - n12n24 * n43 - n13n22 * n44 + n12n23 * n44,\n      t14 = n14 * n23n32 - n13 * n24n32 - n14n33 * n22 + n12 * n24n33 + n13n22 * n34 - n12n23 * n34;\n  var det = n11 * t11 + n21 * t12 + n31 * t13 + n41 * t14;\n\n  if (det === 0) {\n    var msg = 'THREE.Matrix4.getInverse(): can\\'t invert matrix, determinant is 0';\n\n    if (throwOnDegenerate || false) {\n      throw new Error(msg);\n    } else {\n      console.warn(msg);\n    }\n\n    return this.identity();\n  }\n\n  te[0] = t11;\n  te[1] = n24n33 * n41 - n23n34 * n41 - n24n31 * n43 + n21 * n34n43 + n23n31 * n44 - n21 * n33n44;\n  te[2] = n22 * n34n41 - n24n32 * n41 + n24n31 * n42 - n21 * n34n42 - n22n31 * n44 + n21n32 * n44;\n  te[3] = n23n32 * n41 - n22n33 * n41 - n23n31 * n42 + n21n42 * n33 + n22n31 * n43 - n21n32 * n43;\n  te[4] = t12;\n  te[5] = n13 * n34n41 - n14n33 * n41 + n14n43 * n31 - n11 * n34n43 - n13n31 * n44 + n11 * n33n44;\n  te[6] = n14n41 * n32 - n12 * n34n41 - n14 * n31 * n42 + n11 * n34n42 + n12n31 * n44 - n11n32 * n44;\n  te[7] = n12 * n33 * n41 - n13n32 * n41 + n13n31 * n42 - n11 * n33 * n42 - n12n31 * n43 + n11n32 * n43;\n  te[8] = t13;\n  te[9] = n14n23 * n41 - n13n24 * n41 - n14n43 * n21 + n11n24 * n43 + n13n21 * n44 - n11n23 * n44;\n  te[10] = n12n24 * n41 - n14n41 * n22 + n14 * n21n42 - n11n24 * n42 - n12n21 * n44 + n11n22 * n44;\n  te[11] = n13n22 * n41 - n12n23 * n41 - n13 * n21n42 + n11n23 * n42 + n12n21 * n43 - n11n22 * n43;\n  te[12] = t14;\n  te[13] = n13n24 * n31 - n14n23 * n31 + n14n33 * n21 - n11 * n24n33 - n13n21 * n34 + n11 * n23n34;\n  te[14] = n14 * n22n31 - n12n24 * n31 - n14 * n21n32 + n11 * n24n32 + n12n21 * n34 - n11n22 * n34;\n  te[15] = n12n23 * n31 - n13n22 * n31 + n13n32 * n21 - n11 * n23n32 - n12n21 * n33 + n11 * n22n33;\n  return this.multiplyScalar(1 / det);\n};\n\nvar d2r = Math.PI / 180,\n    r2d = 180 / Math.PI;\n/**\n * Get the bbox of a tile\n *\n * @name tileToBBOX\n * @param {Array<number>} tile\n * @returns {Array<number>} bbox\n * @example\n * var bbox = tileToBBOX([5, 10, 10])\n * //=bbox\n */\n\nfunction tileToBBOX(tile) {\n  var e = tile2lon(tile[0] + 1, tile[2]);\n  var w = tile2lon(tile[0], tile[2]);\n  var s = tile2lat(tile[1] + 1, tile[2]);\n  var n = tile2lat(tile[1], tile[2]);\n  return [w, s, e, n];\n}\n/**\n * Get a geojson representation of a tile\n *\n * @name tileToGeoJSON\n * @param {Array<number>} tile\n * @returns {Feature<Polygon>}\n * @example\n * var poly = tileToGeoJSON([5, 10, 10])\n * //=poly\n */\n\n\nfunction tileToGeoJSON(tile) {\n  var bbox = tileToBBOX(tile);\n  var poly = {\n    type: 'Polygon',\n    coordinates: [[[bbox[0], bbox[1]], [bbox[0], bbox[3]], [bbox[2], bbox[3]], [bbox[2], bbox[1]], [bbox[0], bbox[1]]]]\n  };\n  return poly;\n}\n\nfunction tile2lon(x, z) {\n  return x / Math.pow(2, z) * 360 - 180;\n}\n\nfunction tile2lat(y, z) {\n  var n = Math.PI - 2 * Math.PI * y / Math.pow(2, z);\n  return r2d * Math.atan(0.5 * (Math.exp(n) - Math.exp(-n)));\n}\n/**\n * Get the tile for a point at a specified zoom level\n *\n * @name pointToTile\n * @param {number} lon\n * @param {number} lat\n * @param {number} z\n * @returns {Array<number>} tile\n * @example\n * var tile = pointToTile(1, 1, 20)\n * //=tile\n */\n\n\nfunction pointToTile(lon, lat, z) {\n  var tile = pointToTileFraction(lon, lat, z);\n  tile[0] = Math.floor(tile[0]);\n  tile[1] = Math.floor(tile[1]);\n  return tile;\n}\n/**\n * Get the 4 tiles one zoom level higher\n *\n * @name getChildren\n * @param {Array<number>} tile\n * @returns {Array<Array<number>>} tiles\n * @example\n * var tiles = getChildren([5, 10, 10])\n * //=tiles\n */\n\n\nfunction getChildren(tile) {\n  return [[tile[0] * 2, tile[1] * 2, tile[2] + 1], [tile[0] * 2 + 1, tile[1] * 2, tile[2] + 1], [tile[0] * 2 + 1, tile[1] * 2 + 1, tile[2] + 1], [tile[0] * 2, tile[1] * 2 + 1, tile[2] + 1]];\n}\n/**\n * Get the tile one zoom level lower\n *\n * @name getParent\n * @param {Array<number>} tile\n * @returns {Array<number>} tile\n * @example\n * var tile = getParent([5, 10, 10])\n * //=tile\n */\n\n\nfunction getParent(tile) {\n  // top left\n  if (tile[0] % 2 === 0 && tile[1] % 2 === 0) {\n    return [tile[0] / 2, tile[1] / 2, tile[2] - 1];\n  } // bottom left\n\n\n  if (tile[0] % 2 === 0 && !tile[1] % 2 === 0) {\n    return [tile[0] / 2, (tile[1] - 1) / 2, tile[2] - 1];\n  } // top right\n\n\n  if (!tile[0] % 2 === 0 && tile[1] % 2 === 0) {\n    return [(tile[0] - 1) / 2, tile[1] / 2, tile[2] - 1];\n  } // bottom right\n\n\n  return [(tile[0] - 1) / 2, (tile[1] - 1) / 2, tile[2] - 1];\n}\n\nfunction getSiblings(tile) {\n  return getChildren(getParent(tile));\n}\n/**\n * Get the 3 sibling tiles for a tile\n *\n * @name getSiblings\n * @param {Array<number>} tile\n * @returns {Array<Array<number>>} tiles\n * @example\n * var tiles = getSiblings([5, 10, 10])\n * //=tiles\n */\n\n\nfunction hasSiblings(tile, tiles) {\n  var siblings = getSiblings(tile);\n\n  for (var i = 0; i < siblings.length; i++) {\n    if (!hasTile(tiles, siblings[i])) return false;\n  }\n\n  return true;\n}\n/**\n * Check to see if an array of tiles contains a particular tile\n *\n * @name hasTile\n * @param {Array<Array<number>>} tiles\n * @param {Array<number>} tile\n * @returns {boolean}\n * @example\n * var tiles = [\n *     [0, 0, 5],\n *     [0, 1, 5],\n *     [1, 1, 5],\n *     [1, 0, 5]\n * ]\n * hasTile(tiles, [0, 0, 5])\n * //=boolean\n */\n\n\nfunction hasTile(tiles, tile) {\n  for (var i = 0; i < tiles.length; i++) {\n    if (tilesEqual(tiles[i], tile)) return true;\n  }\n\n  return false;\n}\n/**\n * Check to see if two tiles are the same\n *\n * @name tilesEqual\n * @param {Array<number>} tile1\n * @param {Array<number>} tile2\n * @returns {boolean}\n * @example\n * tilesEqual([0, 1, 5], [0, 0, 5])\n * //=boolean\n */\n\n\nfunction tilesEqual(tile1, tile2) {\n  return tile1[0] === tile2[0] && tile1[1] === tile2[1] && tile1[2] === tile2[2];\n}\n/**\n * Get the quadkey for a tile\n *\n * @name tileToQuadkey\n * @param {Array<number>} tile\n * @returns {string} quadkey\n * @example\n * var quadkey = tileToQuadkey([0, 1, 5])\n * //=quadkey\n */\n\n\nfunction tileToQuadkey(tile) {\n  var index = '';\n\n  for (var z = tile[2]; z > 0; z--) {\n    var b = 0;\n    var mask = 1 << z - 1;\n    if ((tile[0] & mask) !== 0) b++;\n    if ((tile[1] & mask) !== 0) b += 2;\n    index += b.toString();\n  }\n\n  return index;\n}\n/**\n * Get the tile for a quadkey\n *\n * @name quadkeyToTile\n * @param {string} quadkey\n * @returns {Array<number>} tile\n * @example\n * var tile = quadkeyToTile('00001033')\n * //=tile\n */\n\n\nfunction quadkeyToTile(quadkey) {\n  var x = 0;\n  var y = 0;\n  var z = quadkey.length;\n\n  for (var i = z; i > 0; i--) {\n    var mask = 1 << i - 1;\n    var q = +quadkey[z - i];\n    if (q === 1) x |= mask;\n    if (q === 2) y |= mask;\n\n    if (q === 3) {\n      x |= mask;\n      y |= mask;\n    }\n  }\n\n  return [x, y, z];\n}\n/**\n * Get the smallest tile to cover a bbox\n *\n * @name bboxToTile\n * @param {Array<number>} bbox\n * @returns {Array<number>} tile\n * @example\n * var tile = bboxToTile([ -178, 84, -177, 85 ])\n * //=tile\n */\n\n\nfunction bboxToTile(bboxCoords) {\n  var min = pointToTile(bboxCoords[0], bboxCoords[1], 32);\n  var max = pointToTile(bboxCoords[2], bboxCoords[3], 32);\n  var bbox = [min[0], min[1], max[0], max[1]];\n  var z = getBboxZoom(bbox);\n  if (z === 0) return [0, 0, 0];\n  var x = bbox[0] >>> 32 - z;\n  var y = bbox[1] >>> 32 - z;\n  return [x, y, z];\n}\n\nfunction getBboxZoom(bbox) {\n  var MAX_ZOOM = 28;\n\n  for (var z = 0; z < MAX_ZOOM; z++) {\n    var mask = 1 << 32 - (z + 1);\n\n    if ((bbox[0] & mask) !== (bbox[2] & mask) || (bbox[1] & mask) !== (bbox[3] & mask)) {\n      return z;\n    }\n  }\n\n  return MAX_ZOOM;\n}\n/**\n * Get the precise fractional tile location for a point at a zoom level\n *\n * @name pointToTileFraction\n * @param {number} lon\n * @param {number} lat\n * @param {number} z\n * @returns {Array<number>} tile fraction\n * var tile = pointToTileFraction(30.5, 50.5, 15)\n * //=tile\n */\n\n\nfunction pointToTileFraction(lon, lat, z) {\n  var sin = Math.sin(lat * d2r),\n      z2 = Math.pow(2, z),\n      x = z2 * (lon / 360 + 0.5),\n      y = z2 * (0.5 - 0.25 * Math.log((1 + sin) / (1 - sin)) / Math.PI);\n  return [x, y, z];\n}\n\nvar tilebelt = {\n  tileToGeoJSON: tileToGeoJSON,\n  tileToBBOX: tileToBBOX,\n  getChildren: getChildren,\n  getParent: getParent,\n  getSiblings: getSiblings,\n  hasTile: hasTile,\n  hasSiblings: hasSiblings,\n  tilesEqual: tilesEqual,\n  tileToQuadkey: tileToQuadkey,\n  quadkeyToTile: quadkeyToTile,\n  pointToTile: pointToTile,\n  bboxToTile: bboxToTile,\n  pointToTileFraction: pointToTileFraction\n};\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// A collection of utility functions for converting between coordinate\n// systems\n\nvar geoproject = {\n  center: new THREE.Vector2(0, 0),\n  // Coordinate map is centered on (projected coordinates)\n  center3035: new THREE.Vector2(0, 0),\n  // Coordinate map is centered on (projected coordinates)\n  projector: null,\n  calculateGlobalOffset: function (lon, lat) {\n    // TODO define `baseZ` in one place!!!\n    const baseZ = 7;\n    const [x, y, z] = tilebelt.pointToTileFraction(lon, lat, baseZ);\n    const scale = Math.pow(2, 15 - z) * geoproject.calculateSceneScale(lon, lat);\n    return new THREE.Vector2(-x, y).multiplyScalar(scale);\n  },\n  // Calculate scale factor at zoom level 15\n  // This will let us scale the terrain to match features in scene\n  calculateSceneScale: function (lon, lat) {\n    var tile15 = tilebelt.pointToTile(lon, lat, 15);\n    var bbox15 = tilebelt.tileToBBOX(tile15);\n    var size = geoproject.project([bbox15[2], bbox15[3]]).sub(geoproject.project([bbox15[0], bbox15[1]]));\n    return size.x;\n  },\n  project: function (lonlatH, absolute) {\n    if (typeof lonlatH[0] !== 'number') {\n      // Assume we have an array, iterate over it\n      return lonlatH.map(function (x) {\n        return geoproject.project(x, absolute);\n      });\n    }\n\n    var projected = geoproject.projector.forward(lonlatH);\n\n    if (!absolute) {\n      // Hot function, so in-line vector math\n      projected[0] -= geoproject.center.x;\n      projected[1] -= geoproject.center.y;\n    }\n\n    return new THREE.Vector3(projected[0], projected[1], lonlatH[2]); // Pass through the height\n  },\n  unproject: function (v, absolute) {\n    if (Array.isArray(v)) {\n      return v.map(function (x) {\n        return geoproject.unproject(x, absolute);\n      });\n    }\n\n    var projected = [v.x, v.y];\n\n    if (!absolute) {\n      projected[0] += geoproject.center.x;\n      projected[1] += geoproject.center.y;\n    }\n\n    var unprojected = geoproject.projector.inverse(projected);\n    return [unprojected[0], unprojected[1], v.z]; // Pass through the height\n  },\n  unproject3035: function (v, absolute) {\n    if (Array.isArray(v[0])) {\n      return v.map(function (x) {\n        return geoproject.unproject3035(x, absolute);\n      });\n    }\n\n    var projected = [v[0], v[1]];\n\n    if (!absolute) {\n      projected[0] += geoproject.center3035.x;\n      projected[1] += geoproject.center3035.y;\n    }\n\n    var unprojected = geoproject.projector3035.inverse(projected);\n    return [unprojected[0], unprojected[1], v.z]; // Pass through the height\n  },\n  vectorize: function (lonlatH) {\n    if (typeof lonlatH[0] !== 'number') {\n      // Assume we have an array, iterate over it\n      var result = new Array(lonlatH.length);\n\n      for (var i = 0, il = lonlatH.length; i < il; i++) {\n        result[i] = geoproject.vectorize(lonlatH[i]);\n      }\n\n      return result;\n    }\n\n    return new THREE.Vector3(lonlatH[0], lonlatH[1], lonlatH[2]);\n  },\n  // Convert a JSON feature representation into arrays of THREE.Vectors\n  vectorizeFeature: function (feature) {\n    if (feature.projected) {\n      return geoproject.vectorize(feature.geometry.coordinates);\n    } else {\n      return geoproject.project(feature.geometry.coordinates);\n    }\n  }\n};\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nvar RenderActions = alt.generateActions('containerMounted', 'containerResized', 'fatalError', 'featureCreated', 'fontsLoaded', 'forceHD', 'onBoundsFocused', 'onLocationFocused', 'overlayDisplayed', 'needsRender', 'pause', 'play', 'renderedFeatureDisplayed', 'renderedFeatureRegister', 'setFieldOfView', 'setHD', 'setSize');\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// In order to provide frame based animation, wrap requestAnimationFrame\n// in a Store, so we can emit evens the rest of the app can listen to\n// This allows us to have multiple syncronized animations, but only one RaF\n\nfunction AnimationStore() {\n  this.paused = false;\n  this.time = 0;\n  this.bindListeners({\n    play: RenderActions.play,\n    pause: RenderActions.pause\n  }); // Setup syncronizing RaF\n\n  const tick = time => {\n    window.requestAnimationFrame(tick);\n\n    if (!this.paused) {\n      this.time = time;\n      this.emitChange();\n    }\n  };\n\n  window.requestAnimationFrame(tick);\n}\n\nAnimationStore.prototype.play = function () {\n  this.paused = false;\n  return false;\n};\n\nAnimationStore.prototype.pause = function () {\n  this.paused = true;\n  return false;\n};\n\nAnimationStore.displayName = 'AnimationStore';\nvar AnimationStore$1 = alt.createStore(AnimationStore);\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nvar CurrentLocationActions = alt.generateActions('panToPosition', 'setPosition', 'toggleTracking');\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nvar GeodataActions = alt.generateActions('addBuiltinOverlay', 'addOverlay', 'elevationBigProgress', 'elevationProgress', 'featuresProgress', 'imageryBigProgress', 'imageryProgress', 'removeOverlay', 'setElevation', 'setElevationBig', 'setFeatures', 'setHeightOffset', 'setHeightOffsetBig', 'setImagery', 'setImageryBig', 'setLiabilityUsed', 'setOSMUsed', 'setSRTMUsed', 'setTerrainMesh', 'updateHeightMap', 'updateOverlay');\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nvar UserActions = alt.generateActions('animateAlongFeature', 'doubleTapZoom', 'featureClicked', 'featureSelected', 'focusOnBounds', 'focusOnFeature', 'focusOnLocation', 'focusOnTarget', 'inputEnded', 'inputStarted', 'orbitTarget', 'panToPosition', 'rotateLeft', 'rotateRight', 'selectFeatures', 'setCamera', 'setCameraMode', 'setCameraPosition', 'setCameraTarget', 'setCurrentPlace', 'setEnvironment', 'setGeography', 'setSecondaryParams', 'setTerrainEffectContours', 'setTerrainEffectFlats', 'setTerrainEffectGrade', 'setTerrainEffectHeight', 'setTerrainEffectNone', 'startFlyover', 'toggleWidgets', 'zoomIn', 'zoomOut');\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// Store used to synchronize rendering events, from 3D engine to label overlays\n// To request a render, use the RenderActions.needsRender action\n\nfunction RenderStore() {\n  this.needsRender = false;\n  this.animating = false;\n  this.env = false;\n  this.clock = new THREE.Clock();\n  this.bindListeners({\n    scheduleRender: [CurrentLocationActions.panToPosition, CurrentLocationActions.setPosition, GeodataActions.addBuiltinOverlay, GeodataActions.addOverlay, GeodataActions.setFeatures, GeodataActions.setImageryBig, RenderActions.containerMounted, RenderActions.containerResized, RenderActions.needsRender, RenderActions.setHD, UserActions.featureSelected, UserActions.focusOnLocation, UserActions.inputEnded, UserActions.setCameraMode, UserActions.setCamera, UserActions.setCameraTarget, UserActions.setCameraPosition, UserActions.setTerrainEffectContours, UserActions.setTerrainEffectFlats, UserActions.setTerrainEffectGrade, UserActions.setTerrainEffectHeight, UserActions.setTerrainEffectNone],\n    scheduleRenderAnimated: GeodataActions.updateOverlay\n  });\n  AnimationStore$1.listen(this.tick.bind(this));\n} // Do not immediately trigger a render, rely on AnimationStore to fire\n\n\nRenderStore.prototype.scheduleRender = function (options) {\n  if (options) {\n    if (options.animating) {\n      this.animating = true;\n    }\n\n    if (options.env) {\n      this.env = true;\n    }\n  }\n\n  this.needsRender = true;\n  return false;\n};\n\nRenderStore.prototype.scheduleRenderAnimated = function () {\n  return this.scheduleRender({\n    animating: true\n  });\n}; // To avoid renders piling up emit changes syncronized by AnimationStore\n\n\nRenderStore.prototype.tick = function () {\n  if (this.needsRender) {\n    this.clock.getElapsedTime();\n    this.emitChange();\n  } // Temporarily enable renderering at all time to make controls work\n  //this.needsRender = false;\n\n\n  this.animating = false;\n  this.env = false;\n};\n\nRenderStore.displayName = 'RenderStore';\nvar RenderStore$1 = alt.createStore(RenderStore);\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nvar canvas = document.createElement('canvas');\nvar gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');\ncanvas = undefined;\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nvar createShader = function (type, src) {\n  // Create and compile shader\n  var shader = gl.createShader(type);\n  gl.shaderSource(shader, src);\n  gl.compileShader(shader); // Check for errors\n\n  var status = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\n\n  if (!status) {\n    var error = gl.getShaderInfoLog(shader);\n    console.error('Error compiling shader:\\n\\n', src, error);\n    return null;\n  }\n\n  return shader;\n};\n\nvar createProgram = function (vertShader, fragShader) {\n  // Create and link program\n  var program = gl.createProgram();\n  var vs = gl.attachShader(program, createShader(gl.VERTEX_SHADER, vertShader));\n  var fs = gl.attachShader(program, createShader(gl.FRAGMENT_SHADER, fragShader));\n  gl.linkProgram(program); // Check for errors\n\n  var status = gl.getProgramParameter(program, gl.LINK_STATUS);\n\n  if (!status) {\n    var error = gl.getProgramInfoLog(program);\n    console.error('Error linking program', program, error);\n    return null;\n  } // Clean up\n\n\n  gl.deleteShader(vs);\n  gl.deleteShader(fs);\n  return program;\n};\n\nvar utils = {\n  createProgram: createProgram\n};\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nlet log;\n{\n  log = () => {}; // Disable logging\n\n}\nvar log$1 = log;\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nlet track;\n{\n  // Mock out in production build\n  track = {\n    event: () => {},\n    timing: () => {},\n    onload: null,\n    now: () => 0\n  };\n}\nvar track$1 = track;\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nvar extensions = gl !== null ? gl.getSupportedExtensions() : []; // Find missing extensions\n\nvar needed = ['ANGLE_instanced_arrays', 'OES_standard_derivatives'];\nvar optional = ['WEBGL_depth_texture'];\nvar missing = needed.filter(function (ext) {\n  return extensions.indexOf(ext) === -1;\n});\nvar missingOptional = optional.filter(function (ext) {\n  return extensions.indexOf(ext) === -1;\n}); // Test for ability to render to textures with different formats\n// For discussion, see: http://stackoverflow.com/questions/28827511/webgl-ios-render-to-floating-point-texture\n\nvar testFramebuffer = function (ext, format) {\n  var tex, fb;\n  var ok = false;\n\n  try {\n    // Optionally check for extension\n    if (ext) {\n      var hasExt = gl.getExtension(ext);\n\n      if (!hasExt) {\n        return false;\n      }\n    }\n\n    tex = gl.createTexture();\n    gl.bindTexture(gl.TEXTURE_2D, tex); // Note using RGB for 565\n\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGB, 1, 1, 0, gl.RGB, format, null);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n    fb = gl.createFramebuffer();\n    gl.bindFramebuffer(gl.FRAMEBUFFER, fb);\n    gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, tex, 0);\n    var status = gl.checkFramebufferStatus(gl.FRAMEBUFFER);\n    ok = status === gl.FRAMEBUFFER_COMPLETE;\n  } catch (e) {\n    ok = false;\n  } finally {\n    if (tex) {\n      gl.deleteTexture(tex);\n    }\n\n    if (fb) {\n      gl.deleteFramebuffer(fb);\n    }\n  }\n\n  return ok;\n}; // The webgl module typically loads before we are ready, so track stats once loaded\n\n\ntrack$1.onload = function () {\n  track$1.event('webgl', 'supported', webgl.supported ? 'yes' : 'no');\n  track$1.event('webgl', 'render_565', webgl.render565 ? 'yes' : 'no');\n\n  if (webgl.missing.length > 0) {\n    for (var i = 0; i < webgl.missing.length; i++) {\n      track$1.event('webgl', 'missing_extension', webgl.missing[i]);\n    }\n  }\n\n  if (webgl.missingOptional.length > 0) {\n    for (var i = 0; i < webgl.missingOptional.length; i++) {\n      track$1.event('webgl', 'missing_optional_extension', webgl.missingOptional[i]);\n    }\n  }\n};\n\nvar webgl = {\n  supported: gl !== null,\n  supports: function (extension) {\n    return extensions.indexOf(extension) !== -1;\n  },\n  extensions: extensions,\n  render565: false,\n  s3tc: false,\n  pvrtc: false,\n  missing: missing,\n  missingOptional: missingOptional,\n  workers: !!window.Worker\n};\n\nif (webgl.supported) {\n  var program = utils.createProgram('void main() { gl_Position = vec4( 1.0, 1.0, 1.0, 1.0); }', 'precision mediump float; uniform sampler2D uiiii_tex; void main() { gl_FragColor = texture2D( uiiii_tex, vec2( 0.5, 0.5 ) ); }'); // Check for ability to render to a 565 texture. If we can do this\n  // we can reduce our memory footprint\n\n  webgl.render565 = testFramebuffer(null, gl.UNSIGNED_SHORT_5_6_5);\n  gl.deleteProgram(program);\n  program = undefined; // Check texture compression support\n\n  var s3tc = gl.getExtension('WEBGL_compressed_texture_s3tc') || gl.getExtension('MOZ_WEBGL_compressed_texture_s3tc') || gl.getExtension('WEBKIT_WEBGL_compressed_texture_s3tc');\n  var pvrtc = gl.getExtension('WEBGL_compressed_texture_pvrtc') || gl.getExtension('WEBKIT_WEBGL_compressed_texture_pvrtc');\n  webgl.s3tc = s3tc !== null;\n  webgl.pvrtc = pvrtc !== null; // Check for depth texture\n\n  webgl.depthTexture = webgl.supports('WEBGL_depth_texture');\n}\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// The ContainerStore provides access to the dom element that houses\n// the rendering engine, to allow for attahcing of touch events etc\n\n\nfunction ContainerStore() {\n  // Actual size of canvas element, as measured on page\n  this.width = 256;\n  this.height = 256;\n  this.lastResize = 0; // Size at which scene is rendered, derived from actual size\n  // scaled by the calculated pixel ratio such that performance\n  // doesn't suffer\n\n  this.renderRatio = 1;\n  this.renderWidth = 256;\n  this.renderHeight = 256; // Size at which to render HD layers, such as labels and markers.\n  // These we cannot render at a lower resolution as they get too blurred. This size is derived from the actual size scaled by the\n  // devicePixelRatio\n\n  this.pixelRatio = window.devicePixelRatio;\n  this.canvasWidth = 256;\n  this.canvasHeight = 256;\n  this.aspect = 1;\n  this.fov = 70;\n  this.lodScale = 10.0; // Control how far to have LOD levels\n\n  this.hd = true;\n  this.forceHd = false; // Do not enable for non-depthTexture code path. It is more\n  // trouble than it is worth as the labels jump in size\n\n  this.lowDefMove = webgl.depthTexture; // If enabled, when moving render at half-resolution\n\n  this.lowDefScale = 1.0;\n  this.element = document.createElement('div');\n  this.element.style.position = 'relative';\n  this.element.style.width = '100%';\n  this.element.style.height = '100%';\n  this.bindListeners({\n    containerResized: [RenderActions.containerResized, RenderActions.containerMounted],\n    featureSelected: UserActions.featureSelected,\n    setFieldOfView: RenderActions.setFieldOfView,\n    forceHD: RenderActions.forceHD,\n    setHD: RenderActions.setHD,\n    setSize: RenderActions.setSize,\n    inputStarted: UserActions.inputStarted,\n    inputEnded: UserActions.inputEnded\n  });\n  this.exportPublicMethods({\n    toClipSpace: this.toClipSpace.bind(this),\n    fromClipSpace: this.fromClipSpace.bind(this),\n    flipY: this.flipY.bind(this)\n  });\n  var self = this;\n  AnimationStore$1.listen(function () {\n    if (self.element.offsetWidth === 0 || self.element.offsetHeight === 0) {\n      return;\n    } // Prior to each render check our size and aspect\n\n\n    var rect = self.element.getBoundingClientRect();\n    var aspect = rect.width / rect.height;\n\n    if (aspect !== self.aspect || self.element.offsetWidth !== self.width || self.element.offsetHeight !== self.height) {\n      RenderActions.containerResized();\n    }\n  });\n} // Just trigger change events, do not provide mechanism for setting container\n\n\nContainerStore.prototype.containerResized = function () {\n  if (this.element.offsetWidth > 0 && this.element.offsetHeight > 0) {\n    // Calculate aspect from actual visible rect as a CSS transform\n    // may mean our actual size on screen is different to that\n    // given by offsetWidth/offsetHeight. However use offsetWidth\n    // and offsetHeight for the width/height as otherwise our\n    // container size is wrong. This approach enables us to animate the\n    // size and aspect of the engine, although touch-events are off\n    // when CSS scaling is applied\n    var rect = this.element.getBoundingClientRect();\n    this.aspect = rect.width / rect.height;\n    this.setSize({\n      width: this.element.offsetWidth,\n      height: this.element.offsetHeight\n    });\n    this.lastResize = RenderStore$1.getState().clock.getElapsedTime();\n  }\n};\n\nContainerStore.prototype.featureSelected = function (feature) {\n  this.element.style.cursor = feature ? 'pointer' : 'auto';\n  return false;\n};\n\nContainerStore.prototype.updateSizes = function () {\n  this.renderWidth = this.width * this.renderRatio;\n  this.renderHeight = this.height * this.renderRatio; // If we don't have depth texture support,\n  // HD renders are just the same as standard\n\n  this.pixelRatio = webgl.depthTexture ? window.devicePixelRatio : this.renderRatio;\n  this.canvasWidth = this.width * this.pixelRatio;\n  this.canvasHeight = this.height * this.pixelRatio;\n}; // Calculates the pixel ratio at which we should render\n// the scene relative to the size of our canvas\n\n\nContainerStore.prototype.getRenderRatio = function () {\n  if (!webgl.depthTexture) {\n    return 1.0;\n  }\n\n  var ratios = [1.0, 1.2, 1.5, 2.0]; //ratios = [ 0.5 ];\n\n  var limit = 1500000; // Max number of pixels to render\n\n  var r = 0;\n  var self = this;\n\n  var pixelCount = function (r) {\n    return ratios[r] * self.width * ratios[r] * self.height;\n  }; // Check if next level would result in too many pixels drawn\n\n\n  while (ratios[r + 1] && pixelCount(r + 1) < limit) {\n    r++;\n  } // Return lowest acceptable level\n\n\n  return ratios[r];\n};\n\nContainerStore.prototype.inputStarted = function () {\n  if (this.lowDefMove) {\n    var renderRatio = this.getRenderRatio();\n    this.renderRatio = Math.max(0.8, 0.75 * renderRatio);\n    this.lowDefScale = this.renderRatio / renderRatio;\n    this.updateSizes();\n  } else {\n    return false;\n  }\n};\n\nContainerStore.prototype.inputEnded = function () {\n  if (this.lowDefMove) {\n    this.renderRatio = this.getRenderRatio();\n    this.lowDefScale = 1.0;\n    this.updateSizes();\n  } else {\n    return false;\n  }\n}; // Manually set size of container. Useful for getting renderer right\n// size/fov before it is displayed\n\n\nContainerStore.prototype.setSize = function (size) {\n  this.width = size.width;\n  this.height = size.height;\n  this.lodScale = 1.5 * Math.min(1000.0 / this.width, 1.0); // works with camera.js\n\n  this.renderRatio = this.getRenderRatio();\n  this.updateSizes();\n};\n\nContainerStore.prototype.forceHD = function (hd) {\n  this.forceHd = hd;\n  this.renderRatio = this.getRenderRatio();\n  this.updateSizes();\n};\n\nContainerStore.prototype.setHD = function (hd) {\n  this.hd = hd;\n  this.renderRatio = this.getRenderRatio();\n  this.updateSizes();\n};\n\nContainerStore.prototype.setFieldOfView = function (fov) {\n  this.fov = fov;\n}; // Utility functions to convert to and from clipspace\n\n\nContainerStore.prototype.toClipSpace = function (position) {\n  return new THREE.Vector2(position.x / this.width * 2 - 1, // -1 -> 1\n  1 - position.y / this.height * 2); // 1 -> -1\n};\n\nContainerStore.prototype.fromClipSpace = function (position) {\n  return new THREE.Vector2(0.5 * (1 + position.x) * this.width, // 0 -> width\n  0.5 * (1 - position.y) * this.height); // 0 - > height\n};\n\nContainerStore.prototype.flipY = function (position) {\n  return new THREE.Vector2(position.x, this.height - position.y);\n};\n\nContainerStore.displayName = 'ContainerStore';\nvar ContainerStore$1 = alt.createStore(ContainerStore);\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// Changing the far parameter makes little difference,\n// the key one is near, as we start losing depth\n// precision based on that\n// http://www.reedbeta.com/blog/depth-precision-visualized/\n\nvar camera = new THREE.PerspectiveCamera(45, // fov\n1, // aspect\n200, // near\n2000000 // far\n);\nContainerStore$1.listen(function (state) {\n  camera.aspect = state.aspect;\n  camera.fov = state.fov / Math.max(camera.aspect, 1.0);\n  camera.updateProjectionMatrix();\n});\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n *\n * This file incorporates work covered by the following copyright and\n * permission notice:\n *\n *   The MIT License\n *\n *   Copyright © 2010-2020 three.js authors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in\n *   all copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *   THE SOFTWARE.\n */\n// This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n//\n//    Orbit - left mouse / touch: one-finger move\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - right mouse, or left mouse + ctrl/meta/shiftKey, or arrow keys / touch: two-finger move\n\nvar OrbitControls = function (object) {\n  var domElement = ContainerStore$1.getState().element;\n  if (domElement === undefined) console.warn('THREE.OrbitControls: The second parameter \"domElement\" is now mandatory.');\n  if (domElement === document) console.error('THREE.OrbitControls: \"document\" should not be used as the target \"domElement\". Please use \"renderer.domElement\" instead.');\n  this.object = object;\n  this.domElement = domElement; // Set to false to disable this control\n\n  this.enabled = true; // \"target\" sets the location of focus, where the object orbits around\n\n  this.target = new Vector3(); // How far you can dolly in and out ( PerspectiveCamera only )\n\n  this.minDistance = 0;\n  this.maxDistance = Infinity; // How far you can zoom in and out ( OrthographicCamera only )\n\n  this.minZoom = 0;\n  this.maxZoom = Infinity; // How far you can orbit vertically, upper and lower limits.\n  // Range is 0 to Math.PI radians.\n\n  this.minPolarAngle = 0.17 * Math.PI; // radians\n\n  this.maxPolarAngle = 0.33 * Math.PI; // radians\n  // How far you can orbit horizontally, upper and lower limits.\n  // If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\n\n  this.minAzimuthAngle = -Infinity; // radians\n\n  this.maxAzimuthAngle = Infinity; // radians\n  // Set to true to enable damping (inertia)\n  // If damping is enabled, you must call controls.update() in your animation loop\n\n  this.enableDamping = true;\n  this.dampingFactor = 0.05; // This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\n  // Set to false to disable zooming\n\n  this.enableZoom = true;\n  this.zoomSpeed = 0.5; // Set to false to disable rotating\n\n  this.enableRotate = true;\n  this.rotateSpeed = 1.0; // Set to false to disable panning\n\n  this.enablePan = true;\n  this.panSpeed = 1.0;\n  this.screenSpacePanning = true; // if false, pan orthogonal to world-space direction camera.up\n\n  this.keyPanSpeed = 50.0; // pixels moved per arrow key push\n  // Set to true to automatically rotate around the target\n  // If auto-rotate is enabled, you must call controls.update() in your animation loop\n\n  this.autoRotate = false;\n  this.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\n  // Set to false to disable use of the keys\n\n  this.enableKeys = true; // Lock camera to 2D overhead mode\n\n  this.lock2D = false; // The four arrow keys and -/+ for zoom\n\n  this.keys = {\n    LEFT: 37,\n    UP: 38,\n    RIGHT: 39,\n    BOTTOM: 40,\n    MINUS: 189,\n    PLUS: 187\n  }; // Mouse buttons\n\n  this.mouseButtons = {\n    LEFT: MOUSE.ROTATE,\n    MIDDLE: MOUSE.DOLLY,\n    RIGHT: MOUSE.PAN\n  }; // Touch fingers\n\n  this.touches = {\n    ONE: TOUCH.ROTATE,\n    TWO: TOUCH.DOLLY_PAN\n  }; // for reset\n\n  this.target0 = this.target.clone();\n  this.position0 = this.object.position.clone();\n  this.zoom0 = this.object.zoom; //\n  // public methods\n  //\n\n  this.getPolarAngle = function () {\n    return spherical.phi;\n  };\n\n  this.getAzimuthalAngle = function () {\n    return spherical.theta;\n  };\n\n  this.saveState = function () {\n    scope.target0.copy(scope.target);\n    scope.position0.copy(scope.object.position);\n    scope.zoom0 = scope.object.zoom;\n  };\n\n  this.setDistanceToTarget = function (d) {\n    let now = RenderStore$1.getState().clock.getElapsedTime();\n    let lastResize = ContainerStore$1.getState().lastResize; // Things get a bit chaotic when the container resizes\n    // so ignore picker events for a second after\n    // Without this we can get into a strange loop where\n    // the camera endlessly zooms out\n\n    if (now - lastResize > 1) {\n      // Get direction vector\n      scope.target.sub(scope.object.position);\n      scope.target.setLength(d);\n      scope.target.add(scope.object.position);\n    }\n  };\n\n  this.reset = function () {\n    scope.target.copy(scope.target0);\n    scope.object.position.copy(scope.position0);\n    scope.object.zoom = scope.zoom0;\n    scope.object.updateProjectionMatrix();\n    scope.dispatchEvent(changeEvent);\n    scope.update();\n    state = STATE.NONE;\n  }; // this method is exposed, but perhaps it would be better if we can make it private...\n\n\n  this.update = function () {\n    var offset = new Vector3(); // so camera.up is the orbit axis\n\n    var quat = new Quaternion().setFromUnitVectors(object.up, new Vector3(0, 1, 0));\n    var quatInverse = quat.clone().inverse();\n    var lastPosition = new Vector3();\n    var lastQuaternion = new Quaternion();\n    return function update() {\n      var position = scope.object.position;\n      offset.copy(position).sub(scope.target); // rotate offset to \"y-axis-is-up\" space\n\n      offset.applyQuaternion(quat); // angle from z-axis around y-axis\n\n      spherical.setFromVector3(offset);\n\n      if (scope.autoRotate && state === STATE.NONE) {\n        rotateLeft(getAutoRotationAngle());\n      } // For 2D override the phi to 0\n\n\n      if (scope.lock2D) {\n        if (scope._oldPhi === undefined) {\n          // Stash away old value of phi\n          scope._oldPhi = spherical.phi;\n        } // Animate to 0\n\n\n        sphericalDelta.phi = -spherical.phi;\n      } else if (scope._oldPhi !== undefined) {\n        // Animate back to old phi\n        sphericalDelta.phi = scope._oldPhi - spherical.phi;\n\n        if (Math.abs(sphericalDelta.phi) < 0.05) {\n          // End transition once close enough\n          delete scope._oldPhi;\n        }\n      }\n\n      if (scope.enableDamping) {\n        spherical.theta += sphericalDelta.theta * scope.dampingFactor;\n        spherical.phi += sphericalDelta.phi * scope.dampingFactor;\n      } else {\n        spherical.theta += sphericalDelta.theta;\n        spherical.phi += sphericalDelta.phi;\n      } // restrict theta to be between desired limits\n\n\n      spherical.theta = Math.max(scope.minAzimuthAngle, Math.min(scope.maxAzimuthAngle, spherical.theta)); // restrict phi to be between desired limits\n\n      if (!scope.lock2D && scope._oldPhi === undefined) {\n        spherical.phi = Math.max(scope.minPolarAngle, Math.min(scope.maxPolarAngle, spherical.phi));\n      }\n\n      spherical.makeSafe(); // Zoom damping needs to be stiffer otherwise it feels weird\n\n      scale -= 1;\n      var zoomDamping = 2 * scope.dampingFactor;\n      spherical.radius *= 1 + scale * zoomDamping; // restrict radius to be between desired limits\n\n      spherical.radius = Math.max(scope.minDistance, Math.min(scope.maxDistance, spherical.radius)); // move target to panned location\n\n      if (scope.enableDamping === true) {\n        scope.target.addScaledVector(panOffset, scope.dampingFactor);\n      } else {\n        scope.target.add(panOffset);\n      }\n\n      offset.setFromSpherical(spherical); // rotate offset back to \"camera-up-vector-is-up\" space\n\n      offset.applyQuaternion(quatInverse);\n      position.copy(scope.target).add(offset);\n      scope.object.lookAt(scope.target);\n\n      if (scope.enableDamping === true) {\n        sphericalDelta.theta *= 1 - scope.dampingFactor;\n        sphericalDelta.phi *= 1 - scope.dampingFactor;\n        panOffset.multiplyScalar(1 - scope.dampingFactor);\n      } else {\n        sphericalDelta.set(0, 0, 0);\n        panOffset.set(0, 0, 0);\n      }\n\n      scale *= 1 - zoomDamping;\n      scale += 1; // update condition is:\n      // min(camera displacement, camera rotation in radians)^2 > EPS\n      // using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n      if (zoomChanged || lastPosition.distanceToSquared(scope.object.position) > EPS || 8 * (1 - lastQuaternion.dot(scope.object.quaternion)) > EPS) {\n        scope.dispatchEvent(changeEvent); // To avoid heightAt lookups, set forceHeight\n\n        scope.object.position.forceHeight = true;\n        UserActions.setCamera({\n          position: scope.object.position,\n          target: scope.target\n        });\n        lastPosition.copy(scope.object.position);\n        lastQuaternion.copy(scope.object.quaternion);\n        zoomChanged = false;\n        return true;\n      }\n\n      return false;\n    };\n  }();\n\n  this.dispose = function () {\n    scope.domElement.removeEventListener('contextmenu', onContextMenu, false);\n    scope.domElement.removeEventListener('mousedown', onMouseDown, false);\n    scope.domElement.removeEventListener('wheel', onMouseWheel, {\n      capture: false,\n      passive: false\n    });\n    scope.domElement.removeEventListener('touchstart', onTouchStart, false);\n    scope.domElement.removeEventListener('touchend', onTouchEnd, false);\n    scope.domElement.removeEventListener('touchcancel', onTouchCancel, false);\n    scope.domElement.removeEventListener('touchmove', onTouchMove, false);\n    scope.domElement.ownerDocument.removeEventListener('mousemove', onMouseMove, false);\n    scope.domElement.ownerDocument.removeEventListener('mouseup', onMouseUp, false);\n    scope.domElement.removeEventListener('keydown', onKeyDown, false); //scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\n  }; //\n  // internals\n  //\n\n\n  var scope = this;\n  var changeEvent = {\n    type: 'change'\n  };\n  var STATE = {\n    NONE: -1,\n    ROTATE: 0,\n    DOLLY: 1,\n    PAN: 2,\n    TOUCH_ROTATE: 3,\n    TOUCH_PAN: 4,\n    TOUCH_DOLLY_PAN: 5,\n    TOUCH_DOLLY_ROTATE: 6\n  };\n  var state = STATE.NONE;\n  var EPS = 0.000001; // current position in spherical coordinates\n\n  var spherical = new Spherical();\n  var sphericalDelta = new Spherical();\n  var scale = 1;\n  var panOffset = new Vector3();\n  var zoomChanged = false;\n  var event0;\n  var clickTimeout = 0.3;\n  var rotateStart = new Vector2();\n  var rotateEnd = new Vector2();\n  var rotateDelta = new Vector2();\n  var panStart = new Vector2();\n  var panEnd = new Vector2();\n  var panDelta = new Vector2();\n  var dollyStart = new Vector2();\n  var dollyEnd = new Vector2();\n  var dollyDelta = new Vector2();\n\n  function getAutoRotationAngle() {\n    return 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n  }\n\n  function getZoomScale(delta) {\n    return Math.pow(0.97, delta !== undefined ? 0.01 * Math.abs(delta) : scope.zoomSpeed);\n  }\n\n  function rotateLeft(angle) {\n    sphericalDelta.theta -= angle;\n  }\n\n  function rotateUp(angle) {\n    sphericalDelta.phi -= angle;\n  }\n\n  var panLeft = function () {\n    var v = new Vector3();\n    return function panLeft(distance, objectMatrix) {\n      v.setFromMatrixColumn(objectMatrix, 0); // get X column of objectMatrix\n\n      v.multiplyScalar(-distance);\n      panOffset.add(v);\n    };\n  }();\n\n  var panUp = function () {\n    var v = new Vector3();\n    return function panUp(distance, objectMatrix) {\n      if (scope.screenSpacePanning === true) {\n        v.setFromMatrixColumn(objectMatrix, 1);\n      } else {\n        v.setFromMatrixColumn(objectMatrix, 0);\n        v.crossVectors(scope.object.up, v);\n      }\n\n      v.multiplyScalar(distance);\n      panOffset.add(v);\n    };\n  }(); // deltaX and deltaY are in pixels; right and down are positive\n\n\n  var pan = function () {\n    var offset = new Vector3();\n    return function pan(deltaX, deltaY) {\n      var element = scope.domElement;\n\n      if (scope.object.isPerspectiveCamera) {\n        // perspective\n        var position = scope.object.position;\n        offset.copy(position).sub(scope.target);\n        var targetDistance = offset.length(); // half of the fov is center to top of screen\n\n        targetDistance *= Math.tan(scope.object.fov / 2 * Math.PI / 180.0); // we use only clientHeight here so aspect ratio does not distort speed\n\n        panLeft(2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix);\n        panUp(2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix);\n      } else if (scope.object.isOrthographicCamera) {\n        // orthographic\n        panLeft(deltaX * (scope.object.right - scope.object.left) / scope.object.zoom / element.clientWidth, scope.object.matrix);\n        panUp(deltaY * (scope.object.top - scope.object.bottom) / scope.object.zoom / element.clientHeight, scope.object.matrix);\n      } else {\n        // camera neither orthographic nor perspective\n        console.warn('WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.');\n        scope.enablePan = false;\n      }\n    };\n  }();\n\n  function dollyOut(dollyScale) {\n    if (scope.object.isPerspectiveCamera) {\n      scale /= dollyScale;\n    } else if (scope.object.isOrthographicCamera) {\n      scope.object.zoom = Math.max(scope.minZoom, Math.min(scope.maxZoom, scope.object.zoom * dollyScale));\n      scope.object.updateProjectionMatrix();\n      zoomChanged = true;\n    } else {\n      console.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.');\n      scope.enableZoom = false;\n    }\n  }\n\n  function dollyIn(dollyScale) {\n    if (scope.object.isPerspectiveCamera) {\n      scale *= dollyScale;\n    } else if (scope.object.isOrthographicCamera) {\n      scope.object.zoom = Math.max(scope.minZoom, Math.min(scope.maxZoom, scope.object.zoom / dollyScale));\n      scope.object.updateProjectionMatrix();\n      zoomChanged = true;\n    } else {\n      console.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.');\n      scope.enableZoom = false;\n    }\n  } //\n  // event callbacks - update the object state\n  //\n\n\n  function handleMouseDownRotate(event) {\n    rotateStart.set(event.clientX, event.clientY);\n  }\n\n  function handleMouseDownDolly(event) {\n    dollyStart.set(event.clientX, event.clientY);\n  }\n\n  function handleMouseDownPan(event) {\n    panStart.set(event.clientX, event.clientY);\n  }\n\n  function handleMouseMoveRotate(event) {\n    rotateEnd.set(event.clientX, event.clientY);\n    rotateDelta.subVectors(rotateEnd, rotateStart).multiplyScalar(scope.rotateSpeed);\n    var element = scope.domElement;\n    rotateLeft(2 * Math.PI * rotateDelta.x / element.clientHeight); // yes, height\n\n    rotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight);\n    rotateStart.copy(rotateEnd);\n    scope.update();\n  }\n\n  function handleMouseMoveDolly(event) {\n    dollyEnd.set(event.clientX, event.clientY);\n    dollyDelta.subVectors(dollyEnd, dollyStart);\n\n    if (dollyDelta.y > 0) {\n      dollyOut(getZoomScale());\n    } else if (dollyDelta.y < 0) {\n      dollyIn(getZoomScale());\n    }\n\n    dollyStart.copy(dollyEnd);\n    scope.update();\n  }\n\n  function handleMouseMovePan(event) {\n    panEnd.set(event.clientX, event.clientY);\n    panDelta.subVectors(panEnd, panStart).multiplyScalar(scope.panSpeed);\n    pan(panDelta.x, panDelta.y);\n    panStart.copy(panEnd);\n    scope.update();\n  }\n\n  function dispatchClickEvent(event) {\n    // A bit messy way to re-dispatch the event\n    // bit it works\n    // TODO this workaround fixes behavior on Android\n    // however we should migrate to pointer events in\n    // the future, like THREE.js has\n    let useTouches = event.clientX === undefined;\n    let coords = useTouches ? event.touches[0] : event;\n    scope.dispatchEvent({\n      type: 'click',\n      srcElement: event.srcElement || event.target,\n      clientX: coords.clientX,\n      clientY: coords.clientY,\n      pageX: coords.pageX,\n      pageY: coords.pageY,\n      altKey: event.altKey,\n      detail: event.clickCount\n    });\n  }\n\n  function handleMouseUp(event) {\n    const time = RenderStore$1.getState().clock.getElapsedTime();\n\n    if (event0.clientX === event.clientX && event0.clientY === event.clientY && time - event0.time < clickTimeout) {\n      dispatchClickEvent(event0);\n    }\n  }\n\n  function handleMouseWheel(event) {\n    // deltaY isn't always reported in pixels, so do\n    // our best to normalize it somewhat. Unfortunately\n    // there is no exact way to do this, so rather try and\n    // aim for values that will match the user's expectation\n    // https://stackoverflow.com/questions/20110224/what-is-the-height-of-a-line-in-a-wheel-event-deltamode-dom-delta-line\n    var deltaY = event.deltaY;\n\n    if (event.deltaMode === event.DOM_DELTA_LINE) {\n      // Jump by a \"line\" (32px)\n      deltaY *= 32;\n    } else if (event.deltaMode === event.DOM_DELTA_PAGE) {\n      // Jump by a \"page\" (100px)\n      deltaY *= 100;\n    }\n\n    if (deltaY < 0) {\n      dollyIn(getZoomScale(deltaY));\n    } else if (deltaY > 0) {\n      dollyOut(getZoomScale(deltaY));\n    }\n\n    scope.update();\n  }\n\n  function handleKeyDown(event) {\n    var needsUpdate = false;\n\n    switch (event.keyCode) {\n      case scope.keys.UP:\n        pan(0, scope.keyPanSpeed);\n        needsUpdate = true;\n        break;\n\n      case scope.keys.BOTTOM:\n        pan(0, -scope.keyPanSpeed);\n        needsUpdate = true;\n        break;\n\n      case scope.keys.LEFT:\n        pan(scope.keyPanSpeed, 0);\n        needsUpdate = true;\n        break;\n\n      case scope.keys.RIGHT:\n        pan(-scope.keyPanSpeed, 0);\n        needsUpdate = true;\n        break;\n\n      case scope.keys.MINUS:\n        dollyOut(getZoomScale(300));\n        needsUpdate = true;\n        break;\n\n      case scope.keys.PLUS:\n        dollyIn(getZoomScale(300));\n        needsUpdate = true;\n        break;\n    }\n\n    if (needsUpdate) {\n      // prevent the browser from scrolling on cursor keys\n      event.preventDefault();\n      scope.update();\n    }\n  }\n\n  function handleTouchStartRotate(event) {\n    if (event.touches.length == 1) {\n      rotateStart.set(event.touches[0].pageX, event.touches[0].pageY);\n    } else {\n      var x = 0.5 * (event.touches[0].pageX + event.touches[1].pageX);\n      var y = 0.5 * (event.touches[0].pageY + event.touches[1].pageY);\n      rotateStart.set(x, y);\n    }\n  }\n\n  function handleTouchStartPan(event) {\n    if (event.touches.length == 1) {\n      panStart.set(event.touches[0].pageX, event.touches[0].pageY);\n    } else {\n      var x = 0.5 * (event.touches[0].pageX + event.touches[1].pageX);\n      var y = 0.5 * (event.touches[0].pageY + event.touches[1].pageY);\n      panStart.set(x, y);\n    }\n  }\n\n  function handleTouchStartDolly(event) {\n    var dx = event.touches[0].pageX - event.touches[1].pageX;\n    var dy = event.touches[0].pageY - event.touches[1].pageY;\n    var distance = Math.sqrt(dx * dx + dy * dy);\n    dollyStart.set(0, distance);\n  }\n\n  function handleTouchStartDollyPan(event) {\n    if (scope.enableZoom) handleTouchStartDolly(event);\n    if (scope.enablePan) handleTouchStartPan(event);\n  }\n\n  function handleTouchStartDollyRotate(event) {\n    if (scope.enableZoom) handleTouchStartDolly(event);\n    if (scope.enableRotate) handleTouchStartRotate(event);\n  }\n\n  function handleTouchMoveRotate(event) {\n    if (event.touches.length == 1) {\n      rotateEnd.set(event.touches[0].pageX, event.touches[0].pageY);\n    } else {\n      var x = 0.5 * (event.touches[0].pageX + event.touches[1].pageX);\n      var y = 0.5 * (event.touches[0].pageY + event.touches[1].pageY);\n      rotateEnd.set(x, y);\n    }\n\n    rotateDelta.subVectors(rotateEnd, rotateStart).multiplyScalar(scope.rotateSpeed);\n    var element = scope.domElement;\n    rotateLeft(2 * Math.PI * rotateDelta.x / element.clientHeight); // yes, height\n\n    rotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight);\n    rotateStart.copy(rotateEnd);\n  }\n\n  function handleTouchMovePan(event) {\n    if (event.touches.length == 1) {\n      panEnd.set(event.touches[0].pageX, event.touches[0].pageY);\n    } else {\n      var x = 0.5 * (event.touches[0].pageX + event.touches[1].pageX);\n      var y = 0.5 * (event.touches[0].pageY + event.touches[1].pageY);\n      panEnd.set(x, y);\n    }\n\n    panDelta.subVectors(panEnd, panStart).multiplyScalar(scope.panSpeed);\n    pan(panDelta.x, panDelta.y);\n    panStart.copy(panEnd);\n  }\n\n  function handleTouchMoveDolly(event) {\n    var dx = event.touches[0].pageX - event.touches[1].pageX;\n    var dy = event.touches[0].pageY - event.touches[1].pageY;\n    var distance = Math.sqrt(dx * dx + dy * dy);\n    dollyEnd.set(0, distance);\n    dollyDelta.set(0, Math.pow(dollyEnd.y / dollyStart.y, scope.zoomSpeed));\n    dollyOut(dollyDelta.y);\n    dollyStart.copy(dollyEnd);\n  }\n\n  function handleTouchMoveDollyPan(event) {\n    if (scope.enableZoom) handleTouchMoveDolly(event);\n    if (scope.enablePan) handleTouchMovePan(event);\n  }\n\n  function handleTouchMoveDollyRotate(event) {\n    if (scope.enableZoom) handleTouchMoveDolly(event);\n    if (scope.enableRotate) handleTouchMoveRotate(event);\n  }\n\n  const tapDeltaThreshold = 25;\n\n  function handleTouchEnd(event) {\n    const time = RenderStore$1.getState().clock.getElapsedTime();\n    let useTouches = event.clientX === undefined;\n    let coords0 = useTouches ? event0.touches[0] : event0;\n    let coords = useTouches ? event.changedTouches[0] : event;\n\n    if (event0.touches.length === 1 && Math.abs(coords0.pageX - coords.pageX) < tapDeltaThreshold && Math.abs(coords0.pageY - coords.pageY) < tapDeltaThreshold && time - event0.time < clickTimeout) {\n      dispatchClickEvent(event0);\n    }\n  }\n\n  function stashFirstEvent(event) {\n    const time = RenderStore$1.getState().clock.getElapsedTime();\n\n    if (!event0 || time - event0.time > clickTimeout) {\n      event0 = event;\n      event0.time = time;\n      event0.clickCount = 0;\n    }\n\n    event0.clickCount++;\n  } //\n  // event handlers - FSM: listen for events and reset state\n  //\n\n\n  function onMouseDown(event) {\n    if (scope.enabled === false) return; // Prevent the browser from scrolling.\n\n    event.preventDefault(); // Manually set the focus since calling preventDefault above\n    // prevents the browser from setting it automatically.\n\n    scope.domElement.focus ? scope.domElement.focus() : window.focus();\n    var mouseAction;\n\n    switch (event.button) {\n      case 0:\n        mouseAction = scope.mouseButtons.LEFT;\n        break;\n\n      case 1:\n        mouseAction = scope.mouseButtons.MIDDLE;\n        break;\n\n      case 2:\n        mouseAction = scope.mouseButtons.RIGHT;\n        break;\n\n      default:\n        mouseAction = -1;\n    }\n\n    switch (mouseAction) {\n      case MOUSE.DOLLY:\n        if (scope.enableZoom === false) return;\n        handleMouseDownDolly(event);\n        state = STATE.DOLLY;\n        break;\n\n      case MOUSE.ROTATE:\n        if (event.ctrlKey || event.metaKey || event.shiftKey) {\n          if (scope.enablePan === false) return;\n          handleMouseDownPan(event);\n          state = STATE.PAN;\n        } else {\n          if (scope.enableRotate === false) return;\n          handleMouseDownRotate(event);\n          state = STATE.ROTATE;\n        }\n\n        break;\n\n      case MOUSE.PAN:\n        if (event.ctrlKey || event.metaKey || event.shiftKey) {\n          if (scope.enableRotate === false) return;\n          handleMouseDownRotate(event);\n          state = STATE.ROTATE;\n        } else {\n          if (scope.enablePan === false) return;\n          handleMouseDownPan(event);\n          state = STATE.PAN;\n        }\n\n        break;\n\n      default:\n        state = STATE.NONE;\n    }\n\n    if (state !== STATE.NONE) {\n      scope.domElement.ownerDocument.addEventListener('mousemove', onMouseMove, false);\n      scope.domElement.ownerDocument.addEventListener('mouseup', onMouseUp, false);\n      stashFirstEvent(event);\n      UserActions.inputStarted();\n    }\n  }\n\n  function onMouseMove(event) {\n    if (scope.enabled === false) return;\n    event.preventDefault();\n\n    switch (state) {\n      case STATE.ROTATE:\n        if (scope.enableRotate === false) return;\n        handleMouseMoveRotate(event);\n        break;\n\n      case STATE.DOLLY:\n        if (scope.enableZoom === false) return;\n        handleMouseMoveDolly(event);\n        break;\n\n      case STATE.PAN:\n        if (scope.enablePan === false) return;\n        handleMouseMovePan(event);\n        break;\n    }\n  }\n\n  function onMouseUp(event) {\n    if (scope.enabled === false) return;\n    UserActions.inputEnded();\n    handleMouseUp(event);\n    scope.domElement.ownerDocument.removeEventListener('mousemove', onMouseMove, false);\n    scope.domElement.ownerDocument.removeEventListener('mouseup', onMouseUp, false);\n    state = STATE.NONE;\n  }\n\n  function onMouseWheel(event) {\n    if (scope.enabled === false || scope.enableZoom === false || state !== STATE.NONE && state !== STATE.ROTATE) return;\n    event.preventDefault();\n    event.stopPropagation();\n    UserActions.inputStarted();\n    handleMouseWheel(event);\n    UserActions.inputEnded();\n  }\n\n  function onKeyDown(event) {\n    if (scope.enabled === false || scope.enableKeys === false || scope.enablePan === false) return;\n    handleKeyDown(event);\n  }\n\n  function onTouchStart(event) {\n    if (scope.enabled === false) return;\n    event.preventDefault(); // prevent scrolling\n\n    switch (event.touches.length) {\n      case 1:\n        switch (scope.touches.ONE) {\n          case TOUCH.ROTATE:\n            if (scope.enableRotate === false) return;\n            handleTouchStartRotate(event);\n            state = STATE.TOUCH_ROTATE;\n            break;\n\n          case TOUCH.PAN:\n            if (scope.enablePan === false) return;\n            handleTouchStartPan(event);\n            state = STATE.TOUCH_PAN;\n            break;\n\n          default:\n            state = STATE.NONE;\n        }\n\n        break;\n\n      case 2:\n        switch (scope.touches.TWO) {\n          case TOUCH.DOLLY_PAN:\n            if (scope.enableZoom === false && scope.enablePan === false) return;\n            handleTouchStartDollyPan(event);\n            state = STATE.TOUCH_DOLLY_PAN;\n            break;\n\n          case TOUCH.DOLLY_ROTATE:\n            if (scope.enableZoom === false && scope.enableRotate === false) return;\n            handleTouchStartDollyRotate(event);\n            state = STATE.TOUCH_DOLLY_ROTATE;\n            break;\n\n          default:\n            state = STATE.NONE;\n        }\n\n        break;\n\n      default:\n        state = STATE.NONE;\n    }\n\n    if (state !== STATE.NONE) {\n      UserActions.inputStarted();\n      stashFirstEvent(event);\n    }\n  }\n\n  function onTouchMove(event) {\n    if (scope.enabled === false) return;\n    event.preventDefault(); // prevent scrolling\n\n    event.stopPropagation();\n\n    switch (state) {\n      case STATE.TOUCH_ROTATE:\n        if (scope.enableRotate === false) return;\n        handleTouchMoveRotate(event);\n        scope.update();\n        break;\n\n      case STATE.TOUCH_PAN:\n        if (scope.enablePan === false) return;\n        handleTouchMovePan(event);\n        scope.update();\n        break;\n\n      case STATE.TOUCH_DOLLY_PAN:\n        if (scope.enableZoom === false && scope.enablePan === false) return;\n        handleTouchMoveDollyPan(event);\n        scope.update();\n        break;\n\n      case STATE.TOUCH_DOLLY_ROTATE:\n        if (scope.enableZoom === false && scope.enableRotate === false) return;\n        handleTouchMoveDollyRotate(event);\n        scope.update();\n        break;\n\n      default:\n        state = STATE.NONE;\n    }\n  }\n\n  function onTouchCancel(event) {\n    return;\n  }\n\n  function onTouchEnd(event) {\n    if (scope.enabled === false) return;\n    UserActions.inputEnded();\n    handleTouchEnd(event);\n    state = STATE.NONE;\n  }\n\n  function onContextMenu(event) {\n    if (scope.enabled === false) return;\n    event.preventDefault();\n  } //\n\n\n  scope.domElement.addEventListener('contextmenu', onContextMenu, false);\n  scope.domElement.addEventListener('mousedown', onMouseDown, false);\n  scope.domElement.addEventListener('wheel', onMouseWheel, false);\n  scope.domElement.addEventListener('touchstart', onTouchStart, false);\n  scope.domElement.addEventListener('touchend', onTouchEnd, false);\n  scope.domElement.addEventListener('touchcancel', onTouchCancel, false);\n  scope.domElement.addEventListener('touchmove', onTouchMove, false);\n  scope.domElement.addEventListener('keydown', onKeyDown, false); // make sure element can receive keys.\n\n  if (scope.domElement.tabIndex === -1) {\n    scope.domElement.tabIndex = 0;\n  } // force an update at start\n\n\n  this.update();\n};\n\nOrbitControls.prototype = Object.create(EventDispatcher.prototype);\nOrbitControls.prototype.constructor = OrbitControls; // This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n// This is very similar to OrbitControls, another set of touch behavior\n//\n//    Orbit - right mouse, or left mouse + ctrl/meta/shiftKey / touch: two-finger rotate\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - left mouse, or arrow keys / touch: one-finger move\n\nvar MapControls = function (object, domElement) {\n  OrbitControls.call(this, object, domElement);\n  this.screenSpacePanning = false; // pan orthogonal to world-space direction camera.up\n\n  this.mouseButtons.LEFT = MOUSE.PAN;\n  this.mouseButtons.RIGHT = MOUSE.ROTATE;\n  this.touches.ONE = TOUCH.PAN;\n  this.touches.TWO = TOUCH.DOLLY_ROTATE;\n};\n\nMapControls.prototype = Object.create(EventDispatcher.prototype);\nMapControls.prototype.constructor = MapControls;\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nvar ConfigActions = alt.generateActions('configureCamera', 'configureElevationDatasource', 'configureImageryDatasource', 'setAppContainer', 'setCameraModeControlVisible', 'setCompassVisible', 'setDisplayErrors', 'setLayersControlVisible', 'setResourceUrl', 'setRotationControlVisible', 'setSeasonControlVisible', 'setUserLocationControlVisible', 'setZoomControlVisible');\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// Special store to trigger on any user input\n// Primarily used for cancelling transitions (see `utils/store`)\n\nfunction UserInputStore() {\n  this.clock = new THREE.Clock();\n  this.lastInput = this.clock.getElapsedTime();\n  this.interacting = false; // Any action in this list will cause a running transition be cancelled\n\n  this.bindListeners({\n    onInput: [CurrentLocationActions.toggleTracking, UserActions.animateAlongFeature, UserActions.doubleTapZoom, UserActions.focusOnFeature, UserActions.focusOnLocation, UserActions.focusOnTarget, UserActions.inputStarted, UserActions.inputEnded, UserActions.rotateLeft, UserActions.rotateRight, UserActions.featureClicked, UserActions.setCurrentPlace, UserActions.startFlyover, UserActions.zoomIn, UserActions.zoomOut],\n    inputStarted: UserActions.inputStarted,\n    inputEnded: UserActions.inputEnded\n  });\n}\n\nUserInputStore.prototype.onInput = function () {\n  this.lastInput = this.clock.getElapsedTime();\n};\n\nUserInputStore.prototype.inputStarted = function () {\n  this.interacting = true;\n};\n\nUserInputStore.prototype.inputEnded = function () {\n  this.interacting = false;\n  this.onInput();\n};\n\nUserInputStore.displayName = 'UserInputStore';\nvar UserInputStore$1 = alt.createStore(UserInputStore);\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nvar StoreUtils = {\n  // Transitions between an initial and final value, firing the `action` with the\n  // intermediate value\n  cancelStack: [],\n  // Track transitions to enable cancelling them (UserInputStore.listen below)\n  transition: function (action, initial, final, options) {\n    if (typeof initial !== typeof final) {\n      log$1('Error: types do not match for transition:', typeof initial, '!==', typeof final);\n      return;\n    } // Get correct lerp method based on type\n\n\n    var lerp;\n\n    if (options.lerp) {\n      lerp = options.lerp;\n    } else if (initial instanceof THREE.Vector3) {\n      lerp = StoreUtils.lerp.vector3;\n    } else if (!isNaN(initial)) {\n      lerp = StoreUtils.lerp.scalar;\n    } else {\n      log$1('Error: no lerp function for object:');\n      log$1(initial);\n      return;\n    } // options defaults\n\n\n    if (options === undefined) {\n      options = {};\n    }\n\n    if (options.duration === undefined) {\n      options.duration = 1;\n    } // in seconds\n\n\n    if (options.ease === undefined) {\n      options.ease = StoreUtils.smootherstep;\n    } else if (typeof StoreUtils[options.ease] === 'function') {\n      // Support passing of ease function by name\n      options.ease = StoreUtils[options.ease];\n    } // We're set, perform transition\n\n\n    var transition = {\n      startTime: null,\n      options: options\n    };\n\n    transition.step = function () {\n      // Lazily init start time for smoother animations\n      // Otherwise we may wait too long before first frame\n      if (!transition.startTime) {\n        transition.startTime = new Date().getTime();\n      }\n\n      var t = new Date().getTime() - transition.startTime;\n      var u = 0.001 * t / options.duration;\n\n      if (u >= 1) {\n        // Transition complete, stop listening to animation ticks\n        u = 1;\n        AnimationStore$1.unlisten(transition.step);\n        var index = StoreUtils.cancelStack.indexOf(transition.step);\n\n        if (index !== -1) {\n          StoreUtils.cancelStack.splice(index, 1);\n        }\n      } // Perform action, interpolating between initial and final values with easing\n\n\n      var eased = options.ease(u);\n      action(lerp(initial, final, eased));\n\n      if (u === 1 && typeof options.onComplete === 'function') {\n        options.onComplete();\n      }\n    };\n\n    if (!options.doNotCancel) {\n      StoreUtils.cancelStack.push(transition);\n    }\n\n    AnimationStore$1.listen(transition.step);\n  },\n  // Easing functions\n  cubicOut: function (u) {\n    return Math.pow(u, 3);\n  },\n  cubicIn: function (u) {\n    return 1 - Math.pow(1 - u, 3);\n  },\n  linear: function (u) {\n    return u;\n  },\n  smootherstep: function (u) {\n    return THREE.Math.smootherstep(u, 0, 1);\n  },\n  // Lerp functions\n  lerp: {\n    scalar: function (initial, final, u) {\n      if (isNaN(initial)) {\n        return final;\n      }\n\n      return initial + u * (final - initial);\n    },\n    array: function (initial, final, u) {\n      return initial.map(function (i, n) {\n        return StoreUtils.lerp.scalar(i, final[n], u);\n      });\n    },\n    vector3: function (initial, final, u) {\n      return initial.clone().lerp(final, u);\n    },\n    // Quadratic jump on top of standard transition\n    vector3Hop: function (height) {\n      return function (initial, final, u) {\n        var v = StoreUtils.lerp.vector3(initial, final, u);\n        v.z += height * (1 - Math.pow(2 * u - 1, 2));\n        return v;\n      };\n    },\n    // Transition while keeping set distance from center\n    vector3AngularHop: function (center, height) {\n      var v1 = new THREE.Vector3();\n      var v2 = new THREE.Vector3();\n      var axis = new THREE.Vector3(0, 0, 1);\n      return function (initial, final, u) {\n        // Move into space with center at 0,0 and flatten Z\n        var h1 = v1.subVectors(initial, center).z;\n        var h2 = v2.subVectors(final, center).z;\n        v1.setZ(0);\n        v2.setZ(0);\n        var l1 = v1.length();\n        var l2 = v2.length();\n        var theta = Math.atan2(v2.y, v2.x) - Math.atan2(v1.y, v1.x);\n\n        if (theta > Math.PI) {\n          theta -= 2 * Math.PI;\n        }\n\n        if (theta < -Math.PI) {\n          theta += 2 * Math.PI;\n        } // Rotate initial vector towards final and interpolate the length and height\n\n\n        var h = StoreUtils.lerp.scalar(h1, h2, u);\n        var l = StoreUtils.lerp.scalar(l1, l2, u);\n        v1.applyAxisAngle(axis, theta * u).setLength(l).setZ(h); // Return to world space\n\n        v1.add(center);\n        v1.z += height * (1 - Math.pow(2 * u - 1, 2));\n        return v1;\n      };\n    },\n    vector3Angular: function (center) {\n      return StoreUtils.lerp.vector3AngularHop(center, 0);\n    },\n    // For interpolating parameter objects for environment\n    // and geography\n    params: function (initial, final, u) {\n      var out = {};\n\n      for (var p in final) {\n        if (final.hasOwnProperty(p)) {\n          //out[p] = interpolate( initial[ p ], final[ p ], u );\n          if (initial[p] === undefined) {\n            // Handle case where oldParams not yet defined\n            out[p] = final[p];\n            continue;\n          }\n\n          if (typeof final[p] === 'number') {\n            out[p] = (1 - u) * initial[p] + u * final[p];\n          } else if (typeof final[p] === 'string') {\n            // For now assume this is a color\n            var color = new THREE.Color(initial[p]);\n            var newColor = new THREE.Color(final[p]);\n            var c = '#' + color.lerp(newColor, u).getHexString();\n            out[p] = c;\n          } else {\n            out[p] = final[p];\n          }\n        }\n      }\n\n      return out;\n    }\n  }\n}; // Whenever we get any user input cancel transitions\n\nUserInputStore$1.listen(function () {\n  var transition;\n\n  while (transition = StoreUtils.cancelStack.pop()) {\n    if (typeof transition.options.onCancel === 'function') {\n      transition.options.onCancel();\n    }\n\n    AnimationStore$1.unlisten(transition.step);\n  }\n});\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nfunction CurrentLocationStore() {\n  // Whether current location is too far away to be tracked\n  this.tooFar = true; // Whether we are current tracking the current location with camera\n\n  this.tracking = false; // Geolocation parameters\n\n  this.parameters = ['latitude', 'longitude', 'altitude', 'accuracy', 'altitudeAccuracy', 'heading', 'speed'];\n  this.latitude = null;\n  this.longitude = null;\n  this.altitude = 0;\n  this.accuracy = 0;\n  this.altitudeAccuracy = 0;\n  this.heading = 0;\n  this.speed = 0;\n  this.bindListeners({\n    panToPosition: CurrentLocationActions.panToPosition,\n    setPosition: CurrentLocationActions.setPosition,\n    cancelTracking: [UserActions.doubleTapZoom, UserActions.setCamera],\n    toggleTracking: CurrentLocationActions.toggleTracking\n  });\n}\n\nCurrentLocationStore.prototype.checkTooFar = function () {\n  if (!this.longitude || !this.latitude) {\n    this.tooFar = true;\n    return;\n  }\n\n  var lonlatH = [this.longitude, this.latitude, 0];\n  var position = geoproject.project(lonlatH);\n  var limit = 100000;\n  this.tooFar = Math.abs(position.x) > limit || Math.abs(position.y) > limit;\n};\n\nCurrentLocationStore.prototype.setPosition = function (position) {\n  var self = this;\n  this.parameters.forEach(function (key) {\n    self[key] = position.coords[key];\n  });\n  this.checkTooFar();\n};\n\nCurrentLocationStore.prototype.panToPosition = function (position) {\n  // No position yet, do not pan, just jump\n  if (!this.longitude || !this.latitude) {\n    return this.setPosition(position);\n  } // No longer have position, null out\n\n\n  if (position.longitude === null || position.latitude === null) {\n    return this.setPosition(position);\n  } // Otherwise, animate\n\n\n  var lastPosition = {\n    coords: {}\n  };\n  var self = this;\n  this.parameters.forEach(function (key) {\n    lastPosition.coords[key] = self[key];\n  });\n\n  var lerp = function (initial, final, u) {\n    var out = {\n      coords: {}\n    };\n    self.parameters.forEach(function (key) {\n      out.coords[key] = StoreUtils.lerp.scalar(initial.coords[key], final.coords[key], u);\n    });\n    return out;\n  };\n\n  StoreUtils.transition(CurrentLocationActions.setPosition, lastPosition, position, {\n    duration: 1.0,\n    lerp: lerp\n  });\n};\n\nCurrentLocationStore.prototype.cancelTracking = function () {\n  this.tracking = false;\n};\n\nCurrentLocationStore.prototype.toggleTracking = function () {\n  this.tracking = !this.tracking;\n};\n\nCurrentLocationStore.displayName = 'CurrentLocationStore';\nvar CurrentLocationStore$1 = alt.createStore(CurrentLocationStore);\nvar proj4 = createCommonjsModule(function (module, exports) {\n  !function (t, e) {\n    module.exports = e();\n  }(commonjsGlobal, function () {\n    function t(t, e) {\n      if (t[e]) return t[e];\n\n      for (var a, r = Object.keys(t), s = e.toLowerCase().replace(ct, \"\"), i = -1; ++i < r.length;) if (a = r[i], a.toLowerCase().replace(ct, \"\") === s) return t[a];\n    }\n\n    function e(t) {\n      if (\"string\" != typeof t) throw new Error(\"not a string\");\n      this.text = t.trim(), this.level = 0, this.place = 0, this.root = null, this.stack = [], this.currentObject = null, this.state = ft;\n    }\n\n    function a(t) {\n      return new e(t).output();\n    }\n\n    function r(t, e, a) {\n      Array.isArray(e) && (a.unshift(e), e = null);\n      var r = e ? {} : t,\n          i = a.reduce(function (t, e) {\n        return s(e, t), t;\n      }, r);\n      e && (t[e] = i);\n    }\n\n    function s(t, e) {\n      if (Array.isArray(t)) {\n        var a = t.shift();\n        if (\"PARAMETER\" === a && (a = t.shift()), 1 === t.length) return Array.isArray(t[0]) ? (e[a] = {}, void s(t[0], e[a])) : void (e[a] = t[0]);\n        if (t.length) {\n          if (\"TOWGS84\" !== a) {\n            if (\"AXIS\" === a) return a in e || (e[a] = []), void e[a].push(t);\n            Array.isArray(a) || (e[a] = {});\n            var i;\n\n            switch (a) {\n              case \"UNIT\":\n              case \"PRIMEM\":\n              case \"VERT_DATUM\":\n                return e[a] = {\n                  name: t[0].toLowerCase(),\n                  convert: t[1]\n                }, void (3 === t.length && s(t[2], e[a]));\n\n              case \"SPHEROID\":\n              case \"ELLIPSOID\":\n                return e[a] = {\n                  name: t[0],\n                  a: t[1],\n                  rf: t[2]\n                }, void (4 === t.length && s(t[3], e[a]));\n\n              case \"PROJECTEDCRS\":\n              case \"PROJCRS\":\n              case \"GEOGCS\":\n              case \"GEOCCS\":\n              case \"PROJCS\":\n              case \"LOCAL_CS\":\n              case \"GEODCRS\":\n              case \"GEODETICCRS\":\n              case \"GEODETICDATUM\":\n              case \"EDATUM\":\n              case \"ENGINEERINGDATUM\":\n              case \"VERT_CS\":\n              case \"VERTCRS\":\n              case \"VERTICALCRS\":\n              case \"COMPD_CS\":\n              case \"COMPOUNDCRS\":\n              case \"ENGINEERINGCRS\":\n              case \"ENGCRS\":\n              case \"FITTED_CS\":\n              case \"LOCAL_DATUM\":\n              case \"DATUM\":\n                return t[0] = [\"name\", t[0]], void r(e, a, t);\n\n              default:\n                for (i = -1; ++i < t.length;) if (!Array.isArray(t[i])) return s(t, e[a]);\n\n                return r(e, a, t);\n            }\n          } else e[a] = t;\n        } else e[a] = !0;\n      } else e[t] = !0;\n    }\n\n    function i(t, e) {\n      var a = e[0],\n          r = e[1];\n      !(a in t) && r in t && (t[a] = t[r], 3 === e.length && (t[a] = e[2](t[a])));\n    }\n\n    function n(t) {\n      return t * vt;\n    }\n\n    function o(t) {\n      function e(e) {\n        return e * (t.to_meter || 1);\n      }\n\n      if (\"GEOGCS\" === t.type ? t.projName = \"longlat\" : \"LOCAL_CS\" === t.type ? (t.projName = \"identity\", t.local = !0) : \"object\" == typeof t.PROJECTION ? t.projName = Object.keys(t.PROJECTION)[0] : t.projName = t.PROJECTION, t.AXIS) {\n        for (var a = \"\", r = 0, s = t.AXIS.length; r < s; ++r) {\n          var o = t.AXIS[r][0].toLowerCase();\n          -1 !== o.indexOf(\"north\") ? a += \"n\" : -1 !== o.indexOf(\"south\") ? a += \"s\" : -1 !== o.indexOf(\"east\") ? a += \"e\" : -1 !== o.indexOf(\"west\") && (a += \"w\");\n        }\n\n        2 === a.length && (a += \"u\"), 3 === a.length && (t.axis = a);\n      }\n\n      t.UNIT && (t.units = t.UNIT.name.toLowerCase(), \"metre\" === t.units && (t.units = \"meter\"), t.UNIT.convert && (\"GEOGCS\" === t.type ? t.DATUM && t.DATUM.SPHEROID && (t.to_meter = t.UNIT.convert * t.DATUM.SPHEROID.a) : t.to_meter = t.UNIT.convert));\n      var h = t.GEOGCS;\n      \"GEOGCS\" === t.type && (h = t), h && (h.DATUM ? t.datumCode = h.DATUM.name.toLowerCase() : t.datumCode = h.name.toLowerCase(), \"d_\" === t.datumCode.slice(0, 2) && (t.datumCode = t.datumCode.slice(2)), \"new_zealand_geodetic_datum_1949\" !== t.datumCode && \"new_zealand_1949\" !== t.datumCode || (t.datumCode = \"nzgd49\"), \"wgs_1984\" !== t.datumCode && \"world_geodetic_system_1984\" !== t.datumCode || (\"Mercator_Auxiliary_Sphere\" === t.PROJECTION && (t.sphere = !0), t.datumCode = \"wgs84\"), \"_ferro\" === t.datumCode.slice(-6) && (t.datumCode = t.datumCode.slice(0, -6)), \"_jakarta\" === t.datumCode.slice(-8) && (t.datumCode = t.datumCode.slice(0, -8)), ~t.datumCode.indexOf(\"belge\") && (t.datumCode = \"rnb72\"), h.DATUM && h.DATUM.SPHEROID && (t.ellps = h.DATUM.SPHEROID.name.replace(\"_19\", \"\").replace(/[Cc]larke\\_18/, \"clrk\"), \"international\" === t.ellps.toLowerCase().slice(0, 13) && (t.ellps = \"intl\"), t.a = h.DATUM.SPHEROID.a, t.rf = parseFloat(h.DATUM.SPHEROID.rf, 10)), h.DATUM && h.DATUM.TOWGS84 && (t.datum_params = h.DATUM.TOWGS84), ~t.datumCode.indexOf(\"osgb_1936\") && (t.datumCode = \"osgb36\"), ~t.datumCode.indexOf(\"osni_1952\") && (t.datumCode = \"osni52\"), (~t.datumCode.indexOf(\"tm65\") || ~t.datumCode.indexOf(\"geodetic_datum_of_1965\")) && (t.datumCode = \"ire65\"), \"ch1903+\" === t.datumCode && (t.datumCode = \"ch1903\"), ~t.datumCode.indexOf(\"israel\") && (t.datumCode = \"isr93\")), t.b && !isFinite(t.b) && (t.b = t.a);\n      [[\"standard_parallel_1\", \"Standard_Parallel_1\"], [\"standard_parallel_2\", \"Standard_Parallel_2\"], [\"false_easting\", \"False_Easting\"], [\"false_northing\", \"False_Northing\"], [\"central_meridian\", \"Central_Meridian\"], [\"latitude_of_origin\", \"Latitude_Of_Origin\"], [\"latitude_of_origin\", \"Central_Parallel\"], [\"scale_factor\", \"Scale_Factor\"], [\"k0\", \"scale_factor\"], [\"latitude_of_center\", \"Latitude_Of_Center\"], [\"latitude_of_center\", \"Latitude_of_center\"], [\"lat0\", \"latitude_of_center\", n], [\"longitude_of_center\", \"Longitude_Of_Center\"], [\"longitude_of_center\", \"Longitude_of_center\"], [\"longc\", \"longitude_of_center\", n], [\"x0\", \"false_easting\", e], [\"y0\", \"false_northing\", e], [\"long0\", \"central_meridian\", n], [\"lat0\", \"latitude_of_origin\", n], [\"lat0\", \"standard_parallel_1\", n], [\"lat1\", \"standard_parallel_1\", n], [\"lat2\", \"standard_parallel_2\", n], [\"azimuth\", \"Azimuth\"], [\"alpha\", \"azimuth\", n], [\"srsCode\", \"name\"]].forEach(function (e) {\n        return i(t, e);\n      }), t.long0 || !t.longc || \"Albers_Conic_Equal_Area\" !== t.projName && \"Lambert_Azimuthal_Equal_Area\" !== t.projName || (t.long0 = t.longc), t.lat_ts || !t.lat1 || \"Stereographic_South_Pole\" !== t.projName && \"Polar Stereographic (variant B)\" !== t.projName || (t.lat0 = n(t.lat1 > 0 ? 90 : -90), t.lat_ts = t.lat1);\n    }\n\n    function h(t) {\n      var e = this;\n\n      if (2 === arguments.length) {\n        var a = arguments[1];\n        \"string\" == typeof a ? \"+\" === a.charAt(0) ? h[t] = mt(arguments[1]) : h[t] = bt(arguments[1]) : h[t] = a;\n      } else if (1 === arguments.length) {\n        if (Array.isArray(t)) return t.map(function (t) {\n          Array.isArray(t) ? h.apply(e, t) : h(t);\n        });\n\n        if (\"string\" == typeof t) {\n          if (t in h) return h[t];\n        } else \"EPSG\" in t ? h[\"EPSG:\" + t.EPSG] = t : \"ESRI\" in t ? h[\"ESRI:\" + t.ESRI] = t : \"IAU2000\" in t ? h[\"IAU2000:\" + t.IAU2000] = t : console.log(t);\n\n        return;\n      }\n    }\n\n    function u(t) {\n      return \"string\" == typeof t;\n    }\n\n    function l(t) {\n      return t in h;\n    }\n\n    function d(t) {\n      return St.some(function (e) {\n        return t.indexOf(e) > -1;\n      });\n    }\n\n    function c(e) {\n      var a = t(e, \"authority\");\n\n      if (a) {\n        var r = t(a, \"epsg\");\n        return r && Nt.indexOf(r) > -1;\n      }\n    }\n\n    function m(e) {\n      var a = t(e, \"extension\");\n      if (a) return t(a, \"proj4\");\n    }\n\n    function f(t) {\n      return \"+\" === t[0];\n    }\n\n    function p(t) {\n      if (!u(t)) return t;\n      if (l(t)) return h[t];\n\n      if (d(t)) {\n        var e = bt(t);\n        if (c(e)) return h[\"EPSG:3857\"];\n        var a = m(e);\n        return a ? mt(a) : e;\n      }\n\n      return f(t) ? mt(t) : void 0;\n    }\n\n    function _(t) {\n      return t;\n    }\n\n    function M(t, e) {\n      var a = It.length;\n      return t.names ? (It[a] = t, t.names.forEach(function (t) {\n        Gt[t.toLowerCase()] = a;\n      }), this) : (console.log(e), !0);\n    }\n\n    function y(t, e, a, r) {\n      var s = t * t,\n          i = e * e,\n          n = (s - i) / s,\n          o = 0;\n      return r ? (s = (t *= 1 - n * (at + n * (rt + n * st))) * t, n = 0) : o = Math.sqrt(n), {\n        es: n,\n        e: o,\n        ep2: (s - i) / i\n      };\n    }\n\n    function g(e, a, r, s, i) {\n      if (!e) {\n        var n = t(Lt, s);\n        n || (n = zt), e = n.a, a = n.b, r = n.rf;\n      }\n\n      return r && !a && (a = (1 - 1 / r) * e), (0 === r || Math.abs(e - a) < it) && (i = !0, a = e), {\n        a: e,\n        b: a,\n        rf: r,\n        sphere: i\n      };\n    }\n\n    function v(t, e, a, r, s, i) {\n      var n = {};\n      return n.datum_type = void 0 === t || \"none\" === t ? $ : Y, e && (n.datum_params = e.map(parseFloat), 0 === n.datum_params[0] && 0 === n.datum_params[1] && 0 === n.datum_params[2] || (n.datum_type = Z), n.datum_params.length > 3 && (0 === n.datum_params[3] && 0 === n.datum_params[4] && 0 === n.datum_params[5] && 0 === n.datum_params[6] || (n.datum_type = K, n.datum_params[3] *= tt, n.datum_params[4] *= tt, n.datum_params[5] *= tt, n.datum_params[6] = n.datum_params[6] / 1e6 + 1))), n.a = a, n.b = r, n.es = s, n.ep2 = i, n;\n    }\n\n    function Projection(e, a) {\n      if (!(this instanceof Projection)) return new Projection(e);\n\n      a = a || function (t) {\n        if (t) throw t;\n      };\n\n      var r = p(e);\n\n      if (\"object\" == typeof r) {\n        var s = Projection.projections.get(r.projName);\n\n        if (s) {\n          if (r.datumCode && \"none\" !== r.datumCode) {\n            var i = t(Rt, r.datumCode);\n            i && (r.datum_params = i.towgs84 ? i.towgs84.split(\",\") : null, r.ellps = i.ellipse, r.datumName = i.datumName ? i.datumName : r.datumCode);\n          }\n\n          r.k0 = r.k0 || 1, r.axis = r.axis || \"enu\", r.ellps = r.ellps || \"wgs84\";\n          var n = g(r.a, r.b, r.rf, r.ellps, r.sphere),\n              o = y(n.a, n.b, n.rf, r.R_A),\n              h = r.datum || v(r.datumCode, r.datum_params, n.a, n.b, o.es, o.ep2);\n          Et(this, r), Et(this, s), this.a = n.a, this.b = n.b, this.rf = n.rf, this.sphere = n.sphere, this.es = o.es, this.e = o.e, this.ep2 = o.ep2, this.datum = h, this.init(), a(null, this);\n        } else a(e);\n      } else a(e);\n    }\n\n    function b(t, e) {\n      return t.datum_type === e.datum_type && !(t.a !== e.a || Math.abs(t.es - e.es) > 5e-11) && (t.datum_type === Z ? t.datum_params[0] === e.datum_params[0] && t.datum_params[1] === e.datum_params[1] && t.datum_params[2] === e.datum_params[2] : t.datum_type !== K || t.datum_params[0] === e.datum_params[0] && t.datum_params[1] === e.datum_params[1] && t.datum_params[2] === e.datum_params[2] && t.datum_params[3] === e.datum_params[3] && t.datum_params[4] === e.datum_params[4] && t.datum_params[5] === e.datum_params[5] && t.datum_params[6] === e.datum_params[6]);\n    }\n\n    function S(t, e, a) {\n      var r,\n          s,\n          i,\n          n,\n          o = t.x,\n          h = t.y,\n          u = t.z ? t.z : 0;\n      if (h < -et && h > -1.001 * et) h = -et;else if (h > et && h < 1.001 * et) h = et;else {\n        if (h < -et) return {\n          x: -1 / 0,\n          y: -1 / 0,\n          z: t.z\n        };\n        if (h > et) return {\n          x: 1 / 0,\n          y: 1 / 0,\n          z: t.z\n        };\n      }\n      return o > Math.PI && (o -= 2 * Math.PI), s = Math.sin(h), n = Math.cos(h), i = s * s, r = a / Math.sqrt(1 - e * i), {\n        x: (r + u) * n * Math.cos(o),\n        y: (r + u) * n * Math.sin(o),\n        z: (r * (1 - e) + u) * s\n      };\n    }\n\n    function N(t, e, a, r) {\n      var s,\n          i,\n          n,\n          o,\n          h,\n          u,\n          l,\n          d,\n          c,\n          m,\n          f,\n          p,\n          _,\n          M,\n          y,\n          g,\n          v = t.x,\n          b = t.y,\n          S = t.z ? t.z : 0;\n\n      if (s = Math.sqrt(v * v + b * b), i = Math.sqrt(v * v + b * b + S * S), s / a < 1e-12) {\n        if (M = 0, i / a < 1e-12) return y = et, g = -r, {\n          x: t.x,\n          y: t.y,\n          z: t.z\n        };\n      } else M = Math.atan2(b, v);\n\n      n = S / i, d = (o = s / i) * (1 - e) * (h = 1 / Math.sqrt(1 - e * (2 - e) * o * o)), c = n * h, _ = 0;\n\n      do {\n        _++, u = e * (l = a / Math.sqrt(1 - e * c * c)) / (l + (g = s * d + S * c - l * (1 - e * c * c))), p = (f = n * (h = 1 / Math.sqrt(1 - u * (2 - u) * o * o))) * d - (m = o * (1 - u) * h) * c, d = m, c = f;\n      } while (p * p > 1e-24 && _ < 30);\n\n      return y = Math.atan(f / Math.abs(m)), {\n        x: M,\n        y: y,\n        z: g\n      };\n    }\n\n    function E(t, e, a) {\n      if (e === Z) return {\n        x: t.x + a[0],\n        y: t.y + a[1],\n        z: t.z + a[2]\n      };\n\n      if (e === K) {\n        var r = a[0],\n            s = a[1],\n            i = a[2],\n            n = a[3],\n            o = a[4],\n            h = a[5],\n            u = a[6];\n        return {\n          x: u * (t.x - h * t.y + o * t.z) + r,\n          y: u * (h * t.x + t.y - n * t.z) + s,\n          z: u * (-o * t.x + n * t.y + t.z) + i\n        };\n      }\n    }\n\n    function w(t, e, a) {\n      if (e === Z) return {\n        x: t.x - a[0],\n        y: t.y - a[1],\n        z: t.z - a[2]\n      };\n\n      if (e === K) {\n        var r = a[0],\n            s = a[1],\n            i = a[2],\n            n = a[3],\n            o = a[4],\n            h = a[5],\n            u = a[6],\n            l = (t.x - r) / u,\n            d = (t.y - s) / u,\n            c = (t.z - i) / u;\n        return {\n          x: l + h * d - o * c,\n          y: -h * l + d + n * c,\n          z: o * l - n * d + c\n        };\n      }\n    }\n\n    function C(t) {\n      return t === Z || t === K;\n    }\n\n    function x(t) {\n      if (\"function\" == typeof Number.isFinite) {\n        if (Number.isFinite(t)) return;\n        throw new TypeError(\"coordinates must be finite numbers\");\n      }\n\n      if (\"number\" != typeof t || t !== t || !isFinite(t)) throw new TypeError(\"coordinates must be finite numbers\");\n    }\n\n    function O(t, e) {\n      return (t.datum.datum_type === Z || t.datum.datum_type === K) && \"WGS84\" !== e.datumCode || (e.datum.datum_type === Z || e.datum.datum_type === K) && \"WGS84\" !== t.datumCode;\n    }\n\n    function A(t, e, a) {\n      var r;\n      return Array.isArray(a) && (a = qt(a)), Ut(a), t.datum && e.datum && O(t, e) && (a = A(t, r = new Projection(\"WGS84\"), a), t = r), \"enu\" !== t.axis && (a = Dt(t, !1, a)), \"longlat\" === t.projName ? a = {\n        x: a.x * nt,\n        y: a.y * nt,\n        z: a.z || 0\n      } : (t.to_meter && (a = {\n        x: a.x * t.to_meter,\n        y: a.y * t.to_meter,\n        z: a.z || 0\n      }), a = t.inverse(a)), t.from_greenwich && (a.x += t.from_greenwich), a = Tt(t.datum, e.datum, a), e.from_greenwich && (a = {\n        x: a.x - e.from_greenwich,\n        y: a.y,\n        z: a.z || 0\n      }), \"longlat\" === e.projName ? a = {\n        x: a.x * ot,\n        y: a.y * ot,\n        z: a.z || 0\n      } : (a = e.forward(a), e.to_meter && (a = {\n        x: a.x / e.to_meter,\n        y: a.y / e.to_meter,\n        z: a.z || 0\n      })), \"enu\" !== e.axis ? Dt(e, !0, a) : a;\n    }\n\n    function P(t, e, a) {\n      var r, s, i;\n      return Array.isArray(a) ? (r = A(t, e, a) || {\n        x: NaN,\n        y: NaN\n      }, a.length > 2 ? void 0 !== t.name && \"geocent\" === t.name || void 0 !== e.name && \"geocent\" === e.name ? \"number\" == typeof r.z ? [r.x, r.y, r.z].concat(a.splice(3)) : [r.x, r.y, a[2]].concat(a.splice(3)) : [r.x, r.y].concat(a.splice(2)) : [r.x, r.y]) : (s = A(t, e, a), 2 === (i = Object.keys(a)).length ? s : (i.forEach(function (r) {\n        if (void 0 !== t.name && \"geocent\" === t.name || void 0 !== e.name && \"geocent\" === e.name) {\n          if (\"x\" === r || \"y\" === r || \"z\" === r) return;\n        } else if (\"x\" === r || \"y\" === r) return;\n\n        s[r] = a[r];\n      }), s));\n    }\n\n    function G(t) {\n      return t instanceof Projection ? t : t.oProj ? t.oProj : Projection(t);\n    }\n\n    function I(t, e, a) {\n      t = G(t);\n      var r,\n          s = !1;\n      return void 0 === e ? (e = t, t = jt, s = !0) : (void 0 !== e.x || Array.isArray(e)) && (a = e, e = t, t = jt, s = !0), e = G(e), a ? P(t, e, a) : (r = {\n        forward: function (a) {\n          return P(t, e, a);\n        },\n        inverse: function (a) {\n          return P(e, t, a);\n        }\n      }, s && (r.oProj = e), r);\n    }\n\n    function k(t, e) {\n      return e = e || 5, U(T({\n        lat: t[1],\n        lon: t[0]\n      }), e);\n    }\n\n    function L(t) {\n      var e = D(Q(t.toUpperCase()));\n      return e.lat && e.lon ? [e.lon, e.lat] : [(e.left + e.right) / 2, (e.top + e.bottom) / 2];\n    }\n\n    function z(t) {\n      return t * (Math.PI / 180);\n    }\n\n    function R(t) {\n      return t / Math.PI * 180;\n    }\n\n    function T(t) {\n      var e,\n          a,\n          r,\n          s,\n          i,\n          n,\n          o,\n          h = t.lat,\n          u = t.lon,\n          l = 6378137,\n          d = z(h),\n          c = z(u);\n      o = Math.floor((u + 180) / 6) + 1, 180 === u && (o = 60), h >= 56 && h < 64 && u >= 3 && u < 12 && (o = 32), h >= 72 && h < 84 && (u >= 0 && u < 9 ? o = 31 : u >= 9 && u < 21 ? o = 33 : u >= 21 && u < 33 ? o = 35 : u >= 33 && u < 42 && (o = 37)), n = z(6 * (o - 1) - 180 + 3), e = l / Math.sqrt(1 - .00669438 * Math.sin(d) * Math.sin(d)), a = Math.tan(d) * Math.tan(d), r = .006739496752268451 * Math.cos(d) * Math.cos(d);\n      var m = .9996 * e * ((s = Math.cos(d) * (c - n)) + (1 - a + r) * s * s * s / 6 + (5 - 18 * a + a * a + 72 * r - .39089081163157013) * s * s * s * s * s / 120) + 5e5,\n          f = .9996 * ((i = l * (.9983242984503243 * d - .002514607064228144 * Math.sin(2 * d) + 2639046602129982e-21 * Math.sin(4 * d) - 3.418046101696858e-9 * Math.sin(6 * d))) + e * Math.tan(d) * (s * s / 2 + (5 - a + 9 * r + 4 * r * r) * s * s * s * s / 24 + (61 - 58 * a + a * a + 600 * r - 2.2240339282485886) * s * s * s * s * s * s / 720));\n      return h < 0 && (f += 1e7), {\n        northing: Math.round(f),\n        easting: Math.round(m),\n        zoneNumber: o,\n        zoneLetter: q(h)\n      };\n    }\n\n    function D(t) {\n      var e = t.northing,\n          a = t.easting,\n          r = t.zoneLetter,\n          s = t.zoneNumber;\n      if (s < 0 || s > 60) return null;\n      var i,\n          n,\n          o,\n          h,\n          u,\n          l,\n          d,\n          c,\n          m = 6378137,\n          f = (1 - Math.sqrt(.99330562)) / (1 + Math.sqrt(.99330562)),\n          p = a - 5e5,\n          _ = e;\n      r < \"N\" && (_ -= 1e7), l = 6 * (s - 1) - 180 + 3, c = (d = _ / .9996 / 6367449.145945056) + (3 * f / 2 - 27 * f * f * f / 32) * Math.sin(2 * d) + (21 * f * f / 16 - 55 * f * f * f * f / 32) * Math.sin(4 * d) + 151 * f * f * f / 96 * Math.sin(6 * d), i = m / Math.sqrt(1 - .00669438 * Math.sin(c) * Math.sin(c)), n = Math.tan(c) * Math.tan(c), o = .006739496752268451 * Math.cos(c) * Math.cos(c), h = .99330562 * m / Math.pow(1 - .00669438 * Math.sin(c) * Math.sin(c), 1.5), u = p / (.9996 * i);\n      var M = c - i * Math.tan(c) / h * (u * u / 2 - (5 + 3 * n + 10 * o - 4 * o * o - .06065547077041606) * u * u * u * u / 24 + (61 + 90 * n + 298 * o + 45 * n * n - 1.6983531815716497 - 3 * o * o) * u * u * u * u * u * u / 720);\n      M = R(M);\n      var y = (u - (1 + 2 * n + o) * u * u * u / 6 + (5 - 2 * o + 28 * n - 3 * o * o + .05391597401814761 + 24 * n * n) * u * u * u * u * u / 120) / Math.cos(c);\n      y = l + R(y);\n      var g;\n\n      if (t.accuracy) {\n        var v = D({\n          northing: t.northing + t.accuracy,\n          easting: t.easting + t.accuracy,\n          zoneLetter: t.zoneLetter,\n          zoneNumber: t.zoneNumber\n        });\n        g = {\n          top: v.lat,\n          right: v.lon,\n          bottom: M,\n          left: y\n        };\n      } else g = {\n        lat: M,\n        lon: y\n      };\n\n      return g;\n    }\n\n    function q(t) {\n      var e = \"Z\";\n      return 84 >= t && t >= 72 ? e = \"X\" : 72 > t && t >= 64 ? e = \"W\" : 64 > t && t >= 56 ? e = \"V\" : 56 > t && t >= 48 ? e = \"U\" : 48 > t && t >= 40 ? e = \"T\" : 40 > t && t >= 32 ? e = \"S\" : 32 > t && t >= 24 ? e = \"R\" : 24 > t && t >= 16 ? e = \"Q\" : 16 > t && t >= 8 ? e = \"P\" : 8 > t && t >= 0 ? e = \"N\" : 0 > t && t >= -8 ? e = \"M\" : -8 > t && t >= -16 ? e = \"L\" : -16 > t && t >= -24 ? e = \"K\" : -24 > t && t >= -32 ? e = \"J\" : -32 > t && t >= -40 ? e = \"H\" : -40 > t && t >= -48 ? e = \"G\" : -48 > t && t >= -56 ? e = \"F\" : -56 > t && t >= -64 ? e = \"E\" : -64 > t && t >= -72 ? e = \"D\" : -72 > t && t >= -80 && (e = \"C\"), e;\n    }\n\n    function U(t, e) {\n      var a = \"00000\" + t.easting,\n          r = \"00000\" + t.northing;\n      return t.zoneNumber + t.zoneLetter + j(t.easting, t.northing, t.zoneNumber) + a.substr(a.length - 5, e) + r.substr(r.length - 5, e);\n    }\n\n    function j(t, e, a) {\n      var r = F(a);\n      return W(Math.floor(t / 1e5), Math.floor(e / 1e5) % 20, r);\n    }\n\n    function F(t) {\n      var e = t % Ft;\n      return 0 === e && (e = Ft), e;\n    }\n\n    function W(t, e, a) {\n      var r = a - 1,\n          s = Wt.charCodeAt(r),\n          i = Qt.charCodeAt(r),\n          n = s + t - 1,\n          o = i + e,\n          h = !1;\n      return n > Xt && (n = n - Xt + Bt - 1, h = !0), (n === Jt || s < Jt && n > Jt || (n > Jt || s < Jt) && h) && n++, (n === Ht || s < Ht && n > Ht || (n > Ht || s < Ht) && h) && ++n === Jt && n++, n > Xt && (n = n - Xt + Bt - 1), o > Vt ? (o = o - Vt + Bt - 1, h = !0) : h = !1, (o === Jt || i < Jt && o > Jt || (o > Jt || i < Jt) && h) && o++, (o === Ht || i < Ht && o > Ht || (o > Ht || i < Ht) && h) && ++o === Jt && o++, o > Vt && (o = o - Vt + Bt - 1), String.fromCharCode(n) + String.fromCharCode(o);\n    }\n\n    function Q(t) {\n      if (t && 0 === t.length) throw \"MGRSPoint coverting from nothing\";\n\n      for (var e, a = t.length, r = null, s = \"\", i = 0; !/[A-Z]/.test(e = t.charAt(i));) {\n        if (i >= 2) throw \"MGRSPoint bad conversion from: \" + t;\n        s += e, i++;\n      }\n\n      var n = parseInt(s, 10);\n      if (0 === i || i + 3 > a) throw \"MGRSPoint bad conversion from: \" + t;\n      var o = t.charAt(i++);\n      if (o <= \"A\" || \"B\" === o || \"Y\" === o || o >= \"Z\" || \"I\" === o || \"O\" === o) throw \"MGRSPoint zone letter \" + o + \" not handled: \" + t;\n      r = t.substring(i, i += 2);\n\n      for (var h = F(n), u = B(r.charAt(0), h), l = J(r.charAt(1), h); l < H(o);) l += 2e6;\n\n      var d = a - i;\n      if (d % 2 != 0) throw \"MGRSPoint has to have an even number \\nof digits after the zone letter and two 100km letters - front \\nhalf for easting meters, second half for \\nnorthing meters\" + t;\n\n      var c,\n          m,\n          f,\n          p,\n          _,\n          M = d / 2,\n          y = 0,\n          g = 0;\n\n      return M > 0 && (c = 1e5 / Math.pow(10, M), m = t.substring(i, i + M), y = parseFloat(m) * c, f = t.substring(i + M), g = parseFloat(f) * c), p = y + u, _ = g + l, {\n        easting: p,\n        northing: _,\n        zoneLetter: o,\n        zoneNumber: n,\n        accuracy: c\n      };\n    }\n\n    function B(t, e) {\n      for (var a = Wt.charCodeAt(e - 1), r = 1e5, s = !1; a !== t.charCodeAt(0);) {\n        if (++a === Jt && a++, a === Ht && a++, a > Xt) {\n          if (s) throw \"Bad character: \" + t;\n          a = Bt, s = !0;\n        }\n\n        r += 1e5;\n      }\n\n      return r;\n    }\n\n    function J(t, e) {\n      if (t > \"V\") throw \"MGRSPoint given invalid Northing \" + t;\n\n      for (var a = Qt.charCodeAt(e - 1), r = 0, s = !1; a !== t.charCodeAt(0);) {\n        if (++a === Jt && a++, a === Ht && a++, a > Vt) {\n          if (s) throw \"Bad character: \" + t;\n          a = Bt, s = !0;\n        }\n\n        r += 1e5;\n      }\n\n      return r;\n    }\n\n    function H(t) {\n      var e;\n\n      switch (t) {\n        case \"C\":\n          e = 11e5;\n          break;\n\n        case \"D\":\n          e = 2e6;\n          break;\n\n        case \"E\":\n          e = 28e5;\n          break;\n\n        case \"F\":\n          e = 37e5;\n          break;\n\n        case \"G\":\n          e = 46e5;\n          break;\n\n        case \"H\":\n          e = 55e5;\n          break;\n\n        case \"J\":\n          e = 64e5;\n          break;\n\n        case \"K\":\n          e = 73e5;\n          break;\n\n        case \"L\":\n          e = 82e5;\n          break;\n\n        case \"M\":\n          e = 91e5;\n          break;\n\n        case \"N\":\n          e = 0;\n          break;\n\n        case \"P\":\n          e = 8e5;\n          break;\n\n        case \"Q\":\n          e = 17e5;\n          break;\n\n        case \"R\":\n          e = 26e5;\n          break;\n\n        case \"S\":\n          e = 35e5;\n          break;\n\n        case \"T\":\n          e = 44e5;\n          break;\n\n        case \"U\":\n          e = 53e5;\n          break;\n\n        case \"V\":\n          e = 62e5;\n          break;\n\n        case \"W\":\n          e = 7e6;\n          break;\n\n        case \"X\":\n          e = 79e5;\n          break;\n\n        default:\n          e = -1;\n      }\n\n      if (e >= 0) return e;\n      throw \"Invalid zone letter: \" + t;\n    }\n\n    function Point(t, e, a) {\n      if (!(this instanceof Point)) return new Point(t, e, a);\n      if (Array.isArray(t)) this.x = t[0], this.y = t[1], this.z = t[2] || 0;else if (\"object\" == typeof t) this.x = t.x, this.y = t.y, this.z = t.z || 0;else if (\"string\" == typeof t && void 0 === e) {\n        var r = t.split(\",\");\n        this.x = parseFloat(r[0], 10), this.y = parseFloat(r[1], 10), this.z = parseFloat(r[2], 10) || 0;\n      } else this.x = t, this.y = e, this.z = a || 0;\n      console.warn(\"proj4.Point will be removed in version 3, use proj4.toPoint\");\n    }\n\n    function V(t) {\n      var e,\n          a = [];\n      return a[0] = t * Yt, e = t * t, a[0] += e * $t, a[1] = e * ee, e *= t, a[0] += e * te, a[1] += e * ae, a[2] = e * re, a;\n    }\n\n    function X(t, e) {\n      var a = t + t;\n      return t + e[0] * Math.sin(a) + e[1] * Math.sin(a + a) + e[2] * Math.sin(a + a + a);\n    }\n\n    var Z = 1,\n        K = 2,\n        Y = 4,\n        $ = 5,\n        tt = 484813681109536e-20,\n        et = Math.PI / 2,\n        at = .16666666666666666,\n        rt = .04722222222222222,\n        st = .022156084656084655,\n        it = 1e-10,\n        nt = .017453292519943295,\n        ot = 57.29577951308232,\n        ht = Math.PI / 4,\n        ut = 2 * Math.PI,\n        lt = {};\n    lt.greenwich = 0, lt.lisbon = -9.131906111111, lt.paris = 2.337229166667, lt.bogota = -74.080916666667, lt.madrid = -3.687938888889, lt.rome = 12.452333333333, lt.bern = 7.439583333333, lt.jakarta = 106.807719444444, lt.ferro = -17.666666666667, lt.brussels = 4.367975, lt.stockholm = 18.058277777778, lt.athens = 23.7163375, lt.oslo = 10.722916666667;\n\n    var dt = {\n      ft: {\n        to_meter: .3048\n      },\n      \"us-ft\": {\n        to_meter: 1200 / 3937\n      }\n    },\n        ct = /[\\s_\\-\\/\\(\\)]/g,\n        mt = function (e) {\n      var a,\n          r,\n          s,\n          i = {},\n          n = e.split(\"+\").map(function (t) {\n        return t.trim();\n      }).filter(function (t) {\n        return t;\n      }).reduce(function (t, e) {\n        var a = e.split(\"=\");\n        return a.push(!0), t[a[0].toLowerCase()] = a[1], t;\n      }, {}),\n          o = {\n        proj: \"projName\",\n        datum: \"datumCode\",\n        rf: function (t) {\n          i.rf = parseFloat(t);\n        },\n        lat_0: function (t) {\n          i.lat0 = t * nt;\n        },\n        lat_1: function (t) {\n          i.lat1 = t * nt;\n        },\n        lat_2: function (t) {\n          i.lat2 = t * nt;\n        },\n        lat_ts: function (t) {\n          i.lat_ts = t * nt;\n        },\n        lon_0: function (t) {\n          i.long0 = t * nt;\n        },\n        lon_1: function (t) {\n          i.long1 = t * nt;\n        },\n        lon_2: function (t) {\n          i.long2 = t * nt;\n        },\n        alpha: function (t) {\n          i.alpha = parseFloat(t) * nt;\n        },\n        lonc: function (t) {\n          i.longc = t * nt;\n        },\n        x_0: function (t) {\n          i.x0 = parseFloat(t);\n        },\n        y_0: function (t) {\n          i.y0 = parseFloat(t);\n        },\n        k_0: function (t) {\n          i.k0 = parseFloat(t);\n        },\n        k: function (t) {\n          i.k0 = parseFloat(t);\n        },\n        a: function (t) {\n          i.a = parseFloat(t);\n        },\n        b: function (t) {\n          i.b = parseFloat(t);\n        },\n        r_a: function () {\n          i.R_A = !0;\n        },\n        zone: function (t) {\n          i.zone = parseInt(t, 10);\n        },\n        south: function () {\n          i.utmSouth = !0;\n        },\n        towgs84: function (t) {\n          i.datum_params = t.split(\",\").map(function (t) {\n            return parseFloat(t);\n          });\n        },\n        to_meter: function (t) {\n          i.to_meter = parseFloat(t);\n        },\n        units: function (e) {\n          i.units = e;\n          var a = t(dt, e);\n          a && (i.to_meter = a.to_meter);\n        },\n        from_greenwich: function (t) {\n          i.from_greenwich = t * nt;\n        },\n        pm: function (e) {\n          var a = t(lt, e);\n          i.from_greenwich = (a || parseFloat(e)) * nt;\n        },\n        nadgrids: function (t) {\n          \"@null\" === t ? i.datumCode = \"none\" : i.nadgrids = t;\n        },\n        axis: function (t) {\n          3 === t.length && -1 !== \"ewnsud\".indexOf(t.substr(0, 1)) && -1 !== \"ewnsud\".indexOf(t.substr(1, 1)) && -1 !== \"ewnsud\".indexOf(t.substr(2, 1)) && (i.axis = t);\n        }\n      };\n\n      for (a in n) r = n[a], a in o ? \"function\" == typeof (s = o[a]) ? s(r) : i[s] = r : i[a] = r;\n\n      return \"string\" == typeof i.datumCode && \"WGS84\" !== i.datumCode && (i.datumCode = i.datumCode.toLowerCase()), i;\n    },\n        ft = 1,\n        pt = /\\s/,\n        _t = /[A-Za-z]/,\n        Mt = /[A-Za-z84]/,\n        yt = /[,\\]]/,\n        gt = /[\\d\\.E\\-\\+]/;\n\n    e.prototype.readCharicter = function () {\n      var t = this.text[this.place++];\n      if (4 !== this.state) for (; pt.test(t);) {\n        if (this.place >= this.text.length) return;\n        t = this.text[this.place++];\n      }\n\n      switch (this.state) {\n        case ft:\n          return this.neutral(t);\n\n        case 2:\n          return this.keyword(t);\n\n        case 4:\n          return this.quoted(t);\n\n        case 5:\n          return this.afterquote(t);\n\n        case 3:\n          return this.number(t);\n\n        case -1:\n          return;\n      }\n    }, e.prototype.afterquote = function (t) {\n      if ('\"' === t) return this.word += '\"', void (this.state = 4);\n      if (yt.test(t)) return this.word = this.word.trim(), void this.afterItem(t);\n      throw new Error(\"havn't handled \\\"\" + t + '\" in afterquote yet, index ' + this.place);\n    }, e.prototype.afterItem = function (t) {\n      return \",\" === t ? (null !== this.word && this.currentObject.push(this.word), this.word = null, void (this.state = ft)) : \"]\" === t ? (this.level--, null !== this.word && (this.currentObject.push(this.word), this.word = null), this.state = ft, this.currentObject = this.stack.pop(), void (this.currentObject || (this.state = -1))) : void 0;\n    }, e.prototype.number = function (t) {\n      if (!gt.test(t)) {\n        if (yt.test(t)) return this.word = parseFloat(this.word), void this.afterItem(t);\n        throw new Error(\"havn't handled \\\"\" + t + '\" in number yet, index ' + this.place);\n      }\n\n      this.word += t;\n    }, e.prototype.quoted = function (t) {\n      '\"' !== t ? this.word += t : this.state = 5;\n    }, e.prototype.keyword = function (t) {\n      if (Mt.test(t)) this.word += t;else {\n        if (\"[\" === t) {\n          var e = [];\n          return e.push(this.word), this.level++, null === this.root ? this.root = e : this.currentObject.push(e), this.stack.push(this.currentObject), this.currentObject = e, void (this.state = ft);\n        }\n\n        if (!yt.test(t)) throw new Error(\"havn't handled \\\"\" + t + '\" in keyword yet, index ' + this.place);\n        this.afterItem(t);\n      }\n    }, e.prototype.neutral = function (t) {\n      if (_t.test(t)) return this.word = t, void (this.state = 2);\n      if ('\"' === t) return this.word = \"\", void (this.state = 4);\n      if (gt.test(t)) return this.word = t, void (this.state = 3);\n      {\n        if (!yt.test(t)) throw new Error(\"havn't handled \\\"\" + t + '\" in neutral yet, index ' + this.place);\n        this.afterItem(t);\n      }\n    }, e.prototype.output = function () {\n      for (; this.place < this.text.length;) this.readCharicter();\n\n      if (-1 === this.state) return this.root;\n      throw new Error('unable to parse string \"' + this.text + '\". State is ' + this.state);\n    };\n\n    var vt = .017453292519943295,\n        bt = function (t) {\n      var e = a(t),\n          r = e.shift(),\n          i = e.shift();\n      e.unshift([\"name\", i]), e.unshift([\"type\", r]);\n      var n = {};\n      return s(e, n), o(n), n;\n    };\n\n    !function (t) {\n      t(\"EPSG:4326\", \"+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees\"), t(\"EPSG:4269\", \"+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees\"), t(\"EPSG:3857\", \"+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs\"), t.WGS84 = t[\"EPSG:4326\"], t[\"EPSG:3785\"] = t[\"EPSG:3857\"], t.GOOGLE = t[\"EPSG:3857\"], t[\"EPSG:900913\"] = t[\"EPSG:3857\"], t[\"EPSG:102113\"] = t[\"EPSG:3857\"];\n    }(h);\n\n    var St = [\"PROJECTEDCRS\", \"PROJCRS\", \"GEOGCS\", \"GEOCCS\", \"PROJCS\", \"LOCAL_CS\", \"GEODCRS\", \"GEODETICCRS\", \"GEODETICDATUM\", \"ENGCRS\", \"ENGINEERINGCRS\"],\n        Nt = [\"3857\", \"900913\", \"3785\", \"102113\"],\n        Et = function (t, e) {\n      t = t || {};\n      var a, r;\n      if (!e) return t;\n\n      for (r in e) void 0 !== (a = e[r]) && (t[r] = a);\n\n      return t;\n    },\n        wt = function (t, e, a) {\n      var r = t * e;\n      return a / Math.sqrt(1 - r * r);\n    },\n        Ct = function (t) {\n      return t < 0 ? -1 : 1;\n    },\n        xt = function (t) {\n      return Math.abs(t) <= 3.14159265359 ? t : t - Ct(t) * ut;\n    },\n        Ot = function (t, e, a) {\n      var r = t * a,\n          s = .5 * t;\n      return r = Math.pow((1 - r) / (1 + r), s), Math.tan(.5 * (et - e)) / r;\n    },\n        At = function (t, e) {\n      for (var a, r, s = .5 * t, i = et - 2 * Math.atan(e), n = 0; n <= 15; n++) if (a = t * Math.sin(i), r = et - 2 * Math.atan(e * Math.pow((1 - a) / (1 + a), s)) - i, i += r, Math.abs(r) <= 1e-10) return i;\n\n      return -9999;\n    },\n        Pt = [{\n      init: function () {\n        var t = this.b / this.a;\n        this.es = 1 - t * t, \"x0\" in this || (this.x0 = 0), \"y0\" in this || (this.y0 = 0), this.e = Math.sqrt(this.es), this.lat_ts ? this.sphere ? this.k0 = Math.cos(this.lat_ts) : this.k0 = wt(this.e, Math.sin(this.lat_ts), Math.cos(this.lat_ts)) : this.k0 || (this.k ? this.k0 = this.k : this.k0 = 1);\n      },\n      forward: function (t) {\n        var e = t.x,\n            a = t.y;\n        if (a * ot > 90 && a * ot < -90 && e * ot > 180 && e * ot < -180) return null;\n        var r, s;\n        if (Math.abs(Math.abs(a) - et) <= it) return null;\n        if (this.sphere) r = this.x0 + this.a * this.k0 * xt(e - this.long0), s = this.y0 + this.a * this.k0 * Math.log(Math.tan(ht + .5 * a));else {\n          var i = Math.sin(a),\n              n = Ot(this.e, a, i);\n          r = this.x0 + this.a * this.k0 * xt(e - this.long0), s = this.y0 - this.a * this.k0 * Math.log(n);\n        }\n        return t.x = r, t.y = s, t;\n      },\n      inverse: function (t) {\n        var e,\n            a,\n            r = t.x - this.x0,\n            s = t.y - this.y0;\n        if (this.sphere) a = et - 2 * Math.atan(Math.exp(-s / (this.a * this.k0)));else {\n          var i = Math.exp(-s / (this.a * this.k0));\n          if (-9999 === (a = At(this.e, i))) return null;\n        }\n        return e = xt(this.long0 + r / (this.a * this.k0)), t.x = e, t.y = a, t;\n      },\n      names: [\"Mercator\", \"Popular Visualisation Pseudo Mercator\", \"Mercator_1SP\", \"Mercator_Auxiliary_Sphere\", \"merc\"]\n    }, {\n      init: function () {},\n      forward: _,\n      inverse: _,\n      names: [\"longlat\", \"identity\"]\n    }],\n        Gt = {},\n        It = [],\n        kt = {\n      start: function () {\n        Pt.forEach(M);\n      },\n      add: M,\n      get: function (t) {\n        if (!t) return !1;\n        var e = t.toLowerCase();\n        return void 0 !== Gt[e] && It[Gt[e]] ? It[Gt[e]] : void 0;\n      }\n    },\n        Lt = {};\n\n    Lt.MERIT = {\n      a: 6378137,\n      rf: 298.257,\n      ellipseName: \"MERIT 1983\"\n    }, Lt.SGS85 = {\n      a: 6378136,\n      rf: 298.257,\n      ellipseName: \"Soviet Geodetic System 85\"\n    }, Lt.GRS80 = {\n      a: 6378137,\n      rf: 298.257222101,\n      ellipseName: \"GRS 1980(IUGG, 1980)\"\n    }, Lt.IAU76 = {\n      a: 6378140,\n      rf: 298.257,\n      ellipseName: \"IAU 1976\"\n    }, Lt.airy = {\n      a: 6377563.396,\n      b: 6356256.91,\n      ellipseName: \"Airy 1830\"\n    }, Lt.APL4 = {\n      a: 6378137,\n      rf: 298.25,\n      ellipseName: \"Appl. Physics. 1965\"\n    }, Lt.NWL9D = {\n      a: 6378145,\n      rf: 298.25,\n      ellipseName: \"Naval Weapons Lab., 1965\"\n    }, Lt.mod_airy = {\n      a: 6377340.189,\n      b: 6356034.446,\n      ellipseName: \"Modified Airy\"\n    }, Lt.andrae = {\n      a: 6377104.43,\n      rf: 300,\n      ellipseName: \"Andrae 1876 (Den., Iclnd.)\"\n    }, Lt.aust_SA = {\n      a: 6378160,\n      rf: 298.25,\n      ellipseName: \"Australian Natl & S. Amer. 1969\"\n    }, Lt.GRS67 = {\n      a: 6378160,\n      rf: 298.247167427,\n      ellipseName: \"GRS 67(IUGG 1967)\"\n    }, Lt.bessel = {\n      a: 6377397.155,\n      rf: 299.1528128,\n      ellipseName: \"Bessel 1841\"\n    }, Lt.bess_nam = {\n      a: 6377483.865,\n      rf: 299.1528128,\n      ellipseName: \"Bessel 1841 (Namibia)\"\n    }, Lt.clrk66 = {\n      a: 6378206.4,\n      b: 6356583.8,\n      ellipseName: \"Clarke 1866\"\n    }, Lt.clrk80 = {\n      a: 6378249.145,\n      rf: 293.4663,\n      ellipseName: \"Clarke 1880 mod.\"\n    }, Lt.clrk58 = {\n      a: 6378293.645208759,\n      rf: 294.2606763692654,\n      ellipseName: \"Clarke 1858\"\n    }, Lt.CPM = {\n      a: 6375738.7,\n      rf: 334.29,\n      ellipseName: \"Comm. des Poids et Mesures 1799\"\n    }, Lt.delmbr = {\n      a: 6376428,\n      rf: 311.5,\n      ellipseName: \"Delambre 1810 (Belgium)\"\n    }, Lt.engelis = {\n      a: 6378136.05,\n      rf: 298.2566,\n      ellipseName: \"Engelis 1985\"\n    }, Lt.evrst30 = {\n      a: 6377276.345,\n      rf: 300.8017,\n      ellipseName: \"Everest 1830\"\n    }, Lt.evrst48 = {\n      a: 6377304.063,\n      rf: 300.8017,\n      ellipseName: \"Everest 1948\"\n    }, Lt.evrst56 = {\n      a: 6377301.243,\n      rf: 300.8017,\n      ellipseName: \"Everest 1956\"\n    }, Lt.evrst69 = {\n      a: 6377295.664,\n      rf: 300.8017,\n      ellipseName: \"Everest 1969\"\n    }, Lt.evrstSS = {\n      a: 6377298.556,\n      rf: 300.8017,\n      ellipseName: \"Everest (Sabah & Sarawak)\"\n    }, Lt.fschr60 = {\n      a: 6378166,\n      rf: 298.3,\n      ellipseName: \"Fischer (Mercury Datum) 1960\"\n    }, Lt.fschr60m = {\n      a: 6378155,\n      rf: 298.3,\n      ellipseName: \"Fischer 1960\"\n    }, Lt.fschr68 = {\n      a: 6378150,\n      rf: 298.3,\n      ellipseName: \"Fischer 1968\"\n    }, Lt.helmert = {\n      a: 6378200,\n      rf: 298.3,\n      ellipseName: \"Helmert 1906\"\n    }, Lt.hough = {\n      a: 6378270,\n      rf: 297,\n      ellipseName: \"Hough\"\n    }, Lt.intl = {\n      a: 6378388,\n      rf: 297,\n      ellipseName: \"International 1909 (Hayford)\"\n    }, Lt.kaula = {\n      a: 6378163,\n      rf: 298.24,\n      ellipseName: \"Kaula 1961\"\n    }, Lt.lerch = {\n      a: 6378139,\n      rf: 298.257,\n      ellipseName: \"Lerch 1979\"\n    }, Lt.mprts = {\n      a: 6397300,\n      rf: 191,\n      ellipseName: \"Maupertius 1738\"\n    }, Lt.new_intl = {\n      a: 6378157.5,\n      b: 6356772.2,\n      ellipseName: \"New International 1967\"\n    }, Lt.plessis = {\n      a: 6376523,\n      rf: 6355863,\n      ellipseName: \"Plessis 1817 (France)\"\n    }, Lt.krass = {\n      a: 6378245,\n      rf: 298.3,\n      ellipseName: \"Krassovsky, 1942\"\n    }, Lt.SEasia = {\n      a: 6378155,\n      b: 6356773.3205,\n      ellipseName: \"Southeast Asia\"\n    }, Lt.walbeck = {\n      a: 6376896,\n      b: 6355834.8467,\n      ellipseName: \"Walbeck\"\n    }, Lt.WGS60 = {\n      a: 6378165,\n      rf: 298.3,\n      ellipseName: \"WGS 60\"\n    }, Lt.WGS66 = {\n      a: 6378145,\n      rf: 298.25,\n      ellipseName: \"WGS 66\"\n    }, Lt.WGS7 = {\n      a: 6378135,\n      rf: 298.26,\n      ellipseName: \"WGS 72\"\n    };\n    var zt = Lt.WGS84 = {\n      a: 6378137,\n      rf: 298.257223563,\n      ellipseName: \"WGS 84\"\n    };\n    Lt.sphere = {\n      a: 6370997,\n      b: 6370997,\n      ellipseName: \"Normal Sphere (r=6370997)\"\n    };\n    var Rt = {};\n    Rt.wgs84 = {\n      towgs84: \"0,0,0\",\n      ellipse: \"WGS84\",\n      datumName: \"WGS84\"\n    }, Rt.ch1903 = {\n      towgs84: \"674.374,15.056,405.346\",\n      ellipse: \"bessel\",\n      datumName: \"swiss\"\n    }, Rt.ggrs87 = {\n      towgs84: \"-199.87,74.79,246.62\",\n      ellipse: \"GRS80\",\n      datumName: \"Greek_Geodetic_Reference_System_1987\"\n    }, Rt.nad83 = {\n      towgs84: \"0,0,0\",\n      ellipse: \"GRS80\",\n      datumName: \"North_American_Datum_1983\"\n    }, Rt.nad27 = {\n      nadgrids: \"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat\",\n      ellipse: \"clrk66\",\n      datumName: \"North_American_Datum_1927\"\n    }, Rt.potsdam = {\n      towgs84: \"606.0,23.0,413.0\",\n      ellipse: \"bessel\",\n      datumName: \"Potsdam Rauenberg 1950 DHDN\"\n    }, Rt.carthage = {\n      towgs84: \"-263.0,6.0,431.0\",\n      ellipse: \"clark80\",\n      datumName: \"Carthage 1934 Tunisia\"\n    }, Rt.hermannskogel = {\n      towgs84: \"653.0,-212.0,449.0\",\n      ellipse: \"bessel\",\n      datumName: \"Hermannskogel\"\n    }, Rt.osni52 = {\n      towgs84: \"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15\",\n      ellipse: \"airy\",\n      datumName: \"Irish National\"\n    }, Rt.ire65 = {\n      towgs84: \"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15\",\n      ellipse: \"mod_airy\",\n      datumName: \"Ireland 1965\"\n    }, Rt.rassadiran = {\n      towgs84: \"-133.63,-157.5,-158.62\",\n      ellipse: \"intl\",\n      datumName: \"Rassadiran\"\n    }, Rt.nzgd49 = {\n      towgs84: \"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993\",\n      ellipse: \"intl\",\n      datumName: \"New Zealand Geodetic Datum 1949\"\n    }, Rt.osgb36 = {\n      towgs84: \"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894\",\n      ellipse: \"airy\",\n      datumName: \"Airy 1830\"\n    }, Rt.s_jtsk = {\n      towgs84: \"589,76,480\",\n      ellipse: \"bessel\",\n      datumName: \"S-JTSK (Ferro)\"\n    }, Rt.beduaram = {\n      towgs84: \"-106,-87,188\",\n      ellipse: \"clrk80\",\n      datumName: \"Beduaram\"\n    }, Rt.gunung_segara = {\n      towgs84: \"-403,684,41\",\n      ellipse: \"bessel\",\n      datumName: \"Gunung Segara Jakarta\"\n    }, Rt.rnb72 = {\n      towgs84: \"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1\",\n      ellipse: \"intl\",\n      datumName: \"Reseau National Belge 1972\"\n    }, Projection.projections = kt, Projection.projections.start();\n\n    var Tt = function (t, e, a) {\n      return b(t, e) ? a : t.datum_type === $ || e.datum_type === $ ? a : t.es !== e.es || t.a !== e.a || C(t.datum_type) || C(e.datum_type) ? (a = S(a, t.es, t.a), C(t.datum_type) && (a = E(a, t.datum_type, t.datum_params)), C(e.datum_type) && (a = w(a, e.datum_type, e.datum_params)), N(a, e.es, e.a, e.b)) : a;\n    },\n        Dt = function (t, e, a) {\n      var r,\n          s,\n          i,\n          n = a.x,\n          o = a.y,\n          h = a.z || 0,\n          u = {};\n\n      for (i = 0; i < 3; i++) if (!e || 2 !== i || void 0 !== a.z) switch (0 === i ? (r = n, s = -1 !== \"ew\".indexOf(t.axis[i]) ? \"x\" : \"y\") : 1 === i ? (r = o, s = -1 !== \"ns\".indexOf(t.axis[i]) ? \"y\" : \"x\") : (r = h, s = \"z\"), t.axis[i]) {\n        case \"e\":\n        case \"w\":\n        case \"n\":\n        case \"s\":\n          u[s] = r;\n          break;\n\n        case \"u\":\n          void 0 !== a[s] && (u.z = r);\n          break;\n\n        case \"d\":\n          void 0 !== a[s] && (u.z = -r);\n          break;\n\n        default:\n          return null;\n      }\n\n      return u;\n    },\n        qt = function (t) {\n      var e = {\n        x: t[0],\n        y: t[1]\n      };\n      return t.length > 2 && (e.z = t[2]), t.length > 3 && (e.m = t[3]), e;\n    },\n        Ut = function (t) {\n      x(t.x), x(t.y);\n    },\n        jt = Projection(\"WGS84\"),\n        Ft = 6,\n        Wt = \"AJSAJS\",\n        Qt = \"AFAFAF\",\n        Bt = 65,\n        Jt = 73,\n        Ht = 79,\n        Vt = 86,\n        Xt = 90,\n        Zt = {\n      forward: k,\n      inverse: function (t) {\n        var e = D(Q(t.toUpperCase()));\n        return e.lat && e.lon ? [e.lon, e.lat, e.lon, e.lat] : [e.left, e.bottom, e.right, e.top];\n      },\n      toPoint: L\n    };\n\n    Point.fromMGRS = function (t) {\n      return new Point(L(t));\n    }, Point.prototype.toMGRS = function (t) {\n      return k([this.x, this.y], t);\n    };\n\n    var Kt = function (t, e) {\n      var a;\n      return t > 1e-7 ? (a = t * e, (1 - t * t) * (e / (1 - a * a) - .5 / t * Math.log((1 - a) / (1 + a)))) : 2 * e;\n    },\n        Yt = .3333333333333333,\n        $t = .17222222222222222,\n        te = .10257936507936508,\n        ee = .06388888888888888,\n        ae = .0664021164021164,\n        re = .016415012942191543,\n        se = {\n      init: function () {\n        var t = Math.abs(this.lat0);\n\n        if (Math.abs(t - et) < it ? this.mode = this.lat0 < 0 ? this.S_POLE : this.N_POLE : Math.abs(t) < it ? this.mode = this.EQUIT : this.mode = this.OBLIQ, this.es > 0) {\n          var e;\n\n          switch (this.qp = Kt(this.e, 1), this.mmf = .5 / (1 - this.es), this.apa = V(this.es), this.mode) {\n            case this.N_POLE:\n            case this.S_POLE:\n              this.dd = 1;\n              break;\n\n            case this.EQUIT:\n              this.rq = Math.sqrt(.5 * this.qp), this.dd = 1 / this.rq, this.xmf = 1, this.ymf = .5 * this.qp;\n              break;\n\n            case this.OBLIQ:\n              this.rq = Math.sqrt(.5 * this.qp), e = Math.sin(this.lat0), this.sinb1 = Kt(this.e, e) / this.qp, this.cosb1 = Math.sqrt(1 - this.sinb1 * this.sinb1), this.dd = Math.cos(this.lat0) / (Math.sqrt(1 - this.es * e * e) * this.rq * this.cosb1), this.ymf = (this.xmf = this.rq) / this.dd, this.xmf *= this.dd;\n          }\n        } else this.mode === this.OBLIQ && (this.sinph0 = Math.sin(this.lat0), this.cosph0 = Math.cos(this.lat0));\n      },\n      forward: function (t) {\n        var e,\n            a,\n            r,\n            s,\n            i,\n            n,\n            o,\n            h,\n            u,\n            l,\n            d = t.x,\n            c = t.y;\n\n        if (d = xt(d - this.long0), this.sphere) {\n          if (i = Math.sin(c), l = Math.cos(c), r = Math.cos(d), this.mode === this.OBLIQ || this.mode === this.EQUIT) {\n            if ((a = this.mode === this.EQUIT ? 1 + l * r : 1 + this.sinph0 * i + this.cosph0 * l * r) <= it) return null;\n            e = (a = Math.sqrt(2 / a)) * l * Math.sin(d), a *= this.mode === this.EQUIT ? i : this.cosph0 * i - this.sinph0 * l * r;\n          } else if (this.mode === this.N_POLE || this.mode === this.S_POLE) {\n            if (this.mode === this.N_POLE && (r = -r), Math.abs(c + this.phi0) < it) return null;\n            a = ht - .5 * c, e = (a = 2 * (this.mode === this.S_POLE ? Math.cos(a) : Math.sin(a))) * Math.sin(d), a *= r;\n          }\n        } else {\n          switch (o = 0, h = 0, u = 0, r = Math.cos(d), s = Math.sin(d), i = Math.sin(c), n = Kt(this.e, i), this.mode !== this.OBLIQ && this.mode !== this.EQUIT || (o = n / this.qp, h = Math.sqrt(1 - o * o)), this.mode) {\n            case this.OBLIQ:\n              u = 1 + this.sinb1 * o + this.cosb1 * h * r;\n              break;\n\n            case this.EQUIT:\n              u = 1 + h * r;\n              break;\n\n            case this.N_POLE:\n              u = et + c, n = this.qp - n;\n              break;\n\n            case this.S_POLE:\n              u = c - et, n = this.qp + n;\n          }\n\n          if (Math.abs(u) < it) return null;\n\n          switch (this.mode) {\n            case this.OBLIQ:\n            case this.EQUIT:\n              u = Math.sqrt(2 / u), a = this.mode === this.OBLIQ ? this.ymf * u * (this.cosb1 * o - this.sinb1 * h * r) : (u = Math.sqrt(2 / (1 + h * r))) * o * this.ymf, e = this.xmf * u * h * s;\n              break;\n\n            case this.N_POLE:\n            case this.S_POLE:\n              n >= 0 ? (e = (u = Math.sqrt(n)) * s, a = r * (this.mode === this.S_POLE ? u : -u)) : e = a = 0;\n          }\n        }\n\n        return t.x = this.a * e + this.x0, t.y = this.a * a + this.y0, t;\n      },\n      inverse: function (t) {\n        t.x -= this.x0, t.y -= this.y0;\n        var e,\n            a,\n            r,\n            s,\n            i,\n            n,\n            o,\n            h = t.x / this.a,\n            u = t.y / this.a;\n\n        if (this.sphere) {\n          var l,\n              d = 0,\n              c = 0;\n          if (l = Math.sqrt(h * h + u * u), (a = .5 * l) > 1) return null;\n\n          switch (a = 2 * Math.asin(a), this.mode !== this.OBLIQ && this.mode !== this.EQUIT || (c = Math.sin(a), d = Math.cos(a)), this.mode) {\n            case this.EQUIT:\n              a = Math.abs(l) <= it ? 0 : Math.asin(u * c / l), h *= c, u = d * l;\n              break;\n\n            case this.OBLIQ:\n              a = Math.abs(l) <= it ? this.phi0 : Math.asin(d * this.sinph0 + u * c * this.cosph0 / l), h *= c * this.cosph0, u = (d - Math.sin(a) * this.sinph0) * l;\n              break;\n\n            case this.N_POLE:\n              u = -u, a = et - a;\n              break;\n\n            case this.S_POLE:\n              a -= et;\n          }\n\n          e = 0 !== u || this.mode !== this.EQUIT && this.mode !== this.OBLIQ ? Math.atan2(h, u) : 0;\n        } else {\n          if (o = 0, this.mode === this.OBLIQ || this.mode === this.EQUIT) {\n            if (h /= this.dd, u *= this.dd, (n = Math.sqrt(h * h + u * u)) < it) return t.x = 0, t.y = this.phi0, t;\n            s = 2 * Math.asin(.5 * n / this.rq), r = Math.cos(s), h *= s = Math.sin(s), this.mode === this.OBLIQ ? (o = r * this.sinb1 + u * s * this.cosb1 / n, i = this.qp * o, u = n * this.cosb1 * r - u * this.sinb1 * s) : (o = u * s / n, i = this.qp * o, u = n * r);\n          } else if (this.mode === this.N_POLE || this.mode === this.S_POLE) {\n            if (this.mode === this.N_POLE && (u = -u), !(i = h * h + u * u)) return t.x = 0, t.y = this.phi0, t;\n            o = 1 - i / this.qp, this.mode === this.S_POLE && (o = -o);\n          }\n\n          e = Math.atan2(h, u), a = X(Math.asin(o), this.apa);\n        }\n\n        return t.x = xt(this.long0 + e), t.y = a, t;\n      },\n      names: [\"Lambert Azimuthal Equal Area\", \"Lambert_Azimuthal_Equal_Area\", \"laea\"],\n      S_POLE: 1,\n      N_POLE: 2,\n      EQUIT: 3,\n      OBLIQ: 4\n    },\n        ie = function (t) {\n      return Math.abs(t) > 1 && (t = t > 1 ? 1 : -1), Math.asin(t);\n    },\n        ne = {\n      init: function () {\n        this.sin_p14 = Math.sin(this.lat0), this.cos_p14 = Math.cos(this.lat0);\n      },\n      forward: function (t) {\n        var e,\n            a,\n            r,\n            s,\n            i,\n            n,\n            o,\n            h = t.x,\n            u = t.y;\n        return r = xt(h - this.long0), e = Math.sin(u), a = Math.cos(u), s = Math.cos(r), ((i = this.sin_p14 * e + this.cos_p14 * a * s) > 0 || Math.abs(i) <= it) && (n = 1 * this.a * a * Math.sin(r), o = this.y0 + 1 * this.a * (this.cos_p14 * e - this.sin_p14 * a * s)), t.x = n, t.y = o, t;\n      },\n      inverse: function (t) {\n        var e, a, r, s, i, n, o;\n        return t.x -= this.x0, t.y -= this.y0, e = Math.sqrt(t.x * t.x + t.y * t.y), a = ie(e / this.a), r = Math.sin(a), s = Math.cos(a), n = this.long0, Math.abs(e) <= it ? (o = this.lat0, t.x = n, t.y = o, t) : (o = ie(s * this.sin_p14 + t.y * r * this.cos_p14 / e), i = Math.abs(this.lat0) - et, Math.abs(i) <= it ? (n = xt(this.lat0 >= 0 ? this.long0 + Math.atan2(t.x, -t.y) : this.long0 - Math.atan2(-t.x, t.y)), t.x = n, t.y = o, t) : (n = xt(this.long0 + Math.atan2(t.x * r, e * this.cos_p14 * s - t.y * this.sin_p14 * r)), t.x = n, t.y = o, t));\n      },\n      names: [\"ortho\"]\n    };\n\n    return I.defaultDatum = \"WGS84\", I.Proj = Projection, I.WGS84 = new I.Proj(\"WGS84\"), I.Point = Point, I.toPoint = qt, I.defs = h, I.transform = A, I.mgrs = Zt, I.version = \"2.6.2-alpha\", function (proj4) {\n      proj4.Proj.projections.add(se), proj4.Proj.projections.add(ne);\n    }(I), I;\n  });\n});\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nvar spacing = 0.05;\nvar ApiUtils = {\n  snap: function (n) {\n    return Math.round(n / spacing) * spacing;\n  },\n  datafileForLocation: function (lon, lat) {\n    lon = ApiUtils.snap(lon);\n    lat = ApiUtils.snap(lat); // Calculate NS and EW\n\n    var ns = lat > 0 ? 'N' : 'S';\n    var ew = lon > 0 ? 'E' : 'W';\n    lon = Math.abs(lon);\n    lat = Math.abs(lat); // Display same number of decimal places as spacing\n\n    var decimalPlaces = spacing.toPrecision().split('.')[1];\n    decimalPlaces = decimalPlaces ? decimalPlaces.length : 0;\n    lon = lon.toFixed(decimalPlaces);\n    lat = lat.toFixed(decimalPlaces); // Construct name of datafile\n\n    return ns + lat + ew + lon;\n  }\n};\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// Configure useful projections\n// Use http://spatialreference.org/ref/epsg/24817/proj4js/ to look up\n// proj4.js was built using: node_modules/.bin/grunt build:laea,ortho\n\nproj4.defs([['EPSG:3035', '+proj=laea +lat_0=52 +lon_0=10 +x_0=4321000 +y_0=3210000 +ellps=GRS80 +units=m +no_defs']]);\n\nfunction GeoprojectStore() {\n  this.projection = null;\n  this.location = null;\n  this.globalOffset = new THREE.Vector2();\n  this.sceneScale = 1;\n  this.bindListeners({\n    setCurrentPlace: UserActions.setCurrentPlace\n  });\n  this.exportPublicMethods({\n    positionToTileFraction: this.positionToTileFraction.bind(this)\n  });\n}\n\nGeoprojectStore.prototype.setCurrentPlace = function (place) {\n  this.location = [place.longitude, place.latitude];\n  this.projection = 'EPSG:3857'; // Setup projectors\n\n  const lon = ApiUtils.snap(this.location[0]);\n  const lat = ApiUtils.snap(this.location[1]);\n  geoproject.projector = proj4(this.projection);\n  geoproject.center = geoproject.project([lon, lat], true); // For testing new data create temporary projector for 3035\n  // TODO remove this once we don't use 3035 data\n\n  geoproject.projector3035 = proj4('EPSG:3035');\n  var projected3035 = geoproject.projector3035.forward([lon, lat]);\n  geoproject.center3035 = {\n    x: projected3035[0],\n    y: projected3035[1]\n  }; // To make the heights match the projection, we need to obtain the\n  // scene scale\n\n  this.sceneScale = geoproject.calculateSceneScale(lon, lat); // Re-center our THREE Scene coordinate system such that it is 0, 0\n  // at the location of the place\n\n  this.globalOffset = geoproject.calculateGlobalOffset(lon, lat);\n};\n\nGeoprojectStore.prototype.positionToTileFraction = function (position, z) {\n  const p = position.clone();\n  p.x -= this.globalOffset.x;\n  p.y += this.globalOffset.y;\n  p.divideScalar(this.sceneScale * Math.pow(2, 15 - z));\n  return [p.x, p.y, z];\n};\n\nGeoprojectStore.displayName = 'GeoprojectStore';\nvar GeoprojectStore$1 = alt.createStore(GeoprojectStore);\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nfunction AppStore() {\n  this.appContainer = null;\n  this.datasource = {};\n  this.fatalError = false;\n  this.initialized = false;\n  this.resourceUrl = null;\n  this.bindListeners({\n    configureElevationDatasource: ConfigActions.configureElevationDatasource,\n    configureImageryDatasource: ConfigActions.configureImageryDatasource,\n    setAppContainer: ConfigActions.setAppContainer,\n    setFatalError: RenderActions.fatalError,\n    setResourceUrl: ConfigActions.setResourceUrl\n  });\n}\n\nAppStore.prototype.checkInitialized = function () {\n  this.initialized = this.appContainer !== null && this.resourceUrl !== null;\n};\n\nAppStore.prototype.configureElevationDatasource = function (elevation) {\n  this.datasource.elevation = elevation;\n};\n\nAppStore.prototype.configureImageryDatasource = function (imagery) {\n  this.datasource.imagery = imagery;\n};\n\nAppStore.prototype.setFatalError = function () {\n  this.fatalError = true;\n};\n\nAppStore.prototype.setAppContainer = function (container) {\n  this.appContainer = container;\n  this.checkInitialized();\n};\n\nAppStore.prototype.setResourceUrl = function (url) {\n  this.resourceUrl = url;\n  this.checkInitialized();\n};\n\nAppStore.displayName = 'AppStore';\nvar AppStore$1 = alt.createStore(AppStore);\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nlet params = new URLSearchParams(window.location.search.slice(1)); // TODO could support non-square POT textures also\n\nlet elevationPoolSize = 4 * 4;\nlet imageryPoolSize = 16 * 16;\n\nif (params.has('elevationPoolSize')) {\n  elevationPoolSize = Number.parseInt(params.get('elevationPoolSize'));\n}\n\nif (params.has('imageryPoolSize')) {\n  imageryPoolSize = Number.parseInt(params.get('imageryPoolSize'));\n}\n\nconst ELEVATION_POOL_SIZE = elevationPoolSize;\nconst ELEVATION_TILE_SIZE = 512;\nconst IMAGERY_POOL_SIZE = imageryPoolSize;\nconst IMAGERY_TILE_SIZE = 256;\nconst INTERPOLATE_FLOAT = params.has('interpolateFloat'); // Different formats for encoding pixel data in elevation PNGs\n\nconst PIXEL_ENCODING_NASADEM = 'nasadem';\nconst PIXEL_ENCODING_TERRARIUM = 'terrarium';\nconst PIXEL_ENCODING_TERRAIN_RGB = 'terrain-rgb';\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nvar renderer = new THREE.WebGLRenderer({\n  alpha: true,\n  antialias: false,\n  clearColor: 0x000000,\n  logarithmicDepthBuffer: false\n});\nrenderer.sortObjects = true; // Don't clear buffers we know will be overwritten\n\nrenderer.autoClear = false;\nrenderer.autoClearColor = false;\nrenderer.autoClearDepth = true;\nrenderer.autoClearStencil = false;\nrenderer.domElement.selectable = false; // We do our own tonemapping, so disable otherwise get shader errors\n\nrenderer.toneMapping = THREE.NoToneMapping;\nvar state = ContainerStore$1.getState();\nrenderer.setPixelRatio(state.pixelRatio);\nrenderer.setSize(state.width, state.height);\nContainerStore$1.listen(function (state) {\n  renderer.setPixelRatio(state.pixelRatio);\n  renderer.setSize(state.width, state.height);\n});\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// Class for managing a set of indices\n// `next()` returns a integer\n\nclass IntegerPool {\n  constructor(capacity) {\n    this.capacity = capacity;\n    this.index = 0;\n    this.items = [];\n  }\n\n  next() {\n    let i; // Once we hit capacity, start re-using stale entries\n\n    if (this.index >= this.capacity) {\n      i = this.items.splice(0, 1)[0];\n    } else {\n      // ...otherwise allocate sequentially\n      i = this.index++;\n    }\n\n    this.items.push(i);\n    return i;\n  } // Method to keep element alive\n\n\n  tap(item) {\n    let i = this.items.indexOf(item);\n\n    if (i !== -1) {\n      this.items.splice(i, 1);\n      this.items.push(item);\n    }\n  }\n\n}\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\n\nconst ImageLoader$1 = typeof createImageBitmap === 'undefined' ? THREE.ImageLoader : THREE.ImageBitmapLoader;\nvar ImageLoader$2 = new ImageLoader$1();\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nconst canvas$1 = document.createElement('canvas');\nconst width = ELEVATION_TILE_SIZE;\nconst height = ELEVATION_TILE_SIZE;\ncanvas$1.width = width;\ncanvas$1.height = height;\nconst ctx = canvas$1.getContext('2d');\nconst N = width * height;\n\nconst insertIntoTextureArray = (textureArray, index, image) => {\n  const w = textureArray.image.width / textureArray.__blocks;\n  const h = textureArray.image.height / textureArray.__blocks;\n\n  const x = w * (Math.floor(index) % textureArray.__blocks);\n\n  const y = h * Math.floor(Math.floor(index) / textureArray.__blocks);\n\n  if (textureArray.useFloat) {\n    ctx.drawImage(image, 0, 0);\n    let imgData = ctx.getImageData(0, 0, width, height).data;\n    let data = new Float32Array(N);\n\n    if (textureArray.pixelEncoding === PIXEL_ENCODING_NASADEM) {\n      // NASADEM only uses two channels so we can use a DataView\n      // to efficiently convert it to floating point\n      const baseVal = -32768;\n      let dataView = new DataView(imgData.buffer);\n\n      for (let i = 0; i < N; ++i) {\n        let H = dataView.getUint16(4 * i, false) + baseVal; // Handle NODATA value, clamping to 0\n\n        data[i] = H === baseVal ? 0 : H;\n      }\n    } else {\n      let scale;\n\n      if (textureArray.pixelEncoding === PIXEL_ENCODING_TERRARIUM) {\n        scale = [256, 1, 1 / 256, -32768];\n      } else if (textureArray.pixelEncoding === PIXEL_ENCODING_TERRAIN_RGB) {\n        scale = [0.1 * 256 * 256, 0.1 * 256, 0.1, -10000];\n      }\n\n      for (let i = 0; i < N; ++i) {\n        let H = scale[0] * imgData[4 * i] + scale[1] * imgData[4 * i + 1] + scale[2] * imgData[4 * i + 2] + scale[3]; // Handle NODATA value, clamping to 0\n\n        data[i] = H === scale[3] ? 0 : H;\n      }\n    } // Do we need float? Perhaps just converting to data is\n    // enough?\n\n\n    renderer.copyTextureToTexture({\n      x,\n      y\n    }, {\n      image: {\n        data,\n        width,\n        height\n      },\n      isDataTexture: true\n    }, textureArray);\n  } else {\n    renderer.copyTextureToTexture({\n      x,\n      y\n    }, {\n      image\n    }, textureArray);\n  }\n};\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\n\nclass BaseDatasource {\n  constructor({\n    apiKey,\n    pixelEncoding,\n    poolSize,\n    textureSize,\n    useFloat,\n    urlFormat\n  }) {\n    this.apiKey = apiKey;\n    this.urlFormat = urlFormat;\n    this.pixelEncoding = pixelEncoding;\n    this.useFloat = !!useFloat;\n    this.hasUpdates = false;\n    this.listeners = [];\n    this.lookup = {};\n    this.fetching = {};\n    this.imgCache = {};\n    this.indexPool = new IntegerPool(poolSize); // Emulate texture array by cutting up 2D texture\n\n    let n = Math.sqrt(poolSize);\n\n    if (n % 1) {\n      console.error('poolSize needs to be a power of 2');\n    }\n\n    let virtualTextureSize = textureSize * n;\n    const TextureFilter = this.useFloat && !INTERPOLATE_FLOAT ? THREE.NearestFilter : THREE.LinearFilter;\n    this.textureArray = new THREE.DataTexture(null, virtualTextureSize, virtualTextureSize, // RGB seems to run *slower* than RGBA on iOS\n    this.useFloat ? THREE.AlphaFormat : THREE.RGBAFormat, // HalfFloat doesn't work on iOS :(\n    this.useFloat ? THREE.FloatType : THREE.UnsignedByteType, THREE.UVMapping, THREE.ClampToEdgeWrapping, THREE.ClampToEdgeWrapping, TextureFilter, TextureFilter, //THREE.LinearFilter, THREE.LinearFilter,\n    //THREE.NearestFilter, THREE.NearestFilter,\n    renderer.capabilities.getMaxAnisotropy());\n    this.textureArray.__blocks = n;\n\n    for (let prop of ['pixelEncoding', 'useFloat']) {\n      Object.defineProperty(this.textureArray, prop, {\n        get: () => this[prop]\n      });\n    }\n\n    if (this.useFloat) {\n      const size = 1024; // TODO reduce in future!\n\n      this.indirectionTexture = new THREE.DataTexture(null, size, size, // TODO Could perhaps use smaller format\n      THREE.RGBAFormat, // Using RGB led to errors...\n      // Need to use float type or get glitches on iOS\n      THREE.FloatType, THREE.UVMapping, THREE.ClampToEdgeWrapping, THREE.ClampToEdgeWrapping, THREE.NearestFilter, THREE.NearestFilter, 1 // anisotropy\n      );\n    }\n  }\n\n  urlForTile(x, y, z) {\n    return this.urlFormat.replace('{x}', x).replace('{y}', y).replace('{z}', z).replace('{apiKey}', this.apiKey);\n  }\n\n  fetchIfNeeded(quadkey) {\n    if (this.lookup[quadkey] !== undefined || this.fetching[quadkey] !== undefined) {\n      // Have data, or download in progress, skip\n      return;\n    } // Throttle downloads\n\n\n    let downloadIndices = Object.values(this.fetching);\n\n    if (downloadIndices.length > 32) {\n      log$1('throttling...');\n      return;\n    }\n\n    let newIndex = this.findNewIndex(quadkey); // Mark as download in progress\n\n    this.fetching[quadkey] = newIndex; // Actually fetch data\n\n    let url = this.urlForTile(...tilebelt.quadkeyToTile(quadkey));\n    ImageLoader$2.load(url, image => {\n      // Image loaded OK\n      this.imgCache[quadkey] = image;\n      insertIntoTextureArray(this.textureArray, newIndex, image); // Remove download and mark image location in lookup\n\n      delete this.fetching[quadkey];\n      this.lookup[quadkey] = newIndex; // TODO remove, just for demo page\n\n      if (this.useFloat) {\n        let el = document.getElementById('elevation-tile-count');\n\n        if (el) {\n          let n = parseInt(el.innerHTML);\n\n          if (isNaN(n)) {\n            n = 0;\n          }\n\n          el.innerHTML = ++n;\n        }\n      }\n\n      this.updateIndirectionTexture();\n      this.notifyUpdate();\n    }, () => {\n      console.error('Failed to get image', quadkey);\n      delete this.fetching[quadkey];\n    });\n  }\n\n  findNewIndex(quadkey) {\n    // First request a new slot (index) to place image in\n    let downloadIndices = Object.values(this.fetching);\n    let newIndex;\n    let oldQuadKey;\n    let failed = true;\n\n    for (let i = 32; i > 0; i--) {\n      // Try to obtain new index\n      newIndex = this.indexPool.next(); // Avoid situation where newIndex is used by an\n      // in-progress download, as it'll get clobbered\n\n      let goodIndex = downloadIndices.indexOf(newIndex) === -1; // Check what data this is pointing at\n\n      let oldDataSlot = Object.values(this.lookup).indexOf(newIndex);\n      oldQuadKey = Object.keys(this.lookup)[oldDataSlot]; // Don't release tiles that are below us in\n      // heirarchy, so that when we zoom out we always have\n      // some data.\n      // Without this, we eject the data and then later\n      // tiles can end up having nothing to load! Resulting\n      // in a weird glitch where the previous index set in\n      // the uniform is used and some random tile is plastered\n      // in its place :(\n\n      let isParent = oldQuadKey !== undefined && quadkey.slice(0, oldQuadKey.length - 1) === oldQuadKey.slice(0, -1);\n\n      if (goodIndex && !isParent) {\n        // Index is clean and not assigned being used by a download\n        failed = false;\n        break;\n      }\n    }\n\n    if (failed) {\n      log$1(`Failed to find index (${this.indexPool.capacity})`);\n      log$1('Downloads: ', downloadIndices.length); // Fallback to using lowest resolution tile\n\n      oldQuadKey = Object.keys(this.lookup).sort((x, y) => x.length - y.length)[0];\n      newIndex = this.lookup[oldQuadKey];\n    } // Next, remove any existing lookup entry that references\n    // this index, as we are about to re-assign it. This should\n    // be safe to do as the index should have been recycled\n    // before\n\n\n    if (oldQuadKey !== undefined) {\n      delete this.lookup[oldQuadKey];\n    }\n\n    return newIndex;\n  }\n\n  updateIndirectionTexture() {\n    // Update indirection texture, loop over all textures\n    if (this.indirectionTexture) {\n      let quadkeys = Object.keys(this.lookup);\n      quadkeys.sort((a, b) => Math.sign(a.length - b.length));\n\n      for (let q of quadkeys) {\n        let [x, y, z] = tilebelt.quadkeyToTile(q);\n        let tileIndex = this.lookup[q];\n        let size = Math.pow(2, 10 - z);\n        x *= size;\n        y *= size; // Move to zoom level 10\n\n        let data = new Float32Array(4 * size * size);\n        let tileSize = Math.pow(2, z);\n        let originScale = -tileSize / this.indirectionTexture.image.width;\n\n        for (let i = 0; i < data.length; i++) {\n          // Location of tile in texture array\n          data[4 * i] = tileIndex; // Tile size\n\n          data[4 * i + 1] = tileSize; // Tile origin position (scaled to save GPU instructions)\n\n          data[4 * i + 2] = x * originScale;\n          data[4 * i + 3] = y * originScale;\n        }\n\n        renderer.copyTextureToTexture({\n          x,\n          y\n        }, {\n          image: {\n            data,\n            width: size,\n            height: size\n          },\n          isDataTexture: true\n        }, this.indirectionTexture);\n      }\n    }\n  } // Locates the highest resolution data we have for this tile\n  // return the data index and number of levels we are\n  // downsampling by\n\n\n  findBestAvailableData(quadkey, silent) {\n    for (let downsample = 0; downsample < 20; downsample++) {\n      // See if we have imagery already...\n      let index = this.lookup[quadkey];\n\n      if (index !== undefined) {\n        return {\n          index,\n          downsample,\n          quadkey\n        };\n      } else {\n        // Try parent tile...\n        // Parent key is just our key with last char removed\n        quadkey = quadkey.slice(0, -1);\n\n        if (quadkey.length === 0) {\n          break;\n        }\n      }\n    }\n\n    if (!silent) {\n      log$1('Failed to find data', quadkey);\n    }\n\n    return {\n      index: null,\n      downsample: 20,\n      quadkey: null\n    };\n  } // Reads single point using local lookups\n\n\n  dataAtPoint(p) {\n    let tile;\n\n    if (p.longitude) {\n      tile = tilebelt.pointToTileFraction(p.longitude, p.latitude, 10);\n    } else {\n      tile = GeoprojectStore$1.positionToTileFraction(p, 10);\n    }\n\n    const q = tilebelt.tileToQuadkey(tile);\n    const {\n      quadkey\n    } = this.findBestAvailableData(q);\n\n    if (!quadkey) {\n      return null;\n    } // Convert to zoom level at which we have data\n\n\n    const scale = Math.pow(2, quadkey.length - tile[2]);\n    tile[0] *= scale;\n    tile[1] *= scale;\n    const img = this.imgCache[quadkey];\n    const canvas = document.createElement('canvas');\n    canvas.width = 1;\n    canvas.height = 1;\n    tile[0] = tile[0] % 1 * img.width;\n    tile[1] = tile[1] % 1 * img.height;\n    const ctx = canvas.getContext('2d');\n    ctx.drawImage(img, tile[0], tile[1], 1, 1, // one pixel from src\n    0, 0, 1, 1); // ..to 1x1 canvas\n\n    return ctx.getImageData(0, 0, 1, 1).data;\n  }\n\n  addListener(fn) {\n    this.listeners.push(fn);\n  }\n\n  removeListener(fn) {\n    let i = this.listeners.indexOf(fn);\n\n    if (i !== -1) {\n      this.listeners.splice(i, 1);\n    }\n  }\n\n  notifyUpdate() {\n    this.hasUpdates = true;\n  }\n\n  broadcastUpdate() {\n    this.listeners.forEach(l => l());\n    this.hasUpdates = false;\n  }\n\n}\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\n\nconst ElevationDatasource = new BaseDatasource({\n  urlFormat: 'https://www.nasadem.xyz/api/v1/dem/{z}/{x}/{y}.png?key={apiKey}',\n  textureSize: ELEVATION_TILE_SIZE,\n  pixelEncoding: PIXEL_ENCODING_NASADEM,\n  poolSize: ELEVATION_POOL_SIZE,\n  useFloat: true\n});\nAppStore$1.listen(({\n  datasource\n}) => {\n  if (datasource.elevation) {\n    for (let key of ['apiKey', 'pixelEncoding', 'urlFormat']) {\n      ElevationDatasource[key] = datasource.elevation[key];\n    }\n  }\n});\nconst MULTIPLIER_TERRARIUM = [256, 1, 1 / 256, -32768];\nconst MULTIPLIER_TERRAIN_RGB = [0.1 * 256 * 256, 0.1 * 256, 0.1, -10000];\n\nfunction dataToHeight(data, pixelEncoding) {\n  if (data[0] === 0 && data[1] === 0) {\n    // NODATA values return 0\n    return 0;\n  }\n\n  let m;\n\n  if (pixelEncoding === PIXEL_ENCODING_TERRARIUM || pixelEncoding === PIXEL_ENCODING_NASADEM) {\n    m = MULTIPLIER_TERRARIUM;\n  } else if (pixelEncoding === PIXEL_ENCODING_TERRAIN_RGB) {\n    m = MULTIPLIER_TERRAIN_RGB;\n  }\n\n  return m[0] * data[0] + m[1] * data[1] + m[2] * data[2] + // This is correct, we don't want to multiply by data[ 3 ]\n  m[3];\n}\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\n\nconst earthScale = 0.0008176665341588574;\n\nfunction heightScale(p) {\n  const sceneScale = GeoprojectStore$1.getState().sceneScale;\n  let tile;\n\n  if (p.longitude) {\n    tile = tilebelt.pointToTile(p.longitude, p.latitude, 10);\n  } else {\n    tile = GeoprojectStore$1.positionToTileFraction(p, 10);\n  }\n\n  const n = 3.141592653589793 - 0.006135923151542565 * tile[1];\n  return Math.cosh(n) / (earthScale * sceneScale);\n} // Simplified height lookup, doesn't interpolate between points\n// just picks the nearest pixel\n\n\nfunction heightAt(p, callback) {\n  const data = ElevationDatasource.dataAtPoint(p);\n\n  if (!data) {\n    if (typeof callback === 'function') {\n      const listener = () => {\n        // Now that data has updated, try again to fetch\n        const data = ElevationDatasource.dataAtPoint(p);\n\n        if (data) {\n          ElevationDatasource.removeListener(listener);\n          callback(dataToHeight(data, ElevationDatasource.pixelEncoding) * heightScale(p));\n        }\n      }; // Don't have data yet, but want to register for callback\n      // once available\n\n\n      ElevationDatasource.addListener(listener);\n    }\n\n    return 0;\n  }\n\n  const H = dataToHeight(data, ElevationDatasource.pixelEncoding) * heightScale(p);\n\n  if (typeof callback === 'function') {\n    callback(H);\n  }\n\n  return H;\n}\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\n\nvar p1 = new THREE.Vector3(0, 0, 0);\nvar p2 = new THREE.Vector3(0, 0, 0);\n\nvar addNormal = function (normal, origin, delta1, delta2) {\n  p1.addVectors(origin, delta1);\n  delta1.z = heightAt(p1) - origin.z;\n  p2.addVectors(origin, delta2);\n  delta2.z = heightAt(p2) - origin.z;\n  delta1.cross(delta2);\n  delta1.normalize();\n  normal.add(delta1);\n};\n\nvar n = 1,\n    i$1; // Just keep it simple and only compute one normal\n\nvar theta = 2 * Math.PI / n;\nvar origin = new THREE.Vector3();\nvar defaultStep = 25;\nvar normal = new THREE.Vector3(0, 0, 1);\nvar d1 = new THREE.Vector3(0, 0, 0);\nvar d2 = new THREE.Vector3(0, 0, 0);\n\nvar normalAt = function (p, step) {\n  step = step ? step : defaultStep;\n  origin.copy(p);\n  origin.z = heightAt(origin);\n  normal.set(0, 0, 0);\n\n  for (i$1 = 0; i$1 < n; i$1++) {\n    d1.x = step * Math.cos(i$1 * theta);\n    d1.y = step * Math.sin(i$1 * theta);\n    d2.x = -d1.y;\n    d2.y = d1.x;\n    addNormal(normal, origin, d1, d2);\n  }\n\n  normal.normalize();\n  return normal;\n};\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\n\nvar up = new THREE.Vector3(0, 0, 1);\n\nfunction CameraStore() {\n  this.position = new THREE.Vector3(0, 0, 16000);\n  this.target = new THREE.Vector3();\n  this.hasZoomedOut = false;\n  this.constrainCamera = true;\n  this.minDistance = 100;\n  this.minHeight = 200;\n  this.maxDistance = 50000;\n  this.maxBounds = 1000000;\n  camera.position.copy(this.position);\n  camera.up.copy(up);\n  camera.lookAt(new THREE.Vector3(0, 0, 0));\n  this.controls = new MapControls(camera);\n  var controls = this.controls;\n  RenderStore$1.listen(function () {\n    controls.update();\n  }); // Transition durations & camera behavior\n\n  this.zoomInDuration = 2.0;\n  this.zoomOutDuration = 2.0;\n  this.bindListeners({\n    animateAlongFeature: UserActions.animateAlongFeature,\n    configure: ConfigActions.configureCamera,\n    doubleTapZoom: UserActions.doubleTapZoom,\n    focusOnBounds: UserActions.focusOnBounds,\n    focusOnFeature: UserActions.focusOnFeature,\n    focusOnLocation: UserActions.focusOnLocation,\n    focusOnTarget: UserActions.focusOnTarget,\n    orbitTarget: UserActions.orbitTarget,\n    panToPosition: UserActions.panToPosition,\n    rotateLeft: UserActions.rotateLeft,\n    rotateRight: UserActions.rotateRight,\n    setCamera: UserActions.setCamera,\n    setCameraMode: UserActions.setCameraMode,\n    setCameraPosition: UserActions.setCameraPosition,\n    setCameraTarget: UserActions.setCameraTarget,\n    setFromCurrentLocation: [CurrentLocationActions.setPosition, CurrentLocationActions.toggleTracking],\n    zoomIn: UserActions.zoomIn,\n    zoomOut: UserActions.zoomOut\n  });\n} // Direct setters, often want to use panToXXX actions instead\n\n\nCameraStore.prototype.setCamera = function (state) {\n  if (state.position) {\n    this.position.copy(state.position);\n\n    if (!state.position.forceHeight) {\n      // TODO perhaps a better way would be to define the camera\n      // position (and thus matrix) relative to the ground and\n      // then store the height in a GPU render target? That way\n      // we could avoid reading height data on the CPU and the\n      // texture read should be very cache-friendly\n      var h = heightAt(this.position); // Hard limit, would otherwise be below ground\n\n      if (this.position.z < h) {\n        this.position.z = h + 1;\n      } // Soft limit (nudge toward minHeight)\n\n\n      if (this.constrainCamera && this.position.z < h + this.minHeight) {\n        this.position.z += 0.1 * (h + this.minHeight - this.position.z);\n      }\n    }\n  }\n\n  if (state.target) {\n    this.target.copy(state.target);\n    var limit = this.maxBounds; // High-res data end at about 25km\n\n    if (Math.abs(this.target.x) > limit) {\n      this.target.x = limit * Math.sign(this.target.x);\n    }\n\n    if (Math.abs(this.target.y) > limit) {\n      this.target.y = limit * Math.sign(this.target.y);\n    }\n  } // Update camera internals\n\n\n  this.controls.target.copy(this.target); // Update actual camera\n\n  camera.position.copy(this.position);\n  camera.up.copy(up);\n\n  if (state.quaternion) {\n    camera.setRotationFromQuaternion(state.quaternion);\n  } else {\n    camera.lookAt(this.controls.target);\n  }\n\n  camera.updateMatrixWorld();\n};\n\nCameraStore.prototype.setCameraTarget = function (target) {\n  this.setCamera({\n    target: target\n  });\n};\n\nCameraStore.prototype.setCameraPosition = function (position) {\n  this.setCamera({\n    position: position\n  });\n};\n\nCameraStore.prototype.setFromCurrentLocation = function () {\n  this.waitFor(CurrentLocationStore$1);\n  var currentLocation = CurrentLocationStore$1.getState();\n\n  if (!currentLocation.tracking || currentLocation.tooFar) {\n    // We're not tracking, ignore\n    return false;\n  }\n\n  if (!currentLocation.longitude || !currentLocation.latitude) {\n    // We don't yet have a position, ignore\n    return false;\n  } //\n  // Focus camera on current location\n\n\n  var nextTarget = geoproject.project([currentLocation.longitude, currentLocation.latitude, 0]);\n  nextTarget.z = heightAt(nextTarget);\n  return this.focusOnTarget(nextTarget);\n};\n\nCameraStore.prototype.setCameraMode = function (mode) {\n  if (mode !== '2D' && mode !== '3D') {\n    console.error('Unknown camera mode:', mode);\n    return false;\n  }\n\n  this.controls.lock2D = mode !== '3D';\n};\n\nCameraStore.prototype.vantageForTarget = function (target) {\n  var vantage;\n\n  if (target.bearing !== undefined) {\n    // If we have a bearing use that for direction\n    var theta = THREE.Math.degToRad(target.bearing);\n    vantage = new THREE.Vector3(-Math.sin(theta), -Math.cos(theta), 0);\n  } else {\n    // otherwise figure out vantage point from normal\n    vantage = normalAt(target).clone();\n  } // Direction away from slope, at 30 degree angle\n\n\n  var angle = target.angle !== undefined ? target.angle : 30;\n  vantage.z = 0;\n\n  if (vantage.x === 0 && vantage.y === 0) {\n    // Handle singularity in flat terrain (point north)\n    vantage.y = -1;\n  }\n\n  vantage.normalize();\n  vantage.z = Math.tan(THREE.Math.degToRad(angle)); // Position similar distance away\n\n  var distance = target.distance !== undefined ? target.distance : this.target.distanceTo(this.position);\n  distance = Math.max(distance, 1.5 * this.minDistance);\n  vantage.setLength(distance);\n  vantage.add(target);\n  return vantage;\n};\n\nCameraStore.prototype.focusOnBounds = function (target) {\n  if (!target.sw || !target.sw.longitude || !target.sw.latitude || !target.ne || !target.ne.longitude || !target.ne.latitude) {\n    return;\n  } // First build up bounding sphere\n\n\n  var sw = geoproject.project([target.sw.longitude, target.sw.latitude, 0]);\n  sw.z = heightAt(target.sw, true);\n  var ne = geoproject.project([target.ne.longitude, target.ne.latitude, 0]);\n  ne.z = heightAt(target.ne, true);\n  var box = new THREE.Box3().expandByPoint(sw).expandByPoint(ne);\n  var boundingSphere = new THREE.Sphere();\n  box.getBoundingSphere(boundingSphere); // Now get the desired distance\n\n  var fov = THREE.Math.degToRad(camera.fov);\n  var D = boundingSphere.radius / Math.tan(0.5 * fov); // Convert into target to focus on\n\n  var nextTarget = boundingSphere.center.clone();\n  lodash_min.defaults(nextTarget, target);\n  nextTarget.distance = D;\n  return this.focusOnTarget(nextTarget);\n};\n\nCameraStore.prototype.focusOnFeature = function (feature) {\n  var coordinates = feature.geometry.coordinates;\n\n  if (Array.isArray(coordinates[0])) {\n    // Take first point of Linestring\n    coordinates = coordinates[0];\n  } // Otherwise assume Point\n\n\n  var nextTarget;\n\n  if (feature.projected === false) {\n    nextTarget = geoproject.project(coordinates);\n  } else {\n    nextTarget = new THREE.Vector3(coordinates[0], coordinates[1], 0);\n  }\n\n  nextTarget.z = heightAt(nextTarget);\n  return this.focusOnTarget(nextTarget);\n};\n\nCameraStore.prototype.focusOnLocation = function (target) {\n  if (!target.longitude || !target.latitude) {\n    return;\n  }\n\n  var nextTarget = geoproject.project([target.longitude, target.latitude, 0]); // TODO make heightAt work everywhere\n\n  nextTarget.z = target.height || heightAt(target, true); // Don't geoproject\n\n  lodash_min.defaults(nextTarget, target);\n  return this.focusOnTarget(nextTarget);\n};\n\nCameraStore.prototype.focusOnTarget = function (target) {\n  var duration = target.animationDuration;\n\n  if (duration === undefined) {\n    duration = 0.001 * this.target.distanceTo(target); // Move at 1km per second\n\n    duration = Math.min(4.0, Math.max(1.2, duration)); // Clamp between 1.2 - 4 seconds\n  }\n\n  if (duration === 0) {\n    return this.setCamera({\n      position: this.vantageForTarget(target),\n      target: target\n    });\n  } else {\n    var options = {\n      position: this.vantageForTarget(target),\n      target: target,\n      duration: duration,\n      doNotCancel: true\n    };\n\n    if (typeof target.onComplete === 'function') {\n      options.onComplete = target.onComplete;\n    }\n\n    return this.panToPosition(options);\n  }\n};\n\nCameraStore.prototype.rotateAngle = function (angle) {\n  var delta = this.position.clone().sub(this.target);\n  delta.applyAxisAngle(up, angle);\n  var newPosition = this.controls.target.clone().add(delta);\n  var options = {\n    duration: 0.9,\n    ease: StoreUtils.cubicIn,\n    lerp: StoreUtils.lerp.vector3Angular(this.controls.target.clone()),\n    doNotCancel: true\n  };\n  StoreUtils.transition(UserActions.setCameraPosition, this.position.clone(), newPosition, options);\n};\n\nCameraStore.prototype.rotateLeft = function () {\n  this.rotateAngle(0.3 * Math.PI);\n};\n\nCameraStore.prototype.rotateRight = function () {\n  this.rotateAngle(-0.3 * Math.PI);\n}; // Spin around the current point\n\n\nCameraStore.prototype.orbitTarget = function () {\n  var delta = this.position.clone().sub(this.target);\n  delta.applyAxisAngle(up, 0.5 * Math.PI);\n  var newPosition = this.target.clone().add(delta);\n  var options = {\n    duration: 13.37,\n    ease: StoreUtils.linear,\n    lerp: StoreUtils.lerp.vector3Angular(this.target.clone()),\n    onComplete: this.orbitTarget.bind(this)\n  };\n  StoreUtils.transition(UserActions.setCameraPosition, this.position.clone(), newPosition, options);\n};\n\nCameraStore.prototype.zoomIn = function () {\n  var delta = this.position.clone().sub(this.target);\n  var l = delta.length();\n  var bounce = l < this.minDistance + 1;\n  l = bounce ? 0.9 * this.minDistance : Math.max(this.minDistance, 0.5 * l);\n  delta.setLength(l);\n  var self = this;\n  return this.panToPosition({\n    position: this.target.clone().add(delta),\n    duration: bounce ? 0.15 : 0.5,\n    ease: StoreUtils.cubicIn,\n    doNotCancel: true,\n    onComplete: function () {\n      // Bounce back if outside of range\n      if (bounce) {\n        delta.setLength(self.minDistance);\n        self.panToPosition({\n          position: self.target.clone().add(delta),\n          duration: 0.2,\n          ease: StoreUtils.cubicIn,\n          doNotCancel: true\n        });\n      }\n    }\n  });\n};\n\nCameraStore.prototype.zoomOut = function () {\n  var delta = this.position.clone().sub(this.target);\n  var l = delta.length();\n  var bounce = l > this.maxDistance - 1;\n  l = bounce ? 1.1 * this.maxDistance : Math.min(this.maxDistance, 2 * l);\n  delta.setLength(l);\n  var self = this;\n  return this.panToPosition({\n    position: this.target.clone().add(delta),\n    duration: bounce ? 0.15 : 0.5,\n    ease: StoreUtils.cubicIn,\n    doNotCancel: true,\n    onComplete: function () {\n      // Bounce back if outside of range\n      if (bounce) {\n        delta.setLength(self.maxDistance);\n        self.panToPosition({\n          position: self.target.clone().add(delta),\n          duration: 0.2,\n          ease: StoreUtils.cubicIn,\n          doNotCancel: true\n        });\n      }\n    }\n  });\n};\n\nCameraStore.prototype.doubleTapZoom = function () {\n  var delta = this.position.clone().sub(this.target);\n  var l = delta.length();\n  var zoomIn = l > this.minDistance * 1.05;\n\n  if (zoomIn) {\n    this.zoomIn();\n  } else {\n    this.zoomOut();\n  }\n};\n\nvar lastPosition = new THREE.Vector3();\nvar lastTarget = new THREE.Vector3();\nvar nextPosition = new THREE.Vector3();\nvar nextTarget = new THREE.Vector3();\nvar lastQuaternion = new THREE.Quaternion();\nvar nextQuaternion = new THREE.Quaternion();\n\nCameraStore.prototype.panToPosition = function (options) {\n  if (options.position === undefined) {\n    options.position = this.position.clone();\n  }\n\n  if (options.target === undefined) {\n    options.target = this.target.clone();\n  } // Make local copies to capture state\n\n\n  lastPosition.copy(this.position);\n  nextPosition.copy(options.position);\n  lastTarget.copy(this.target);\n  nextTarget.copy(options.target);\n  lastQuaternion.copy(camera.quaternion);\n\n  if (this.controls.lock2D) {\n    nextQuaternion.copy(lastQuaternion);\n  } else {\n    var m = new THREE.Matrix4();\n    m.lookAt(options.position, options.target, up);\n    nextQuaternion.setFromRotationMatrix(m);\n  }\n\n  var interpolate = function (u) {\n    UserActions.setCamera({\n      position: {\n        forceHeight: true,\n        ...StoreUtils.lerp.vector3(lastPosition, nextPosition, u)\n      },\n      target: StoreUtils.lerp.vector3(lastTarget, nextTarget, u),\n      quaternion: lastQuaternion.clone().slerp(nextQuaternion, u)\n    });\n  };\n\n  StoreUtils.transition(interpolate, 0, 1, options);\n  return false;\n}; // At the moment, a bit glitchy so do not expose API\n\n\nCameraStore.prototype.animateAlongFeature = function (options) {\n  var self = this;\n\n  if (this.controls.lock2D) {\n    this.setCameraMode('3D');\n    setTimeout(function () {\n      self.animateAlongFeature(options);\n    }, 500);\n    return;\n  }\n\n  var chaseDistance = options.distance || 1000;\n  var chaseHeight = Math.max(1, 0.5 * chaseDistance);\n  var chaseSpeed = options.speed || 100;\n  var smoothTarget = new THREE.Vector3();\n  var offset = new THREE.Vector3();\n  var oldCameraNear = camera.near;\n  camera.near = Math.min(0.25 * chaseHeight, camera.near);\n  camera.updateProjectionMatrix();\n\n  var follow = function (target) {\n    // Smooth the motion of the target\n    smoothTarget.subVectors(target, self.target);\n    smoothTarget.multiplyScalar(0.1);\n    smoothTarget.add(self.target);\n    var d = smoothTarget.distanceTo(self.position); // Chase at distance approaching the desired distance\n\n    d = chaseDistance + 0.97 * (d - chaseDistance);\n    offset.subVectors(self.position, smoothTarget);\n    offset.setLength(d);\n    offset.add(smoothTarget); // Make sure we stay above ground\n\n    var desiredH = heightAt(offset) + chaseHeight;\n    offset.z = desiredH + 0.97 * (offset.z - desiredH);\n    UserActions.setCamera({\n      position: offset,\n      target: smoothTarget\n    });\n\n    if (options.onAnimationFrame) {\n      options.onAnimationFrame(geoproject.unproject(smoothTarget));\n    }\n  };\n\n  var currentPosition = this.position.clone();\n  var currentTarget = this.target.clone();\n  this.constrainCamera = false;\n\n  var onComplete = function () {\n    self.constrainCamera = true;\n    self.panToPosition({\n      position: currentPosition,\n      target: currentTarget,\n      duration: 2.0,\n      ease: StoreUtils.smootherstep\n    }); // Revert to old camera near\n\n    setTimeout(function () {\n      camera.near = oldCameraNear;\n      camera.updateProjectionMatrix();\n    }, 500);\n\n    if (options.onComplete) {\n      options.onComplete();\n    }\n  };\n\n  var features = Array.isArray(options.feature) ? options.feature : [options.feature];\n\n  var animateAlongFeatureWithIndex = function (f) {\n    var feature = features[f];\n\n    var segmentAnimation = function () {\n      // Animate along curve\n      StoreUtils.transition(follow, 0, 1, {\n        duration: feature.curve.getLength() / chaseSpeed,\n        // in m/s\n        ease: StoreUtils.linear,\n        // Convert u value into position on curve\n        lerp: function (initial, final, u) {\n          return feature.curve.getPointAt(u);\n        },\n        onCancel: onComplete,\n        onComplete: function () {\n          if (f < features.length - 1) {\n            // Move onto next feature\n            animateAlongFeatureWithIndex(f + 1);\n          } else {\n            // Finish animation and return to start\n            onComplete();\n          }\n        }\n      });\n\n      if (options.onFeatureReached) {\n        options.onFeatureReached(feature.id);\n      }\n    };\n\n    if (f === 0) {\n      // For first feature move to initial position and start\n      var initialTarget = feature.curve.getPointAt(0);\n      var initialStep = feature.curve.getPointAt(0.01);\n      var initialPosition = initialTarget.clone().sub(initialStep);\n      initialPosition.setLength(Math.max(chaseDistance, 100));\n      initialPosition.add(initialTarget);\n      initialPosition.z += chaseHeight;\n      self.panToPosition({\n        position: initialPosition,\n        target: initialTarget,\n        duration: 2,\n        ease: StoreUtils.smootherstep,\n        onComplete: segmentAnimation,\n        onCancel: onComplete\n      });\n    } else {\n      // Otherwise smoothly continue\n      segmentAnimation();\n    }\n  }; // Animate along first feature, which will in turn animate along the next\n\n\n  animateAlongFeatureWithIndex(0);\n}; // Configure various parameters of camera\n\n\nCameraStore.prototype.configure = function (options) {\n  var self = this;\n  lodash_min.forEach(options, function (value, key) {\n    self[key] = value;\n  });\n  var keys = ['minDistance', 'minHeight', 'maxBounds', 'maxDistance', 'minPolarAngle', 'maxPolarAngle', 'noPan', 'noRotate', 'noZoom'];\n  lodash_min.forEach(keys, function (key) {\n    if (self.hasOwnProperty(key)) {\n      self.controls[key] = self[key];\n    }\n  });\n};\n\nCameraStore.displayName = 'CameraStore';\nvar CameraStore$1 = alt.createStore(CameraStore);\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nconst Procedural = {};\n\nfunction CameraExport() {\n  this.bindListeners({\n    setCamera: UserActions.setCamera\n  });\n}\n/**\n * @exports Procedural\n * @name Camera\n * @description Use the Camera API methods to change the user's\n * view of the rendered scene.\n */\n\n/**\n * @name focusOnBounds\n * @memberof module:Camera\n * @function\n * @description Animates the engine camera to focus on a region\n * specified by a bounding box. The engine will calculate the correct\n * view such that the bounds are fully displayed.\n * @param {Object} bounds An Object specifying a bounding box. Pass the coordinates for the south-west and north-east corners of the box.\n * @example\n * var bounds = {\n *   sw: { latitude: 44.5, longitude: 6.3 },\n *   ne: { latitude: 44.4, longitude: 6.4 }\n * };\n * Procedural.focusOnBounds ( bounds );\n *\n * // Optionally can also supply:\n * // - viewing angle,\n * // - a bearing,\n * // - animation duration (in seconds)\n * var bounds = {\n *   sw: { latitude: 44.5, longitude: 6.3 },\n *   ne: { latitude: 44.4, longitude: 6.4 },\n *   angle: 25, bearing: 180,\n *   animationDuration: 0.5\n * };\n * Procedural.focusOnBounds ( bounds );\n */\n\n\nProcedural.focusOnBounds = function (target) {\n  if (!target.sw || !target.sw.longitude || !target.sw.latitude || !target.ne || !target.ne.longitude || !target.ne.latitude) {\n    console.log('Invalid target passed');\n    console.log('Please use following format: { sw: { latitude: 44.5, longitude: 6.3 }, ne: { latitude: 44.4, longitude: 6.4 } }');\n    console.log('{ longitude: 1.23, latitude: 4.56 }');\n    return;\n  }\n\n  var nextTarget = {\n    onComplete: RenderActions.onBoundsFocused\n  };\n  lodash_min.defaults(nextTarget, target);\n  setTimeout(function () {\n    UserActions.focusOnBounds(nextTarget);\n  }, 0);\n};\n/**\n * @name focusOnLocation\n * @memberof module:Camera\n * @function\n * @description Animates the engine camera to focus on a location\n * @param {Object} location An Object specifying a longitude and latitude\n * @example\n * var target = { latitude: 44.5, longitude: 6.3 };\n * Procedural.focusOnLocation ( target );\n *\n * // Optionally can also supply:\n * // - viewing angle,\n * // - a bearing,\n * // - a distance,\n * // - animation duration (in seconds)\n * var target = {\n *   latitude: 44.5, longitude: 6.3,\n *   angle: 20, bearing: 30, distance: 1000\n *   animationDuration: 0.5\n * };\n * Procedural.focusOnLocation ( target );\n */\n\n\nProcedural.focusOnLocation = function (target) {\n  if (!target.longitude || !target.latitude) {\n    console.log('Invalid target passed');\n    console.log('Please use following format:');\n    console.log('{ longitude: 1.23, latitude: 4.56 }');\n    return;\n  }\n\n  var nextTarget = {\n    onComplete: RenderActions.onLocationFocused\n  };\n  lodash_min.defaults(nextTarget, target);\n  setTimeout(function () {\n    UserActions.focusOnLocation(nextTarget);\n  }, 0);\n};\n/**\n * @name orbitTarget\n * @memberof module:Camera\n * @function\n * @description Animates the engine camera around the current\n * camera target\n */\n\n\nProcedural.orbitTarget = function () {\n  setTimeout(function () {\n    UserActions.orbitTarget();\n  }, 0);\n};\n/**\n * @name onCameraChange\n * @memberof module:Camera\n * @function\n * @description Callback function for when the camera position\n * changes. Note this method will fire very often, so you\n * may want to throttle updates. Performing significant work\n * every time this method fires will negatively impact performance\n * @example\n * Procedural.onCameraChange = function ( location ) {\n *   // `location` will contain:\n *   // - longitude\n *   // - latitude\n *   // - height\n *   // - angle\n *   // - bearing\n *   // - distance\n *   console.log( 'Location changed': location );\n * };\n */\n\n/**\n * @name setCameraMode\n * @memberof module:Camera\n * @function\n * @description Selects the current camera mode for the engine\n * @param {String} mode An String specifying the camera mode. Currently '2D' and '3D' are supported\n * @example\n * Procedural.setCameraMode ( '2D' );\n */\n\n\nProcedural.setCameraMode = function (mode) {\n  setTimeout(function () {\n    UserActions.setCameraMode(mode);\n  }, 0);\n}; // API Listeners\n\n\nCameraExport.prototype.setCamera = function (state) {\n  this.waitFor(CameraStore$1);\n\n  if (typeof Procedural.onCameraChange !== 'function') {\n    return;\n  }\n\n  const target = geoproject.unproject(state.target);\n  const distance = state.target.distanceTo(state.position);\n  const delta = state.target.clone().sub(state.position);\n  const bearing = (180 * Math.atan2(delta.x, delta.y) / Math.PI + 360) % 360;\n  const angle = 180 * Math.asin(-delta.z / distance) / Math.PI;\n  Procedural.onCameraChange({\n    longitude: target[0],\n    latitude: target[1],\n    height: target[2],\n    angle,\n    bearing,\n    distance\n  });\n};\n\nCameraExport.displayName = 'CameraExport';\nalt.createStore(CameraExport);\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nconst Procedural$1 = {};\n/**\n * @exports Procedural\n * @name Controls\n * @description Use the Controls API methods to configure\n * how the user can interact with the scene\n */\n\n/**\n * @name configureControls\n * @memberof module:Controls\n * @function\n * @description Pass configuration to set parameters for controls\n * @param {Object} configuration An Object specifying the configuration\n * @example\n * // All parameters are optional\n * var configuration = {\n *   // Minimum distance camera can approach scene\n *   minDistance: 1000,\n *   // Maximum distance camera can move from scene\n *   maxDistance: 5000,\n *   // Maximum distance camera target can move from scene\n *   maxBounds: 7500,\n *   // Minimum polar angle of camera\n *   minPolarAngle: 0.25 * Math.PI,\n *   // Maximum polar angle of camera\n *   maxPolarAngle: 0.8 * Math.PI,\n *   // Set to true to disable panning\n *   noPan: true,\n *   // Set to true to disable rotating\n *   noRotate: false,\n *   // Set to true to disable zooming\n *   noZoom: false\n * };\n * Procedural.configureControls( configuration );\n */\n\nProcedural$1.configureControls = function (config) {\n  if (!config) {\n    console.log('No configuration passed');\n    return;\n  }\n\n  var filtered = {};\n  var keys = ['minDistance', 'maxBounds', 'maxDistance', 'minPolarAngle', 'maxPolarAngle', 'noPan', 'noRotate', 'noZoom'];\n\n  for (var k in keys) {\n    var key = keys[k];\n\n    if (config.hasOwnProperty(key)) {\n      filtered[key] = config[key];\n    }\n  }\n\n  setTimeout(function () {\n    ConfigActions.configureCamera(filtered);\n  }, 0);\n};\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\n\nconst Procedural$2 = {}; // External API to engine, bridges between our code and the\n// exported `Procedural` object\n\nfunction CoreExport() {\n  this.appContainer = null;\n  this.bindListeners({\n    onBoundsFocused: RenderActions.onBoundsFocused,\n    onLocationFocused: RenderActions.onLocationFocused,\n    fatalError: RenderActions.fatalError,\n    signalUserInteraction: UserActions.inputStarted,\n    setElevation: GeodataActions.setElevation,\n    setElevationBig: GeodataActions.setElevationBig\n  });\n}\n/**\n * @exports Procedural\n * @name Core\n * @description The Procedural JavaScript library enables developers to embed\n * the Procedural engine into their web pages. To use this library\n * include a script tag on your page like so:\n * <pre>&lt;script\n *   src=\"https://unpkg.com/procedural-gl/build/procedural-gl.js\"&gt;\n * &lt;/script&gt;\n * </pre>\n * This will create a <tt>Procedural</tt> object that your JavaScript code\n * will be able to call. Once you have loaded the Procedural library, you can load in a location and add the visualization to your page. A typical pattern of initialization is as follows:\n * @example\n * Procedural.init( {\n *   container: document.getElementById( 'app' ),\n *   // For further details see:\n *   // github.com/felixpalmer/procedural-gl-js/wiki/Data-sources\n *   datasource: {\n *     elevation: {\n *       apiKey: 'GET_AN_API_KEY_FROM_YOUR_ELEVATION_PROVIDER',\n *       pixelFormat: 'nasadem', // or 'terrain-rgb', 'terrarium'\n *       urlFormat: 'https://elevation.example.com/tiles/{z}/{x}/{y}.jpg?key={apiKey}',\n *     },\n *     imagery: {\n *       apiKey: 'GET_AN_API_KEY_FROM_YOUR_IMAGERY_PROVIDER',\n *       urlFormat: 'https://imagery.example.com/tiles/{z}/{x}/{y}.jpg?key={apiKey}',\n *       attribution: 'Imagery attribution'\n *     },\n *   }\n * } );\n * Procedural.displayLocation( { latitude: 47.25, longitude: 13.55 } );\n */\n\n/**\n * @name init\n * @memberof module:Core\n * @function\n * @param {HTMLElement} container\n * @description Appends a canvas element to the specified container where the\n * engine will draw its output.\n * @example\n * var container = document.getElementById( 'app' );\n * Procedural.init( {\n *   container: document.getElementById( 'app' ),\n *   // For further details see:\n *   // github.com/felixpalmer/procedural-gl-js/wiki/Data-sources\n *   datasource: {\n *     elevation: {\n *       apiKey: 'GET_AN_API_KEY_FROM_YOUR_ELEVATION_PROVIDER',\n *       pixelFormat: 'nasadem', // or 'terrain-rgb', 'terrarium'\n *       urlFormat: 'https://elevation.example.com/tiles/{z}/{x}/{y}.jpg?key={apiKey}',\n *       attribution: 'Elevation attribution'\n *     },\n *     imagery: {\n *       apiKey: 'GET_AN_API_KEY_FROM_YOUR_IMAGERY_PROVIDER',\n *       urlFormat: 'https://imagery.example.com/tiles/{z}/{x}/{y}.jpg?key={apiKey}',\n *       attribution: 'Imagery attribution'\n *     },\n *   }\n * } );\n */\n\n\nProcedural$2.init = function ({\n  container,\n  datasource\n}) {\n  if (container === undefined || container === null) {\n    console.error('Error: tried to init Procedural API with invalid container');\n    return;\n  }\n\n  if (datasource === undefined || datasource === null) {\n    console.error('Error: tried to init Procedural API without datasource definition');\n    return;\n  } // Allow shorthand definitions for compatible providers\n\n\n  if (datasource.provider === 'maptiler') {\n    if (!datasource.apiKey) {\n      console.error('Error: `${datasource.provider} `datasource configuration is invalid. Must provide `apiKey`');\n    }\n\n    datasource = {\n      elevation: {\n        apiKey: datasource.apiKey,\n        pixelEncoding: PIXEL_ENCODING_TERRAIN_RGB,\n        urlFormat: 'https://api.maptiler.com/tiles/terrain-rgb/{z}/{x}/{y}.png?key={apiKey}'\n      },\n      imagery: {\n        apiKey: datasource.apiKey,\n        attribution: '<a href=\"https://www.maptiler.com/copyright/\">Maptiler</a> <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n        urlFormat: 'https://api.maptiler.com/tiles/satellite/{z}/{x}/{y}.jpg?key={apiKey}'\n      }\n    };\n  }\n\n  if (datasource.elevation.provider === 'nasadem' || // For back-compatibility with old NASADEM definition\n  Object.keys(datasource.elevation).length === 1 && Object.keys(datasource.elevation)[0] === 'apiKey') {\n    if (!datasource.elevation.apiKey) {\n      console.error('Error: `${datasource.elevation.provider} `datasource configuration is invalid. Must provide `apiKey`');\n    }\n\n    datasource.elevation = {\n      apiKey: datasource.elevation.apiKey,\n      attribution: '&copy;<a href=\"https://www.nasadem.xyz\">nasadem.XYZ</a>',\n      pixelEncoding: PIXEL_ENCODING_NASADEM,\n      urlFormat: 'https://www.nasadem.xyz/api/v1/dem/{z}/{x}/{y}.png?key={apiKey}'\n    };\n  }\n\n  const {\n    elevation,\n    imagery\n  } = datasource; // Upgrade pixelEncoding to constants\n\n  if ([PIXEL_ENCODING_NASADEM, PIXEL_ENCODING_TERRAIN_RGB, PIXEL_ENCODING_TERRARIUM].indexOf(elevation.pixelEncoding) === -1) {\n    console.error('Error: invalid pixelEncoding passed in elevation datasource');\n  }\n\n  if (elevation === undefined || elevation.urlFormat === undefined) {\n    console.error('Error: elevation datasource configuration is invalid');\n    return;\n  }\n\n  if (imagery === undefined || imagery.urlFormat === undefined) {\n    console.error('Error: imagery datasource configuration is invalid');\n    return;\n  }\n\n  ConfigActions.configureElevationDatasource(elevation);\n  ConfigActions.configureImageryDatasource(imagery);\n  ConfigActions.setAppContainer(container);\n};\n/**\n * @name onUserInteraction\n * @memberof module:Core\n * @function\n * @description Callback function for when engine recieves input from the\n * user. Can be used to hide overlays when the user interacts with\n * the map\n * @example\n * Procedural.onUserInteraction = function () {\n *   Procedural.removeOverlay( 'popup' );\n * }\n */\n\n/**\n * @name onBoundsFocused\n * @memberof module:Core\n * @function\n * @description Callback function for when the transition for `focusOnBounds` completes\n * @example\n * Procedural.onBoundsFocused = function () {\n *   Procedural.orbitTarget();\n * };\n */\n\n/**\n * @name onLocationError\n * @memberof module:Core\n * @function\n * @description Callback function for when location data failed to downloaded. This could be because the network request failed, or because the region is not available. See also [Core.setDisplayErrors]{@link module:Core.setDisplayErrors}\n * @example\n * Procedural.onLocationError = function ( message ) {\n *   // Handle error\n *   console.error( message );\n * };\n */\n\n/**\n * @name onLocationFocused\n * @memberof module:Core\n * @function\n * @description Callback function for when the transition for `focusOnLocation` completes\n * @example\n * Procedural.onLocationFocused = function () {\n *   console.log( 'Location focused' );\n * };\n */\n\n/**\n * @name onLocationLoaded\n * @memberof module:Core\n * @function\n * @description Callback function for when location data has been downloaded and displayed\n * @example\n * Procedural.onLocationLoaded = function () {\n *   var container = document.getElementById( 'app' );\n *   Procedural.init( container );\n * };\n */\n//onLocationLoaded\n// API Listeners\n\n\nCoreExport.prototype.fatalError = function (message) {\n  if (typeof Procedural$2.onLocationError === 'function') {\n    Procedural$2.onLocationError(message);\n  }\n};\n\nCoreExport.prototype.onBoundsFocused = function () {\n  if (typeof Procedural$2.onBoundsFocused === 'function') {\n    Procedural$2.onBoundsFocused();\n  }\n};\n\nCoreExport.prototype.onLocationFocused = function () {\n  if (typeof Procedural$2.onLocationFocused === 'function') {\n    Procedural$2.onLocationFocused();\n  }\n};\n\nCoreExport.prototype.setElevation = function () {};\n\nCoreExport.prototype.setElevationBig = function () {};\n/**\n * @name setDisplayErrors\n * @memberof module:Core\n * @function\n * @param {Boolean} value pass true to show errors, false to only report via API\n * @description Configure whether errors should be displayed to the user. See also [Core.onLocationError]{@link module:Core.onLocationError}\n */\n\n\nProcedural$2.setDisplayErrors = function (value) {\n  setTimeout(function () {\n    ConfigActions.setDisplayErrors(value);\n  }, 0);\n};\n\nCoreExport.prototype.signalUserInteraction = function () {\n  if (typeof Procedural$2.onUserInteraction === 'function') {\n    Procedural$2.onUserInteraction();\n  }\n};\n\nCoreExport.displayName = 'CoreExport';\nalt.createStore(CoreExport);\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nvar template = {\n  \"env\": {\n    \"turbidity\": 2.928118393234672,\n    \"reileigh\": 0.631430584918957,\n    \"mieCoefficient\": 0.006765327695560254,\n    \"mieDirectionalG\": 0.9020436927413672,\n    \"luminance\": 0.7892882311486963,\n    \"inclination\": 0.6376744186046512,\n    \"azimuth\": 0.881,\n    \"sun\": false,\n    \"fogDropoff\": 0.0000065,\n    \"fogIntensity\": 1,\n    \"exposureBias\": 1.25,\n    \"whitePoint\": 2.5,\n    \"ambientColor\": \"#2d3034\",\n    \"diffuseColor\": \"#aeafa4\",\n    \"backscatterColor\": \"#181d20\",\n    \"ambientOcclusion\": 1.17\n  }\n};\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nconst Procedural$3 = {};\n/**\n * @name datafileForLocation\n * @memberof module:Core\n * @function\n * @param {Object} target An Object specifying a longitude and latitude\n * @description Returns the file name for a data file for a given location. Used mostly internally by engine to construct URLs.\n */\n\nProcedural$3.datafileForLocation = function (target) {\n  if (!target || isNaN(target.latitude) || isNaN(target.longitude)) {\n    return null;\n  } // Snap to nearest data point\n\n\n  var lon = ApiUtils.snap(target.longitude);\n  var lat = ApiUtils.snap(target.latitude);\n  return ApiUtils.datafileForLocation(lon, lat);\n}; // TODO we should remove the displayLocation API as it overlaps\n// with focusOnLocation and confuses people. For now detect\n// when repeated calls are near to last target and forward\n// call to `focusOnLocation` if we are close by\n\n\nlet _lastTarget = null;\n/**\n * @name displayLocation\n * @memberof module:Core\n * @function\n * @param {Object} target An Object specifying a longitude and latitude\n * @description Instructs engine to download necessary data files for a location and to display it.\n * When the data is ready to be displayed [onLocationLoaded]{@link module:Core.onLocationLoaded} is fired.\n * @example\n * var target = { latitude: 43.21, longitude: 6.133 };\n * Procedural.displayLocation( target );\n *\n * // Optionally can also supply:\n * // - viewing angle,\n * // - a bearing,\n * // - a distance,\n * // - animation duration (in seconds)\n * var target = {\n *   latitude: 44.5, longitude: 6.3,\n *   angle: 20, bearing: 30, distance: 1000\n *   animationDuration: 0.5\n * };\n * Procedural.displayLocation( target );\n */\n\nProcedural$3.displayLocation = function (target) {\n  if (!target) {\n    RenderActions.fatalError('No place data passed');\n    return;\n  }\n\n  if (isNaN(target.latitude) || isNaN(target.longitude)) {\n    RenderActions.fatalError('Invalid place data passed');\n    return;\n  }\n\n  function dist(a, b) {\n    return Math.sqrt(a * a + b * b);\n  }\n\n  if (_lastTarget === null || dist(_lastTarget.longitude - target.longitude, _lastTarget.latitude - target.latitude) > 5) {\n    // For first invocation or nearby repeat calls, re-init\n    // library (this sets the overall geoprojection\n    setTimeout(function () {\n      UserActions.setCurrentPlace({ ...template,\n        ...target\n      });\n    }, 0);\n    _lastTarget = { ...target\n    };\n  } else {\n    // For small movements simply focus on new location\n    setTimeout(function () {\n      UserActions.focusOnLocation(target);\n    }, 0);\n  }\n};\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\n\nvar gui = null;\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nconst Procedural$4 = {};\n/**\n * @exports Procedural\n * @name Environment\n * @description Environments describe how the scene is rendered,\n * for example the color of the lighting, or the position of the\n * sun.\n *\n * To interactively adjust the values of the environment\n * you can use the editor, launched using:\n * [Procedural.environmentEditor]{@link module:Environment.environmentEditor}\n */\n\n/**\n * @name setEnvironment\n * @memberof module:Environment\n * @function\n * @param {Object} environment\n * @description Update the engine's environment to the environment\n * configuration passed.\n * @example\n * var environment = {\n *   title: 'custom',\n *   parameters: {\n *     inclination: 0.6,\n *     fogDropoff: 0.0002\n *   }\n * };\n * Procedural.setEnvironment( environment )\n */\n\nProcedural$4.setEnvironment = function (environment) {\n  setTimeout(function () {\n    UserActions.setEnvironment(environment);\n  }, 0);\n};\n/**\n * @name environmentEditor\n * @memberof module:Environment\n * @function\n * @description Launches the environment editor\n */\n\n\nProcedural$4.environmentEditor = function () {\n  gui.initEnv();\n};\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\n\nvar queue = [];\n\nvar processNext = function () {\n  queue.shift()();\n};\n\nvar enqueue = function (fn) {\n  if (typeof fn !== 'function') {\n    console.error('Tried to enqueue non-function');\n    return;\n  }\n\n  queue.push(fn);\n  setTimeout(processNext, 0);\n};\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\n\nvar FeatureUtils = {\n  // TODO perhaps better to inline these, as we're parsing a lot of data???\n  isLineString: function (feature) {\n    return feature.geometry.type === 'LineString';\n  },\n  isPolygon: function (feature) {\n    return feature.geometry.type === 'Polygon';\n  },\n  isMultiPolygon: function (feature) {\n    return feature.geometry.type === 'MultiPolygon';\n  },\n  isPoint: function (feature) {\n    return feature.geometry.type === 'Point';\n  },\n  tagValue: function (feature, tag) {\n    if (!feature.properties.tags) {\n      return null;\n    }\n\n    return feature.properties.tags[tag];\n  },\n  hasTag: function (feature, tag) {\n    return !!FeatureUtils.tagValue(feature, tag);\n  },\n  isPiste: function (feature) {\n    return FeatureUtils.isLineString(feature) && FeatureUtils.hasTag(feature, 'piste:type');\n  },\n  isAerial: function (feature) {\n    return FeatureUtils.isLineString(feature) && FeatureUtils.hasTag(feature, 'aerialway');\n  },\n  isHighway: function (feature) {\n    return FeatureUtils.isLineString(feature) && FeatureUtils.hasTag(feature, 'highway');\n  },\n  isTrack: function (feature) {\n    if (!FeatureUtils.isLineString(feature)) {\n      return false;\n    }\n\n    var highway = FeatureUtils.tagValue(feature, 'highway');\n    return highway === 'track' || highway === 'footway' || highway === 'path' || highway === 'cycleway' || highway === 'bridleway';\n  },\n  isRiver: function (feature) {\n    return FeatureUtils.isLineString(feature) && FeatureUtils.hasTag(feature, 'waterway');\n  },\n  isBuilding: function (feature) {\n    return FeatureUtils.isPolygon(feature) && FeatureUtils.hasTag(feature, 'building');\n  },\n  isForest: function (feature) {\n    return (FeatureUtils.isPolygon(feature) || FeatureUtils.isMultiPolygon(feature)) && !FeatureUtils.isBuilding(feature);\n  },\n  color: function (feature) {\n    var difficulty = !!feature.properties.tags && feature.properties.tags['piste:difficulty'];\n\n    if (difficulty) {\n      if (difficulty === 'advanced' || difficulty === 'expert' || difficulty === 'freeride') {\n        return '#030512';\n      }\n\n      if (difficulty === 'intermediate') {\n        return '#ef2415';\n      }\n\n      if (difficulty === 'easy') {\n        return '#1976d2';\n      }\n\n      if (difficulty === 'novice') {\n        return '#4caf50';\n      }\n\n      log$1('Unknown piste difficulty', difficulty);\n      return '#17afef';\n    }\n\n    if (FeatureUtils.isAerial(feature)) {\n      return '#0c0c0c';\n    }\n\n    if (FeatureUtils.isTrack(feature)) {\n      return 'rgba(46, 42, 22, 0.5)';\n    }\n\n    if (FeatureUtils.isHighway(feature)) {\n      return '#222120';\n    }\n\n    if (feature.properties.color) {\n      return feature.properties.color;\n    }\n\n    if (FeatureUtils.isRiver(feature)) {\n      // Hack this in to allow memoize to work\n      return feature.properties.tags.waterway === 'stream' ? 5 : 100;\n    }\n\n    log$1('Unknown feature color', feature);\n  },\n  thickness: function (feature) {\n    if (feature.properties.thickness) {\n      return feature.properties.thickness;\n    }\n\n    if (FeatureUtils.isPiste(feature)) {\n      return 2.7;\n    }\n\n    if (FeatureUtils.isAerial(feature)) {\n      return 3.0;\n    }\n\n    if (FeatureUtils.isTrack(feature)) {\n      return 3;\n    }\n\n    if (FeatureUtils.isHighway(feature)) {\n      var highway = FeatureUtils.tagValue(feature, 'highway');\n\n      if (highway === 'motorway') {\n        return 13;\n      }\n\n      if (highway === 'trunk') {\n        return 11;\n      }\n\n      if (highway === 'primary') {\n        return 10;\n      }\n\n      if (highway === 'secondary') {\n        return 8;\n      }\n\n      return 5;\n    }\n\n    if (FeatureUtils.isRiver(feature)) {\n      if (feature.properties.tags.width) {\n        return feature.properties.tags.width;\n      }\n\n      return feature.properties.tags.waterway === 'stream' ? 2 : 3.7;\n    }\n\n    return 2.5;\n  }\n};\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// Have other stores depend on this to get subsets of\n// OSM data\n\nfunction OSMAdapter() {\n  this.bindListeners({\n    clearFeatures: UserActions.setCurrentPlace,\n    setFeatures: GeodataActions.setFeatures\n  });\n  this.clearFeatures();\n}\n\nOSMAdapter.prototype.clearFeatures = function () {\n  this.buildings = [];\n  this.forests = [];\n  this.highways = [];\n  this.lifts = [];\n  this.peaks = [];\n  this.places = [];\n  this.pistes = [];\n  this.lakes = [];\n  this.rivers = [];\n  this.unknown = [];\n  return false;\n}; // Return collection to place feature into\n\n\nOSMAdapter.prototype.classify = function (feature) {\n  if (FeatureUtils.isLineString(feature)) {\n    // Give top priority to pistes, so we don't classify as roads\n    if (FeatureUtils.hasTag(feature, 'piste:type')) {\n      return this.pistes;\n    }\n\n    if (FeatureUtils.hasTag(feature, 'highway')) {\n      return this.highways;\n    }\n\n    if (FeatureUtils.hasTag(feature, 'waterway')) {\n      return this.rivers;\n    }\n\n    if (FeatureUtils.hasTag(feature, 'aerialway')) {\n      return this.lifts;\n    } // Assume this is a piste (or generic trail)\n    // TODO, create another type?\n    //if ( FeatureUtils.hasTag( feature, 'piste:type' ) ) {\n\n\n    return this.pistes; //}\n  } else if (FeatureUtils.isPolygon(feature)) {\n    if (FeatureUtils.hasTag(feature, 'building')) {\n      return this.buildings;\n    }\n\n    var natural = FeatureUtils.tagValue(feature, 'natural');\n\n    if (natural === 'water') {\n      return this.lakes;\n    } // For now, treat river areas as lakes, as we don't have flow\n    // working yet\n\n\n    var waterway = FeatureUtils.tagValue(feature, 'waterway');\n\n    if (waterway === 'riverbank') {\n      return this.lakes;\n    }\n\n    return this.forests;\n  } else if (FeatureUtils.isMultiPolygon(feature)) {\n    return this.forests;\n  } else if (FeatureUtils.isPoint(feature)) {\n    var tags = feature.properties.tags;\n\n    if (tags.natural === 'peak' && tags.name) {\n      return this.peaks;\n    } else if (tags.place) {\n      return this.places;\n    } else {\n      return this.unknown;\n    }\n  }\n\n  return this.unknown;\n}; // Convert OSM data into something matching our API\n// TODO should eventually deprecate and generate the\n// data better, this is all pretty messy\n\n\nOSMAdapter.prototype.normalize = function (feature) {\n  if (feature.properties.tags === undefined) {\n    return;\n  }\n\n  var props = feature.properties;\n  var tags = props.tags;\n  delete props.tags; // Promote name to real property\n\n  if (tags.name) {\n    props.name = tags.name;\n  } // Figure out type and add icon\n\n\n  if (tags.natural === 'peak') {\n    props.icon = 'caret-up';\n    props.fadeDistance = 10000;\n\n    if (tags.ele && props.name) {\n      props.name += ' - ' + tags.ele + 'm';\n    }\n  } else if (tags.place) {\n    props.icon = 'dot-circle-o';\n    props.fadeDistance = 15000;\n  } // TODO mark builtin features\n  // TODO extract to default\n\n\n  props.collapseDistance = 0.5 * props.fadeDistance;\n  props.priority = -10;\n  props.borderRadius = 20;\n  props.background = 'rgba(0, 0, 0, 0.6)';\n  props.color = '#fff';\n  props.clipping = 'object';\n  props.anchor = 'left';\n  props.padding = 2;\n};\n\nOSMAdapter.prototype.setFeatures = function (data) {\n  // Is data already projected?\n  var projected = !!data.crs; // Classify features, for now without duplication\n\n  var feature, collection;\n  var startTime = track$1.now();\n\n  while (data.features.length > 0) {\n    feature = data.features.pop(); // Remove 3035 projection\n\n    if (projected) {\n      feature.geometry.coordinates = geoproject.unproject3035(feature.geometry.coordinates);\n    }\n\n    if (feature.projected === undefined) {\n      feature.projected = false;\n    }\n\n    collection = this.classify(feature);\n    collection.push(feature);\n  }\n\n  this.peaks.forEach(this.normalize.bind(this));\n  this.places.forEach(this.normalize.bind(this));\n  var time = track$1.now() - startTime;\n  track$1.timing('geodata', 'classify', 'osm', time);\n};\n\nOSMAdapter.displayName = 'OSMAdapter';\nvar OSMAdapter$1 = alt.createStore(OSMAdapter);\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nvar DEFAULT = '____default____'; // Have other stores depend on this to get subsets of\n// overlay data\n\nfunction OverlayAdapter() {\n  this.bindListeners({\n    addBuiltinOverlay: GeodataActions.addBuiltinOverlay,\n    addOverlay: GeodataActions.addOverlay,\n    updateOverlay: GeodataActions.updateOverlay,\n    featureCreated: RenderActions.featureCreated,\n    removeOverlay: GeodataActions.removeOverlay,\n    setFeatures: GeodataActions.setFeatures\n  }); // Hash to keep track of overlays added\n\n  this.overlays = {}; // Hash to keep track of when overlays are displayed\n\n  this.overlayTracker = {}; // Builtin overlays are not specified by the user,\n  // but rather extracted from the OSM data\n\n  this.builtinOverlays = [];\n  this.supportedBuiltinOverlays = ['lifts', 'peaks', 'pistes', 'places']; // Overlays which which don't want to generate new data\n  // for, just mark whether to show them\n\n  this.referenceOnlyBuiltinOverlays = ['lifts', 'pistes']; // Collections to sort elements into\n\n  this.lines = [];\n  this.markers = [];\n} // Return collection to place feature into\n\n\nOverlayAdapter.prototype.classify = function (feature) {\n  if (FeatureUtils.isLineString(feature)) {\n    return this.lines;\n  } else if (FeatureUtils.isPoint(feature)) {\n    return this.markers;\n  }\n\n  return null;\n};\n\nOverlayAdapter.prototype.removeFeature = function (feature) {\n  var collection = this.classify(feature);\n\n  if (collection === null) {\n    return;\n  }\n\n  var index = collection.indexOf(feature);\n\n  if (index !== -1) {\n    collection.splice(index, 1);\n  }\n};\n\nOverlayAdapter.prototype.addOverlay = function (data) {\n  var builtin = this.builtinOverlays.indexOf(data.name) !== -1;\n  this.removeOverlay(data.name); // removeOverlay clears out the overlay from the builtinOverlays\n  // list, which we do not want, so add it back\n  // TODO doesn't work as we modify order of array!!!!\n\n  if (builtin) {\n    this.builtinOverlays.unshift(data.name);\n  }\n\n  if (data.name === undefined) {\n    data.name = DEFAULT;\n  } // Cache away overlay so we can later remove it\n\n\n  this.overlays[data.name] = data; // Make a copy of the array, to avoid modifying original\n\n  var features = data.features.concat(); // Classify features, for now without duplication\n\n  var feature;\n  var startTime = track$1.now();\n\n  while (features.length > 0) {\n    feature = features.pop(); // Copy across default properties\n\n    if (data.defaults && data.defaults.properties) {\n      lodash_min.defaults(feature.properties, data.defaults.properties);\n    }\n\n    if (feature.projected === undefined) {\n      feature.projected = false;\n    }\n\n    var collection = this.classify(feature);\n\n    if (collection) {\n      collection.push(feature);\n      feature.overlayName = data.name;\n      this.featureClassified(feature);\n    }\n  }\n\n  var time = track$1.now() - startTime;\n  track$1.timing('geodata', 'classify', 'overlay', time);\n};\n\nOverlayAdapter.prototype.updateOverlay = function (data) {\n  var exists = this.overlays[data.name] !== undefined;\n\n  if (!exists) {\n    console.error(name + ' overlay has not been added, so cannot be updated');\n    return false;\n  }\n\n  var newFeatures = data.features,\n      oldFeatures = this.overlays[data.name].features;\n  var newL = newFeatures.length,\n      oldL = oldFeatures.length;\n\n  if (newL !== oldL) {\n    console.error('Tried to call updateOverlay on overlay ' + data.name + ', but number of features does not match. Original: ' + oldL + ', new: ' + newL);\n    return false;\n  } // Is data already projected?\n  // Note we do not support multiple different projections\n  // or projections with different centers\n\n\n  var projected = !!data.crs;\n  var oldFeature, newFeature;\n\n  for (var n = 0; n < newL; n++) {\n    var oldFeature = oldFeatures[n];\n    var newFeature = newFeatures[n]; // TODO should we check ids match?\n\n    oldFeature.projected = newFeature.projected === undefined ? projected : newFeature.projected;\n    oldFeature.geometry.coordinates = newFeature.geometry.coordinates;\n  }\n};\n\nOverlayAdapter.prototype.addBuiltinOverlay = function (overlay) {\n  // Support single and array parameters\n  if (!Array.isArray(overlay)) {\n    overlay = [overlay];\n  }\n\n  for (var n = 0, nl = overlay.length; n < nl; n++) {\n    var name = overlay[n];\n    var index = this.supportedBuiltinOverlays.indexOf(name);\n\n    if (index === -1) {\n      console.error(name + ' is not a supported built-in overlay');\n      return false;\n    } // Just mark that we want to use this overlay and rely\n    // on updateBuiltinOverlays to populate data\n\n\n    index = this.builtinOverlays.indexOf(name);\n\n    if (index === -1) {\n      this.builtinOverlays.push(name);\n    }\n  }\n\n  return this.updateBuiltinOverlays();\n};\n\nOverlayAdapter.prototype.updateBuiltinOverlays = function () {\n  this.waitFor(OSMAdapter$1);\n  var osm = OSMAdapter$1.getState();\n\n  for (var o = 0, ol = this.builtinOverlays.length; o < ol; o++) {\n    var name = this.builtinOverlays[o];\n\n    if (this.referenceOnlyBuiltinOverlays.indexOf(name) !== -1) {\n      continue;\n    }\n\n    this.addOverlay({\n      name: name,\n      type: 'FeatureCollection',\n      features: osm[name]\n    });\n  }\n};\n\nOverlayAdapter.prototype.setFeatures = function () {\n  return this.updateBuiltinOverlays();\n};\n\nOverlayAdapter.prototype.removeOverlay = function (toRemove) {\n  if (toRemove === undefined) {\n    toRemove = [DEFAULT];\n  }\n\n  if (!Array.isArray(toRemove)) {\n    toRemove = [toRemove];\n  }\n\n  for (var n = 0, nl = toRemove.length; n < nl; n++) {\n    var name = toRemove[n];\n    var index = this.builtinOverlays.indexOf(name);\n\n    if (index !== -1) {\n      this.builtinOverlays.splice(index, 1);\n    }\n\n    if (this.overlays[name] === undefined) {\n      continue;\n    }\n\n    var overlay = this.overlays[name];\n\n    for (var f = 0, fl = overlay.features.length; f < fl; f++) {\n      this.removeFeature(overlay.features[f]);\n    }\n\n    delete this.overlays[name];\n  }\n};\n\nOverlayAdapter.prototype.featureClassified = function (feature) {\n  if (this.overlayTracker[feature.overlayName] === undefined) {\n    this.overlayTracker[feature.overlayName] = 1;\n  } else {\n    this.overlayTracker[feature.overlayName] += 1;\n  }\n};\n\nOverlayAdapter.prototype.featureCreated = function (feature) {\n  if (this.overlayTracker[feature.overlayName] === undefined) {\n    return false;\n  } else {\n    this.overlayTracker[feature.overlayName] -= 1;\n  }\n\n  if (this.overlayTracker[feature.overlayName] === 0) {\n    var overlayName = feature.overlayName;\n    delete this.overlayTracker[feature.overlayName];\n    enqueue(function () {\n      RenderActions.overlayDisplayed(overlayName);\n    });\n  }\n\n  delete feature.overlayName;\n};\n\nOverlayAdapter.displayName = 'OverlayAdapter';\nvar OverlayAdapter$1 = alt.createStore(OverlayAdapter);\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// Uniforms for shaders that lookup height\n\nconst heightUniforms = {\n  elevationArray: {\n    value: ElevationDatasource.textureArray\n  },\n  indirectionTexture: {\n    value: ElevationDatasource.indirectionTexture\n  },\n  uGlobalOffset: {\n    type: 'v2',\n    value: new THREE.Vector2()\n  },\n  uSceneScale: {\n    type: 'f',\n    value: 1\n  }\n};\nGeoprojectStore$1.listen(({\n  globalOffset,\n  sceneScale\n}) => {\n  heightUniforms.uGlobalOffset.value.copy(globalOffset);\n  heightUniforms.uSceneScale.value = sceneScale;\n});\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nconst Shader = function (value) {\n  this.value = value;\n};\n\nShader.prototype.define = function (define, value) {\n  var regexp = new RegExp(\"#define \" + define + \" .*\", \"g\");\n  var newDefine = \"#define \" + define + (value ? \" \" + value : \"\");\n\n  if (this.value.match(regexp)) {\n    // #define already exists, update its value\n    this.value = this.value.replace(regexp, newDefine);\n  } else {\n    // New #define, prepend to start of file\n    this.value = newDefine + \"\\n\" + this.value;\n  }\n};\n\nShader.prototype.clone = function () {\n  return new Shader(this.value);\n};\n\nvar beaconVertex = new Shader(`uniform mat4 modelMatrix;uniform mat4 viewMatrix;uniform mat4 projectionMatrix;uniform vec3 cameraPosition;attribute vec3 position;attribute vec3 normal;uniform float uAccuracy;varying vec3 vPosition;varying vec3 vCenter;varying float vRingRadius;\n#define BEACON_RADIUS 50.0\nfloat a(float b){return clamp(b,0.0,1.0);}vec2 a(vec2 b){return clamp(b,0.0,1.0);}vec3 a(vec3 b){return clamp(b,0.0,1.0);}vec4 a(vec4 b){return clamp(b,0.0,1.0);}\n#define VIRTUAL_TEXTURE_ARRAY_BLOCKS 4.0\n\n#define VIRTUAL_TEXTURE_ARRAY_SIZE 512.0\n\n#define TEX_SIZE (VIRTUAL_TEXTURE_ARRAY_SIZE * VIRTUAL_TEXTURE_ARRAY_BLOCKS)\nconst vec2 c=vec2(1.0/TEX_SIZE,0.0);vec4 d(const in sampler2D b,in vec2 e){e-=0.5*c.xx;vec2 f=fract(e*TEX_SIZE);vec2 g=e-c.xx*f+0.5*c.xx;\n#ifdef HEIGHT_LOOKUP_BIAS\nvec4 h=texture2D(b,g,-10.0);vec4 i=texture2D(b,g+c,-10.0);vec4 j=texture2D(b,g+c.yx,-10.0);vec4 k=texture2D(b,g+c.xx,-10.0);\n#else\nvec4 h=texture2D(b,g);vec4 i=texture2D(b,g+c);vec4 j=texture2D(b,g+c.yx);vec4 k=texture2D(b,g+c.xx);\n#endif\nvec4 l=mix(h,i,f.x);vec4 m=mix(j,k,f.x);return mix(l,m,f.y);}vec4 n(in sampler2D o,in vec2 e,in float p){vec2 q=vec2(mod(float(p),VIRTUAL_TEXTURE_ARRAY_BLOCKS),floor(float(p)/VIRTUAL_TEXTURE_ARRAY_BLOCKS));const float r=0.5;vec2 s=vec2(r,VIRTUAL_TEXTURE_ARRAY_SIZE-r)/VIRTUAL_TEXTURE_ARRAY_SIZE;vec2 t=(clamp(e,s.x,s.y)+q)/VIRTUAL_TEXTURE_ARRAY_BLOCKS;\n#ifdef MANUAL_TEXTURE_BILINEAR\nreturn d(o,t);\n#else\nreturn texture2D(o,t);\n#endif\n}uniform lowp sampler2D indirectionTexture;uniform vec2 uGlobalOffset;uniform float uSceneScale;const float u=0.0008176665341588574;float v(in float w){float x=3.141592653589793-0.006135923151542565*w;float y=dot(vec2(0.5),exp(vec2(x,-x)));return y/(u*uSceneScale);}uniform lowp sampler2D elevationArray;float z(in vec2 A){const float B=32.0;const float C=1024.0;vec2 D=A.xy-uGlobalOffset;D/=(uSceneScale*B);D*=vec2(1.0,-1.0);vec2 E=D/C;const vec2 F=vec2(0.5);vec2 G=(floor(D-F)+F);G+=step(F,D-G);vec2 H=G/C;vec4 I=texture2D(indirectionTexture,H);float p=I.r;float J=I.g;vec2 K=I.ba;vec2 t=E*J+K;return v(D.y)*n(elevationArray,t,p).a;}void main(){vCenter=position-BEACON_RADIUS*normal;vec4 L=modelMatrix*vec4(vCenter,1.0);vec3 M=L.xyz/L.w;vCenter=M;float N=abs((viewMatrix*vec4(M,1.0)).z);vRingRadius=25.0*clamp(N/1000.0,0.01,10.0);float O=max(vRingRadius,uAccuracy);vPosition=vCenter+O*normal;float P=z(vPosition.xy);float Q=P-vPosition.z+N/1000.0-0.3*O;vPosition.z=P;vec3 R=cameraPosition-vPosition;float S=length(R);R=normalize(R);float T=230.0*smoothstep(50.0,250.0,S);gl_Position=projectionMatrix*viewMatrix*vec4(vPosition+T*R,1.0);}`);\nvar beaconFragment = new Shader(`precision highp float;uniform float uTime;varying vec3 vPosition;varying vec3 vCenter;varying float vRingRadius;const vec4 a=vec4(1.0,1.0,1.0,0.9);void main(){float b=distance(vPosition.xy,vCenter.xy)/vRingRadius;vec3 c=mix(vec3(0.0,0.0,1.0),vec3(0.0,0.5,1.0),0.2*b);vec4 d=vec4(c*sin(uTime),0.5);d=mix(d,a,smoothstep(0.75,0.8,b));d=mix(d,vec4(c.rgb,0.15),smoothstep(1.0,1.05,b));d.rgb=pow(abs(d.rgb),vec3(0.4545));gl_FragColor=d;}`);\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n *\n * This file incorporates work covered by the following copyright and\n * permission notice:\n *\n *   The MIT License\n *\n *   Copyright © 2010-2020 three.js authors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in\n *   all copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *   THE SOFTWARE.\n */\n\nfunction Color$1(r, g, b, a) {\n  if (g === undefined && b === undefined) {\n    // r is THREE.Color, hex or string\n    return this.set(r);\n  }\n\n  if (a === undefined) {\n    a = 1;\n  }\n\n  return this.setRGB(r, g, b, a);\n}\n\nObject.assign(Color$1.prototype, {\n  isColor: true,\n  r: 1,\n  g: 1,\n  b: 1,\n  a: 1,\n  set: function (value) {\n    if (value && value.isColor) {\n      this.copy(value);\n    } else if (typeof value === 'number') {\n      this.setHex(value);\n    } else if (typeof value === 'string') {\n      this.setStyle(value);\n    }\n\n    return this;\n  },\n  setScalar: function (scalar) {\n    this.r = scalar;\n    this.g = scalar;\n    this.b = scalar;\n    return this;\n  },\n  setHex: function (hex) {\n    hex = Math.floor(hex);\n    this.r = (hex >> 16 & 255) / 255;\n    this.g = (hex >> 8 & 255) / 255;\n    this.b = (hex & 255) / 255;\n    return this;\n  },\n  setRGB: function (r, g, b, a) {\n    this.r = r;\n    this.g = g;\n    this.b = b;\n    this.a = a;\n    return this;\n  },\n  setStyle: function (style) {\n    function handleAlpha(string) {\n      if (string === undefined) return 1;\n      return parseFloat(string);\n    }\n\n    var m;\n\n    if (m = /^((?:rgb)a?)\\(\\s*([^\\)]*)\\)/.exec(style)) {\n      // rgb / hsl\n      var color;\n      var name = m[1];\n      var components = m[2];\n\n      switch (name) {\n        case 'rgb':\n        case 'rgba':\n          if (color = /^(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec(components)) {\n            // rgb(255,0,0) rgba(255,0,0,0.5)\n            this.r = Math.min(255, parseInt(color[1], 10)) / 255;\n            this.g = Math.min(255, parseInt(color[2], 10)) / 255;\n            this.b = Math.min(255, parseInt(color[3], 10)) / 255;\n            this.a = handleAlpha(color[5]);\n            return this;\n          }\n\n          if (color = /^(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec(components)) {\n            // rgb(100%,0%,0%) rgba(100%,0%,0%,0.5)\n            this.r = Math.min(100, parseInt(color[1], 10)) / 100;\n            this.g = Math.min(100, parseInt(color[2], 10)) / 100;\n            this.b = Math.min(100, parseInt(color[3], 10)) / 100;\n            this.a = handleAlpha(color[5]);\n            return this;\n          }\n\n          break;\n      }\n    } else if (m = /^\\#([A-Fa-f0-9]+)$/.exec(style)) {\n      // hex color\n      var hex = m[1];\n      var size = hex.length;\n\n      if (size === 3) {\n        // #ff0\n        this.r = parseInt(hex.charAt(0) + hex.charAt(0), 16) / 255;\n        this.g = parseInt(hex.charAt(1) + hex.charAt(1), 16) / 255;\n        this.b = parseInt(hex.charAt(2) + hex.charAt(2), 16) / 255;\n        return this;\n      } else if (size === 6) {\n        // #ff0000\n        this.r = parseInt(hex.charAt(0) + hex.charAt(1), 16) / 255;\n        this.g = parseInt(hex.charAt(2) + hex.charAt(3), 16) / 255;\n        this.b = parseInt(hex.charAt(4) + hex.charAt(5), 16) / 255;\n        return this;\n      }\n    }\n\n    if (style && style.length > 0) {\n      // color keywords\n      var hex = THREE.Color.NAMES[style];\n\n      if (hex !== undefined) {\n        // red\n        this.setHex(hex);\n      } else {\n        // unknown color\n        console.warn('THREE.Color: Unknown color ' + style);\n      }\n    }\n\n    return this;\n  },\n  clone: function () {\n    return new this.constructor(this.r, this.g, this.b, this.a);\n  },\n  copy: function (color) {\n    this.r = color.r;\n    this.g = color.g;\n    this.b = color.b;\n    this.a = color.a;\n    return this;\n  },\n  copyGammaToLinear: function (color, gammaFactor) {\n    if (gammaFactor === undefined) gammaFactor = 2.0;\n    this.r = Math.pow(color.r, gammaFactor);\n    this.g = Math.pow(color.g, gammaFactor);\n    this.b = Math.pow(color.b, gammaFactor);\n    return this;\n  },\n  copyLinearToGamma: function (color, gammaFactor) {\n    if (gammaFactor === undefined) gammaFactor = 2.0;\n    var safeInverse = gammaFactor > 0 ? 1.0 / gammaFactor : 1.0;\n    this.r = Math.pow(color.r, safeInverse);\n    this.g = Math.pow(color.g, safeInverse);\n    this.b = Math.pow(color.b, safeInverse);\n    return this;\n  },\n  convertGammaToLinear: function () {\n    var r = this.r,\n        g = this.g,\n        b = this.b;\n    this.r = r * r;\n    this.g = g * g;\n    this.b = b * b;\n    return this;\n  },\n  convertLinearToGamma: function () {\n    this.r = Math.sqrt(this.r);\n    this.g = Math.sqrt(this.g);\n    this.b = Math.sqrt(this.b);\n    return this;\n  },\n  getHex: function () {\n    return this.r * 255 << 16 ^ this.g * 255 << 8 ^ this.b * 255 << 0;\n  },\n  getHexString: function () {\n    return ('000000' + this.getHex().toString(16)).slice(-6);\n  },\n  getHSL: function (optionalTarget) {\n    // h,s,l ranges are in 0.0 - 1.0\n    var hsl = optionalTarget || {\n      h: 0,\n      s: 0,\n      l: 0\n    };\n    var r = this.r,\n        g = this.g,\n        b = this.b;\n    var max = Math.max(r, g, b);\n    var min = Math.min(r, g, b);\n    var hue, saturation;\n    var lightness = (min + max) / 2.0;\n\n    if (min === max) {\n      hue = 0;\n      saturation = 0;\n    } else {\n      var delta = max - min;\n      saturation = lightness <= 0.5 ? delta / (max + min) : delta / (2 - max - min);\n\n      switch (max) {\n        case r:\n          hue = (g - b) / delta + (g < b ? 6 : 0);\n          break;\n\n        case g:\n          hue = (b - r) / delta + 2;\n          break;\n\n        case b:\n          hue = (r - g) / delta + 4;\n          break;\n      }\n\n      hue /= 6;\n    }\n\n    hsl.h = hue;\n    hsl.s = saturation;\n    hsl.l = lightness;\n    return hsl;\n  },\n  getStyle: function () {\n    return 'rgb(' + (this.r * 255 | 0) + ',' + (this.g * 255 | 0) + ',' + (this.b * 255 | 0) + ')';\n  },\n  offsetHSL: function (h, s, l) {\n    var hsl = this.getHSL();\n    hsl.h += h;\n    hsl.s += s;\n    hsl.l += l;\n    this.setHSL(hsl.h, hsl.s, hsl.l);\n    return this;\n  },\n  add: function (color) {\n    this.r += color.r;\n    this.g += color.g;\n    this.b += color.b;\n    return this;\n  },\n  addColors: function (color1, color2) {\n    this.r = color1.r + color2.r;\n    this.g = color1.g + color2.g;\n    this.b = color1.b + color2.b;\n    return this;\n  },\n  addScalar: function (s) {\n    this.r += s;\n    this.g += s;\n    this.b += s;\n    return this;\n  },\n  sub: function (color) {\n    this.r = Math.max(0, this.r - color.r);\n    this.g = Math.max(0, this.g - color.g);\n    this.b = Math.max(0, this.b - color.b);\n    return this;\n  },\n  multiply: function (color) {\n    this.r *= color.r;\n    this.g *= color.g;\n    this.b *= color.b;\n    return this;\n  },\n  multiplyScalar: function (s) {\n    this.r *= s;\n    this.g *= s;\n    this.b *= s;\n    return this;\n  },\n  lerp: function (color, alpha) {\n    this.r += (color.r - this.r) * alpha;\n    this.g += (color.g - this.g) * alpha;\n    this.b += (color.b - this.b) * alpha;\n    this.a += (color.a - this.a) * alpha;\n    return this;\n  },\n  equals: function (c) {\n    return c.r === this.r && c.g === this.g && c.b === this.b;\n  },\n  fromArray: function (array, offset) {\n    if (offset === undefined) offset = 0;\n    this.r = array[offset];\n    this.g = array[offset + 1];\n    this.b = array[offset + 2];\n    return this;\n  },\n  toArray: function (array, offset) {\n    if (array === undefined) array = [];\n    if (offset === undefined) offset = 0;\n    array[offset] = this.r;\n    array[offset + 1] = this.g;\n    array[offset + 2] = this.b;\n    return array;\n  },\n  toJSON: function () {\n    return this.getHex();\n  }\n});\n/**\n * @author alteredq / http://alteredqualia.com/\n *\n * Full-screen textured quad shader\n */\n\nvar CopyShader = {\n  uniforms: {\n    \"tDiffuse\": {\n      value: null\n    },\n    \"opacity\": {\n      value: 1.0\n    }\n  },\n  vertexShader: [\"precision highp float;\", \"uniform mat4 modelViewMatrix;\", \"uniform mat4 projectionMatrix;\", \"attribute vec3 position;\", \"attribute vec2 uv;\", \"varying vec2 vUv;\", \"void main() {\", \"\tvUv = uv;\", \"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\", \"}\"].join(\"\\n\"),\n  fragmentShader: [\"precision highp float;\", \"uniform float opacity;\", \"uniform sampler2D tDiffuse;\", \"varying vec2 vUv;\", \"void main() {\", \"\tvec4 texel = texture2D( tDiffuse, vUv );\", \"\tgl_FragColor = opacity * texel;\", \"}\"].join(\"\\n\")\n};\n\nfunction Pass() {\n  // if set to true, the pass is processed by the composer\n  this.enabled = true; // if set to true, the pass indicates to swap read and write buffer after rendering\n\n  this.needsSwap = true; // if set to true, the pass clears its buffer before rendering\n\n  this.clear = false; // if set to true, the result of the pass is rendered to screen. This is set automatically by EffectComposer.\n\n  this.renderToScreen = false;\n}\n\nObject.assign(Pass.prototype, {\n  setSize: function ()\n  /* width, height */\n  {},\n  render: function ()\n  /* renderer, writeBuffer, readBuffer, deltaTime, maskActive */\n  {\n    console.error('THREE.Pass: .render() must be implemented in derived pass.');\n  }\n}); // Helper for passes that need to fill the viewport with a single quad.\n\nPass.FullScreenQuad = function () {\n  var camera = new OrthographicCamera(-1, 1, 1, -1, 0, 1);\n  var geometry = new PlaneBufferGeometry(2, 2);\n\n  var FullScreenQuad = function (material) {\n    this._mesh = new Mesh(geometry, material);\n    this._camera = camera;\n  };\n\n  Object.defineProperty(FullScreenQuad.prototype, 'material', {\n    get: function () {\n      return this._mesh.material;\n    },\n    set: function (value) {\n      this._mesh.material = value;\n    }\n  });\n  Object.assign(FullScreenQuad.prototype, {\n    dispose: function () {\n      this._mesh.geometry.dispose();\n    },\n    render: function (renderer) {\n      renderer.render(this._mesh, camera);\n    }\n  });\n  return FullScreenQuad;\n}();\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\n\nconst ShaderPass = function (shader, textureID) {\n  Pass.call(this);\n  this.textureID = textureID !== undefined ? textureID : \"tDiffuse\";\n\n  if (shader instanceof ShaderMaterial || shader instanceof RawShaderMaterial) {\n    this.uniforms = shader.uniforms;\n    this.material = shader;\n  } else if (shader) {\n    this.uniforms = UniformsUtils.clone(shader.uniforms);\n    this.material = new RawShaderMaterial({\n      defines: Object.assign({}, shader.defines),\n      uniforms: this.uniforms,\n      vertexShader: shader.vertexShader,\n      fragmentShader: shader.fragmentShader\n    });\n  }\n\n  this.fsQuad = new Pass.FullScreenQuad(this.material);\n};\n\nShaderPass.prototype = Object.assign(Object.create(Pass.prototype), {\n  constructor: ShaderPass,\n  render: function (renderer, writeBuffer, readBuffer\n  /*, deltaTime, maskActive */\n  ) {\n    if (this.uniforms[this.textureID]) {\n      this.uniforms[this.textureID].value = readBuffer.texture;\n    }\n\n    this.fsQuad.material = this.material;\n\n    if (this.renderToScreen) {\n      renderer.setRenderTarget(null);\n      this.fsQuad.render(renderer);\n    } else {\n      renderer.setRenderTarget(writeBuffer); // TODO: Avoid using autoClear properties, see https://github.com/mrdoob/three.js/pull/15571#issuecomment-465669600\n\n      if (this.clear) renderer.clear(renderer.autoClearColor, renderer.autoClearDepth, renderer.autoClearStencil);\n      this.fsQuad.render(renderer);\n    }\n  },\n  compile: function (renderer) {\n    var tmpScene = new Scene();\n    var obj = new Object3D();\n    obj.material = this.material;\n    tmpScene.add(obj);\n    renderer.compile(tmpScene, this.fsQuad._camera);\n    tmpScene.children = [];\n  }\n});\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nvar EffectComposer = function (renderer, renderTarget, hd) {\n  // When we have HD passes enabled, we first render normal\n  // passes, keeping the depth buffer available for the\n  // HD pass after. This is useful e.g. for rendering a\n  // low-resolution scene and then adding high-resolution\n  // labels on top\n  this.hd = !!hd;\n  this.renderer = renderer;\n\n  if (renderTarget === undefined) {\n    var parameters = {\n      minFilter: LinearFilter,\n      magFilter: LinearFilter,\n      format: RGBAFormat,\n      stencilBuffer: false\n    };\n    var size = renderer.getSize(new Vector2());\n    renderTarget = new WebGLRenderTarget(size.width, size.height, parameters);\n    renderTarget.texture.name = 'EffectComposer.rt1';\n  }\n\n  this.renderTarget1 = renderTarget;\n  this.renderTarget2 = renderTarget.clone();\n  this.renderTarget2.texture.name = 'EffectComposer.rt2'; // For HD passes, need to setup depth texture\n  // that allows us to pass the depth from the\n  // original (non-HD) passes to the HD pass\n\n  var depthTexture;\n\n  if (this.hd) {\n    this.renderTargetHD = renderTarget.clone();\n    depthTexture = new DepthTexture();\n    this.renderTarget1.depthTexture = depthTexture;\n    this.renderTarget2.depthTexture = depthTexture;\n  }\n\n  this.writeBuffer = this.renderTarget1;\n  this.readBuffer = this.renderTarget2;\n  this.renderToScreen = true;\n  this.passes = []; // dependencies\n\n  if (CopyShader === undefined) {\n    console.error('THREE.EffectComposer relies on CopyShader');\n  }\n\n  if (ShaderPass === undefined) {\n    console.error('THREE.EffectComposer relies on ShaderPass');\n  }\n\n  this.copyPass = new ShaderPass(CopyShader);\n  this.clock = new Clock();\n};\n\nObject.assign(EffectComposer.prototype, {\n  swapBuffers: function () {\n    var tmp = this.readBuffer;\n    this.readBuffer = this.writeBuffer;\n    this.writeBuffer = tmp;\n  },\n  addPass: function (pass) {\n    if (pass.hd && !this.hd) {\n      console.error('Cannot add HD pass to a non-HD EffectComposer');\n    }\n\n    this.passes.push(pass);\n    var size = this.renderer.getSize(new Vector2());\n    pass.setSize(size.width, size.height);\n  },\n  insertPass: function (pass, index) {\n    this.passes.splice(index, 0, pass);\n  },\n  isLastEnabledPass: function (passIndex) {\n    for (var i = passIndex + 1; i < this.passes.length; i++) {\n      if (this.passes[i].enabled) {\n        return false;\n      }\n    }\n\n    return true;\n  },\n  render: function (deltaTime) {\n    // deltaTime value is in seconds\n    if (deltaTime === undefined) {\n      deltaTime = this.clock.getDelta();\n    }\n\n    var currentRenderTarget = this.renderer.getRenderTarget();\n    var maskActive = false;\n    var pass,\n        i,\n        il = this.passes.length;\n\n    for (i = 0; i < il; i++) {\n      pass = this.passes[i];\n      if (pass.enabled === false) continue;\n      var src = this.readBuffer;\n\n      if (pass.hd) {\n        src = this.renderTargetHD;\n      }\n\n      if (pass.src) {\n        src = pass.src;\n      }\n\n      pass.renderToScreen = this.renderToScreen && this.isLastEnabledPass(i);\n      pass.render(this.renderer, this.writeBuffer, src, deltaTime, maskActive);\n\n      if (pass.needsSwap) {\n        this.swapBuffers();\n      }\n    }\n\n    this.renderer.setRenderTarget(currentRenderTarget);\n  },\n  reset: function (renderTarget) {\n    if (renderTarget === undefined) {\n      var size = this.renderer.getSize(new Vector2());\n      renderTarget = this.renderTarget1.clone();\n      renderTarget.setSize(size.width, size.height);\n    }\n\n    this.renderTarget1.dispose();\n    this.renderTarget2.dispose();\n    this.renderTarget1 = renderTarget;\n    this.renderTarget2 = renderTarget.clone();\n    this.writeBuffer = this.renderTarget1;\n    this.readBuffer = this.renderTarget2;\n  },\n  setSize: function (width, height, hdWidth, hdHeight) {\n    this.renderTarget1.setSize(width, height);\n    this.renderTarget2.setSize(width, height);\n\n    if (this.hd) {\n      this.renderTargetHD.setSize(hdWidth, hdHeight);\n    }\n\n    for (var i = 0; i < this.passes.length; i++) {\n      this.passes[i].setSize(this.hd && this.passes[i].hd ? hdWidth : width, this.hd && this.passes[i].hd ? hdHeight : height);\n    }\n  }\n});\n\nvar Pass$1 = function () {\n  // if set to true, the pass is processed by the composer\n  this.enabled = true; // if set to true, the pass indicates to swap read and write buffer after rendering\n\n  this.needsSwap = true; // if set to true, the pass clears its buffer before rendering\n\n  this.clear = false; // if set to true, the result of the pass is rendered to screen. This is set automatically by EffectComposer.\n\n  this.renderToScreen = false;\n};\n\nObject.assign(Pass$1.prototype, {\n  setSize: function ()\n  /* width, height */\n  {},\n  render: function ()\n  /* renderer, writeBuffer, readBuffer, deltaTime, maskActive */\n  {\n    console.error('THREE.Pass: .render() must be implemented in derived pass.');\n  }\n}); // Helper for passes that need to fill the viewport with a single quad.\n\nPass$1.FullScreenQuad = function () {\n  var camera = new OrthographicCamera(-1, 1, 1, -1, 0, 1);\n  var geometry = new PlaneBufferGeometry(2, 2);\n\n  var FullScreenQuad = function (material) {\n    this._mesh = new Mesh(geometry, material);\n  };\n\n  Object.defineProperty(FullScreenQuad.prototype, 'material', {\n    get: function () {\n      return this._mesh.material;\n    },\n    set: function (value) {\n      this._mesh.material = value;\n    }\n  });\n  Object.assign(FullScreenQuad.prototype, {\n    dispose: function () {\n      this._mesh.geometry.dispose();\n    },\n    render: function (renderer) {\n      renderer.render(this._mesh, camera);\n    }\n  });\n  return FullScreenQuad;\n}();\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\n\nvar RenderPass = function (scene, camera, overrideMaterial, clearColor, clearAlpha) {\n  Pass.call(this);\n  this.scene = scene;\n  this.camera = camera;\n  this.overrideMaterial = overrideMaterial;\n  this.clearColor = clearColor;\n  this.clearAlpha = clearAlpha !== undefined ? clearAlpha : 0;\n  this.clear = true;\n  this.clearDepth = false;\n  this.needsSwap = false;\n};\n\nRenderPass.prototype = Object.assign(Object.create(Pass.prototype), {\n  constructor: RenderPass,\n  render: function (renderer, writeBuffer, readBuffer\n  /*, deltaTime, maskActive */\n  ) {\n    var oldAutoClear = renderer.autoClear;\n    renderer.autoClear = false;\n    var oldAutoClearColor, oldAutoClearDepth, oldClearColor, oldClearAlpha, oldOverrideMaterial;\n\n    if (this.overrideMaterial !== undefined) {\n      oldOverrideMaterial = this.scene.overrideMaterial;\n      this.scene.overrideMaterial = this.overrideMaterial;\n    }\n\n    if (this.clearColor) {\n      oldClearColor = renderer.getClearColor().getHex();\n      oldClearAlpha = renderer.getClearAlpha();\n      renderer.setClearColor(this.clearColor, this.clearAlpha);\n    }\n\n    if (this.autoClearColor === false) {\n      oldAutoClearColor = renderer.autoClearColor;\n      renderer.autoClearColor = false;\n    }\n\n    if (this.autoClearDepth === false) {\n      oldAutoClearDepth = renderer.autoClearDepth;\n      renderer.autoClearDepth = false;\n    }\n\n    if (this.clearDepth) {\n      renderer.clearDepth();\n    }\n\n    renderer.setRenderTarget(this.renderToScreen ? null : readBuffer); // TODO: Avoid using autoClear properties, see https://github.com/mrdoob/three.js/pull/15571#issuecomment-465669600\n\n    if (this.clear) renderer.clear(renderer.autoClearColor, renderer.autoClearDepth, renderer.autoClearStencil);\n    renderer.render(this.scene, this.camera);\n\n    if (this.clearColor) {\n      renderer.setClearColor(oldClearColor, oldClearAlpha);\n    }\n\n    if (this.autoClearColor === false) {\n      renderer.autoClearColor = oldAutoClearColor;\n    }\n\n    if (this.autoClearDepth === false) {\n      renderer.autoClearDepth = oldAutoClearDepth;\n    }\n\n    if (this.overrideMaterial !== undefined) {\n      this.scene.overrideMaterial = oldOverrideMaterial;\n    }\n\n    renderer.autoClear = oldAutoClear;\n  }\n});\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nvar SavePass = function (renderTarget) {\n  Pass.call(this);\n  if (CopyShader === undefined) console.error(\"SavePass relies on CopyShader\");\n  var shader = CopyShader;\n  this.textureID = \"tDiffuse\";\n  this.uniforms = UniformsUtils.clone(shader.uniforms);\n  this.material = new ShaderMaterial({\n    uniforms: this.uniforms,\n    vertexShader: shader.vertexShader,\n    fragmentShader: shader.fragmentShader\n  });\n  this.renderTarget = renderTarget;\n\n  if (this.renderTarget === undefined) {\n    this.renderTarget = new WebGLRenderTarget(window.innerWidth, window.innerHeight, {\n      minFilter: LinearFilter,\n      magFilter: LinearFilter,\n      format: RGBFormat,\n      stencilBuffer: false\n    });\n    this.renderTarget.texture.name = \"SavePass.rt\";\n  }\n\n  this.needsSwap = false;\n  this.fsQuad = new Pass.FullScreenQuad(this.material);\n};\n\nSavePass.prototype = Object.assign(Object.create(Pass.prototype), {\n  constructor: SavePass,\n  render: function (renderer, writeBuffer, readBuffer) {\n    if (this.uniforms[this.textureID]) {\n      this.uniforms[this.textureID].value = readBuffer.texture;\n    }\n\n    renderer.setRenderTarget(this.renderTarget);\n    if (this.clear) renderer.clear();\n    this.fsQuad.render(renderer);\n  }\n});\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nconst ShaderPass$1 = function (shader, textureID) {\n  Pass.call(this);\n  this.textureID = textureID !== undefined ? textureID : \"tDiffuse\";\n\n  if (shader instanceof ShaderMaterial || shader instanceof RawShaderMaterial) {\n    this.uniforms = shader.uniforms;\n    this.material = shader;\n  } else if (shader) {\n    this.uniforms = UniformsUtils.clone(shader.uniforms);\n    this.material = new RawShaderMaterial({\n      defines: Object.assign({}, shader.defines),\n      uniforms: this.uniforms,\n      vertexShader: shader.vertexShader,\n      fragmentShader: shader.fragmentShader\n    });\n  }\n\n  this.fsQuad = new Pass.FullScreenQuad(this.material);\n};\n\nShaderPass$1.prototype = Object.assign(Object.create(Pass.prototype), {\n  constructor: ShaderPass$1,\n  render: function (renderer, writeBuffer, readBuffer\n  /*, deltaTime, maskActive */\n  ) {\n    if (this.uniforms[this.textureID]) {\n      this.uniforms[this.textureID].value = readBuffer.texture;\n    }\n\n    this.fsQuad.material = this.material;\n\n    if (this.renderToScreen) {\n      renderer.setRenderTarget(null);\n      this.fsQuad.render(renderer);\n    } else {\n      renderer.setRenderTarget(writeBuffer); // TODO: Avoid using autoClear properties, see https://github.com/mrdoob/three.js/pull/15571#issuecomment-465669600\n\n      if (this.clear) renderer.clear(renderer.autoClearColor, renderer.autoClearDepth, renderer.autoClearStencil);\n      this.fsQuad.render(renderer);\n    }\n  },\n  compile: function (renderer) {\n    var tmpScene = new Scene();\n    var obj = new Object3D();\n    obj.material = this.material;\n    tmpScene.add(obj);\n    renderer.compile(tmpScene, this.fsQuad._camera);\n    tmpScene.children = [];\n  }\n});\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nvar scene = new THREE.Scene();\nscene.hd = new THREE.Scene();\nscene.tilepickerScene = new THREE.Scene();\nscene.pickerScene = new THREE.Scene();\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nvar postprocessUniforms = {\n  tDiffuse: {\n    type: 't',\n    value: null\n  },\n  uResolution: {\n    type: 'v2',\n    value: new THREE.Vector2(1.0, 1.0)\n  }\n};\nvar postProcessFragment = new Shader(`precision highp float;uniform sampler2D tDiffuse;uniform vec2 uResolution;varying vec2 vUv;\n#define FXAA_REDUCE_MIN   0.0078125 // (1.0/128.0)\n\n#define FXAA_REDUCE_MUL   0.03125   // (1.0/32.0)\n\n#define FXAA_SPAN_MAX     8.0\nconst vec3 a=vec3(0.299,0.587,0.114);const vec2 b=vec2(FXAA_SPAN_MAX);void main(){vec4 c=vec4(vUv+uResolution,vUv-uResolution);vec3 d=texture2D(tDiffuse,c.zw).rgb;vec3 e=texture2D(tDiffuse,c.xw).rgb;vec3 f=texture2D(tDiffuse,c.zy).rgb;vec3 g=texture2D(tDiffuse,c.xy).rgb;vec4 h=vec4(dot(d,a),dot(e,a),dot(f,a),dot(g,a));vec4 i=h.xzxy+h.ywzw;vec2 j=i.yz-i.xw;float k=FXAA_REDUCE_MUL*max(i.x+i.y,FXAA_REDUCE_MIN/FXAA_REDUCE_MUL);float l=min(abs(j.x),abs(j.y))+k;j=uResolution*clamp(j/l,-b,b);vec4 m=(texture2D(tDiffuse,vUv-j*0.16666666666667)+texture2D(tDiffuse,vUv+j*0.16666666666667));vec4 n=texture2D(tDiffuse,vUv);gl_FragColor=0.33333333333*(m+n);float o=distance(vUv,vec2(0.5));gl_FragColor.rgb*=1.0-0.17*smoothstep(0.42,0.65,o);}`);\nvar quadVertex = new Shader(`attribute vec3 position;attribute vec2 uv;varying vec2 vUv;void main(){vUv=uv;gl_Position=vec4(position,1.0);}`);\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nvar state$1 = ContainerStore$1.getState();\nvar parameters = {\n  type: webgl.render565 ? THREE.UnsignedShort565Type : THREE.UnsignedByteType,\n  minFilter: THREE.LinearFilter,\n  magFilter: THREE.LinearFilter,\n  format: THREE.RGBFormat,\n  stencilBuffer: false\n};\nvar resolution = new THREE.Vector2(1.0 / state$1.canvasWidth, 1.0 / state$1.canvasHeight);\npostprocessUniforms.uResolution.value.copy(resolution);\nvar renderTarget = new THREE.WebGLRenderTarget(state$1.renderWidth, state$1.renderHeight, parameters);\nContainerStore$1.listen(function (state) {\n  composer.setSize(state.renderWidth, state.renderHeight, state.canvasWidth, state.canvasHeight);\n  var resolution = new THREE.Vector2(1.0 / state.canvasWidth, 1.0 / state.canvasHeight);\n  postprocessUniforms.uResolution.value.copy(resolution);\n});\nvar enableHDPass = webgl.depthTexture;\nvar composer = new EffectComposer(renderer, renderTarget, enableHDPass); // Render actual scene\n\nvar renderPass = new RenderPass(scene, camera);\ncomposer.addPass(renderPass);\n\nif (enableHDPass) {\n  // Copy rendered scene to hd render target\n  var savePass = new SavePass(composer.renderTargetHD);\n  savePass.src = composer.renderTarget2;\n  composer.addPass(savePass);\n} // The HD pass is drawn after everything else,\n// optionally in a higher resolution (this is dependent\n// on an extension). As we are drawing on top of the\n// standard scene, we want to maintain color and depth,\n// so we disable autoClear.\n// In the case of a HD pass,  we are using a different\n// buffer, so we do want to clear the depth, otherwise\n// we'll keep the depth values from last time\n\n\nvar hdrenderPass = new RenderPass(scene.hd, camera);\nhdrenderPass.autoClearColor = false;\nhdrenderPass.autoClearDepth = enableHDPass;\nhdrenderPass.hd = enableHDPass;\ncomposer.addPass(hdrenderPass); // Add postprocessing\n\nvar postprocessShader = {\n  name: 'postprocess',\n  uniforms: postprocessUniforms,\n  vertexShader: quadVertex.value,\n  fragmentShader: postProcessFragment.value\n};\nvar postprocessPass = new ShaderPass$1(postprocessShader);\npostprocessPass.uniforms = postprocessUniforms;\npostprocessPass.material.uniforms = postprocessUniforms;\npostprocessPass.hd = enableHDPass; // Disable ping-ponging. Means we create one less render target\n// saving on GPU memory (3MB or so)\n\npostprocessPass.needsSwap = false;\ncomposer.addPass(postprocessPass); //defer( function () { postprocessPass.compile( renderer ); } );\n// Tie rendering to render notifications\n\nvar tick = composer.render.bind(composer); // Ensure that other actions get called before\n// we render (otherwise LOD etc may not update)\n\nenqueue(function () {\n  RenderStore$1.listen(tick);\n});\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nvar depthUniforms = {};\n\nif (webgl.depthTexture) {\n  depthUniforms.uDepth = {\n    type: 't',\n    value: composer.renderTarget2.depthTexture\n  };\n}\n\ndepthUniforms.uReadDepthOverride = {\n  type: 'f',\n  value: 1.0\n};\nCameraStore$1.listen(function (state) {\n  depthUniforms.uReadDepthOverride.value = state.controls.lock2D ? 0.0 : 1.0;\n});\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nvar EE = 1000.0;\nvar cutoffAngle = 1.61107315568707; //pi/1.95;\n\nvar invSteepness = 0.66666666666667;\nvar rayleigh = new THREE.Vector3(5.804542996261093e-06, 1.3562911419845635e-05, 3.026590246882488e-05);\nvar mie = new THREE.Vector3(7.633915830775757e-05, 7.544890573273999e-05, 7.411352687021361e-05);\nvar skyUniforms = {\n  luminance: {\n    type: 'f',\n    value: 1\n  },\n  turbidity: {\n    type: 'f',\n    value: 2\n  },\n  reileigh: {\n    type: 'f',\n    value: 1\n  },\n  mieCoefficient: {\n    type: 'f',\n    value: 0.005\n  },\n  mieDirectionalG: {\n    type: 'f',\n    value: 0.8\n  },\n  sunPosition: {\n    type: 'v3',\n    value: new THREE.Vector3(0, 0, 0)\n  },\n  // Derived uniforms\n  sunDirection: {\n    type: 'v3',\n    value: new THREE.Vector3(0, 0, 0)\n  },\n  lightDirection: {\n    type: 'v3',\n    value: new THREE.Vector3(0, 0, 0)\n  },\n  betaRM: {\n    type: 'v3',\n    value: new THREE.Vector3(0, 0, 0)\n  },\n  betaRnorm: {\n    type: 'v3',\n    value: new THREE.Vector3(0, 0, 0)\n  },\n  betaMnorm: {\n    type: 'v3',\n    value: new THREE.Vector3(0, 0, 0)\n  },\n  // To avoid using many uniforms, pass constants in block\n  // sunE, hgPhaseA, hgPhaseB & LinWeight\n  constants: {\n    type: 'v4',\n    value: new THREE.Vector4(0, 0, 0, 0)\n  },\n  gamma: {\n    type: 'f',\n    value: 0\n  },\n  tonemapScale: {\n    type: 'f',\n    value: 0\n  },\n  // Calculate derived uniforms\n  update: function () {\n    // Sun direction (using different coordinate system, so convert)\n    // TODO unify on single coordinate system\n    var sunPosition = skyUniforms.sunPosition.value;\n    var sunDirection = sunPosition.clone().normalize();\n    var tmp = sunDirection.z;\n    sunDirection.z = sunDirection.y;\n    sunDirection.y = tmp;\n    skyUniforms.sunDirection.value.copy(sunDirection); // Normal coordinate system for other shaders\n\n    var lightDirection = sunPosition.clone().normalize();\n    skyUniforms.lightDirection.value.copy(lightDirection); // Hg phase constants (refactored to minimize shader computation)\n\n    var g = skyUniforms.mieDirectionalG.value;\n    var B = Math.pow(0.07957747154595 * (1 - g * g), -0.666666666);\n    var hgPhaseA = -2 * B * g;\n    var hgPhaseB = B * (g * g + 1);\n    skyUniforms.constants.value.y = hgPhaseA;\n    skyUniforms.constants.value.z = hgPhaseB; // Save on calulation power of sun direction\n\n    var LinWeight = Math.pow(1.0 - sunDirection.y, 5.0);\n    LinWeight = THREE.Math.clamp(LinWeight, 0.0, 1.0);\n    skyUniforms.constants.value.w = LinWeight; // Extinction\n\n    var sunFade = 1.0 - THREE.Math.clamp(1.0 - Math.exp(sunPosition.z / 450000.0), 0.0, 1.0);\n    var reileighCoefficient = skyUniforms.reileigh.value + sunFade - 1.0;\n    var exponent = (Math.acos(sunDirection.y) - cutoffAngle) * invSteepness;\n    var sunE = EE * Math.max(0.0, 1.0 - Math.exp(exponent));\n    skyUniforms.constants.value.x = 19000 * sunE;\n    var turbidity = skyUniforms.turbidity.value;\n    var mieCoefficient = skyUniforms.mieCoefficient.value;\n    var betaR = rayleigh.clone().multiplyScalar(reileighCoefficient);\n    var betaM = mie.clone().multiplyScalar(turbidity * mieCoefficient); // betaMnorm & betaRnorm don't really mean anything, just save of shader work\n\n    var A = new THREE.Vector3(sunE / (betaR.x + betaM.x), sunE / (betaR.y + betaM.y), sunE / (betaR.z + betaM.z));\n    var betaRnorm = betaR.clone().multiply(A).multiplyScalar(0.01492077591487);\n    var betaMnorm = betaM.clone().multiply(A); // Fold in zeniths\n\n    betaR.multiplyScalar(8400);\n    betaM.multiplyScalar(1250);\n    skyUniforms.betaRM.value.copy(betaR.add(betaM));\n    skyUniforms.betaRnorm.value.copy(betaRnorm);\n    skyUniforms.betaMnorm.value.copy(betaMnorm);\n    var gamma = 1.0 / (1.2 + 1.2 * sunFade);\n    skyUniforms.gamma.value = gamma;\n    var luminance = skyUniforms.luminance.value; // Magic 1.7 value to match tonemap of sky to scene\n\n    var tonemapScale = 1.7 * Math.log(2.0 / Math.pow(luminance, 4)) / Math.LN2;\n    skyUniforms.tonemapScale.value = tonemapScale;\n  }\n};\nskyUniforms.update();\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nvar A = 0.15;\nvar B = 0.50;\nvar C = 0.10;\nvar D = 0.20;\nvar E = 0.02;\nvar F = 0.30;\n\nvar RawTonemap = function (x) {\n  return (x * (A * x + C * B) + D * E) / (x * (A * x + B) + D * F) - E / F;\n};\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\n\nvar tonemapUniforms = {\n  exposureBias: {\n    type: 'f',\n    value: 1\n  },\n  whitePoint: {\n    type: 'f',\n    value: 11.2\n  },\n  // Calculate the white scale from the white point\n  uTonemapExposureBias: {\n    type: 'f',\n    value: 1\n  },\n  uTonemapWhiteScale: {\n    type: 'f',\n    value: 1\n  },\n  update: function () {\n    tonemapUniforms.uTonemapExposureBias.value = tonemapUniforms.exposureBias.value;\n    tonemapUniforms.uTonemapWhiteScale.value = 1.0 / RawTonemap(tonemapUniforms.whitePoint.value);\n  }\n};\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// Duplicate calculate to sky shader\n\nvar skyColor = function (direction) {\n  var cosZenithAngle = Math.max(0.0, direction.y); // Approximate acos( x ) by pi/2 - x\n  // This allows us to simplify and error is only large when looking up\n\n  var denom = cosZenithAngle + Math.pow(17.6579343808112 + cosZenithAngle * 260.41830500372932, -1.253); // combined extinction factor\n\n  var betaRM = skyUniforms.betaRM.value.clone();\n  var Fex = betaRM.multiplyScalar(-1 / denom);\n  Fex.x = Math.exp(Fex.x);\n  Fex.y = Math.exp(Fex.y);\n  Fex.z = Math.exp(Fex.z); // in scattering\n\n  var sunDirection = skyUniforms.sunDirection.value.clone();\n  var constants = skyUniforms.constants.value.clone();\n  var cosTheta = direction.dot(sunDirection);\n  var rPhase = cosTheta + 1.0;\n  var betaRTheta = skyUniforms.betaRnorm.value.clone();\n  var betaMTheta = skyUniforms.betaMnorm.value.clone();\n  betaRTheta.multiplyScalar(4.0 + rPhase * rPhase);\n  betaMTheta.multiplyScalar(Math.pow(constants.y * cosTheta + constants.z, -1.5));\n  var tmp = betaRTheta.clone().add(betaMTheta);\n  var Lin = new THREE.Vector3(Math.pow(tmp.x * (1.0 - Fex.x), 1.5), Math.pow(tmp.y * (1.0 - Fex.y), 1.5), Math.pow(tmp.z * (1.0 - Fex.z), 1.5)); //vec3 Lin = spow( tmp * ( 1.0 - Fex ), vec3( 1.5 ) );\n\n  Lin.x *= 1 - constants.w + constants.w * Math.sqrt(tmp.x * Fex.x);\n  Lin.y *= 1 - constants.w + constants.w * Math.sqrt(tmp.y * Fex.y);\n  Lin.z *= 1 - constants.w + constants.w * Math.sqrt(tmp.z * Fex.z); //Lin *= mix( vec3( 1.0 ), ssqrt( tmp * Fex ), constants.w );\n  // nightsky\n\n  var L0 = Fex.clone().multiplyScalar(0.1); //#ifdef SUN_DISK\n  //L0 += constants.x * Fex * smoothstep( 0.9999566769, 0.9999766769, cosTheta );\n  //#endif\n  // Combine all components\n\n  var color = Lin.clone().add(L0).multiplyScalar(0.04).add(new THREE.Vector3(0.0, 0.0003, 0.00075)); //0.04 * ( Lin + L0 ) + vec3( 0.0, 0.0003, 0.00075 );\n\n  var tonemapScale = skyUniforms.tonemapScale.value;\n  color.multiplyScalar(tonemapScale); // Precomputed whitescale with W = 1000\n  //color = 1.07487246756328 * Tonemap( tonemapScale * color );\n\n  var gamma = skyUniforms.gamma.value;\n  var bias = tonemapUniforms.uTonemapExposureBias.value;\n  var whiteScale = tonemapUniforms.uTonemapWhiteScale.value;\n  color.x = Math.pow(bias * RawTonemap(whiteScale * color.x), gamma);\n  color.y = Math.pow(bias * RawTonemap(whiteScale * color.y), gamma);\n  color.z = Math.pow(bias * RawTonemap(whiteScale * color.z), gamma);\n  return new THREE.Color(color.x, color.y, color.z);\n};\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\n\nvar direction = new THREE.Vector3();\nvar lastDirection = new THREE.Vector3();\nvar forceUpdate = false; // Uniforms required where drawing basic fog\n\nvar fogUniforms = {\n  uFogDropoff: {\n    type: 'f',\n    value: 0.0006\n  },\n  uFogIntensity: {\n    type: 'f',\n    value: 0.1\n  },\n  uFogColor: {\n    type: 'c',\n    value: new THREE.Color()\n  },\n  update: function (state) {\n    forceUpdate = !state;\n    state = state || CameraStore$1.getState(); // Sky uses different coordinate system\n\n    direction.copy(state.target).sub(state.position);\n    direction.z = direction.y; // Flatten y component to look at horizon\n\n    direction.y = 0.0;\n    direction.normalize();\n\n    if (forceUpdate || direction.distanceToSquared(lastDirection) > 0.01) {\n      fogUniforms.uFogColor.value.copy(skyColor(direction));\n      lastDirection.copy(direction);\n    }\n  }\n};\nCameraStore$1.listen(fogUniforms.update);\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nconst ImageryDatasource = new BaseDatasource({\n  textureSize: IMAGERY_TILE_SIZE,\n  poolSize: IMAGERY_POOL_SIZE\n});\nAppStore$1.listen(({\n  datasource\n}) => {\n  if (datasource.imagery) {\n    for (let key of ['apiKey', 'urlFormat']) {\n      ImageryDatasource[key] = datasource.imagery[key];\n    }\n  }\n});\nvar lineVertex = new Shader(`precision highp float;uniform mat4 viewMatrix;uniform mat4 projectionMatrix;uniform vec3 cameraPosition;attribute vec3 tag;attribute vec4 tangent;attribute vec3 position;attribute vec4 color;uniform float uThickness;uniform vec3 uSelectedTag;varying vec4 vColor;varying float vAlpha;uniform vec2 uViewportInverse;vec4 a(const in vec3 b,const in float c){vec4 d=vec4(b,1.0);vec4 e=projectionMatrix*viewMatrix*d;d.xyz+=tangent.xyz;vec4 f=projectionMatrix*viewMatrix*d;vec2 g=f.xy/f.w-e.xy/e.w;vec2 h=g.yx*vec2(1.0,-1.0);h=c*e.w*normalize(h)*uViewportInverse;e.xy+=h;return e;}\n#define VIRTUAL_TEXTURE_ARRAY_BLOCKS 4.0\n\n#define VIRTUAL_TEXTURE_ARRAY_SIZE 512.0\n\n#define TEX_SIZE (VIRTUAL_TEXTURE_ARRAY_SIZE * VIRTUAL_TEXTURE_ARRAY_BLOCKS)\nconst vec2 i=vec2(1.0/TEX_SIZE,0.0);vec4 j(const in sampler2D k,in vec2 l){l-=0.5*i.xx;vec2 m=fract(l*TEX_SIZE);vec2 n=l-i.xx*m+0.5*i.xx;\n#ifdef HEIGHT_LOOKUP_BIAS\nvec4 o=texture2D(k,n,-10.0);vec4 p=texture2D(k,n+i,-10.0);vec4 q=texture2D(k,n+i.yx,-10.0);vec4 r=texture2D(k,n+i.xx,-10.0);\n#else\nvec4 o=texture2D(k,n);vec4 p=texture2D(k,n+i);vec4 q=texture2D(k,n+i.yx);vec4 r=texture2D(k,n+i.xx);\n#endif\nvec4 s=mix(o,p,m.x);vec4 t=mix(q,r,m.x);return mix(s,t,m.y);}vec4 u(in sampler2D v,in vec2 l,in float w){vec2 x=vec2(mod(float(w),VIRTUAL_TEXTURE_ARRAY_BLOCKS),floor(float(w)/VIRTUAL_TEXTURE_ARRAY_BLOCKS));const float y=0.5;vec2 z=vec2(y,VIRTUAL_TEXTURE_ARRAY_SIZE-y)/VIRTUAL_TEXTURE_ARRAY_SIZE;vec2 A=(clamp(l,z.x,z.y)+x)/VIRTUAL_TEXTURE_ARRAY_BLOCKS;\n#ifdef MANUAL_TEXTURE_BILINEAR\nreturn j(v,A);\n#else\nreturn texture2D(v,A);\n#endif\n}uniform lowp sampler2D indirectionTexture;uniform vec2 uGlobalOffset;uniform float uSceneScale;const float B=0.0008176665341588574;float C(in float D){float E=3.141592653589793-0.006135923151542565*D;float F=dot(vec2(0.5),exp(vec2(E,-E)));return F/(B*uSceneScale);}uniform lowp sampler2D elevationArray;float G(in vec2 d){const float H=32.0;const float I=1024.0;vec2 J=d.xy-uGlobalOffset;J/=(uSceneScale*H);J*=vec2(1.0,-1.0);vec2 K=J/I;const vec2 L=vec2(0.5);vec2 M=(floor(J-L)+L);M+=step(L,J-M);vec2 N=M/I;vec4 O=texture2D(indirectionTexture,N);float w=O.r;float P=O.g;vec2 Q=O.ba;vec2 A=K*P+Q;return C(J.y)*u(elevationArray,A,w).a;}void main(){vec3 b=position;b.z+=G(b.xy);gl_Position=a(b,uThickness);vColor=color;float R=step(distance(tag,uSelectedTag),0.0);gl_Position.z-=0.5+0.01*R;vColor.rgb=mix(vColor.rgb,vec3(1.0),0.8*R);vAlpha=sign(tangent.w);}`);\nvar lineFragment = new Shader(`precision highp float;uniform float uCutoff;uniform vec4 uOutlineColor;varying vec4 vColor;varying float vAlpha;void main(){vec2 a=smoothstep(vec2(0.4,1.0)*uCutoff,vec2(0.5,1.0),abs(vec2(vAlpha)));a.x*=uOutlineColor.a;gl_FragColor=mix(vColor,vec4(uOutlineColor.rgb,0.0),a.xxxy);}`);\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nconst lineUniforms = {\n  uViewportInverse: {\n    type: 'v2',\n    value: new THREE.Vector2(1.0, 1.0)\n  }\n};\nContainerStore$1.listen(({\n  height,\n  width\n}) => {\n  lineUniforms.uViewportInverse.value.set(1.0 / width, 1.0 / height);\n});\nvar markerVertex = new Shader(`precision highp float;uniform mat4 viewMatrix;uniform mat4 projectionMatrix;uniform mat4 uOrthoTransform;uniform vec3 cameraPosition;uniform float uLodScale;uniform vec3 uSelectedTag;uniform float uPixelRatio;uniform vec2 uViewportCanvasInverse;uniform float uReadDepthOverride;\n#ifdef READ_DEPTH\nuniform sampler2D uDepth;\n#endif\nattribute vec2 position;attribute vec4 anchor;attribute vec4 atlas;attribute vec4 background;attribute vec4 clipping;attribute vec4 color;attribute vec3 layout;attribute vec4 normal;attribute vec4 offset;attribute vec4 tag;varying vec4 vUv;varying vec4 vBox;varying vec4 vBackground;varying vec4 vColor;varying float vReadDepth;varying vec3 vLayout;float a(inout vec3 b){float c=dot(b,b);float d=inversesqrt(c);b=d*b;return c*d;}\n#define VIRTUAL_TEXTURE_ARRAY_BLOCKS 4.0\n\n#define VIRTUAL_TEXTURE_ARRAY_SIZE 512.0\n\n#define TEX_SIZE (VIRTUAL_TEXTURE_ARRAY_SIZE * VIRTUAL_TEXTURE_ARRAY_BLOCKS)\nconst vec2 e=vec2(1.0/TEX_SIZE,0.0);vec4 f(const in sampler2D g,in vec2 h){h-=0.5*e.xx;vec2 i=fract(h*TEX_SIZE);vec2 j=h-e.xx*i+0.5*e.xx;\n#ifdef HEIGHT_LOOKUP_BIAS\nvec4 k=texture2D(g,j,-10.0);vec4 l=texture2D(g,j+e,-10.0);vec4 m=texture2D(g,j+e.yx,-10.0);vec4 n=texture2D(g,j+e.xx,-10.0);\n#else\nvec4 k=texture2D(g,j);vec4 l=texture2D(g,j+e);vec4 m=texture2D(g,j+e.yx);vec4 n=texture2D(g,j+e.xx);\n#endif\nvec4 o=mix(k,l,i.x);vec4 p=mix(m,n,i.x);return mix(o,p,i.y);}vec4 q(in sampler2D r,in vec2 h,in float s){vec2 t=vec2(mod(float(s),VIRTUAL_TEXTURE_ARRAY_BLOCKS),floor(float(s)/VIRTUAL_TEXTURE_ARRAY_BLOCKS));const float u=0.5;vec2 v=vec2(u,VIRTUAL_TEXTURE_ARRAY_SIZE-u)/VIRTUAL_TEXTURE_ARRAY_SIZE;vec2 w=(clamp(h,v.x,v.y)+t)/VIRTUAL_TEXTURE_ARRAY_BLOCKS;\n#ifdef MANUAL_TEXTURE_BILINEAR\nreturn f(r,w);\n#else\nreturn texture2D(r,w);\n#endif\n}uniform lowp sampler2D indirectionTexture;uniform vec2 uGlobalOffset;uniform float uSceneScale;const float x=0.0008176665341588574;float y(in float z){float A=3.141592653589793-0.006135923151542565*z;float B=dot(vec2(0.5),exp(vec2(A,-A)));return B/(x*uSceneScale);}uniform lowp sampler2D elevationArray;float C(in vec2 D){const float E=32.0;const float F=1024.0;vec2 G=D.xy-uGlobalOffset;G/=(uSceneScale*E);G*=vec2(1.0,-1.0);vec2 H=G/F;const vec2 I=vec2(0.5);vec2 J=(floor(G-I)+I);J+=step(I,G-J);vec2 K=J/F;vec4 L=texture2D(indirectionTexture,K);float s=L.r;float M=L.g;vec2 N=L.ba;vec2 w=H*M+N;return y(G.y)*q(elevationArray,w,s).a;}\n#define SIZE vec2( 512.0, 1024.0 )\nvoid main(){vec3 O=offset.xyz;O.z=C(O.xy);vBackground=background;vColor=color;vLayout=uPixelRatio*layout;vReadDepth=clipping.y*uReadDepthOverride;vec3 P=cameraPosition-O;float Q=a(P);vec2 R=vec2(1.0,-1.0)*position;vec2 S=0.5*R+vec2(0.5);vUv.z=step(distance(tag.xyz,uSelectedTag),0.0);vec2 T=vec2(normal.w,offset.w)+1000000.0*vUv.zz;T=smoothstep(T,vec2(0.95,0.9)*T,vec2(Q));vUv.w=(0.6*T.x+0.4)*T.y;vUv.z*=tag.w;vec2 U=mix(atlas.ww*vec2(SIZE.y/SIZE.x,1.0),atlas.zw,T.x);vUv.xy=atlas.xy+U*S;vUv.w*=smoothstep(0.0,0.15,clipping.y+dot(P,normal.xyz));vUv.w*=step(0.3,vUv.w);vec2 u=layout.xx+layout.yy;vUv.xy+=(u*R)/SIZE;vec2 V=SIZE*U+2.0*u;V*=uPixelRatio;float W=min(0.5*Q,100.0+200.0*clipping.x);vec4 D=vec4(O+W*P,1.0);gl_Position=projectionMatrix*viewMatrix*D;vec2 X=2.0*gl_Position.w*uViewportCanvasInverse;\n#ifdef READ_DEPTH\nvec3 Y=0.5*gl_Position.xyz/gl_Position.w+vec3(0.5);float Z=texture2D(uDepth,Y.xy).x;float ba=projectionMatrix[3][2];Z/=1.0+0.02*Z/ba;vUv.w*=step(clipping.x*Y.z,Z);\n#endif\ngl_Position.xy=X*floor(gl_Position.xy/X+vec2(0.5));vec2 bb=0.5*X*V;gl_Position.xy+=X*(0.5*anchor.xy*V+anchor.zw);gl_Position.xy-=bb;const vec2 bc=vec2(0.5);vBox.xy=(gl_Position.xy+bb-bc)/X+vec2(0.5)/uViewportCanvasInverse;vBox.zw=V;vec2 bd=(position+vec2(1.0))*bb;bd-=bc;gl_Position.xy+=step(0.0001,vUv.w)*bd;vLayout.z=min(vLayout.z,0.5*vBox.w-vLayout.y);vLayout.z=max(0.0001,vLayout.z);}`);\nvar markerFragment = new Shader(`precision highp float;\n#ifdef READ_DEPTH\nuniform sampler2D uDepth;uniform vec2 uViewportCanvasInverse;\n#endif\nuniform sampler2D uMap;varying vec4 vUv;varying vec4 vBox;varying vec4 vBackground;varying vec4 vColor;varying float vReadDepth;varying vec3 vLayout;\n#define SIZE 512.0\nvoid main(){\n#ifdef READ_DEPTH\nfloat a=texture2D(uDepth,uViewportCanvasInverse*gl_FragCoord.xy).x;float b=vUv.w*step(vReadDepth*gl_FragCoord.z,a);\n#else\nfloat b=vUv.w;\n#endif\ngl_FragColor=vBackground;vec2 c=0.5*vBox.zw-vec2(vLayout.x+vLayout.y);vec2 d=clamp(gl_FragCoord.xy,vBox.xy-c,vBox.xy+c);float e=step(distance(d,gl_FragCoord.xy),0.0);vec4 f=texture2D(uMap,vUv.xy);vec4 g=step(vec4(1.0,3.0,2.0,4.0),vec4(vUv.y));g*=step(vec4(vUv.y),vec4(2.0,4.0,3.0,5.0));float h=length(g);f=mix(f,vec4(vec3(1.0),dot(g,f)),h);f.a*=e;f*=vColor;gl_FragColor.rgb=mix(gl_FragColor.rgb,f.rgb,f.a);gl_FragColor.a=max(gl_FragColor.a,f.a);float i=vLayout.z;c=0.5*vBox.zw-vec2(i+vLayout.y);d=clamp(gl_FragCoord.xy,vBox.xy-c,vBox.xy+c);float j=distance(d,gl_FragCoord.xy);c=vec2(max(i-1.0,0.0),i);float k=smoothstep(c.x,c.y,j);k*=step(0.4999,vLayout.y);gl_FragColor=mix(gl_FragColor,vec4(1.0),k);c+=vLayout.yy;gl_FragColor.a*=smoothstep(c.y,c.x,j);gl_FragColor.rgb+=vUv.z;gl_FragColor.a*=b;if(gl_FragColor.a<0.0001){discard;}}`);\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nconst markerUniforms = {\n  uMap: {\n    type: 't',\n    value: null\n  },\n  uPixelRatio: {\n    type: 'f',\n    value: 1.0\n  },\n  uViewportCanvasInverse: {\n    type: 'v2',\n    value: new THREE.Vector2(1.0, 1.0)\n  }\n};\nContainerStore$1.listen(({\n  canvasHeight,\n  pixelRatio,\n  canvasWidth\n}) => {\n  markerUniforms.uViewportCanvasInverse.value.set(1.0 / canvasWidth, 1.0 / canvasHeight);\n  markerUniforms.uPixelRatio.value = pixelRatio;\n});\nvar skyVertex = new Shader(`uniform mat4 modelViewMatrix;uniform mat4 projectionMatrix;uniform vec3 cameraPosition;attribute vec3 position;varying vec3 vPosition;void main(){vPosition=position.xzy;vPosition.y=max(0.0,vPosition.y);vec3 a=position;a.xy+=cameraPosition.xy;gl_Position=projectionMatrix*modelViewMatrix*vec4(a,1.0);}`);\nvar skyFragment = new Shader(`precision highp float;varying vec3 vPosition;uniform vec3 sunDirection;uniform vec3 betaRM;uniform vec3 betaRnorm;uniform vec3 betaMnorm;uniform vec4 constants;uniform float gamma;uniform float tonemapScale;float a(const float b,const float c){return pow(abs(b),c);}vec3 a(const vec3 b,const vec3 c){return pow(abs(b),c);}vec3 d(const vec3 b){return sqrt(abs(b));}const float e=0.15;const float f=0.50;const float g=0.10;const float h=0.20;const float i=0.02;const float j=0.30;uniform float uTonemapExposureBias;uniform float uTonemapWhiteScale;vec3 k(vec3 b){return ((b*(e*b+g*f)+h*i)/(b*(e*b+f)+h*j))-i/j;}vec3 l(vec3 m){return uTonemapExposureBias*k(uTonemapWhiteScale*m);}vec3 n(vec3 o){float p=max(0.0,o.y);float q=p+a(17.6579343808112+p*260.41830500372932,-1.253);vec3 r=exp(-betaRM/q);float s=dot(o,sunDirection);float t=s+1.0;vec3 u=betaRnorm*(4.0+t*t);vec3 v=betaMnorm*a(constants.y*s+constants.z,-1.5);vec3 w=u+v;vec3 x=a(w*(1.0-r),vec3(1.5));x*=mix(vec3(1.0),d(w*r),constants.w);vec3 y=0.1*r;\n#ifdef SUN_DISK\ny+=constants.x*r*smoothstep(0.9999566769,0.9999766769,s);\n#endif\nvec3 m=0.04*(x+y)+vec3(0.0,0.0003,0.00075);m=l(tonemapScale*m);return a(m,vec3(gamma));}void main(){vec3 o=normalize(vPosition);vec3 m=n(o);gl_FragColor=vec4(m,1.0);}`);\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nfunction FeaturesStore() {\n  this.selected = null;\n  this.bindListeners({\n    animateAlongFeature: UserActions.animateAlongFeature,\n    onFeatureSelected: UserActions.featureSelected\n  });\n}\n\nFeaturesStore.prototype.animateAlongFeature = function () {\n  this.selected = null;\n};\n\nFeaturesStore.prototype.onFeatureSelected = function (feature) {\n  this.selected = feature;\n};\n\nFeaturesStore.displayName = 'FeaturesStore';\nvar FeaturesStore$1 = alt.createStore(FeaturesStore);\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// Tag is used to identify the hovered over feature\n\nconst tagUniforms = {\n  uSelectedTag: {\n    type: 'c',\n    value: new THREE.Color()\n  }\n};\nFeaturesStore$1.listen(({\n  selected\n}) => {\n  var id = selected && selected.tag ? selected.tag : 65536;\n  tagUniforms.selectedTag.value.set(id);\n});\nvar terrainVertex = new Shader(`precision highp float;uniform mat4 viewMatrix;uniform mat4 projectionMatrix;uniform vec3 cameraPosition;attribute vec4 position;uniform vec4 uOffset;uniform vec4 uImageryUvOffset;varying vec4 vUV;varying float D;\n#define VIRTUAL_TEXTURE_ARRAY_BLOCKS 4.0\n\n#define VIRTUAL_TEXTURE_ARRAY_SIZE 512.0\n\n#define TEX_SIZE (VIRTUAL_TEXTURE_ARRAY_SIZE * VIRTUAL_TEXTURE_ARRAY_BLOCKS)\nconst vec2 a=vec2(1.0/TEX_SIZE,0.0);vec4 b(const in sampler2D c,in vec2 d){d-=0.5*a.xx;vec2 e=fract(d*TEX_SIZE);vec2 f=d-a.xx*e+0.5*a.xx;\n#ifdef HEIGHT_LOOKUP_BIAS\nvec4 g=texture2D(c,f,-10.0);vec4 h=texture2D(c,f+a,-10.0);vec4 i=texture2D(c,f+a.yx,-10.0);vec4 j=texture2D(c,f+a.xx,-10.0);\n#else\nvec4 g=texture2D(c,f);vec4 h=texture2D(c,f+a);vec4 i=texture2D(c,f+a.yx);vec4 j=texture2D(c,f+a.xx);\n#endif\nvec4 k=mix(g,h,e.x);vec4 l=mix(i,j,e.x);return mix(k,l,e.y);}vec4 m(in sampler2D n,in vec2 d,in float o){vec2 p=vec2(mod(float(o),VIRTUAL_TEXTURE_ARRAY_BLOCKS),floor(float(o)/VIRTUAL_TEXTURE_ARRAY_BLOCKS));const float q=0.5;vec2 r=vec2(q,VIRTUAL_TEXTURE_ARRAY_SIZE-q)/VIRTUAL_TEXTURE_ARRAY_SIZE;vec2 s=(clamp(d,r.x,r.y)+p)/VIRTUAL_TEXTURE_ARRAY_BLOCKS;\n#ifdef MANUAL_TEXTURE_BILINEAR\nreturn b(n,s);\n#else\nreturn texture2D(n,s);\n#endif\n}uniform lowp sampler2D indirectionTexture;uniform vec2 uGlobalOffset;uniform float uSceneScale;const float t=0.0008176665341588574;float u(in float v){float w=3.141592653589793-0.006135923151542565*v;float x=dot(vec2(0.5),exp(vec2(w,-w)));return x/(t*uSceneScale);}uniform lowp sampler2D elevationArray;float y(in vec2 z){const float A=32.0;const float B=1024.0;vec2 C=z.xy-uGlobalOffset;C/=(uSceneScale*A);C*=vec2(1.0,-1.0);vec2 D=C/B;const vec2 E=vec2(0.5);vec2 F=(floor(C-E)+E);F+=step(E,C-F);vec2 G=F/B;vec4 H=texture2D(indirectionTexture,G);float o=H.r;float I=H.g;vec2 J=H.ba;vec2 s=D*I+J;return u(C.y)*m(elevationArray,s,o).a;}void main(){vec4 z=vec4(position.xy,0.0,1.0);z.xy*=uOffset.z;z.xy+=uOffset.xy;vec2 K=10.0*floor(position.zw/10.0);vec2 d=position.zw-K;z.z=y(z.xy);z.z-=0.01*uOffset.z*K.x;vUV.xy=uImageryUvOffset.z*d.xy+uImageryUvOffset.xy;vUV.zw=d.xy;D=distance(cameraPosition,z.xyz);gl_Position=projectionMatrix*viewMatrix*z;}`);\nvar terrainFragment = new Shader(`precision highp float;uniform vec4 uImageryUvOffset;varying vec4 vUV;varying float D;uniform lowp sampler2D imageryArray;uniform float uFogDropoff;uniform float uFogIntensity;uniform vec3 uFogColor;float a(in float b){float c=uFogIntensity*(1.0-exp(-b*uFogDropoff));return clamp(c,0.0,1.0);}float a(in vec3 d,in vec3 e){float b=distance(d,e);return a(b);}\n#define VIRTUAL_TEXTURE_ARRAY_BLOCKS 16.0\n\n#define VIRTUAL_TEXTURE_ARRAY_SIZE 256.0\n\n#define TEX_SIZE (VIRTUAL_TEXTURE_ARRAY_SIZE * VIRTUAL_TEXTURE_ARRAY_BLOCKS)\nconst vec2 f=vec2(1.0/TEX_SIZE,0.0);vec4 g(const in sampler2D h,in vec2 i){i-=0.5*f.xx;vec2 j=fract(i*TEX_SIZE);vec2 k=i-f.xx*j+0.5*f.xx;\n#ifdef HEIGHT_LOOKUP_BIAS\nvec4 l=texture2D(h,k,-10.0);vec4 m=texture2D(h,k+f,-10.0);vec4 n=texture2D(h,k+f.yx,-10.0);vec4 o=texture2D(h,k+f.xx,-10.0);\n#else\nvec4 l=texture2D(h,k);vec4 m=texture2D(h,k+f);vec4 n=texture2D(h,k+f.yx);vec4 o=texture2D(h,k+f.xx);\n#endif\nvec4 p=mix(l,m,j.x);vec4 q=mix(n,o,j.x);return mix(p,q,j.y);}vec4 r(in sampler2D s,in vec2 i,in float t){vec2 u=vec2(mod(float(t),VIRTUAL_TEXTURE_ARRAY_BLOCKS),floor(float(t)/VIRTUAL_TEXTURE_ARRAY_BLOCKS));const float v=0.5;vec2 w=vec2(v,VIRTUAL_TEXTURE_ARRAY_SIZE-v)/VIRTUAL_TEXTURE_ARRAY_SIZE;vec2 x=(clamp(i,w.x,w.y)+u)/VIRTUAL_TEXTURE_ARRAY_BLOCKS;\n#ifdef MANUAL_TEXTURE_BILINEAR\nreturn g(s,x);\n#else\nreturn texture2D(s,x);\n#endif\n}void main(){vec3 y=r(imageryArray,vUV.xy,uImageryUvOffset.w).rgb;float z=a(D);y=mix(y,uFogColor,z);gl_FragColor=vec4(y,1.0);}`);\nvar terrainPickerVertex = new Shader(`precision highp float;uniform mat4 viewMatrix;uniform mat4 projectionMatrix;attribute vec4 position;uniform vec4 uOffset;uniform vec4 uImageryUvOffset;uniform vec3 uScaling;varying vec4 vUV;\n#define MANUAL_TEXTURE_BILINEAR 1\n\n#define VIRTUAL_TEXTURE_ARRAY_BLOCKS 4.0\n\n#define VIRTUAL_TEXTURE_ARRAY_SIZE 512.0\n\n#define TEX_SIZE (VIRTUAL_TEXTURE_ARRAY_SIZE * VIRTUAL_TEXTURE_ARRAY_BLOCKS)\nconst vec2 a=vec2(1.0/TEX_SIZE,0.0);vec4 b(const in sampler2D c,in vec2 d){d-=0.5*a.xx;vec2 e=fract(d*TEX_SIZE);vec2 f=d-a.xx*e+0.5*a.xx;\n#ifdef HEIGHT_LOOKUP_BIAS\nvec4 g=texture2D(c,f,-10.0);vec4 h=texture2D(c,f+a,-10.0);vec4 i=texture2D(c,f+a.yx,-10.0);vec4 j=texture2D(c,f+a.xx,-10.0);\n#else\nvec4 g=texture2D(c,f);vec4 h=texture2D(c,f+a);vec4 i=texture2D(c,f+a.yx);vec4 j=texture2D(c,f+a.xx);\n#endif\nvec4 k=mix(g,h,e.x);vec4 l=mix(i,j,e.x);return mix(k,l,e.y);}vec4 m(in sampler2D n,in vec2 d,in float o){vec2 p=vec2(mod(float(o),VIRTUAL_TEXTURE_ARRAY_BLOCKS),floor(float(o)/VIRTUAL_TEXTURE_ARRAY_BLOCKS));const float q=0.5;vec2 r=vec2(q,VIRTUAL_TEXTURE_ARRAY_SIZE-q)/VIRTUAL_TEXTURE_ARRAY_SIZE;vec2 s=(clamp(d,r.x,r.y)+p)/VIRTUAL_TEXTURE_ARRAY_BLOCKS;\n#ifdef MANUAL_TEXTURE_BILINEAR\nreturn b(n,s);\n#else\nreturn texture2D(n,s);\n#endif\n}uniform lowp sampler2D indirectionTexture;uniform vec2 uGlobalOffset;uniform float uSceneScale;const float t=0.0008176665341588574;float u(in float v){float w=3.141592653589793-0.006135923151542565*v;float x=dot(vec2(0.5),exp(vec2(w,-w)));return x/(t*uSceneScale);}uniform lowp sampler2D elevationArray;float y(in vec2 z){const float A=32.0;const float B=1024.0;vec2 C=z.xy-uGlobalOffset;C/=(uSceneScale*A);C*=vec2(1.0,-1.0);vec2 D=C/B;const vec2 E=vec2(0.5);vec2 F=(floor(C-E)+E);F+=step(E,C-F);vec2 G=F/B;vec4 H=texture2D(indirectionTexture,G);float o=H.r;float I=H.g;vec2 J=H.ba;vec2 s=D*I+J;return u(C.y)*m(elevationArray,s,o).a;}void main(){vec4 z=vec4(position.xy,0.0,1.0);z.xy*=uOffset.z;z.xy+=uOffset.xy;vec2 K=10.0*floor(position.zw/10.0);vec2 d=position.zw-K;z.z=y(z.xy);z.z-=0.01*uOffset.z*K.x;float L=uOffset.w;vec2 M=vec2(floor(L/256.0)/256.0,fract(L/256.0))*(256.0/255.0);vUV.xy=d.xy*uScaling.z;vUV.zw=M;gl_Position=projectionMatrix*viewMatrix*z;}`);\nvar terrainPickerFragment = new Shader(`\n#extension GL_OES_standard_derivatives : enable  \nprecision highp float;uniform vec3 uScaling;varying vec4 vUV;void main(){vec2 a=dFdx(vUV.xy);float b=log2(length(a));vec2 c=vUV.zw;float d=0.1*b+0.5;float e=256.0*255.0*gl_FragCoord.z;vec2 f=vec2(floor(e/256.0),mod(e,256.0))/255.0;float g=step(distance(gl_FragCoord.xy,uScaling.xy),4.0);vec4 h=vec4(c,0.0,d);vec4 i=vec4(0.0,0.0,f);gl_FragColor=mix(h,i,g);}`);\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nconst tilepickerUniforms = {\n  // Combine center pixel location (xy) and uv downscaling (z) into one\n  // Update happens in tilepicker.js\n  uScaling: {\n    value: new THREE.Vector3()\n  }\n};\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// Update shaders defines\n// TODO also define picker.js shaders here and update defines\n\n[beaconVertex, lineVertex, markerVertex,\n/*pickerVertex, raycastVertex,*/\nterrainVertex, terrainPickerVertex].forEach(shader => {\n  if (!INTERPOLATE_FLOAT) {\n    shader.define('MANUAL_TEXTURE_BILINEAR', '1');\n  }\n\n  shader.define('VIRTUAL_TEXTURE_ARRAY_BLOCKS', Math.sqrt(ELEVATION_POOL_SIZE).toExponential());\n  shader.define('VIRTUAL_TEXTURE_ARRAY_SIZE', ELEVATION_TILE_SIZE.toExponential());\n});\nterrainFragment.define('VIRTUAL_TEXTURE_ARRAY_BLOCKS', Math.sqrt(IMAGERY_POOL_SIZE).toExponential());\nterrainFragment.define('VIRTUAL_TEXTURE_ARRAY_SIZE', IMAGERY_TILE_SIZE.toExponential()); // Materials that depend on extension support\n\nif (webgl.depthTexture) {\n  markerVertex.define('READ_DEPTH', 1);\n  markerFragment.define('READ_DEPTH', 1);\n} // TODO too many similar blocks of code here. Should clean up the uniforms\n// combining using _.assign or similar\n\n\nvar material = {\n  beacon: new THREE.RawShaderMaterial({\n    name: '_beacon',\n    // Names starting with _ will not be precompiled\n    uniforms: lodash_min.assign({\n      uAccuracy: {\n        type: 'f',\n        value: 25\n      },\n      uTime: {\n        type: 'f',\n        value: 0\n      }\n    }, heightUniforms),\n    depthWrite: false,\n    vertexShader: beaconVertex.value,\n    fragmentShader: beaconFragment.value,\n    transparent: true\n  }),\n  marker: (() => {\n    const m = new THREE.RawShaderMaterial({\n      name: 'marker',\n      uniforms: lodash_min.assign({}, depthUniforms, heightUniforms, markerUniforms, tagUniforms),\n      vertexShader: markerVertex.value,\n      fragmentShader: markerFragment.value,\n      transparent: true\n    });\n    m.defaultAttributeValues = {}; // Remove usual defaults as they are wrong\n\n    return m;\n  })(),\n  line: lodash_min.memoize(function (color, thickness, outlineColor) {\n    // Cutoff dictates where we will begin to fade out line\n    // For wider lines this is relatively later, so we don't have\n    // fuzzy edges\n    // The value will be at least 0.3, and tend to 1 for large thicknesses\n    // Equivalent to the 2 edge pixels being used for the fade-out\n    var cutoff = Math.max(0.3, (thickness - 2) / thickness);\n    var c = new Color$1(color);\n    color = [c.r, c.g, c.b, c.a];\n    var haveOutline = outlineColor !== undefined;\n\n    if (haveOutline) {\n      c = new Color$1(outlineColor);\n\n      if (c.a === undefined) {\n        c.a = 1.0;\n      }\n\n      outlineColor = new THREE.Vector4(c.r, c.g, c.b, c.a);\n    } else {\n      outlineColor = new THREE.Vector4(0, 0, 0, 0);\n    }\n\n    var mat = new THREE.RawShaderMaterial({\n      name: 'line',\n      uniforms: lodash_min.assign({\n        uCutoff: {\n          type: 'f',\n          value: cutoff\n        },\n        uOutlineColor: {\n          type: 'c',\n          value: outlineColor\n        },\n        uThickness: {\n          type: 'f',\n          value: thickness\n        }\n      }, heightUniforms, lineUniforms, tagUniforms),\n      vertexShader: lineVertex.value,\n      fragmentShader: lineFragment.value,\n      transparent: true\n    }); // To allow us to specify color both per-line\n    // and per-vertex, use an attribute, not uniform\n\n    mat.defaultAttributeValues.color = color;\n    return mat;\n  }),\n  sky: new THREE.RawShaderMaterial({\n    name: 'sky',\n    uniforms: lodash_min.assign({}, skyUniforms, tonemapUniforms),\n    depthWrite: false,\n    // Will render last and thus don't need depth\n    vertexShader: skyVertex.value,\n    fragmentShader: skyFragment.value,\n    side: THREE.BackSide\n  }),\n  terrain: uniforms => {\n    const imagery = new THREE.RawShaderMaterial({\n      uniforms: lodash_min.assign(uniforms, {\n        imageryArray: {\n          value: ImageryDatasource.textureArray\n        }\n      }, fogUniforms, heightUniforms),\n      vertexShader: terrainVertex.value,\n      fragmentShader: terrainFragment.value\n    });\n    const picker = new THREE.RawShaderMaterial({\n      uniforms: lodash_min.assign(uniforms, heightUniforms, tilepickerUniforms),\n      vertexShader: terrainPickerVertex.value,\n      fragmentShader: terrainPickerFragment.value\n    });\n    return {\n      imagery,\n      picker\n    };\n  }\n}; // Apparently makes things quicker as the offset\n// attribute will always have data in it (ie it\n// will never be set in defaultAttributesValues)\n\nmaterial.marker.index0AttributeName = 'offset'; // Optimize by emptying out default attribute values\n// As these are not used, we can prevent THREE.js\n// needlessly setting these on each frame\n\nlodash_min.forOwn(material, function (m) {\n  if (m.type === \"RawShaderMaterial\") {\n    m.defaultAttributeValues = {};\n  }\n});\nvar pickerVertex = new Shader(`uniform mat4 viewMatrix;uniform mat4 projectionMatrix;uniform vec3 cameraPosition;uniform float uPixelRatio;uniform vec2 uViewportCanvasInverse;attribute vec3 tag;attribute vec3 position;attribute vec3 tangent;attribute vec4 atlas;attribute vec4 anchor;attribute vec4 clipping;attribute vec3 layout;attribute vec4 normal;attribute vec4 offset;varying vec4 vTag;float a(inout vec3 b){float c=dot(b,b);float d=inversesqrt(c);b=d*b;return c*d;}\n#define VIRTUAL_TEXTURE_ARRAY_BLOCKS 4.0\n\n#define VIRTUAL_TEXTURE_ARRAY_SIZE 512.0\n\n#define TEX_SIZE (VIRTUAL_TEXTURE_ARRAY_SIZE * VIRTUAL_TEXTURE_ARRAY_BLOCKS)\nconst vec2 e=vec2(1.0/TEX_SIZE,0.0);vec4 f(const in sampler2D g,in vec2 h){h-=0.5*e.xx;vec2 i=fract(h*TEX_SIZE);vec2 j=h-e.xx*i+0.5*e.xx;\n#ifdef HEIGHT_LOOKUP_BIAS\nvec4 k=texture2D(g,j,-10.0);vec4 l=texture2D(g,j+e,-10.0);vec4 m=texture2D(g,j+e.yx,-10.0);vec4 n=texture2D(g,j+e.xx,-10.0);\n#else\nvec4 k=texture2D(g,j);vec4 l=texture2D(g,j+e);vec4 m=texture2D(g,j+e.yx);vec4 n=texture2D(g,j+e.xx);\n#endif\nvec4 o=mix(k,l,i.x);vec4 p=mix(m,n,i.x);return mix(o,p,i.y);}vec4 q(in sampler2D r,in vec2 h,in float s){vec2 t=vec2(mod(float(s),VIRTUAL_TEXTURE_ARRAY_BLOCKS),floor(float(s)/VIRTUAL_TEXTURE_ARRAY_BLOCKS));const float u=0.5;vec2 v=vec2(u,VIRTUAL_TEXTURE_ARRAY_SIZE-u)/VIRTUAL_TEXTURE_ARRAY_SIZE;vec2 w=(clamp(h,v.x,v.y)+t)/VIRTUAL_TEXTURE_ARRAY_BLOCKS;\n#ifdef MANUAL_TEXTURE_BILINEAR\nreturn f(r,w);\n#else\nreturn texture2D(r,w);\n#endif\n}uniform lowp sampler2D indirectionTexture;uniform vec2 uGlobalOffset;uniform float uSceneScale;const float x=0.0008176665341588574;float y(in float z){float A=3.141592653589793-0.006135923151542565*z;float B=dot(vec2(0.5),exp(vec2(A,-A)));return B/(x*uSceneScale);}uniform lowp sampler2D elevationArray;float C(in vec2 D){const float E=32.0;const float F=1024.0;vec2 G=D.xy-uGlobalOffset;G/=(uSceneScale*E);G*=vec2(1.0,-1.0);vec2 H=G/F;const vec2 I=vec2(0.5);vec2 J=(floor(G-I)+I);J+=step(I,G-J);vec2 K=J/F;vec4 L=texture2D(indirectionTexture,K);float s=L.r;float M=L.g;vec2 N=L.ba;vec2 w=H*M+N;return y(G.y)*q(elevationArray,w,s).a;}\n#define TUBE_RADIUS 20.0\n\n#define SIZE vec2( 512.0, 1024.0 )\nuniform vec2 uViewportInverse;vec4 O(const in vec3 P,const in float Q){vec4 D=vec4(P,1.0);vec4 R=projectionMatrix*viewMatrix*D;D.xyz+=tangent.xyz;vec4 S=projectionMatrix*viewMatrix*D;vec2 T=S.xy/S.w-R.xy/R.w;vec2 U=T.yx*vec2(1.0,-1.0);U=Q*R.w*normalize(U)*uViewportInverse;R.xy+=U;return R;}void main(){vTag.rgb=tag;float V=1.0-step(length(tag),0.0);float W=length(position.x);float X=step(W,1.00001);X*=step(0.99999,W);vec3 Y=mix(position,offset.xyz,X);Y.z=C(Y.xy);vec4 Z=O(Y,TUBE_RADIUS);vec3 ba=cameraPosition-Y;float bb=a(ba);vec2 bc=vec2(1.0,-1.0)*position.xy;vec2 bd=0.5*bc+vec2(0.5);vec4 be;vec2 bf=vec2(normal.w,offset.w);bf=smoothstep(bf,vec2(0.95,0.9)*bf,vec2(bb));be.w=(0.6*bf.x+0.4)*bf.y;vec2 bg=mix(atlas.ww*vec2(SIZE.y/SIZE.x,1.0),atlas.zw,bf.x);be.xy=atlas.xy+bg*bd;be.w*=smoothstep(0.0,0.15,clipping.y+dot(ba,normal.xyz));be.w*=step(0.3,be.w);vec2 u=layout.xx+layout.yy;be.xy+=(u*bc)/SIZE;vec2 bh=SIZE*bg+2.0*u;bh*=uPixelRatio;float bi=min(0.5*bb,100.0+200.0*clipping.x);vec4 D=vec4(Y+bi*ba,1.0);vec4 bj=projectionMatrix*viewMatrix*D;vec2 bk=2.0*bj.w*uViewportCanvasInverse;\n#ifdef READ_DEPTH\nvec3 bl=0.5*bj.xyz/bj.w+vec3(0.5);float bm=texture2D(uDepth,bl.xy).x;float bn=projectionMatrix[3][2];bm/=1.0+0.02*bm/bn;be.w*=step(clipping.x*bl.z,bm);\n#endif\nbj.xy=bk*floor(bj.xy/bk);vec2 bo=0.5*bk*bh;bj.xy+=bk*(0.5*anchor.xy*bh+anchor.zw);bj.xy-=bo;vec2 bp=(position.xy+vec2(1.0))*bo;bj.xy+=bp;gl_Position=V*mix(Z,bj,X);}`);\nvar pickerFragment = new Shader(`precision highp float;varying vec4 vTag;void main(){gl_FragColor=vTag;}`);\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nconst pickerUniforms = {\n  uPixelRatio: {\n    type: 'f',\n    value: 1.0\n  },\n  uViewportCanvasInverse: {\n    type: 'v2',\n    value: new THREE.Vector2(1.0, 1.0)\n  },\n  uViewportInverse: {\n    type: 'v2',\n    value: new THREE.Vector2(1.0, 1.0)\n  }\n};\nContainerStore$1.listen(({\n  canvasHeight,\n  canvasWidth,\n  height,\n  width,\n  pixelRatio\n}) => {\n  pickerUniforms.uViewportCanvasInverse.value.set(1.0 / canvasWidth, 1.0 / canvasHeight);\n  pickerUniforms.uViewportInverse.value.set(1.0 / width, 1.0 / height);\n  pickerUniforms.uPixelRatio.value = pixelRatio;\n});\nvar raycastVertex = new Shader(`precision highp float;uniform mat4 viewMatrix;uniform mat4 projectionMatrix;attribute vec4 position;uniform vec4 uOffset;varying vec2 vPosition;\n#define VIRTUAL_TEXTURE_ARRAY_BLOCKS 4.0\n\n#define VIRTUAL_TEXTURE_ARRAY_SIZE 512.0\n\n#define TEX_SIZE (VIRTUAL_TEXTURE_ARRAY_SIZE * VIRTUAL_TEXTURE_ARRAY_BLOCKS)\nconst vec2 a=vec2(1.0/TEX_SIZE,0.0);vec4 b(const in sampler2D c,in vec2 d){d-=0.5*a.xx;vec2 e=fract(d*TEX_SIZE);vec2 f=d-a.xx*e+0.5*a.xx;\n#ifdef HEIGHT_LOOKUP_BIAS\nvec4 g=texture2D(c,f,-10.0);vec4 h=texture2D(c,f+a,-10.0);vec4 i=texture2D(c,f+a.yx,-10.0);vec4 j=texture2D(c,f+a.xx,-10.0);\n#else\nvec4 g=texture2D(c,f);vec4 h=texture2D(c,f+a);vec4 i=texture2D(c,f+a.yx);vec4 j=texture2D(c,f+a.xx);\n#endif\nvec4 k=mix(g,h,e.x);vec4 l=mix(i,j,e.x);return mix(k,l,e.y);}vec4 m(in sampler2D n,in vec2 d,in float o){vec2 p=vec2(mod(float(o),VIRTUAL_TEXTURE_ARRAY_BLOCKS),floor(float(o)/VIRTUAL_TEXTURE_ARRAY_BLOCKS));const float q=0.5;vec2 r=vec2(q,VIRTUAL_TEXTURE_ARRAY_SIZE-q)/VIRTUAL_TEXTURE_ARRAY_SIZE;vec2 s=(clamp(d,r.x,r.y)+p)/VIRTUAL_TEXTURE_ARRAY_BLOCKS;\n#ifdef MANUAL_TEXTURE_BILINEAR\nreturn b(n,s);\n#else\nreturn texture2D(n,s);\n#endif\n}uniform lowp sampler2D indirectionTexture;uniform vec2 uGlobalOffset;uniform float uSceneScale;const float t=0.0008176665341588574;float u(in float v){float w=3.141592653589793-0.006135923151542565*v;float x=dot(vec2(0.5),exp(vec2(w,-w)));return x/(t*uSceneScale);}uniform lowp sampler2D elevationArray;float y(in vec2 z){const float A=32.0;const float B=1024.0;vec2 C=z.xy-uGlobalOffset;C/=(uSceneScale*A);C*=vec2(1.0,-1.0);vec2 D=C/B;const vec2 E=vec2(0.5);vec2 F=(floor(C-E)+E);F+=step(E,C-F);vec2 G=F/B;vec4 H=texture2D(indirectionTexture,G);float o=H.r;float I=H.g;vec2 J=H.ba;vec2 s=D*I+J;return u(C.y)*m(elevationArray,s,o).a;}void main(){vec4 z=vec4(position.xy,0.0,1.0);z.xy*=uOffset.z;z.xy+=uOffset.xy;vPosition=z.xy+vec2(32768.0);z.z=y(z.xy);gl_Position=projectionMatrix*viewMatrix*z;}`);\nvar raycastFragment = new Shader(`precision highp float;varying vec2 vPosition;void main(){gl_FragColor=vec4(mod(vPosition.xy,256.0),floor(vPosition.xy/256.0))/255.0;}`);\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// Picking\n\nconst canvas$2 = renderer.domElement;\nconst TilePicker = {\n  data: new Uint8Array(4 * canvas$2.width * canvas$2.height),\n  target: new THREE.WebGLRenderTarget(canvas$2.width, canvas$2.height)\n}; // Make independent target for picking to not intefere with terrain\n\nconst FeaturePicker = {\n  data: new Uint8Array(4 * canvas$2.width * canvas$2.height),\n  target: new THREE.WebGLRenderTarget(canvas$2.width, canvas$2.height)\n};\n\nfunction updateSize({\n  width,\n  height,\n  renderRatio\n}) {\n  // Want to scale down so that resulting canvas is 500 pixels\n  // This means 500 pixels total not 500 wide!!!\n  let downScale = Math.sqrt(width * height / 500);\n  let w = 2 * Math.round(0.5 * width / downScale);\n  let h = 2 * Math.round(0.5 * height / downScale);\n\n  if (!TilePicker.target || w !== TilePicker.target.width || h !== TilePicker.target.height) {\n    TilePicker.target = new THREE.WebGLRenderTarget(w, h);\n    TilePicker.data = new Uint8Array(4 * TilePicker.target.width * TilePicker.target.height); // 16X picker to be improve click accuracy\n\n    FeaturePicker.target = new THREE.WebGLRenderTarget(16 * w, 16 * h);\n    FeaturePicker.data = new Uint8Array(4 * FeaturePicker.target.width * FeaturePicker.target.height); // Update shaders\n\n    tilepickerUniforms.uScaling.value.set(0.5 * w, 0.5 * h, // Location of center pixel\n    256 / (renderRatio * downScale) // Scaling factor for uv error to compensate downScale\n    );\n  }\n}\n\nContainerStore$1.listen(updateSize);\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nvar oldAutoClearDepth;\nvar tagId;\nvar id, store, s, sl, feature, f, fl; // Implements GPU picking\n\nvar picker = {\n  mouse: {\n    x: 0,\n    y: 0\n  },\n  raycastPosition: new THREE.Vector3(),\n  init: function () {\n    // Create materials for picking and raycasting and create scenes\n    var pickerMaterial = new THREE.RawShaderMaterial({\n      name: 'picker',\n      uniforms: lodash_min.assign({}, heightUniforms, pickerUniforms),\n      vertexShader: pickerVertex.value,\n      fragmentShader: pickerFragment.value //transparent: true // causes issues when true (wrong render order)\n\n    });\n    pickerMaterial.index0AttributeName = 'offset';\n    pickerMaterial.defaultAttributeValues = material.marker.defaultAttributeValues;\n    scene.pickerScene.overrideMaterial = pickerMaterial;\n    scene.pickerScene.lastCameraPosition = camera.position.clone();\n    var raycastMaterial = new THREE.RawShaderMaterial({\n      name: 'raycast',\n      uniforms: heightUniforms,\n      vertexShader: raycastVertex.value,\n      fragmentShader: raycastFragment.value\n    });\n    picker.raycastScene = new THREE.Scene();\n    picker.raycastScene.overrideMaterial = raycastMaterial;\n    var state = ContainerStore$1.getState();\n    var parameters = {\n      minFilter: THREE.NearestFilter,\n      magFilter: THREE.NearestFilter\n    }; // Single pixel render target, for position raycasting\n    // we'll set a viewOffset when rendering to crop out\n    // the correct portion on the view\n    // TODO make work again and move to picking.js\n\n    picker.renderTarget1px = new THREE.WebGLRenderTarget(1, 1, parameters);\n    picker.viewOffsetWidth = state.width;\n    picker.viewOffsetHeight = state.height; // Picked pixel will be written into here\n\n    picker.buffer = new Uint8Array(4);\n  },\n  stores: [],\n  tagId: 1,\n  featureIdtoTagId: new Map(),\n  // Tags all features in a store to enable GPU picking\n  registerStore: function (store) {\n    if (picker.stores.indexOf(store) === -1) {\n      picker.stores.push(store);\n    }\n\n    store.data.forEach(function (feature) {\n      // Unless explicitly marked as unselectable, default to tagging\n      if (feature.properties.selectable !== false) {\n        // Use feature id, this way we can create compound\n        // markers, that get selected together\n        if (feature.id !== undefined) {\n          tagId = picker.featureIdtoTagId.get(feature.id);\n\n          if (!tagId) {\n            tagId = picker.tagId++;\n            picker.featureIdtoTagId.set(feature.id, tagId);\n          }\n\n          feature.tag = tagId;\n        } else {\n          feature.tag = picker.tagId++;\n          feature.id = 1000000 + picker.tagId++;\n        }\n      }\n    });\n  },\n  pickFeature: function (mouse) {\n    picker.mouse.x = mouse.x;\n    picker.mouse.y = mouse.y;\n\n    if (mouse.clipspace) {\n      picker.mouse = ContainerStore$1.fromClipSpace(picker.mouse);\n    } // Convert into 0-1 coordinates\n\n\n    let clickPosition = ContainerStore$1.toClipSpace(picker.mouse);\n    clickPosition.add({\n      x: 1,\n      y: 1\n    }).multiplyScalar(0.5);\n\n    if (clickPosition.x < 0 || clickPosition.x > 1 || clickPosition.y < 0 || clickPosition.y > 1) {\n      console.error('Click outside valid bounds:', clickPosition.x, clickPosition.y);\n    } // Convert into target coordinates\n\n\n    clickPosition.x = Math.round(clickPosition.x * FeaturePicker.target.width);\n    clickPosition.y = Math.round(clickPosition.y * FeaturePicker.target.height); // Enable render target we want to work with\n\n    renderer.setRenderTarget(FeaturePicker.target); // Cache camera location to avoid unnecessary re-renders\n\n    if (!scene.pickerScene.lastCameraPosition.equals(camera.position)) {\n      scene.pickerScene.lastCameraPosition.copy(camera.position); // In the case of picking, we have to render the terrain\n      // first, to make sure the picker scene is correctly\n      // obscured\n      // TODO would be nice if we could re-use the depthTexture\n      // for this, but it doesn't seem to work...\n      // Important to clear otherwise old pick targets remain\n\n      renderer.clear(true, true, true); // TODO re-enable rendering of terrain\n      //renderer.render( picker.raycastScene, camera );\n\n      oldAutoClearDepth = renderer.autoClearDepth;\n      renderer.autoClearDepth = false;\n      renderer.render(scene.pickerScene, camera);\n      renderer.autoClearDepth = oldAutoClearDepth; // TODO don't execute when performing tex copy\n    } // Read single pixel from target at mouse location\n\n\n    renderer.readRenderTargetPixels(FeaturePicker.target, clickPosition.x, clickPosition.y, 1, 1, picker.buffer);\n    renderer.setRenderTarget(null); // Interpret as id\n\n    /*jslint bitwise: true */\n\n    id = picker.buffer[0] << 16 | picker.buffer[1] << 8 | picker.buffer[2];\n    /*jslint bitwise: false */\n    // Update uniform so shaders can highlight\n\n    tagUniforms.uSelectedTag.value.set(id === 0 ? 65536 : id); // Lookup actual feature\n\n    for (s = 0, sl = picker.stores.length; s < sl; s++) {\n      store = picker.stores[s];\n\n      for (f = 0, fl = store.data.length; f < fl; f++) {\n        feature = store.data[f];\n\n        if (feature.tag === id) {\n          return feature;\n        }\n      }\n    }\n\n    return null;\n  },\n  raycastTerrain: function (mouse) {\n    picker.mouse.x = mouse.x;\n    picker.mouse.y = mouse.y;\n\n    if (mouse.clipspace) {\n      picker.mouse = ContainerStore$1.fromClipSpace(picker.mouse);\n    } // As we're just rendering one pixel at the location of the\n    // mouse, set a viewOffset, which we'll later clear\n\n\n    camera.setViewOffset(picker.viewOffsetWidth, picker.viewOffsetHeight, picker.mouse.x, picker.mouse.y, 1, 1); // Render single pixel and read out value\n\n    renderer.setRenderTarget(picker.renderTarget1px);\n    renderer.render(picker.raycastScene, camera);\n    renderer.readRenderTargetPixels(picker.renderTarget1px, 0, 0, 1, 1, picker.buffer);\n    camera.clearViewOffset(); // Extract packed position from buffer\n\n    picker.raycastPosition.set(picker.buffer[0] + 256 * picker.buffer[2] - 32768, picker.buffer[1] + 256 * picker.buffer[3] - 32768);\n\n    if (picker.raycastPosition.x === 32768 && picker.raycastPosition.y === 32768) {\n      return null;\n    }\n\n    picker.raycastPosition.z = heightAt(picker.raycastPosition);\n    return picker.raycastPosition;\n  }\n};\nContainerStore$1.listen(function (state) {\n  picker.viewOffsetWidth = state.width;\n  picker.viewOffsetHeight = state.height;\n});\nRenderStore$1.listen(function (state) {\n  if (state.animating) {\n    // Move last camera to force re-render\n    scene.pickerScene.lastCameraPosition.x += 1000000;\n  }\n});\npicker.init();\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// Data for showing lines, inside 3D world\n\nfunction LineData() {\n  this.data = {};\n  this.bindListeners({\n    clearFeatures: UserActions.setCurrentPlace,\n    addOverlay: [GeodataActions.addOverlay, GeodataActions.removeOverlay]\n  });\n}\n\nLineData.prototype.clearFeatures = function () {\n  this.data = [];\n  return false;\n};\n\nLineData.prototype.addOverlay = function () {\n  this.waitFor(OverlayAdapter$1);\n  var lines = OverlayAdapter$1.getState().lines;\n\n  if (lodash_min.isEqual(this.data, lines)) {\n    // Do not broadcast if data is unchanged\n    return false;\n  }\n\n  this.data = lines.concat();\n  picker.registerStore(this);\n};\n\nLineData.displayName = 'LineData';\nvar LineData$1 = alt.createStore(LineData);\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nconst Procedural$5 = {};\n\nfunction FeaturesExport() {\n  this.bindListeners({\n    featureClicked: UserActions.featureClicked,\n    featureSelected: UserActions.featureSelected,\n    overlayDisplayed: RenderActions.overlayDisplayed\n  });\n} // For now only supporting lines & labels, but should expand in future\n\n\nvar lookupFeature = function (id) {\n  if (id === undefined) {\n    return;\n  } // Support looking up an array of features\n\n\n  if (Array.isArray(id)) {\n    return id.map(lookupFeature);\n  } // Get feature as represented by engine (this has actual\n  // curve data)\n\n\n  if (id.geometry) {\n    // Backward compatibility for old engine.\n    return lodash_min.find(LineData$1.getState().data, lodash_min.matchesProperty('geometry', id.geometry));\n  }\n\n  var feature = lodash_min.find(LineData$1.getState().data, lodash_min.matchesProperty('id', id));\n\n  if (feature) {\n    return feature;\n  }\n\n  if (feature) {\n    return feature;\n  }\n\n  feature = lodash_min.find(OverlayAdapter$1.getState().points, lodash_min.matchesProperty('id', id));\n\n  if (feature) {\n    return feature;\n  }\n\n  feature = lodash_min.find(OverlayAdapter$1.getState().markers, lodash_min.matchesProperty('id', id));\n  return feature;\n};\n/**\n * @exports Procedural\n * @name Features\n * @description Features are elements in the rendered scene\n * that are displayed on top of the 3D world, such as lines\n * or POIs.\n *\n * Features are added as part of an overlay, which takes the\n * form of a [geojson]{@link http://geojson.org/} FeatureCollection.\n * Each feature should have a unique `id`, to allow referencing\n * later by other methods.\n *\n * To explore the different options available when styling\n * the overlays, take a look at the [Overlay Editor]{@link https://felixpalmer.github.io/procedural-gl-js/docs/overlays.html}\n *\n * @example\n * // Add an overlay and focus on features when clicked\n * var featureCollection = { ... };\n * Procedural.addOverlay( featureCollection );\n * Procedural.onFeatureClicked = function ( id ) {\n *   Procedural.focusOnFeature( id );\n * };\n */\n\n/**\n * @name addBuiltinOverlay\n * @memberof module:Features\n * @function\n * @param {String|Array} id id of overlay to add, or array of ids\n * @description Adds a built-in overlay to the 3D world.\n * Currently supported overlays are: 'peaks', 'places'.\n * See also [Features.removeOverlay]{@link module:Features.removeOverlay}\n  @example\n * Procedural.addBuiltinOverlay( 'peaks' );\n */\n\n\nProcedural$5.addBuiltinOverlay = function (id) {\n  setTimeout(function () {\n    GeodataActions.addBuiltinOverlay(id);\n  }, 0);\n};\n/**\n * @name addOverlay\n * @memberof module:Features\n * @function\n * @param {Object} overlay a geojson FeatureCollection\n * @description Adds an overlay to the 3D world. An overlay is a collection of `Features`, specified\n * in geojson format as a `FeatureCollection`. Each of these `Features` should have a unique id\n * which is used by other methods when referencing each `Feature`. See also the examples in the [Overlay Editor]{@link http://www.procedural.eu/js-sdk/overlays.html}. See also [Features.updateOverlay]{@link module:Features.updateOverlay}, [Features.removeOverlay]{@link module:Features.removeOverlay}\n  @example\n * var featureCollection = {\n *   'name': 'example',\n *   'type': 'FeatureCollection',\n *   'features': [\n *     {\n *       'id': 0,\n *       'type': 'Feature',\n *       'geometry': {\n *         'type': 'LineString',\n *         'coordinates': [\n *           [ 13.55, 47.25 ],\n *           [ 13.56, 47.26 ]\n *         ]\n *       },\n *       'properties': {\n *         'color': '#f30e32'\n *       }\n *     }\n *   ]\n * }\n *\n * Procedural.addOverlay( featureCollection );\n */\n\n\nProcedural$5.addOverlay = function (overlay) {\n  setTimeout(function () {\n    GeodataActions.addOverlay(overlay);\n  }, 0);\n};\n/**\n * @name updateOverlay\n * @memberof module:Features\n * @function\n * @param {Object} overlay a geojson FeatureCollection\n * @description Updates an overlay that was previously added to the 3D world.\n * Using this method is much faster than repeatedly calling `addOverlay`,\n * but the update is limited to the positions of the features in the overlay.\n * The format is the same as for `addOverlay`, but only the `coordinates`\n * will be updated - all feature properties will be ignored.\n *\n * To update an overlay it is necessary to provide the\n * same `name` as was used for `addOverlay` and for the updated\n * data to have the same number of features as the original overlay, in\n * the same order.\n *\n * Note that currently only `Point` geometries can be updated.\n * See also [Features.addOverlay]{@link module:Features.addOverlay}\n  @example\n * var featureCollection = {\n *   'name': 'example',\n *   'type': 'FeatureCollection',\n *   'features': [\n *     {\n *       'id': 0,\n *       'type': 'Feature',\n *       'geometry': {\n *         'type': 'Point',\n *         'coordinates': [ 13.55, 47.25 ]\n *       }\n *     }\n *   ]\n * }\n *\n * Procedural.updateOverlay( featureCollection );\n */\n\n\nProcedural$5.updateOverlay = function (overlay) {\n  setTimeout(function () {\n    GeodataActions.updateOverlay(overlay);\n  }, 0);\n};\n/**\n * @name removeOverlay\n * @memberof module:Features\n * @function\n * @param {String} name name of overlay to remove, defined when adding an overlay using [Features.addOverlay]{@link module:Features.addOverlay}\n * @description Removes an overlay from the 3D world. See also [Features.addOverlay]{@link module:Features.addOverlay}\n * @example\n *\n * var featureCollection = {\n *   'name': 'example',\n *   'type': 'FeatureCollection',\n *   'features': [ ... ]\n * }\n * Procedural.addOverlay( featureCollection );\n *\n * ...\n *\n * Procedural.removeOverlay( 'example' );\n *\n */\n\n\nProcedural$5.removeOverlay = function (id) {\n  setTimeout(function () {\n    GeodataActions.removeOverlay(id);\n  }, 0);\n};\n/**\n * @name highlightFeature\n * @memberof module:Features\n * @function\n * @param {Number} id id of Feature to highlight\n * @description Highlights a feature on the map\n * @example\n * Procedural.highlightFeature( 3 );\n */\n\n\nProcedural$5.highlightFeature = function (id) {\n  var feature = lookupFeature(id);\n\n  if (feature) {\n    setTimeout(function () {\n      UserActions.featureSelected(feature);\n    });\n  }\n};\n/**\n * @name focusOnFeature\n * @memberof module:Features\n * @function\n * @param {Number} id id of Feature to focus on\n * @description Focuses the camera on a feature on the map\n * @example\n * Procedural.focusOnFeature( 3 );\n */\n\n\nProcedural$5.focusOnFeature = function (id) {\n  var feature = lookupFeature(id);\n\n  if (feature) {\n    setTimeout(function () {\n      UserActions.focusOnFeature(feature);\n    });\n  }\n}; // Not working so well, disable for now\n///**\n// * @name animateAlongFeature\n// * @memberof module:Features\n// * @function\n// * @param {Number} id id of Feature to animate along\n// * @param {Object} options options to specify how to animate\n// * accepts `distance` and `speed`\n// * @description Animates the camera along a LineString Feature\n// * @example\n// * Procedural.animateAlongFeature( 5 );\n// */\n//Procedural.animateAlongFeature = function ( id, options ) {\n//  var feature = lookupFeature( id );\n//  if ( feature ) {\n//    options = options || {};\n//    options.feature = feature;\n//    setTimeout( function () { UserActions.animateAlongFeature( options );\n//    } );\n//  }\n//};\n\n\nProcedural$5.selectFeatures = function (ids) {\n  if (ids) {\n    setTimeout(function () {\n      UserActions.selectFeatures(ids);\n    });\n  }\n}; // API Listeners\n\n\nvar currentFeature = null;\n/**\n * @name onFeatureSelected\n * @memberof module:Features\n * @function\n * @param {Number} id id of Feature that was selected\n * @description Callback function for when a feature is selected,\n * by hovering over it with the mouse\n * @example\n * Procedural.onFeatureSelected = function ( id ) {\n *   console.log( 'Feature selected:', id );\n * }\n */\n\nFeaturesExport.prototype.featureSelected = function (feature) {\n  // Only broadcast changes\n  if (currentFeature === feature) {\n    return;\n  }\n\n  currentFeature = feature;\n\n  if (typeof Procedural$5.onFeatureSelected === 'function' && feature && feature.id !== undefined) {\n    Procedural$5.onFeatureSelected(feature.id);\n  }\n};\n/**\n * @name onFeatureClicked\n * @memberof module:Features\n * @function\n * @param {Number} id id of Feature that was clicked\n * @description Callback function for when a feature is clicked\n * @example\n * Procedural.onFeatureClicked = function ( id ) {\n *   console.log( 'Feature clicked:', id );\n * }\n */\n\n\nFeaturesExport.prototype.featureClicked = function (feature) {\n  if (typeof Procedural$5.onFeatureClicked === 'function' && feature && feature.id !== undefined) {\n    Procedural$5.onFeatureClicked(feature.id);\n  }\n};\n/**\n * @name onOverlayAdded\n * @memberof module:Features\n * @function\n * @param {String} name name of overlay that was added\n * @description Callback function for when an overlay has been added\n * @example\n * Procedural.onOverlayAdded = function ( name ) {\n *   console.log( 'Overlay added:', name );\n * }\n */\n\n\nFeaturesExport.prototype.overlayDisplayed = function (name) {\n  if (typeof Procedural$5.onOverlayAdded === 'function' && name) {\n    Procedural$5.onOverlayAdded(name);\n  }\n};\n\nFeaturesExport.displayName = 'FeaturesExport';\nalt.createStore(FeaturesExport);\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nconst Procedural$6 = {};\n/**\n * @exports Procedural\n * @name Rendering\n * @description The engine will only re-render the scene when\n * needed, and automatically pause rendering when appropriate,\n * e.g. when the containing browser tab is in the background.\n *\n * Using the [play]{@link module:Rendering.play} and [pause]{@link module:Rendering.pause} methods the engine can also be paused manually. This can\n * be used to pause the engine when the containing element scrolls\n * off the page.\n */\n\n/**\n * @name play\n * @memberof module:Rendering\n * @function\n * @description Resumes the engine. See also [Rendering.pause]{@link module:Rendering.pause}\n */\n\nProcedural$6.play = function () {\n  setTimeout(function () {\n    RenderActions.play();\n  }, 0);\n};\n/**\n * @name pause\n * @memberof module:Rendering\n * @function\n * @description Pauses the engine. See also [Rendering.play]{@link module:Rendering.play}\n */\n\n\nProcedural$6.pause = function () {\n  setTimeout(function () {\n    RenderActions.pause();\n  }, 0);\n};\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\n\nconst Procedural$7 = {};\n/**\n * @exports Procedural\n * @name Location\n * @description The Location API methods enable\n * a marker indicating where the user is located in the world\n */\n\n/**\n * @name setUserLocation\n * @memberof module:Location\n * @function\n * @description Tells the engine where the current user is located, which\n * displays a marker in the 3D world\n * @param {Object} position An Object of the format produced by the HTML5 Geolocation API\n * @example\n * // Manually construct object, can also use navigator.geolocation.watchPosition\n * // to obtain\n * var position = {\n *   coords: {\n *     latitude: 46.46695,\n *     longitude: 7.52151,\n *     accuracy: 50\n *   }\n * };\n *\n * Procedural.setUserLocation( position );\n */\n\nProcedural$7.setUserLocation = function (position) {\n  // Detect object not in coords format and wrap\n  var p;\n\n  if (position.latitude !== undefined && position.longitude !== undefined) {\n    p = {\n      coords: position\n    };\n  } else {\n    p = position;\n  }\n\n  setTimeout(function () {\n    CurrentLocationActions.panToPosition(p);\n  }, 0);\n};\n/**\n * @name toggleUserLocationTracking\n * @memberof module:Location\n * @function\n * @description Toggles whether the camera automatically follows the user\n * when a new location update is sent using [Procedural.setUserLocation]{@link module:Location.setUserLocation}. Initially tracking is disabled.\n * Note tracking is automatically disabled when the user manipulates the camera\n */\n\n\nProcedural$7.toggleUserLocationTracking = function () {\n  setTimeout(function () {\n    CurrentLocationActions.toggleTracking();\n  }, 0);\n};\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\n\nconst Procedural$8 = {};\n/**\n * @exports Procedural\n * @name UI\n * @description User interface elements can be optionally shown\n * on top of the map\n */\n\n/**\n * @name setCameraModeControlVisible\n * @memberof module:UI\n * @function\n * @param {Boolean} value pass true to show control, false to hide\n * @description Show/hide the camera mode control\n */\n\nProcedural$8.setCameraModeControlVisible = function (value) {\n  setTimeout(function () {\n    ConfigActions.setCameraModeControlVisible(value);\n  }, 0);\n};\n/**\n * @name setCompassVisible\n * @memberof module:UI\n * @function\n * @param {Boolean} value pass true to show control, false to hide\n * @description Show/hide the compass control\n */\n\n\nProcedural$8.setCompassVisible = function (value) {\n  setTimeout(function () {\n    ConfigActions.setCompassVisible(value);\n  }, 0);\n};\n/**\n * @name setRotationControlVisible\n * @memberof module:UI\n * @function\n * @param {Boolean} value pass true to show control, false to hide\n * @description Show/hide the camera rotation control\n */\n\n\nProcedural$8.setRotationControlVisible = function (value) {\n  setTimeout(function () {\n    ConfigActions.setRotationControlVisible(value);\n  }, 0);\n};\n/**\n * @name setUserLocationControlVisible\n * @memberof module:UI\n * @function\n * @param {Boolean} value pass true to show control, false to hide\n * @description Show/hide the user location control. If GPS location is\n * not available the control will not be shown.\n */\n\n\nProcedural$8.setUserLocationControlVisible = function (value) {\n  setTimeout(function () {\n    ConfigActions.setUserLocationControlVisible(value);\n  }, 0);\n};\n/**\n * @name setZoomControlVisible\n * @memberof module:UI\n * @function\n * @param {Boolean} value pass true to show control, false to hide\n * @description Show/hide the camera zoom control\n */\n\n\nProcedural$8.setZoomControlVisible = function (value) {\n  setTimeout(function () {\n    ConfigActions.setZoomControlVisible(value);\n  }, 0);\n};\n\nvar preact_umd_min = createCommonjsModule(function (module, exports) {\n  !function (e, t) {\n    t(exports);\n  }(commonjsGlobal, function (e) {\n    function t(e, t) {\n      var n = E,\n          o = void 0,\n          r = void 0,\n          i = void 0,\n          l = void 0;\n\n      for (l = arguments.length; l-- > 2;) T.push(arguments[l]);\n\n      t && null != t.children && (T.length || T.push(t.children), delete t.children);\n\n      while (T.length) if ((r = T.pop()) && void 0 !== r.pop) for (l = r.length; l--;) T.push(r[l]);else \"boolean\" == typeof r && (r = null), (i = \"function\" != typeof e) && (null == r ? r = \"\" : \"number\" == typeof r ? r += \"\" : \"string\" != typeof r && (i = !1)), i && o ? n[n.length - 1] += r : n === E ? n = [r] : n.push(r), o = i;\n\n      var s = new L();\n      return s.nodeName = e, s.children = n, s.attributes = null == t ? void 0 : t, s.key = null == t ? void 0 : t.key, void 0 !== M.vnode && M.vnode(s), s;\n    }\n\n    function n(e, t) {\n      for (var n in t) e[n] = t[n];\n\n      return e;\n    }\n\n    function o(e, t) {\n      e && (\"function\" == typeof e ? e(t) : e.current = t);\n    }\n\n    function r(e, o) {\n      return t(e.nodeName, n(n({}, e.attributes), o), arguments.length > 2 ? [].slice.call(arguments, 2) : e.children);\n    }\n\n    function i(e) {\n      !e._dirty && (e._dirty = !0) && 1 == z.push(e) && (M.debounceRendering || W)(l);\n    }\n\n    function l() {\n      var e = void 0;\n\n      while (e = z.pop()) e._dirty && N(e);\n    }\n\n    function s(e, t, n) {\n      return \"string\" == typeof t || \"number\" == typeof t ? void 0 !== e.splitText : \"string\" == typeof t.nodeName ? !e._componentConstructor && a(e, t.nodeName) : n || e._componentConstructor === t.nodeName;\n    }\n\n    function a(e, t) {\n      return e.normalizedNodeName === t || e.nodeName.toLowerCase() === t.toLowerCase();\n    }\n\n    function p(e) {\n      var t = n({}, e.attributes);\n      t.children = e.children;\n      var o = e.nodeName.defaultProps;\n      if (void 0 !== o) for (var r in o) void 0 === t[r] && (t[r] = o[r]);\n      return t;\n    }\n\n    function u(e, t) {\n      var n = t ? document.createElementNS(\"http://www.w3.org/2000/svg\", e) : document.createElement(e);\n      return n.normalizedNodeName = e, n;\n    }\n\n    function d(e) {\n      var t = e.parentNode;\n      t && t.removeChild(e);\n    }\n\n    function c(e, t, n, r, i) {\n      if (\"className\" === t && (t = \"class\"), \"key\" === t) ;else if (\"ref\" === t) o(n, null), o(r, e);else if (\"class\" !== t || i) {\n        if (\"style\" === t) {\n          if (r && \"string\" != typeof r && \"string\" != typeof n || (e.style.cssText = r || \"\"), r && \"object\" == typeof r) {\n            if (\"string\" != typeof n) for (var l in n) l in r || (e.style[l] = \"\");\n\n            for (var s in r) e.style[s] = \"number\" == typeof r[s] && !1 === H.test(s) ? r[s] + \"px\" : r[s];\n          }\n        } else if (\"dangerouslySetInnerHTML\" === t) r && (e.innerHTML = r.__html || \"\");else if (\"o\" == t[0] && \"n\" == t[1]) {\n          var a = t !== (t = t.replace(/Capture$/, \"\"));\n          t = t.toLowerCase().substring(2), r ? n || e.addEventListener(t, f, a) : e.removeEventListener(t, f, a), (e._listeners || (e._listeners = {}))[t] = r;\n        } else if (\"list\" !== t && \"type\" !== t && !i && t in e) {\n          try {\n            e[t] = null == r ? \"\" : r;\n          } catch (e) {}\n\n          null != r && !1 !== r || \"spellcheck\" == t || e.removeAttribute(t);\n        } else {\n          var p = i && t !== (t = t.replace(/^xlink:?/, \"\"));\n          null == r || !1 === r ? p ? e.removeAttributeNS(\"http://www.w3.org/1999/xlink\", t.toLowerCase()) : e.removeAttribute(t) : \"function\" != typeof r && (p ? e.setAttributeNS(\"http://www.w3.org/1999/xlink\", t.toLowerCase(), r) : e.setAttribute(t, r));\n        }\n      } else e.className = r || \"\";\n    }\n\n    function f(e) {\n      return this._listeners[e.type](M.event && M.event(e) || e);\n    }\n\n    function v() {\n      var e = void 0;\n\n      while (e = F.shift()) M.afterMount && M.afterMount(e), e.componentDidMount && e.componentDidMount();\n    }\n\n    function h(e, t, n, o, r, i) {\n      I++ || (O = null != r && void 0 !== r.ownerSVGElement, $ = null != e && !(j in e));\n      var l = m(e, t, n, o, i);\n      return r && l.parentNode !== r && r.appendChild(l), --I || ($ = !1, i || v()), l;\n    }\n\n    function m(e, t, n, o, r) {\n      var i = e,\n          l = O;\n      if (null != t && \"boolean\" != typeof t || (t = \"\"), \"string\" == typeof t || \"number\" == typeof t) return e && void 0 !== e.splitText && e.parentNode && (!e._component || r) ? e.nodeValue != t && (e.nodeValue = t) : (i = document.createTextNode(t), e && (e.parentNode && e.parentNode.replaceChild(i, e), y(e, !0))), i[j] = !0, i;\n      var s = t.nodeName;\n      if (\"function\" == typeof s) return k(e, t, n, o);\n\n      if (O = \"svg\" === s || \"foreignObject\" !== s && O, s += \"\", (!e || !a(e, s)) && (i = u(s, O), e)) {\n        while (e.firstChild) i.appendChild(e.firstChild);\n\n        e.parentNode && e.parentNode.replaceChild(i, e), y(e, !0);\n      }\n\n      var p = i.firstChild,\n          d = i[j],\n          c = t.children;\n\n      if (null == d) {\n        d = i[j] = {};\n\n        for (var f = i.attributes, v = f.length; v--;) d[f[v].name] = f[v].value;\n      }\n\n      return !$ && c && 1 === c.length && \"string\" == typeof c[0] && null != p && void 0 !== p.splitText && null == p.nextSibling ? p.nodeValue != c[0] && (p.nodeValue = c[0]) : (c && c.length || null != p) && _(i, c, n, o, $ || null != d.dangerouslySetInnerHTML), g(i, t.attributes, d), O = l, i;\n    }\n\n    function _(e, t, n, o, r) {\n      var i = e.childNodes,\n          l = [],\n          a = {},\n          p = 0,\n          u = 0,\n          c = i.length,\n          f = 0,\n          v = t ? t.length : 0,\n          h = void 0,\n          _ = void 0,\n          b = void 0,\n          g = void 0,\n          C = void 0;\n\n      if (0 !== c) for (var x = 0; x < c; x++) {\n        var w = i[x],\n            N = w[j],\n            k = v && N ? w._component ? w._component.__key : N.key : null;\n        null != k ? (p++, a[k] = w) : (N || (void 0 !== w.splitText ? !r || w.nodeValue.trim() : r)) && (l[f++] = w);\n      }\n      if (0 !== v) for (var S = 0; S < v; S++) {\n        g = t[S], C = null;\n        var U = g.key;\n        if (null != U) p && void 0 !== a[U] && (C = a[U], a[U] = void 0, p--);else if (u < f) for (h = u; h < f; h++) if (void 0 !== l[h] && s(_ = l[h], g, r)) {\n          C = _, l[h] = void 0, h === f - 1 && f--, h === u && u++;\n          break;\n        }\n        C = m(C, g, n, o), b = i[S], C && C !== e && C !== b && (null == b ? e.appendChild(C) : C === b.nextSibling ? d(b) : e.insertBefore(C, b));\n      }\n      if (p) for (var P in a) void 0 !== a[P] && y(a[P], !1);\n\n      while (u <= f) void 0 !== (C = l[f--]) && y(C, !1);\n    }\n\n    function y(e, t) {\n      var n = e._component;\n      n ? S(n) : (null != e[j] && o(e[j].ref, null), !1 !== t && null != e[j] || d(e), b(e));\n    }\n\n    function b(e) {\n      e = e.lastChild;\n\n      while (e) {\n        var t = e.previousSibling;\n        y(e, !0), e = t;\n      }\n    }\n\n    function g(e, t, n) {\n      var o = void 0;\n\n      for (o in n) t && null != t[o] || null == n[o] || c(e, o, n[o], n[o] = void 0, O);\n\n      for (o in t) \"children\" === o || \"innerHTML\" === o || o in n && t[o] === (\"value\" === o || \"checked\" === o ? e[o] : n[o]) || c(e, o, n[o], n[o] = t[o], O);\n    }\n\n    function C(e, t, n) {\n      var o = void 0,\n          r = G.length;\n      e.prototype && e.prototype.render ? (o = new e(t, n), U.call(o, t, n)) : (o = new U(t, n), o.constructor = e, o.render = x);\n\n      while (r--) if (G[r].constructor === e) return o.nextBase = G[r].nextBase, G.splice(r, 1), o;\n\n      return o;\n    }\n\n    function x(e, t, n) {\n      return this.constructor(e, n);\n    }\n\n    function w(e, t, n, r, l) {\n      e._disable || (e._disable = !0, e.__ref = t.ref, e.__key = t.key, delete t.ref, delete t.key, void 0 === e.constructor.getDerivedStateFromProps && (!e.base || l ? e.componentWillMount && e.componentWillMount() : e.componentWillReceiveProps && e.componentWillReceiveProps(t, r)), r && r !== e.context && (e.prevContext || (e.prevContext = e.context), e.context = r), e.prevProps || (e.prevProps = e.props), e.props = t, e._disable = !1, n !== D && (n !== V && !1 === M.syncComponentUpdates && e.base ? i(e) : N(e, V, l)), o(e.__ref, e));\n    }\n\n    function N(e, t, o, r) {\n      if (!e._disable) {\n        var i = e.props,\n            l = e.state,\n            s = e.context,\n            a = e.prevProps || i,\n            u = e.prevState || l,\n            d = e.prevContext || s,\n            c = e.base,\n            f = e.nextBase,\n            m = c || f,\n            _ = e._component,\n            b = !1,\n            g = d,\n            x = void 0,\n            k = void 0,\n            U = void 0;\n\n        if (e.constructor.getDerivedStateFromProps && (l = n(n({}, l), e.constructor.getDerivedStateFromProps(i, l)), e.state = l), c && (e.props = a, e.state = u, e.context = d, t !== A && e.shouldComponentUpdate && !1 === e.shouldComponentUpdate(i, l, s) ? b = !0 : e.componentWillUpdate && e.componentWillUpdate(i, l, s), e.props = i, e.state = l, e.context = s), e.prevProps = e.prevState = e.prevContext = e.nextBase = null, e._dirty = !1, !b) {\n          x = e.render(i, l, s), e.getChildContext && (s = n(n({}, s), e.getChildContext())), c && e.getSnapshotBeforeUpdate && (g = e.getSnapshotBeforeUpdate(a, u));\n          var P = x && x.nodeName,\n              B = void 0,\n              L = void 0;\n\n          if (\"function\" == typeof P) {\n            var T = p(x);\n            k = _, k && k.constructor === P && T.key == k.__key ? w(k, T, V, s, !1) : (B = k, e._component = k = C(P, T, s), k.nextBase = k.nextBase || f, k._parentComponent = e, w(k, T, D, s, !1), N(k, V, o, !0)), L = k.base;\n          } else U = m, B = _, B && (U = e._component = null), (m || t === V) && (U && (U._component = null), L = h(U, x, s, o || !c, m && m.parentNode, !0));\n\n          if (m && L !== m && k !== _) {\n            var E = m.parentNode;\n            E && L !== E && (E.replaceChild(L, m), B || (m._component = null, y(m, !1)));\n          }\n\n          if (B && S(B), e.base = L, L && !r) {\n            var W = e,\n                R = e;\n\n            while (R = R._parentComponent) (W = R).base = L;\n\n            L._component = W, L._componentConstructor = W.constructor;\n          }\n        }\n\n        !c || o ? F.push(e) : b || (e.componentDidUpdate && e.componentDidUpdate(a, u, g), M.afterUpdate && M.afterUpdate(e));\n\n        while (e._renderCallbacks.length) e._renderCallbacks.pop().call(e);\n\n        I || r || v();\n      }\n    }\n\n    function k(e, t, n, o) {\n      var r = e && e._component,\n          i = r,\n          l = e,\n          s = r && e._componentConstructor === t.nodeName,\n          a = s,\n          u = p(t);\n\n      while (r && !a && (r = r._parentComponent)) a = r.constructor === t.nodeName;\n\n      return r && a && (!o || r._component) ? (w(r, u, R, n, o), e = r.base) : (i && !s && (S(i), e = l = null), r = C(t.nodeName, u, n), e && !r.nextBase && (r.nextBase = e, l = null), w(r, u, V, n, o), e = r.base, l && e !== l && (l._component = null, y(l, !1))), e;\n    }\n\n    function S(e) {\n      M.beforeUnmount && M.beforeUnmount(e);\n      var t = e.base;\n      e._disable = !0, e.componentWillUnmount && e.componentWillUnmount(), e.base = null;\n      var n = e._component;\n      n ? S(n) : t && (null != t[j] && o(t[j].ref, null), e.nextBase = t, d(t), G.push(e), b(t)), o(e.__ref, null);\n    }\n\n    function U(e, t) {\n      this._dirty = !0, this.context = t, this.props = e, this.state = this.state || {}, this._renderCallbacks = [];\n    }\n\n    function P(e, t, n) {\n      return h(n, e, {}, !1, t, !1);\n    }\n\n    function B() {\n      return {};\n    }\n\n    var L = function () {},\n        M = {},\n        T = [],\n        E = [],\n        W = \"function\" == typeof Promise ? Promise.resolve().then.bind(Promise.resolve()) : setTimeout,\n        D = 0,\n        V = 1,\n        A = 2,\n        R = 3,\n        j = \"__preactattr_\",\n        H = /acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,\n        z = [],\n        F = [],\n        I = 0,\n        O = !1,\n        $ = !1,\n        G = [];\n\n    n(U.prototype, {\n      setState: function (e, t) {\n        this.prevState || (this.prevState = this.state), this.state = n(n({}, this.state), \"function\" == typeof e ? e(this.state, this.props) : e), t && this._renderCallbacks.push(t), i(this);\n      },\n      forceUpdate: function (e) {\n        e && this._renderCallbacks.push(e), N(this, A);\n      },\n      render: function () {}\n    }), e.default = {\n      h: t,\n      createElement: t,\n      cloneElement: r,\n      createRef: B,\n      Component: U,\n      render: P,\n      rerender: l,\n      options: M\n    }, e.h = t, e.createElement = t, e.cloneElement = r, e.createRef = B, e.Component = U, e.render = P, e.rerender = l, e.options = M, Object.defineProperty(e, \"__esModule\", {\n      value: !0\n    });\n  });\n});\nvar Preact = unwrapExports(preact_umd_min); // Keep compat layer minimal so we can more easily\n// track the differences\n\nvar AUTOBIND_BLACKLIST = {\n  constructor: 1,\n  render: 1,\n  shouldComponentUpdate: 1,\n  componentWillReceiveProps: 1,\n  componentWillUpdate: 1,\n  componentDidUpdate: 1,\n  componentWillMount: 1,\n  componentDidMount: 1,\n  componentWillUnmount: 1,\n  componentDidUnmount: 1\n};\n\nfunction bindAll(ctx) {\n  for (var i in ctx) {\n    var v = ctx[i];\n\n    if (typeof v === 'function' && !v.__bound && !AUTOBIND_BLACKLIST.hasOwnProperty(i)) {\n      (ctx[i] = v.bind(ctx)).__bound = true;\n    }\n  }\n}\n\nvar React = Preact;\n\nReact.createClass = function (obj) {\n  function F(props, context) {\n    bindAll(this);\n    Preact.Component.call(this, props, context);\n  }\n\n  var p = F.prototype = new Preact.Component(); // copy our skeleton into the prototype:\n\n  for (var i in obj) {\n    p[i] = obj[i];\n  } // restore constructor:\n\n\n  return p.constructor = F;\n};\n\nvar _render = React.render;\n\nReact.render = function (obj, el) {\n  el.innerHTML = null;\n\n  _render(obj, el);\n};\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\n\nvar v, vl, item, action, actionName, defaultValue;\n\nvar extractKey = function (actionName) {\n  if (actionName.slice(0, 3) !== 'set') {\n    throw new Error('Action must be called setX');\n  }\n\n  return actionName.charAt(3).toLowerCase() + actionName.slice(4);\n};\n\nfunction SetterStore(config) {\n  // Extract listeners and method names\n  function SetterStore() {\n    var listeners = {}; // Set defaults\n\n    for (v = 0, vl = config.length; v < vl; v++) {\n      item = config[v];\n      action = item[0];\n      defaultValue = item[1];\n      actionName = action.data.name;\n      this[extractKey(actionName)] = defaultValue; // Configure binding between action and function\n\n      listeners[actionName] = action;\n    }\n\n    this.bindListeners(listeners);\n  } // Define handler functions to set values\n\n\n  for (v = 0, vl = config.length; v < vl; v++) {\n    item = config[v];\n    action = item[0];\n    actionName = action.data.name;\n\n    SetterStore.prototype[actionName] = function (key) {\n      return function (value) {\n        this[key] = value;\n      };\n    }(extractKey(actionName));\n  }\n\n  return SetterStore;\n}\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\n\nvar PlacesStore = SetterStore([[UserActions.setCurrentPlace, {}]]);\nPlacesStore.displayName = 'PlacesStore';\nvar PlacesStore$1 = alt.createStore(PlacesStore);\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nfunction EngineStore() {\n  this.featuresLoaded = false;\n  this.renderedFeatureStatus = {};\n  this.featuresRendered = false;\n  this.bindListeners({\n    renderedFeatureRegister: RenderActions.renderedFeatureRegister,\n    renderedFeatureDisplayed: RenderActions.renderedFeatureDisplayed,\n    setCurrentPlace: UserActions.setCurrentPlace,\n    setFeatures: GeodataActions.setFeatures\n  });\n}\n\nEngineStore.prototype.setCurrentPlace = function () {\n  this.featuresLoaded = false; // Clear out which features have been rendered\n\n  var features = Object.keys(this.renderedFeatureStatus);\n\n  for (var f = 0; f < features.length; f++) {\n    this.renderedFeatureStatus[features[f]] = false;\n  }\n\n  this.featuresRendered = false;\n  this.waitFor(PlacesStore$1);\n  var place = PlacesStore$1.getState().currentPlace;\n  setTimeout(function () {\n    const loc = {\n      angle: 40,\n      distance: 5000,\n      bearing: 0,\n      animationDuration: 0.5,\n      ...place\n    };\n    heightAt(loc, H => {\n      loc.height = H;\n      UserActions.focusOnLocation(loc);\n    });\n  }, 0);\n};\n\nEngineStore.prototype.setFeatures = function () {\n  this.waitFor(OSMAdapter$1);\n  this.featuresLoaded = true;\n}; // Keep track of what features are showing on map, and if they have been\n// loaded into view. This lets us detect when the map is completely loaded\n\n\nEngineStore.prototype.renderedFeatureRegister = function (feature) {\n  this.renderedFeatureStatus[feature] = false;\n  return false;\n};\n\nEngineStore.prototype.renderedFeatureDisplayed = function (feature) {\n  this.renderedFeatureStatus[feature] = true;\n  var features = Object.keys(this.renderedFeatureStatus); // Have we even downloaded them yet?\n\n  this.featuresRendered = this.featuresLoaded; // Check if all features are shown\n\n  for (var f = 0; f < features.length; f++) {\n    var featureDisplayed = this.renderedFeatureStatus[features[f]];\n\n    if (!featureDisplayed) {\n      this.featuresRendered = false;\n    }\n  }\n\n  return this.featuresRendered;\n};\n\nEngineStore.displayName = 'EngineStore';\nalt.createStore(EngineStore);\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nvar EnvironmentStore = SetterStore([[UserActions.setEnvironment, {}]]);\nEnvironmentStore.displayName = 'EnvironmentStore';\nvar EnvironmentStore$1 = alt.createStore(EnvironmentStore);\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nvar envParams = {};\nvar distance = 400000; // Sun distance\n\nenvParams.update = function () {\n  // Sky\n  skyUniforms.turbidity.value = envParams.turbidity;\n  skyUniforms.reileigh.value = envParams.reileigh;\n  skyUniforms.luminance.value = envParams.luminance;\n  skyUniforms.mieCoefficient.value = envParams.mieCoefficient;\n  skyUniforms.mieDirectionalG.value = envParams.mieDirectionalG;\n  var theta = Math.PI * (envParams.inclination - 0.5);\n  var phi = 2 * Math.PI * (envParams.azimuth - 0.5);\n  skyUniforms.sunPosition.value.set(distance * Math.sin(phi) * Math.cos(theta), distance * Math.cos(phi) * Math.cos(theta), distance * Math.sin(theta));\n  skyUniforms.update();\n  fogUniforms.update();\n  fogUniforms.uFogDropoff.value = envParams.fogDropoff;\n  fogUniforms.uFogIntensity.value = envParams.fogIntensity;\n  tonemapUniforms.exposureBias.value = envParams.exposureBias;\n  tonemapUniforms.whitePoint.value = envParams.whitePoint;\n  tonemapUniforms.update();\n};\n\nenvParams.set = function (params, duration) {\n  if (duration === 0) {\n    // Skip interpolation\n    Object.assign(envParams, params);\n    envParams.update();\n    setTimeout(function () {\n      RenderActions.needsRender({\n        env: true\n      });\n    });\n  } else {\n    var oldParams = lodash_min.clone(envParams);\n    var newParams = lodash_min.clone(params);\n    StoreUtils.transition(function (params) {\n      Object.assign(envParams, params);\n      envParams.update();\n      setTimeout(function () {\n        RenderActions.needsRender({\n          env: true\n        });\n      });\n    }, oldParams, newParams, {\n      duration: duration,\n      doNotCancel: true,\n      lerp: StoreUtils.lerp.params,\n      onComplete: function () {\n        RenderActions.needsRender({\n          env: true\n        });\n      }\n    });\n  }\n}; // Sync up to EnvironmentStore\n// TODO, perhaps cleaner to rename this to some sort of Transition class?\n\n\nEnvironmentStore$1.listen(function (state) {\n  var env = state.environment;\n  envParams.set(env.parameters, env.animationDuration);\n});\nPlacesStore$1.listen(function (state) {\n  var place = state.currentPlace;\n\n  if (place.env) {\n    envParams.set(place.env, 0);\n  }\n});\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nvar CurrentLocation = function () {\n  THREE.Object3D.call(this);\n  this.sphere = new THREE.Mesh(new THREE.SphereBufferGeometry(50, 32, 15), material.beacon);\n  this.add(this.sphere);\n  this.visible = false;\n  scene.add(this);\n  CurrentLocationStore$1.listen(this.update.bind(this));\n  RenderStore$1.listen(this.tick.bind(this));\n};\n\nCurrentLocation.prototype = Object.create(THREE.Object3D.prototype);\n\nCurrentLocation.prototype.update = function () {\n  var state = CurrentLocationStore$1.getState();\n\n  if (!state.longitude || !state.latitude || state.tooFar) {\n    this.visible = false;\n    return;\n  } else {\n    this.visible = true;\n  }\n\n  var latest = geoproject.project([state.longitude, state.latitude]);\n  this.position.copy(latest);\n  this.sphere.material.uniforms.uAccuracy.value = state.accuracy || 0;\n};\n\nCurrentLocation.prototype.tick = function (state) {\n  this.sphere.material.uniforms.uTime.value = state.clock.elapsedTime;\n};\n\nnew CurrentLocation();\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// Helper Geometry for merging together buffer geometries\n\nvar BufferMergeGeometry = function (vertexCount, attributes, tag) {\n  BufferGeometry.call(this); // Some defaults for now, later maybe split up into smaller geometries? then can use 16bit uint index?\n\n  vertexCount = vertexCount || 1024 * 1024;\n  attributes = attributes || ['position'];\n  this.type = 'BufferMergeGeometry';\n  this.indices = [];\n  var self = this;\n  var buffer;\n\n  for (var a = 0; a < attributes.length; a++) {\n    var attribute = attributes[a]; // For now assume vec3\n    // TODO investigate if we can switch to Int16 here?\n    // TODO or even Int8 for normals\n    //var buffer = new Int16Array( 3 * vertexCount );\n\n    if (attribute === 'normal') {\n      buffer = new Int8Array(3 * vertexCount);\n      self.setAttribute(attribute, new BufferAttribute(buffer, 3, true));\n    } else if (attribute === 'tangent') {\n      buffer = new Int8Array(4 * vertexCount);\n      self.setAttribute(attribute, new BufferAttribute(buffer, 4, true));\n    } else if (attribute === 'color') {\n      buffer = new Uint8Array(4 * vertexCount);\n      self.setAttribute(attribute, new BufferAttribute(buffer, 4, true));\n    } else {\n      buffer = new Float32Array(3 * vertexCount);\n      self.setAttribute(attribute, new BufferAttribute(buffer, 3));\n    }\n  }\n\n  if (tag) {\n    // For GPU picking\n    buffer = new Uint8Array(3 * vertexCount);\n    self.setAttribute('tag', new BufferAttribute(buffer, 3, true));\n  }\n\n  this.attributeOffset = 0;\n  this.indexOffset = 0;\n};\n\nBufferMergeGeometry.prototype = Object.create(BufferGeometry.prototype);\n\nBufferMergeGeometry.prototype._mergeIndices = function (geometry) {\n  // Copy across indices, offseting by previous additions\n  var dstArray = this.indices;\n  var srcArray = geometry.index.array;\n  var count = geometry.index.array.length;\n\n  for (var i = 0, j = this.indexOffset; i < count; i++, j++) {\n    dstArray[j] = this.attributeOffset + srcArray[i];\n  }\n\n  this.indexOffset += count;\n}; // Expects to merge in BufferGeometry\n\n\nBufferMergeGeometry.prototype.merge = function (geometry, tag) {\n  this._mergeIndices(geometry);\n\n  var i, j, il, dstArray, srcArray, count; // Construct tag value\n\n  var color = new Color(tag);\n  color = new Uint8Array([255 * color.r, 255 * color.g, 255 * color.b]); // Copy across attributes\n\n  var self = this;\n  var attrKeys = Object.keys(this.attributes);\n\n  for (var a = 0; a < attrKeys.length; a++) {\n    var key = attrKeys[a];\n    var value = this.attributes[key];\n    dstArray = value.array;\n\n    if (key === 'tag' && tag) {\n      // Fill array with color\n      for (i = 0, j = 3 * self.attributeOffset, il = 3 * count; i < il; i += 3, j += 3) {\n        dstArray.set(color, j);\n      }\n    } else if (geometry.attributes[key]) {\n      srcArray = geometry.attributes[key].array;\n      count = geometry.attributes[key].count;\n      dstArray.set(srcArray, value.itemSize * self.attributeOffset);\n    }\n  }\n\n  this.attributeOffset += count;\n  return this;\n}; // How many more vertices we can accept\n\n\nBufferMergeGeometry.prototype.capacity = function () {\n  return this.attributes.position.count - this.attributeOffset;\n}; // When constructing of this geometry is complete, freeze it\n// by capping the index array\n\n\nBufferMergeGeometry.prototype.freeze = function () {\n  var TypeArray = this.attributes.position.count > 65535 ? Uint32Array : Uint16Array;\n  var index = new TypeArray(this.indices);\n  this.setIndex(new BufferAttribute(index, 1)); // Clip attribute arrays, massively saving on memory\n  // TODO, could we just create the buffer the correct size at the beginning?\n\n  var attrKeys = Object.keys(this.attributes);\n  var key, value, end;\n\n  for (var a = 0; a < attrKeys.length; a++) {\n    key = attrKeys[a];\n    value = this.attributes[key];\n    end = value.itemSize * this.attributeOffset;\n    value.set(value.array.subarray(0, end));\n    this.setAttribute(key, new BufferAttribute(value.array.subarray(0, end), value.itemSize, value.normalized));\n  }\n\n  return this;\n};\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n *\n * This file incorporates work covered by the following copyright and\n * permission notice:\n *\n *   The MIT License\n *\n *   Copyright © 2010-2020 three.js authors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in\n *   all copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *   THE SOFTWARE.\n */\n// To avoid creating garbage when calculating catmull, re-use variables\n\n\nvar v0, v1, t2, t3, A$1, B$1;\nvar catmullGenerator = {\n  position: 0,\n  tangent: 0,\n  generate: function (p0, p1, p2, p3, t, createTangent) {\n    v0 = (p2 - p0) * 0.5;\n    v1 = (p3 - p1) * 0.5;\n    t2 = t * t;\n    t3 = t * t2;\n    A$1 = 2 * p1 - 2 * p2 + v0 + v1;\n    B$1 = -3 * p1 + 3 * p2 - 2 * v0 - v1;\n    catmullGenerator.position = A$1 * t3 + B$1 * t2 + v0 * t + p1;\n\n    if (createTangent) {\n      catmullGenerator.tangent = 3 * A$1 * t2 + 2 * B$1 * t + v0;\n    }\n  }\n};\nvar points, point, intPoint, weight, p0, p1$1, p2$1, p3;\nvar vector = new THREE.Vector3(),\n    color = new Color$1(),\n    position = new THREE.Vector3(),\n    tangent = new THREE.Vector3();\nvar tmp$1 = {\n  color: color,\n  position: position,\n  tangent: tangent\n};\n\nvar LineCurve$1 = function (points, colors) {\n  THREE.Curve.call(this);\n  this.hDelta = 3;\n  this.points = points === undefined ? [] : points; // Optionally pass a set of colors to map to each point\n\n  if (colors) {\n    this.colors = colors.map(function (c) {\n      return new Color$1(c);\n    });\n  } else {\n    this.colors = undefined;\n  }\n};\n\nLineCurve$1.prototype = Object.create(THREE.Curve.prototype);\n\nLineCurve$1.prototype.getPoint = function (t) {\n  points = this.points;\n  point = (points.length - 1) * t;\n  intPoint = Math.floor(point);\n  weight = point - intPoint;\n  p0 = points[intPoint === 0 ? intPoint : intPoint - 1];\n  p1$1 = points[intPoint];\n  p2$1 = points[intPoint > points.length - 2 ? points.length - 1 : intPoint + 1];\n  p3 = points[intPoint > points.length - 3 ? points.length - 1 : intPoint + 2]; // TODO should avoid new creation\n\n  vector = new THREE.Vector3();\n  catmullGenerator.generate(p0.x, p1$1.x, p2$1.x, p3.x, weight);\n  vector.x = catmullGenerator.position;\n  catmullGenerator.generate(p0.y, p1$1.y, p2$1.y, p3.y, weight);\n  vector.y = catmullGenerator.position;\n  vector.z = this.hDelta;\n  return vector;\n}; // Replace with derivative?\n\n\nLineCurve$1.prototype.getTangentAt = function (u) {\n  var delta = 0.00001;\n  var u1 = u - delta;\n  var u2 = u + delta; // Capping in case of danger\n\n  if (u1 < 0) {\n    u1 = 0;\n  }\n\n  if (u2 > 1) {\n    u2 = 1;\n  }\n\n  var pt1 = this.getPointAt(u1);\n  var pt2 = this.getPointAt(u2);\n  var vec = pt2.clone().sub(pt1);\n  return vec.normalize();\n}; // Calculate both position and tangent together as it is\n// more efficient and we need both anyway\n\n\nLineCurve$1.prototype.getPointAndTangentAt = function (u) {\n  var t = this.getUtoTmapping(u);\n  return this.getPointAndTangent(t);\n};\n\nLineCurve$1.prototype.getPointAndTangent = function (t) {\n  points = this.points;\n  point = (points.length - 1) * t;\n  intPoint = Math.floor(point);\n  weight = point - intPoint;\n  p0 = points[intPoint === 0 ? intPoint : intPoint - 1];\n  p1$1 = points[intPoint];\n  p2$1 = points[intPoint > points.length - 2 ? points.length - 1 : intPoint + 1];\n  p3 = points[intPoint > points.length - 3 ? points.length - 1 : intPoint + 2]; // Potentially expensive, should look at optimizing. E.g. store curve\n  // in st coordinate space?\n\n  catmullGenerator.generate(p0.x, p1$1.x, p2$1.x, p3.x, weight, true);\n  position.x = catmullGenerator.position;\n  tangent.x = catmullGenerator.tangent;\n  catmullGenerator.generate(p0.y, p1$1.y, p2$1.y, p3.y, weight, true);\n  position.y = catmullGenerator.position;\n  tangent.y = catmullGenerator.tangent;\n  position.z = this.hDelta;\n  tangent.z = 0; // As position.z is constant, this is always 0\n\n  tangent.normalize();\n\n  if (this.colors) {\n    p1$1 = this.colors[intPoint];\n    p2$1 = this.colors[intPoint > points.length - 2 ? points.length - 1 : intPoint + 1];\n    color.set(p1$1).lerp(p2$1, weight);\n  }\n\n  return tmp$1;\n};\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n *\n * This file incorporates work covered by the following copyright and\n * permission notice:\n *\n *   The MIT License\n *\n *   Copyright © 2010-2020 three.js authors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in\n *   all copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *   THE SOFTWARE.\n */\n// So we can better optimize, hard code radial segments and thickness\n// Only support \"flat\" tubes. This works well for roads and rivers\n// For lines the shader aligns the triangles in screen-space\n// anyway, to keep a constant on-screen width\n\n\nvar radialSegments = 2;\nvar radialDir = new Array(radialSegments);\n\nfor (var r = 0; r < radialSegments; r++) {\n  radialDir[r] = 1 - 2 * r;\n}\n\nvar LineGeometry = function (feature, segments, options, attributes) {\n  this.type = 'LineGeometry';\n  segments = segments || 64;\n  attributes = attributes || ['position', 'normal', 'tangent'];\n  var color,\n      tangent,\n      numpoints = segments + 1,\n      u,\n      tmp,\n      i,\n      j,\n      p,\n      ip,\n      jp,\n      a,\n      b,\n      c,\n      d; // Only generate the attributes we need\n\n  var createColors = attributes.indexOf('color') !== -1;\n  var createNormals = attributes.indexOf('normal') !== -1;\n  var createTangents = attributes.indexOf('tangent') !== -1; // Only create buffers for attributes we need\n\n  var positionBuffer, colorBuffer, normalBuffer, tangentBuffer; // Alway create position buffer\n\n  positionBuffer = new Float32Array(3 * numpoints * radialSegments);\n  this.attributes = {\n    position: new THREE.BufferAttribute(positionBuffer, 3)\n  };\n\n  if (createColors) {\n    colorBuffer = new Uint8Array(4 * numpoints * radialSegments);\n    this.attributes.color = new THREE.BufferAttribute(colorBuffer, 4, false);\n  }\n\n  if (createNormals) {\n    normalBuffer = new Int8Array(3 * numpoints * radialSegments);\n    this.attributes.normal = new THREE.BufferAttribute(normalBuffer, 3, false);\n  }\n\n  if (createTangents) {\n    tangentBuffer = new Int8Array(4 * numpoints * radialSegments);\n    this.attributes.tangent = new THREE.BufferAttribute(tangentBuffer, 4, false);\n  }\n\n  var offset = 0;\n  var tangentDir = 0; // consruct the grid\n\n  var grid = new Array(numpoints);\n\n  for (i = 0; i < numpoints; i++) {\n    grid[i] = [];\n    u = i / segments; // Get attribute value at this point\n\n    tmp = feature.curve.getPointAndTangentAt(u);\n    tangent = tmp.tangent; // TODO get color from feature\n\n    color = tmp.color;\n    p = i * radialSegments;\n\n    for (j = 0; j < radialSegments; j++) {\n      var offset4 = 4 * offset / 3;\n      grid[i][j] = p + j;\n      positionBuffer[offset] = tmp.position.x;\n      positionBuffer[offset + 1] = tmp.position.y;\n      positionBuffer[offset + 2] = tmp.position.z; // Some objects do not care about their height (they read height map)\n      // but need direction of flow. Use spare position z direction to pass\n\n      if (options.writeTangent) {\n        positionBuffer[offset + 2] = Math.atan2(tangent.y, tangent.x);\n      }\n\n      if (createColors) {\n        colorBuffer[offset4] = 255 * color.r;\n        colorBuffer[offset4 + 1] = 255 * color.g;\n        colorBuffer[offset4 + 2] = 255 * color.b;\n        colorBuffer[offset4 + 3] = 255 * color.a;\n      }\n\n      if (createNormals) {\n        // Cross product of tangent with (0,0,1)\n        normalBuffer[offset] = 127 * radialDir[j] * tangent.y;\n        normalBuffer[offset + 1] = -127 * radialDir[j] * tangent.x;\n        normalBuffer[offset + 2] = 0.0;\n      }\n\n      if (createTangents) {\n        // TODO, perhaps would be quicker to use set() on Float32Array,\n        // but only would make sense if lineCurve etc were modified\n        tangentDir = 127 - 254 * j;\n        tangentBuffer[offset4] = tangentDir * tangent.x;\n        tangentBuffer[offset4 + 1] = tangentDir * tangent.y;\n        tangentBuffer[offset4 + 2] = tangentDir * tangent.z;\n        tangentBuffer[offset4 + 3] = 0.5 * tangentDir;\n      }\n\n      offset += 3;\n    }\n  } // construct the mesh\n\n\n  var n = segments * radialSegments * 6;\n  var indices = positionBuffer.length / 3 > 65535 ? new Uint32Array(n) : new Uint16Array(n);\n  this.index = new THREE.BufferAttribute(indices, 1);\n  offset = 0;\n\n  for (i = 0; i < segments; i++) {\n    ip = i + 1;\n\n    for (j = 0; j < radialSegments; j++) {\n      jp = (j + 1) % radialSegments;\n      a = grid[i][j]; // *** NOT NECESSARILY PLANAR ! ***\n\n      b = grid[ip][j];\n      c = grid[ip][jp];\n      d = grid[i][jp];\n      indices[offset] = a;\n      indices[offset + 1] = b;\n      indices[offset + 2] = d;\n      indices[offset + 3] = b;\n      indices[offset + 4] = c;\n      indices[offset + 5] = d;\n      offset += 6;\n    }\n  }\n};\n\nLineGeometry.prototype.constructor = LineGeometry;\n\nLineGeometry.prototype.dispose = function () {\n  this.index = null;\n  delete this.attributes;\n};\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// Helper to distribute work load across animation frames\n// Used for splitting out things like parsing lines\n// Typical startup involves 75 step invocations leading to\n// ~2000 process invocations\n\n\nvar timeSource = performance || Date;\nvar WorkQueue = {\n  taskCount: 0,\n  // Process items for up to 30ms (split across all tasks)\n  workTimeout: 30,\n  // Maintain global list of onComplete handlers that are\n  // ready to be fired. If a task queue has completed\n  // processing, these should be fired at highest priority,\n  // before any more processing of other queues is done.\n  // Fired these first prevents other queues starving the\n  // time given to onComplete handlers\n  completedTasks: [],\n  // Params\n  // queue: list of items to process\n  // process: function to invoke on each item in `queue`\n  // onComplete: function called when processing complete\n  createTask: function (queue, process, onComplete, highPriority) {\n    if (queue.length === 0) {\n      enqueue(onComplete);\n      return;\n    }\n\n    WorkQueue.taskCount++;\n    var i = 0,\n        item,\n        now,\n        task,\n        globalTimeout,\n        localTimeout;\n    var complete = false;\n\n    var step = function (state) {\n      // Bail out instantly if we have no time left\n      now = timeSource.now();\n      globalTimeout = WorkQueue.workTimeout + state.time;\n\n      if (now > globalTimeout) {\n        return;\n      } // If any task is complete, then handle its\n      // onComplete before anything else\n      // (but do not trigger if we have less than\n      // 10ms\n\n\n      if (WorkQueue.completedTasks.length > 0 && globalTimeout - now > 10) {\n        task = WorkQueue.completedTasks.pop();\n        AnimationStore$1.unlisten(task.step);\n        WorkQueue.taskCount--;\n        task.onComplete();\n      } // Now process our queue until our time is up\n\n\n      now = timeSource.now();\n\n      if (highPriority) {\n        localTimeout = globalTimeout;\n      } else {\n        localTimeout = WorkQueue.workTimeout / WorkQueue.taskCount + now;\n      }\n\n      while (now < globalTimeout && // Cap all tasks running time\n      now < localTimeout && ( // Cap this task's running time\n      item = queue[i++])) {\n        process(item);\n        now = timeSource.now();\n      } // Once queue is processed, mark this task as completed,\n      // but do not call onComplete yet as this can take a while.\n      // onComplete will instead be called on the next tick if we\n      // have enough time\n\n\n      if (i >= queue.length && !complete) {\n        complete = true;\n        WorkQueue.completedTasks.unshift({\n          step: step,\n          onComplete: onComplete\n        });\n      }\n    };\n\n    AnimationStore$1.listen(step);\n  }\n};\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nvar LinesBase = function () {\n  THREE.Object3D.call(this);\n  this.features = []; // Base data defined in terms of lat/lon\n\n  scene.add(this);\n  this.maxIndex = 65535;\n  this.projectTime = 0;\n  this.curveTime = 0;\n  this.geomTime = 0;\n  this.mergeTime = 0; // Prevent recalculation of matrix, as we are static\n\n  this.matrixAutoUpdate = false;\n\n  this.updateMatrixWorld = function () {};\n\n  this.parent = null; // To let us have lines in two scenes, remove first scene as parent\n  // Set to true when drawing geometry that will have constant width on-screen,\n  // like an overlay, rather than a width in world space (like a river etc)\n  // This affects what attributes are generated\n\n  this.constantWidth = false;\n};\n\nLinesBase.prototype = Object.create(THREE.Object3D.prototype);\n\nLinesBase.prototype.onNewData = function (state) {\n  this.features = state.data;\n  this.update();\n}; // Should this be broken up or run in worker?\n\n\nLinesBase.prototype.remove = function () {\n  // Remove old meshes\n  this.children.forEach(function (c) {\n    c.geometry.dispose();\n  });\n  this.children = [];\n}; // Should this be broken up or run in worker?\n\n\nLinesBase.prototype.update = function () {\n  var self = this;\n  this.remove();\n\n  if (this.constantWidth) {\n    this.bufferGeomAttributes = ['position', 'tangent'];\n  } else {\n    this.bufferGeomAttributes = ['position'];\n  } // Keep an array of buffer geometries we'll merge into, keyed of the material.uuid\n  // This allows us to have lines of different color merged\n\n\n  this.bufferGeoms = {};\n  this.materials = {}; // Add lines gradually, using work queue, to not block main thread\n\n  this.curveTime = 0;\n  this.projectTime = 0;\n  this.geomTime = 0;\n  this.mergeTime = 0;\n  log$1('Starting processing', self.name);\n  WorkQueue.createTask(self.features, self.addMesh.bind(self), // Invoked on each item in queue\n  function () {\n    // Finish up\n    var startTime = track$1.now();\n    lodash_min.each(self.bufferGeoms, function (bufferGeom, uuid) {\n      mesh = new THREE.Mesh(bufferGeom.freeze(), self.materials[uuid]);\n      mesh.frustumCulled = false; // TODO is this too aggressive??\n\n      self.add(mesh);\n    });\n    self.constructTime = track$1.now() - startTime; // Notify that we have parsed new lines\n\n    log$1('Parsed', self.name);\n    track$1.timing(self.name, 'project', null, self.projectTime);\n    track$1.timing(self.name, 'curve', null, self.curveTime);\n    track$1.timing(self.name, 'geom', null, self.geomTime);\n    track$1.timing(self.name, 'merge', null, self.mergeTime);\n    track$1.timing(self.name, 'construct', null, self.constructTime);\n    log$1('instances:', self.children.length);\n    RenderActions.renderedFeatureDisplayed(self.name);\n  });\n};\n\nvar mat, mesh, color$1;\n\nLinesBase.prototype.createGeometry = function (feature) {\n  // Recalculate curves (as elevation data has changed)\n  var startTime = track$1.now();\n  var projected = geoproject.vectorizeFeature(feature);\n  var time = track$1.now() - startTime;\n  this.projectTime += time;\n  startTime = track$1.now();\n  var colors;\n\n  if (feature.geometry.colors) {\n    if (feature.geometry.coordinates.length !== feature.geometry.colors.length) {\n      console.error('colors array for feature must have same length as positions array');\n    } else {\n      colors = feature.geometry.colors;\n      feature.perVertexColors = true;\n    }\n  }\n\n  var curve = new LineCurve$1(projected, colors);\n  feature.curve = curve;\n  time = track$1.now() - startTime;\n  this.curveTime += time;\n  startTime = track$1.now();\n  feature.thickness = FeatureUtils.thickness(feature);\n  curve.hDelta = 3 + 0.5 * feature.thickness; // We need the curve length, but this is expensive to calculate,\n  // as a rough estimate is fine here, reduce the number of arc\n  // divisions to get the estimate, then update once we have resolution required\n  // This leads to a big speed boost for shorter curves, as the\n  // default value is 200, which is far too high for a short curve\n\n  feature.curve.arcLengthDivisions = 10;\n  var length = feature.curve.getLength(); // Resolution determines how many portions the curve is made up of\n  // use a number of heuristics to make sure we get nice looking curves\n  // Note that points will be equally spaced along curve, so if source data\n  // has fine detail, this may be skipped\n\n  var resolution = Math.round(length / 25);\n  resolution = Math.max(resolution, 2 * feature.geometry.coordinates.length);\n  resolution = resolution < 10 ? 10 : resolution;\n  feature.curve.arcLengthDivisions = resolution;\n  feature.curve.needsUpdate = true;\n  var options = {\n    writeTangent: this.writeTangent\n  };\n\n  if (!this.constantWidth) {\n    options.thickness = feature.thickness;\n  }\n\n  feature.geom = new LineGeometry(feature, resolution, options, feature.perVertexColors ? this.bufferGeomAttributes.concat('color') : this.bufferGeomAttributes);\n  time = track$1.now() - startTime;\n  this.geomTime += time; // Now we have the 3D geom, dump the geojson to conserve memory\n\n  delete feature.geometry.colors; // Deleting coordinates breaks CameraStore.focusOnFeature. Simple\n  // hack is just to keep the first coordinate (even if a big ugly)\n\n  feature.geometry.coordinates = [feature.geometry.coordinates[0]];\n};\n\nLinesBase.prototype.addMesh = function (feature) {\n  if (feature.geom === undefined) {\n    this.createGeometry(feature);\n  } // Get material for this line\n\n\n  color$1 = feature.perVertexColors ? null : FeatureUtils.color(feature); // Material function is memoized off first parameter, so pass\n  // null where we have per-vertex colors to create material\n  // just for that\n\n  mat = this.material(color$1, feature.thickness, feature.properties ? feature.properties.outlineColor : undefined); // Stash away used materials, need them when combining merged geometries\n\n  if (!this.materials[mat.uuid]) {\n    this.materials[mat.uuid] = mat;\n  }\n\n  var startTime = track$1.now();\n  var count = feature.geom.attributes.position.count;\n  var attributes = feature.perVertexColors ? this.bufferGeomAttributes.concat('color') : this.bufferGeomAttributes;\n\n  if (count > this.maxIndex) {\n    // Geometry too large for combining, just add directly\n    // TODO not clear why it is necessary to convert to BufferMergeGeometry???\n    var tmpGeom = new BufferMergeGeometry(count, attributes, !!feature.tag);\n    tmpGeom.merge(feature.geom, feature.tag);\n    mesh = new THREE.Mesh(tmpGeom.freeze(), mat);\n    this.add(mesh);\n    tmpGeom.dispose();\n  } else {\n    // Combine by merging into larger geometry\n    // Retrieve geometry for this material\n    if (!this.bufferGeoms[mat.uuid]) {\n      // Lazily create per material geometries\n      this.bufferGeoms[mat.uuid] = new BufferMergeGeometry(this.maxIndex, attributes, !!feature.tag);\n    }\n\n    var bufferGeom = this.bufferGeoms[mat.uuid];\n\n    if (count > bufferGeom.capacity()) {\n      // Have filled current buffer enough, add to scene\n      mesh = new THREE.Mesh(bufferGeom.freeze(), mat);\n      mesh.frustumCulled = false; // TODO is this too aggressive??\n\n      this.add(mesh); // Split to next geom\n\n      this.bufferGeoms[mat.uuid] = new BufferMergeGeometry(this.maxIndex, attributes, !!feature.tag);\n      bufferGeom = this.bufferGeoms[mat.uuid];\n    } // Finally actually perform merge\n\n\n    bufferGeom.merge(feature.geom, feature.tag);\n  }\n\n  var time = track$1.now() - startTime;\n  this.mergeTime += time;\n  RenderActions.featureCreated(feature);\n};\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\n\nvar Lines = function () {\n  LinesBase.call(this);\n  LineData$1.listen(this.onNewData.bind(this));\n  scene.pickerScene.add(this);\n  this.material = material.line;\n  this.name = 'lines';\n  RenderActions.renderedFeatureRegister(this.name);\n  this.constantWidth = true;\n};\n\nLines.prototype = Object.create(LinesBase.prototype);\nnew Lines();\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nvar mapping = {\n  'top-left': {\n    x: 1,\n    y: -1\n  },\n  'top': {\n    x: 0,\n    y: -1\n  },\n  'top-right': {\n    x: -1,\n    y: -1\n  },\n  'left': {\n    x: 1,\n    y: 0\n  },\n  'center': {\n    x: 0,\n    y: 0\n  },\n  'right': {\n    x: -1,\n    y: 0\n  },\n  'bottom-left': {\n    x: 1,\n    y: 1\n  },\n  'bottom': {\n    x: 0,\n    y: 1\n  },\n  'bottom-right': {\n    x: -1,\n    y: 1\n  }\n};\n\nfunction anchorForName(name) {\n  if (name !== undefined && !isNaN(name.x) && !isNaN(name.y)) {\n    // If we just have coordinates, e.g. {x: 0.5, y: 0.1} just return\n    return name;\n  }\n\n  return mapping[name] || mapping.bottom;\n}\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// Extract the glpyh for a FontAwesome icon\n\n\nvar iconElement = document.createElement('i');\nvar wrapper = document.createElement('div');\nwrapper.style.position = 'absolute';\nwrapper.style.left = '-999px';\nwrapper.style.top = '-999px';\nwrapper.appendChild(iconElement);\nwrapper.style.display = 'none';\ndocument.body.appendChild(wrapper);\nvar glyph;\nvar glyphForIcon = lodash_min.memoize(function (icon) {\n  wrapper.style.display = 'block';\n  iconElement.className = 'fa fa-' + icon;\n  glyph = window.getComputedStyle(iconElement, ':before').getPropertyValue('content');\n  glyph = glyph.replace(/['\"]/g, '');\n  wrapper.style.display = 'none';\n  return glyph;\n});\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nvar uiFont = '-apple-system, BlinkMacSystemFont, \"Segoe UI\", \"Roboto\", \"Oxygen\", \"Ubuntu\", \"Cantarell\", \"Fira Sans\", \"Droid Sans\", \"Helvetica Neue\", sans-serif';\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// Polyfill for IE\n\nMath.log2 = Math.log2 || function (x) {\n  return Math.log(x) * Math.LOG2E;\n};\n/**\n * Texture atlas class\n * @param size width of texture to render into\n * @param spriteSize width of each sprite rendered into atlas\n * @param padding padding either side of each sprite\n */\n\n\nvar Atlas = function (size, spriteSize, padding) {\n  // Match display density when drawing fonts\n  // Note if the user zooms in the web page, this will change,\n  // but for now do not worry about this\n  this.pixelRatio = window.devicePixelRatio;\n\n  if (!webgl.depthTexture) {\n    this.pixelRatio = 1.0;\n  }\n\n  this.pixelRatio = Math.min(this.pixelRatio, 4);\n  this.size = (size || 512) * this.pixelRatio; // Make sure we use power of two\n\n  this.size = Math.pow(2, Math.ceil(Math.log2(this.size)));\n  this.width = this.size;\n  this.height = 2 * this.size;\n  this.spriteSize = 40;\n  this.monochromeBegin = 0.25 * this.height;\n  this.queue = []; // Add spacing between slots to ensure we don't bleed\n  // sprites into each other\n\n  this.padding = padding || 0; // Stores object transform mapping\n\n  this.mapping = new Map(); // Scratch canvas, we'll use for writing,\n  // before copying to the texture. This allows us\n  // to write text into a single channel\n  // TODO should we share the scratch canvas with e.g. geoutils?\n\n  this.scratchCanvas = document.createElement('canvas');\n  this.scratchCanvas.width = this.width;\n  this.scratchCanvas.height = this.height;\n  this.scratch = this.scratchCanvas.getContext('2d');\n  this.scratch.textBaseline = 'middle';\n  this.scratch.fillStyle = 'rgba(255, 255, 255, 1.0)'; // Texture we'll copy our rasterized images to\n\n  this.texture = new THREE.Texture(this.scratchCanvas);\n  this.texture.wrapS = THREE.RepeatWrapping;\n  this.texture.wrapT = THREE.RepeatWrapping;\n  this.texture.minFilter = THREE.NearestFilter;\n  this.texture.magFilter = THREE.NearestFilter;\n  this.texture.generateMipmaps = false;\n  this.texture.flipY = false;\n  this.clear(); // Debug, view canvas\n\n  var self = this;\n\n  window.showAtlas = function () {\n    self.scratchCanvas.style.position = 'absolute';\n    self.scratchCanvas.style.width = '512px';\n    self.scratchCanvas.style.height = '512px';\n    self.scratchCanvas.style['pointer-events'] = 'none';\n    self.scratchCanvas.style.opacity = '0.9';\n    document.children[0].children[1].appendChild(self.scratchCanvas);\n  };\n\n  this.defaultFontSize = 11;\n  this.checkFontAvailable();\n};\n\nvar checkCount = 30;\n\nAtlas.prototype.checkFontAvailable = function () {\n  if (!this.testCanvas) {\n    this.testCanvas = document.createElement('canvas');\n    this.testCanvas.width = 16;\n    this.testCanvas.height = 16;\n  }\n\n  var ctx = this.testCanvas.getContext('2d'); // Draw square character for font-awesome to detect\n  // if the font is loaded\n\n  ctx.font = '32px FontAwesome';\n  ctx.fillStyle = 'rgba(255, 255, 255, 1)';\n  var text = glyphForIcon('minus');\n  ctx.fillText(text, 0, 16);\n  var fontAvailable = ctx.getImageData(15, 0, 1, 1).data[0] > 250;\n\n  if (fontAvailable) {\n    RenderActions.fontsLoaded();\n  } else {\n    var self = this;\n    setTimeout(function () {\n      self.checkFontAvailable();\n      checkCount--;\n\n      if (checkCount === 0) {\n        console.error('FontAwesome has not loaded');\n        console.error('Please make sure you are including the relevant CSS in the <head> element, e.g.');\n        console.error('<link href=\"https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css\" rel=\"stylesheet\">');\n      }\n    }, 333);\n  }\n};\n\nAtlas.prototype.checkContainerFont = function () {\n  // Setup text font (extracting what is applied by CSS)\n  var c = document.getElementById('container');\n  var containerFont = c ? document.defaultView.getComputedStyle(c)['font-family'] : null;\n  containerFont = containerFont || '';\n  this.font = 'FontAwesome, ' + containerFont + \", \" + uiFont;\n  this.setFontSize(this.defaultFontSize);\n};\n\nAtlas.prototype.setFontSize = function (size) {\n  if (size === undefined) {\n    size = this.defaultFontSize;\n  }\n\n  if (size === this.fontSize) {\n    return;\n  }\n\n  if (isNaN(size)) {\n    console.error('Invalid font size');\n    return;\n  }\n\n  this.fontSize = size;\n  var font = this.pixelRatio * Math.round(size) + 'px ';\n  font += this.font;\n  this.scratch.font = font;\n  this.textHeight = this.getTextHeight();\n};\n\nAtlas.prototype.getTextHeight = function () {\n  // Estimate text height. Not perfect, but close enough for now\n  // TODO, fix\n  return 1.3 * this.scratch.measureText('M').width;\n}; // Fill a slot in atlas by downloading an image from a given URL\n\n\nAtlas.prototype.addImage = function (url, width, height) {\n  var key = url;\n\n  if (width !== undefined) {\n    key += '#_#' + width;\n  }\n\n  if (height !== undefined) {\n    key += '#_#' + height;\n  }\n\n  var transform = this.mapping.get(key);\n\n  if (transform !== undefined) {\n    // Already added, just return the location in atlas\n    return transform;\n  }\n\n  transform = this.createTransform({\n    width: this.pixelRatio * (width !== undefined ? width : this.spriteSize),\n    height: this.pixelRatio * (height !== undefined ? height : this.spriteSize)\n  });\n  this.mapping.set(key, transform); // Do not draw if we have a zero size area\n\n  if (transform.z * transform.w === 0) {\n    return transform;\n  }\n\n  var imageLoader = new THREE.ImageLoader();\n  imageLoader.setCrossOrigin('Anonymous');\n  var self = this;\n  imageLoader.load(url, function (image) {\n    // Draw image\n    var t = transform.clone();\n    t.x *= self.width;\n    t.y *= self.height;\n    t.z *= self.width;\n    t.w *= self.height;\n    self.scratch.clearRect(t.x, t.y, t.z, t.w);\n    self.scratch.globalCompositeOperation = 'lighter';\n    self.scratch.drawImage(image, t.x, t.y, t.z, t.w);\n    self.texture.needsUpdate = true;\n    RenderActions.needsRender();\n  });\n  return transform;\n}; // Helper method to write alpha channel of text to either\n// RGBA channel only.\n\n\nAtlas.prototype.fillTextToChannel = function (text, transform) {\n  var channel = Math.floor(transform.y / this.height); // If we draw the text with red or blue channels only,\n  // it ends up being thinner than it should be. Not 100%\n  // sure why this is, perhaps it is to do with sub-pixel\n  // rendering. To fix, render with green channel also,\n  // and then later clear green channel when we come to use it\n  // To make this simpler, we arrange the channels RBG not RGB\n  // as might be otherwise expected\n\n  if (channel === 1) {\n    this.scratch.fillStyle = 'rgba(255, 255, 0, 1)';\n  } else if (channel === 2) {\n    this.scratch.fillStyle = 'rgba(0, 255, 255, 1)';\n  } else if (channel === 3) {\n    if (!this.greenCleared) {\n      this.clearGreen();\n    }\n\n    this.scratch.fillStyle = 'rgba(0, 255, 0, 1)';\n  } // Draw text onto scratch\n\n\n  this.scratch.globalCompositeOperation = 'lighter';\n  var y = transform.y % this.height + 0.5 * transform.w;\n  this.scratch.fillText(text, transform.x, y);\n}; // Clears green in region of text. Used when we switch to\n// channel 3, as drawing in channels 1 and 2 pollutes\n// the green channel in order for font rendering to work\n\n\nAtlas.prototype.clearGreen = function () {\n  this.scratch.globalCompositeOperation = 'multiply';\n  this.scratch.fillStyle = 'rgba(255, 0, 255, 1)';\n  this.scratch.fillRect(0, this.monochromeBegin, this.width, this.height);\n  this.greenCleared = true;\n};\n\nAtlas.prototype.addText = function (text, fontSize, drawImmediate) {\n  if (!this.font) {\n    this.checkContainerFont();\n  }\n\n  this.setFontSize(fontSize);\n  var key = text;\n\n  if (fontSize !== undefined) {\n    key += '#_#' + fontSize;\n  }\n\n  var transform = this.mapping.get(key);\n\n  if (transform !== undefined) {\n    // Already added, just return the location in atlas\n    return transform;\n  } // Default lead space to make icons look good\n  // Center the middle of the first character with the border radius\n  // TODO should this be optional?\n\n\n  var iconWidth = this.scratch.measureText(text.slice(0, 1)).width;\n  var iconLeadSpace = 0.5 * (this.textHeight - iconWidth);\n  var textWidth = this.scratch.measureText(text).width;\n  var width = Math.ceil(textWidth + 2 * iconLeadSpace); // Center narrow text\n\n  if (width < this.textHeight) {\n    width = this.textHeight;\n    iconLeadSpace = Math.floor(0.5 * (width - textWidth));\n  }\n\n  transform = this.createTransform({\n    width: width,\n    height: this.textHeight\n  }, true);\n  this.mapping.set(key, transform); // Do not draw if we have a zero size area\n\n  if (transform.z * transform.w === 0) {\n    return transform;\n  } // As creating a lot of text is expensive (getImageData is slow)\n  // defer actually rendering till later. To process the queue\n  // `processQueue` must be called\n\n\n  var t = transform.clone();\n  t.x *= this.width;\n  t.y *= this.height;\n  t.z *= this.width;\n  t.w *= this.height;\n  t.x += iconLeadSpace; // Cannot draw immediately if we're going to draw to green\n  // channel. This is a bit of a hack, would be better if we sorted\n  // the text to avoid this\n\n  if (drawImmediate && transform.y < 3) {\n    this.fillTextToChannel(text, t);\n  } else {\n    this.queue.push({\n      fontSize: fontSize,\n      text: text,\n      transform: t\n    });\n  }\n\n  return transform;\n};\n\nAtlas.prototype.processQueue = function () {\n  var self = this;\n  WorkQueue.createTask(this.queue, function (item) {\n    self.setFontSize(item.fontSize);\n    self.fillTextToChannel(item.text, item.transform);\n  }, function () {\n    RenderActions.needsRender();\n    self.queue = [];\n    self.texture.needsUpdate = true;\n    log$1('Atlas text drawn');\n  }, true);\n};\n\nAtlas.prototype.clear = function () {\n  this.mapping.clear();\n  log$1('ATLAS CLEAR'); // Only fill text area with black, by using 'copy'\n  // the image area will be made transparent, which\n  // is better for images as nothing is shown during loading\n\n  this.scratch.globalCompositeOperation = 'copy';\n  this.scratch.fillStyle = 'rgba(0, 0, 0, 1)';\n  this.scratch.fillRect(0, this.monochromeBegin, this.width, this.height - this.monochromeBegin); //this.scratch.fillRect( 0, 0, this.width, this.height );\n  // We fill up the atlas with images (which use all 4 channels)\n  // and text (which only uses 1). usedX/usedY tracks the space\n  // used by images, while usedMonochrome tracks text\n\n  this.usedX = 0;\n  this.usedY = 0;\n  this.greenCleared = false;\n  this.rowHeight = 0;\n  this.usedMonochromeX = 0;\n  this.usedMonochromeY = this.height + this.monochromeBegin;\n  this.rowMonochromeHeight = 0;\n}; // Allocate and return the transform applied to uv to determine\n// where image/text is in atlas:\n// uv = transform.xy + transform.zw * uv\n// To specify the object is monochrome (for text) we return\n// a uv value where v is greater than 1, the fractional\n// part has the usual meaning, while the integer part\n// specifies the channel used 1: R, 2: G, 3: B, 4: A\n\n\nAtlas.prototype.createTransform = function (object, monochrome) {\n  var transform = new THREE.Vector4();\n  var width = Math.ceil(object.width);\n  var height = Math.ceil(object.height); // Add padding to object to calculate slot we'll\n  // allocate to object\n\n  var slotWidth = width + 2 * this.padding;\n  var slotHeight = height + 2 * this.padding;\n  var channelTop = 0;\n  var channelBottom = 0; // Check if we can fit into atlas at all\n\n  if (slotWidth > this.width || slotHeight > this.height) {\n    console.error('Cannot fit object in atlas');\n    return transform;\n  }\n\n  if (monochrome) {\n    // Move to next row if we cannot fit on this one\n    if (this.usedMonochromeX + slotWidth > this.width) {\n      this.usedMonochromeX = 0;\n      this.usedMonochromeY += this.rowMonochromeHeight;\n      this.rowMonochromeHeight = 0;\n    } // Keep row as tall as biggest object\n\n\n    this.rowMonochromeHeight = Math.max(this.rowMonochromeHeight, slotHeight); // Detect when top of text is in different channel to bottom\n\n    channelTop = Math.floor(this.usedMonochromeY / this.height);\n    channelBottom = Math.floor((this.usedMonochromeY + this.rowMonochromeHeight) / this.height); // When we reach bottom, jump back up\n\n    if (channelTop !== channelBottom) {\n      this.usedMonochromeX = 0;\n      this.usedMonochromeY = channelBottom * this.height + this.monochromeBegin;\n      this.rowMonochromeHeight = slotHeight;\n    }\n\n    if (this.usedMonochromeY + this.rowMonochromeHeight > 4 * this.height) {\n      console.error('Atlas capacity exceeded!');\n      transform.z = 0;\n      transform.w = 0;\n      return transform;\n    }\n  } else {\n    if (this.usedX + slotWidth > this.width) {\n      this.usedX = 0;\n      this.usedY += this.rowHeight;\n      this.rowHeight = 0;\n    }\n\n    this.rowHeight = Math.max(this.rowHeight, slotHeight);\n\n    if (this.usedY + this.rowHeight >= this.monochromeBegin) {\n      console.error('Atlas capacity exceeded!');\n      transform.z = 0;\n      transform.w = 0;\n      return transform;\n    }\n  } // Create transform (snapping to pixels)\n\n\n  if (monochrome) {\n    transform.x = Math.round(this.usedMonochromeX + this.padding);\n    transform.y = Math.round(this.usedMonochromeY + this.padding);\n    this.usedMonochromeX += slotWidth;\n  } else {\n    transform.x = Math.round(this.usedX + this.padding);\n    transform.y = Math.round(this.usedY + this.padding);\n    this.usedX += slotWidth;\n  }\n\n  transform.z = width;\n  transform.w = height; // Convert to 0->1 range\n\n  transform.x /= this.width;\n  transform.y /= this.height;\n  transform.z /= this.width;\n  transform.w /= this.height;\n  return transform;\n};\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\n\nvar mapping$1 = {\n  'none': {\n    x: 0,\n    y: 0\n  },\n  'object': {\n    x: 1,\n    y: 0\n  },\n  'pixel': {\n    x: 0,\n    y: 1\n  }\n};\n\nfunction clippingForName(name) {\n  if (name !== undefined && !isNaN(name.x) && !isNaN(name.y)) {\n    // If we just have coordinates, e.g. {x: 0.5, y: 0.1} just return\n    return name;\n  }\n\n  return mapping$1[name] || mapping$1.pixel;\n}\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\n\nfunction MarkerData() {\n  this.data = [];\n  this.haveFonts = false;\n  this.isUpdate = false;\n  this.bindListeners({\n    clearFeatures: UserActions.setCurrentPlace,\n    fontsLoaded: RenderActions.fontsLoaded,\n    addOverlay: [GeodataActions.addBuiltinOverlay, GeodataActions.addOverlay, GeodataActions.setFeatures, GeodataActions.removeOverlay],\n    updateOverlay: GeodataActions.updateOverlay\n  });\n}\n\nMarkerData.prototype.clearFeatures = function () {\n  this.data = [];\n  return true;\n};\n\nMarkerData.prototype.isReady = function () {\n  return this.haveFonts;\n};\n\nMarkerData.prototype.fontsLoaded = function () {\n  // Markers need fonts to be drawn to wait for them to arrive\n  this.haveFonts = true;\n  return this.isReady();\n};\n\nMarkerData.prototype.addOverlay = function () {\n  this.waitFor(OverlayAdapter$1);\n  var markers = OverlayAdapter$1.getState().markers;\n\n  if (lodash_min.isEqual(this.data, markers)) {\n    // Do not broadcast if data is unchanged\n    return false;\n  }\n\n  this.data = markers.concat();\n  picker.registerStore(this);\n  this.isUpdate = false;\n  return this.isReady();\n};\n\nMarkerData.prototype.updateOverlay = function () {\n  this.waitFor(OverlayAdapter$1);\n  var markers = OverlayAdapter$1.getState().markers;\n  this.data = markers.concat();\n  this.isUpdate = true;\n  return this.isReady();\n};\n\nMarkerData.displayName = 'MarkerData';\nvar MarkerData$1 = alt.createStore(MarkerData);\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// Sugar around array, that let's us determine\n// if it only contains duplicates of a set of\n// values. Useful to build a buffer for an attribute\n// and if it is all the same, use a defaultAttributeValue\n// instead\n\nvar PushList = function () {\n  this.defaultValue = Array.prototype.slice.call(arguments);\n\n  if (this.defaultValue.length === 0) {\n    console.error('Need to provide default value(s)');\n  }\n\n  this.array = [];\n  this.firstValue = null;\n  this.onlyDuplicates = true;\n}; // Push and keep track of whether the array only contains\n// duplicates\n\n\nPushList.prototype.push = function () {\n  var value = Array.prototype.slice.call(arguments);\n\n  if (this.defaultValue.length !== value.length) {\n    console.error('Pushed item with incorrect length to PushList');\n  }\n\n  if (this.firstValue === null) {\n    this.firstValue = value;\n  } else if (this.onlyDuplicates && !lodash_min.isEqual(this.firstValue, value)) {\n    this.onlyDuplicates = false;\n  }\n\n  this.array.push.apply(this.array, value);\n};\n\nPushList.prototype.pushDefault = function () {\n  this.push.apply(this, this.defaultValue);\n};\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\n\nvar Markers = function () {\n  // For instancing to work, the position attribute must\n  // have the instance in it, although this breaks the\n  // bounding sphere/box calculations, see below\n  var quad = [-1, -1, 1, -1, 1, 1, -1, -1, 1, 1, -1, 1];\n  this.positions = new THREE.BufferAttribute(new Float32Array(quad), 2);\n  var geom = new THREE.InstancedBufferGeometry();\n  geom.setAttribute('position', this.positions);\n  THREE.Mesh.call(this, geom, material.marker);\n  this.name = 'markers';\n  RenderActions.renderedFeatureRegister(this.name);\n  this.renderOrder = 1000;\n  this.atlas = new Atlas();\n  this.material.uniforms.uMap.value = this.atlas.texture;\n  MarkerData$1.listen(this.onNewData.bind(this));\n  scene.hd.add(this);\n  this.parent = null; // To let us have markers in two scenes, remove first scene as parent\n\n  scene.pickerScene.add(this);\n  this.parent = null;\n  this.visible = false;\n  var self = this;\n  this.empty = true;\n  CameraStore$1.listen(this.checkVisibility.bind(this));\n  PlacesStore$1.listen(function () {\n    self.atlas.clear();\n  });\n};\n\nMarkers.prototype = Object.create(THREE.Mesh.prototype);\n\nMarkers.prototype.checkVisibility = function () {\n  this.visible = !this.empty && camera.near > 20;\n};\n\nMarkers.prototype.onNewData = function (state) {\n  if (state.isUpdate) {\n    this.onUpdatedData(state);\n    return;\n  }\n\n  var startTime = track$1.now();\n  var self = this;\n  var features = state.data;\n  this.empty = features.length === 0;\n  this.checkVisibility();\n\n  if (this.empty) {\n    this.atlas.clear();\n    enqueue(function () {\n      RenderActions.renderedFeatureDisplayed(self.name);\n    });\n    return;\n  } else {\n    enqueue(function () {\n      RenderActions.renderedFeatureRegister(self.name);\n    });\n  }\n\n  this.geometry = new THREE.InstancedBufferGeometry();\n  this.geometry.setAttribute('position', this.positions); // Define attributes, with default values\n\n  var defaultAnchor = anchorForName();\n  var defaultClipping = clippingForName('pixel');\n  var attrs = {\n    anchor: new PushList(defaultAnchor.x, defaultAnchor.y, 0, 0),\n    atlas: new PushList(0, 0, 0, 0),\n    background: new PushList(255, 255, 255, 0),\n    clipping: new PushList(defaultClipping.x, defaultClipping.y),\n    color: new PushList(255, 255, 255, 255),\n    layout: new PushList(0, 0, 0),\n    normal: new PushList(0, 0, 1, 100000),\n    offset: new PushList(0, 0, 0, 100000),\n    tag: new PushList(0, 0, 0, 0.2)\n  }; // Some attributes need special configuration\n\n  attrs.background.normalized = true;\n  attrs.color.normalized = true;\n  attrs.normal.dynamic = true;\n  attrs.offset.dynamic = true; // Trying to optimize these leads to weird glitches\n  // where labels disappear, so alway create actual attributes\n  // for them\n\n  attrs.normal.onlyDuplicates = false;\n  attrs.offset.onlyDuplicates = false;\n  var anchor,\n      anchorOffset,\n      atlas,\n      background,\n      clipping,\n      color,\n      collapseDistance,\n      drawImmediate,\n      fadeDistance,\n      layout = {\n    x: 0,\n    y: 0,\n    z: 0\n  },\n      highlightOpacity,\n      offset,\n      props,\n      text;\n  var cameraX = camera.position.x;\n  var cameraY = camera.position.y;\n  features.forEach(function (feature) {\n    props = feature.properties;\n\n    if (feature.tag) {\n      color = new Color$1(feature.tag);\n    } else {\n      color = new Color$1(0);\n    }\n\n    highlightOpacity = props.highlightOpacity !== undefined ? props.highlightOpacity : 0.2;\n    attrs.tag.push(color.r, color.g, color.b, highlightOpacity);\n\n    if (props.color) {\n      color = new Color$1(props.color);\n      attrs.color.push(255 * color.r, 255 * color.g, 255 * color.b, 255 * color.a);\n    } else {\n      attrs.color.pushDefault();\n    }\n\n    if (props.background) {\n      background = new Color$1(props.background);\n      attrs.background.push(255 * background.r, 255 * background.g, 255 * background.b, 255 * background.a);\n    } else if (props.color) {\n      // If have no background, use transparent version of colour\n      // to avoid halo due to transparency fading to white\n      attrs.background.push(255 * color.r, 255 * color.g, 255 * color.b, 0);\n    } else {\n      attrs.background.push(255, 255, 255, 0);\n    }\n\n    collapseDistance = props.collapseDistance || 100000;\n    fadeDistance = props.fadeDistance || 100000;\n    offset = geoproject.vectorizeFeature(feature);\n    attrs.offset.push(offset.x, offset.y, offset.z, fadeDistance);\n\n    if (props.image) {\n      atlas = self.atlas.addImage(props.image, props.width, props.height);\n      attrs.atlas.push(atlas.x, atlas.y, atlas.z, atlas.w);\n    } else if (props.name !== undefined || props.icon !== undefined) {\n      text = '';\n\n      if (props.icon !== undefined) {\n        text += glyphForIcon(props.icon);\n\n        if (props.name !== undefined) {\n          text += '  ';\n        }\n      }\n\n      if (props.name !== undefined) {\n        text += props.name;\n      }\n\n      drawImmediate = Math.abs(cameraX - offset.x) < 4000 && Math.abs(cameraY - offset.y) < 4000;\n      atlas = self.atlas.addText(text, props.fontSize, drawImmediate);\n      attrs.atlas.push(atlas.x, atlas.y, atlas.z, atlas.w);\n    } else {\n      attrs.atlas.pushDefault();\n    }\n\n    if (props.clipping) {\n      clipping = clippingForName(props.clipping || 'pixel');\n    } else {\n      clipping = defaultClipping;\n    }\n\n    attrs.clipping.push(clipping.x, clipping.y);\n    anchor = anchorForName(props.anchor);\n    anchorOffset = props.anchorOffset || {\n      x: 0,\n      y: 0\n    };\n    attrs.anchor.push(anchor.x, anchor.y, parseFloat(anchorOffset.x) || 0, parseFloat(anchorOffset.y) || 0);\n    layout.x = props.padding || 0;\n    layout.y = props.borderWidth || 0;\n    layout.z = props.borderRadius || 0;\n    attrs.layout.push(layout.x, layout.y, layout.z); // For now, hardcode normal as z = 1\n    //normal = normalAt( offset );\n    //attrs.normal.push( normal.x, normal.y, normal.z, collapseDistance );\n\n    attrs.normal.push(0, 0, 1, collapseDistance);\n  }); // Atlas processes text in batches, trigger to complete final\n  // one\n\n  this.atlas.processQueue(); // TODO, switch Float32Arrays to smaller data types\n  // Apply all atributes to geometry\n\n  lodash_min.forOwn(attrs, function (attr, key) {\n    if (attr.onlyDuplicates) {\n      var value = attr.firstValue || attr.defaultValue;\n\n      if (attr.normalized) {\n        value = value.map(function (v) {\n          return v / 255.0;\n        });\n      }\n\n      self.material.defaultAttributeValues[key] = value;\n    } else {\n      var TypeArray = attr.normalized ? Uint8Array : Float32Array;\n      var bufferAttribute = new THREE.InstancedBufferAttribute(new TypeArray(attr.array), attr.defaultValue.length, attr.normalized, 1);\n\n      if (attr.dynamic) {\n        bufferAttribute.setUsage(THREE.DynamicDrawUsage);\n      }\n\n      self.geometry.setAttribute(key, bufferAttribute);\n    }\n  }); // Bounding sphere calculations are broken as the position\n  // attribute doesn't contain the label positions but rather\n  // the instance. To workaround, temporarily swap attributes\n  // and calculate\n\n  var position = this.geometry.attributes.position;\n  this.geometry.attributes.position = this.geometry.attributes.offset;\n  this.geometry.computeBoundingSphere();\n  this.geometry.attributes.position = position; // As we don't know the label heights, expand sphere so we are safe\n\n  this.geometry.boundingSphere.center.z = 2000;\n  const R = this.geometry.boundingSphere.radius;\n  this.geometry.boundingSphere.radius = Math.max(R, 2000); // Do not draw if we do not have any markers\n\n  this.visible = attrs.offset.array.length > 0;\n  var constructTime = track$1.now() - startTime;\n  log$1('Parsed', this.name);\n  log$1('Blit count', this.atlas.blitCount);\n  track$1.timing(this.name, 'construct', null, constructTime);\n  enqueue(function () {\n    RenderActions.renderedFeatureDisplayed(self.name);\n    features.forEach(function (feature) {\n      RenderActions.featureCreated(feature);\n    });\n  });\n};\n\nMarkers.prototype.onUpdatedData = function (state) {\n  var offsetAttribute = this.geometry.attributes.offset;\n  var normalAttribute = this.geometry.attributes.normal;\n\n  if (offsetAttribute === undefined) {\n    return;\n  }\n\n  var offset,\n      i = 0;\n  state.data.forEach(function (feature) {\n    offset = geoproject.vectorizeFeature(feature);\n    offsetAttribute.array[i] = offset.x;\n    offsetAttribute.array[i + 1] = offset.y;\n    offsetAttribute.array[i + 2] = offset.z; //normal = normalAt( offset );\n    //normalAttribute.array[ i ] = normal.x;\n    //normalAttribute.array[ i + 1 ] = normal.y;\n    //normalAttribute.array[ i + 2 ] = normal.z;\n\n    normalAttribute.array[i] = 0;\n    normalAttribute.array[i + 1] = 0;\n    normalAttribute.array[i + 2] = 1;\n    i += 4;\n  });\n  offsetAttribute.needsUpdate = true;\n  normalAttribute.needsUpdate = true; // Should use updateBuffer so bufferSubData is used\n};\n\nnew Markers();\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nconst hemisphere = new THREE.SphereBufferGeometry(0.8 * camera.far, 32, 6, 0, 2 * Math.PI, 0, 0.6 * Math.PI);\nconst m = new THREE.Matrix4();\nm.makeRotationX(Math.PI / 2);\nhemisphere.applyMatrix4(m);\nconst mesh$1 = new THREE.Mesh(hemisphere, material.sky);\nmesh$1.geometry.computeBoundingBox();\nmesh$1.renderOrder = 10000; // Render sky last as often obscured\n\nscene.add(mesh$1);\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nvar skyBoxUniforms = {\n  uSkybox: {\n    type: 't',\n    value: null\n  }\n};\nvar skySpheremapFragment = new Shader(`precision highp float;\n#define SUN_DISK\nuniform vec3 sunDirection;uniform vec3 betaRM;uniform vec3 betaRnorm;uniform vec3 betaMnorm;uniform vec4 constants;uniform float gamma;uniform float tonemapScale;float a(const float b,const float c){return pow(abs(b),c);}vec3 a(const vec3 b,const vec3 c){return pow(abs(b),c);}vec3 d(const vec3 b){return sqrt(abs(b));}const float e=0.15;const float f=0.50;const float g=0.10;const float h=0.20;const float i=0.02;const float j=0.30;uniform float uTonemapExposureBias;uniform float uTonemapWhiteScale;vec3 k(vec3 b){return ((b*(e*b+g*f)+h*i)/(b*(e*b+f)+h*j))-i/j;}vec3 l(vec3 m){return uTonemapExposureBias*k(uTonemapWhiteScale*m);}vec3 n(vec3 o){float p=max(0.0,o.y);float q=p+a(17.6579343808112+p*260.41830500372932,-1.253);vec3 r=exp(-betaRM/q);float s=dot(o,sunDirection);float t=s+1.0;vec3 u=betaRnorm*(4.0+t*t);vec3 v=betaMnorm*a(constants.y*s+constants.z,-1.5);vec3 w=u+v;vec3 x=a(w*(1.0-r),vec3(1.5));x*=mix(vec3(1.0),d(w*r),constants.w);vec3 y=0.1*r;\n#ifdef SUN_DISK\ny+=constants.x*r*smoothstep(0.9999566769,0.9999766769,s);\n#endif\nvec3 m=0.04*(x+y)+vec3(0.0,0.0003,0.00075);m=l(tonemapScale*m);return a(m,vec3(gamma));}\n#define STEP 0.00048828125\nvoid main(){vec2 z=gl_FragCoord.xy*STEP;vec3 o=2.0*vec3(z-0.5,0.0);float A=min(0.99999,length(o));A=sin(1.5707963267949*A);o=A*normalize(o);o.z=sqrt(max(0.0,1.0-dot(o,o)));vec3 m=n(normalize(o.xzy));gl_FragColor=vec4(m,1.0);}`);\nvar quadVertex$1 = new Shader(`attribute vec3 position;void main(){gl_Position=vec4(position,1.0);}`);\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// Renders sky onto plane render target\n\nvar skyBox = {\n  camera: null,\n  enabled: true,\n  renderTarget: null,\n  scene: new THREE.Scene(),\n  init: function () {\n    var parameters = {\n      format: THREE.RGBFormat,\n      type: webgl.render565 ? THREE.UnsignedShort565Type : THREE.UnsignedByteType,\n      depthBuffer: false,\n      stencilBuffer: false,\n      wrapS: THREE.ClampToEdgeWrapping,\n      wrapT: THREE.ClampToEdgeWrapping\n    }; // Render quad orthographically\n\n    skyBox.width = 256; // 256KB of memory (if just using for fog do not need accuracy)\n\n    skyBox.camera = new THREE.OrthographicCamera(-1, 1, 1, -1, 0, 10000);\n    skyBox.scene.add(skyBox.camera);\n    skyBox.camera.position.z = 10;\n    skyBox.camera.lookAt(new THREE.Vector3(0, 0, 0)); // Look up at sky!\n\n    skyBox.renderTarget = new THREE.WebGLRenderTarget(skyBox.width, skyBox.width, parameters);\n    skyBoxUniforms.uSkybox.value = skyBox.renderTarget.texture;\n    var plane = new THREE.PlaneBufferGeometry(2, 2);\n    skySpheremapFragment.define('STEP', (1.0 / skyBox.width).toExponential());\n    var material = new THREE.RawShaderMaterial({\n      name: 'skybox',\n      uniforms: lodash_min.assign({}, skyUniforms, tonemapUniforms),\n      vertexShader: quadVertex$1.value,\n      fragmentShader: skySpheremapFragment.value\n    });\n    var quad = new THREE.Mesh(plane, material);\n    skyBox.scene.add(quad); // Trigger renders\n\n    RenderStore$1.listen(function (state) {\n      if (state.env) {\n        skyBox.process();\n      }\n    });\n  },\n  process: function () {\n    renderer.setRenderTarget(skyBox.renderTarget);\n    renderer.render(skyBox.scene, skyBox.camera);\n  }\n};\nskyBox.init();\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nclass MapTileGeometry {\n  constructor(dimensions, segments) {\n    let position = [0, 0];\n    dimensions = dimensions || [1, 1];\n    segments = segments || 1;\n    let x = position[0];\n    let y = position[1];\n    let width = dimensions[0];\n    let height = dimensions[1];\n    let segments1 = segments + 1;\n    let N1 = segments1 * segments1;\n    let grid = new Array(N1);\n    let i, j;\n\n    for (i = 0; i < segments1; i++) {\n      for (j = 0; j < segments1; j++) {\n        let n = i * segments1 + j;\n        grid[n] = {\n          x: x + i * (width / segments),\n          y: y - j * (height / segments),\n          uvx: i / segments,\n          uvy: j / segments\n        };\n      }\n    } // Define faces\n\n\n    let N = 6 * segments * segments;\n    {\n      N += 4 * 6 * segments;\n    }\n    this.positions = new Float32Array(4 * N);\n    this.index = new Array(N);\n    let n = 0; // Add two triangles (abc, cbd) to the geometry at array offset\n\n    let addQuad = (offset, ia, ib, ic, id) => {\n      // Get four vertices in grid square\n      let a = grid[ia];\n      let b = grid[ib];\n      let c = grid[ic];\n      let d = grid[id];\n      const stride = 4; // Push into positions attribute buffer\n\n      let pack = vertex => [vertex.x, vertex.y, vertex.uvx, vertex.uvy];\n\n      this.positions.set(pack(a), stride * (offset + 0));\n      this.positions.set(pack(b), stride * (offset + 1));\n      this.positions.set(pack(c), stride * (offset + 2));\n      this.positions.set(pack(c), stride * (offset + 3));\n      this.positions.set(pack(b), stride * (offset + 4));\n      this.positions.set(pack(d), stride * (offset + 5)); // Add indices\n\n      this.index[offset + 0] = ia;\n      this.index[offset + 1] = ib;\n      this.index[offset + 2] = ic;\n      this.index[offset + 3] = ic;\n      this.index[offset + 4] = ib;\n      this.index[offset + 5] = id;\n    };\n\n    for (i = 0; i < segments; i++) {\n      for (j = 0; j < segments; j++, n++) {\n        // Get indices to form square tile\n        let ia = i * segments1 + j;\n        let ib = i * segments1 + j + 1;\n        let ic = (i + 1) * segments1 + j;\n        let id = (i + 1) * segments1 + j + 1;\n        let offset = 6 * n;\n        addQuad(offset, ia, ib, ic, id);\n      }\n    }\n\n    {\n      for (let skirt = 0; skirt < 4; skirt++) {\n        for (let s = 0; s < segments; s++, n++) {\n          if (skirt === 0) {\n            i = 0;\n            j = s; // left\n          } else if (skirt === 1) {\n            i = segments;\n            j = s; // right\n          } else if (skirt === 2) {\n            i = s;\n            j = 0; // top\n          } else if (skirt === 3) {\n            i = s;\n            j = segments; // bottom\n          } // Vertices for top of skirt\n\n\n          let a, b;\n\n          if (skirt < 2) {\n            a = grid[i * segments1 + j];\n            b = grid[i * segments1 + j + 1];\n          } else {\n            a = grid[i * segments1 + j];\n            b = grid[(i + 1) * segments1 + j];\n          } // Get triangles facing the right way\n\n\n          if (skirt === 0 || skirt === 3) {\n            [a, b] = [b, a];\n          } // Vertices that will form base of skirt\n\n\n          let c = a;\n          let d = b; // Triangles acb, bcd\n\n          this.positions[4 * 6 * n] = a.x;\n          this.positions[4 * 6 * n + 1] = a.y;\n          this.positions[4 * (6 * n + 1)] = b.x;\n          this.positions[4 * (6 * n + 1) + 1] = b.y;\n          this.positions[4 * (6 * n + 2)] = c.x;\n          this.positions[4 * (6 * n + 2) + 1] = c.y;\n          this.positions[4 * (6 * n + 3)] = c.x;\n          this.positions[4 * (6 * n + 3) + 1] = c.y;\n          this.positions[4 * (6 * n + 4)] = b.x;\n          this.positions[4 * (6 * n + 4) + 1] = b.y;\n          this.positions[4 * (6 * n + 5)] = d.x;\n          this.positions[4 * (6 * n + 5) + 1] = d.y; // Put uvs in wz channel of position\n          // For skirt we add 10 to the values\n\n          this.positions[4 * 6 * n + 2] = a.uvx;\n          this.positions[4 * 6 * n + 3] = a.uvy;\n          this.positions[4 * (6 * n + 1) + 2] = b.uvx;\n          this.positions[4 * (6 * n + 1) + 3] = b.uvy;\n          this.positions[4 * (6 * n + 2) + 2] = c.uvx + 10;\n          this.positions[4 * (6 * n + 2) + 3] = c.uvy + 10;\n          this.positions[4 * (6 * n + 3) + 2] = c.uvx + 10;\n          this.positions[4 * (6 * n + 3) + 3] = c.uvy + 10;\n          this.positions[4 * (6 * n + 4) + 2] = b.uvx;\n          this.positions[4 * (6 * n + 4) + 3] = b.uvy;\n          this.positions[4 * (6 * n + 5) + 2] = d.uvx + 10;\n          this.positions[4 * (6 * n + 5) + 3] = d.uvy + 10;\n        }\n      }\n    } // Dump out grid\n\n    N = grid.length;\n    this.grid = new Float32Array(4 * N);\n\n    for (i = 0; i < N; i++) {\n      let v = grid[i];\n      this.grid[4 * i + 0] = v.x;\n      this.grid[4 * i + 1] = v.y;\n      this.grid[4 * i + 2] = v.uvx;\n      this.grid[4 * i + 3] = v.uvy;\n    }\n  }\n\n}\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// Relative scale of terrain and imagery\n\n\nconst exponent = 2; // Remember terrain tiles are 512, imagery 256\n\nlet tilePool = [];\nlet idCounter = 1;\n\nclass Tile {\n  // To implement tile pool, use init to setup instance\n  // see `Tile.nextTile` below\n  constructor() {\n    this.id = idCounter++; // Hack in listeners here for now\n\n    const onUpdate = this.refreshIndices.bind(this);\n    ImageryDatasource.addListener(onUpdate);\n    ElevationDatasource.addListener(onUpdate); // Default geometry. Will be changed in init() anyway\n\n    let geometry = Tile.geometry[64];\n    this.offset = new THREE.Vector4(0, 0, 1, 1);\n    this.imageryUvOffset = new THREE.Vector4(); // Create materials and set unchanging uniforms\n\n    let terrainMaterial = material.terrain({\n      uOffset: {\n        value: this.offset\n      },\n      uImageryUvOffset: {\n        value: this.imageryUvOffset\n      }\n    });\n    this.mesh = new THREE.Mesh(geometry, terrainMaterial.imagery);\n    this.pickerMesh = new THREE.Mesh(geometry, terrainMaterial.picker); // Configure tile\n\n    this.init(...arguments);\n  }\n\n  init(x, y, z) {\n    if (isNaN(x) || isNaN(y) || isNaN(z)) {\n      throw Error('Invalid tile initialization');\n    } // Set to true if tile is drawn at least once\n\n\n    this.wasSeen = false;\n    this.wasRendered = false; // Add to scene so we get drawn (removed again in recycle)\n\n    scene.add(this.mesh);\n    scene.tilepickerScene.add(this.pickerMesh); // x, y, z reference to imagery tile\n\n    this.x = x;\n    this.y = y;\n    this.z = z; // x, y, z reference to elevation tile\n\n    let exp = Math.max(exponent, this.z - 10); // Cap elevation tile level to 10\n\n    this.x2 = Math.floor(this.x / Math.pow(2, exp));\n    this.y2 = Math.floor(this.y / Math.pow(2, exp));\n    this.z2 = this.z - exp; // Update geometry based on terrain resolution\n    // At exp level 0 (max terrain resolution) we want one vertex\n    // per terrain tile pixel (so 512). As tile size is double\n    // of imagery, multiply by 2 to get 1024\n\n    let segments = 1024 / Math.pow(2, exp); // Cap segment to reasonable range 1-64\n\n    segments = Math.min(64, Math.max(1, segments));\n    let geometry = Tile.geometry[segments].clone();\n    let pickerGeometry = Tile.geometry[Math.max(1, segments / 8)].clone();\n    this.mesh.geometry = geometry;\n    this.pickerMesh.geometry = pickerGeometry; // Position on scene\n\n    this.calculateOffset(); // Keys to identify imagery and elevation\n\n    this.imageryKey = tilebelt.tileToQuadkey([this.x, this.y, this.z]);\n    this.elevationKey = tilebelt.tileToQuadkey([this.x2, this.y2, this.z2]);\n    this.imageryIndex = 0;\n    this.elevationIndex = 0; // Calculate bounding sphere\n\n    let minH = -200,\n        maxH = 4000; // Guess terrain height\n\n    let center = new THREE.Vector3(this.offset.x + 0.5 * this.offset.z, this.offset.y - 0.5 * this.offset.z, this.offset.w * 0.5 * (minH + maxH)); // Radius could be calculated more exactly, assume max\n    // of width and height and then take 3D diagonal\n\n    let R = Math.max(0.5 * this.offset.w * (maxH - minH), 0.5 * this.offset.z);\n    R *= Math.sqrt(3);\n    let sphere = new THREE.Sphere(center, R);\n    this.mesh.geometry.boundingSphere = sphere;\n    this.pickerMesh.geometry.boundingSphere = sphere; // TODO, annoying we have to clone geom\n\n    return this;\n  }\n\n  calculateOffset() {\n    const {\n      sceneScale,\n      globalOffset\n    } = GeoprojectStore$1.getState();\n    let scale = Math.pow(2, 15 - this.z) * sceneScale;\n    this.offset.set(this.x * scale + globalOffset.x, -this.y * scale + globalOffset.y, scale, this.id); // Put id here to avoid another uniform\n  } // Split into four tiles of next zoom level\n\n\n  split() {\n    let children = tilebelt.getChildren([this.x, this.y, this.z]);\n    children = [this.init(...children[0]), // Re-use this as first child\n    Tile.next(...children[1]), // ...and emit 3 more\n    Tile.next(...children[2]), Tile.next(...children[3])];\n    return children;\n  } // Grow into parent tile of previous zoom level\n\n\n  grow() {\n    this.init(...tilebelt.getParent([this.x, this.y, this.z]));\n    return this;\n  } // Shifts tile a set number of units at a given zoom level\n  // (this.z will remain the same)\n\n\n  shift(deltaX, deltaY, z) {\n    if (z > this.z) {\n      console.error('Cannot shift at zoom level bigger than this.z');\n    }\n\n    const x = Math.round(this.x + deltaX * Math.pow(2, this.z - z));\n    const y = Math.round(this.y + deltaY * Math.pow(2, this.z - z));\n    this.init(x, y, this.z);\n    return this;\n  }\n\n  recycle() {\n    tilePool.push(this);\n    scene.remove(this.mesh);\n    scene.tilepickerScene.remove(this.pickerMesh);\n  }\n\n  fetchData() {\n    // Don't fetch unless we have drawn this tile to screen\n    // This avoids the situation where a tile is split and\n    // before we even get to draw it it is split again. In\n    // this scenario it is wasteful to download data for\n    // a tile that is unneeded.\n    // Allow an exception for low-res data, so that there\n    // is always something to be drawn\n    if (this.wasSeen || this.z < 8) {\n      ElevationDatasource.fetchIfNeeded(this.elevationKey);\n      ImageryDatasource.fetchIfNeeded(this.imageryKey); // Where we are present in scene, but not seen get\n      // get lower resolution data (2 tile levels below),\n      // so as we pan around we don't have gaps\n    } else if (this.wasRendered && this.z > 10) {\n      ImageryDatasource.fetchIfNeeded(this.imageryKey.slice(0, -2)); // To make sure we always have someting to show, get some very\n      // low res data\n    } else {\n      ImageryDatasource.fetchIfNeeded(this.imageryKey.slice(0, 5));\n      ElevationDatasource.fetchIfNeeded(this.elevationKey.slice(0, 5));\n    }\n\n    this.refreshIndices();\n  }\n\n  calculateImageryOffset(bestImagery) {\n    let downsample = bestImagery.quadkey ? this.imageryKey.length - bestImagery.quadkey.length : 0;\n    let downScale = Math.pow(2, -downsample);\n    let [x, y] = bestImagery.quadkey ? tilebelt.quadkeyToTile(bestImagery.quadkey) : [this.x, this.y, this.z];\n    this.imageryUvOffset.set(this.x * downScale - x, this.y * downScale - y, downScale, this.imageryIndex); // Put imagery index here to avoid another uniform\n  } // Sets uniforms to use best available data\n\n\n  refreshIndices() {\n    let tile = tilebelt.quadkeyToTile(this.imageryKey);\n    let key = tilebelt.tileToQuadkey(tile);\n    this.elevationIndex = ElevationDatasource.findBestAvailableData(key, true).index;\n    this.bestImagery = ImageryDatasource.findBestAvailableData(this.imageryKey);\n    this.imageryIndex = this.bestImagery.index;\n    this.calculateImageryOffset(this.bestImagery);\n  }\n\n  onSeen() {\n    ElevationDatasource.indexPool.tap(this.elevationIndex);\n    ImageryDatasource.indexPool.tap(this.imageryIndex);\n  }\n\n}\n\nTile.next = function () {\n  if (tilePool.length > 0) {\n    return tilePool.splice(0, 1)[0].init(...arguments);\n  } else {\n    return new Tile(...arguments);\n  }\n};\n\nlet segments = 64;\nTile.geometry = [];\n\nwhile (segments >= 1) {\n  let geom = new MapTileGeometry([1, 1], segments);\n  let bufferGeometry = new THREE.BufferGeometry();\n  bufferGeometry.setAttribute('position', new THREE.Float32BufferAttribute(geom.positions, 4));\n  Tile.geometry[segments] = bufferGeometry;\n  segments /= 2;\n}\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\n\nlet x, y, z;\nconst baseZ = 5;\nconst tileDelta = new THREE.Vector2();\nlet shiftThreshold = Infinity;\nPlacesStore$1.listen(({\n  currentPlace\n}) => {\n  [x, y, z] = tilebelt.pointToTileFraction(ApiUtils.snap(currentPlace.longitude), ApiUtils.snap(currentPlace.latitude), baseZ);\n  const W = GeoprojectStore$1.getState().sceneScale;\n  shiftThreshold = 0.6 * W * Math.pow(2, 15 - baseZ);\n  x = Math.floor(x);\n  y = Math.floor(y); // TODO don't create scene everytime location changes\n\n  createScene();\n});\nlet tiles = [];\nlet framesSinceSeen = {};\nlet frame = 0;\nlet projectedDistance = null; // At start want to cut up terrain as quickly as possible\n\nlet pipelinePicker = false;\nlet projectionMatrix;\n\nfunction draw() {\n  if (tiles.length === 0) {\n    return;\n  }\n\n  frame++;\n  let tilesSeen = new Set(); // All tiles we see\n\n  let toSplit = new Set(); // Tiles whose detail is too low\n\n  let toCombine = new Set(); // Tiles whose detail is too high\n\n  let toCombineGroups = {}; // Picker render staggered over frames\n  // Render, wait, read, process\n  // The biggest issue appears to be the pipeline stalling if we try to\n  // read too early after rendering. Once this is fixed then splitting\n  // the read up doesn't seem to offer benefits.\n\n  let sliceN = 1; // Number of slices to split picker read into\n\n  let waitFrames = 4; // How many frames to wait between render and read\n\n  let skipFrames = 1; // How many frames to skip between reads (2 means skip 1 frame, 3 = skip 2 etc)\n\n  const N = 1 + waitFrames + skipFrames * sliceN + 1;\n  let frameN = frame % N;\n  let doPickerRender = frameN === 0; // Read out results at a later frame (pipelining)\n\n  let doPickerRead = (frameN - 1 - waitFrames) % skipFrames === 0 && frameN > waitFrames && frameN < 1 + waitFrames + skipFrames * sliceN;\n  let doPickerProcess = frameN === N - 1;\n\n  if (!pipelinePicker) {\n    doPickerRender = true;\n    doPickerRead = true;\n    doPickerProcess = true;\n    sliceN = 1;\n  }\n\n  if (doPickerRender) {\n    // Normal render\n    renderer.setRenderTarget(TilePicker.target);\n    renderer.clear(true, true, true);\n    renderer.render(scene.tilepickerScene, camera);\n    renderer.setRenderTarget(null); // Get matrix at point of render so it matches what\n    // is in the render target\n\n    projectionMatrix = camera.projectionMatrix.elements;\n  }\n\n  if (doPickerRead) {\n    // Grab pixels\n    let slice = pipelinePicker ? (frameN - 1 - waitFrames) / skipFrames : 0;\n    let bytesPerSlice = 4 * TilePicker.target.width * TilePicker.target.height / sliceN;\n    let view = new Uint8Array(TilePicker.data.buffer, slice * bytesPerSlice, bytesPerSlice);\n    renderer.readRenderTargetPixels(TilePicker.target, 0, slice * TilePicker.target.height / sliceN, TilePicker.target.width, TilePicker.target.height / sliceN, view);\n    renderer.setRenderTarget(null);\n  }\n\n  if (doPickerProcess) {\n    let pickedTile, terrainError; // Get center pixel and extract distance\n\n    let p = 2 * (TilePicker.target.width + TilePicker.target.width * TilePicker.target.height);\n    p = Math.round(p);\n    let fragZ = 256 * TilePicker.data[p + 2] + TilePicker.data[p + 3];\n    fragZ /= 256.0 * 255.0;\n    projectedDistance = projectionMatrix[14] / (2 * fragZ - 1.0 + projectionMatrix[10]);\n    CameraStore$1.getState().controls.setDistanceToTarget(projectedDistance);\n    let pl = TilePicker.data.length;\n\n    for (p = 0; p < pl; p += 4) {\n      pickedTile = 256 * TilePicker.data[p] + TilePicker.data[p + 1];\n      terrainError = TilePicker.data[p + 3] / 255; // range 0-1\n\n      terrainError = 10 * terrainError - 5; // re-bias to -5 > 5\n\n      if (pickedTile === 0) {\n        // Missed tile, ignore\n        continue;\n      } // Debug, check tile exists!\n\n\n      let tile = tiles.find(x => x.id === pickedTile);\n\n      if (tile === undefined) {\n        continue;\n      } // terrainError of 0 is 1:1 pixel:texel\n\n\n      if (terrainError < (window.minError || -1.5) && tile.z < 18) {\n        toSplit.add(tile);\n        tilesSeen.add(tile);\n      } else if (terrainError > (window.maxError || 0) && tile.z > 7) {\n        toCombine.add(tile);\n      } else {\n        tilesSeen.add(tile);\n      }\n    }\n\n    tiles.forEach(tile => {\n      if (framesSinceSeen[tile.imageryKey] === undefined) {\n        framesSinceSeen[tile.imageryKey] = 0;\n      }\n\n      if (tilesSeen.has(tile)) {\n        framesSinceSeen[tile.imageryKey] = 0;\n      } else {\n        let frames = framesSinceSeen[tile.imageryKey]++;\n\n        if (frames > 5) {\n          toCombine.add(tile);\n        }\n      }\n    }); // Remove any common tiles to reduce flicker\n\n    let commonTiles = new Set([...toCombine].filter(x => toSplit.has(x))); // Don't combine tiles that hae been marked as normally visible,\n    // as if we combine them they will split again right away\n\n    toCombine = new Set([...toCombine].filter(x => !commonTiles.has(x) && !tilesSeen.has(x))); // Equally it doesn't make sense to split a tile that is also\n    // marked to be combined\n\n    toSplit = new Set([...toSplit].filter(x => !commonTiles.has(x))); // Mark tiles which have been seen & rendered\n\n    [...tilesSeen].filter(x => !toSplit.has(x)).forEach(tile => tile.wasSeen = true);\n    [...tiles].filter(x => !toSplit.has(x)).forEach(tile => tile.wasRendered = true); // Group combine tiles\n\n    toCombine.forEach(tile => {\n      let parentKey = tile.imageryKey.slice(0, -1);\n\n      if (toCombineGroups[parentKey] === undefined) {\n        toCombineGroups[parentKey] = new Set([tile]);\n      } else {\n        toCombineGroups[parentKey].add(tile);\n      }\n    }); // Split tile by modifying it to become the first child and\n    // then adding the new 3 tiles\n\n    toSplit.forEach(tile => {\n      if (window.noSplit) return;\n      let newTiles = tile.split();\n      newTiles.forEach(t => t.fetchData());\n      tiles.push(...newTiles.splice(1, 3));\n    }); // We've reached the right size, so start more efficient\n    // pipelining of picker routine\n\n    if (toSplit.size === 0) {\n      pipelinePicker = true;\n    } // Combine tiles by modifying the first tile in group\n    // to become parent, and recycling the others\n\n\n    Object.values(toCombineGroups).forEach(group => {\n      if (group.size !== 4) {\n        return;\n      }\n\n      let array = [...group];\n      let tile0 = array[0];\n      let tiles1to3 = array.splice(1, 3);\n      delete framesSinceSeen[tile0.imageryKey];\n      tile0.grow().fetchData();\n      tiles1to3.forEach(tile => {\n        let i = tiles.indexOf(tile);\n        tiles.splice(i, 1);\n        delete framesSinceSeen[tile.imageryKey];\n        tile.recycle();\n      });\n    }); // When tiles get too far from the camera, shift them around\n    // to fill the terrain where it ends. This way we give the\n    // illusion that the landscape is infinite\n\n    const target = CameraStore$1.getState().target;\n    tiles.forEach(tile => {\n      tileDelta.copy(tile.mesh.geometry.boundingSphere.center);\n      tileDelta.sub(target);\n      const deltaX = Math.abs(tileDelta.x) > shiftThreshold ? -Math.sign(tileDelta.x) : 0;\n      const deltaY = Math.abs(tileDelta.y) > shiftThreshold ? Math.sign(tileDelta.y) : 0;\n\n      if (deltaX || deltaY) {\n        tile.shift(deltaX, deltaY, baseZ);\n        tile.fetchData();\n      }\n    }); // Finally check if any tiles are low-res and need better data\n\n    tiles.filter(t => t.bestImagery.downsample > 0).forEach(t => t.fetchData()); // Notify tiles that they are being seen\n\n    tiles.forEach(tile => {\n      if (framesSinceSeen[tile.imageryKey] < 10) {\n        tile.onSeen();\n      }\n    });\n  } // Update tiles if we have imagery changes\n\n\n  if (ImageryDatasource.hasUpdates) {\n    ImageryDatasource.broadcastUpdate();\n  }\n\n  if (ElevationDatasource.hasUpdates) {\n    ElevationDatasource.broadcastUpdate();\n  }\n}\n\nfunction createScene() {\n  tiles.forEach(tile => tile.recycle());\n  tiles = [];\n  tiles.push(Tile.next(x, y, z));\n  let newTiles = tiles[0].split();\n  tiles.push(...newTiles.splice(1, 3));\n  tiles.forEach(tile => tile.fetchData());\n}\n\nRenderStore$1.listen(draw);\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nvar container = ContainerStore$1.getState().element;\nvar app = {\n  mouse: {\n    x: 0,\n    y: 0\n  },\n  init: function () {\n    var raycastMouse = function () {\n      // Convert to raycasting coordinate space\n      var vector = ContainerStore$1.toClipSpace(app.mouse);\n      var zoomArea = 0.2;\n      var shouldZoom = Math.abs(vector.x) < zoomArea && Math.abs(vector.y) < zoomArea; // If more or less tapping on where we are, interpret as zoom\n\n      if (shouldZoom) {\n        UserActions.doubleTapZoom();\n        return;\n      } // ...otherwise as pan\n\n\n      var p = picker.raycastTerrain(app.mouse);\n\n      if (Math.abs(p.x) < 7500 && Math.abs(p.y) < 7500) {\n        UserActions.focusOnTarget(p);\n      }\n    };\n\n    var raycastFeature = function () {\n      return picker.pickFeature(app.mouse);\n    };\n\n    var updateMouse = function (e) {\n      var userInput = UserInputStore$1.getState();\n\n      if (userInput.interacting) {\n        return;\n      } // Reliably get mouse position across browsers\n\n\n      var target = e.srcElement,\n          rect = target.getBoundingClientRect(),\n          offsetX = e.clientX || e.pageX,\n          offsetY = e.clientY || e.pageY;\n      offsetX -= rect.left, offsetY -= rect.top;\n\n      if (isNaN(offsetX) || isNaN(offsetY)) {\n        // Ignore events without coordinates (e.g. touchend)\n        return;\n      }\n\n      app.mouse = {\n        x: offsetX,\n        y: offsetY\n      }; // Disable raycasting for now\n\n      return; // Get spurious errors with this enabled\n    };\n\n    var isTouchCapable = 'ontouchstart' in window || window.DocumentTouch && document instanceof window.DocumentTouch || navigator.maxTouchPoints > 0 || window.navigator.msMaxTouchPoints > 0;\n\n    if (!isTouchCapable) {\n      container.addEventListener('mousemove', function (e) {\n        updateMouse(e);\n      });\n    } // Handle container clicks\n\n\n    var onContainerClick = e => {\n      if (e.detail === 2) {\n        // On double click\n        raycastMouse();\n      } else {\n        var feature = raycastFeature();\n\n        if (feature) {\n          UserActions.featureClicked(feature);\n        }\n      }\n\n      return true;\n    };\n\n    const controls = CameraStore$1.getState().controls;\n    controls.addEventListener('click', e => {\n      updateMouse(e);\n      onContainerClick(e);\n    });\n  }\n};\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nfunction bindToVisible(parameter) {\n  return function (state) {\n    this.setState({\n      visible: state[parameter]\n    });\n  };\n}\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\n\nvar UserInterfaceStore = SetterStore([[ConfigActions.setCameraModeControlVisible], [ConfigActions.setCompassVisible], [ConfigActions.setLayersControlVisible], [ConfigActions.setRotationControlVisible], [ConfigActions.setSeasonControlVisible], [UserActions.setSecondaryParams], [ConfigActions.setUserLocationControlVisible], [ConfigActions.setZoomControlVisible]]);\nUserInterfaceStore.displayName = 'UserInterfaceStore';\nvar UserInterfaceStore$1 = alt.createStore(UserInterfaceStore);\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nvar height$1 = 14;\nvar width$1 = 4;\nvar padding = 3;\nvar style = {\n  position: 'absolute',\n  top: 9,\n  left: 11,\n  padding: padding + 'px ' + (padding + height$1 - width$1) + 'px',\n  border: '1px solid white',\n  borderRadius: 2 * (height$1 + padding),\n  backgroundColor: '#333542'\n};\nvar b = 'solid ' + width$1 + 'px transparent';\nvar north = {\n  borderBottom: 'solid ' + height$1 + 'px #b33330',\n  borderLeft: b,\n  borderRight: b\n};\nvar south = {\n  borderTop: 'solid ' + height$1 + 'px #cccccc',\n  borderLeft: b,\n  borderRight: b\n};\nvar direction$1 = new THREE.Vector3();\nvar Compass = React.createClass({\n  displayName: 'Compass',\n  getInitialState: function () {\n    return {\n      azimuth: 0,\n      visible: UserInterfaceStore$1.getState().compassVisible\n    };\n  },\n  componentDidMount: function () {\n    CameraStore$1.listen(this.onStoreChange);\n    UserInterfaceStore$1.listen(bindToVisible('compassVisible').bind(this));\n  },\n  onStoreChange: function (storeState) {\n    direction$1.subVectors(storeState.position, storeState.target);\n    var azimuth = 0.5 * Math.PI + Math.atan2(direction$1.y, direction$1.x); // Round so we don't constantly update with tiny changes\n\n    azimuth = 0.01 * Math.round(azimuth * 100);\n    this.setState({\n      azimuth: azimuth\n    });\n  },\n  shouldComponentUpdate: function (nextProps, nextState) {\n    return this.state.azimuth !== nextState.azimuth || this.state.visible !== nextState.visible;\n  },\n  render: function () {\n    if (this.state.visible === false) {\n      return null;\n    }\n\n    style.transform = 'rotate(' + this.state.azimuth + 'rad) translateZ(0)';\n    return React.createElement('div', {\n      className: \"compass\",\n      style: Object.assign({}, style)\n    }, React.createElement('div', {\n      style: north\n    }), React.createElement('div', {\n      style: south\n    }));\n  }\n});\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// So we can inline the styles wrapping the engine, use this simple\n// component, to wrap other parts of app\n\nvar Container = React.createClass({\n  displayName: 'Container',\n  render: function () {\n    var outerStyle = {\n      position: 'relative',\n      height: '100%',\n      overflow: 'hidden'\n    };\n    var innerStyle = {\n      fontSize: '14px',\n      color: '#fff',\n      position: 'absolute',\n      top: 0,\n      bottom: 0,\n      left: 0,\n      right: 0\n    };\n    return React.createElement('div', {\n      style: outerStyle\n    }, React.createElement('div', {\n      id: \"container\",\n      style: innerStyle\n    }, this.props.children));\n  }\n});\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nconst style$1 = {\n  position: 'absolute',\n  bottom: 0,\n  right: 0,\n  paddingTop: 1,\n  paddingBottom: 1,\n  paddingLeft: 4,\n  paddingRight: 4,\n  fontFamily: uiFont,\n  textAlign: 'right',\n  textTransform: 'none',\n  color: 'white',\n  background: 'rgba( 255, 255, 255, 0.1 )'\n};\nconst pStyle = {\n  color: 'white',\n  fontSize: '6pt',\n  margin: 0\n};\nconst Credits = React.createClass({\n  displayName: 'Credits',\n  getInitialState: () => AppStore$1.getState().datasource,\n  componentDidMount: function () {\n    AppStore$1.listen(this.onStoreChange);\n    this.onStoreChange(AppStore$1.getState());\n  },\n  onStoreChange: function ({\n    datasource\n  }) {\n    this.setState(datasource);\n  },\n  render: function () {\n    let credits = [];\n\n    if (this.state.elevation && this.state.elevation.attribution) {\n      credits.push(this.state.elevation.attribution);\n    }\n\n    if (this.state.imagery && this.state.imagery.attribution) {\n      credits.push(this.state.imagery.attribution);\n    } // Inject link styles\n\n\n    let aStyle = `color: ${pStyle.color}; font-size: ${pStyle.fontSize}; margin: ${pStyle.margin}; text-decoration: underline;`;\n    credits = credits.map(credit => credit.replace(/<a href=/g, '<a ' + 'style=\"' + aStyle + '\" href='));\n    return React.createElement('div', {\n      className: \"credits\",\n      style: style$1\n    }, React.createElement('p', {\n      style: pStyle\n    }, \"Data: \", credits.map(credit => React.createElement(React.Fragment, null, React.createElement('span', {\n      dangerouslySetInnerHTML: {\n        __html: credit\n      }\n    }), React.createElement('span', null, \" \")))));\n  }\n});\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nfunction ErrorStore() {\n  this.message = null;\n  this.displayErrors = true;\n  this.bindListeners({\n    clearError: UserActions.setCurrentPlace,\n    fatalError: RenderActions.fatalError,\n    setDisplayErrors: ConfigActions.setDisplayErrors\n  });\n}\n\nErrorStore.prototype.clearError = function () {\n  this.message = null;\n};\n\nErrorStore.prototype.fatalError = function (message) {\n  this.message = message;\n};\n\nErrorStore.prototype.setDisplayErrors = function (value) {\n  this.displayErrors = value;\n};\n\nErrorStore.displayName = 'ErrorStore';\nvar ErrorStore$1 = alt.createStore(ErrorStore);\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nvar container$1 = ContainerStore$1.getState().element;\nvar Engine = React.createClass({\n  displayName: 'Engine',\n  componentDidMount: function () {\n    var domNode = this.base || this.getDOMNode();\n    domNode.appendChild(container$1);\n    container$1.appendChild(renderer.domElement);\n    setTimeout(function () {\n      RenderActions.containerMounted();\n    }, 0);\n    ErrorStore$1.listen(this.onError);\n    this.setState(this.getInitialState());\n  },\n  getInitialState: function () {\n    return {\n      error: ErrorStore$1.getState().message\n    };\n  },\n  onError: function (state) {\n    if (state.displayErrors) {\n      this.setState({\n        error: state.message\n      });\n    }\n  },\n  render: function () {\n    var style = {\n      width: '100%',\n      height: '100%',\n      touchAction: 'none'\n    };\n\n    if (this.state.error) {\n      var errorContainerStyle = {\n        position: 'absolute',\n        width: '100%',\n        height: '100%',\n        zIndex: 10,\n        background: 'black'\n      };\n      var errorStyle = {\n        padding: 10,\n        textAlign: 'center'\n      };\n      return React.createElement('div', {\n        style: style\n      }, React.createElement('div', {\n        style: errorContainerStyle\n      }, React.createElement('h2', {\n        style: errorStyle\n      }, \"Error\"), React.createElement('p', {\n        style: errorStyle\n      }, this.state.error)));\n    }\n\n    return React.createElement('div', {\n      style: style\n    });\n  }\n});\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nvar defaultStyle = {\n  border: '1px solid white',\n  margin: 4,\n  color: 'white',\n  width: 36,\n  height: 36,\n  lineHeight: '32px',\n  textAlign: 'center',\n  padding: 0,\n  borderRadius: 18,\n  backgroundColor: '#333542',\n  outline: 'none',\n  WebkitTransition: 'background-color 0.5s',\n  transition: 'background-color 0.5s',\n  cursor: 'pointer'\n};\nvar hoverStyle = {\n  backgroundColor: 'rgba(97, 97, 97, 0.5)'\n};\nvar Button = React.createClass({\n  displayName: 'Button',\n  getInitialState: function () {\n    return {\n      hover: false\n    };\n  },\n  mouseOver: function () {\n    this.setState({\n      hover: true\n    });\n  },\n  mouseOut: function () {\n    this.setState({\n      hover: false\n    });\n  },\n  render: function () {\n    var style = Object.assign({}, defaultStyle, this.state.hover ? hoverStyle : undefined, this.props.style);\n    return React.createElement('button', {\n      className: this.props.icon,\n      onClick: this.props.action,\n      onMouseOver: this.mouseOver,\n      onMouseOut: this.mouseOut,\n      style: style\n    }, this.props.text);\n  }\n});\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nvar ButtonRow = React.createClass({\n  displayName: 'ButtonRow',\n  render: function () {\n    var buttons = this.props.buttons.map(function (b) {\n      return React.createElement(Button, {\n        action: b.action,\n        icon: b.icon,\n        text: b.text\n      });\n    });\n    return React.createElement('div', null, buttons);\n  }\n});\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// Listen for geolocation\n\nvar userLocation = null;\nvar registered = false;\n\nif ('geolocation' in navigator) {\n  var toggleTracking = function () {\n    if (!registered) {\n      navigator.geolocation.watchPosition(CurrentLocationActions.panToPosition);\n      registered = true;\n    }\n\n    CurrentLocationActions.toggleTracking();\n  };\n\n  userLocation = {\n    icon: 'b1 fa fa-location-arrow',\n    action: toggleTracking\n  };\n}\n\nvar EngineControlsBottom = React.createClass({\n  displayName: 'EngineControlsBottom',\n  getInitialState: function () {\n    return UserInterfaceStore$1.getState();\n  },\n  componentDidMount: function () {\n    UserInterfaceStore$1.listen(this.onStoreChange);\n    this.setState(this.getInitialState());\n  },\n  onStoreChange: function (storeState) {\n    this.setState(storeState);\n  },\n  shouldComponentUpdate: function (nextProps, nextState) {\n    return this.state.userLocationControlVisible !== nextState.userLocationControlVisible;\n  },\n  render: function () {\n    var buttons = [];\n\n    if (this.state.userLocationControlVisible) {\n      buttons.push(React.createElement(ButtonRow, {\n        className: \"engine-controls-user-location\",\n        buttons: [userLocation]\n      }));\n    }\n\n    var style = {\n      position: 'absolute',\n      top: 'initial',\n      bottom: 15,\n      right: 8\n    };\n    return React.createElement('div', {\n      style: style,\n      className: \"engine-controls bottom\"\n    }, buttons);\n  }\n});\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nvar zoomButtons = [{\n  icon: 'b1 fa fa-minus',\n  action: UserActions.zoomOut\n}, {\n  icon: 'b1 fa fa-plus',\n  action: UserActions.zoomIn\n}];\nvar camButtons = [{\n  text: '2D',\n  action: function () {\n    UserActions.setCameraMode('2D');\n    UserActions.setTerrainEffectContours();\n  }\n}, {\n  text: '3D',\n  action: function () {\n    UserActions.setCameraMode('3D');\n    UserActions.setTerrainEffectNone();\n  }\n}];\nvar rotateButtons = [{\n  icon: 'b1 fa fa-rotate-right',\n  action: UserActions.rotateRight\n}, {\n  icon: 'b1 fa fa-rotate-left',\n  action: UserActions.rotateLeft\n}];\nvar EngineControlsTop = React.createClass({\n  displayName: 'EngineControlsTop',\n  getInitialState: function () {\n    return UserInterfaceStore$1.getState();\n  },\n  componentDidMount: function () {\n    UserInterfaceStore$1.listen(this.onStoreChange);\n    this.setState(this.getInitialState());\n  },\n  onStoreChange: function (storeState) {\n    this.setState(storeState);\n  },\n  shouldComponentUpdate: function (nextProps, nextState) {\n    return this.state.cameraModeControlVisible !== nextState.cameraModeControlVisible || this.state.rotationControlVisible !== nextState.rotationControlVisible || this.state.zoomControlVisible !== nextState.zoomControlVisible;\n  },\n  render: function () {\n    var buttons = [];\n\n    if (this.state.zoomControlVisible) {\n      buttons.push(React.createElement(ButtonRow, {\n        className: \"engine-controls-zoom\",\n        buttons: zoomButtons\n      }));\n    }\n\n    if (this.state.cameraModeControlVisible) {\n      buttons.push(React.createElement(ButtonRow, {\n        className: \"engine-controls-cam\",\n        buttons: camButtons\n      }));\n    }\n\n    if (this.state.rotationControlVisible) {\n      buttons.push(React.createElement(ButtonRow, {\n        className: \"engine-controls-rotate\",\n        buttons: rotateButtons\n      }));\n    }\n\n    var style = {\n      position: 'absolute',\n      top: 6,\n      right: 8\n    };\n    return React.createElement('div', {\n      style: style,\n      className: \"engine-controls\"\n    }, buttons);\n  }\n});\nvar logo = \"url(\\\"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect x='34.32' y='1.52' width='57.03' height='57.03' fill='%23fff'/><rect x='34.32' y='69.96' width='28.52' height='28.52' fill='%23fff'/><rect x='8.65' y='69.96' width='14.26' height='14.26' fill='%23fff'/><rect x='15.78' y='51.43' width='7.13' height='7.13' fill='%23fff'/></svg>\\\")\\n\";\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nvar PoweredBy = React.createClass({\n  displayName: 'PoweredBy',\n  render: function () {\n    var containerStyle = {\n      position: 'absolute',\n      padding: '11px 8px',\n      bottom: 0,\n      opacity: 0.9,\n      WebkitTouchCallout: 'none',\n      WebkitUserSelect: 'none',\n      KhtmlUserSelect: 'none',\n      MozUserSelect: 'none',\n      MsUserSelect: 'none',\n      userSelect: 'none'\n    };\n    var logoStyle = {\n      backgroundImage: logo,\n      backgroundRepeat: 'no-repeat',\n      display: 'block',\n      height: 40,\n      width: 40\n    };\n    var link = 'https://github.com/felixpalmer/procedural-gl-js';\n    return React.createElement('div', {\n      className: \"powered-by\",\n      style: containerStyle\n    }, React.createElement('a', {\n      href: link,\n      target: \"_blank\",\n      style: logoStyle\n    }));\n  }\n});\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// Root React component\n\nvar App = React.createClass({\n  displayName: 'App',\n  render: function () {\n    return React.createElement(Container, null, React.createElement(Engine, null), React.createElement(Credits, null), React.createElement(EngineControlsTop, null), React.createElement(EngineControlsBottom, null), React.createElement(Compass, null), React.createElement(PoweredBy, null));\n  }\n});\n\nvar renderApp = function (state) {\n  if (state.appContainer) {\n    React.render(React.createElement(App, null), state.appContainer);\n  }\n};\n\nAppStore$1.listen(renderApp);\nConfigActions.configureCamera({\n  minDistance: 500,\n  minHeight: 250,\n  zoomInDuration: 0.8,\n  zoomOutDuration: 1\n});\napp.init();\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\n/*global '1.0.17'*/\n\nconsole.log('Procedural v' + '1.0.17'); // Re-export public API\n\nconst Procedural$9 = { ...Procedural,\n  ...Procedural$1,\n  ...Procedural$2,\n  ...Procedural$3,\n  ...Procedural$4,\n  ...Procedural$5,\n  ...Procedural$6,\n  ...Procedural$7,\n  ...Procedural$8\n}; // Proxy through setters as destructing won't pass these through\n\nlet listeners = ['onFeatureClicked', 'onFeatureSelected', 'onOverlayAdded'];\n\nfor (let l of listeners) {\n  Object.defineProperty(Procedural$9, l, {\n    set: fn => Procedural$5[l] = fn\n  });\n}\n\nlisteners = ['onCameraChange'];\n\nfor (let l of listeners) {\n  Object.defineProperty(Procedural$9, l, {\n    set: fn => Procedural[l] = fn\n  });\n}\n\nlisteners = ['onBoundsFocused', 'onLocationError', 'onLocationFocused', 'onLocationLoaded', 'onUserInteraction'];\n\nfor (let l of listeners) {\n  Object.defineProperty(Procedural$9, l, {\n    set: fn => Procedural$2[l] = fn\n  });\n}\n\nexport default Procedural$9;","map":{"version":3,"sources":["/Users/graham_bates/Documents/Dev/procdemo2/node_modules/procedural-gl/build/procedural-gl.module.js"],"names":["commonjsGlobal","globalThis","window","global","self","unwrapExports","x","__esModule","Object","prototype","hasOwnProperty","call","createCommonjsModule","fn","module","exports","commonjsRequire","Error","lodash_min","t","r","n","length","apply","e","u","o","i","Array","c","Mr","a","f","s","has","l","h","size","forEach","p","v","y","b","clear","set","_","__data__","Ie","g","d","Nr","ce","j","w","O","m","A","W","pop","ge","z","S","push","k","$","hash","map","Se","string","E","Bt","delete","I","get","F","L","P","add","M","T","U","B","N","C","D","R","Ur","V","Xe","Qe","Ye","ru","String","Gt","q","lr","J","G","zt","xr","H","Sr","je","configurable","enumerable","value","writable","K","Dr","Rr","Vr","br","Vt","At","Ge","un","on","gt","sn","Yr","qt","St","xt","Vn","Wt","tu","Ze","Tt","Mt","Q","Re","X","_t","or","Y","Z","_n","de","Dt","nr","tt","rt","_r","nt","et","Zr","Ft","Lt","qr","Pt","ut","cn","ot","Wr","it","Qt","vr","se","Nn","test","ir","ct","vn","at","yr","Rn","ft","$r","pt","ht","Fr","st","Xt","me","lt","rr","Nt","Zt","Jt","Yt","Ar","zr","vt","yt","He","er","bt","gr","Ne","Jr","Je","Or","slice","ve","constructor","copy","dt","byteLength","pe","jt","buffer","byteOffset","wt","source","Tn","exec","lastIndex","Ot","Be","mt","qe","We","kt","Ht","$t","hr","Et","It","Ut","jn","dn","rn","nn","an","en","name","message","pn","yn","bn","iteratee","Er","arguments","Kt","Ct","fe","Rt","index","input","Ce","ye","wn","On","mn","An","zn","xn","Sn","kn","$n","Kr","Dn","In","En","ae","ue","tr","fr","Cr","cache","Ae","ur","ze","Hr","Gr","ie","cr","jr","ar","De","TypeError","Br","Cache","sr","pr","tn","hn","dr","wr","Qr","Xr","valueOf","replace","Pn","Bn","Cn","qn","Un","mr","kr","Ir","Lr","Pr","Tr","NaN","ln","gn","Fn","Ln","Mn","parseInt","Wn","Gn","Hn","Function","Jn","nodeType","Kn","Qn","Xn","process","Yn","binding","Zn","isMap","te","isSet","re","isTypedArray","ne","ee","oe","toString","keys","IE_PROTO","RegExp","le","Buffer","he","Symbol","Uint8Array","allocUnsafe","getPrototypeOf","be","create","_e","propertyIsEnumerable","splice","toStringTag","we","getOwnPropertySymbols","Oe","isBuffer","Math","max","Date","now","xe","ke","$e","Ee","Fe","Le","Pe","Me","Te","Ue","Ve","ArrayBuffer","resolve","charCodeAt","Ke","isArray","nu","eu","assign","constant","defaults","keysIn","matchesProperty","memoize","property","clone","eq","find","findIndex","forOwn","hasIn","identity","isArguments","isArrayLike","isEqual","isFunction","isLength","isObject","isObjectLike","isSymbol","stubArray","stubFalse","toFinite","toInteger","toNumber","each","VERSION","alt_min","code","defineProperties","defineProperty","__description__","__tag__","for","keyFor","substr","hasInstance","isConcatSpreadable","iterator","match","search","species","split","toPrimitive","unscopables","context","once","_events","listeners","emit","removeListener","removeAllListeners","off","addListener","setMaxListeners","EventEmitter","EventEmitter2","EventEmitter3","Dispatcher","$Dispatcher_callbacks","$Dispatcher_isPending","$Dispatcher_isHandled","$Dispatcher_isDispatching","$Dispatcher_pendingPayload","register","unregister","waitFor","$Dispatcher_invokeCallback","dispatch","$Dispatcher_startDispatching","$Dispatcher_stopDispatching","isDispatching","framesToPop","key","default","uid","ACTIONS_REGISTRY","namespace","id","symbol","ACTION_HANDLER","defer","setTimeout","ACTION_KEY","data","actions","ACTION_UID","bind","actionDetails","alt","LIFECYCLE","STATE_CONTAINER","_storeName","boundListeners","ALL_LISTENERS","StoreModel","PUBLIC_METHODS","dispatchToken","dispatcher","LISTENERS","action","HANDLING_ERRORS","emitChange","unlisten","config","getState","eventemitter3","ReferenceError","exportAsync","registerAsync","reduce","getInstance","local","concat","shouldFetch","interceptResponse","loading","remote","then","success","catch","error","exportPublicMethods","isLoading","eachObject","bindAction","bindActions","toUpperCase","bindListeners","getOwnPropertyDescriptor","createStoreConfig","setState","transformStore","createStoreFromObject","lifecycle","state","publicMethods","displayName","createStoreFromClass","__proto__","datasource","stateKey","getInternalMethods","INIT_SNAPSHOT","LAST_SNAPSHOT","getOwnPropertyNames","indexOf","warn","console","formatAsConstant","toLowerCase","dispatchIdentity","setAppState","deserialize","stores","onDeserialize","snapshot","onSerialize","saveInitialSnapshot","serialize","filterSnapshots","JSON","stringify","parse","storeTransforms","details","createActions","recycle","generateActions","createStore","flux","Alt","Number","EPSILON","undefined","pow","isInteger","isFinite","floor","sign","target","output","nextKey","REVISION","MOUSE","LEFT","MIDDLE","RIGHT","ROTATE","DOLLY","PAN","TOUCH","DOLLY_PAN","DOLLY_ROTATE","CullFaceNone","CullFaceBack","CullFaceFront","CullFaceFrontBack","FrontFaceDirectionCW","FrontFaceDirectionCCW","BasicShadowMap","PCFShadowMap","PCFSoftShadowMap","VSMShadowMap","FrontSide","BackSide","DoubleSide","FlatShading","SmoothShading","NoBlending","NormalBlending","AdditiveBlending","SubtractiveBlending","MultiplyBlending","CustomBlending","AddEquation","SubtractEquation","ReverseSubtractEquation","MinEquation","MaxEquation","ZeroFactor","OneFactor","SrcColorFactor","OneMinusSrcColorFactor","SrcAlphaFactor","OneMinusSrcAlphaFactor","DstAlphaFactor","OneMinusDstAlphaFactor","DstColorFactor","OneMinusDstColorFactor","SrcAlphaSaturateFactor","NeverDepth","AlwaysDepth","LessDepth","LessEqualDepth","EqualDepth","GreaterEqualDepth","GreaterDepth","NotEqualDepth","MultiplyOperation","MixOperation","AddOperation","NoToneMapping","LinearToneMapping","ReinhardToneMapping","Uncharted2ToneMapping","CineonToneMapping","ACESFilmicToneMapping","UVMapping","CubeReflectionMapping","CubeRefractionMapping","EquirectangularReflectionMapping","EquirectangularRefractionMapping","SphericalReflectionMapping","CubeUVReflectionMapping","CubeUVRefractionMapping","RepeatWrapping","ClampToEdgeWrapping","MirroredRepeatWrapping","NearestFilter","NearestMipmapNearestFilter","NearestMipMapNearestFilter","NearestMipmapLinearFilter","NearestMipMapLinearFilter","LinearFilter","LinearMipmapNearestFilter","LinearMipMapNearestFilter","LinearMipmapLinearFilter","LinearMipMapLinearFilter","UnsignedByteType","ByteType","ShortType","UnsignedShortType","IntType","UnsignedIntType","FloatType","HalfFloatType","UnsignedShort4444Type","UnsignedShort5551Type","UnsignedShort565Type","UnsignedInt248Type","AlphaFormat","RGBFormat","RGBAFormat","LuminanceFormat","LuminanceAlphaFormat","RGBEFormat","DepthFormat","DepthStencilFormat","RedFormat","RedIntegerFormat","RGFormat","RGIntegerFormat","RGBIntegerFormat","RGBAIntegerFormat","RGB_S3TC_DXT1_Format","RGBA_S3TC_DXT1_Format","RGBA_S3TC_DXT3_Format","RGBA_S3TC_DXT5_Format","RGB_PVRTC_4BPPV1_Format","RGB_PVRTC_2BPPV1_Format","RGBA_PVRTC_4BPPV1_Format","RGBA_PVRTC_2BPPV1_Format","RGB_ETC1_Format","RGB_ETC2_Format","RGBA_ETC2_EAC_Format","RGBA_ASTC_4x4_Format","RGBA_ASTC_5x4_Format","RGBA_ASTC_5x5_Format","RGBA_ASTC_6x5_Format","RGBA_ASTC_6x6_Format","RGBA_ASTC_8x5_Format","RGBA_ASTC_8x6_Format","RGBA_ASTC_8x8_Format","RGBA_ASTC_10x5_Format","RGBA_ASTC_10x6_Format","RGBA_ASTC_10x8_Format","RGBA_ASTC_10x10_Format","RGBA_ASTC_12x10_Format","RGBA_ASTC_12x12_Format","SRGB8_ALPHA8_ASTC_4x4_Format","SRGB8_ALPHA8_ASTC_5x4_Format","SRGB8_ALPHA8_ASTC_5x5_Format","SRGB8_ALPHA8_ASTC_6x5_Format","SRGB8_ALPHA8_ASTC_6x6_Format","SRGB8_ALPHA8_ASTC_8x5_Format","SRGB8_ALPHA8_ASTC_8x6_Format","SRGB8_ALPHA8_ASTC_8x8_Format","SRGB8_ALPHA8_ASTC_10x5_Format","SRGB8_ALPHA8_ASTC_10x6_Format","SRGB8_ALPHA8_ASTC_10x8_Format","SRGB8_ALPHA8_ASTC_10x10_Format","SRGB8_ALPHA8_ASTC_12x10_Format","SRGB8_ALPHA8_ASTC_12x12_Format","LoopOnce","LoopRepeat","LoopPingPong","InterpolateDiscrete","InterpolateLinear","InterpolateSmooth","ZeroCurvatureEnding","ZeroSlopeEnding","WrapAroundEnding","TrianglesDrawMode","TriangleStripDrawMode","TriangleFanDrawMode","LinearEncoding","sRGBEncoding","GammaEncoding","RGBEEncoding","LogLuvEncoding","RGBM7Encoding","RGBM16Encoding","RGBDEncoding","BasicDepthPacking","RGBADepthPacking","TangentSpaceNormalMap","ObjectSpaceNormalMap","ZeroStencilOp","KeepStencilOp","ReplaceStencilOp","IncrementStencilOp","DecrementStencilOp","IncrementWrapStencilOp","DecrementWrapStencilOp","InvertStencilOp","NeverStencilFunc","LessStencilFunc","EqualStencilFunc","LessEqualStencilFunc","GreaterStencilFunc","NotEqualStencilFunc","GreaterEqualStencilFunc","AlwaysStencilFunc","StaticDrawUsage","DynamicDrawUsage","StreamDrawUsage","StaticReadUsage","DynamicReadUsage","StreamReadUsage","StaticCopyUsage","DynamicCopyUsage","StreamCopyUsage","EventDispatcher","addEventListener","type","listener","_listeners","hasEventListener","removeEventListener","listenerArray","dispatchEvent","event","array","_lut","MathUtils","DEG2RAD","PI","RAD2DEG","generateUUID","d0","random","d1","d2","d3","uuid","clamp","min","euclideanModulo","mapLinear","a1","a2","b1","b2","lerp","smoothstep","smootherstep","randInt","low","high","randFloat","randFloatSpread","range","degToRad","degrees","radToDeg","radians","isPowerOfTwo","ceilPowerOfTwo","ceil","log","LN2","floorPowerOfTwo","setQuaternionFromProperEuler","order","cos","sin","c2","s2","c13","s13","c1_3","s1_3","c3_1","s3_1","Vector2","isVector2","setScalar","scalar","setX","setY","setComponent","getComponent","addVectors","addScalar","addScaledVector","sub","subVectors","subScalar","multiply","multiplyScalar","divide","divideScalar","applyMatrix3","elements","clampScalar","minVal","maxVal","clampLength","round","roundToZero","negate","dot","cross","lengthSq","sqrt","manhattanLength","abs","normalize","angle","atan2","distanceTo","distanceToSquared","dx","dy","manhattanDistanceTo","setLength","alpha","lerpVectors","v1","v2","equals","fromArray","offset","toArray","fromBufferAttribute","attribute","getX","getY","rotateAround","center","Matrix3","isMatrix3","n11","n12","n13","n21","n22","n23","n31","n32","n33","extractBasis","xAxis","yAxis","zAxis","setFromMatrix3Column","setFromMatrix4","multiplyMatrices","premultiply","a11","a12","a13","a21","a22","a23","a31","a32","a33","b11","b12","b13","b21","b22","b23","b31","b32","b33","determinant","getInverse","matrix","throwOnDegenerate","isMatrix4","t11","t12","t13","det","msg","detInv","transpose","tmp","getNormalMatrix","matrix4","transposeIntoArray","setUvTransform","tx","ty","sx","sy","rotation","cx","cy","scale","rotate","theta","translate","_canvas","ImageUtils","getDataURL","image","canvas","HTMLCanvasElement","src","document","createElementNS","width","height","getContext","ImageData","putImageData","drawImage","toDataURL","textureId","Texture","mapping","wrapS","wrapT","magFilter","minFilter","format","anisotropy","encoding","DEFAULT_IMAGE","mipmaps","DEFAULT_MAPPING","internalFormat","repeat","matrixAutoUpdate","generateMipmaps","premultiplyAlpha","flipY","unpackAlignment","version","onUpdate","isTexture","updateMatrix","toJSON","meta","isRootObject","textures","metadata","generator","wrap","images","url","dispose","transformUv","uv","Vector4","isVector4","setZ","setW","applyMatrix4","setAxisAngleFromQuaternion","acos","setAxisAngleFromRotationMatrix","epsilon","epsilon2","m11","m12","m13","m21","m22","m23","m31","m32","m33","xx","yy","zz","xy","xz","yz","getZ","getW","WebGLRenderTarget","options","scissor","scissorTest","viewport","texture","depthBuffer","stencilBuffer","depthTexture","isWebGLRenderTarget","setSize","WebGLMultisampleRenderTarget","samples","isWebGLMultisampleRenderTarget","Quaternion","_x","_y","_z","_w","slerp","qa","qb","qm","slerpFlat","dst","dstOffset","src0","srcOffset0","src1","srcOffset1","x0","y0","z0","w0","x1","y1","z1","w1","dir","sqrSin","len","tDir","_onChangeCallback","isQuaternion","quaternion","setFromEuler","euler","update","isEuler","c1","c3","s1","s3","setFromAxisAngle","axis","halfAngle","setFromRotationMatrix","trace","setFromUnitVectors","vFrom","vTo","EPS","angleTo","rotateTowards","step","inverse","conjugate","multiplyQuaternions","qax","qay","qaz","qaw","qbx","qby","qbz","qbw","cosHalfTheta","sqrSinHalfTheta","sinHalfTheta","halfTheta","ratioA","ratioB","_onChange","callback","_vector","Vector3","_quaternion","isVector3","multiplyVectors","applyEuler","applyQuaternion","applyAxisAngle","applyNormalMatrix","qx","qy","qz","qw","ix","iy","iz","iw","project","camera","matrixWorldInverse","projectionMatrix","unproject","projectionMatrixInverse","matrixWorld","transformDirection","crossVectors","ax","ay","az","bx","by","bz","projectOnVector","denominator","projectOnPlane","planeNormal","reflect","normal","dz","setFromSpherical","setFromSphericalCoords","radius","phi","sinPhiRadius","setFromCylindrical","setFromCylindricalCoords","setFromMatrixPosition","setFromMatrixScale","setFromMatrixColumn","sz","_v1","_m1","Matrix4","_zero","_one","n14","n24","n34","n41","n42","n43","n44","copyPosition","makeBasis","extractRotation","scaleX","scaleY","scaleZ","makeRotationFromEuler","af","bf","cf","df","ac","ad","bc","bd","makeRotationFromQuaternion","compose","lookAt","eye","up","a14","a24","a34","a41","a42","a43","a44","b14","b24","b34","b41","b42","b43","b44","setPosition","t14","getMaxScaleOnAxis","scaleXSq","scaleYSq","scaleZSq","makeTranslation","makeRotationX","makeRotationY","makeRotationZ","makeRotationAxis","makeScale","makeShear","position","x2","y2","z2","wx","wy","wz","decompose","invSX","invSY","invSZ","makePerspective","left","right","top","bottom","near","far","makeOrthographic","_matrix","_quaternion$1","Euler","_order","DefaultOrder","RotationOrders","asin","setFromQuaternion","setFromVector3","reorder","newOrder","toVector3","optionalResult","Layers","mask","channel","enable","enableAll","toggle","disable","disableAll","layers","_object3DId","_v1$1","_q1","_m1$1","_target","_position","_scale","_quaternion$2","_xAxis","_yAxis","_zAxis","_addedEvent","_removedEvent","Object3D","parent","children","DefaultUp","onRotationChange","onQuaternionChange","modelViewMatrix","normalMatrix","DefaultMatrixAutoUpdate","matrixWorldNeedsUpdate","visible","castShadow","receiveShadow","frustumCulled","renderOrder","userData","isObject3D","onBeforeRender","onAfterRender","setRotationFromAxisAngle","setRotationFromEuler","setRotationFromMatrix","setRotationFromQuaternion","rotateOnAxis","rotateOnWorldAxis","rotateX","rotateY","rotateZ","translateOnAxis","distance","translateX","translateY","translateZ","localToWorld","vector","worldToLocal","updateWorldMatrix","isCamera","object","remove","attach","getObjectById","getObjectByProperty","getObjectByName","child","getWorldPosition","updateMatrixWorld","getWorldQuaternion","getWorldScale","getWorldDirection","raycast","traverse","traverseVisible","traverseAncestors","force","updateParents","updateChildren","geometries","materials","shapes","library","element","isMesh","geometry","parameters","shape","material","uuids","extractFromCache","values","recursive","Scene","background","environment","fog","overrideMaterial","autoUpdate","__THREE_DEVTOOLS__","CustomEvent","detail","isScene","_points","_vector$1","_box","Box3","_v0","_v1$2","_v2","_f0","_f1","_f2","_center","_extents","_triangleNormal","_testAxis","Infinity","isBox3","setFromArray","minX","minY","minZ","maxX","maxY","maxZ","setFromBufferAttribute","count","setFromPoints","points","makeEmpty","il","expandByPoint","setFromCenterAndSize","halfSize","setFromObject","expandByObject","box","isEmpty","getCenter","getSize","point","expandByVector","expandByScalar","boundingBox","computeBoundingBox","union","containsPoint","containsBox","getParameter","intersectsBox","intersectsSphere","sphere","clampPoint","intersectsPlane","plane","intersectsTriangle","triangle","axes","satForAxes","distanceToPoint","clampedPoint","getBoundingSphere","intersect","v0","extents","p0","p1","p2","_box$1","Sphere","optionalCenter","maxRadiusSq","empty","radiusSum","deltaLengthSq","getBoundingBox","Ray","_vector1","_vector2","_normalMatrix","Plane","isPlane","setComponents","setFromNormalAndCoplanarPoint","setFromCoplanarPoints","inverseNormalLength","distanceToSphere","projectPoint","intersectLine","line","direction","delta","start","intersectsLine","startSign","endSign","end","coplanarPoint","optionalNormalMatrix","referencePoint","_v0$1","_v1$3","_v2$1","_v3","_vab","_vac","_vbc","_vap","_vbp","_vcp","Triangle","getNormal","targetLengthSq","getBarycoord","dot00","dot01","dot02","dot11","dot12","denom","invDenom","getUV","p3","uv1","uv2","uv3","isFrontFacing","setFromPointsAndIndices","i0","i1","i2","getArea","getMidpoint","getPlane","closestPointToPoint","d4","vc","d5","d6","vb","va","_colorKeywords","_hslA","_hslB","Color","setRGB","hue2rgb","SRGBToLinear","LinearToSRGB","isColor","setHex","setStyle","hex","setHSL","style","handleAlpha","parseFloat","color","components","charAt","setColorName","copyGammaToLinear","gammaFactor","copyLinearToGamma","safeInverse","convertGammaToLinear","convertLinearToGamma","copySRGBToLinear","copyLinearToSRGB","convertSRGBToLinear","convertLinearToSRGB","getHex","getHexString","getHSL","hue","saturation","lightness","getStyle","offsetHSL","addColors","color1","color2","lerpHSL","NAMES","Face3","materialIndex","vertexNormals","vertexColors","materialId","Material","blending","side","flatShading","opacity","transparent","blendSrc","blendDst","blendEquation","blendSrcAlpha","blendDstAlpha","blendEquationAlpha","depthFunc","depthTest","depthWrite","stencilWriteMask","stencilFunc","stencilRef","stencilFuncMask","stencilFail","stencilZFail","stencilZPass","stencilWrite","clippingPlanes","clipIntersection","clipShadows","shadowSide","colorWrite","precision","polygonOffset","polygonOffsetFactor","polygonOffsetUnits","dithering","alphaTest","premultipliedAlpha","toneMapped","isMaterial","onBeforeCompile","setValues","newValue","currentValue","isRoot","roughness","metalness","sheen","emissive","emissiveIntensity","specular","shininess","clearcoat","clearcoatRoughness","clearcoatNormalMap","clearcoatNormalScale","matcap","alphaMap","lightMap","aoMap","aoMapIntensity","bumpMap","bumpScale","normalMap","normalMapType","normalScale","displacementMap","displacementScale","displacementBias","roughnessMap","metalnessMap","emissiveMap","specularMap","gradientMap","sizeAttenuation","linewidth","dashSize","gapSize","wireframe","wireframeLinewidth","wireframeLinecap","wireframeLinejoin","morphNormals","skinning","srcPlanes","dstPlanes","MeshBasicMaterial","_vector$3","BufferAttribute","itemSize","normalized","usage","updateRange","isBufferAttribute","onUploadCallback","setUsage","copyAt","index1","index2","copyArray","copyColorsArray","colors","copyVector2sArray","vectors","copyVector3sArray","copyVector4sArray","setXYZ","setXY","setXYZW","onUpload","Int8BufferAttribute","Int8Array","Uint8BufferAttribute","Uint8ClampedBufferAttribute","Uint8ClampedArray","Int16BufferAttribute","Int16Array","Uint16BufferAttribute","Uint16Array","Int32BufferAttribute","Int32Array","Uint32BufferAttribute","Uint32Array","Float32BufferAttribute","Float32Array","Float64BufferAttribute","Float64Array","DirectGeometry","arrayMax","_bufferGeometryId","_m1$2","_obj","_offset","_box$2","_boxMorphTargets","_vector$4","BufferGeometry","attributes","morphAttributes","morphTargetsRelative","groups","boundingSphere","drawRange","isBufferGeometry","getIndex","setIndex","getAttribute","setAttribute","deleteAttribute","addGroup","clearGroups","setDrawRange","needsUpdate","tangent","computeBoundingSphere","isGeometry","fromGeometry","updateFromObject","direct","__directGeometry","elementsNeedUpdate","verticesNeedUpdate","normalsNeedUpdate","colorsNeedUpdate","uvsNeedUpdate","groupsNeedUpdate","vertices","normals","uvs","lineDistancesNeedUpdate","lineDistance","lineDistances","computeGroups","fromDirectGeometry","positions","uvs2","morphTargets","morphTarget","skinIndices","skinWeights","morphAttributesPosition","morphAttribute","isNaN","jl","computeFaceNormals","computeVertexNormals","vA","vB","vC","pA","pB","pC","cb","ab","indices","normalizeNormals","merge","attribute1","attributeArray1","attribute2","attributeArray2","attributeOffset","toNonIndexed","convertBufferAttribute","array2","geometry2","newAttribute","morphArray","group","attributeData","hasMorphAttributes","attributeArray","_inverseMatrix","_ray","_sphere","_vA","_vB","_vC","_uvA","_uvB","_uvC","_intersectionPoint","_intersectionPointWorld","Mesh","updateMorphTargets","morphTargetInfluences","morphTargetDictionary","ml","raycaster","intersects","ray","intersection","morphPosition","groupMaterial","checkBufferGeometryIntersection","faceIndex","face","fvA","fvB","fvC","isMultiMaterial","faces","faceVertexUvs","fl","faceMaterial","checkIntersection","uvs_f","intersectTriangle","origin","morphInfluences","_geometryId","_m1$3","_obj$1","_offset$1","Geometry","vertex","fromBufferGeometry","scope","addFace","areaWeighted","vl","computeFlatVertexNormals","computeMorphNormals","__originalFaceNormal","__originalVertexNormals","tmpGeo","faceNormals","dstNormalsFace","dstNormalsVertex","faceNormal","materialIndexOffset","vertexOffset","vertices1","vertices2","faces1","faces2","colors1","colors2","vertexCopy","faceCopy","faceVertexNormals","faceVertexColors","faceVertexUvs2","uvsCopy","kl","mergeMesh","mesh","mergeVertices","verticesMap","unique","changes","precisionPoints","faceIndicesToRemove","idx","diff","sortFacesByMaterialIndex","_id","materialIndexSort","sort","uvs1","newUvs1","newUvs2","normalsHash","colorsHash","uvsHash","hasMaterial","hasFaceUv","hasFaceVertexUv","hasFaceNormal","hasFaceVertexNormal","hasFaceColor","hasFaceVertexColor","faceType","setBit","getUvIndex","getNormalIndex","getColorIndex","enabled","morphNormal","srcVertexNormal","destVertexNormal","BoxGeometry","depth","widthSegments","heightSegments","depthSegments","BoxBufferGeometry","numberOfVertices","groupStart","buildPlane","udir","vdir","gridX","gridY","segmentWidth","segmentHeight","widthHalf","heightHalf","depthHalf","gridX1","gridY1","vertexCounter","groupCount","cloneUniforms","mergeUniforms","uniforms","merged","UniformsUtils","default_vertex","default_fragment","ShaderMaterial","defines","vertexShader","fragmentShader","lights","clipping","extensions","derivatives","fragDepth","drawBuffers","shaderTextureLOD","defaultAttributeValues","index0AttributeName","uniformsNeedUpdate","isShaderMaterial","uniform","Camera","PerspectiveCamera","fov","aspect","zoom","focus","view","filmGauge","filmOffset","updateProjectionMatrix","isPerspectiveCamera","setFocalLength","focalLength","vExtentSlope","getFilmHeight","atan","getFocalLength","tan","getEffectiveFOV","getFilmWidth","setViewOffset","fullWidth","fullHeight","offsetX","offsetY","clearViewOffset","skew","CubeCamera","cubeResolution","cameraPX","cameraNX","cameraPY","cameraNY","cameraPZ","cameraNZ","renderTarget","WebGLCubeRenderTarget","renderer","scene","currentRenderTarget","getRenderTarget","setRenderTarget","render","stencil","DataTexture","isDataTexture","_sphere$1","_vector$5","Frustum","p4","p5","planes","frustum","setFromProjectionMatrix","me0","me1","me2","me3","me4","me5","me6","me7","me8","me9","me10","me11","me12","me13","me14","me15","intersectsObject","intersectsSprite","sprite","negRadius","UniformsLib","common","diffuse","uvTransform","uv2Transform","specularmap","envmap","envMap","flipEnvMap","reflectivity","refractionRatio","maxMipLevel","aomap","lightmap","lightMapIntensity","emissivemap","bumpmap","normalmap","displacementmap","roughnessmap","metalnessmap","gradientmap","fogDensity","fogNear","fogFar","fogColor","ambientLightColor","lightProbe","directionalLights","properties","directionalLightShadows","shadowBias","shadowRadius","shadowMapSize","directionalShadowMap","directionalShadowMatrix","spotLights","coneCos","penumbraCos","decay","spotLightShadows","spotShadowMap","spotShadowMatrix","pointLights","pointLightShadows","shadowCameraNear","shadowCameraFar","pointShadowMap","pointShadowMatrix","hemisphereLights","skyColor","groundColor","rectAreaLights","WebGLAnimation","isAnimating","animationLoop","onAnimationFrame","time","frame","requestAnimationFrame","stop","setAnimationLoop","setContext","WebGLAttributes","gl","capabilities","isWebGL2","buffers","WeakMap","createBuffer","bufferType","bindBuffer","bufferData","bytesPerElement","BYTES_PER_ELEMENT","updateBuffer","bufferSubData","subarray","isInterleavedBufferAttribute","deleteBuffer","PlaneGeometry","PlaneBufferGeometry","width_half","height_half","segment_width","segment_height","alphamap_fragment","alphamap_pars_fragment","alphatest_fragment","aomap_fragment","aomap_pars_fragment","begin_vertex","beginnormal_vertex","bsdfs","bumpmap_pars_fragment","clipping_planes_fragment","clipping_planes_pars_fragment","clipping_planes_pars_vertex","clipping_planes_vertex","color_fragment","color_pars_fragment","color_pars_vertex","color_vertex","cube_uv_reflection_fragment","defaultnormal_vertex","displacementmap_pars_vertex","displacementmap_vertex","emissivemap_fragment","emissivemap_pars_fragment","encodings_fragment","encodings_pars_fragment","envmap_fragment","envmap_common_pars_fragment","envmap_pars_fragment","envmap_pars_vertex","envmap_vertex","fog_vertex","fog_pars_vertex","fog_fragment","fog_pars_fragment","gradientmap_pars_fragment","lightmap_fragment","lightmap_pars_fragment","lights_lambert_vertex","lights_pars_begin","envmap_physical_pars_fragment","lights_toon_fragment","lights_toon_pars_fragment","lights_phong_fragment","lights_phong_pars_fragment","lights_physical_fragment","lights_physical_pars_fragment","lights_fragment_begin","lights_fragment_maps","lights_fragment_end","logdepthbuf_fragment","logdepthbuf_pars_fragment","logdepthbuf_pars_vertex","logdepthbuf_vertex","map_fragment","map_pars_fragment","map_particle_fragment","map_particle_pars_fragment","metalnessmap_fragment","metalnessmap_pars_fragment","morphnormal_vertex","morphtarget_pars_vertex","morphtarget_vertex","normal_fragment_begin","normal_fragment_maps","normalmap_pars_fragment","clearcoat_normal_fragment_begin","clearcoat_normal_fragment_maps","clearcoat_normalmap_pars_fragment","packing","premultiplied_alpha_fragment","project_vertex","dithering_fragment","dithering_pars_fragment","roughnessmap_fragment","roughnessmap_pars_fragment","shadowmap_pars_fragment","shadowmap_pars_vertex","shadowmap_vertex","shadowmask_pars_fragment","skinbase_vertex","skinning_pars_vertex","skinning_vertex","skinnormal_vertex","specularmap_fragment","specularmap_pars_fragment","tonemapping_fragment","tonemapping_pars_fragment","uv_pars_fragment","uv_pars_vertex","uv_vertex","uv2_pars_fragment","uv2_pars_vertex","uv2_vertex","worldpos_vertex","background_frag","background_vert","cube_frag","cube_vert","depth_frag","depth_vert","distanceRGBA_frag","distanceRGBA_vert","equirect_frag","equirect_vert","linedashed_frag","linedashed_vert","meshbasic_frag","meshbasic_vert","meshlambert_frag","meshlambert_vert","meshmatcap_frag","meshmatcap_vert","meshtoon_frag","meshtoon_vert","meshphong_frag","meshphong_vert","meshphysical_frag","meshphysical_vert","normal_frag","normal_vert","points_frag","points_vert","shadow_frag","shadow_vert","sprite_frag","sprite_vert","ShaderChunk","ShaderLib","basic","lambert","phong","standard","envMapIntensity","toon","dashed","totalSize","t2D","cube","equirect","tEquirect","distanceRGBA","referencePosition","nearDistance","farDistance","shadow","WebGLBackground","objects","clearColor","clearAlpha","planeMesh","boxMesh","currentBackground","currentBackgroundVersion","currentTonemapping","renderList","forceClear","session","getSession","environmentBlendMode","setClear","autoClear","autoClearColor","autoClearDepth","autoClearStencil","toneMapping","unshift","getClearColor","setClearColor","getClearAlpha","setClearAlpha","WebGLBufferRenderer","info","mode","setMode","drawArrays","renderInstances","primcount","extension","methodName","WebGLCapabilities","maxAnisotropy","getMaxAnisotropy","MAX_TEXTURE_MAX_ANISOTROPY_EXT","getMaxPrecision","getShaderPrecisionFormat","WebGL2RenderingContext","WebGL2ComputeRenderingContext","maxPrecision","logarithmicDepthBuffer","maxTextures","maxVertexTextures","maxTextureSize","maxCubemapSize","maxAttributes","maxVertexUniforms","maxVaryings","maxFragmentUniforms","vertexTextures","floatFragmentTextures","floatVertexTextures","maxSamples","WebGLClipping","globalState","numGlobalPlanes","localClippingEnabled","renderingShadows","viewNormalMatrix","numPlanes","numIntersection","init","enableLocalClipping","projectPlanes","beginShadows","endShadows","resetGlobalState","fromCache","nGlobal","lGlobal","dstArray","clippingState","skipTransform","nPlanes","flatSize","viewMatrix","i4","WebGLExtensions","getExtension","WebGLGeometries","wireframeAttributes","onGeometryDispose","buffergeometry","memory","_bufferGeometry","geometryAttributes","updateWireframeAttribute","geometryIndex","geometryPosition","previousAttribute","getWireframeAttribute","currentAttribute","WebGLIndexedBufferRenderer","drawElements","WebGLInfo","calls","triangles","lines","instanceCount","reset","programs","autoReset","absNumericalSort","WebGLMorphtargets","influencesList","program","objectInfluences","influences","influence","morphInfluencesSum","morphBaseInfluence","getUniforms","setValue","WebGLObjects","updateMap","CubeTexture","DataTexture2DArray","DataTexture3D","emptyTexture","emptyTexture2dArray","emptyTexture3d","emptyCubeTexture","arrayCacheF32","arrayCacheI32","mat4array","mat3array","mat2array","flatten","nBlocks","blockSize","firstElem","arraysEqual","allocTexUnits","allocateTextureUnit","setValueV1f","uniform1f","addr","setValueV2f","uniform2f","uniform2fv","setValueV3f","uniform3f","uniform3fv","setValueV4f","uniform4f","uniform4fv","setValueM2","uniformMatrix2fv","setValueM3","uniformMatrix3fv","setValueM4","uniformMatrix4fv","setValueT1","unit","uniform1i","safeSetTexture2D","setValueT2DArray1","setTexture2DArray","setValueT3D1","setTexture3D","setValueT6","safeSetTextureCube","setValueV1i","setValueV2i","uniform2iv","setValueV3i","uniform3iv","setValueV4i","uniform4iv","setValueV1ui","uniform1ui","getSingularSetter","setValueV1fArray","uniform1fv","setValueV1iArray","uniform1iv","setValueV2iArray","setValueV3iArray","setValueV4iArray","setValueV2fArray","setValueV3fArray","setValueV4fArray","setValueM2Array","setValueM3Array","setValueM4Array","setValueT1Array","units","setValueT6Array","getPureArraySetter","SingleUniform","activeInfo","PureArrayUniform","updateCache","StructuredUniform","seq","RePathPart","addUniform","container","uniformObject","parseUniform","path","pathLength","matchEnd","idIsIndex","subscript","next","WebGLUniforms","getProgramParameter","getActiveUniform","getUniformLocation","setOptional","upload","seqWithValue","WebGLShader","shader","createShader","shaderSource","compileShader","programIdCount","addLineNumbers","join","getShaderErrors","status","getShaderParameter","getShaderInfoLog","trim","getShaderSource","generateExtensions","chunks","extensionDerivatives","envMapCubeUV","tangentSpaceNormalMap","shaderID","extensionFragDepth","rendererExtensionFragDepth","extensionDrawBuffers","rendererExtensionDrawBuffers","extensionShaderTextureLOD","rendererExtensionShaderTextureLod","filter","filterEmptyLine","generateDefines","fetchAttributeLocations","getActiveAttrib","getAttribLocation","replaceLightNums","numDirLights","numSpotLights","numRectAreaLights","numPointLights","numHemiLights","numDirLightShadows","numSpotLightShadows","numPointLightShadows","replaceClippingPlaneNums","numClippingPlanes","numClipIntersection","includePattern","resolveIncludes","includeReplacer","include","loopPattern","unrollLoops","loopReplacer","snippet","WebGLProgram","cacheKey","gammaFactorDefine","customExtensions","customDefines","createProgram","prefixVertex","prefixFragment","isGLSL3ShaderMaterial","versionRegex","vertexGlsl","fragmentGlsl","glVertexShader","glFragmentShader","attachShader","bindAttribLocation","linkProgram","debug","checkShaderErrors","programLog","getProgramInfoLog","vertexLog","fragmentLog","runnable","haveDiagnostics","vertexErrors","fragmentErrors","getError","diagnostics","prefix","detachShader","deleteShader","cachedUniforms","cachedAttributes","getAttributes","destroy","deleteProgram","shaderName","usedTimes","WebGLPrograms","shaderIDs","MeshDepthMaterial","MeshDistanceMaterial","MeshNormalMaterial","MeshLambertMaterial","MeshPhongMaterial","MeshToonMaterial","MeshStandardMaterial","MeshPhysicalMaterial","MeshMatcapMaterial","LineBasicMaterial","LineDashedMaterial","PointsMaterial","ShadowMaterial","SpriteMaterial","getShaderObject","shaderobject","getTextureEncodingFromMap","getParameters","shadows","nClipPlanes","nClipIntersection","maxBones","isRawShaderMaterial","instancing","supportsVertexTextures","outputEncoding","mapEncoding","matcapEncoding","envMapMode","envMapEncoding","lightMapEncoding","emissiveMapEncoding","objectSpaceNormalMap","combine","vertexTangents","vertexUvs","uvsVertexOnly","useFog","fogExp2","isFogExp2","useVertexTexture","maxMorphTargets","maxMorphNormals","directional","spot","rectArea","hemi","shadowMapEnabled","shadowMap","shadowMapType","physicallyCorrectLights","doubleSided","flipSided","depthPacking","extensionDrawbuffers","getProgramCacheKey","acquireProgram","pl","preexistingProgram","releaseProgram","WebGLProperties","painterSortStable","groupOrder","reversePainterSortStable","WebGLRenderList","renderItems","renderItemsIndex","opaque","defaultProgram","getNextRenderItem","renderItem","customOpaqueSort","customTransparentSort","finish","WebGLRenderLists","lists","onSceneDispose","cameras","list","nextVersion","shadowCastingLightsFirst","lightA","lightB","WebGLLights","directionalLength","pointLength","spotLength","rectAreaLength","hemiLength","numDirectionalShadows","numPointShadows","numSpotShadows","ambient","probe","directionalShadow","spotShadow","pointShadow","matrix42","setup","light","intensity","WebGLRenderState","lightsArray","shadowsArray","pushLight","pushShadow","shadowLight","setupLights","WebGLRenderStates","renderStates","renderState","isMeshDepthMaterial","WebGLShadowMap","WebGLState","ColorBuffer","locked","currentColorMask","currentColorClear","setMask","colorMask","setLocked","lock","DepthBuffer","currentDepthMask","currentDepthFunc","currentDepthClear","setTest","depthMask","setFunc","clearDepth","StencilBuffer","currentStencilMask","currentStencilFunc","currentStencilRef","currentStencilFuncMask","currentStencilFail","currentStencilZFail","currentStencilZPass","currentStencilClear","stencilTest","stencilMask","setOp","stencilOp","clearStencil","colorBuffer","maxVertexAttributes","newAttributes","enabledAttributes","attributeDivisors","enabledCapabilities","currentProgram","currentBlendingEnabled","currentBlending","currentBlendEquation","currentBlendSrc","currentBlendDst","currentBlendEquationAlpha","currentBlendSrcAlpha","currentBlendDstAlpha","currentPremultipledAlpha","currentFlipSided","currentCullFace","currentLineWidth","currentPolygonOffsetFactor","currentPolygonOffsetUnits","lineWidthAvailable","glVersion","currentTextureSlot","currentBoundTextures","currentScissor","currentViewport","createTexture","bindTexture","texParameteri","texImage2D","emptyTextures","setFlipSided","setCullFace","setBlending","initAttributes","enableAttribute","enableAttributeAndDivisor","meshPerAttribute","enableVertexAttribArray","disableUnusedAttributes","disableVertexAttribArray","useProgram","equationToGL","MIN_EXT","MAX_EXT","factorToGL","blendFuncSeparate","blendFunc","blendEquationSeparate","setMaterial","frontFaceCW","setPolygonOffset","frontFace","cullFace","setLineWidth","lineWidth","factor","setScissorTest","activeTexture","webglSlot","webglType","webglTexture","boundTexture","activeAndBindTexture","unbindTexture","compressedTexImage2D","texImage3D","WebGLTextures","_gl","utils","useOffscreenCanvas","OffscreenCanvas","err","createCanvas","resizeImage","needsPowerOfTwo","needsNewCanvas","maxSize","HTMLImageElement","ImageBitmap","textureNeedsPowerOfTwo","textureNeedsGenerateMipmaps","supportsMips","generateMipmap","textureProperties","__maxMipLevel","LOG2E","getInternalFormat","internalFormatName","glFormat","glType","filterFallback","onTextureDispose","deallocateTexture","onRenderTargetDispose","deallocateRenderTarget","__webglInit","deleteTexture","__webglTexture","renderTargetProperties","deleteFramebuffer","__webglFramebuffer","__webglDepthbuffer","deleteRenderbuffer","textureUnits","resetTextureUnits","textureUnit","setTexture2D","slot","__version","complete","uploadTexture","setTextureCube","setTextureCubeDynamic","wrappingToGL","filterToGL","setTextureParameters","textureType","wrapR","__currentAnisotropy","texParameterf","TEXTURE_MAX_ANISOTROPY_EXT","initTexture","isDataTexture2DArray","isDataTexture3D","pixelStorei","convert","glInternalFormat","mipmap","isDepthTexture","isCompressedTexture","setupFrameBufferTexture","framebuffer","attachment","textureTarget","bindFramebuffer","framebufferTexture2D","setupRenderBufferStorage","renderbuffer","isMultisample","bindRenderbuffer","getRenderTargetSamples","renderbufferStorageMultisample","renderbufferStorage","framebufferRenderbuffer","setupDepthTexture","isCube","webglDepthTexture","setupDepthRenderbuffer","createRenderbuffer","setupRenderTarget","createFramebuffer","__webglMultisampledFramebuffer","__webglColorRenderbuffer","__webglDepthRenderbuffer","updateRenderTargetMipmap","updateMultisampleRenderTarget","blitFramebuffer","warnedTexture2D","warnedTextureCube","WebGLUtils","HALF_FLOAT_OES","COMPRESSED_RGB_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT3_EXT","COMPRESSED_RGBA_S3TC_DXT5_EXT","COMPRESSED_RGB_PVRTC_4BPPV1_IMG","COMPRESSED_RGB_PVRTC_2BPPV1_IMG","COMPRESSED_RGBA_PVRTC_4BPPV1_IMG","COMPRESSED_RGBA_PVRTC_2BPPV1_IMG","COMPRESSED_RGB_ETC1_WEBGL","COMPRESSED_RGB8_ETC2","COMPRESSED_RGBA8_ETC2_EAC","UNSIGNED_INT_24_8_WEBGL","ArrayCamera","Group","isGroup","WebXRManager","getDevice","WebGLRenderer","_context","_alpha","_depth","_stencil","_antialias","antialias","_premultipliedAlpha","_preserveDrawingBuffer","preserveDrawingBuffer","_powerPreference","powerPreference","_failIfMajorPerformanceCaveat","failIfMajorPerformanceCaveat","currentRenderList","currentRenderState","domElement","sortObjects","toneMappingExposure","toneMappingWhitePoint","_this","_isContextLost","_framebuffer","_currentActiveCubeFace","_currentActiveMipmapLevel","_currentRenderTarget","_currentFramebuffer","_currentMaterialId","_currentGeometryProgram","_currentCamera","_currentArrayCamera","_currentViewport","_currentScissor","_currentScissorTest","_width","_height","_pixelRatio","_opaqueSort","_transparentSort","_viewport","_scissor","_scissorTest","_frustum","_clipping","_clippingEnabled","_localClippingEnabled","_projScreenMatrix","_vector3","getTargetPixelRatio","contextAttributes","xrCompatible","onContextLost","onContextRestore","programCache","renderLists","morphtargets","bufferRenderer","indexedBufferRenderer","initGLContext","getContextAttributes","forceContextLoss","loseContext","forceContextRestore","restoreContext","getPixelRatio","setPixelRatio","updateStyle","isPresenting","setViewport","getDrawingBufferSize","setDrawingBufferSize","pixelRatio","getCurrentViewport","getViewport","getScissor","setScissor","getScissorTest","boolean","setOpaqueSort","method","setTransparentSort","bits","animation","preventDefault","onMaterialDispose","deallocateMaterial","releaseMaterialProgramReference","programInfo","renderObjectImmediate","renderBufferImmediate","hasPositions","hasNormals","hasUvs","hasColors","programAttributes","positionArray","vertexAttribPointer","normalArray","uvArray","colorArray","tempScene","renderBufferDirect","setProgram","updateBuffers","rangeFactor","setupVertexAttributes","dataCount","rangeStart","rangeCount","drawStart","drawEnd","drawCount","isSprite","isInstancedBufferGeometry","maxInstancedCount","materialDefaultAttributeValues","programAttribute","geometryAttribute","stride","isInstancedInterleavedBuffer","isInstancedBufferAttribute","instanceMatrix","vertexAttrib2fv","vertexAttrib3fv","vertexAttrib4fv","vertexAttrib1fv","compile","compiled","initMaterial","onAnimationFrameCallback","getCamera","projectObject","opaqueObjects","transparentObjects","renderObjects","isLOD","isImmediateRenderObject","isArrayCamera","camera2","renderObject","materialProperties","lightsStateVersion","programCacheKey","programChange","numSupportedMorphNormals","needsLights","materialNeedsLights","progUniforms","uniformsList","useCache","refreshProgram","refreshMaterial","refreshLights","p_uniforms","m_uniforms","uCamPos","cameraPosition","isMeshBasicMaterial","isOrthographicCamera","skeleton","bones","boneTexture","boneMatrices","boneTextureSize","markUniformsLightsNeedsUpdate","refreshUniformsFog","refreshUniformsCommon","isMeshMatcapMaterial","refreshUniformsMatcap","refreshUniformsDepth","isMeshNormalMaterial","refreshUniformsNormal","isLineBasicMaterial","refreshUniformsLine","isLineDashedMaterial","refreshUniformsDash","isPointsMaterial","refreshUniformsPoints","isSpriteMaterial","refreshUniformsSprites","isShadowMaterial","ltc_1","LTC_1","ltc_2","LTC_2","uvScaleMap","uv2ScaleMap","isFog","density","setFramebuffer","getActiveCubeFace","getActiveMipmapLevel","activeCubeFace","activeMipmapLevel","readRenderTargetPixels","activeCubeFaceIndex","restore","textureFormat","readPixels","copyFramebufferToTexture","level","levelScale","copyTexImage2D","copyTextureToTexture","srcTexture","dstTexture","texSubImage2D","FogExp2","Fog","InterleavedBuffer","isInterleavedBuffer","_vector$6","InterleavedBufferAttribute","interleavedBuffer","_viewWorldMatrix","Sprite","_v1$4","_v2$2","LOD","_currentLevel","levels","addLevel","getCurrentLevel","getObjectForDistance","SkinnedMesh","_offsetMatrix","_identityMatrix","Skeleton","Bone","_instanceLocalMatrix","_instanceWorldMatrix","_mesh","InstancedMesh","_inverseMatrix$1","Line","LineSegments","LineLoop","_inverseMatrix$2","Points","VideoTexture","CompressedTexture","CanvasTexture","DepthTexture","WireframeGeometry","ParametricGeometry","ParametricBufferGeometry","PolyhedronGeometry","PolyhedronBufferGeometry","TetrahedronGeometry","TetrahedronBufferGeometry","OctahedronGeometry","OctahedronBufferGeometry","IcosahedronGeometry","IcosahedronBufferGeometry","DodecahedronGeometry","DodecahedronBufferGeometry","TubeGeometry","TubeBufferGeometry","TorusKnotGeometry","TorusKnotBufferGeometry","TorusGeometry","TorusBufferGeometry","ShapeUtils","area","contour","isClockWise","pts","triangulateShape","ExtrudeGeometry","ExtrudeBufferGeometry","TextGeometry","TextBufferGeometry","SphereGeometry","SphereBufferGeometry","phiStart","phiLength","thetaStart","thetaLength","thetaEnd","grid","verticesRow","uOffset","RingGeometry","RingBufferGeometry","LatheGeometry","LatheBufferGeometry","ShapeGeometry","ShapeBufferGeometry","EdgesGeometry","CylinderGeometry","CylinderBufferGeometry","ConeGeometry","ConeBufferGeometry","CircleGeometry","CircleBufferGeometry","RawShaderMaterial","AnimationUtils","arraySlice","from","to","convertArray","forceClone","isView","DataView","getKeyframeOrder","times","compareTime","result","sortedArray","nValues","srcOffset","flattenJSON","jsonKeys","valuePropertyName","subclip","sourceClip","startFrame","endFrame","fps","clip","tracks","track","valueSize","getValueSize","minStartTime","shift","resetDuration","Interpolant","parameterPositions","sampleValues","sampleSize","resultBuffer","_cachedIndex","evaluate","pp","t1","t0","validate_interval","seek","linear_scan","forward_scan","giveUpAt","afterEnd_","t1global","beforeStart_","mid","intervalChanged_","interpolate_","settings","DefaultSettings_","getSettings_","copySampleValue_","CubicInterpolant","_weightPrev","_offsetPrev","_weightNext","_offsetNext","endingStart","endingEnd","iPrev","iNext","tPrev","tNext","halfDt","o1","o0","oP","oN","wP","wN","ppp","sP","s0","sN","LinearInterpolant","offset1","offset0","weight1","weight0","DiscreteInterpolant","KeyframeTrack","BooleanKeyframeTrack","ColorKeyframeTrack","NumberKeyframeTrack","QuaternionLinearInterpolant","QuaternionKeyframeTrack","StringKeyframeTrack","VectorKeyframeTrack","AnimationClip","files","file","LoadingManager","onLoad","onProgress","onError","itemsLoaded","itemsTotal","urlModifier","handlers","onStart","itemStart","itemEnd","itemError","resolveURL","setURLModifier","transform","addHandler","regex","loader","removeHandler","getHandler","DefaultLoadingManager","Loader","manager","crossOrigin","resourcePath","load","setCrossOrigin","setPath","setResourcePath","FileLoader","cached","dataUriRegex","dataUriRegexResult","mimeType","isBase64","decodeURIComponent","atob","response","responseType","Blob","parser","DOMParser","parseFromString","request","XMLHttpRequest","open","callbacks","withCredentials","overrideMimeType","header","requestHeader","setRequestHeader","send","setResponseType","setWithCredentials","setMimeType","AnimationLoader","text","json","animations","CompressedTextureLoader","loadTexture","texDatas","loaded","mipmapCount","isCubemap","DataTextureLoader","ImageLoader","onImageLoad","onImageError","CubeTextureLoader","TextureLoader","isJPEG","Curve","arcLengthDivisions","getPoint","getPointAt","optionalTarget","getUtoTmapping","getPoints","divisions","getSpacedPoints","getLength","lengths","getLengths","cacheArcLengths","current","last","sum","updateArcLengths","arcLengths","targetArcLength","comparison","lengthBefore","lengthAfter","segmentLength","segmentFraction","getTangent","t2","pt1","pt2","vec","getTangentAt","computeFrenetFrames","segments","closed","tangents","binormals","mat","MAX_VALUE","tz","fromJSON","EllipseCurve","aX","aY","xRadius","yRadius","aStartAngle","aEndAngle","aClockwise","aRotation","isEllipseCurve","twoPi","deltaAngle","samePoints","ArcCurve","aRadius","isArcCurve","CubicPoly","c0","initCatmullRom","x3","tension","initNonuniformCatmullRom","dt0","dt1","dt2","calc","t3","px","py","pz","CatmullRomCurve3","curveType","isCatmullRomCurve3","intPoint","weight","CatmullRom","QuadraticBezierP0","QuadraticBezierP1","QuadraticBezierP2","QuadraticBezier","CubicBezierP0","CubicBezierP1","CubicBezierP2","CubicBezierP3","CubicBezier","CubicBezierCurve","v3","isCubicBezierCurve","CubicBezierCurve3","isCubicBezierCurve3","LineCurve","isLineCurve","LineCurve3","isLineCurve3","QuadraticBezierCurve","isQuadraticBezierCurve","QuadraticBezierCurve3","isQuadraticBezierCurve3","SplineCurve","isSplineCurve","Curves","freeze","CurvePath","curves","autoClose","curve","closePath","startPoint","endPoint","curveLengths","getCurveLengths","lens","cacheLengths","sums","resolution","Path","currentPoint","moveTo","lineTo","quadraticCurveTo","aCPx","aCPy","bezierCurveTo","aCP1x","aCP1y","aCP2x","aCP2y","splineThru","npts","arc","absarc","absellipse","ellipse","firstPoint","lastPoint","Shape","holes","getPointsHoles","holesPts","extractPoints","hole","Light","HemisphereLight","LightShadow","SpotLightShadow","SpotLight","PointLight","OrthographicCamera","scaleW","scaleH","DirectionalLightShadow","DirectionalLight","AmbientLight","RectAreaLight","MaterialLoader","LoaderUtils","decodeText","TextDecoder","decode","fromCharCode","escape","extractUrlBase","lastIndexOf","InstancedBufferGeometry","InstancedBufferAttribute","BufferGeometryLoader","ObjectLoader","ImageBitmapLoader","createImageBitmap","fetch","setOptions","res","blob","imageBitmap","ShapePath","subPaths","currentPath","toShapes","isCCW","noHoles","toShapesNoHoles","inSubpaths","tmpPath","tmpShape","isPointInsidePolygon","inPt","inPolygon","polyLen","inside","edgeLowPt","edgeHighPt","edgeDx","edgeDy","perpEdge","solid","holesFirst","betterShapeHoles","newShapes","newShapeHoles","mainIdx","tmpPoints","ambiguous","toChange","sIdx","sLen","sho","hIdx","ho","hole_unassigned","s2Idx","froms","tos","tmpHoles","Font","isFont","generateShapes","paths","createPaths","chars","line_height","yMax","yMin","underlineThickness","char","ret","createPath","glyph","glyphs","familyName","cpx","cpy","cpx1","cpy1","cpx2","cpy2","outline","_cachedOutline","ha","FontLoader","AudioContext","webkitAudioContext","AudioLoader","SphericalHarmonics3","LightProbe","HemisphereLightProbe","sky","ground","sh","coefficients","isHemisphereLightProbe","AmbientLightProbe","isAmbientLightProbe","_eyeRight","_eyeLeft","StereoCamera","eyeSep","cameraL","cameraR","_cache","eyeSepHalf","eyeSepOnProjection","ymax","xmin","xmax","Clock","autoStart","startTime","oldTime","elapsedTime","running","performance","getElapsedTime","getDelta","newTime","_position$2","_quaternion$3","_scale$1","_orientation","AudioListener","gain","createGain","connect","destination","timeDelta","_clock","getInput","removeFilter","disconnect","getFilter","setFilter","getMasterVolume","setMasterVolume","setTargetAtTime","currentTime","positionX","endTime","linearRampToValueAtTime","positionY","positionZ","forwardX","forwardY","forwardZ","upX","upY","upZ","setOrientation","Audio","autoplay","detune","loop","loopStart","loopEnd","duration","playbackRate","isPlaying","hasPlaybackControl","sourceType","_startedAt","_pausedAt","filters","getOutput","setNodeSource","audioNode","setMediaElementSource","mediaElement","createMediaElementSource","setMediaStreamSource","mediaStream","createMediaStreamSource","setBuffer","audioBuffer","play","delay","createBufferSource","onended","onEnded","setDetune","setPlaybackRate","pause","getFilters","setFilters","getDetune","getPlaybackRate","getLoop","setLoop","setLoopStart","setLoopEnd","getVolume","setVolume","_position$3","_quaternion$4","_scale$2","_orientation$1","PositionalAudio","panner","createPanner","panningModel","getRefDistance","refDistance","setRefDistance","getRolloffFactor","rolloffFactor","setRolloffFactor","getDistanceModel","distanceModel","setDistanceModel","getMaxDistance","maxDistance","setMaxDistance","setDirectionalCone","coneInnerAngle","coneOuterAngle","coneOuterGain","orientationX","orientationY","orientationZ","AudioAnalyser","audio","fftSize","analyser","createAnalyser","frequencyBinCount","getFrequencyData","getByteFrequencyData","getAverageFrequency","PropertyMixer","_RESERVED_CHARS_RE","_reservedRe","_wordChar","_wordCharOrDot","_directoryRe","_nodeRe","_objectRe","_propertyRe","_trackRe","_supportedObjectNames","Composite","PropertyBinding","rootNode","parsedPath","parseTrackName","node","findNode","nodeName","root","sanitizeNodeName","trackName","matches","results","objectName","objectIndex","propertyName","propertyIndex","lastDot","substring","bone","getBoneByName","searchNodeSubtree","childNode","subTreeNode","_getValue_unavailable","_setValue_unavailable","BindingType","Direct","EntireArray","ArrayElement","HasFromToArray","Versioning","None","NeedsUpdate","MatrixWorldNeedsUpdate","GetterByBindingType","getValue_direct","getValue_array","resolvedProperty","getValue_arrayElement","getValue_toArray","SetterByBindingTypeAndVersioning","setValue_direct","targetObject","setValue_direct_setNeedsUpdate","setValue_direct_setMatrixWorldNeedsUpdate","setValue_array","dest","setValue_array_setNeedsUpdate","setValue_array_setMatrixWorldNeedsUpdate","setValue_arrayElement","setValue_arrayElement_setNeedsUpdate","setValue_arrayElement_setMatrixWorldNeedsUpdate","setValue_fromArray","setValue_fromArray_setNeedsUpdate","setValue_fromArray_setMatrixWorldNeedsUpdate","getValue","getValue_unbound","targetArray","sourceArray","nodeProperty","versioning","bindingType","unbind","_getValue_unbound","_setValue_unbound","AnimationObjectGroup","AnimationMixer","Uniform","InstancedInterleavedBuffer","Raycaster","Spherical","other","makeSafe","setFromCartesianCoords","Cylindrical","Box2","Line3","ImmediateRenderObject","SpotLightHelper","_boneMatrix","_matrixWorldInv","SkeletonHelper","PointLightHelper","_color1","_color2","HemisphereLightHelper","GridHelper","PolarGridHelper","DirectionalLightHelper","_camera","CameraHelper","BoxHelper","Box3Helper","PlaneHelper","ArrowHelper","AxesHelper","_flatCamera","PMREMGenerator","Face4","LineStrip","LinePieces","NoColors","FaceColors","VertexColors","MeshFaceMaterial","MultiMaterial","PointCloud","Particle","ParticleSystem","PointCloudMaterial","ParticleBasicMaterial","ParticleSystemMaterial","Vertex","DynamicBufferAttribute","Int8Attribute","Uint8Attribute","Uint8ClampedAttribute","Int16Attribute","Uint16Attribute","Int32Attribute","Uint32Attribute","Float32Attribute","Float64Attribute","construct","createPointsGeometry","createGeometry","createSpacedPointsGeometry","fromPoints","ClosedSplineCurve3","SplineCurve3","Spline","initFromArray","getControlPointsArray","reparametrizeByArcLength","AxisHelper","BoundingBoxHelper","EdgesHelper","WireframeHelper","Handlers","XHRLoader","BinaryTextureLoader","isIntersectionBox","isIntersectionSphere","setFromMatrix","random16","nearestPowerOfTwo","nextPowerOfTwo","flattenToArrayOffset","multiplyVector3","multiplyVector3Array","applyToBufferAttribute","applyToVector3Array","extractPosition","getPosition","multiplyToArray","multiplyVector4","rotateAxis","crossVector","rotateByAxis","makeFrustum","isIntersectionLine","barycoordFromPoint","midpoint","extractAllPoints","extrude","makeGeometry","fromAttribute","distanceToManhattan","lengthManhattan","setEulerFromRotationMatrix","setEulerFromQuaternion","getPositionFromMatrix","getScaleFromMatrix","getColumnFromMatrix","applyProjection","computeTangents","computeLineDistances","applyMatrix","getChildByName","renderDepth","getWorldRotation","eulerOrder","useQuaternion","setDrawMode","drawMode","setLens","onlyShadow","shadowCameraFov","shadowCameraLeft","shadowCameraRight","shadowCameraTop","shadowCameraBottom","shadowCameraVisible","bias","shadowDarkness","shadowMapWidth","mapSize","shadowMapHeight","dynamic","setDynamic","copyIndicesArray","setArray","addIndex","addAttribute","addDrawCall","indexOffset","clearDrawCalls","computeOffsets","removeAttribute","drawcalls","offsets","linePrecision","params","threshold","wrapAround","overdraw","wrapRGB","shading","metal","clearTarget","animate","getCurrentRenderTarget","getPrecision","resetGLState","supportsFloatTextures","supportsHalfFloatTextures","supportsStandardDerivatives","supportsCompressedTextureS3TC","supportsCompressedTexturePVRTC","supportsBlendMinMax","supportsInstancedArrays","enableScissorTest","addPrePlugin","addPostPlugin","updateShadowMap","setFaceCulling","allocTextureUnit","setTexture","getActiveMipMapLevel","shadowMapCullFace","gammaInput","gammaOutput","renderReverseSided","renderSingleSided","WebGLRenderTargetCube","audioLoader","getData","updateCubeMap","GeometryUtils","geometry1","loadTextureCube","urls","loadCompressedTexture","loadCompressedTextureCube","CanvasRenderer","JSONLoader","SceneUtils","createMultiMaterialObject","detach","LensFlare","revision","THREE","CubeGeometry","n11n22","n11n23","n11n24","n11n32","n12n21","n12n23","n12n24","n12n31","n13n21","n13n22","n13n24","n13n31","n13n32","n14n23","n14n33","n14n41","n14n43","n21n32","n21n42","n22n31","n22n33","n23n31","n23n32","n23n34","n24n31","n24n32","n24n33","n33n44","n34n41","n34n42","n34n43","d2r","r2d","tileToBBOX","tile","tile2lon","tile2lat","tileToGeoJSON","bbox","poly","coordinates","exp","pointToTile","lon","lat","pointToTileFraction","getChildren","getParent","getSiblings","hasSiblings","tiles","siblings","hasTile","tilesEqual","tile1","tile2","tileToQuadkey","quadkeyToTile","quadkey","bboxToTile","bboxCoords","getBboxZoom","MAX_ZOOM","tilebelt","geoproject","center3035","projector","calculateGlobalOffset","baseZ","calculateSceneScale","tile15","bbox15","lonlatH","absolute","projected","forward","unprojected","unproject3035","projector3035","vectorize","vectorizeFeature","feature","RenderActions","AnimationStore","paused","tick","AnimationStore$1","CurrentLocationActions","GeodataActions","UserActions","RenderStore","needsRender","animating","env","clock","scheduleRender","panToPosition","addBuiltinOverlay","addOverlay","setFeatures","setImageryBig","containerMounted","containerResized","setHD","featureSelected","focusOnLocation","inputEnded","setCameraMode","setCamera","setCameraTarget","setCameraPosition","setTerrainEffectContours","setTerrainEffectFlats","setTerrainEffectGrade","setTerrainEffectHeight","setTerrainEffectNone","scheduleRenderAnimated","updateOverlay","listen","RenderStore$1","createElement","COMPILE_STATUS","vertShader","fragShader","vs","VERTEX_SHADER","fs","FRAGMENT_SHADER","LINK_STATUS","log$1","timing","onload","track$1","getSupportedExtensions","needed","optional","missing","ext","missingOptional","testFramebuffer","tex","fb","ok","hasExt","TEXTURE_2D","RGB","TEXTURE_MIN_FILTER","NEAREST","TEXTURE_MAG_FILTER","FRAMEBUFFER","COLOR_ATTACHMENT0","checkFramebufferStatus","FRAMEBUFFER_COMPLETE","webgl","supported","render565","supports","s3tc","pvrtc","workers","Worker","UNSIGNED_SHORT_5_6_5","ContainerStore","lastResize","renderRatio","renderWidth","renderHeight","devicePixelRatio","canvasWidth","canvasHeight","lodScale","hd","forceHd","lowDefMove","lowDefScale","setFieldOfView","forceHD","inputStarted","toClipSpace","fromClipSpace","offsetWidth","offsetHeight","rect","getBoundingClientRect","cursor","updateSizes","getRenderRatio","ratios","limit","pixelCount","ContainerStore$1","OrbitControls","minDistance","minZoom","maxZoom","minPolarAngle","maxPolarAngle","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","enableZoom","zoomSpeed","enableRotate","rotateSpeed","enablePan","panSpeed","screenSpacePanning","keyPanSpeed","autoRotate","autoRotateSpeed","enableKeys","lock2D","UP","BOTTOM","MINUS","PLUS","mouseButtons","touches","ONE","TWO","target0","position0","zoom0","getPolarAngle","spherical","getAzimuthalAngle","saveState","setDistanceToTarget","changeEvent","STATE","NONE","quat","quatInverse","lastPosition","lastQuaternion","rotateLeft","getAutoRotationAngle","_oldPhi","sphericalDelta","zoomDamping","panOffset","zoomChanged","forceHeight","onContextMenu","onMouseDown","onMouseWheel","capture","passive","onTouchStart","onTouchEnd","onTouchCancel","onTouchMove","ownerDocument","onMouseMove","onMouseUp","onKeyDown","TOUCH_ROTATE","TOUCH_PAN","TOUCH_DOLLY_PAN","TOUCH_DOLLY_ROTATE","event0","clickTimeout","rotateStart","rotateEnd","rotateDelta","panStart","panEnd","panDelta","dollyStart","dollyEnd","dollyDelta","getZoomScale","rotateUp","panLeft","objectMatrix","panUp","pan","deltaX","deltaY","targetDistance","clientHeight","clientWidth","dollyOut","dollyScale","dollyIn","handleMouseDownRotate","clientX","clientY","handleMouseDownDolly","handleMouseDownPan","handleMouseMoveRotate","handleMouseMoveDolly","handleMouseMovePan","dispatchClickEvent","useTouches","coords","srcElement","pageX","pageY","altKey","clickCount","handleMouseUp","handleMouseWheel","deltaMode","DOM_DELTA_LINE","DOM_DELTA_PAGE","handleKeyDown","keyCode","handleTouchStartRotate","handleTouchStartPan","handleTouchStartDolly","handleTouchStartDollyPan","handleTouchStartDollyRotate","handleTouchMoveRotate","handleTouchMovePan","handleTouchMoveDolly","handleTouchMoveDollyPan","handleTouchMoveDollyRotate","tapDeltaThreshold","handleTouchEnd","coords0","changedTouches","stashFirstEvent","mouseAction","button","ctrlKey","metaKey","shiftKey","stopPropagation","tabIndex","MapControls","ConfigActions","UserInputStore","lastInput","interacting","onInput","toggleTracking","animateAlongFeature","doubleTapZoom","focusOnFeature","focusOnTarget","rotateRight","featureClicked","setCurrentPlace","startFlyover","zoomIn","zoomOut","UserInputStore$1","StoreUtils","cancelStack","transition","initial","final","vector3","ease","getTime","eased","onComplete","doNotCancel","cubicOut","cubicIn","linear","vector3Hop","vector3AngularHop","h1","h2","l1","l2","vector3Angular","out","newColor","onCancel","CurrentLocationStore","tooFar","tracking","latitude","longitude","altitude","accuracy","altitudeAccuracy","heading","speed","cancelTracking","checkTooFar","CurrentLocationStore$1","proj4","place","stack","currentObject","rf","to_meter","projName","PROJECTION","AXIS","UNIT","DATUM","SPHEROID","GEOGCS","datumCode","ellps","TOWGS84","datum_params","long0","longc","lat_ts","lat1","lat0","EPSG","ESRI","IAU2000","some","names","es","ep2","datum_type","Projection","projections","towgs84","datumName","k0","R_A","datum","from_greenwich","oProj","northing","easting","zoneNumber","zoneLetter","Point","greenwich","lisbon","paris","bogota","madrid","rome","bern","jakarta","ferro","brussels","stockholm","athens","oslo","proj","lat_0","lat_1","lat_2","lat2","lon_0","lon_1","long1","lon_2","long2","lonc","x_0","y_0","k_0","r_a","zone","south","utmSouth","pm","nadgrids","readCharicter","neutral","keyword","quoted","afterquote","number","word","afterItem","WGS84","GOOGLE","MERIT","ellipseName","SGS85","GRS80","IAU76","airy","APL4","NWL9D","mod_airy","andrae","aust_SA","GRS67","bessel","bess_nam","clrk66","clrk80","clrk58","CPM","delmbr","engelis","evrst30","evrst48","evrst56","evrst69","evrstSS","fschr60","fschr60m","fschr68","helmert","hough","intl","kaula","lerch","mprts","new_intl","plessis","krass","SEasia","walbeck","WGS60","WGS66","WGS7","wgs84","ch1903","ggrs87","nad83","nad27","potsdam","carthage","hermannskogel","osni52","ire65","rassadiran","nzgd49","osgb36","s_jtsk","beduaram","gunung_segara","rnb72","toPoint","fromMGRS","toMGRS","S_POLE","N_POLE","EQUIT","OBLIQ","qp","mmf","apa","dd","rq","xmf","ymf","sinb1","cosb1","sinph0","cosph0","phi0","sin_p14","cos_p14","defaultDatum","Proj","defs","mgrs","spacing","ApiUtils","snap","datafileForLocation","ns","ew","decimalPlaces","toPrecision","toFixed","GeoprojectStore","projection","location","globalOffset","sceneScale","positionToTileFraction","projected3035","GeoprojectStore$1","AppStore","appContainer","fatalError","initialized","resourceUrl","configureElevationDatasource","configureImageryDatasource","setAppContainer","setFatalError","setResourceUrl","checkInitialized","elevation","imagery","AppStore$1","URLSearchParams","elevationPoolSize","imageryPoolSize","ELEVATION_POOL_SIZE","ELEVATION_TILE_SIZE","IMAGERY_POOL_SIZE","IMAGERY_TILE_SIZE","INTERPOLATE_FLOAT","PIXEL_ENCODING_NASADEM","PIXEL_ENCODING_TERRARIUM","PIXEL_ENCODING_TERRAIN_RGB","selectable","IntegerPool","capacity","items","tap","item","ImageLoader$1","ImageLoader$2","canvas$1","ctx","insertIntoTextureArray","textureArray","__blocks","useFloat","imgData","getImageData","pixelEncoding","baseVal","dataView","getUint16","BaseDatasource","apiKey","poolSize","textureSize","urlFormat","hasUpdates","lookup","fetching","imgCache","indexPool","virtualTextureSize","TextureFilter","prop","indirectionTexture","urlForTile","fetchIfNeeded","downloadIndices","newIndex","findNewIndex","el","getElementById","innerHTML","updateIndirectionTexture","notifyUpdate","oldQuadKey","failed","goodIndex","oldDataSlot","isParent","quadkeys","tileIndex","tileSize","originScale","findBestAvailableData","silent","downsample","dataAtPoint","img","broadcastUpdate","ElevationDatasource","MULTIPLIER_TERRARIUM","MULTIPLIER_TERRAIN_RGB","dataToHeight","earthScale","heightScale","cosh","heightAt","addNormal","delta1","delta2","i$1","defaultStep","normalAt","CameraStore","hasZoomedOut","constrainCamera","minHeight","maxBounds","controls","zoomInDuration","zoomOutDuration","configure","configureCamera","focusOnBounds","orbitTarget","setFromCurrentLocation","currentLocation","nextTarget","vantageForTarget","vantage","bearing","sw","animationDuration","rotateAngle","newPosition","bounce","lastTarget","nextPosition","nextQuaternion","interpolate","chaseDistance","chaseHeight","chaseSpeed","smoothTarget","oldCameraNear","follow","desiredH","currentPosition","currentTarget","features","animateAlongFeatureWithIndex","segmentAnimation","onFeatureReached","initialTarget","initialStep","initialPosition","CameraStore$1","Procedural","CameraExport","onBoundsFocused","onLocationFocused","onCameraChange","Procedural$1","configureControls","filtered","Procedural$2","CoreExport","signalUserInteraction","setElevation","setElevationBig","provider","attribution","onLocationError","setDisplayErrors","onUserInteraction","template","Procedural$3","_lastTarget","displayLocation","dist","gui","Procedural$4","setEnvironment","environmentEditor","initEnv","queue","processNext","enqueue","FeatureUtils","isLineString","isPolygon","isMultiPolygon","isPoint","tagValue","tag","tags","hasTag","isPiste","isAerial","isHighway","isTrack","highway","isRiver","isBuilding","isForest","difficulty","waterway","thickness","OSMAdapter","clearFeatures","buildings","forests","highways","lifts","peaks","places","pistes","lakes","rivers","unknown","classify","natural","props","icon","fadeDistance","ele","collapseDistance","priority","borderRadius","anchor","padding","crs","collection","OSMAdapter$1","DEFAULT","OverlayAdapter","featureCreated","removeOverlay","overlays","overlayTracker","builtinOverlays","supportedBuiltinOverlays","referenceOnlyBuiltinOverlays","markers","removeFeature","builtin","overlayName","featureClassified","exists","newFeatures","oldFeatures","newL","oldL","oldFeature","newFeature","overlay","nl","updateBuiltinOverlays","osm","ol","toRemove","overlayDisplayed","OverlayAdapter$1","heightUniforms","elevationArray","uGlobalOffset","uSceneScale","Shader","define","regexp","newDefine","beaconVertex","beaconFragment","Color$1","hsl","CopyShader","Pass","needsSwap","renderToScreen","FullScreenQuad","ShaderPass","textureID","fsQuad","writeBuffer","readBuffer","tmpScene","obj","EffectComposer","renderTarget1","renderTarget2","renderTargetHD","passes","copyPass","swapBuffers","addPass","pass","insertPass","isLastEnabledPass","passIndex","deltaTime","maskActive","hdWidth","hdHeight","Pass$1","RenderPass","oldAutoClear","oldAutoClearColor","oldAutoClearDepth","oldClearColor","oldClearAlpha","oldOverrideMaterial","SavePass","innerWidth","innerHeight","ShaderPass$1","tilepickerScene","pickerScene","postprocessUniforms","tDiffuse","uResolution","postProcessFragment","quadVertex","state$1","composer","enableHDPass","renderPass","savePass","hdrenderPass","postprocessShader","postprocessPass","depthUniforms","uDepth","uReadDepthOverride","EE","cutoffAngle","invSteepness","rayleigh","mie","skyUniforms","luminance","turbidity","reileigh","mieCoefficient","mieDirectionalG","sunPosition","sunDirection","lightDirection","betaRM","betaRnorm","betaMnorm","constants","gamma","tonemapScale","hgPhaseA","hgPhaseB","LinWeight","sunFade","reileighCoefficient","exponent","sunE","betaR","betaM","RawTonemap","tonemapUniforms","exposureBias","whitePoint","uTonemapExposureBias","uTonemapWhiteScale","cosZenithAngle","Fex","cosTheta","rPhase","betaRTheta","betaMTheta","Lin","L0","whiteScale","lastDirection","forceUpdate","fogUniforms","uFogDropoff","uFogIntensity","uFogColor","ImageryDatasource","lineVertex","lineFragment","lineUniforms","uViewportInverse","markerVertex","markerFragment","markerUniforms","uMap","uPixelRatio","uViewportCanvasInverse","skyVertex","skyFragment","FeaturesStore","selected","onFeatureSelected","FeaturesStore$1","tagUniforms","uSelectedTag","selectedTag","terrainVertex","terrainFragment","terrainPickerVertex","terrainPickerFragment","tilepickerUniforms","uScaling","toExponential","beacon","uAccuracy","uTime","marker","outlineColor","cutoff","haveOutline","uCutoff","uOutlineColor","uThickness","terrain","imageryArray","picker","pickerVertex","pickerFragment","pickerUniforms","raycastVertex","raycastFragment","canvas$2","TilePicker","FeaturePicker","updateSize","downScale","tagId","store","sl","mouse","raycastPosition","pickerMaterial","lastCameraPosition","raycastMaterial","raycastScene","renderTarget1px","viewOffsetWidth","viewOffsetHeight","featureIdtoTagId","Map","registerStore","pickFeature","clipspace","clickPosition","raycastTerrain","LineData","LineData$1","Procedural$5","FeaturesExport","lookupFeature","highlightFeature","selectFeatures","ids","currentFeature","onFeatureClicked","onOverlayAdded","Procedural$6","Procedural$7","setUserLocation","toggleUserLocationTracking","Procedural$8","setCameraModeControlVisible","setCompassVisible","setRotationControlVisible","setUserLocationControlVisible","setZoomControlVisible","preact_umd_min","vnode","_dirty","debounceRendering","splitText","_componentConstructor","normalizedNodeName","defaultProps","parentNode","removeChild","cssText","__html","removeAttributeNS","setAttributeNS","className","afterMount","componentDidMount","ownerSVGElement","appendChild","_component","nodeValue","createTextNode","replaceChild","firstChild","nextSibling","dangerouslySetInnerHTML","childNodes","__key","insertBefore","ref","lastChild","previousSibling","nextBase","_disable","__ref","getDerivedStateFromProps","base","componentWillMount","componentWillReceiveProps","prevContext","prevProps","syncComponentUpdates","prevState","shouldComponentUpdate","componentWillUpdate","getChildContext","getSnapshotBeforeUpdate","_parentComponent","componentDidUpdate","afterUpdate","_renderCallbacks","beforeUnmount","componentWillUnmount","Promise","cloneElement","createRef","Component","rerender","Preact","AUTOBIND_BLACKLIST","componentDidUnmount","bindAll","__bound","React","createClass","_render","actionName","defaultValue","extractKey","SetterStore","PlacesStore","PlacesStore$1","EngineStore","featuresLoaded","renderedFeatureStatus","featuresRendered","renderedFeatureRegister","renderedFeatureDisplayed","currentPlace","loc","featureDisplayed","EnvironmentStore","EnvironmentStore$1","envParams","inclination","azimuth","fogDropoff","fogIntensity","oldParams","newParams","CurrentLocation","latest","BufferMergeGeometry","vertexCount","_mergeIndices","srcArray","attrKeys","TypeArray","A$1","B$1","catmullGenerator","generate","createTangent","p1$1","p2$1","tmp$1","LineCurve$1","hDelta","u1","u2","getPointAndTangentAt","getPointAndTangent","radialSegments","radialDir","LineGeometry","numpoints","ip","jp","createColors","createNormals","createTangents","positionBuffer","normalBuffer","tangentBuffer","tangentDir","offset4","writeTangent","timeSource","WorkQueue","taskCount","workTimeout","completedTasks","createTask","highPriority","task","globalTimeout","localTimeout","LinesBase","maxIndex","projectTime","curveTime","geomTime","mergeTime","constantWidth","onNewData","bufferGeomAttributes","bufferGeoms","addMesh","bufferGeom","constructTime","color$1","perVertexColors","geom","tmpGeom","Lines","anchorForName","iconElement","wrapper","display","body","glyphForIcon","getComputedStyle","getPropertyValue","uiFont","log2","Atlas","spriteSize","monochromeBegin","scratchCanvas","scratch","textBaseline","fillStyle","showAtlas","defaultFontSize","checkFontAvailable","checkCount","testCanvas","font","fillText","fontAvailable","fontsLoaded","checkContainerFont","containerFont","defaultView","setFontSize","fontSize","textHeight","getTextHeight","measureText","addImage","createTransform","imageLoader","clearRect","globalCompositeOperation","fillTextToChannel","greenCleared","clearGreen","fillRect","addText","drawImmediate","iconWidth","iconLeadSpace","textWidth","processQueue","usedX","usedY","rowHeight","usedMonochromeX","usedMonochromeY","rowMonochromeHeight","monochrome","slotWidth","slotHeight","channelTop","channelBottom","mapping$1","clippingForName","pixel","MarkerData","haveFonts","isUpdate","isReady","MarkerData$1","PushList","firstValue","onlyDuplicates","pushDefault","Markers","quad","atlas","checkVisibility","onUpdatedData","defaultAnchor","defaultClipping","attrs","layout","anchorOffset","highlightOpacity","cameraX","cameraY","borderWidth","attr","bufferAttribute","blitCount","offsetAttribute","normalAttribute","hemisphere","mesh$1","skyBoxUniforms","uSkybox","skySpheremapFragment","quadVertex$1","skyBox","MapTileGeometry","dimensions","segments1","N1","uvx","uvy","addQuad","ia","ib","ic","pack","skirt","tilePool","idCounter","Tile","refreshIndices","imageryUvOffset","terrainMaterial","uImageryUvOffset","pickerMesh","wasSeen","wasRendered","pickerGeometry","calculateOffset","imageryKey","elevationKey","imageryIndex","elevationIndex","minH","maxH","grow","fetchData","calculateImageryOffset","bestImagery","onSeen","bufferGeometry","tileDelta","shiftThreshold","createScene","framesSinceSeen","projectedDistance","pipelinePicker","draw","tilesSeen","Set","toSplit","toCombine","toCombineGroups","sliceN","waitFrames","skipFrames","frameN","doPickerRender","doPickerRead","doPickerProcess","bytesPerSlice","pickedTile","terrainError","fragZ","minError","maxError","frames","commonTiles","parentKey","noSplit","newTiles","tile0","tiles1to3","app","raycastMouse","zoomArea","shouldZoom","raycastFeature","updateMouse","userInput","isTouchCapable","DocumentTouch","navigator","maxTouchPoints","msMaxTouchPoints","onContainerClick","bindToVisible","parameter","UserInterfaceStore","setLayersControlVisible","setSeasonControlVisible","setSecondaryParams","UserInterfaceStore$1","height$1","width$1","border","backgroundColor","north","borderBottom","borderLeft","borderRight","borderTop","direction$1","Compass","getInitialState","compassVisible","onStoreChange","storeState","nextProps","nextState","Container","outerStyle","overflow","innerStyle","style$1","paddingTop","paddingBottom","paddingLeft","paddingRight","fontFamily","textAlign","textTransform","pStyle","margin","Credits","credits","aStyle","credit","Fragment","ErrorStore","displayErrors","clearError","ErrorStore$1","container$1","Engine","domNode","getDOMNode","touchAction","errorContainerStyle","zIndex","errorStyle","defaultStyle","lineHeight","WebkitTransition","hoverStyle","Button","hover","mouseOver","mouseOut","onClick","onMouseOver","onMouseOut","ButtonRow","buttons","userLocation","registered","geolocation","watchPosition","EngineControlsBottom","userLocationControlVisible","zoomButtons","camButtons","rotateButtons","EngineControlsTop","cameraModeControlVisible","rotationControlVisible","zoomControlVisible","logo","PoweredBy","containerStyle","WebkitTouchCallout","WebkitUserSelect","KhtmlUserSelect","MozUserSelect","MsUserSelect","userSelect","logoStyle","backgroundImage","backgroundRepeat","link","href","App","renderApp","Procedural$9"],"mappings":"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;AAEA,MAAKmgH,OAAL,EAAe;AAAE,WAAOA,OAAP;AAAgB;;AAEjCA,EAAAA,OAAO,GAAG96H,UAAU,CAACoW,IAAX,CAAiB8yI,gBAAgB,CAAC5sI,QAAjB,GAA4ByrI,OAA7C,EACR/nJ,UAAU,CAAC+V,eAAX,CAA4B,IAA5B,EAAkC4E,EAAlC,CADQ,CAAV;AAEA,SAAOmgH,OAAP;AACD,CA3BD;AA6BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACAo6B,YAAY,CAACp5B,iBAAb,GAAiC,UAAWnhH,EAAX,EAAgB;AAC/CI,EAAAA,UAAU,CAAE,YAAY;AAAEsgH,IAAAA,cAAc,CAACS,iBAAf,CAAkCnhH,EAAlC;AAAyC,GAAzD,EAA2D,CAA3D,CAAV;AACD,CAFD;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACAu6I,YAAY,CAACn5B,UAAb,GAA0B,UAAW4sB,OAAX,EAAqB;AAC7C5tI,EAAAA,UAAU,CAAE,YAAY;AAAEsgH,IAAAA,cAAc,CAACU,UAAf,CAA2B4sB,OAA3B;AAAuC,GAAvD,EAAyD,CAAzD,CAAV;AACD,CAFD;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACAuM,YAAY,CAACh4B,aAAb,GAA6B,UAAWyrB,OAAX,EAAqB;AAChD5tI,EAAAA,UAAU,CAAE,YAAY;AAAEsgH,IAAAA,cAAc,CAAC6B,aAAf,CAA8ByrB,OAA9B;A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","sourcesContent":["var commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\nfunction unwrapExports (x) {\n\treturn x && x.__esModule && Object.prototype.hasOwnProperty.call(x, 'default') ? x['default'] : x;\n}\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\nfunction commonjsRequire () {\n\tthrow new Error('Dynamic requires are not currently supported by @rollup/plugin-commonjs');\n}\n\nvar lodash_min = createCommonjsModule(function (module, exports) {\n(function(){function t(t,r,n){switch(n.length){case 0:return t.call(r);case 1:return t.call(r,n[0]);case 2:return t.call(r,n[0],n[1]);case 3:return t.call(r,n[0],n[1],n[2])}return t.apply(r,n)}function r(t,r){for(var n=-1,e=null==t?0:t.length;++n<e&&r(t[n],n,t)!==false;);return t}function n(t,r){for(var n=-1,e=null==t?0:t.length,u=0,o=[];++n<e;){var i=t[n];r(i,n,t)&&(o[u++]=i);}return o}function e(t,r){for(var n=-1,e=null==t?0:t.length,u=Array(e);++n<e;)u[n]=r(t[n],n,t);return u}function u(t,r){for(var n=-1,e=r.length,u=t.length;++n<e;)t[u+n]=r[n];\nreturn t}function o(t,r){for(var n=-1,e=null==t?0:t.length;++n<e;)if(r(t[n],n,t))return true;return false}function i(t,r,n,e){for(var u=t.length,o=n+(e?1:-1);e?o--:++o<u;)if(r(t[o],o,t))return o;return -1}function c(t){return function(r){return null==r?Mr:r[t]}}function a(t,r){for(var n=-1,e=Array(t);++n<t;)e[n]=r(n);return e}function f(t){return function(r){return t(r)}}function s(t,r){return t.has(r)}function l(t,r){return null==t?Mr:t[r]}function h(t){var r=-1,n=Array(t.size);return t.forEach(function(t,e){\nn[++r]=[e,t];}),n}function p(t,r){return function(n){return t(r(n))}}function v(t){var r=-1,n=Array(t.size);return t.forEach(function(t){n[++r]=t;}),n}function y(){}function b(t){var r=-1,n=null==t?0:t.length;for(this.clear();++r<n;){var e=t[r];this.set(e[0],e[1]);}}function _(){this.__data__=Ie?Ie(null):{},this.size=0;}function g(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}function d(t){var r=this.__data__;if(Ie){var n=r[t];return n===Nr?Mr:n}return ce.call(r,t)?r[t]:Mr}function j(t){\nvar r=this.__data__;return Ie?r[t]!==Mr:ce.call(r,t)}function w(t,r){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Ie&&r===Mr?Nr:r,this}function O(t){var r=-1,n=null==t?0:t.length;for(this.clear();++r<n;){var e=t[r];this.set(e[0],e[1]);}}function m(){this.__data__=[],this.size=0;}function A(t){var r=this.__data__,n=W(r,t);return !(n<0)&&(n==r.length-1?r.pop():ge.call(r,n,1),--this.size,true)}function z(t){var r=this.__data__,n=W(r,t);return n<0?Mr:r[n][1]}function x(t){return W(this.__data__,t)>-1;\n}function S(t,r){var n=this.__data__,e=W(n,t);return e<0?(++this.size,n.push([t,r])):n[e][1]=r,this}function k(t){var r=-1,n=null==t?0:t.length;for(this.clear();++r<n;){var e=t[r];this.set(e[0],e[1]);}}function $(){this.size=0,this.__data__={hash:new b,map:new(Se||O),string:new b};}function E(t){var r=Bt(this,t).delete(t);return this.size-=r?1:0,r}function I(t){return Bt(this,t).get(t)}function F(t){return Bt(this,t).has(t)}function L(t,r){var n=Bt(this,t),e=n.size;return n.set(t,r),this.size+=n.size==e?0:1,\nthis}function P(t){var r=-1,n=null==t?0:t.length;for(this.__data__=new k;++r<n;)this.add(t[r]);}function M(t){return this.__data__.set(t,Nr),this}function T(t){return this.__data__.has(t)}function U(t){this.size=(this.__data__=new O(t)).size;}function B(){this.__data__=new O,this.size=0;}function N(t){var r=this.__data__,n=r.delete(t);return this.size=r.size,n}function C(t){return this.__data__.get(t)}function D(t){return this.__data__.has(t)}function R(t,r){var n=this.__data__;if(n instanceof O){var e=n.__data__;\nif(!Se||e.length<Ur-1)return e.push([t,r]),this.size=++n.size,this;n=this.__data__=new k(e);}return n.set(t,r),this.size=n.size,this}function V(t,r){var n=Xe(t),e=!n&&Qe(t),u=!n&&!e&&Ye(t),o=!n&&!e&&!u&&ru(t),i=n||e||u||o,c=i?a(t.length,String):[],f=c.length;for(var s in t)!r&&!ce.call(t,s)||i&&(\"length\"==s||u&&(\"offset\"==s||\"parent\"==s)||o&&(\"buffer\"==s||\"byteLength\"==s||\"byteOffset\"==s)||Gt(s,f))||c.push(s);return c}function q(t,r,n){var e=t[r];ce.call(t,r)&&lr(e,n)&&(n!==Mr||r in t)||J(t,r,n);}function W(t,r){\nfor(var n=t.length;n--;)if(lr(t[n][0],r))return n;return -1}function G(t,r){return t&&zt(r,xr(r),t)}function H(t,r){return t&&zt(r,Sr(r),t)}function J(t,r,n){\"__proto__\"==r&&je?je(t,r,{configurable:true,enumerable:true,value:n,writable:true}):t[r]=n;}function K(t,n,e,u,o,i){var c,a=n&Dr,f=n&Rr,s=n&Vr;if(e&&(c=o?e(t,u,o,i):e(t)),c!==Mr)return c;if(!br(t))return t;var l=Xe(t);if(l){if(c=Vt(t),!a)return At(t,c)}else {var h=Ge(t),p=h==un||h==on;if(Ye(t))return gt(t,a);if(h==sn||h==Yr||p&&!o){if(c=f||p?{}:qt(t),\n!a)return f?St(t,H(c,t)):xt(t,G(c,t))}else {if(!Vn[h])return o?t:{};c=Wt(t,h,a);}}i||(i=new U);var v=i.get(t);if(v)return v;if(i.set(t,c),tu(t))return t.forEach(function(r){c.add(K(r,n,e,r,t,i));}),c;if(Ze(t))return t.forEach(function(r,u){c.set(u,K(r,n,e,u,t,i));}),c;var y=s?f?Tt:Mt:f?Sr:xr,b=l?Mr:y(t);return r(b||t,function(r,u){b&&(u=r,r=t[u]),q(c,u,K(r,n,e,u,t,i));}),c}function Q(t,r){return t&&Re(t,r,xr)}function X(t,r){r=_t(r,t);for(var n=0,e=r.length;null!=t&&n<e;)t=t[or(r[n++])];return n&&n==e?t:Mr;\n}function Y(t,r,n){var e=r(t);return Xe(t)?e:u(e,n(t))}function Z(t){return null==t?t===Mr?_n:fn:de&&de in Object(t)?Dt(t):nr(t)}function tt(t,r){return null!=t&&r in Object(t)}function rt(t){return _r(t)&&Z(t)==Yr}function nt(t,r,n,e,u){return t===r||(null==t||null==r||!_r(t)&&!_r(r)?t!==t&&r!==r:et(t,r,n,e,nt,u))}function et(t,r,n,e,u,o){var i=Xe(t),c=Xe(r),a=i?Zr:Ge(t),f=c?Zr:Ge(r);a=a==Yr?sn:a,f=f==Yr?sn:f;var s=a==sn,l=f==sn,h=a==f;if(h&&Ye(t)){if(!Ye(r))return false;i=true,s=false;}if(h&&!s)return o||(o=new U),\ni||ru(t)?Ft(t,r,n,e,u,o):Lt(t,r,a,n,e,u,o);if(!(n&qr)){var p=s&&ce.call(t,\"__wrapped__\"),v=l&&ce.call(r,\"__wrapped__\");if(p||v){var y=p?t.value():t,b=v?r.value():r;return o||(o=new U),u(y,b,n,e,o)}}return !!h&&(o||(o=new U),Pt(t,r,n,e,u,o))}function ut(t){return _r(t)&&Ge(t)==cn}function ot(t,r,n,e){var u=n.length,o=u,i=!e;if(null==t)return !o;for(t=Object(t);u--;){var c=n[u];if(i&&c[2]?c[1]!==t[c[0]]:!(c[0]in t))return false}for(;++u<o;){c=n[u];var a=c[0],f=t[a],s=c[1];if(i&&c[2]){if(f===Mr&&!(a in t))return false;\n}else {var l=new U;if(e)var h=e(f,s,a,t,r,l);if(!(h===Mr?nt(s,f,qr|Wr,e,l):h))return false}}return true}function it(t){return !(!br(t)||Qt(t))&&(vr(t)?se:Nn).test(ir(t))}function ct(t){return _r(t)&&Ge(t)==vn}function at(t){return _r(t)&&yr(t.length)&&!!Rn[Z(t)]}function ft(t){return typeof t==\"function\"?t:null==t?$r:typeof t==\"object\"?Xe(t)?pt(t[0],t[1]):ht(t):Fr(t)}function st(t){if(!Xt(t))return me(t);var r=[];for(var n in Object(t))ce.call(t,n)&&\"constructor\"!=n&&r.push(n);return r}function lt(t){if(!br(t))return rr(t);\nvar r=Xt(t),n=[];for(var e in t)(\"constructor\"!=e||!r&&ce.call(t,e))&&n.push(e);return n}function ht(t){var r=Nt(t);return 1==r.length&&r[0][2]?Zt(r[0][0],r[0][1]):function(n){return n===t||ot(n,t,r)}}function pt(t,r){return Jt(t)&&Yt(r)?Zt(or(t),r):function(n){var e=Ar(n,t);return e===Mr&&e===r?zr(n,t):nt(r,e,qr|Wr)}}function vt(t){return function(r){return X(r,t)}}function yt(t,r){return He(er(t,r,$r),t+\"\")}function bt(t){if(typeof t==\"string\")return t;if(Xe(t))return e(t,bt)+\"\";if(gr(t))return Ne?Ne.call(t):\"\";\nvar r=t+\"\";return \"0\"==r&&1/t==-Jr?\"-0\":r}function _t(t,r){return Xe(t)?t:Jt(t,r)?[t]:Je(Or(t))}function gt(t,r){if(r)return t.slice();var n=t.length,e=ve?ve(n):new t.constructor(n);return t.copy(e),e}function dt(t){var r=new t.constructor(t.byteLength);return new pe(r).set(new pe(t)),r}function jt(t,r){return new t.constructor(r?dt(t.buffer):t.buffer,t.byteOffset,t.byteLength)}function wt(t){var r=new t.constructor(t.source,Tn.exec(t));return r.lastIndex=t.lastIndex,r}function Ot(t){return Be?Object(Be.call(t)):{};\n}function mt(t,r){return new t.constructor(r?dt(t.buffer):t.buffer,t.byteOffset,t.length)}function At(t,r){var n=-1,e=t.length;for(r||(r=Array(e));++n<e;)r[n]=t[n];return r}function zt(t,r,n,e){var u=!n;n||(n={});for(var o=-1,i=r.length;++o<i;){var c=r[o],a=e?e(n[c],t[c],c,n,t):Mr;a===Mr&&(a=t[c]),u?J(n,c,a):q(n,c,a);}return n}function xt(t,r){return zt(t,qe(t),r)}function St(t,r){return zt(t,We(t),r)}function kt(t){return yt(function(r,n){var e=-1,u=n.length,o=u>1?n[u-1]:Mr,i=u>2?n[2]:Mr;for(o=t.length>3&&typeof o==\"function\"?(u--,\no):Mr,i&&Ht(n[0],n[1],i)&&(o=u<3?Mr:o,u=1),r=Object(r);++e<u;){var c=n[e];c&&t(r,c,e,o);}return r})}function $t(t,r){return function(n,e){if(null==n)return n;if(!hr(n))return t(n,e);for(var u=n.length,o=r?u:-1,i=Object(n);(r?o--:++o<u)&&e(i[o],o,i)!==false;);return n}}function Et(t){return function(r,n,e){for(var u=-1,o=Object(r),i=e(r),c=i.length;c--;){var a=i[t?c:++u];if(n(o[a],a,o)===false)break}return r}}function It(t){return function(r,n,e){var u=Object(r);if(!hr(r)){var o=Ut(n,3);r=xr(r),n=function(t){\nreturn o(u[t],t,u)};}var i=t(r,n,e);return i>-1?u[o?r[i]:i]:Mr}}function Ft(t,r,n,e,u,i){var c=n&qr,a=t.length,f=r.length;if(a!=f&&!(c&&f>a))return false;var l=i.get(t);if(l&&i.get(r))return l==r;var h=-1,p=true,v=n&Wr?new P:Mr;for(i.set(t,r),i.set(r,t);++h<a;){var y=t[h],b=r[h];if(e)var _=c?e(b,y,h,r,t,i):e(y,b,h,t,r,i);if(_!==Mr){if(_)continue;p=false;break}if(v){if(!o(r,function(t,r){if(!s(v,r)&&(y===t||u(y,t,n,e,i)))return v.push(r)})){p=false;break}}else if(y!==b&&!u(y,b,n,e,i)){p=false;break}}return i.delete(t),\ni.delete(r),p}function Lt(t,r,n,e,u,o,i){switch(n){case jn:if(t.byteLength!=r.byteLength||t.byteOffset!=r.byteOffset)return false;t=t.buffer,r=r.buffer;case dn:return !(t.byteLength!=r.byteLength||!o(new pe(t),new pe(r)));case rn:case nn:case an:return lr(+t,+r);case en:return t.name==r.name&&t.message==r.message;case pn:case yn:return t==r+\"\";case cn:var c=h;case vn:var a=e&qr;if(c||(c=v),t.size!=r.size&&!a)return false;var f=i.get(t);if(f)return f==r;e|=Wr,i.set(t,r);var s=Ft(c(t),c(r),e,u,o,i);return i.delete(t),\ns;case bn:if(Be)return Be.call(t)==Be.call(r)}return false}function Pt(t,r,n,e,u,o){var i=n&qr,c=Mt(t),a=c.length;if(a!=Mt(r).length&&!i)return false;for(var f=a;f--;){var s=c[f];if(!(i?s in r:ce.call(r,s)))return false}var l=o.get(t);if(l&&o.get(r))return l==r;var h=true;o.set(t,r),o.set(r,t);for(var p=i;++f<a;){s=c[f];var v=t[s],y=r[s];if(e)var b=i?e(y,v,s,r,t,o):e(v,y,s,t,r,o);if(!(b===Mr?v===y||u(v,y,n,e,o):b)){h=false;break}p||(p=\"constructor\"==s);}if(h&&!p){var _=t.constructor,g=r.constructor;_!=g&&\"constructor\"in t&&\"constructor\"in r&&!(typeof _==\"function\"&&_ instanceof _&&typeof g==\"function\"&&g instanceof g)&&(h=false);\n}return o.delete(t),o.delete(r),h}function Mt(t){return Y(t,xr,qe)}function Tt(t){return Y(t,Sr,We)}function Ut(){var t=y.iteratee||Er;return t=t===Er?ft:t,arguments.length?t(arguments[0],arguments[1]):t}function Bt(t,r){var n=t.__data__;return Kt(r)?n[typeof r==\"string\"?\"string\":\"hash\"]:n.map}function Nt(t){for(var r=xr(t),n=r.length;n--;){var e=r[n],u=t[e];r[n]=[e,u,Yt(u)];}return r}function Ct(t,r){var n=l(t,r);return it(n)?n:Mr}function Dt(t){var r=ce.call(t,de),n=t[de];try{t[de]=Mr;var e=true;}catch(t){}\nvar u=fe.call(t);return e&&(r?t[de]=n:delete t[de]),u}function Rt(t,r,n){r=_t(r,t);for(var e=-1,u=r.length,o=false;++e<u;){var i=or(r[e]);if(!(o=null!=t&&n(t,i)))break;t=t[i];}return o||++e!=u?o:(u=null==t?0:t.length,!!u&&yr(u)&&Gt(i,u)&&(Xe(t)||Qe(t)))}function Vt(t){var r=t.length,n=new t.constructor(r);return r&&\"string\"==typeof t[0]&&ce.call(t,\"index\")&&(n.index=t.index,n.input=t.input),n}function qt(t){return typeof t.constructor!=\"function\"||Xt(t)?{}:Ce(ye(t))}function Wt(t,r,n){var e=t.constructor;\nswitch(r){case dn:return dt(t);case rn:case nn:return new e(+t);case jn:return jt(t,n);case wn:case On:case mn:case An:case zn:case xn:case Sn:case kn:case $n:return mt(t,n);case cn:return new e;case an:case yn:return new e(t);case pn:return wt(t);case vn:return new e;case bn:return Ot(t)}}function Gt(t,r){var n=typeof t;return r=null==r?Kr:r,!!r&&(\"number\"==n||\"symbol\"!=n&&Dn.test(t))&&t>-1&&t%1==0&&t<r}function Ht(t,r,n){if(!br(n))return false;var e=typeof r;return !!(\"number\"==e?hr(n)&&Gt(r,n.length):\"string\"==e&&r in n)&&lr(n[r],t);\n}function Jt(t,r){if(Xe(t))return false;var n=typeof t;return !(\"number\"!=n&&\"symbol\"!=n&&\"boolean\"!=n&&null!=t&&!gr(t))||(In.test(t)||!En.test(t)||null!=r&&t in Object(r))}function Kt(t){var r=typeof t;return \"string\"==r||\"number\"==r||\"symbol\"==r||\"boolean\"==r?\"__proto__\"!==t:null===t}function Qt(t){return !!ae&&ae in t}function Xt(t){var r=t&&t.constructor;return t===(typeof r==\"function\"&&r.prototype||ue)}function Yt(t){return t===t&&!br(t)}function Zt(t,r){return function(n){return null!=n&&(n[t]===r&&(r!==Mr||t in Object(n)));\n}}function tr(t){var r=fr(t,function(t){return n.size===Cr&&n.clear(),t}),n=r.cache;return r}function rr(t){var r=[];if(null!=t)for(var n in Object(t))r.push(n);return r}function nr(t){return fe.call(t)}function er(r,n,e){return n=Ae(n===Mr?r.length-1:n,0),function(){for(var u=arguments,o=-1,i=Ae(u.length-n,0),c=Array(i);++o<i;)c[o]=u[n+o];o=-1;for(var a=Array(n+1);++o<n;)a[o]=u[o];return a[n]=e(c),t(r,this,a)}}function ur(t){var r=0,n=0;return function(){var e=ze(),u=Hr-(e-n);if(n=e,u>0){if(++r>=Gr)return arguments[0];\n}else r=0;return t.apply(Mr,arguments)}}function or(t){if(typeof t==\"string\"||gr(t))return t;var r=t+\"\";return \"0\"==r&&1/t==-Jr?\"-0\":r}function ir(t){if(null!=t){try{return ie.call(t)}catch(t){}try{return t+\"\"}catch(t){}}return \"\"}function cr(t,r,n){var e=null==t?0:t.length;if(!e)return -1;var u=null==n?0:jr(n);return u<0&&(u=Ae(e+u,0)),i(t,Ut(r,3),u)}function ar(t,n){return (Xe(t)?r:De)(t,Ut(n,3))}function fr(t,r){if(typeof t!=\"function\"||null!=r&&typeof r!=\"function\")throw new TypeError(Br);var n=function(){\nvar e=arguments,u=r?r.apply(this,e):e[0],o=n.cache;if(o.has(u))return o.get(u);var i=t.apply(this,e);return n.cache=o.set(u,i)||o,i};return n.cache=new(fr.Cache||k),n}function sr(t){return K(t,Vr)}function lr(t,r){return t===r||t!==t&&r!==r}function hr(t){return null!=t&&yr(t.length)&&!vr(t)}function pr(t,r){return nt(t,r)}function vr(t){if(!br(t))return false;var r=Z(t);return r==un||r==on||r==tn||r==hn}function yr(t){return typeof t==\"number\"&&t>-1&&t%1==0&&t<=Kr}function br(t){var r=typeof t;return null!=t&&(\"object\"==r||\"function\"==r);\n}function _r(t){return null!=t&&typeof t==\"object\"}function gr(t){return typeof t==\"symbol\"||_r(t)&&Z(t)==bn}function dr(t){if(!t)return 0===t?t:0;if(t=wr(t),t===Jr||t===-Jr){return (t<0?-1:1)*Qr}return t===t?t:0}function jr(t){var r=dr(t),n=r%1;return r===r?n?r-n:r:0}function wr(t){if(typeof t==\"number\")return t;if(gr(t))return Xr;if(br(t)){var r=typeof t.valueOf==\"function\"?t.valueOf():t;t=br(r)?r+\"\":r;}if(typeof t!=\"string\")return 0===t?t:+t;t=t.replace(Pn,\"\");var n=Bn.test(t);return n||Cn.test(t)?qn(t.slice(2),n?2:8):Un.test(t)?Xr:+t;\n}function Or(t){return null==t?\"\":bt(t)}function mr(t,r){return t&&Q(t,Ut(r,3))}function Ar(t,r,n){var e=null==t?Mr:X(t,r);return e===Mr?n:e}function zr(t,r){return null!=t&&Rt(t,r,tt)}function xr(t){return hr(t)?V(t):st(t)}function Sr(t){return hr(t)?V(t,true):lt(t)}function kr(t){return function(){return t}}function $r(t){return t}function Er(t){return ft(typeof t==\"function\"?t:K(t,Dr))}function Ir(t,r){return pt(t,K(r,Dr))}function Fr(t){return Jt(t)?c(or(t)):vt(t)}function Lr(){return []}function Pr(){\nreturn false}var Mr,Tr=\"4.17.5\",Ur=200,Br=\"Expected a function\",Nr=\"__lodash_hash_undefined__\",Cr=500,Dr=1,Rr=2,Vr=4,qr=1,Wr=2,Gr=800,Hr=16,Jr=1/0,Kr=9007199254740991,Qr=1.7976931348623157e308,Xr=NaN,Yr=\"[object Arguments]\",Zr=\"[object Array]\",tn=\"[object AsyncFunction]\",rn=\"[object Boolean]\",nn=\"[object Date]\",en=\"[object Error]\",un=\"[object Function]\",on=\"[object GeneratorFunction]\",cn=\"[object Map]\",an=\"[object Number]\",fn=\"[object Null]\",sn=\"[object Object]\",ln=\"[object Promise]\",hn=\"[object Proxy]\",pn=\"[object RegExp]\",vn=\"[object Set]\",yn=\"[object String]\",bn=\"[object Symbol]\",_n=\"[object Undefined]\",gn=\"[object WeakMap]\",dn=\"[object ArrayBuffer]\",jn=\"[object DataView]\",wn=\"[object Float32Array]\",On=\"[object Float64Array]\",mn=\"[object Int8Array]\",An=\"[object Int16Array]\",zn=\"[object Int32Array]\",xn=\"[object Uint8Array]\",Sn=\"[object Uint8ClampedArray]\",kn=\"[object Uint16Array]\",$n=\"[object Uint32Array]\",En=/\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,In=/^\\w*$/,Fn=/[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g,Ln=/[\\\\^$.*+?()[\\]{}|]/g,Pn=/^\\s+|\\s+$/g,Mn=/\\\\(\\\\)?/g,Tn=/\\w*$/,Un=/^[-+]0x[0-9a-f]+$/i,Bn=/^0b[01]+$/i,Nn=/^\\[object .+?Constructor\\]$/,Cn=/^0o[0-7]+$/i,Dn=/^(?:0|[1-9]\\d*)$/,Rn={};\nRn[wn]=Rn[On]=Rn[mn]=Rn[An]=Rn[zn]=Rn[xn]=Rn[Sn]=Rn[kn]=Rn[$n]=true,Rn[Yr]=Rn[Zr]=Rn[dn]=Rn[rn]=Rn[jn]=Rn[nn]=Rn[en]=Rn[un]=Rn[cn]=Rn[an]=Rn[sn]=Rn[pn]=Rn[vn]=Rn[yn]=Rn[gn]=false;var Vn={};Vn[Yr]=Vn[Zr]=Vn[dn]=Vn[jn]=Vn[rn]=Vn[nn]=Vn[wn]=Vn[On]=Vn[mn]=Vn[An]=Vn[zn]=Vn[cn]=Vn[an]=Vn[sn]=Vn[pn]=Vn[vn]=Vn[yn]=Vn[bn]=Vn[xn]=Vn[Sn]=Vn[kn]=Vn[$n]=true,Vn[en]=Vn[un]=Vn[gn]=false;var qn=parseInt,Wn=typeof commonjsGlobal==\"object\"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,Gn=typeof self==\"object\"&&self&&self.Object===Object&&self,Hn=Wn||Gn||Function(\"return this\")(),Jn=exports&&!exports.nodeType&&exports,Kn=Jn&&'object'==\"object\"&&module&&!module.nodeType&&module,Qn=Kn&&Kn.exports===Jn,Xn=Qn&&Wn.process,Yn=function(){\ntry{return Xn&&Xn.binding&&Xn.binding(\"util\")}catch(t){}}(),Zn=Yn&&Yn.isMap,te=Yn&&Yn.isSet,re=Yn&&Yn.isTypedArray,ne=Array.prototype,ee=Function.prototype,ue=Object.prototype,oe=Hn[\"__core-js_shared__\"],ie=ee.toString,ce=ue.hasOwnProperty,ae=function(){var t=/[^.]+$/.exec(oe&&oe.keys&&oe.keys.IE_PROTO||\"\");return t?\"Symbol(src)_1.\"+t:\"\"}(),fe=ue.toString,se=RegExp(\"^\"+ie.call(ce).replace(Ln,\"\\\\$&\").replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g,\"$1.*?\")+\"$\"),le=Qn?Hn.Buffer:Mr,he=Hn.Symbol,pe=Hn.Uint8Array,ve=le?le.allocUnsafe:Mr,ye=p(Object.getPrototypeOf,Object),be=Object.create,_e=ue.propertyIsEnumerable,ge=ne.splice,de=he?he.toStringTag:Mr,je=function(){\ntry{var t=Ct(Object,\"defineProperty\");return t({},\"\",{}),t}catch(t){}}(),we=Object.getOwnPropertySymbols,Oe=le?le.isBuffer:Mr,me=p(Object.keys,Object),Ae=Math.max,ze=Date.now,xe=Ct(Hn,\"DataView\"),Se=Ct(Hn,\"Map\"),ke=Ct(Hn,\"Promise\"),$e=Ct(Hn,\"Set\"),Ee=Ct(Hn,\"WeakMap\"),Ie=Ct(Object,\"create\"),Fe=ir(xe),Le=ir(Se),Pe=ir(ke),Me=ir($e),Te=ir(Ee),Ue=he?he.prototype:Mr,Be=Ue?Ue.valueOf:Mr,Ne=Ue?Ue.toString:Mr,Ce=function(){function t(){}return function(r){if(!br(r))return {};if(be)return be(r);t.prototype=r;\nvar n=new t;return t.prototype=Mr,n}}();b.prototype.clear=_,b.prototype.delete=g,b.prototype.get=d,b.prototype.has=j,b.prototype.set=w,O.prototype.clear=m,O.prototype.delete=A,O.prototype.get=z,O.prototype.has=x,O.prototype.set=S,k.prototype.clear=$,k.prototype.delete=E,k.prototype.get=I,k.prototype.has=F,k.prototype.set=L,P.prototype.add=P.prototype.push=M,P.prototype.has=T,U.prototype.clear=B,U.prototype.delete=N,U.prototype.get=C,U.prototype.has=D,U.prototype.set=R;var De=$t(Q),Re=Et(),Ve=je?function(t,r){\nreturn je(t,\"toString\",{configurable:true,enumerable:false,value:kr(r),writable:true})}:$r,qe=we?function(t){return null==t?[]:(t=Object(t),n(we(t),function(r){return _e.call(t,r)}))}:Lr,We=we?function(t){for(var r=[];t;)u(r,qe(t)),t=ye(t);return r}:Lr,Ge=Z;(xe&&Ge(new xe(new ArrayBuffer(1)))!=jn||Se&&Ge(new Se)!=cn||ke&&Ge(ke.resolve())!=ln||$e&&Ge(new $e)!=vn||Ee&&Ge(new Ee)!=gn)&&(Ge=function(t){var r=Z(t),n=r==sn?t.constructor:Mr,e=n?ir(n):\"\";if(e)switch(e){case Fe:return jn;case Le:return cn;case Pe:\nreturn ln;case Me:return vn;case Te:return gn}return r});var He=ur(Ve),Je=tr(function(t){var r=[];return 46===t.charCodeAt(0)&&r.push(\"\"),t.replace(Fn,function(t,n,e,u){r.push(e?u.replace(Mn,\"$1\"):n||t);}),r}),Ke=It(cr);fr.Cache=k;var Qe=rt(function(){return arguments}())?rt:function(t){return _r(t)&&ce.call(t,\"callee\")&&!_e.call(t,\"callee\")},Xe=Array.isArray,Ye=Oe||Pr,Ze=Zn?f(Zn):ut,tu=te?f(te):ct,ru=re?f(re):at,nu=kt(function(t,r){if(Xt(r)||hr(r))return zt(r,xr(r),t),Mr;for(var n in r)ce.call(r,n)&&q(t,n,r[n]);\n}),eu=yt(function(t,r){t=Object(t);var n=-1,e=r.length,u=e>2?r[2]:Mr;for(u&&Ht(r[0],r[1],u)&&(e=1);++n<e;)for(var o=r[n],i=Sr(o),c=-1,a=i.length;++c<a;){var f=i[c],s=t[f];(s===Mr||lr(s,ue[f])&&!ce.call(t,f))&&(t[f]=o[f]);}return t});y.assign=nu,y.constant=kr,y.defaults=eu,y.iteratee=Er,y.keys=xr,y.keysIn=Sr,y.matchesProperty=Ir,y.memoize=fr,y.property=Fr,y.clone=sr,y.eq=lr,y.find=Ke,y.findIndex=cr,y.forEach=ar,y.forOwn=mr,y.get=Ar,y.hasIn=zr,y.identity=$r,y.isArguments=Qe,y.isArray=Xe,y.isArrayLike=hr,\ny.isBuffer=Ye,y.isEqual=pr,y.isFunction=vr,y.isLength=yr,y.isMap=Ze,y.isObject=br,y.isObjectLike=_r,y.isSet=tu,y.isSymbol=gr,y.isTypedArray=ru,y.stubArray=Lr,y.stubFalse=Pr,y.toFinite=dr,y.toInteger=jr,y.toNumber=wr,y.toString=Or,y.each=ar,y.VERSION=Tr,Kn?((Kn.exports=y)._=y,Jn._=y):Hn._=y;}).call(commonjsGlobal);\n});\n\nvar alt_min = createCommonjsModule(function (module, exports) {\n!function(t){module.exports=t();}(function(){return function t(e,n,r){function i(s,a){if(!n[s]){if(!e[s]){var c=\"function\"==typeof commonjsRequire&&commonjsRequire;if(!a&&c)return c(s,!0);if(o)return o(s,!0);var u=new Error(\"Cannot find module '\"+s+\"'\");throw u.code=\"MODULE_NOT_FOUND\",u}var l=n[s]={exports:{}};e[s][0].call(l.exports,function(t){var n=e[s][1][t];return i(n||t)},l,l.exports,t,e,n,r);}return n[s].exports}for(var o=\"function\"==typeof commonjsRequire&&commonjsRequire,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(t,e,n){var r={},i=Object.create,o=Object.defineProperties,s=Object.defineProperty,a=function(t){var e=void 0===arguments[1]?{}:arguments[1];return {value:t,configurable:!!e.c,writable:!!e.w,enumerable:!!e.e}},c=void 0;try{var u=s({},\"y\",{get:function(){return 1}});c=1===u.y;}catch(t){c=!1;}var l={},f=function(t){t=String(t);for(var e=\"\",n=0;l[t+e];)e=n+=1;l[t+e]=1;var r=\"Symbol(\"+t+e+\")\";return c&&s(Object.prototype,r,{get:void 0,set:function(t){s(this,r,a(t,{c:!0,w:!0}));},configurable:!0,enumerable:!1}),r},h=i(null);function p(t){if(this instanceof p)throw new TypeError(\"Symbol is not a constructor\");t=void 0===t?\"\":String(t);var e=f(t);return c?i(h,{__description__:a(t),__tag__:a(e)}):e}o(p,{for:a(function(t){var e=String(t);if(r[e])return r[e];var n=p(e);return r[e]=n,n}),keyFor:a(function(t){if(c&&(!(e=t)||\"Symbol\"!==e[p.toStringTag]))throw new TypeError(t+\" is not a symbol\");var e;for(var n in r)if(r[n]===t)return c?r[n].__description__:r[n].substr(7,r[n].length-8)})}),o(p,{hasInstance:a(p(\"hasInstance\")),isConcatSpreadable:a(p(\"isConcatSpreadable\")),iterator:a(p(\"iterator\")),match:a(p(\"match\")),replace:a(p(\"replace\")),search:a(p(\"search\")),species:a(p(\"species\")),split:a(p(\"split\")),toPrimitive:a(p(\"toPrimitive\")),toStringTag:a(p(\"toStringTag\")),unscopables:a(p(\"unscopables\"))}),o(h,{constructor:a(p),toString:a(function(){return this.__tag__}),valueOf:a(function(){return \"Symbol(\"+this.__description__+\")\"})}),c&&s(h,p.toStringTag,a(\"Symbol\",{c:!0})),e.exports=\"function\"==typeof Symbol?Symbol:p;},{}],2:[function(t,e,n){function r(t,e,n){this.fn=t,this.context=e,this.once=n||!1;}function i(){}i.prototype._events=void 0,i.prototype.listeners=function(t){if(!this._events||!this._events[t])return [];if(this._events[t].fn)return [this._events[t].fn];for(var e=0,n=this._events[t].length,r=new Array(n);e<n;e++)r[e]=this._events[t][e].fn;return r},i.prototype.emit=function(t,e,n,r,i,o){if(!this._events||!this._events[t])return !1;var s,a,c=this._events[t],u=arguments.length;if(\"function\"==typeof c.fn){switch(c.once&&this.removeListener(t,c.fn,!0),u){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,n),!0;case 4:return c.fn.call(c.context,e,n,r),!0;case 5:return c.fn.call(c.context,e,n,r,i),!0;case 6:return c.fn.call(c.context,e,n,r,i,o),!0}for(a=1,s=new Array(u-1);a<u;a++)s[a-1]=arguments[a];c.fn.apply(c.context,s);}else {var l,f=c.length;for(a=0;a<f;a++)switch(c[a].once&&this.removeListener(t,c[a].fn,!0),u){case 1:c[a].fn.call(c[a].context);break;case 2:c[a].fn.call(c[a].context,e);break;case 3:c[a].fn.call(c[a].context,e,n);break;default:if(!s)for(l=1,s=new Array(u-1);l<u;l++)s[l-1]=arguments[l];c[a].fn.apply(c[a].context,s);}}return !0},i.prototype.on=function(t,e,n){var i=new r(e,n||this);return this._events||(this._events={}),this._events[t]?this._events[t].fn?this._events[t]=[this._events[t],i]:this._events[t].push(i):this._events[t]=i,this},i.prototype.once=function(t,e,n){var i=new r(e,n||this,!0);return this._events||(this._events={}),this._events[t]?this._events[t].fn?this._events[t]=[this._events[t],i]:this._events[t].push(i):this._events[t]=i,this},i.prototype.removeListener=function(t,e,n){if(!this._events||!this._events[t])return this;var r=this._events[t],i=[];if(e&&(r.fn&&(r.fn!==e||n&&!r.once)&&i.push(r),!r.fn))for(var o=0,s=r.length;o<s;o++)(r[o].fn!==e||n&&!r[o].once)&&i.push(r[o]);return i.length?this._events[t]=1===i.length?i[0]:i:delete this._events[t],this},i.prototype.removeAllListeners=function(t){return this._events?(t?delete this._events[t]:this._events={},this):this},i.prototype.off=i.prototype.removeListener,i.prototype.addListener=i.prototype.on,i.prototype.setMaxListeners=function(){return this},i.EventEmitter=i,i.EventEmitter2=i,i.EventEmitter3=i,e.exports=i;},{}],3:[function(t,e,n){e.exports.Dispatcher=t(\"./lib/Dispatcher\");},{\"./lib/Dispatcher\":4}],4:[function(t,e,n){var r=t(\"./invariant\"),i=1;function o(){this.$Dispatcher_callbacks={},this.$Dispatcher_isPending={},this.$Dispatcher_isHandled={},this.$Dispatcher_isDispatching=!1,this.$Dispatcher_pendingPayload=null;}o.prototype.register=function(t){var e=\"ID_\"+i++;return this.$Dispatcher_callbacks[e]=t,e},o.prototype.unregister=function(t){r(this.$Dispatcher_callbacks[t],\"Dispatcher.unregister(...): `%s` does not map to a registered callback.\",t),delete this.$Dispatcher_callbacks[t];},o.prototype.waitFor=function(t){r(this.$Dispatcher_isDispatching,\"Dispatcher.waitFor(...): Must be invoked while dispatching.\");for(var e=0;e<t.length;e++){var n=t[e];this.$Dispatcher_isPending[n]?r(this.$Dispatcher_isHandled[n],\"Dispatcher.waitFor(...): Circular dependency detected while waiting for `%s`.\",n):(r(this.$Dispatcher_callbacks[n],\"Dispatcher.waitFor(...): `%s` does not map to a registered callback.\",n),this.$Dispatcher_invokeCallback(n));}},o.prototype.dispatch=function(t){r(!this.$Dispatcher_isDispatching,\"Dispatch.dispatch(...): Cannot dispatch in the middle of a dispatch.\"),this.$Dispatcher_startDispatching(t);try{for(var e in this.$Dispatcher_callbacks)this.$Dispatcher_isPending[e]||this.$Dispatcher_invokeCallback(e);}finally{this.$Dispatcher_stopDispatching();}},o.prototype.isDispatching=function(){return this.$Dispatcher_isDispatching},o.prototype.$Dispatcher_invokeCallback=function(t){this.$Dispatcher_isPending[t]=!0,this.$Dispatcher_callbacks[t](this.$Dispatcher_pendingPayload),this.$Dispatcher_isHandled[t]=!0;},o.prototype.$Dispatcher_startDispatching=function(t){for(var e in this.$Dispatcher_callbacks)this.$Dispatcher_isPending[e]=!1,this.$Dispatcher_isHandled[e]=!1;this.$Dispatcher_pendingPayload=t,this.$Dispatcher_isDispatching=!0;},o.prototype.$Dispatcher_stopDispatching=function(){this.$Dispatcher_pendingPayload=null,this.$Dispatcher_isDispatching=!1;},e.exports=o;},{\"./invariant\":5}],5:[function(t,e,n){e.exports=function(t,e,n,r,i,o,s,a){if(!t){var c;if(void 0===e)c=new Error(\"Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.\");else {var u=[n,r,i,o,s,a],l=0;c=new Error(\"Invariant Violation: \"+e.replace(/%s/g,function(){return u[l++]}));}throw c.framesToPop=1,c}};},{}],6:[function(t,e,n){Object.defineProperty(n,\"__esModule\",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r);}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}n.default=function(t,e,n,r,i){var o=u.uid(t[c.ACTIONS_REGISTRY],e+\".\"+n);t[c.ACTIONS_REGISTRY][o]=1;var s=a.default.for(\"alt/\"+o),f={namespace:e,name:n,id:o,symbol:s},h=new l(t,s,r,i,f),p=h[c.ACTION_HANDLER];p.defer=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];setTimeout(function(){h[c.ACTION_HANDLER].apply(null,e);});},p[c.ACTION_KEY]=s,p.data=f;var d=t.actions[e],v=u.uid(d,n);return d[v]=p,p};var o,s=t(\"es-symbol\"),a=(o=s)&&o.__esModule?o:{default:o},c=i(t(\"../symbols/symbols\")),u=i(t(\"../utils/AltUtils\")),l=function(){function t(e,n,r,i,o){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t),this[c.ACTION_UID]=n,this[c.ACTION_HANDLER]=r.bind(this),this.actions=i,this.actionDetails=o,this.alt=e;}return r(t,[{key:\"dispatch\",value:function(t){this.alt.dispatch(this[c.ACTION_UID],t,this.actionDetails);}}]),t}();e.exports=n.default;},{\"../symbols/symbols\":10,\"../utils/AltUtils\":11,\"es-symbol\":1}],7:[function(t,e,n){Object.defineProperty(n,\"__esModule\",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r);}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t){return t&&t.__esModule?t:{default:t}}var s=o(t(\"eventemitter3\")),a=o(t(\"es-symbol\")),c=i(t(\"../symbols/symbols\")),u=i(t(\"../../utils/functions\")),l=(0, a.default)(),f=function(){function t(e,n,r,i){var o=this;!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t),this[l]=new s.default,this[c.LIFECYCLE]=n[c.LIFECYCLE],this[c.STATE_CONTAINER]=r||n,this._storeName=n._storeName,this.boundListeners=n[c.ALL_LISTENERS],this.StoreModel=i,u.assign(this,n[c.PUBLIC_METHODS]),this.dispatchToken=e.dispatcher.register(function(t){if(o[c.LIFECYCLE].emit(\"beforeEach\",t,o[c.STATE_CONTAINER]),n[c.LISTENERS][t.action]){var e=!1;try{e=n[c.LISTENERS][t.action](t.data);}catch(e){if(!n[c.HANDLING_ERRORS])throw e;o[c.LIFECYCLE].emit(\"error\",e,t,o[c.STATE_CONTAINER]);}!1!==e&&o.emitChange();}o[c.LIFECYCLE].emit(\"afterEach\",t,o[c.STATE_CONTAINER]);}),this[c.LIFECYCLE].emit(\"init\");}return r(t,[{key:\"getEventEmitter\",value:function(){return this[l]}},{key:\"emitChange\",value:function(){this[l].emit(\"change\",this[c.STATE_CONTAINER]);}},{key:\"listen\",value:function(t){var e=this;return this[l].on(\"change\",t),function(){return e.unlisten(t)}}},{key:\"unlisten\",value:function(t){this[c.LIFECYCLE].emit(\"unlisten\"),this[l].removeListener(\"change\",t);}},{key:\"getState\",value:function(){return this.StoreModel.config.getState.call(this,this[c.STATE_CONTAINER])}}]),t}();n.default=f,e.exports=n.default;},{\"../../utils/functions\":13,\"../symbols/symbols\":10,\"es-symbol\":1,eventemitter3:2}],8:[function(t,e,n){function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}Object.defineProperty(n,\"__esModule\",{value:!0});var i,o=t(\"es-symbol\"),s=(i=o)&&i.__esModule?i:{default:i},a=r(t(\"../symbols/symbols\")),c=r(t(\"../../utils/functions\")),u={waitFor:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];if(!e.length)throw new ReferenceError(\"Dispatch tokens not provided\");var r=e;1===e.length&&(r=Array.isArray(e[0])?e[0]:e);var i=r.map(function(t){return t.dispatchToken||t});this.dispatcher.waitFor(i);},exportAsync:function(t){this.registerAsync(t);},registerAsync:function(t){var e=this,n=0,r=c.isFunction(t)?t(this.alt):t,i=Object.keys(r).reduce(function(t,i){var o=r[i],s=c.isFunction(o)?o(e):o;return [\"success\",\"error\",\"loading\"].forEach(function(t){if(s[t]&&!s[t][a.ACTION_KEY])throw new Error(t+\" handler must be an action function\")}),t[i]=function(){for(var t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];var o=e.getInstance().getState(),a=s.local&&s.local.apply(s,[o].concat(r)),c=s.shouldFetch?s.shouldFetch.apply(s,[o].concat(r)):!a,u=s.interceptResponse||function(t){return t};c?(n+=1,s.loading&&s.loading(u(null,s.loading)),s.remote.apply(s,[o].concat(r)).then(function(t){n-=1,s.success(u(t,s.success));}).catch(function(t){n-=1,s.error(u(t,s.error));})):e.emitChange();},t},{});this.exportPublicMethods(i),this.exportPublicMethods({isLoading:function(){return n>0}});},exportPublicMethods:function(t){var e=this;c.eachObject(function(t,n){if(!c.isFunction(n))throw new TypeError(\"exportPublicMethods expects a function\");e[a.PUBLIC_METHODS][t]=n;},[t]);},emitChange:function(){this.getInstance().emitChange();},on:function(t,e){\"error\"===t&&(this[a.HANDLING_ERRORS]=!0),this[a.LIFECYCLE].on(t,e.bind(this));},bindAction:function(t,e){if(!t)throw new ReferenceError(\"Invalid action reference passed in\");if(!c.isFunction(e))throw new TypeError(\"bindAction expects a function\");if(e.length>1)throw new TypeError(\"Action handler in store \"+this._storeName+\" for \"+(t[a.ACTION_KEY]||t).toString()+\" was defined with two parameters. Only a single parameter is passed through the dispatcher, did you mean to pass in an Object instead?\");var n=t[a.ACTION_KEY]?t[a.ACTION_KEY]:t;this[a.LISTENERS][n]=e.bind(this),this[a.ALL_LISTENERS].push(s.default.keyFor(n));},bindActions:function(t){var e=this;c.eachObject(function(t,n){var r=t.replace(/./,function(t){return \"on\"+t[0].toUpperCase()}),i=null;if(e[t]&&e[r])throw new ReferenceError(\"You have multiple action handlers bound to an action: \"+t+\" and \"+r);e[t]?i=e[t]:e[r]&&(i=e[r]),i&&e.bindAction(n,i);},[t]);},bindListeners:function(t){var e=this;c.eachObject(function(t,n){var r=e[t];if(!r)throw new ReferenceError(t+\" defined but does not exist in \"+e._storeName);Array.isArray(n)?n.forEach(function(t){e.bindAction(t,r);}):e.bindAction(n,r);},[t]);}};n.default=u,e.exports=n.default;},{\"../../utils/functions\":13,\"../symbols/symbols\":10,\"es-symbol\":1}],9:[function(t,e,n){Object.defineProperty(n,\"__esModule\",{value:!0});var r=Function.prototype.bind,i=function(t,e,n){for(var r=!0;r;){var i=t,o=e,s=n;u=c=void 0,r=!1;var a=Object.getOwnPropertyDescriptor(i,o);if(void 0!==a){if(\"value\"in a)return a.value;var c=a.get;if(void 0===c)return;return c.call(s)}var u=Object.getPrototypeOf(i);if(null===u)return;t=u,e=o,n=s,r=!0;}};function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function s(t){return t&&t.__esModule?t:{default:t}}n.createStoreConfig=function(t,e){e.config=l.assign({getState:function(t){return l.assign({},t)},setState:l.assign},t,e.config);},n.transformStore=function(t,e){return t.reduce(function(t,e){return e(t)},e)},n.createStoreFromObject=function(t,e,n){var r=void 0,i=d({},t,n,l.assign({getInstance:function(){return r},setState:function(t){p(this,r,t);}},e));i.bindListeners&&h.default.bindListeners.call(i,i.bindListeners);i.lifecycle&&l.eachObject(function(t,e){h.default.on.call(i,t,e);},[i.lifecycle]);return r=l.assign(new f.default(t,i,i.state,e),i.publicMethods,{displayName:n})},n.createStoreFromClass=function(t,e,n){for(var o=arguments.length,s=Array(o>3?o-3:0),a=3;a<o;a++)s[a-3]=arguments[a];var c=void 0,h=e.config,v=function(t){function e(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,e),i(Object.getPrototypeOf(e.prototype),\"constructor\",this).apply(this,n);}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e);}(e,t),e}(e);d(v.prototype,t,n,{getInstance:function(){return c},setState:function(t){p(this,c,t);}});var y=new(r.apply(v,[null].concat(s)));h.bindListeners&&y.bindListeners(h.bindListeners);h.datasource&&y.exportAsync(h.datasource);return c=l.assign(new f.default(t,y,y[t.config.stateKey]||y[h.stateKey]||null,e),u.getInternalMethods(e),h.publicMethods,{displayName:n})};var a=s(t(\"eventemitter3\")),c=o(t(\"../symbols/symbols\")),u=o(t(\"../utils/AltUtils\")),l=o(t(\"../../utils/functions\")),f=s(t(\"./AltStore\")),h=s(t(\"./StoreMixin\"));function p(t,e,n){if(n){var r=e.StoreModel.config,i=l.isFunction(n)?n(e[c.STATE_CONTAINER]):n;e[c.STATE_CONTAINER]=r.setState.call(t,e[c.STATE_CONTAINER],i),t.alt.dispatcher.isDispatching()||t.emitChange();}}function d(t,e,n,r){return t[c.ALL_LISTENERS]=[],t[c.LIFECYCLE]=new a.default,t[c.LISTENERS]={},t[c.PUBLIC_METHODS]={},l.assign(t,h.default,{_storeName:n,alt:e,dispatcher:e.dispatcher},r)}},{\"../../utils/functions\":13,\"../symbols/symbols\":10,\"../utils/AltUtils\":11,\"./AltStore\":7,\"./StoreMixin\":8,eventemitter3:2}],10:[function(t,e,n){Object.defineProperty(n,\"__esModule\",{value:!0});var r,i=t(\"es-symbol\"),o=(r=i)&&r.__esModule?r:{default:r},s=(0, o.default)();n.ACTION_HANDLER=s;var a=(0, o.default)();n.ACTION_KEY=a;var c=(0, o.default)();n.ACTIONS_REGISTRY=c;var u=(0, o.default)();n.ACTION_UID=u;var l=(0, o.default)();n.ALL_LISTENERS=l;var f=(0, o.default)();n.HANDLING_ERRORS=f;var h=(0, o.default)();n.INIT_SNAPSHOT=h;var p=(0, o.default)();n.LAST_SNAPSHOT=p;var d=(0, o.default)();n.LIFECYCLE=d;var v=(0, o.default)();n.LISTENERS=v;var y=(0, o.default)();n.PUBLIC_METHODS=y;var _=(0, o.default)();n.STATE_CONTAINER=_;},{\"es-symbol\":1}],11:[function(t,e,n){function r(){}Object.defineProperty(n,\"__esModule\",{value:!0}),n.getInternalMethods=function(t,e){var n=e?o:i,r=e?t.prototype:t;return Object.getOwnPropertyNames(r).reduce(function(t,e){return -1!==n.indexOf(e)?t:(t[e]=r[e],t)},{})},n.warn=function(t){\"undefined\"!=typeof console&&console.warn(new ReferenceError(t));},n.uid=function(t,e){var n=0,r=e;for(;Object.hasOwnProperty.call(t,r);)r=e+String(++n);return r},n.formatAsConstant=function(t){return t.replace(/[a-z]([A-Z])/g,function(t){return t[0]+\"_\"+t[1].toLowerCase()}).toUpperCase()},n.dispatchIdentity=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];this.dispatch(n.length?[t].concat(n):t);};var i=Object.getOwnPropertyNames(r),o=Object.getOwnPropertyNames(r.prototype);},{}],12:[function(t,e,n){function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}Object.defineProperty(n,\"__esModule\",{value:!0}),n.setAppState=function(t,e,n){var r=t.deserialize(e);o.eachObject(function(e,s){var a,c,u=t.stores[e];u&&(a=u.StoreModel.config,c=u[i.STATE_CONTAINER],a.onDeserialize&&(r[e]=a.onDeserialize(s)||s),o.eachObject(function(t){return delete c[t]},[c]),o.assign(c,r[e]),n(u));},[r]);},n.snapshot=function(t){var e=void 0===arguments[1]?[]:arguments[1];return (e.length?e:Object.keys(t.stores)).reduce(function(e,n){var r=n.displayName||n,o=t.stores[r],s=o.StoreModel.config;o[i.LIFECYCLE].emit(\"snapshot\");var a=s.onSerialize&&s.onSerialize(o[i.STATE_CONTAINER]);return e[r]=a||o.getState(),e},{})},n.saveInitialSnapshot=function(t,e){var n=t.deserialize(t.serialize(t.stores[e][i.STATE_CONTAINER]));t[i.INIT_SNAPSHOT][e]=n,t[i.LAST_SNAPSHOT][e]=n;},n.filterSnapshots=function(t,e,n){return n.reduce(function(t,n){var r=n.displayName||n;if(!e[r])throw new ReferenceError(r+\" is not a valid store\");return t[r]=e[r],t},{})};var i=r(t(\"../symbols/symbols\")),o=r(t(\"../../utils/functions\"));},{\"../../utils/functions\":13,\"../symbols/symbols\":10}],13:[function(t,e,n){Object.defineProperty(n,\"__esModule\",{value:!0}),n.eachObject=r,n.assign=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return r(function(e,n){return t[e]=n},n),t};function r(t,e){e.forEach(function(e){Object.keys(Object(e)).forEach(function(n){t(n,e[n]);});});}n.isFunction=function(t){return \"function\"==typeof t};},{}],14:[function(t,e,n){Object.defineProperty(n,\"__esModule\",{value:!0});var r=Function.prototype.bind,i=function(t,e,n){for(var r=!0;r;){var i=t,o=e,s=n;u=c=void 0,r=!1;var a=Object.getOwnPropertyDescriptor(i,o);if(void 0!==a){if(\"value\"in a)return a.value;var c=a.get;if(void 0===c)return;return c.call(s)}var u=Object.getPrototypeOf(i);if(null===u)return;t=u,e=o,n=s,r=!0;}},o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r);}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function s(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function a(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}var c,u=t(\"flux\"),l=s(t(\"./utils/StateFunctions\")),f=s(t(\"./symbols/symbols\")),h=s(t(\"../utils/functions\")),p=s(t(\"./store\")),d=s(t(\"./utils/AltUtils\")),v=t(\"./actions\"),y=(c=v)&&c.__esModule?c:{default:c},_=function(){function t(){var e=void 0===arguments[0]?{}:arguments[0];a(this,t),this.config=e,this.serialize=e.serialize||JSON.stringify,this.deserialize=e.deserialize||JSON.parse,this.dispatcher=e.dispatcher||new u.Dispatcher,this.actions={global:{}},this.stores={},this.storeTransforms=e.storeTransforms||[],this[f.ACTIONS_REGISTRY]={},this[f.INIT_SNAPSHOT]={},this[f.LAST_SNAPSHOT]={};}return o(t,[{key:\"dispatch\",value:function(t,e,n){this.dispatcher.dispatch({action:t,data:e,details:n});}},{key:\"createUnsavedStore\",value:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=t.displayName||\"\";p.createStoreConfig(this.config,t);var o=p.transformStore(this.storeTransforms,t);return h.isFunction(o)?p.createStoreFromClass.apply(p,[this,o,i].concat(n)):p.createStoreFromObject(this,o,i)}},{key:\"createStore\",value:function(t,e){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var o=e||t.displayName||t.name||\"\";p.createStoreConfig(this.config,t);var s=p.transformStore(this.storeTransforms,t);!this.stores[o]&&o||(this.stores[o]?d.warn(\"A store named \"+o+\" already exists, double check your store names or pass in your own custom identifier for each store\"):d.warn(\"Store name was not specified\"),o=d.uid(this.stores,o));var a=h.isFunction(s)?p.createStoreFromClass.apply(p,[this,s,o].concat(r)):p.createStoreFromObject(this,s,o);return this.stores[o]=a,l.saveInitialSnapshot(this,o),a}},{key:\"generateActions\",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.createActions(e.reduce(function(t,e){return t[e]=d.dispatchIdentity,t},{name:\"global\"}))}},{key:\"createAction\",value:function(t,e,n){return (0, y.default)(this,\"global\",t,e,n)}},{key:\"createActions\",value:function(t){for(var e=arguments.length,n=Array(e>2?e-2:0),s=2;s<e;s++)n[s-2]=arguments[s];var c=this,u=void 0===arguments[1]?{}:arguments[1],l={},p=d.uid(this[f.ACTIONS_REGISTRY],t.displayName||t.name||\"Unknown\");return h.isFunction(t)?function(){h.assign(l,d.getInternalMethods(t,!0));var e=function(e){function n(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];a(this,n),i(Object.getPrototypeOf(n.prototype),\"constructor\",this).apply(this,e);}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e);}(n,t),o(n,[{key:\"generateActions\",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];e.forEach(function(t){l[t]=d.dispatchIdentity;});}}]),n}();h.assign(l,new(r.apply(e,[null].concat(n))));}():h.assign(l,t),this.actions[p]=this.actions[p]||{},h.eachObject(function(t,e){if(h.isFunction(e)){u[t]=(0, y.default)(c,p,t,e,u);var n=d.formatAsConstant(t);u[n]=u[t][f.ACTION_KEY];}},[l]),u}},{key:\"takeSnapshot\",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=l.snapshot(this,e);return h.assign(this[f.LAST_SNAPSHOT],r),this.serialize(r)}},{key:\"rollback\",value:function(){l.setAppState(this,this.serialize(this[f.LAST_SNAPSHOT]),function(t){t[f.LIFECYCLE].emit(\"rollback\"),t.emitChange();});}},{key:\"recycle\",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e.length?l.filterSnapshots(this,this[f.INIT_SNAPSHOT],e):this[f.INIT_SNAPSHOT];l.setAppState(this,this.serialize(r),function(t){t[f.LIFECYCLE].emit(\"init\"),t.emitChange();});}},{key:\"flush\",value:function(){var t=this.serialize(l.snapshot(this));return this.recycle(),t}},{key:\"bootstrap\",value:function(t){l.setAppState(this,t,function(t){t[f.LIFECYCLE].emit(\"bootstrap\"),t.emitChange();});}},{key:\"prepare\",value:function(t,e){var n={};if(!t.displayName)throw new ReferenceError(\"Store provided does not have a name\");return n[t.displayName]=e,this.serialize(n)}},{key:\"addActions\",value:function(t,e){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];this.actions[t]=Array.isArray(e)?this.generateActions.apply(this,e):this.createActions.apply(this,[e].concat(r));}},{key:\"addStore\",value:function(t,e){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];this.createStore.apply(this,[e,t].concat(r));}},{key:\"getActions\",value:function(t){return this.actions[t]}},{key:\"getStore\",value:function(t){return this.stores[t]}}]),t}();n.default=_,e.exports=n.default;},{\"../utils/functions\":13,\"./actions\":6,\"./store\":9,\"./symbols/symbols\":10,\"./utils/AltUtils\":11,\"./utils/StateFunctions\":12,flux:3}]},{},[14])(14)});\n});\n\nvar Alt = unwrapExports(alt_min);\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nvar alt = new Alt();\nalt.serialize = function () { return '' };\n\nalt.deserialize = function () { return '' };\n\n// Polyfills\n\nif ( Number.EPSILON === undefined ) {\n\n\tNumber.EPSILON = Math.pow( 2, - 52 );\n\n}\n\nif ( Number.isInteger === undefined ) {\n\n\t// Missing in IE\n\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/isInteger\n\n\tNumber.isInteger = function ( value ) {\n\n\t\treturn typeof value === 'number' && isFinite( value ) && Math.floor( value ) === value;\n\n\t};\n\n}\n\n//\n\nif ( Math.sign === undefined ) {\n\n\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/sign\n\n\tMath.sign = function ( x ) {\n\n\t\treturn ( x < 0 ) ? - 1 : ( x > 0 ) ? 1 : + x;\n\n\t};\n\n}\n\nif ( 'name' in Function.prototype === false ) {\n\n\t// Missing in IE\n\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/name\n\n\tObject.defineProperty( Function.prototype, 'name', {\n\n\t\tget: function () {\n\n\t\t\treturn this.toString().match( /^\\s*function\\s*([^\\(\\s]*)/ )[ 1 ];\n\n\t\t}\n\n\t} );\n\n}\n\nif ( Object.assign === undefined ) {\n\n\t// Missing in IE\n\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\n\n\tObject.assign = function ( target ) {\n\n\t\tif ( target === undefined || target === null ) {\n\n\t\t\tthrow new TypeError( 'Cannot convert undefined or null to object' );\n\n\t\t}\n\n\t\tvar output = Object( target );\n\n\t\tfor ( var index = 1; index < arguments.length; index ++ ) {\n\n\t\t\tvar source = arguments[ index ];\n\n\t\t\tif ( source !== undefined && source !== null ) {\n\n\t\t\t\tfor ( var nextKey in source ) {\n\n\t\t\t\t\tif ( Object.prototype.hasOwnProperty.call( source, nextKey ) ) {\n\n\t\t\t\t\t\toutput[ nextKey ] = source[ nextKey ];\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn output;\n\n\t};\n\n}\n\nvar REVISION = '114';\nvar MOUSE = { LEFT: 0, MIDDLE: 1, RIGHT: 2, ROTATE: 0, DOLLY: 1, PAN: 2 };\nvar TOUCH = { ROTATE: 0, PAN: 1, DOLLY_PAN: 2, DOLLY_ROTATE: 3 };\nvar CullFaceNone = 0;\nvar CullFaceBack = 1;\nvar CullFaceFront = 2;\nvar CullFaceFrontBack = 3;\nvar FrontFaceDirectionCW = 0;\nvar FrontFaceDirectionCCW = 1;\nvar BasicShadowMap = 0;\nvar PCFShadowMap = 1;\nvar PCFSoftShadowMap = 2;\nvar VSMShadowMap = 3;\nvar FrontSide = 0;\nvar BackSide = 1;\nvar DoubleSide = 2;\nvar FlatShading = 1;\nvar SmoothShading = 2;\nvar NoBlending = 0;\nvar NormalBlending = 1;\nvar AdditiveBlending = 2;\nvar SubtractiveBlending = 3;\nvar MultiplyBlending = 4;\nvar CustomBlending = 5;\nvar AddEquation = 100;\nvar SubtractEquation = 101;\nvar ReverseSubtractEquation = 102;\nvar MinEquation = 103;\nvar MaxEquation = 104;\nvar ZeroFactor = 200;\nvar OneFactor = 201;\nvar SrcColorFactor = 202;\nvar OneMinusSrcColorFactor = 203;\nvar SrcAlphaFactor = 204;\nvar OneMinusSrcAlphaFactor = 205;\nvar DstAlphaFactor = 206;\nvar OneMinusDstAlphaFactor = 207;\nvar DstColorFactor = 208;\nvar OneMinusDstColorFactor = 209;\nvar SrcAlphaSaturateFactor = 210;\nvar NeverDepth = 0;\nvar AlwaysDepth = 1;\nvar LessDepth = 2;\nvar LessEqualDepth = 3;\nvar EqualDepth = 4;\nvar GreaterEqualDepth = 5;\nvar GreaterDepth = 6;\nvar NotEqualDepth = 7;\nvar MultiplyOperation = 0;\nvar MixOperation = 1;\nvar AddOperation = 2;\nvar NoToneMapping = 0;\nvar LinearToneMapping = 1;\nvar ReinhardToneMapping = 2;\nvar Uncharted2ToneMapping = 3;\nvar CineonToneMapping = 4;\nvar ACESFilmicToneMapping = 5;\n\nvar UVMapping = 300;\nvar CubeReflectionMapping = 301;\nvar CubeRefractionMapping = 302;\nvar EquirectangularReflectionMapping = 303;\nvar EquirectangularRefractionMapping = 304;\nvar SphericalReflectionMapping = 305;\nvar CubeUVReflectionMapping = 306;\nvar CubeUVRefractionMapping = 307;\nvar RepeatWrapping = 1000;\nvar ClampToEdgeWrapping = 1001;\nvar MirroredRepeatWrapping = 1002;\nvar NearestFilter = 1003;\nvar NearestMipmapNearestFilter = 1004;\nvar NearestMipMapNearestFilter = 1004;\nvar NearestMipmapLinearFilter = 1005;\nvar NearestMipMapLinearFilter = 1005;\nvar LinearFilter = 1006;\nvar LinearMipmapNearestFilter = 1007;\nvar LinearMipMapNearestFilter = 1007;\nvar LinearMipmapLinearFilter = 1008;\nvar LinearMipMapLinearFilter = 1008;\nvar UnsignedByteType = 1009;\nvar ByteType = 1010;\nvar ShortType = 1011;\nvar UnsignedShortType = 1012;\nvar IntType = 1013;\nvar UnsignedIntType = 1014;\nvar FloatType = 1015;\nvar HalfFloatType = 1016;\nvar UnsignedShort4444Type = 1017;\nvar UnsignedShort5551Type = 1018;\nvar UnsignedShort565Type = 1019;\nvar UnsignedInt248Type = 1020;\nvar AlphaFormat = 1021;\nvar RGBFormat = 1022;\nvar RGBAFormat = 1023;\nvar LuminanceFormat = 1024;\nvar LuminanceAlphaFormat = 1025;\nvar RGBEFormat = RGBAFormat;\nvar DepthFormat = 1026;\nvar DepthStencilFormat = 1027;\nvar RedFormat = 1028;\nvar RedIntegerFormat = 1029;\nvar RGFormat = 1030;\nvar RGIntegerFormat = 1031;\nvar RGBIntegerFormat = 1032;\nvar RGBAIntegerFormat = 1033;\n\nvar RGB_S3TC_DXT1_Format = 33776;\nvar RGBA_S3TC_DXT1_Format = 33777;\nvar RGBA_S3TC_DXT3_Format = 33778;\nvar RGBA_S3TC_DXT5_Format = 33779;\nvar RGB_PVRTC_4BPPV1_Format = 35840;\nvar RGB_PVRTC_2BPPV1_Format = 35841;\nvar RGBA_PVRTC_4BPPV1_Format = 35842;\nvar RGBA_PVRTC_2BPPV1_Format = 35843;\nvar RGB_ETC1_Format = 36196;\nvar RGB_ETC2_Format = 37492;\nvar RGBA_ETC2_EAC_Format = 37496;\nvar RGBA_ASTC_4x4_Format = 37808;\nvar RGBA_ASTC_5x4_Format = 37809;\nvar RGBA_ASTC_5x5_Format = 37810;\nvar RGBA_ASTC_6x5_Format = 37811;\nvar RGBA_ASTC_6x6_Format = 37812;\nvar RGBA_ASTC_8x5_Format = 37813;\nvar RGBA_ASTC_8x6_Format = 37814;\nvar RGBA_ASTC_8x8_Format = 37815;\nvar RGBA_ASTC_10x5_Format = 37816;\nvar RGBA_ASTC_10x6_Format = 37817;\nvar RGBA_ASTC_10x8_Format = 37818;\nvar RGBA_ASTC_10x10_Format = 37819;\nvar RGBA_ASTC_12x10_Format = 37820;\nvar RGBA_ASTC_12x12_Format = 37821;\nvar SRGB8_ALPHA8_ASTC_4x4_Format = 37840;\nvar SRGB8_ALPHA8_ASTC_5x4_Format = 37841;\nvar SRGB8_ALPHA8_ASTC_5x5_Format = 37842;\nvar SRGB8_ALPHA8_ASTC_6x5_Format = 37843;\nvar SRGB8_ALPHA8_ASTC_6x6_Format = 37844;\nvar SRGB8_ALPHA8_ASTC_8x5_Format = 37845;\nvar SRGB8_ALPHA8_ASTC_8x6_Format = 37846;\nvar SRGB8_ALPHA8_ASTC_8x8_Format = 37847;\nvar SRGB8_ALPHA8_ASTC_10x5_Format = 37848;\nvar SRGB8_ALPHA8_ASTC_10x6_Format = 37849;\nvar SRGB8_ALPHA8_ASTC_10x8_Format = 37850;\nvar SRGB8_ALPHA8_ASTC_10x10_Format = 37851;\nvar SRGB8_ALPHA8_ASTC_12x10_Format = 37852;\nvar SRGB8_ALPHA8_ASTC_12x12_Format = 37853;\nvar LoopOnce = 2200;\nvar LoopRepeat = 2201;\nvar LoopPingPong = 2202;\nvar InterpolateDiscrete = 2300;\nvar InterpolateLinear = 2301;\nvar InterpolateSmooth = 2302;\nvar ZeroCurvatureEnding = 2400;\nvar ZeroSlopeEnding = 2401;\nvar WrapAroundEnding = 2402;\nvar TrianglesDrawMode = 0;\nvar TriangleStripDrawMode = 1;\nvar TriangleFanDrawMode = 2;\nvar LinearEncoding = 3000;\nvar sRGBEncoding = 3001;\nvar GammaEncoding = 3007;\nvar RGBEEncoding = 3002;\nvar LogLuvEncoding = 3003;\nvar RGBM7Encoding = 3004;\nvar RGBM16Encoding = 3005;\nvar RGBDEncoding = 3006;\nvar BasicDepthPacking = 3200;\nvar RGBADepthPacking = 3201;\nvar TangentSpaceNormalMap = 0;\nvar ObjectSpaceNormalMap = 1;\n\nvar ZeroStencilOp = 0;\nvar KeepStencilOp = 7680;\nvar ReplaceStencilOp = 7681;\nvar IncrementStencilOp = 7682;\nvar DecrementStencilOp = 7683;\nvar IncrementWrapStencilOp = 34055;\nvar DecrementWrapStencilOp = 34056;\nvar InvertStencilOp = 5386;\n\nvar NeverStencilFunc = 512;\nvar LessStencilFunc = 513;\nvar EqualStencilFunc = 514;\nvar LessEqualStencilFunc = 515;\nvar GreaterStencilFunc = 516;\nvar NotEqualStencilFunc = 517;\nvar GreaterEqualStencilFunc = 518;\nvar AlwaysStencilFunc = 519;\n\nvar StaticDrawUsage = 35044;\nvar DynamicDrawUsage = 35048;\nvar StreamDrawUsage = 35040;\nvar StaticReadUsage = 35045;\nvar DynamicReadUsage = 35049;\nvar StreamReadUsage = 35041;\nvar StaticCopyUsage = 35046;\nvar DynamicCopyUsage = 35050;\nvar StreamCopyUsage = 35042;\n\n/**\n * https://github.com/mrdoob/eventdispatcher.js/\n */\n\nfunction EventDispatcher() {}\n\nObject.assign( EventDispatcher.prototype, {\n\n\taddEventListener: function ( type, listener ) {\n\n\t\tif ( this._listeners === undefined ) this._listeners = {};\n\n\t\tvar listeners = this._listeners;\n\n\t\tif ( listeners[ type ] === undefined ) {\n\n\t\t\tlisteners[ type ] = [];\n\n\t\t}\n\n\t\tif ( listeners[ type ].indexOf( listener ) === - 1 ) {\n\n\t\t\tlisteners[ type ].push( listener );\n\n\t\t}\n\n\t},\n\n\thasEventListener: function ( type, listener ) {\n\n\t\tif ( this._listeners === undefined ) return false;\n\n\t\tvar listeners = this._listeners;\n\n\t\treturn listeners[ type ] !== undefined && listeners[ type ].indexOf( listener ) !== - 1;\n\n\t},\n\n\tremoveEventListener: function ( type, listener ) {\n\n\t\tif ( this._listeners === undefined ) return;\n\n\t\tvar listeners = this._listeners;\n\t\tvar listenerArray = listeners[ type ];\n\n\t\tif ( listenerArray !== undefined ) {\n\n\t\t\tvar index = listenerArray.indexOf( listener );\n\n\t\t\tif ( index !== - 1 ) {\n\n\t\t\t\tlistenerArray.splice( index, 1 );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tdispatchEvent: function ( event ) {\n\n\t\tif ( this._listeners === undefined ) return;\n\n\t\tvar listeners = this._listeners;\n\t\tvar listenerArray = listeners[ event.type ];\n\n\t\tif ( listenerArray !== undefined ) {\n\n\t\t\tevent.target = this;\n\n\t\t\tvar array = listenerArray.slice( 0 );\n\n\t\t\tfor ( var i = 0, l = array.length; i < l; i ++ ) {\n\n\t\t\t\tarray[ i ].call( this, event );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n} );\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author thezwap\n */\n\nvar _lut = [];\n\nfor ( var i = 0; i < 256; i ++ ) {\n\n\t_lut[ i ] = ( i < 16 ? '0' : '' ) + ( i ).toString( 16 );\n\n}\n\nvar MathUtils = {\n\n\tDEG2RAD: Math.PI / 180,\n\tRAD2DEG: 180 / Math.PI,\n\n\tgenerateUUID: function () {\n\n\t\t// http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript/21963136#21963136\n\n\t\tvar d0 = Math.random() * 0xffffffff | 0;\n\t\tvar d1 = Math.random() * 0xffffffff | 0;\n\t\tvar d2 = Math.random() * 0xffffffff | 0;\n\t\tvar d3 = Math.random() * 0xffffffff | 0;\n\t\tvar uuid = _lut[ d0 & 0xff ] + _lut[ d0 >> 8 & 0xff ] + _lut[ d0 >> 16 & 0xff ] + _lut[ d0 >> 24 & 0xff ] + '-' +\n\t\t\t_lut[ d1 & 0xff ] + _lut[ d1 >> 8 & 0xff ] + '-' + _lut[ d1 >> 16 & 0x0f | 0x40 ] + _lut[ d1 >> 24 & 0xff ] + '-' +\n\t\t\t_lut[ d2 & 0x3f | 0x80 ] + _lut[ d2 >> 8 & 0xff ] + '-' + _lut[ d2 >> 16 & 0xff ] + _lut[ d2 >> 24 & 0xff ] +\n\t\t\t_lut[ d3 & 0xff ] + _lut[ d3 >> 8 & 0xff ] + _lut[ d3 >> 16 & 0xff ] + _lut[ d3 >> 24 & 0xff ];\n\n\t\t// .toUpperCase() here flattens concatenated strings to save heap memory space.\n\t\treturn uuid.toUpperCase();\n\n\t},\n\n\tclamp: function ( value, min, max ) {\n\n\t\treturn Math.max( min, Math.min( max, value ) );\n\n\t},\n\n\t// compute euclidian modulo of m % n\n\t// https://en.wikipedia.org/wiki/Modulo_operation\n\n\teuclideanModulo: function ( n, m ) {\n\n\t\treturn ( ( n % m ) + m ) % m;\n\n\t},\n\n\t// Linear mapping from range <a1, a2> to range <b1, b2>\n\n\tmapLinear: function ( x, a1, a2, b1, b2 ) {\n\n\t\treturn b1 + ( x - a1 ) * ( b2 - b1 ) / ( a2 - a1 );\n\n\t},\n\n\t// https://en.wikipedia.org/wiki/Linear_interpolation\n\n\tlerp: function ( x, y, t ) {\n\n\t\treturn ( 1 - t ) * x + t * y;\n\n\t},\n\n\t// http://en.wikipedia.org/wiki/Smoothstep\n\n\tsmoothstep: function ( x, min, max ) {\n\n\t\tif ( x <= min ) return 0;\n\t\tif ( x >= max ) return 1;\n\n\t\tx = ( x - min ) / ( max - min );\n\n\t\treturn x * x * ( 3 - 2 * x );\n\n\t},\n\n\tsmootherstep: function ( x, min, max ) {\n\n\t\tif ( x <= min ) return 0;\n\t\tif ( x >= max ) return 1;\n\n\t\tx = ( x - min ) / ( max - min );\n\n\t\treturn x * x * x * ( x * ( x * 6 - 15 ) + 10 );\n\n\t},\n\n\t// Random integer from <low, high> interval\n\n\trandInt: function ( low, high ) {\n\n\t\treturn low + Math.floor( Math.random() * ( high - low + 1 ) );\n\n\t},\n\n\t// Random float from <low, high> interval\n\n\trandFloat: function ( low, high ) {\n\n\t\treturn low + Math.random() * ( high - low );\n\n\t},\n\n\t// Random float from <-range/2, range/2> interval\n\n\trandFloatSpread: function ( range ) {\n\n\t\treturn range * ( 0.5 - Math.random() );\n\n\t},\n\n\tdegToRad: function ( degrees ) {\n\n\t\treturn degrees * MathUtils.DEG2RAD;\n\n\t},\n\n\tradToDeg: function ( radians ) {\n\n\t\treturn radians * MathUtils.RAD2DEG;\n\n\t},\n\n\tisPowerOfTwo: function ( value ) {\n\n\t\treturn ( value & ( value - 1 ) ) === 0 && value !== 0;\n\n\t},\n\n\tceilPowerOfTwo: function ( value ) {\n\n\t\treturn Math.pow( 2, Math.ceil( Math.log( value ) / Math.LN2 ) );\n\n\t},\n\n\tfloorPowerOfTwo: function ( value ) {\n\n\t\treturn Math.pow( 2, Math.floor( Math.log( value ) / Math.LN2 ) );\n\n\t},\n\n\tsetQuaternionFromProperEuler: function ( q, a, b, c, order ) {\n\n\t\t// Intrinsic Proper Euler Angles - see https://en.wikipedia.org/wiki/Euler_angles\n\n\t\t// rotations are applied to the axes in the order specified by 'order'\n\t\t// rotation by angle 'a' is applied first, then by angle 'b', then by angle 'c'\n\t\t// angles are in radians\n\n\t\tvar cos = Math.cos;\n\t\tvar sin = Math.sin;\n\n\t\tvar c2 = cos( b / 2 );\n\t\tvar s2 = sin( b / 2 );\n\n\t\tvar c13 = cos( ( a + c ) / 2 );\n\t\tvar s13 = sin( ( a + c ) / 2 );\n\n\t\tvar c1_3 = cos( ( a - c ) / 2 );\n\t\tvar s1_3 = sin( ( a - c ) / 2 );\n\n\t\tvar c3_1 = cos( ( c - a ) / 2 );\n\t\tvar s3_1 = sin( ( c - a ) / 2 );\n\n\t\tif ( order === 'XYX' ) {\n\n\t\t\tq.set( c2 * s13, s2 * c1_3, s2 * s1_3, c2 * c13 );\n\n\t\t} else if ( order === 'YZY' ) {\n\n\t\t\tq.set( s2 * s1_3, c2 * s13, s2 * c1_3, c2 * c13 );\n\n\t\t} else if ( order === 'ZXZ' ) {\n\n\t\t\tq.set( s2 * c1_3, s2 * s1_3, c2 * s13, c2 * c13 );\n\n\t\t} else if ( order === 'XZX' ) {\n\n\t\t\tq.set( c2 * s13, s2 * s3_1, s2 * c3_1, c2 * c13 );\n\n\t\t} else if ( order === 'YXY' ) {\n\n\t\t\tq.set( s2 * c3_1, c2 * s13, s2 * s3_1, c2 * c13 );\n\n\t\t} else if ( order === 'ZYZ' ) {\n\n\t\t\tq.set( s2 * s3_1, s2 * c3_1, c2 * s13, c2 * c13 );\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order.' );\n\n\t\t}\n\n\t}\n\n};\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author philogb / http://blog.thejit.org/\n * @author egraether / http://egraether.com/\n * @author zz85 / http://www.lab4games.net/zz85/blog\n */\n\nfunction Vector2( x, y ) {\n\n\tthis.x = x || 0;\n\tthis.y = y || 0;\n\n}\n\nObject.defineProperties( Vector2.prototype, {\n\n\t\"width\": {\n\n\t\tget: function () {\n\n\t\t\treturn this.x;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis.x = value;\n\n\t\t}\n\n\t},\n\n\t\"height\": {\n\n\t\tget: function () {\n\n\t\t\treturn this.y;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis.y = value;\n\n\t\t}\n\n\t}\n\n} );\n\nObject.assign( Vector2.prototype, {\n\n\tisVector2: true,\n\n\tset: function ( x, y ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetScalar: function ( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\n\t\treturn this;\n\n\t},\n\n\tsetX: function ( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t},\n\n\tsetY: function ( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetComponent: function ( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tgetComponent: function ( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.x, this.y );\n\n\t},\n\n\tcopy: function ( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\n\t\treturn this;\n\n\t},\n\n\tadd: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\n\t\t\treturn this.addVectors( v, w );\n\n\t\t}\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\n\t\treturn this;\n\n\t},\n\n\taddScalar: function ( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\n\t\treturn this;\n\n\t},\n\n\taddVectors: function ( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\n\t\treturn this;\n\n\t},\n\n\taddScaledVector: function ( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\n\t\treturn this;\n\n\t},\n\n\tsub: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\n\t\t\treturn this.subVectors( v, w );\n\n\t\t}\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\n\t\treturn this;\n\n\t},\n\n\tsubScalar: function ( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\n\t\treturn this;\n\n\t},\n\n\tsubVectors: function ( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\n\t\treturn this;\n\n\t},\n\n\tmultiply: function ( v ) {\n\n\t\tthis.x *= v.x;\n\t\tthis.y *= v.y;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\n\t\treturn this;\n\n\t},\n\n\tdivide: function ( v ) {\n\n\t\tthis.x /= v.x;\n\t\tthis.y /= v.y;\n\n\t\treturn this;\n\n\t},\n\n\tdivideScalar: function ( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t},\n\n\tapplyMatrix3: function ( m ) {\n\n\t\tvar x = this.x, y = this.y;\n\t\tvar e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ];\n\t\tthis.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ];\n\n\t\treturn this;\n\n\t},\n\n\tmin: function ( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\n\t\treturn this;\n\n\t},\n\n\tmax: function ( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\n\t\treturn this;\n\n\t},\n\n\tclamp: function ( min, max ) {\n\n\t\t// assumes min < max, componentwise\n\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\n\t\treturn this;\n\n\t},\n\n\tclampScalar: function ( minVal, maxVal ) {\n\n\t\tthis.x = Math.max( minVal, Math.min( maxVal, this.x ) );\n\t\tthis.y = Math.max( minVal, Math.min( maxVal, this.y ) );\n\n\t\treturn this;\n\n\t},\n\n\tclampLength: function ( min, max ) {\n\n\t\tvar length = this.length();\n\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\n\n\t},\n\n\tfloor: function () {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\n\t\treturn this;\n\n\t},\n\n\tceil: function () {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\n\t\treturn this;\n\n\t},\n\n\tround: function () {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\n\t\treturn this;\n\n\t},\n\n\troundToZero: function () {\n\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\n\t\treturn this;\n\n\t},\n\n\tnegate: function () {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\n\t\treturn this;\n\n\t},\n\n\tdot: function ( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y;\n\n\t},\n\n\tcross: function ( v ) {\n\n\t\treturn this.x * v.y - this.y * v.x;\n\n\t},\n\n\tlengthSq: function () {\n\n\t\treturn this.x * this.x + this.y * this.y;\n\n\t},\n\n\tlength: function () {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y );\n\n\t},\n\n\tmanhattanLength: function () {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y );\n\n\t},\n\n\tnormalize: function () {\n\n\t\treturn this.divideScalar( this.length() || 1 );\n\n\t},\n\n\tangle: function () {\n\n\t\t// computes the angle in radians with respect to the positive x-axis\n\n\t\tvar angle = Math.atan2( - this.y, - this.x ) + Math.PI;\n\n\t\treturn angle;\n\n\t},\n\n\tdistanceTo: function ( v ) {\n\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\n\n\t},\n\n\tdistanceToSquared: function ( v ) {\n\n\t\tvar dx = this.x - v.x, dy = this.y - v.y;\n\t\treturn dx * dx + dy * dy;\n\n\t},\n\n\tmanhattanDistanceTo: function ( v ) {\n\n\t\treturn Math.abs( this.x - v.x ) + Math.abs( this.y - v.y );\n\n\t},\n\n\tsetLength: function ( length ) {\n\n\t\treturn this.normalize().multiplyScalar( length );\n\n\t},\n\n\tlerp: function ( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\n\t\treturn this;\n\n\t},\n\n\tlerpVectors: function ( v1, v2, alpha ) {\n\n\t\treturn this.subVectors( v2, v1 ).multiplyScalar( alpha ).add( v1 );\n\n\t},\n\n\tequals: function ( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) );\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\n\t\treturn array;\n\n\t},\n\n\tfromBufferAttribute: function ( attribute, index, offset ) {\n\n\t\tif ( offset !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector2: offset has been removed from .fromBufferAttribute().' );\n\n\t\t}\n\n\t\tthis.x = attribute.getX( index );\n\t\tthis.y = attribute.getY( index );\n\n\t\treturn this;\n\n\t},\n\n\trotateAround: function ( center, angle ) {\n\n\t\tvar c = Math.cos( angle ), s = Math.sin( angle );\n\n\t\tvar x = this.x - center.x;\n\t\tvar y = this.y - center.y;\n\n\t\tthis.x = x * c - y * s + center.x;\n\t\tthis.y = x * s + y * c + center.y;\n\n\t\treturn this;\n\n\t}\n\n} );\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author bhouston / http://clara.io\n * @author tschw\n */\n\nfunction Matrix3() {\n\n\tthis.elements = [\n\n\t\t1, 0, 0,\n\t\t0, 1, 0,\n\t\t0, 0, 1\n\n\t];\n\n\tif ( arguments.length > 0 ) {\n\n\t\tconsole.error( 'THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.' );\n\n\t}\n\n}\n\nObject.assign( Matrix3.prototype, {\n\n\tisMatrix3: true,\n\n\tset: function ( n11, n12, n13, n21, n22, n23, n31, n32, n33 ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] = n11; te[ 1 ] = n21; te[ 2 ] = n31;\n\t\tte[ 3 ] = n12; te[ 4 ] = n22; te[ 5 ] = n32;\n\t\tte[ 6 ] = n13; te[ 7 ] = n23; te[ 8 ] = n33;\n\n\t\treturn this;\n\n\t},\n\n\tidentity: function () {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0,\n\t\t\t0, 1, 0,\n\t\t\t0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().fromArray( this.elements );\n\n\t},\n\n\tcopy: function ( m ) {\n\n\t\tvar te = this.elements;\n\t\tvar me = m.elements;\n\n\t\tte[ 0 ] = me[ 0 ]; te[ 1 ] = me[ 1 ]; te[ 2 ] = me[ 2 ];\n\t\tte[ 3 ] = me[ 3 ]; te[ 4 ] = me[ 4 ]; te[ 5 ] = me[ 5 ];\n\t\tte[ 6 ] = me[ 6 ]; te[ 7 ] = me[ 7 ]; te[ 8 ] = me[ 8 ];\n\n\t\treturn this;\n\n\t},\n\n\textractBasis: function ( xAxis, yAxis, zAxis ) {\n\n\t\txAxis.setFromMatrix3Column( this, 0 );\n\t\tyAxis.setFromMatrix3Column( this, 1 );\n\t\tzAxis.setFromMatrix3Column( this, 2 );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromMatrix4: function ( m ) {\n\n\t\tvar me = m.elements;\n\n\t\tthis.set(\n\n\t\t\tme[ 0 ], me[ 4 ], me[ 8 ],\n\t\t\tme[ 1 ], me[ 5 ], me[ 9 ],\n\t\t\tme[ 2 ], me[ 6 ], me[ 10 ]\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmultiply: function ( m ) {\n\n\t\treturn this.multiplyMatrices( this, m );\n\n\t},\n\n\tpremultiply: function ( m ) {\n\n\t\treturn this.multiplyMatrices( m, this );\n\n\t},\n\n\tmultiplyMatrices: function ( a, b ) {\n\n\t\tvar ae = a.elements;\n\t\tvar be = b.elements;\n\t\tvar te = this.elements;\n\n\t\tvar a11 = ae[ 0 ], a12 = ae[ 3 ], a13 = ae[ 6 ];\n\t\tvar a21 = ae[ 1 ], a22 = ae[ 4 ], a23 = ae[ 7 ];\n\t\tvar a31 = ae[ 2 ], a32 = ae[ 5 ], a33 = ae[ 8 ];\n\n\t\tvar b11 = be[ 0 ], b12 = be[ 3 ], b13 = be[ 6 ];\n\t\tvar b21 = be[ 1 ], b22 = be[ 4 ], b23 = be[ 7 ];\n\t\tvar b31 = be[ 2 ], b32 = be[ 5 ], b33 = be[ 8 ];\n\n\t\tte[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31;\n\t\tte[ 3 ] = a11 * b12 + a12 * b22 + a13 * b32;\n\t\tte[ 6 ] = a11 * b13 + a12 * b23 + a13 * b33;\n\n\t\tte[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31;\n\t\tte[ 4 ] = a21 * b12 + a22 * b22 + a23 * b32;\n\t\tte[ 7 ] = a21 * b13 + a22 * b23 + a23 * b33;\n\n\t\tte[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31;\n\t\tte[ 5 ] = a31 * b12 + a32 * b22 + a33 * b32;\n\t\tte[ 8 ] = a31 * b13 + a32 * b23 + a33 * b33;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( s ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] *= s; te[ 3 ] *= s; te[ 6 ] *= s;\n\t\tte[ 1 ] *= s; te[ 4 ] *= s; te[ 7 ] *= s;\n\t\tte[ 2 ] *= s; te[ 5 ] *= s; te[ 8 ] *= s;\n\n\t\treturn this;\n\n\t},\n\n\tdeterminant: function () {\n\n\t\tvar te = this.elements;\n\n\t\tvar a = te[ 0 ], b = te[ 1 ], c = te[ 2 ],\n\t\t\td = te[ 3 ], e = te[ 4 ], f = te[ 5 ],\n\t\t\tg = te[ 6 ], h = te[ 7 ], i = te[ 8 ];\n\n\t\treturn a * e * i - a * f * h - b * d * i + b * f * g + c * d * h - c * e * g;\n\n\t},\n\n\tgetInverse: function ( matrix, throwOnDegenerate ) {\n\n\t\tif ( matrix && matrix.isMatrix4 ) {\n\n\t\t\tconsole.error( \"THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.\" );\n\n\t\t}\n\n\t\tvar me = matrix.elements,\n\t\t\tte = this.elements,\n\n\t\t\tn11 = me[ 0 ], n21 = me[ 1 ], n31 = me[ 2 ],\n\t\t\tn12 = me[ 3 ], n22 = me[ 4 ], n32 = me[ 5 ],\n\t\t\tn13 = me[ 6 ], n23 = me[ 7 ], n33 = me[ 8 ],\n\n\t\t\tt11 = n33 * n22 - n32 * n23,\n\t\t\tt12 = n32 * n13 - n33 * n12,\n\t\t\tt13 = n23 * n12 - n22 * n13,\n\n\t\t\tdet = n11 * t11 + n21 * t12 + n31 * t13;\n\n\t\tif ( det === 0 ) {\n\n\t\t\tvar msg = \"THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0\";\n\n\t\t\tif ( throwOnDegenerate === true ) {\n\n\t\t\t\tthrow new Error( msg );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( msg );\n\n\t\t\t}\n\n\t\t\treturn this.identity();\n\n\t\t}\n\n\t\tvar detInv = 1 / det;\n\n\t\tte[ 0 ] = t11 * detInv;\n\t\tte[ 1 ] = ( n31 * n23 - n33 * n21 ) * detInv;\n\t\tte[ 2 ] = ( n32 * n21 - n31 * n22 ) * detInv;\n\n\t\tte[ 3 ] = t12 * detInv;\n\t\tte[ 4 ] = ( n33 * n11 - n31 * n13 ) * detInv;\n\t\tte[ 5 ] = ( n31 * n12 - n32 * n11 ) * detInv;\n\n\t\tte[ 6 ] = t13 * detInv;\n\t\tte[ 7 ] = ( n21 * n13 - n23 * n11 ) * detInv;\n\t\tte[ 8 ] = ( n22 * n11 - n21 * n12 ) * detInv;\n\n\t\treturn this;\n\n\t},\n\n\ttranspose: function () {\n\n\t\tvar tmp, m = this.elements;\n\n\t\ttmp = m[ 1 ]; m[ 1 ] = m[ 3 ]; m[ 3 ] = tmp;\n\t\ttmp = m[ 2 ]; m[ 2 ] = m[ 6 ]; m[ 6 ] = tmp;\n\t\ttmp = m[ 5 ]; m[ 5 ] = m[ 7 ]; m[ 7 ] = tmp;\n\n\t\treturn this;\n\n\t},\n\n\tgetNormalMatrix: function ( matrix4 ) {\n\n\t\treturn this.setFromMatrix4( matrix4 ).getInverse( this ).transpose();\n\n\t},\n\n\ttransposeIntoArray: function ( r ) {\n\n\t\tvar m = this.elements;\n\n\t\tr[ 0 ] = m[ 0 ];\n\t\tr[ 1 ] = m[ 3 ];\n\t\tr[ 2 ] = m[ 6 ];\n\t\tr[ 3 ] = m[ 1 ];\n\t\tr[ 4 ] = m[ 4 ];\n\t\tr[ 5 ] = m[ 7 ];\n\t\tr[ 6 ] = m[ 2 ];\n\t\tr[ 7 ] = m[ 5 ];\n\t\tr[ 8 ] = m[ 8 ];\n\n\t\treturn this;\n\n\t},\n\n\tsetUvTransform: function ( tx, ty, sx, sy, rotation, cx, cy ) {\n\n\t\tvar c = Math.cos( rotation );\n\t\tvar s = Math.sin( rotation );\n\n\t\tthis.set(\n\t\t\tsx * c, sx * s, - sx * ( c * cx + s * cy ) + cx + tx,\n\t\t\t- sy * s, sy * c, - sy * ( - s * cx + c * cy ) + cy + ty,\n\t\t\t0, 0, 1\n\t\t);\n\n\t},\n\n\tscale: function ( sx, sy ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] *= sx; te[ 3 ] *= sx; te[ 6 ] *= sx;\n\t\tte[ 1 ] *= sy; te[ 4 ] *= sy; te[ 7 ] *= sy;\n\n\t\treturn this;\n\n\t},\n\n\trotate: function ( theta ) {\n\n\t\tvar c = Math.cos( theta );\n\t\tvar s = Math.sin( theta );\n\n\t\tvar te = this.elements;\n\n\t\tvar a11 = te[ 0 ], a12 = te[ 3 ], a13 = te[ 6 ];\n\t\tvar a21 = te[ 1 ], a22 = te[ 4 ], a23 = te[ 7 ];\n\n\t\tte[ 0 ] = c * a11 + s * a21;\n\t\tte[ 3 ] = c * a12 + s * a22;\n\t\tte[ 6 ] = c * a13 + s * a23;\n\n\t\tte[ 1 ] = - s * a11 + c * a21;\n\t\tte[ 4 ] = - s * a12 + c * a22;\n\t\tte[ 7 ] = - s * a13 + c * a23;\n\n\t\treturn this;\n\n\t},\n\n\ttranslate: function ( tx, ty ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] += tx * te[ 2 ]; te[ 3 ] += tx * te[ 5 ]; te[ 6 ] += tx * te[ 8 ];\n\t\tte[ 1 ] += ty * te[ 2 ]; te[ 4 ] += ty * te[ 5 ]; te[ 7 ] += ty * te[ 8 ];\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( matrix ) {\n\n\t\tvar te = this.elements;\n\t\tvar me = matrix.elements;\n\n\t\tfor ( var i = 0; i < 9; i ++ ) {\n\n\t\t\tif ( te[ i ] !== me[ i ] ) return false;\n\n\t\t}\n\n\t\treturn true;\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tfor ( var i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.elements[ i ] = array[ i + offset ];\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tvar te = this.elements;\n\n\t\tarray[ offset ] = te[ 0 ];\n\t\tarray[ offset + 1 ] = te[ 1 ];\n\t\tarray[ offset + 2 ] = te[ 2 ];\n\n\t\tarray[ offset + 3 ] = te[ 3 ];\n\t\tarray[ offset + 4 ] = te[ 4 ];\n\t\tarray[ offset + 5 ] = te[ 5 ];\n\n\t\tarray[ offset + 6 ] = te[ 6 ];\n\t\tarray[ offset + 7 ] = te[ 7 ];\n\t\tarray[ offset + 8 ] = te[ 8 ];\n\n\t\treturn array;\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author szimek / https://github.com/szimek/\n */\n\nvar _canvas;\n\nvar ImageUtils = {\n\n\tgetDataURL: function ( image ) {\n\n\t\tvar canvas;\n\n\t\tif ( typeof HTMLCanvasElement == 'undefined' ) {\n\n\t\t\treturn image.src;\n\n\t\t} else if ( image instanceof HTMLCanvasElement ) {\n\n\t\t\tcanvas = image;\n\n\t\t} else {\n\n\t\t\tif ( _canvas === undefined ) _canvas = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' );\n\n\t\t\t_canvas.width = image.width;\n\t\t\t_canvas.height = image.height;\n\n\t\t\tvar context = _canvas.getContext( '2d' );\n\n\t\t\tif ( image instanceof ImageData ) {\n\n\t\t\t\tcontext.putImageData( image, 0, 0 );\n\n\t\t\t} else {\n\n\t\t\t\tcontext.drawImage( image, 0, 0, image.width, image.height );\n\n\t\t\t}\n\n\t\t\tcanvas = _canvas;\n\n\t\t}\n\n\t\tif ( canvas.width > 2048 || canvas.height > 2048 ) {\n\n\t\t\treturn canvas.toDataURL( 'image/jpeg', 0.6 );\n\n\t\t} else {\n\n\t\t\treturn canvas.toDataURL( 'image/png' );\n\n\t\t}\n\n\t}\n\n};\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author szimek / https://github.com/szimek/\n */\n\nvar textureId = 0;\n\nfunction Texture( image, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding ) {\n\n\tObject.defineProperty( this, 'id', { value: textureId ++ } );\n\n\tthis.uuid = MathUtils.generateUUID();\n\n\tthis.name = '';\n\n\tthis.image = image !== undefined ? image : Texture.DEFAULT_IMAGE;\n\tthis.mipmaps = [];\n\n\tthis.mapping = mapping !== undefined ? mapping : Texture.DEFAULT_MAPPING;\n\n\tthis.wrapS = wrapS !== undefined ? wrapS : ClampToEdgeWrapping;\n\tthis.wrapT = wrapT !== undefined ? wrapT : ClampToEdgeWrapping;\n\n\tthis.magFilter = magFilter !== undefined ? magFilter : LinearFilter;\n\tthis.minFilter = minFilter !== undefined ? minFilter : LinearMipmapLinearFilter;\n\n\tthis.anisotropy = anisotropy !== undefined ? anisotropy : 1;\n\n\tthis.format = format !== undefined ? format : RGBAFormat;\n\tthis.internalFormat = null;\n\tthis.type = type !== undefined ? type : UnsignedByteType;\n\n\tthis.offset = new Vector2( 0, 0 );\n\tthis.repeat = new Vector2( 1, 1 );\n\tthis.center = new Vector2( 0, 0 );\n\tthis.rotation = 0;\n\n\tthis.matrixAutoUpdate = true;\n\tthis.matrix = new Matrix3();\n\n\tthis.generateMipmaps = true;\n\tthis.premultiplyAlpha = false;\n\tthis.flipY = true;\n\tthis.unpackAlignment = 4;\t// valid values: 1, 2, 4, 8 (see http://www.khronos.org/opengles/sdk/docs/man/xhtml/glPixelStorei.xml)\n\n\t// Values of encoding !== THREE.LinearEncoding only supported on map, envMap and emissiveMap.\n\t//\n\t// Also changing the encoding after already used by a Material will not automatically make the Material\n\t// update. You need to explicitly call Material.needsUpdate to trigger it to recompile.\n\tthis.encoding = encoding !== undefined ? encoding : LinearEncoding;\n\n\tthis.version = 0;\n\tthis.onUpdate = null;\n\n}\n\nTexture.DEFAULT_IMAGE = undefined;\nTexture.DEFAULT_MAPPING = UVMapping;\n\nTexture.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: Texture,\n\n\tisTexture: true,\n\n\tupdateMatrix: function () {\n\n\t\tthis.matrix.setUvTransform( this.offset.x, this.offset.y, this.repeat.x, this.repeat.y, this.rotation, this.center.x, this.center.y );\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.name = source.name;\n\n\t\tthis.image = source.image;\n\t\tthis.mipmaps = source.mipmaps.slice( 0 );\n\n\t\tthis.mapping = source.mapping;\n\n\t\tthis.wrapS = source.wrapS;\n\t\tthis.wrapT = source.wrapT;\n\n\t\tthis.magFilter = source.magFilter;\n\t\tthis.minFilter = source.minFilter;\n\n\t\tthis.anisotropy = source.anisotropy;\n\n\t\tthis.format = source.format;\n\t\tthis.internalFormat = source.internalFormat;\n\t\tthis.type = source.type;\n\n\t\tthis.offset.copy( source.offset );\n\t\tthis.repeat.copy( source.repeat );\n\t\tthis.center.copy( source.center );\n\t\tthis.rotation = source.rotation;\n\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\n\t\tthis.matrix.copy( source.matrix );\n\n\t\tthis.generateMipmaps = source.generateMipmaps;\n\t\tthis.premultiplyAlpha = source.premultiplyAlpha;\n\t\tthis.flipY = source.flipY;\n\t\tthis.unpackAlignment = source.unpackAlignment;\n\t\tthis.encoding = source.encoding;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tvar isRootObject = ( meta === undefined || typeof meta === 'string' );\n\n\t\tif ( ! isRootObject && meta.textures[ this.uuid ] !== undefined ) {\n\n\t\t\treturn meta.textures[ this.uuid ];\n\n\t\t}\n\n\t\tvar output = {\n\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Texture',\n\t\t\t\tgenerator: 'Texture.toJSON'\n\t\t\t},\n\n\t\t\tuuid: this.uuid,\n\t\t\tname: this.name,\n\n\t\t\tmapping: this.mapping,\n\n\t\t\trepeat: [ this.repeat.x, this.repeat.y ],\n\t\t\toffset: [ this.offset.x, this.offset.y ],\n\t\t\tcenter: [ this.center.x, this.center.y ],\n\t\t\trotation: this.rotation,\n\n\t\t\twrap: [ this.wrapS, this.wrapT ],\n\n\t\t\tformat: this.format,\n\t\t\ttype: this.type,\n\t\t\tencoding: this.encoding,\n\n\t\t\tminFilter: this.minFilter,\n\t\t\tmagFilter: this.magFilter,\n\t\t\tanisotropy: this.anisotropy,\n\n\t\t\tflipY: this.flipY,\n\n\t\t\tpremultiplyAlpha: this.premultiplyAlpha,\n\t\t\tunpackAlignment: this.unpackAlignment\n\n\t\t};\n\n\t\tif ( this.image !== undefined ) {\n\n\t\t\t// TODO: Move to THREE.Image\n\n\t\t\tvar image = this.image;\n\n\t\t\tif ( image.uuid === undefined ) {\n\n\t\t\t\timage.uuid = MathUtils.generateUUID(); // UGH\n\n\t\t\t}\n\n\t\t\tif ( ! isRootObject && meta.images[ image.uuid ] === undefined ) {\n\n\t\t\t\tvar url;\n\n\t\t\t\tif ( Array.isArray( image ) ) {\n\n\t\t\t\t\t// process array of images e.g. CubeTexture\n\n\t\t\t\t\turl = [];\n\n\t\t\t\t\tfor ( var i = 0, l = image.length; i < l; i ++ ) {\n\n\t\t\t\t\t\turl.push( ImageUtils.getDataURL( image[ i ] ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// process single image\n\n\t\t\t\t\turl = ImageUtils.getDataURL( image );\n\n\t\t\t\t}\n\n\t\t\t\tmeta.images[ image.uuid ] = {\n\t\t\t\t\tuuid: image.uuid,\n\t\t\t\t\turl: url\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t\toutput.image = image.uuid;\n\n\t\t}\n\n\t\tif ( ! isRootObject ) {\n\n\t\t\tmeta.textures[ this.uuid ] = output;\n\n\t\t}\n\n\t\treturn output;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t},\n\n\ttransformUv: function ( uv ) {\n\n\t\tif ( this.mapping !== UVMapping ) return uv;\n\n\t\tuv.applyMatrix3( this.matrix );\n\n\t\tif ( uv.x < 0 || uv.x > 1 ) {\n\n\t\t\tswitch ( this.wrapS ) {\n\n\t\t\t\tcase RepeatWrapping:\n\n\t\t\t\t\tuv.x = uv.x - Math.floor( uv.x );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ClampToEdgeWrapping:\n\n\t\t\t\t\tuv.x = uv.x < 0 ? 0 : 1;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MirroredRepeatWrapping:\n\n\t\t\t\t\tif ( Math.abs( Math.floor( uv.x ) % 2 ) === 1 ) {\n\n\t\t\t\t\t\tuv.x = Math.ceil( uv.x ) - uv.x;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tuv.x = uv.x - Math.floor( uv.x );\n\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( uv.y < 0 || uv.y > 1 ) {\n\n\t\t\tswitch ( this.wrapT ) {\n\n\t\t\t\tcase RepeatWrapping:\n\n\t\t\t\t\tuv.y = uv.y - Math.floor( uv.y );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ClampToEdgeWrapping:\n\n\t\t\t\t\tuv.y = uv.y < 0 ? 0 : 1;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MirroredRepeatWrapping:\n\n\t\t\t\t\tif ( Math.abs( Math.floor( uv.y ) % 2 ) === 1 ) {\n\n\t\t\t\t\t\tuv.y = Math.ceil( uv.y ) - uv.y;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tuv.y = uv.y - Math.floor( uv.y );\n\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.flipY ) {\n\n\t\t\tuv.y = 1 - uv.y;\n\n\t\t}\n\n\t\treturn uv;\n\n\t}\n\n} );\n\nObject.defineProperty( Texture.prototype, \"needsUpdate\", {\n\n\tset: function ( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n} );\n\n/**\n * @author supereggbert / http://www.paulbrunt.co.uk/\n * @author philogb / http://blog.thejit.org/\n * @author mikael emtinger / http://gomo.se/\n * @author egraether / http://egraether.com/\n * @author WestLangley / http://github.com/WestLangley\n */\n\nfunction Vector4( x, y, z, w ) {\n\n\tthis.x = x || 0;\n\tthis.y = y || 0;\n\tthis.z = z || 0;\n\tthis.w = ( w !== undefined ) ? w : 1;\n\n}\n\nObject.defineProperties( Vector4.prototype, {\n\n\t\"width\": {\n\n\t\tget: function () {\n\n\t\t\treturn this.z;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis.z = value;\n\n\t\t}\n\n\t},\n\n\t\"height\": {\n\n\t\tget: function () {\n\n\t\t\treturn this.w;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis.w = value;\n\n\t\t}\n\n\t}\n\n} );\n\nObject.assign( Vector4.prototype, {\n\n\tisVector4: true,\n\n\tset: function ( x, y, z, w ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\t\tthis.w = w;\n\n\t\treturn this;\n\n\t},\n\n\tsetScalar: function ( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\t\tthis.z = scalar;\n\t\tthis.w = scalar;\n\n\t\treturn this;\n\n\t},\n\n\tsetX: function ( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t},\n\n\tsetY: function ( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetZ: function ( z ) {\n\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetW: function ( w ) {\n\n\t\tthis.w = w;\n\n\t\treturn this;\n\n\t},\n\n\tsetComponent: function ( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tcase 2: this.z = value; break;\n\t\t\tcase 3: this.w = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tgetComponent: function ( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tcase 2: return this.z;\n\t\t\tcase 3: return this.w;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.x, this.y, this.z, this.w );\n\n\t},\n\n\tcopy: function ( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\t\tthis.z = v.z;\n\t\tthis.w = ( v.w !== undefined ) ? v.w : 1;\n\n\t\treturn this;\n\n\t},\n\n\tadd: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\n\t\t\treturn this.addVectors( v, w );\n\n\t\t}\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\t\tthis.z += v.z;\n\t\tthis.w += v.w;\n\n\t\treturn this;\n\n\t},\n\n\taddScalar: function ( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\t\tthis.z += s;\n\t\tthis.w += s;\n\n\t\treturn this;\n\n\t},\n\n\taddVectors: function ( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\t\tthis.z = a.z + b.z;\n\t\tthis.w = a.w + b.w;\n\n\t\treturn this;\n\n\t},\n\n\taddScaledVector: function ( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\t\tthis.z += v.z * s;\n\t\tthis.w += v.w * s;\n\n\t\treturn this;\n\n\t},\n\n\tsub: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\n\t\t\treturn this.subVectors( v, w );\n\n\t\t}\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\t\tthis.z -= v.z;\n\t\tthis.w -= v.w;\n\n\t\treturn this;\n\n\t},\n\n\tsubScalar: function ( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\t\tthis.z -= s;\n\t\tthis.w -= s;\n\n\t\treturn this;\n\n\t},\n\n\tsubVectors: function ( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\t\tthis.z = a.z - b.z;\n\t\tthis.w = a.w - b.w;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\t\tthis.z *= scalar;\n\t\tthis.w *= scalar;\n\n\t\treturn this;\n\n\t},\n\n\tapplyMatrix4: function ( m ) {\n\n\t\tvar x = this.x, y = this.y, z = this.z, w = this.w;\n\t\tvar e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] * w;\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] * w;\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] * w;\n\t\tthis.w = e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] * w;\n\n\t\treturn this;\n\n\t},\n\n\tdivideScalar: function ( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t},\n\n\tsetAxisAngleFromQuaternion: function ( q ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToAngle/index.htm\n\n\t\t// q is assumed to be normalized\n\n\t\tthis.w = 2 * Math.acos( q.w );\n\n\t\tvar s = Math.sqrt( 1 - q.w * q.w );\n\n\t\tif ( s < 0.0001 ) {\n\n\t\t\tthis.x = 1;\n\t\t\tthis.y = 0;\n\t\t\tthis.z = 0;\n\n\t\t} else {\n\n\t\t\tthis.x = q.x / s;\n\t\t\tthis.y = q.y / s;\n\t\t\tthis.z = q.z / s;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetAxisAngleFromRotationMatrix: function ( m ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToAngle/index.htm\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tvar angle, x, y, z,\t\t// variables for result\n\t\t\tepsilon = 0.01,\t\t// margin to allow for rounding errors\n\t\t\tepsilon2 = 0.1,\t\t// margin to distinguish between 0 and 180 degrees\n\n\t\t\tte = m.elements,\n\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\n\n\t\tif ( ( Math.abs( m12 - m21 ) < epsilon ) &&\n\t\t     ( Math.abs( m13 - m31 ) < epsilon ) &&\n\t\t     ( Math.abs( m23 - m32 ) < epsilon ) ) {\n\n\t\t\t// singularity found\n\t\t\t// first check for identity matrix which must have +1 for all terms\n\t\t\t// in leading diagonal and zero in other terms\n\n\t\t\tif ( ( Math.abs( m12 + m21 ) < epsilon2 ) &&\n\t\t\t     ( Math.abs( m13 + m31 ) < epsilon2 ) &&\n\t\t\t     ( Math.abs( m23 + m32 ) < epsilon2 ) &&\n\t\t\t     ( Math.abs( m11 + m22 + m33 - 3 ) < epsilon2 ) ) {\n\n\t\t\t\t// this singularity is identity matrix so angle = 0\n\n\t\t\t\tthis.set( 1, 0, 0, 0 );\n\n\t\t\t\treturn this; // zero angle, arbitrary axis\n\n\t\t\t}\n\n\t\t\t// otherwise this singularity is angle = 180\n\n\t\t\tangle = Math.PI;\n\n\t\t\tvar xx = ( m11 + 1 ) / 2;\n\t\t\tvar yy = ( m22 + 1 ) / 2;\n\t\t\tvar zz = ( m33 + 1 ) / 2;\n\t\t\tvar xy = ( m12 + m21 ) / 4;\n\t\t\tvar xz = ( m13 + m31 ) / 4;\n\t\t\tvar yz = ( m23 + m32 ) / 4;\n\n\t\t\tif ( ( xx > yy ) && ( xx > zz ) ) {\n\n\t\t\t\t// m11 is the largest diagonal term\n\n\t\t\t\tif ( xx < epsilon ) {\n\n\t\t\t\t\tx = 0;\n\t\t\t\t\ty = 0.707106781;\n\t\t\t\t\tz = 0.707106781;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tx = Math.sqrt( xx );\n\t\t\t\t\ty = xy / x;\n\t\t\t\t\tz = xz / x;\n\n\t\t\t\t}\n\n\t\t\t} else if ( yy > zz ) {\n\n\t\t\t\t// m22 is the largest diagonal term\n\n\t\t\t\tif ( yy < epsilon ) {\n\n\t\t\t\t\tx = 0.707106781;\n\t\t\t\t\ty = 0;\n\t\t\t\t\tz = 0.707106781;\n\n\t\t\t\t} else {\n\n\t\t\t\t\ty = Math.sqrt( yy );\n\t\t\t\t\tx = xy / y;\n\t\t\t\t\tz = yz / y;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// m33 is the largest diagonal term so base result on this\n\n\t\t\t\tif ( zz < epsilon ) {\n\n\t\t\t\t\tx = 0.707106781;\n\t\t\t\t\ty = 0.707106781;\n\t\t\t\t\tz = 0;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tz = Math.sqrt( zz );\n\t\t\t\t\tx = xz / z;\n\t\t\t\t\ty = yz / z;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.set( x, y, z, angle );\n\n\t\t\treturn this; // return 180 deg rotation\n\n\t\t}\n\n\t\t// as we have reached here there are no singularities so we can handle normally\n\n\t\tvar s = Math.sqrt( ( m32 - m23 ) * ( m32 - m23 ) +\n\t\t                   ( m13 - m31 ) * ( m13 - m31 ) +\n\t\t                   ( m21 - m12 ) * ( m21 - m12 ) ); // used to normalize\n\n\t\tif ( Math.abs( s ) < 0.001 ) s = 1;\n\n\t\t// prevent divide by zero, should not happen if matrix is orthogonal and should be\n\t\t// caught by singularity test above, but I've left it in just in case\n\n\t\tthis.x = ( m32 - m23 ) / s;\n\t\tthis.y = ( m13 - m31 ) / s;\n\t\tthis.z = ( m21 - m12 ) / s;\n\t\tthis.w = Math.acos( ( m11 + m22 + m33 - 1 ) / 2 );\n\n\t\treturn this;\n\n\t},\n\n\tmin: function ( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\t\tthis.z = Math.min( this.z, v.z );\n\t\tthis.w = Math.min( this.w, v.w );\n\n\t\treturn this;\n\n\t},\n\n\tmax: function ( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\t\tthis.z = Math.max( this.z, v.z );\n\t\tthis.w = Math.max( this.w, v.w );\n\n\t\treturn this;\n\n\t},\n\n\tclamp: function ( min, max ) {\n\n\t\t// assumes min < max, componentwise\n\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\t\tthis.z = Math.max( min.z, Math.min( max.z, this.z ) );\n\t\tthis.w = Math.max( min.w, Math.min( max.w, this.w ) );\n\n\t\treturn this;\n\n\t},\n\n\tclampScalar: function ( minVal, maxVal ) {\n\n\t\tthis.x = Math.max( minVal, Math.min( maxVal, this.x ) );\n\t\tthis.y = Math.max( minVal, Math.min( maxVal, this.y ) );\n\t\tthis.z = Math.max( minVal, Math.min( maxVal, this.z ) );\n\t\tthis.w = Math.max( minVal, Math.min( maxVal, this.w ) );\n\n\t\treturn this;\n\n\t},\n\n\tclampLength: function ( min, max ) {\n\n\t\tvar length = this.length();\n\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\n\n\t},\n\n\tfloor: function () {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\t\tthis.z = Math.floor( this.z );\n\t\tthis.w = Math.floor( this.w );\n\n\t\treturn this;\n\n\t},\n\n\tceil: function () {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\t\tthis.z = Math.ceil( this.z );\n\t\tthis.w = Math.ceil( this.w );\n\n\t\treturn this;\n\n\t},\n\n\tround: function () {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\t\tthis.z = Math.round( this.z );\n\t\tthis.w = Math.round( this.w );\n\n\t\treturn this;\n\n\t},\n\n\troundToZero: function () {\n\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\n\t\tthis.w = ( this.w < 0 ) ? Math.ceil( this.w ) : Math.floor( this.w );\n\n\t\treturn this;\n\n\t},\n\n\tnegate: function () {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\t\tthis.z = - this.z;\n\t\tthis.w = - this.w;\n\n\t\treturn this;\n\n\t},\n\n\tdot: function ( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z + this.w * v.w;\n\n\t},\n\n\tlengthSq: function () {\n\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w;\n\n\t},\n\n\tlength: function () {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w );\n\n\t},\n\n\tmanhattanLength: function () {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z ) + Math.abs( this.w );\n\n\t},\n\n\tnormalize: function () {\n\n\t\treturn this.divideScalar( this.length() || 1 );\n\n\t},\n\n\tsetLength: function ( length ) {\n\n\t\treturn this.normalize().multiplyScalar( length );\n\n\t},\n\n\tlerp: function ( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\t\tthis.z += ( v.z - this.z ) * alpha;\n\t\tthis.w += ( v.w - this.w ) * alpha;\n\n\t\treturn this;\n\n\t},\n\n\tlerpVectors: function ( v1, v2, alpha ) {\n\n\t\treturn this.subVectors( v2, v1 ).multiplyScalar( alpha ).add( v1 );\n\n\t},\n\n\tequals: function ( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) && ( v.w === this.w ) );\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\t\tthis.z = array[ offset + 2 ];\n\t\tthis.w = array[ offset + 3 ];\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\t\tarray[ offset + 2 ] = this.z;\n\t\tarray[ offset + 3 ] = this.w;\n\n\t\treturn array;\n\n\t},\n\n\tfromBufferAttribute: function ( attribute, index, offset ) {\n\n\t\tif ( offset !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector4: offset has been removed from .fromBufferAttribute().' );\n\n\t\t}\n\n\t\tthis.x = attribute.getX( index );\n\t\tthis.y = attribute.getY( index );\n\t\tthis.z = attribute.getZ( index );\n\t\tthis.w = attribute.getW( index );\n\n\t\treturn this;\n\n\t}\n\n} );\n\n/**\n * @author szimek / https://github.com/szimek/\n * @author alteredq / http://alteredqualia.com/\n * @author Marius Kintel / https://github.com/kintel\n */\n\n/*\n In options, we can specify:\n * Texture parameters for an auto-generated target texture\n * depthBuffer/stencilBuffer: Booleans to indicate if we should generate these buffers\n*/\nfunction WebGLRenderTarget( width, height, options ) {\n\n\tthis.width = width;\n\tthis.height = height;\n\n\tthis.scissor = new Vector4( 0, 0, width, height );\n\tthis.scissorTest = false;\n\n\tthis.viewport = new Vector4( 0, 0, width, height );\n\n\toptions = options || {};\n\n\tthis.texture = new Texture( undefined, options.mapping, options.wrapS, options.wrapT, options.magFilter, options.minFilter, options.format, options.type, options.anisotropy, options.encoding );\n\n\tthis.texture.image = {};\n\tthis.texture.image.width = width;\n\tthis.texture.image.height = height;\n\n\tthis.texture.generateMipmaps = options.generateMipmaps !== undefined ? options.generateMipmaps : false;\n\tthis.texture.minFilter = options.minFilter !== undefined ? options.minFilter : LinearFilter;\n\n\tthis.depthBuffer = options.depthBuffer !== undefined ? options.depthBuffer : true;\n\tthis.stencilBuffer = options.stencilBuffer !== undefined ? options.stencilBuffer : true;\n\tthis.depthTexture = options.depthTexture !== undefined ? options.depthTexture : null;\n\n}\n\nWebGLRenderTarget.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: WebGLRenderTarget,\n\n\tisWebGLRenderTarget: true,\n\n\tsetSize: function ( width, height ) {\n\n\t\tif ( this.width !== width || this.height !== height ) {\n\n\t\t\tthis.width = width;\n\t\t\tthis.height = height;\n\n\t\t\tthis.texture.image.width = width;\n\t\t\tthis.texture.image.height = height;\n\n\t\t\tthis.dispose();\n\n\t\t}\n\n\t\tthis.viewport.set( 0, 0, width, height );\n\t\tthis.scissor.set( 0, 0, width, height );\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.width = source.width;\n\t\tthis.height = source.height;\n\n\t\tthis.viewport.copy( source.viewport );\n\n\t\tthis.texture = source.texture.clone();\n\n\t\tthis.depthBuffer = source.depthBuffer;\n\t\tthis.stencilBuffer = source.stencilBuffer;\n\t\tthis.depthTexture = source.depthTexture;\n\n\t\treturn this;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n} );\n\n/**\n * @author Mugen87 / https://github.com/Mugen87\n * @author Matt DesLauriers / @mattdesl\n */\n\nfunction WebGLMultisampleRenderTarget( width, height, options ) {\n\n\tWebGLRenderTarget.call( this, width, height, options );\n\n\tthis.samples = 4;\n\n}\n\nWebGLMultisampleRenderTarget.prototype = Object.assign( Object.create( WebGLRenderTarget.prototype ), {\n\n\tconstructor: WebGLMultisampleRenderTarget,\n\n\tisWebGLMultisampleRenderTarget: true,\n\n\tcopy: function ( source ) {\n\n\t\tWebGLRenderTarget.prototype.copy.call( this, source );\n\n\t\tthis.samples = source.samples;\n\n\t\treturn this;\n\n\t}\n\n} );\n\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author bhouston / http://clara.io\n */\n\nfunction Quaternion( x, y, z, w ) {\n\n\tthis._x = x || 0;\n\tthis._y = y || 0;\n\tthis._z = z || 0;\n\tthis._w = ( w !== undefined ) ? w : 1;\n\n}\n\nObject.assign( Quaternion, {\n\n\tslerp: function ( qa, qb, qm, t ) {\n\n\t\treturn qm.copy( qa ).slerp( qb, t );\n\n\t},\n\n\tslerpFlat: function ( dst, dstOffset, src0, srcOffset0, src1, srcOffset1, t ) {\n\n\t\t// fuzz-free, array-based Quaternion SLERP operation\n\n\t\tvar x0 = src0[ srcOffset0 + 0 ],\n\t\t\ty0 = src0[ srcOffset0 + 1 ],\n\t\t\tz0 = src0[ srcOffset0 + 2 ],\n\t\t\tw0 = src0[ srcOffset0 + 3 ],\n\n\t\t\tx1 = src1[ srcOffset1 + 0 ],\n\t\t\ty1 = src1[ srcOffset1 + 1 ],\n\t\t\tz1 = src1[ srcOffset1 + 2 ],\n\t\t\tw1 = src1[ srcOffset1 + 3 ];\n\n\t\tif ( w0 !== w1 || x0 !== x1 || y0 !== y1 || z0 !== z1 ) {\n\n\t\t\tvar s = 1 - t,\n\n\t\t\t\tcos = x0 * x1 + y0 * y1 + z0 * z1 + w0 * w1,\n\n\t\t\t\tdir = ( cos >= 0 ? 1 : - 1 ),\n\t\t\t\tsqrSin = 1 - cos * cos;\n\n\t\t\t// Skip the Slerp for tiny steps to avoid numeric problems:\n\t\t\tif ( sqrSin > Number.EPSILON ) {\n\n\t\t\t\tvar sin = Math.sqrt( sqrSin ),\n\t\t\t\t\tlen = Math.atan2( sin, cos * dir );\n\n\t\t\t\ts = Math.sin( s * len ) / sin;\n\t\t\t\tt = Math.sin( t * len ) / sin;\n\n\t\t\t}\n\n\t\t\tvar tDir = t * dir;\n\n\t\t\tx0 = x0 * s + x1 * tDir;\n\t\t\ty0 = y0 * s + y1 * tDir;\n\t\t\tz0 = z0 * s + z1 * tDir;\n\t\t\tw0 = w0 * s + w1 * tDir;\n\n\t\t\t// Normalize in case we just did a lerp:\n\t\t\tif ( s === 1 - t ) {\n\n\t\t\t\tvar f = 1 / Math.sqrt( x0 * x0 + y0 * y0 + z0 * z0 + w0 * w0 );\n\n\t\t\t\tx0 *= f;\n\t\t\t\ty0 *= f;\n\t\t\t\tz0 *= f;\n\t\t\t\tw0 *= f;\n\n\t\t\t}\n\n\t\t}\n\n\t\tdst[ dstOffset ] = x0;\n\t\tdst[ dstOffset + 1 ] = y0;\n\t\tdst[ dstOffset + 2 ] = z0;\n\t\tdst[ dstOffset + 3 ] = w0;\n\n\t}\n\n} );\n\nObject.defineProperties( Quaternion.prototype, {\n\n\tx: {\n\n\t\tget: function () {\n\n\t\t\treturn this._x;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._x = value;\n\t\t\tthis._onChangeCallback();\n\n\t\t}\n\n\t},\n\n\ty: {\n\n\t\tget: function () {\n\n\t\t\treturn this._y;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._y = value;\n\t\t\tthis._onChangeCallback();\n\n\t\t}\n\n\t},\n\n\tz: {\n\n\t\tget: function () {\n\n\t\t\treturn this._z;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._z = value;\n\t\t\tthis._onChangeCallback();\n\n\t\t}\n\n\t},\n\n\tw: {\n\n\t\tget: function () {\n\n\t\t\treturn this._w;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._w = value;\n\t\t\tthis._onChangeCallback();\n\n\t\t}\n\n\t}\n\n} );\n\nObject.assign( Quaternion.prototype, {\n\n\tisQuaternion: true,\n\n\tset: function ( x, y, z, w ) {\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._w = w;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this._x, this._y, this._z, this._w );\n\n\t},\n\n\tcopy: function ( quaternion ) {\n\n\t\tthis._x = quaternion.x;\n\t\tthis._y = quaternion.y;\n\t\tthis._z = quaternion.z;\n\t\tthis._w = quaternion.w;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromEuler: function ( euler, update ) {\n\n\t\tif ( ! ( euler && euler.isEuler ) ) {\n\n\t\t\tthrow new Error( 'THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.' );\n\n\t\t}\n\n\t\tvar x = euler._x, y = euler._y, z = euler._z, order = euler.order;\n\n\t\t// http://www.mathworks.com/matlabcentral/fileexchange/\n\t\t// \t20696-function-to-convert-between-dcm-euler-angles-quaternions-and-euler-vectors/\n\t\t//\tcontent/SpinCalc.m\n\n\t\tvar cos = Math.cos;\n\t\tvar sin = Math.sin;\n\n\t\tvar c1 = cos( x / 2 );\n\t\tvar c2 = cos( y / 2 );\n\t\tvar c3 = cos( z / 2 );\n\n\t\tvar s1 = sin( x / 2 );\n\t\tvar s2 = sin( y / 2 );\n\t\tvar s3 = sin( z / 2 );\n\n\t\tif ( order === 'XYZ' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\n\t\t} else if ( order === 'YXZ' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\n\t\t} else if ( order === 'ZXY' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\n\t\t} else if ( order === 'ZYX' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\n\t\t} else if ( order === 'YZX' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\n\t\t} else if ( order === 'XZY' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\n\t\t}\n\n\t\tif ( update !== false ) this._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromAxisAngle: function ( axis, angle ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/angleToQuaternion/index.htm\n\n\t\t// assumes axis is normalized\n\n\t\tvar halfAngle = angle / 2, s = Math.sin( halfAngle );\n\n\t\tthis._x = axis.x * s;\n\t\tthis._y = axis.y * s;\n\t\tthis._z = axis.z * s;\n\t\tthis._w = Math.cos( halfAngle );\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromRotationMatrix: function ( m ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tvar te = m.elements,\n\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ],\n\n\t\t\ttrace = m11 + m22 + m33,\n\t\t\ts;\n\n\t\tif ( trace > 0 ) {\n\n\t\t\ts = 0.5 / Math.sqrt( trace + 1.0 );\n\n\t\t\tthis._w = 0.25 / s;\n\t\t\tthis._x = ( m32 - m23 ) * s;\n\t\t\tthis._y = ( m13 - m31 ) * s;\n\t\t\tthis._z = ( m21 - m12 ) * s;\n\n\t\t} else if ( m11 > m22 && m11 > m33 ) {\n\n\t\t\ts = 2.0 * Math.sqrt( 1.0 + m11 - m22 - m33 );\n\n\t\t\tthis._w = ( m32 - m23 ) / s;\n\t\t\tthis._x = 0.25 * s;\n\t\t\tthis._y = ( m12 + m21 ) / s;\n\t\t\tthis._z = ( m13 + m31 ) / s;\n\n\t\t} else if ( m22 > m33 ) {\n\n\t\t\ts = 2.0 * Math.sqrt( 1.0 + m22 - m11 - m33 );\n\n\t\t\tthis._w = ( m13 - m31 ) / s;\n\t\t\tthis._x = ( m12 + m21 ) / s;\n\t\t\tthis._y = 0.25 * s;\n\t\t\tthis._z = ( m23 + m32 ) / s;\n\n\t\t} else {\n\n\t\t\ts = 2.0 * Math.sqrt( 1.0 + m33 - m11 - m22 );\n\n\t\t\tthis._w = ( m21 - m12 ) / s;\n\t\t\tthis._x = ( m13 + m31 ) / s;\n\t\t\tthis._y = ( m23 + m32 ) / s;\n\t\t\tthis._z = 0.25 * s;\n\n\t\t}\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromUnitVectors: function ( vFrom, vTo ) {\n\n\t\t// assumes direction vectors vFrom and vTo are normalized\n\n\t\tvar EPS = 0.000001;\n\n\t\tvar r = vFrom.dot( vTo ) + 1;\n\n\t\tif ( r < EPS ) {\n\n\t\t\tr = 0;\n\n\t\t\tif ( Math.abs( vFrom.x ) > Math.abs( vFrom.z ) ) {\n\n\t\t\t\tthis._x = - vFrom.y;\n\t\t\t\tthis._y = vFrom.x;\n\t\t\t\tthis._z = 0;\n\t\t\t\tthis._w = r;\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = 0;\n\t\t\t\tthis._y = - vFrom.z;\n\t\t\t\tthis._z = vFrom.y;\n\t\t\t\tthis._w = r;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// crossVectors( vFrom, vTo ); // inlined to avoid cyclic dependency on Vector3\n\n\t\t\tthis._x = vFrom.y * vTo.z - vFrom.z * vTo.y;\n\t\t\tthis._y = vFrom.z * vTo.x - vFrom.x * vTo.z;\n\t\t\tthis._z = vFrom.x * vTo.y - vFrom.y * vTo.x;\n\t\t\tthis._w = r;\n\n\t\t}\n\n\t\treturn this.normalize();\n\n\t},\n\n\tangleTo: function ( q ) {\n\n\t\treturn 2 * Math.acos( Math.abs( MathUtils.clamp( this.dot( q ), - 1, 1 ) ) );\n\n\t},\n\n\trotateTowards: function ( q, step ) {\n\n\t\tvar angle = this.angleTo( q );\n\n\t\tif ( angle === 0 ) return this;\n\n\t\tvar t = Math.min( 1, step / angle );\n\n\t\tthis.slerp( q, t );\n\n\t\treturn this;\n\n\t},\n\n\tinverse: function () {\n\n\t\t// quaternion is assumed to have unit length\n\n\t\treturn this.conjugate();\n\n\t},\n\n\tconjugate: function () {\n\n\t\tthis._x *= - 1;\n\t\tthis._y *= - 1;\n\t\tthis._z *= - 1;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tdot: function ( v ) {\n\n\t\treturn this._x * v._x + this._y * v._y + this._z * v._z + this._w * v._w;\n\n\t},\n\n\tlengthSq: function () {\n\n\t\treturn this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w;\n\n\t},\n\n\tlength: function () {\n\n\t\treturn Math.sqrt( this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w );\n\n\t},\n\n\tnormalize: function () {\n\n\t\tvar l = this.length();\n\n\t\tif ( l === 0 ) {\n\n\t\t\tthis._x = 0;\n\t\t\tthis._y = 0;\n\t\t\tthis._z = 0;\n\t\t\tthis._w = 1;\n\n\t\t} else {\n\n\t\t\tl = 1 / l;\n\n\t\t\tthis._x = this._x * l;\n\t\t\tthis._y = this._y * l;\n\t\t\tthis._z = this._z * l;\n\t\t\tthis._w = this._w * l;\n\n\t\t}\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tmultiply: function ( q, p ) {\n\n\t\tif ( p !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.' );\n\t\t\treturn this.multiplyQuaternions( q, p );\n\n\t\t}\n\n\t\treturn this.multiplyQuaternions( this, q );\n\n\t},\n\n\tpremultiply: function ( q ) {\n\n\t\treturn this.multiplyQuaternions( q, this );\n\n\t},\n\n\tmultiplyQuaternions: function ( a, b ) {\n\n\t\t// from http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/code/index.htm\n\n\t\tvar qax = a._x, qay = a._y, qaz = a._z, qaw = a._w;\n\t\tvar qbx = b._x, qby = b._y, qbz = b._z, qbw = b._w;\n\n\t\tthis._x = qax * qbw + qaw * qbx + qay * qbz - qaz * qby;\n\t\tthis._y = qay * qbw + qaw * qby + qaz * qbx - qax * qbz;\n\t\tthis._z = qaz * qbw + qaw * qbz + qax * qby - qay * qbx;\n\t\tthis._w = qaw * qbw - qax * qbx - qay * qby - qaz * qbz;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tslerp: function ( qb, t ) {\n\n\t\tif ( t === 0 ) return this;\n\t\tif ( t === 1 ) return this.copy( qb );\n\n\t\tvar x = this._x, y = this._y, z = this._z, w = this._w;\n\n\t\t// http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/slerp/\n\n\t\tvar cosHalfTheta = w * qb._w + x * qb._x + y * qb._y + z * qb._z;\n\n\t\tif ( cosHalfTheta < 0 ) {\n\n\t\t\tthis._w = - qb._w;\n\t\t\tthis._x = - qb._x;\n\t\t\tthis._y = - qb._y;\n\t\t\tthis._z = - qb._z;\n\n\t\t\tcosHalfTheta = - cosHalfTheta;\n\n\t\t} else {\n\n\t\t\tthis.copy( qb );\n\n\t\t}\n\n\t\tif ( cosHalfTheta >= 1.0 ) {\n\n\t\t\tthis._w = w;\n\t\t\tthis._x = x;\n\t\t\tthis._y = y;\n\t\t\tthis._z = z;\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tvar sqrSinHalfTheta = 1.0 - cosHalfTheta * cosHalfTheta;\n\n\t\tif ( sqrSinHalfTheta <= Number.EPSILON ) {\n\n\t\t\tvar s = 1 - t;\n\t\t\tthis._w = s * w + t * this._w;\n\t\t\tthis._x = s * x + t * this._x;\n\t\t\tthis._y = s * y + t * this._y;\n\t\t\tthis._z = s * z + t * this._z;\n\n\t\t\tthis.normalize();\n\t\t\tthis._onChangeCallback();\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tvar sinHalfTheta = Math.sqrt( sqrSinHalfTheta );\n\t\tvar halfTheta = Math.atan2( sinHalfTheta, cosHalfTheta );\n\t\tvar ratioA = Math.sin( ( 1 - t ) * halfTheta ) / sinHalfTheta,\n\t\t\tratioB = Math.sin( t * halfTheta ) / sinHalfTheta;\n\n\t\tthis._w = ( w * ratioA + this._w * ratioB );\n\t\tthis._x = ( x * ratioA + this._x * ratioB );\n\t\tthis._y = ( y * ratioA + this._y * ratioB );\n\t\tthis._z = ( z * ratioA + this._z * ratioB );\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( quaternion ) {\n\n\t\treturn ( quaternion._x === this._x ) && ( quaternion._y === this._y ) && ( quaternion._z === this._z ) && ( quaternion._w === this._w );\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis._x = array[ offset ];\n\t\tthis._y = array[ offset + 1 ];\n\t\tthis._z = array[ offset + 2 ];\n\t\tthis._w = array[ offset + 3 ];\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this._x;\n\t\tarray[ offset + 1 ] = this._y;\n\t\tarray[ offset + 2 ] = this._z;\n\t\tarray[ offset + 3 ] = this._w;\n\n\t\treturn array;\n\n\t},\n\n\t_onChange: function ( callback ) {\n\n\t\tthis._onChangeCallback = callback;\n\n\t\treturn this;\n\n\t},\n\n\t_onChangeCallback: function () {}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author kile / http://kile.stravaganza.org/\n * @author philogb / http://blog.thejit.org/\n * @author mikael emtinger / http://gomo.se/\n * @author egraether / http://egraether.com/\n * @author WestLangley / http://github.com/WestLangley\n */\n\nvar _vector = new Vector3();\nvar _quaternion = new Quaternion();\n\nfunction Vector3( x, y, z ) {\n\n\tthis.x = x || 0;\n\tthis.y = y || 0;\n\tthis.z = z || 0;\n\n}\n\nObject.assign( Vector3.prototype, {\n\n\tisVector3: true,\n\n\tset: function ( x, y, z ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetScalar: function ( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\t\tthis.z = scalar;\n\n\t\treturn this;\n\n\t},\n\n\tsetX: function ( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t},\n\n\tsetY: function ( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetZ: function ( z ) {\n\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetComponent: function ( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tcase 2: this.z = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tgetComponent: function ( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tcase 2: return this.z;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.x, this.y, this.z );\n\n\t},\n\n\tcopy: function ( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\t\tthis.z = v.z;\n\n\t\treturn this;\n\n\t},\n\n\tadd: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\n\t\t\treturn this.addVectors( v, w );\n\n\t\t}\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\t\tthis.z += v.z;\n\n\t\treturn this;\n\n\t},\n\n\taddScalar: function ( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\t\tthis.z += s;\n\n\t\treturn this;\n\n\t},\n\n\taddVectors: function ( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\t\tthis.z = a.z + b.z;\n\n\t\treturn this;\n\n\t},\n\n\taddScaledVector: function ( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\t\tthis.z += v.z * s;\n\n\t\treturn this;\n\n\t},\n\n\tsub: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\n\t\t\treturn this.subVectors( v, w );\n\n\t\t}\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\t\tthis.z -= v.z;\n\n\t\treturn this;\n\n\t},\n\n\tsubScalar: function ( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\t\tthis.z -= s;\n\n\t\treturn this;\n\n\t},\n\n\tsubVectors: function ( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\t\tthis.z = a.z - b.z;\n\n\t\treturn this;\n\n\t},\n\n\tmultiply: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.' );\n\t\t\treturn this.multiplyVectors( v, w );\n\n\t\t}\n\n\t\tthis.x *= v.x;\n\t\tthis.y *= v.y;\n\t\tthis.z *= v.z;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\t\tthis.z *= scalar;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyVectors: function ( a, b ) {\n\n\t\tthis.x = a.x * b.x;\n\t\tthis.y = a.y * b.y;\n\t\tthis.z = a.z * b.z;\n\n\t\treturn this;\n\n\t},\n\n\tapplyEuler: function ( euler ) {\n\n\t\tif ( ! ( euler && euler.isEuler ) ) {\n\n\t\t\tconsole.error( 'THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.' );\n\n\t\t}\n\n\t\treturn this.applyQuaternion( _quaternion.setFromEuler( euler ) );\n\n\t},\n\n\tapplyAxisAngle: function ( axis, angle ) {\n\n\t\treturn this.applyQuaternion( _quaternion.setFromAxisAngle( axis, angle ) );\n\n\t},\n\n\tapplyMatrix3: function ( m ) {\n\n\t\tvar x = this.x, y = this.y, z = this.z;\n\t\tvar e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ] * z;\n\t\tthis.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ] * z;\n\t\tthis.z = e[ 2 ] * x + e[ 5 ] * y + e[ 8 ] * z;\n\n\t\treturn this;\n\n\t},\n\n\tapplyNormalMatrix: function ( m ) {\n\n\t\treturn this.applyMatrix3( m ).normalize();\n\n\t},\n\n\tapplyMatrix4: function ( m ) {\n\n\t\tvar x = this.x, y = this.y, z = this.z;\n\t\tvar e = m.elements;\n\n\t\tvar w = 1 / ( e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] );\n\n\t\tthis.x = ( e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] ) * w;\n\t\tthis.y = ( e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] ) * w;\n\t\tthis.z = ( e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] ) * w;\n\n\t\treturn this;\n\n\t},\n\n\tapplyQuaternion: function ( q ) {\n\n\t\tvar x = this.x, y = this.y, z = this.z;\n\t\tvar qx = q.x, qy = q.y, qz = q.z, qw = q.w;\n\n\t\t// calculate quat * vector\n\n\t\tvar ix = qw * x + qy * z - qz * y;\n\t\tvar iy = qw * y + qz * x - qx * z;\n\t\tvar iz = qw * z + qx * y - qy * x;\n\t\tvar iw = - qx * x - qy * y - qz * z;\n\n\t\t// calculate result * inverse quat\n\n\t\tthis.x = ix * qw + iw * - qx + iy * - qz - iz * - qy;\n\t\tthis.y = iy * qw + iw * - qy + iz * - qx - ix * - qz;\n\t\tthis.z = iz * qw + iw * - qz + ix * - qy - iy * - qx;\n\n\t\treturn this;\n\n\t},\n\n\tproject: function ( camera ) {\n\n\t\treturn this.applyMatrix4( camera.matrixWorldInverse ).applyMatrix4( camera.projectionMatrix );\n\n\t},\n\n\tunproject: function ( camera ) {\n\n\t\treturn this.applyMatrix4( camera.projectionMatrixInverse ).applyMatrix4( camera.matrixWorld );\n\n\t},\n\n\ttransformDirection: function ( m ) {\n\n\t\t// input: THREE.Matrix4 affine matrix\n\t\t// vector interpreted as a direction\n\n\t\tvar x = this.x, y = this.y, z = this.z;\n\t\tvar e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z;\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z;\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z;\n\n\t\treturn this.normalize();\n\n\t},\n\n\tdivide: function ( v ) {\n\n\t\tthis.x /= v.x;\n\t\tthis.y /= v.y;\n\t\tthis.z /= v.z;\n\n\t\treturn this;\n\n\t},\n\n\tdivideScalar: function ( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t},\n\n\tmin: function ( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\t\tthis.z = Math.min( this.z, v.z );\n\n\t\treturn this;\n\n\t},\n\n\tmax: function ( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\t\tthis.z = Math.max( this.z, v.z );\n\n\t\treturn this;\n\n\t},\n\n\tclamp: function ( min, max ) {\n\n\t\t// assumes min < max, componentwise\n\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\t\tthis.z = Math.max( min.z, Math.min( max.z, this.z ) );\n\n\t\treturn this;\n\n\t},\n\n\tclampScalar: function ( minVal, maxVal ) {\n\n\t\tthis.x = Math.max( minVal, Math.min( maxVal, this.x ) );\n\t\tthis.y = Math.max( minVal, Math.min( maxVal, this.y ) );\n\t\tthis.z = Math.max( minVal, Math.min( maxVal, this.z ) );\n\n\t\treturn this;\n\n\t},\n\n\tclampLength: function ( min, max ) {\n\n\t\tvar length = this.length();\n\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\n\n\t},\n\n\tfloor: function () {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\t\tthis.z = Math.floor( this.z );\n\n\t\treturn this;\n\n\t},\n\n\tceil: function () {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\t\tthis.z = Math.ceil( this.z );\n\n\t\treturn this;\n\n\t},\n\n\tround: function () {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\t\tthis.z = Math.round( this.z );\n\n\t\treturn this;\n\n\t},\n\n\troundToZero: function () {\n\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\n\n\t\treturn this;\n\n\t},\n\n\tnegate: function () {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\t\tthis.z = - this.z;\n\n\t\treturn this;\n\n\t},\n\n\tdot: function ( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z;\n\n\t},\n\n\t// TODO lengthSquared?\n\n\tlengthSq: function () {\n\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z;\n\n\t},\n\n\tlength: function () {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z );\n\n\t},\n\n\tmanhattanLength: function () {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z );\n\n\t},\n\n\tnormalize: function () {\n\n\t\treturn this.divideScalar( this.length() || 1 );\n\n\t},\n\n\tsetLength: function ( length ) {\n\n\t\treturn this.normalize().multiplyScalar( length );\n\n\t},\n\n\tlerp: function ( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\t\tthis.z += ( v.z - this.z ) * alpha;\n\n\t\treturn this;\n\n\t},\n\n\tlerpVectors: function ( v1, v2, alpha ) {\n\n\t\treturn this.subVectors( v2, v1 ).multiplyScalar( alpha ).add( v1 );\n\n\t},\n\n\tcross: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.' );\n\t\t\treturn this.crossVectors( v, w );\n\n\t\t}\n\n\t\treturn this.crossVectors( this, v );\n\n\t},\n\n\tcrossVectors: function ( a, b ) {\n\n\t\tvar ax = a.x, ay = a.y, az = a.z;\n\t\tvar bx = b.x, by = b.y, bz = b.z;\n\n\t\tthis.x = ay * bz - az * by;\n\t\tthis.y = az * bx - ax * bz;\n\t\tthis.z = ax * by - ay * bx;\n\n\t\treturn this;\n\n\t},\n\n\tprojectOnVector: function ( v ) {\n\n\t\tvar denominator = v.lengthSq();\n\n\t\tif ( denominator === 0 ) return this.set( 0, 0, 0 );\n\n\t\tvar scalar = v.dot( this ) / denominator;\n\n\t\treturn this.copy( v ).multiplyScalar( scalar );\n\n\t},\n\n\tprojectOnPlane: function ( planeNormal ) {\n\n\t\t_vector.copy( this ).projectOnVector( planeNormal );\n\n\t\treturn this.sub( _vector );\n\n\t},\n\n\treflect: function ( normal ) {\n\n\t\t// reflect incident vector off plane orthogonal to normal\n\t\t// normal is assumed to have unit length\n\n\t\treturn this.sub( _vector.copy( normal ).multiplyScalar( 2 * this.dot( normal ) ) );\n\n\t},\n\n\tangleTo: function ( v ) {\n\n\t\tvar denominator = Math.sqrt( this.lengthSq() * v.lengthSq() );\n\n\t\tif ( denominator === 0 ) return Math.PI / 2;\n\n\t\tvar theta = this.dot( v ) / denominator;\n\n\t\t// clamp, to handle numerical problems\n\n\t\treturn Math.acos( MathUtils.clamp( theta, - 1, 1 ) );\n\n\t},\n\n\tdistanceTo: function ( v ) {\n\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\n\n\t},\n\n\tdistanceToSquared: function ( v ) {\n\n\t\tvar dx = this.x - v.x, dy = this.y - v.y, dz = this.z - v.z;\n\n\t\treturn dx * dx + dy * dy + dz * dz;\n\n\t},\n\n\tmanhattanDistanceTo: function ( v ) {\n\n\t\treturn Math.abs( this.x - v.x ) + Math.abs( this.y - v.y ) + Math.abs( this.z - v.z );\n\n\t},\n\n\tsetFromSpherical: function ( s ) {\n\n\t\treturn this.setFromSphericalCoords( s.radius, s.phi, s.theta );\n\n\t},\n\n\tsetFromSphericalCoords: function ( radius, phi, theta ) {\n\n\t\tvar sinPhiRadius = Math.sin( phi ) * radius;\n\n\t\tthis.x = sinPhiRadius * Math.sin( theta );\n\t\tthis.y = Math.cos( phi ) * radius;\n\t\tthis.z = sinPhiRadius * Math.cos( theta );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromCylindrical: function ( c ) {\n\n\t\treturn this.setFromCylindricalCoords( c.radius, c.theta, c.y );\n\n\t},\n\n\tsetFromCylindricalCoords: function ( radius, theta, y ) {\n\n\t\tthis.x = radius * Math.sin( theta );\n\t\tthis.y = y;\n\t\tthis.z = radius * Math.cos( theta );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromMatrixPosition: function ( m ) {\n\n\t\tvar e = m.elements;\n\n\t\tthis.x = e[ 12 ];\n\t\tthis.y = e[ 13 ];\n\t\tthis.z = e[ 14 ];\n\n\t\treturn this;\n\n\t},\n\n\tsetFromMatrixScale: function ( m ) {\n\n\t\tvar sx = this.setFromMatrixColumn( m, 0 ).length();\n\t\tvar sy = this.setFromMatrixColumn( m, 1 ).length();\n\t\tvar sz = this.setFromMatrixColumn( m, 2 ).length();\n\n\t\tthis.x = sx;\n\t\tthis.y = sy;\n\t\tthis.z = sz;\n\n\t\treturn this;\n\n\t},\n\n\tsetFromMatrixColumn: function ( m, index ) {\n\n\t\treturn this.fromArray( m.elements, index * 4 );\n\n\t},\n\n\tsetFromMatrix3Column: function ( m, index ) {\n\n\t\treturn this.fromArray( m.elements, index * 3 );\n\n\t},\n\n\tequals: function ( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) );\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\t\tthis.z = array[ offset + 2 ];\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\t\tarray[ offset + 2 ] = this.z;\n\n\t\treturn array;\n\n\t},\n\n\tfromBufferAttribute: function ( attribute, index, offset ) {\n\n\t\tif ( offset !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: offset has been removed from .fromBufferAttribute().' );\n\n\t\t}\n\n\t\tthis.x = attribute.getX( index );\n\t\tthis.y = attribute.getY( index );\n\t\tthis.z = attribute.getZ( index );\n\n\t\treturn this;\n\n\t}\n\n} );\n\nvar _v1 = new Vector3();\nvar _m1 = new Matrix4();\nvar _zero = new Vector3( 0, 0, 0 );\nvar _one = new Vector3( 1, 1, 1 );\nvar _x = new Vector3();\nvar _y = new Vector3();\nvar _z = new Vector3();\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author supereggbert / http://www.paulbrunt.co.uk/\n * @author philogb / http://blog.thejit.org/\n * @author jordi_ros / http://plattsoft.com\n * @author D1plo1d / http://github.com/D1plo1d\n * @author alteredq / http://alteredqualia.com/\n * @author mikael emtinger / http://gomo.se/\n * @author timknip / http://www.floorplanner.com/\n * @author bhouston / http://clara.io\n * @author WestLangley / http://github.com/WestLangley\n */\n\nfunction Matrix4() {\n\n\tthis.elements = [\n\n\t\t1, 0, 0, 0,\n\t\t0, 1, 0, 0,\n\t\t0, 0, 1, 0,\n\t\t0, 0, 0, 1\n\n\t];\n\n\tif ( arguments.length > 0 ) {\n\n\t\tconsole.error( 'THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.' );\n\n\t}\n\n}\n\nObject.assign( Matrix4.prototype, {\n\n\tisMatrix4: true,\n\n\tset: function ( n11, n12, n13, n14, n21, n22, n23, n24, n31, n32, n33, n34, n41, n42, n43, n44 ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] = n11; te[ 4 ] = n12; te[ 8 ] = n13; te[ 12 ] = n14;\n\t\tte[ 1 ] = n21; te[ 5 ] = n22; te[ 9 ] = n23; te[ 13 ] = n24;\n\t\tte[ 2 ] = n31; te[ 6 ] = n32; te[ 10 ] = n33; te[ 14 ] = n34;\n\t\tte[ 3 ] = n41; te[ 7 ] = n42; te[ 11 ] = n43; te[ 15 ] = n44;\n\n\t\treturn this;\n\n\t},\n\n\tidentity: function () {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, 0,\n\t\t\t0, 1, 0, 0,\n\t\t\t0, 0, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new Matrix4().fromArray( this.elements );\n\n\t},\n\n\tcopy: function ( m ) {\n\n\t\tvar te = this.elements;\n\t\tvar me = m.elements;\n\n\t\tte[ 0 ] = me[ 0 ]; te[ 1 ] = me[ 1 ]; te[ 2 ] = me[ 2 ]; te[ 3 ] = me[ 3 ];\n\t\tte[ 4 ] = me[ 4 ]; te[ 5 ] = me[ 5 ]; te[ 6 ] = me[ 6 ]; te[ 7 ] = me[ 7 ];\n\t\tte[ 8 ] = me[ 8 ]; te[ 9 ] = me[ 9 ]; te[ 10 ] = me[ 10 ]; te[ 11 ] = me[ 11 ];\n\t\tte[ 12 ] = me[ 12 ]; te[ 13 ] = me[ 13 ]; te[ 14 ] = me[ 14 ]; te[ 15 ] = me[ 15 ];\n\n\t\treturn this;\n\n\t},\n\n\tcopyPosition: function ( m ) {\n\n\t\tvar te = this.elements, me = m.elements;\n\n\t\tte[ 12 ] = me[ 12 ];\n\t\tte[ 13 ] = me[ 13 ];\n\t\tte[ 14 ] = me[ 14 ];\n\n\t\treturn this;\n\n\t},\n\n\textractBasis: function ( xAxis, yAxis, zAxis ) {\n\n\t\txAxis.setFromMatrixColumn( this, 0 );\n\t\tyAxis.setFromMatrixColumn( this, 1 );\n\t\tzAxis.setFromMatrixColumn( this, 2 );\n\n\t\treturn this;\n\n\t},\n\n\tmakeBasis: function ( xAxis, yAxis, zAxis ) {\n\n\t\tthis.set(\n\t\t\txAxis.x, yAxis.x, zAxis.x, 0,\n\t\t\txAxis.y, yAxis.y, zAxis.y, 0,\n\t\t\txAxis.z, yAxis.z, zAxis.z, 0,\n\t\t\t0, 0, 0, 1\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\textractRotation: function ( m ) {\n\n\t\t// this method does not support reflection matrices\n\n\t\tvar te = this.elements;\n\t\tvar me = m.elements;\n\n\t\tvar scaleX = 1 / _v1.setFromMatrixColumn( m, 0 ).length();\n\t\tvar scaleY = 1 / _v1.setFromMatrixColumn( m, 1 ).length();\n\t\tvar scaleZ = 1 / _v1.setFromMatrixColumn( m, 2 ).length();\n\n\t\tte[ 0 ] = me[ 0 ] * scaleX;\n\t\tte[ 1 ] = me[ 1 ] * scaleX;\n\t\tte[ 2 ] = me[ 2 ] * scaleX;\n\t\tte[ 3 ] = 0;\n\n\t\tte[ 4 ] = me[ 4 ] * scaleY;\n\t\tte[ 5 ] = me[ 5 ] * scaleY;\n\t\tte[ 6 ] = me[ 6 ] * scaleY;\n\t\tte[ 7 ] = 0;\n\n\t\tte[ 8 ] = me[ 8 ] * scaleZ;\n\t\tte[ 9 ] = me[ 9 ] * scaleZ;\n\t\tte[ 10 ] = me[ 10 ] * scaleZ;\n\t\tte[ 11 ] = 0;\n\n\t\tte[ 12 ] = 0;\n\t\tte[ 13 ] = 0;\n\t\tte[ 14 ] = 0;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationFromEuler: function ( euler ) {\n\n\t\tif ( ! ( euler && euler.isEuler ) ) {\n\n\t\t\tconsole.error( 'THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.' );\n\n\t\t}\n\n\t\tvar te = this.elements;\n\n\t\tvar x = euler.x, y = euler.y, z = euler.z;\n\t\tvar a = Math.cos( x ), b = Math.sin( x );\n\t\tvar c = Math.cos( y ), d = Math.sin( y );\n\t\tvar e = Math.cos( z ), f = Math.sin( z );\n\n\t\tif ( euler.order === 'XYZ' ) {\n\n\t\t\tvar ae = a * e, af = a * f, be = b * e, bf = b * f;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = - c * f;\n\t\t\tte[ 8 ] = d;\n\n\t\t\tte[ 1 ] = af + be * d;\n\t\t\tte[ 5 ] = ae - bf * d;\n\t\t\tte[ 9 ] = - b * c;\n\n\t\t\tte[ 2 ] = bf - ae * d;\n\t\t\tte[ 6 ] = be + af * d;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'YXZ' ) {\n\n\t\t\tvar ce = c * e, cf = c * f, de = d * e, df = d * f;\n\n\t\t\tte[ 0 ] = ce + df * b;\n\t\t\tte[ 4 ] = de * b - cf;\n\t\t\tte[ 8 ] = a * d;\n\n\t\t\tte[ 1 ] = a * f;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = - b;\n\n\t\t\tte[ 2 ] = cf * b - de;\n\t\t\tte[ 6 ] = df + ce * b;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'ZXY' ) {\n\n\t\t\tvar ce = c * e, cf = c * f, de = d * e, df = d * f;\n\n\t\t\tte[ 0 ] = ce - df * b;\n\t\t\tte[ 4 ] = - a * f;\n\t\t\tte[ 8 ] = de + cf * b;\n\n\t\t\tte[ 1 ] = cf + de * b;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = df - ce * b;\n\n\t\t\tte[ 2 ] = - a * d;\n\t\t\tte[ 6 ] = b;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'ZYX' ) {\n\n\t\t\tvar ae = a * e, af = a * f, be = b * e, bf = b * f;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = be * d - af;\n\t\t\tte[ 8 ] = ae * d + bf;\n\n\t\t\tte[ 1 ] = c * f;\n\t\t\tte[ 5 ] = bf * d + ae;\n\t\t\tte[ 9 ] = af * d - be;\n\n\t\t\tte[ 2 ] = - d;\n\t\t\tte[ 6 ] = b * c;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'YZX' ) {\n\n\t\t\tvar ac = a * c, ad = a * d, bc = b * c, bd = b * d;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = bd - ac * f;\n\t\t\tte[ 8 ] = bc * f + ad;\n\n\t\t\tte[ 1 ] = f;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = - b * e;\n\n\t\t\tte[ 2 ] = - d * e;\n\t\t\tte[ 6 ] = ad * f + bc;\n\t\t\tte[ 10 ] = ac - bd * f;\n\n\t\t} else if ( euler.order === 'XZY' ) {\n\n\t\t\tvar ac = a * c, ad = a * d, bc = b * c, bd = b * d;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = - f;\n\t\t\tte[ 8 ] = d * e;\n\n\t\t\tte[ 1 ] = ac * f + bd;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = ad * f - bc;\n\n\t\t\tte[ 2 ] = bc * f - ad;\n\t\t\tte[ 6 ] = b * e;\n\t\t\tte[ 10 ] = bd * f + ac;\n\n\t\t}\n\n\t\t// bottom row\n\t\tte[ 3 ] = 0;\n\t\tte[ 7 ] = 0;\n\t\tte[ 11 ] = 0;\n\n\t\t// last column\n\t\tte[ 12 ] = 0;\n\t\tte[ 13 ] = 0;\n\t\tte[ 14 ] = 0;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationFromQuaternion: function ( q ) {\n\n\t\treturn this.compose( _zero, q, _one );\n\n\t},\n\n\tlookAt: function ( eye, target, up ) {\n\n\t\tvar te = this.elements;\n\n\t\t_z.subVectors( eye, target );\n\n\t\tif ( _z.lengthSq() === 0 ) {\n\n\t\t\t// eye and target are in the same position\n\n\t\t\t_z.z = 1;\n\n\t\t}\n\n\t\t_z.normalize();\n\t\t_x.crossVectors( up, _z );\n\n\t\tif ( _x.lengthSq() === 0 ) {\n\n\t\t\t// up and z are parallel\n\n\t\t\tif ( Math.abs( up.z ) === 1 ) {\n\n\t\t\t\t_z.x += 0.0001;\n\n\t\t\t} else {\n\n\t\t\t\t_z.z += 0.0001;\n\n\t\t\t}\n\n\t\t\t_z.normalize();\n\t\t\t_x.crossVectors( up, _z );\n\n\t\t}\n\n\t\t_x.normalize();\n\t\t_y.crossVectors( _z, _x );\n\n\t\tte[ 0 ] = _x.x; te[ 4 ] = _y.x; te[ 8 ] = _z.x;\n\t\tte[ 1 ] = _x.y; te[ 5 ] = _y.y; te[ 9 ] = _z.y;\n\t\tte[ 2 ] = _x.z; te[ 6 ] = _y.z; te[ 10 ] = _z.z;\n\n\t\treturn this;\n\n\t},\n\n\tmultiply: function ( m, n ) {\n\n\t\tif ( n !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.' );\n\t\t\treturn this.multiplyMatrices( m, n );\n\n\t\t}\n\n\t\treturn this.multiplyMatrices( this, m );\n\n\t},\n\n\tpremultiply: function ( m ) {\n\n\t\treturn this.multiplyMatrices( m, this );\n\n\t},\n\n\tmultiplyMatrices: function ( a, b ) {\n\n\t\tvar ae = a.elements;\n\t\tvar be = b.elements;\n\t\tvar te = this.elements;\n\n\t\tvar a11 = ae[ 0 ], a12 = ae[ 4 ], a13 = ae[ 8 ], a14 = ae[ 12 ];\n\t\tvar a21 = ae[ 1 ], a22 = ae[ 5 ], a23 = ae[ 9 ], a24 = ae[ 13 ];\n\t\tvar a31 = ae[ 2 ], a32 = ae[ 6 ], a33 = ae[ 10 ], a34 = ae[ 14 ];\n\t\tvar a41 = ae[ 3 ], a42 = ae[ 7 ], a43 = ae[ 11 ], a44 = ae[ 15 ];\n\n\t\tvar b11 = be[ 0 ], b12 = be[ 4 ], b13 = be[ 8 ], b14 = be[ 12 ];\n\t\tvar b21 = be[ 1 ], b22 = be[ 5 ], b23 = be[ 9 ], b24 = be[ 13 ];\n\t\tvar b31 = be[ 2 ], b32 = be[ 6 ], b33 = be[ 10 ], b34 = be[ 14 ];\n\t\tvar b41 = be[ 3 ], b42 = be[ 7 ], b43 = be[ 11 ], b44 = be[ 15 ];\n\n\t\tte[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31 + a14 * b41;\n\t\tte[ 4 ] = a11 * b12 + a12 * b22 + a13 * b32 + a14 * b42;\n\t\tte[ 8 ] = a11 * b13 + a12 * b23 + a13 * b33 + a14 * b43;\n\t\tte[ 12 ] = a11 * b14 + a12 * b24 + a13 * b34 + a14 * b44;\n\n\t\tte[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31 + a24 * b41;\n\t\tte[ 5 ] = a21 * b12 + a22 * b22 + a23 * b32 + a24 * b42;\n\t\tte[ 9 ] = a21 * b13 + a22 * b23 + a23 * b33 + a24 * b43;\n\t\tte[ 13 ] = a21 * b14 + a22 * b24 + a23 * b34 + a24 * b44;\n\n\t\tte[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31 + a34 * b41;\n\t\tte[ 6 ] = a31 * b12 + a32 * b22 + a33 * b32 + a34 * b42;\n\t\tte[ 10 ] = a31 * b13 + a32 * b23 + a33 * b33 + a34 * b43;\n\t\tte[ 14 ] = a31 * b14 + a32 * b24 + a33 * b34 + a34 * b44;\n\n\t\tte[ 3 ] = a41 * b11 + a42 * b21 + a43 * b31 + a44 * b41;\n\t\tte[ 7 ] = a41 * b12 + a42 * b22 + a43 * b32 + a44 * b42;\n\t\tte[ 11 ] = a41 * b13 + a42 * b23 + a43 * b33 + a44 * b43;\n\t\tte[ 15 ] = a41 * b14 + a42 * b24 + a43 * b34 + a44 * b44;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( s ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] *= s; te[ 4 ] *= s; te[ 8 ] *= s; te[ 12 ] *= s;\n\t\tte[ 1 ] *= s; te[ 5 ] *= s; te[ 9 ] *= s; te[ 13 ] *= s;\n\t\tte[ 2 ] *= s; te[ 6 ] *= s; te[ 10 ] *= s; te[ 14 ] *= s;\n\t\tte[ 3 ] *= s; te[ 7 ] *= s; te[ 11 ] *= s; te[ 15 ] *= s;\n\n\t\treturn this;\n\n\t},\n\n\tdeterminant: function () {\n\n\t\tvar te = this.elements;\n\n\t\tvar n11 = te[ 0 ], n12 = te[ 4 ], n13 = te[ 8 ], n14 = te[ 12 ];\n\t\tvar n21 = te[ 1 ], n22 = te[ 5 ], n23 = te[ 9 ], n24 = te[ 13 ];\n\t\tvar n31 = te[ 2 ], n32 = te[ 6 ], n33 = te[ 10 ], n34 = te[ 14 ];\n\t\tvar n41 = te[ 3 ], n42 = te[ 7 ], n43 = te[ 11 ], n44 = te[ 15 ];\n\n\t\t//TODO: make this more efficient\n\t\t//( based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm )\n\n\t\treturn (\n\t\t\tn41 * (\n\t\t\t\t+ n14 * n23 * n32\n\t\t\t\t - n13 * n24 * n32\n\t\t\t\t - n14 * n22 * n33\n\t\t\t\t + n12 * n24 * n33\n\t\t\t\t + n13 * n22 * n34\n\t\t\t\t - n12 * n23 * n34\n\t\t\t) +\n\t\t\tn42 * (\n\t\t\t\t+ n11 * n23 * n34\n\t\t\t\t - n11 * n24 * n33\n\t\t\t\t + n14 * n21 * n33\n\t\t\t\t - n13 * n21 * n34\n\t\t\t\t + n13 * n24 * n31\n\t\t\t\t - n14 * n23 * n31\n\t\t\t) +\n\t\t\tn43 * (\n\t\t\t\t+ n11 * n24 * n32\n\t\t\t\t - n11 * n22 * n34\n\t\t\t\t - n14 * n21 * n32\n\t\t\t\t + n12 * n21 * n34\n\t\t\t\t + n14 * n22 * n31\n\t\t\t\t - n12 * n24 * n31\n\t\t\t) +\n\t\t\tn44 * (\n\t\t\t\t- n13 * n22 * n31\n\t\t\t\t - n11 * n23 * n32\n\t\t\t\t + n11 * n22 * n33\n\t\t\t\t + n13 * n21 * n32\n\t\t\t\t - n12 * n21 * n33\n\t\t\t\t + n12 * n23 * n31\n\t\t\t)\n\n\t\t);\n\n\t},\n\n\ttranspose: function () {\n\n\t\tvar te = this.elements;\n\t\tvar tmp;\n\n\t\ttmp = te[ 1 ]; te[ 1 ] = te[ 4 ]; te[ 4 ] = tmp;\n\t\ttmp = te[ 2 ]; te[ 2 ] = te[ 8 ]; te[ 8 ] = tmp;\n\t\ttmp = te[ 6 ]; te[ 6 ] = te[ 9 ]; te[ 9 ] = tmp;\n\n\t\ttmp = te[ 3 ]; te[ 3 ] = te[ 12 ]; te[ 12 ] = tmp;\n\t\ttmp = te[ 7 ]; te[ 7 ] = te[ 13 ]; te[ 13 ] = tmp;\n\t\ttmp = te[ 11 ]; te[ 11 ] = te[ 14 ]; te[ 14 ] = tmp;\n\n\t\treturn this;\n\n\t},\n\n\tsetPosition: function ( x, y, z ) {\n\n\t\tvar te = this.elements;\n\n\t\tif ( x.isVector3 ) {\n\n\t\t\tte[ 12 ] = x.x;\n\t\t\tte[ 13 ] = x.y;\n\t\t\tte[ 14 ] = x.z;\n\n\t\t} else {\n\n\t\t\tte[ 12 ] = x;\n\t\t\tte[ 13 ] = y;\n\t\t\tte[ 14 ] = z;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tgetInverse: function ( m, throwOnDegenerate ) {\n\n\t\t// based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm\n\t\tvar te = this.elements,\n\t\t\tme = m.elements,\n\n\t\t\tn11 = me[ 0 ], n21 = me[ 1 ], n31 = me[ 2 ], n41 = me[ 3 ],\n\t\t\tn12 = me[ 4 ], n22 = me[ 5 ], n32 = me[ 6 ], n42 = me[ 7 ],\n\t\t\tn13 = me[ 8 ], n23 = me[ 9 ], n33 = me[ 10 ], n43 = me[ 11 ],\n\t\t\tn14 = me[ 12 ], n24 = me[ 13 ], n34 = me[ 14 ], n44 = me[ 15 ],\n\n\t\t\tt11 = n23 * n34 * n42 - n24 * n33 * n42 + n24 * n32 * n43 - n22 * n34 * n43 - n23 * n32 * n44 + n22 * n33 * n44,\n\t\t\tt12 = n14 * n33 * n42 - n13 * n34 * n42 - n14 * n32 * n43 + n12 * n34 * n43 + n13 * n32 * n44 - n12 * n33 * n44,\n\t\t\tt13 = n13 * n24 * n42 - n14 * n23 * n42 + n14 * n22 * n43 - n12 * n24 * n43 - n13 * n22 * n44 + n12 * n23 * n44,\n\t\t\tt14 = n14 * n23 * n32 - n13 * n24 * n32 - n14 * n22 * n33 + n12 * n24 * n33 + n13 * n22 * n34 - n12 * n23 * n34;\n\n\t\tvar det = n11 * t11 + n21 * t12 + n31 * t13 + n41 * t14;\n\n\t\tif ( det === 0 ) {\n\n\t\t\tvar msg = \"THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0\";\n\n\t\t\tif ( throwOnDegenerate === true ) {\n\n\t\t\t\tthrow new Error( msg );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( msg );\n\n\t\t\t}\n\n\t\t\treturn this.identity();\n\n\t\t}\n\n\t\tvar detInv = 1 / det;\n\n\t\tte[ 0 ] = t11 * detInv;\n\t\tte[ 1 ] = ( n24 * n33 * n41 - n23 * n34 * n41 - n24 * n31 * n43 + n21 * n34 * n43 + n23 * n31 * n44 - n21 * n33 * n44 ) * detInv;\n\t\tte[ 2 ] = ( n22 * n34 * n41 - n24 * n32 * n41 + n24 * n31 * n42 - n21 * n34 * n42 - n22 * n31 * n44 + n21 * n32 * n44 ) * detInv;\n\t\tte[ 3 ] = ( n23 * n32 * n41 - n22 * n33 * n41 - n23 * n31 * n42 + n21 * n33 * n42 + n22 * n31 * n43 - n21 * n32 * n43 ) * detInv;\n\n\t\tte[ 4 ] = t12 * detInv;\n\t\tte[ 5 ] = ( n13 * n34 * n41 - n14 * n33 * n41 + n14 * n31 * n43 - n11 * n34 * n43 - n13 * n31 * n44 + n11 * n33 * n44 ) * detInv;\n\t\tte[ 6 ] = ( n14 * n32 * n41 - n12 * n34 * n41 - n14 * n31 * n42 + n11 * n34 * n42 + n12 * n31 * n44 - n11 * n32 * n44 ) * detInv;\n\t\tte[ 7 ] = ( n12 * n33 * n41 - n13 * n32 * n41 + n13 * n31 * n42 - n11 * n33 * n42 - n12 * n31 * n43 + n11 * n32 * n43 ) * detInv;\n\n\t\tte[ 8 ] = t13 * detInv;\n\t\tte[ 9 ] = ( n14 * n23 * n41 - n13 * n24 * n41 - n14 * n21 * n43 + n11 * n24 * n43 + n13 * n21 * n44 - n11 * n23 * n44 ) * detInv;\n\t\tte[ 10 ] = ( n12 * n24 * n41 - n14 * n22 * n41 + n14 * n21 * n42 - n11 * n24 * n42 - n12 * n21 * n44 + n11 * n22 * n44 ) * detInv;\n\t\tte[ 11 ] = ( n13 * n22 * n41 - n12 * n23 * n41 - n13 * n21 * n42 + n11 * n23 * n42 + n12 * n21 * n43 - n11 * n22 * n43 ) * detInv;\n\n\t\tte[ 12 ] = t14 * detInv;\n\t\tte[ 13 ] = ( n13 * n24 * n31 - n14 * n23 * n31 + n14 * n21 * n33 - n11 * n24 * n33 - n13 * n21 * n34 + n11 * n23 * n34 ) * detInv;\n\t\tte[ 14 ] = ( n14 * n22 * n31 - n12 * n24 * n31 - n14 * n21 * n32 + n11 * n24 * n32 + n12 * n21 * n34 - n11 * n22 * n34 ) * detInv;\n\t\tte[ 15 ] = ( n12 * n23 * n31 - n13 * n22 * n31 + n13 * n21 * n32 - n11 * n23 * n32 - n12 * n21 * n33 + n11 * n22 * n33 ) * detInv;\n\n\t\treturn this;\n\n\t},\n\n\tscale: function ( v ) {\n\n\t\tvar te = this.elements;\n\t\tvar x = v.x, y = v.y, z = v.z;\n\n\t\tte[ 0 ] *= x; te[ 4 ] *= y; te[ 8 ] *= z;\n\t\tte[ 1 ] *= x; te[ 5 ] *= y; te[ 9 ] *= z;\n\t\tte[ 2 ] *= x; te[ 6 ] *= y; te[ 10 ] *= z;\n\t\tte[ 3 ] *= x; te[ 7 ] *= y; te[ 11 ] *= z;\n\n\t\treturn this;\n\n\t},\n\n\tgetMaxScaleOnAxis: function () {\n\n\t\tvar te = this.elements;\n\n\t\tvar scaleXSq = te[ 0 ] * te[ 0 ] + te[ 1 ] * te[ 1 ] + te[ 2 ] * te[ 2 ];\n\t\tvar scaleYSq = te[ 4 ] * te[ 4 ] + te[ 5 ] * te[ 5 ] + te[ 6 ] * te[ 6 ];\n\t\tvar scaleZSq = te[ 8 ] * te[ 8 ] + te[ 9 ] * te[ 9 ] + te[ 10 ] * te[ 10 ];\n\n\t\treturn Math.sqrt( Math.max( scaleXSq, scaleYSq, scaleZSq ) );\n\n\t},\n\n\tmakeTranslation: function ( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, x,\n\t\t\t0, 1, 0, y,\n\t\t\t0, 0, 1, z,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationX: function ( theta ) {\n\n\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, 0,\n\t\t\t0, c, - s, 0,\n\t\t\t0, s, c, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationY: function ( theta ) {\n\n\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\t c, 0, s, 0,\n\t\t\t 0, 1, 0, 0,\n\t\t\t- s, 0, c, 0,\n\t\t\t 0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationZ: function ( theta ) {\n\n\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\tc, - s, 0, 0,\n\t\t\ts, c, 0, 0,\n\t\t\t0, 0, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationAxis: function ( axis, angle ) {\n\n\t\t// Based on http://www.gamedev.net/reference/articles/article1199.asp\n\n\t\tvar c = Math.cos( angle );\n\t\tvar s = Math.sin( angle );\n\t\tvar t = 1 - c;\n\t\tvar x = axis.x, y = axis.y, z = axis.z;\n\t\tvar tx = t * x, ty = t * y;\n\n\t\tthis.set(\n\n\t\t\ttx * x + c, tx * y - s * z, tx * z + s * y, 0,\n\t\t\ttx * y + s * z, ty * y + c, ty * z - s * x, 0,\n\t\t\ttx * z - s * y, ty * z + s * x, t * z * z + c, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\t return this;\n\n\t},\n\n\tmakeScale: function ( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\tx, 0, 0, 0,\n\t\t\t0, y, 0, 0,\n\t\t\t0, 0, z, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeShear: function ( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\t1, y, z, 0,\n\t\t\tx, 1, z, 0,\n\t\t\tx, y, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tcompose: function ( position, quaternion, scale ) {\n\n\t\tvar te = this.elements;\n\n\t\tvar x = quaternion._x, y = quaternion._y, z = quaternion._z, w = quaternion._w;\n\t\tvar x2 = x + x,\ty2 = y + y, z2 = z + z;\n\t\tvar xx = x * x2, xy = x * y2, xz = x * z2;\n\t\tvar yy = y * y2, yz = y * z2, zz = z * z2;\n\t\tvar wx = w * x2, wy = w * y2, wz = w * z2;\n\n\t\tvar sx = scale.x, sy = scale.y, sz = scale.z;\n\n\t\tte[ 0 ] = ( 1 - ( yy + zz ) ) * sx;\n\t\tte[ 1 ] = ( xy + wz ) * sx;\n\t\tte[ 2 ] = ( xz - wy ) * sx;\n\t\tte[ 3 ] = 0;\n\n\t\tte[ 4 ] = ( xy - wz ) * sy;\n\t\tte[ 5 ] = ( 1 - ( xx + zz ) ) * sy;\n\t\tte[ 6 ] = ( yz + wx ) * sy;\n\t\tte[ 7 ] = 0;\n\n\t\tte[ 8 ] = ( xz + wy ) * sz;\n\t\tte[ 9 ] = ( yz - wx ) * sz;\n\t\tte[ 10 ] = ( 1 - ( xx + yy ) ) * sz;\n\t\tte[ 11 ] = 0;\n\n\t\tte[ 12 ] = position.x;\n\t\tte[ 13 ] = position.y;\n\t\tte[ 14 ] = position.z;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t},\n\n\tdecompose: function ( position, quaternion, scale ) {\n\n\t\tvar te = this.elements;\n\n\t\tvar sx = _v1.set( te[ 0 ], te[ 1 ], te[ 2 ] ).length();\n\t\tvar sy = _v1.set( te[ 4 ], te[ 5 ], te[ 6 ] ).length();\n\t\tvar sz = _v1.set( te[ 8 ], te[ 9 ], te[ 10 ] ).length();\n\n\t\t// if determine is negative, we need to invert one scale\n\t\tvar det = this.determinant();\n\t\tif ( det < 0 ) sx = - sx;\n\n\t\tposition.x = te[ 12 ];\n\t\tposition.y = te[ 13 ];\n\t\tposition.z = te[ 14 ];\n\n\t\t// scale the rotation part\n\t\t_m1.copy( this );\n\n\t\tvar invSX = 1 / sx;\n\t\tvar invSY = 1 / sy;\n\t\tvar invSZ = 1 / sz;\n\n\t\t_m1.elements[ 0 ] *= invSX;\n\t\t_m1.elements[ 1 ] *= invSX;\n\t\t_m1.elements[ 2 ] *= invSX;\n\n\t\t_m1.elements[ 4 ] *= invSY;\n\t\t_m1.elements[ 5 ] *= invSY;\n\t\t_m1.elements[ 6 ] *= invSY;\n\n\t\t_m1.elements[ 8 ] *= invSZ;\n\t\t_m1.elements[ 9 ] *= invSZ;\n\t\t_m1.elements[ 10 ] *= invSZ;\n\n\t\tquaternion.setFromRotationMatrix( _m1 );\n\n\t\tscale.x = sx;\n\t\tscale.y = sy;\n\t\tscale.z = sz;\n\n\t\treturn this;\n\n\t},\n\n\tmakePerspective: function ( left, right, top, bottom, near, far ) {\n\n\t\tif ( far === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.' );\n\n\t\t}\n\n\t\tvar te = this.elements;\n\t\tvar x = 2 * near / ( right - left );\n\t\tvar y = 2 * near / ( top - bottom );\n\n\t\tvar a = ( right + left ) / ( right - left );\n\t\tvar b = ( top + bottom ) / ( top - bottom );\n\t\tvar c = - ( far + near ) / ( far - near );\n\t\tvar d = - 2 * far * near / ( far - near );\n\n\t\tte[ 0 ] = x;\tte[ 4 ] = 0;\tte[ 8 ] = a;\tte[ 12 ] = 0;\n\t\tte[ 1 ] = 0;\tte[ 5 ] = y;\tte[ 9 ] = b;\tte[ 13 ] = 0;\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = c;\tte[ 14 ] = d;\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = - 1;\tte[ 15 ] = 0;\n\n\t\treturn this;\n\n\t},\n\n\tmakeOrthographic: function ( left, right, top, bottom, near, far ) {\n\n\t\tvar te = this.elements;\n\t\tvar w = 1.0 / ( right - left );\n\t\tvar h = 1.0 / ( top - bottom );\n\t\tvar p = 1.0 / ( far - near );\n\n\t\tvar x = ( right + left ) * w;\n\t\tvar y = ( top + bottom ) * h;\n\t\tvar z = ( far + near ) * p;\n\n\t\tte[ 0 ] = 2 * w;\tte[ 4 ] = 0;\tte[ 8 ] = 0;\tte[ 12 ] = - x;\n\t\tte[ 1 ] = 0;\tte[ 5 ] = 2 * h;\tte[ 9 ] = 0;\tte[ 13 ] = - y;\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = - 2 * p;\tte[ 14 ] = - z;\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = 0;\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( matrix ) {\n\n\t\tvar te = this.elements;\n\t\tvar me = matrix.elements;\n\n\t\tfor ( var i = 0; i < 16; i ++ ) {\n\n\t\t\tif ( te[ i ] !== me[ i ] ) return false;\n\n\t\t}\n\n\t\treturn true;\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tfor ( var i = 0; i < 16; i ++ ) {\n\n\t\t\tthis.elements[ i ] = array[ i + offset ];\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tvar te = this.elements;\n\n\t\tarray[ offset ] = te[ 0 ];\n\t\tarray[ offset + 1 ] = te[ 1 ];\n\t\tarray[ offset + 2 ] = te[ 2 ];\n\t\tarray[ offset + 3 ] = te[ 3 ];\n\n\t\tarray[ offset + 4 ] = te[ 4 ];\n\t\tarray[ offset + 5 ] = te[ 5 ];\n\t\tarray[ offset + 6 ] = te[ 6 ];\n\t\tarray[ offset + 7 ] = te[ 7 ];\n\n\t\tarray[ offset + 8 ] = te[ 8 ];\n\t\tarray[ offset + 9 ] = te[ 9 ];\n\t\tarray[ offset + 10 ] = te[ 10 ];\n\t\tarray[ offset + 11 ] = te[ 11 ];\n\n\t\tarray[ offset + 12 ] = te[ 12 ];\n\t\tarray[ offset + 13 ] = te[ 13 ];\n\t\tarray[ offset + 14 ] = te[ 14 ];\n\t\tarray[ offset + 15 ] = te[ 15 ];\n\n\t\treturn array;\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author bhouston / http://clara.io\n */\n\nvar _matrix = new Matrix4();\nvar _quaternion$1 = new Quaternion();\n\nfunction Euler( x, y, z, order ) {\n\n\tthis._x = x || 0;\n\tthis._y = y || 0;\n\tthis._z = z || 0;\n\tthis._order = order || Euler.DefaultOrder;\n\n}\n\nEuler.RotationOrders = [ 'XYZ', 'YZX', 'ZXY', 'XZY', 'YXZ', 'ZYX' ];\n\nEuler.DefaultOrder = 'XYZ';\n\nObject.defineProperties( Euler.prototype, {\n\n\tx: {\n\n\t\tget: function () {\n\n\t\t\treturn this._x;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._x = value;\n\t\t\tthis._onChangeCallback();\n\n\t\t}\n\n\t},\n\n\ty: {\n\n\t\tget: function () {\n\n\t\t\treturn this._y;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._y = value;\n\t\t\tthis._onChangeCallback();\n\n\t\t}\n\n\t},\n\n\tz: {\n\n\t\tget: function () {\n\n\t\t\treturn this._z;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._z = value;\n\t\t\tthis._onChangeCallback();\n\n\t\t}\n\n\t},\n\n\torder: {\n\n\t\tget: function () {\n\n\t\t\treturn this._order;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._order = value;\n\t\t\tthis._onChangeCallback();\n\n\t\t}\n\n\t}\n\n} );\n\nObject.assign( Euler.prototype, {\n\n\tisEuler: true,\n\n\tset: function ( x, y, z, order ) {\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._order = order || this._order;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this._x, this._y, this._z, this._order );\n\n\t},\n\n\tcopy: function ( euler ) {\n\n\t\tthis._x = euler._x;\n\t\tthis._y = euler._y;\n\t\tthis._z = euler._z;\n\t\tthis._order = euler._order;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromRotationMatrix: function ( m, order, update ) {\n\n\t\tvar clamp = MathUtils.clamp;\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tvar te = m.elements;\n\t\tvar m11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ];\n\t\tvar m21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ];\n\t\tvar m31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\n\n\t\torder = order || this._order;\n\n\t\tif ( order === 'XYZ' ) {\n\n\t\t\tthis._y = Math.asin( clamp( m13, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m13 ) < 0.9999999 ) {\n\n\t\t\t\tthis._x = Math.atan2( - m23, m33 );\n\t\t\t\tthis._z = Math.atan2( - m12, m11 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = Math.atan2( m32, m22 );\n\t\t\t\tthis._z = 0;\n\n\t\t\t}\n\n\t\t} else if ( order === 'YXZ' ) {\n\n\t\t\tthis._x = Math.asin( - clamp( m23, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m23 ) < 0.9999999 ) {\n\n\t\t\t\tthis._y = Math.atan2( m13, m33 );\n\t\t\t\tthis._z = Math.atan2( m21, m22 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._y = Math.atan2( - m31, m11 );\n\t\t\t\tthis._z = 0;\n\n\t\t\t}\n\n\t\t} else if ( order === 'ZXY' ) {\n\n\t\t\tthis._x = Math.asin( clamp( m32, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m32 ) < 0.9999999 ) {\n\n\t\t\t\tthis._y = Math.atan2( - m31, m33 );\n\t\t\t\tthis._z = Math.atan2( - m12, m22 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._y = 0;\n\t\t\t\tthis._z = Math.atan2( m21, m11 );\n\n\t\t\t}\n\n\t\t} else if ( order === 'ZYX' ) {\n\n\t\t\tthis._y = Math.asin( - clamp( m31, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m31 ) < 0.9999999 ) {\n\n\t\t\t\tthis._x = Math.atan2( m32, m33 );\n\t\t\t\tthis._z = Math.atan2( m21, m11 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = 0;\n\t\t\t\tthis._z = Math.atan2( - m12, m22 );\n\n\t\t\t}\n\n\t\t} else if ( order === 'YZX' ) {\n\n\t\t\tthis._z = Math.asin( clamp( m21, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m21 ) < 0.9999999 ) {\n\n\t\t\t\tthis._x = Math.atan2( - m23, m22 );\n\t\t\t\tthis._y = Math.atan2( - m31, m11 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = 0;\n\t\t\t\tthis._y = Math.atan2( m13, m33 );\n\n\t\t\t}\n\n\t\t} else if ( order === 'XZY' ) {\n\n\t\t\tthis._z = Math.asin( - clamp( m12, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m12 ) < 0.9999999 ) {\n\n\t\t\t\tthis._x = Math.atan2( m32, m22 );\n\t\t\t\tthis._y = Math.atan2( m13, m11 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = Math.atan2( - m23, m33 );\n\t\t\t\tthis._y = 0;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.Euler: .setFromRotationMatrix() given unsupported order: ' + order );\n\n\t\t}\n\n\t\tthis._order = order;\n\n\t\tif ( update !== false ) this._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromQuaternion: function ( q, order, update ) {\n\n\t\t_matrix.makeRotationFromQuaternion( q );\n\n\t\treturn this.setFromRotationMatrix( _matrix, order, update );\n\n\t},\n\n\tsetFromVector3: function ( v, order ) {\n\n\t\treturn this.set( v.x, v.y, v.z, order || this._order );\n\n\t},\n\n\treorder: function ( newOrder ) {\n\n\t\t// WARNING: this discards revolution information -bhouston\n\n\t\t_quaternion$1.setFromEuler( this );\n\n\t\treturn this.setFromQuaternion( _quaternion$1, newOrder );\n\n\t},\n\n\tequals: function ( euler ) {\n\n\t\treturn ( euler._x === this._x ) && ( euler._y === this._y ) && ( euler._z === this._z ) && ( euler._order === this._order );\n\n\t},\n\n\tfromArray: function ( array ) {\n\n\t\tthis._x = array[ 0 ];\n\t\tthis._y = array[ 1 ];\n\t\tthis._z = array[ 2 ];\n\t\tif ( array[ 3 ] !== undefined ) this._order = array[ 3 ];\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this._x;\n\t\tarray[ offset + 1 ] = this._y;\n\t\tarray[ offset + 2 ] = this._z;\n\t\tarray[ offset + 3 ] = this._order;\n\n\t\treturn array;\n\n\t},\n\n\ttoVector3: function ( optionalResult ) {\n\n\t\tif ( optionalResult ) {\n\n\t\t\treturn optionalResult.set( this._x, this._y, this._z );\n\n\t\t} else {\n\n\t\t\treturn new Vector3( this._x, this._y, this._z );\n\n\t\t}\n\n\t},\n\n\t_onChange: function ( callback ) {\n\n\t\tthis._onChangeCallback = callback;\n\n\t\treturn this;\n\n\t},\n\n\t_onChangeCallback: function () {}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction Layers() {\n\n\tthis.mask = 1 | 0;\n\n}\n\nObject.assign( Layers.prototype, {\n\n\tset: function ( channel ) {\n\n\t\tthis.mask = 1 << channel | 0;\n\n\t},\n\n\tenable: function ( channel ) {\n\n\t\tthis.mask |= 1 << channel | 0;\n\n\t},\n\n\tenableAll: function () {\n\n\t\tthis.mask = 0xffffffff | 0;\n\n\t},\n\n\ttoggle: function ( channel ) {\n\n\t\tthis.mask ^= 1 << channel | 0;\n\n\t},\n\n\tdisable: function ( channel ) {\n\n\t\tthis.mask &= ~ ( 1 << channel | 0 );\n\n\t},\n\n\tdisableAll: function () {\n\n\t\tthis.mask = 0;\n\n\t},\n\n\ttest: function ( layers ) {\n\n\t\treturn ( this.mask & layers.mask ) !== 0;\n\n\t}\n\n} );\n\nvar _object3DId = 0;\n\nvar _v1$1 = new Vector3();\nvar _q1 = new Quaternion();\nvar _m1$1 = new Matrix4();\nvar _target = new Vector3();\n\nvar _position = new Vector3();\nvar _scale = new Vector3();\nvar _quaternion$2 = new Quaternion();\n\nvar _xAxis = new Vector3( 1, 0, 0 );\nvar _yAxis = new Vector3( 0, 1, 0 );\nvar _zAxis = new Vector3( 0, 0, 1 );\n\nvar _addedEvent = { type: 'added' };\nvar _removedEvent = { type: 'removed' };\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author elephantatwork / www.elephantatwork.ch\n */\n\nfunction Object3D() {\n\n\tObject.defineProperty( this, 'id', { value: _object3DId ++ } );\n\n\tthis.uuid = MathUtils.generateUUID();\n\n\tthis.name = '';\n\tthis.type = 'Object3D';\n\n\tthis.parent = null;\n\tthis.children = [];\n\n\tthis.up = Object3D.DefaultUp.clone();\n\n\tvar position = new Vector3();\n\tvar rotation = new Euler();\n\tvar quaternion = new Quaternion();\n\tvar scale = new Vector3( 1, 1, 1 );\n\n\tfunction onRotationChange() {\n\n\t\tquaternion.setFromEuler( rotation, false );\n\n\t}\n\n\tfunction onQuaternionChange() {\n\n\t\trotation.setFromQuaternion( quaternion, undefined, false );\n\n\t}\n\n\trotation._onChange( onRotationChange );\n\tquaternion._onChange( onQuaternionChange );\n\n\tObject.defineProperties( this, {\n\t\tposition: {\n\t\t\tconfigurable: true,\n\t\t\tenumerable: true,\n\t\t\tvalue: position\n\t\t},\n\t\trotation: {\n\t\t\tconfigurable: true,\n\t\t\tenumerable: true,\n\t\t\tvalue: rotation\n\t\t},\n\t\tquaternion: {\n\t\t\tconfigurable: true,\n\t\t\tenumerable: true,\n\t\t\tvalue: quaternion\n\t\t},\n\t\tscale: {\n\t\t\tconfigurable: true,\n\t\t\tenumerable: true,\n\t\t\tvalue: scale\n\t\t},\n\t\tmodelViewMatrix: {\n\t\t\tvalue: new Matrix4()\n\t\t},\n\t\tnormalMatrix: {\n\t\t\tvalue: new Matrix3()\n\t\t}\n\t} );\n\n\tthis.matrix = new Matrix4();\n\tthis.matrixWorld = new Matrix4();\n\n\tthis.matrixAutoUpdate = Object3D.DefaultMatrixAutoUpdate;\n\tthis.matrixWorldNeedsUpdate = false;\n\n\tthis.layers = new Layers();\n\tthis.visible = true;\n\n\tthis.castShadow = false;\n\tthis.receiveShadow = false;\n\n\tthis.frustumCulled = true;\n\tthis.renderOrder = 0;\n\n\tthis.userData = {};\n\n}\n\nObject3D.DefaultUp = new Vector3( 0, 1, 0 );\nObject3D.DefaultMatrixAutoUpdate = true;\n\nObject3D.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: Object3D,\n\n\tisObject3D: true,\n\n\tonBeforeRender: function () {},\n\tonAfterRender: function () {},\n\n\tapplyMatrix4: function ( matrix ) {\n\n\t\tif ( this.matrixAutoUpdate ) this.updateMatrix();\n\n\t\tthis.matrix.premultiply( matrix );\n\n\t\tthis.matrix.decompose( this.position, this.quaternion, this.scale );\n\n\t},\n\n\tapplyQuaternion: function ( q ) {\n\n\t\tthis.quaternion.premultiply( q );\n\n\t\treturn this;\n\n\t},\n\n\tsetRotationFromAxisAngle: function ( axis, angle ) {\n\n\t\t// assumes axis is normalized\n\n\t\tthis.quaternion.setFromAxisAngle( axis, angle );\n\n\t},\n\n\tsetRotationFromEuler: function ( euler ) {\n\n\t\tthis.quaternion.setFromEuler( euler, true );\n\n\t},\n\n\tsetRotationFromMatrix: function ( m ) {\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tthis.quaternion.setFromRotationMatrix( m );\n\n\t},\n\n\tsetRotationFromQuaternion: function ( q ) {\n\n\t\t// assumes q is normalized\n\n\t\tthis.quaternion.copy( q );\n\n\t},\n\n\trotateOnAxis: function ( axis, angle ) {\n\n\t\t// rotate object on axis in object space\n\t\t// axis is assumed to be normalized\n\n\t\t_q1.setFromAxisAngle( axis, angle );\n\n\t\tthis.quaternion.multiply( _q1 );\n\n\t\treturn this;\n\n\t},\n\n\trotateOnWorldAxis: function ( axis, angle ) {\n\n\t\t// rotate object on axis in world space\n\t\t// axis is assumed to be normalized\n\t\t// method assumes no rotated parent\n\n\t\t_q1.setFromAxisAngle( axis, angle );\n\n\t\tthis.quaternion.premultiply( _q1 );\n\n\t\treturn this;\n\n\t},\n\n\trotateX: function ( angle ) {\n\n\t\treturn this.rotateOnAxis( _xAxis, angle );\n\n\t},\n\n\trotateY: function ( angle ) {\n\n\t\treturn this.rotateOnAxis( _yAxis, angle );\n\n\t},\n\n\trotateZ: function ( angle ) {\n\n\t\treturn this.rotateOnAxis( _zAxis, angle );\n\n\t},\n\n\ttranslateOnAxis: function ( axis, distance ) {\n\n\t\t// translate object by distance along axis in object space\n\t\t// axis is assumed to be normalized\n\n\t\t_v1$1.copy( axis ).applyQuaternion( this.quaternion );\n\n\t\tthis.position.add( _v1$1.multiplyScalar( distance ) );\n\n\t\treturn this;\n\n\t},\n\n\ttranslateX: function ( distance ) {\n\n\t\treturn this.translateOnAxis( _xAxis, distance );\n\n\t},\n\n\ttranslateY: function ( distance ) {\n\n\t\treturn this.translateOnAxis( _yAxis, distance );\n\n\t},\n\n\ttranslateZ: function ( distance ) {\n\n\t\treturn this.translateOnAxis( _zAxis, distance );\n\n\t},\n\n\tlocalToWorld: function ( vector ) {\n\n\t\treturn vector.applyMatrix4( this.matrixWorld );\n\n\t},\n\n\tworldToLocal: function ( vector ) {\n\n\t\treturn vector.applyMatrix4( _m1$1.getInverse( this.matrixWorld ) );\n\n\t},\n\n\tlookAt: function ( x, y, z ) {\n\n\t\t// This method does not support objects having non-uniformly-scaled parent(s)\n\n\t\tif ( x.isVector3 ) {\n\n\t\t\t_target.copy( x );\n\n\t\t} else {\n\n\t\t\t_target.set( x, y, z );\n\n\t\t}\n\n\t\tvar parent = this.parent;\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\t_position.setFromMatrixPosition( this.matrixWorld );\n\n\t\tif ( this.isCamera || false ) {\n\n\t\t\t_m1$1.lookAt( _position, _target, this.up );\n\n\t\t} else {\n\n\t\t\t_m1$1.lookAt( _target, _position, this.up );\n\n\t\t}\n\n\t\tthis.quaternion.setFromRotationMatrix( _m1$1 );\n\n\t\tif ( parent ) {\n\n\t\t\t_m1$1.extractRotation( parent.matrixWorld );\n\t\t\t_q1.setFromRotationMatrix( _m1$1 );\n\t\t\tthis.quaternion.premultiply( _q1.inverse() );\n\n\t\t}\n\n\t},\n\n\tadd: function ( object ) {\n\n\t\tif ( arguments.length > 1 ) {\n\n\t\t\tfor ( var i = 0; i < arguments.length; i ++ ) {\n\n\t\t\t\tthis.add( arguments[ i ] );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tif ( object === this ) {\n\n\t\t\tconsole.error( \"THREE.Object3D.add: object can't be added as a child of itself.\", object );\n\t\t\treturn this;\n\n\t\t}\n\n\t\tif ( ( object && object.isObject3D ) ) {\n\n\t\t\tif ( object.parent !== null ) {\n\n\t\t\t\tobject.parent.remove( object );\n\n\t\t\t}\n\n\t\t\tobject.parent = this;\n\t\t\tthis.children.push( object );\n\n\t\t\tobject.dispatchEvent( _addedEvent );\n\n\t\t} else {\n\n\t\t\tconsole.error( \"THREE.Object3D.add: object not an instance of THREE.Object3D.\", object );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tremove: function ( object ) {\n\n\t\tif ( arguments.length > 1 ) {\n\n\t\t\tfor ( var i = 0; i < arguments.length; i ++ ) {\n\n\t\t\t\tthis.remove( arguments[ i ] );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tvar index = this.children.indexOf( object );\n\n\t\tif ( index !== - 1 ) {\n\n\t\t\tobject.parent = null;\n\t\t\tthis.children.splice( index, 1 );\n\n\t\t\tobject.dispatchEvent( _removedEvent );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tattach: function ( object ) {\n\n\t\t// adds object as a child of this, while maintaining the object's world transform\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\t_m1$1.getInverse( this.matrixWorld );\n\n\t\tif ( object.parent !== null ) {\n\n\t\t\tobject.parent.updateWorldMatrix( true, false );\n\n\t\t\t_m1$1.multiply( object.parent.matrixWorld );\n\n\t\t}\n\n\t\tobject.applyMatrix4( _m1$1 );\n\n\t\tobject.updateWorldMatrix( false, false );\n\n\t\tthis.add( object );\n\n\t\treturn this;\n\n\t},\n\n\tgetObjectById: function ( id ) {\n\n\t\treturn this.getObjectByProperty( 'id', id );\n\n\t},\n\n\tgetObjectByName: function ( name ) {\n\n\t\treturn this.getObjectByProperty( 'name', name );\n\n\t},\n\n\tgetObjectByProperty: function ( name, value ) {\n\n\t\tif ( this[ name ] === value ) return this;\n\n\t\tfor ( var i = 0, l = this.children.length; i < l; i ++ ) {\n\n\t\t\tvar child = this.children[ i ];\n\t\t\tvar object = child.getObjectByProperty( name, value );\n\n\t\t\tif ( object !== undefined ) {\n\n\t\t\t\treturn object;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn undefined;\n\n\t},\n\n\tgetWorldPosition: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .getWorldPosition() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\tthis.updateMatrixWorld( true );\n\n\t\treturn target.setFromMatrixPosition( this.matrixWorld );\n\n\t},\n\n\tgetWorldQuaternion: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .getWorldQuaternion() target is now required' );\n\t\t\ttarget = new Quaternion();\n\n\t\t}\n\n\t\tthis.updateMatrixWorld( true );\n\n\t\tthis.matrixWorld.decompose( _position, target, _scale );\n\n\t\treturn target;\n\n\t},\n\n\tgetWorldScale: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .getWorldScale() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\tthis.updateMatrixWorld( true );\n\n\t\tthis.matrixWorld.decompose( _position, _quaternion$2, target );\n\n\t\treturn target;\n\n\t},\n\n\tgetWorldDirection: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .getWorldDirection() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\tthis.updateMatrixWorld( true );\n\n\t\tvar e = this.matrixWorld.elements;\n\n\t\treturn target.set( e[ 8 ], e[ 9 ], e[ 10 ] ).normalize();\n\n\t},\n\n\traycast: function () {},\n\n\ttraverse: function ( callback ) {\n\n\t\tcallback( this );\n\n\t\tvar children = this.children;\n\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tchildren[ i ].traverse( callback );\n\n\t\t}\n\n\t},\n\n\ttraverseVisible: function ( callback ) {\n\n\t\tif ( this.visible === false ) return;\n\n\t\tcallback( this );\n\n\t\tvar children = this.children;\n\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tchildren[ i ].traverseVisible( callback );\n\n\t\t}\n\n\t},\n\n\ttraverseAncestors: function ( callback ) {\n\n\t\tvar parent = this.parent;\n\n\t\tif ( parent !== null ) {\n\n\t\t\tcallback( parent );\n\n\t\t\tparent.traverseAncestors( callback );\n\n\t\t}\n\n\t},\n\n\tupdateMatrix: function () {\n\n\t\tthis.matrix.compose( this.position, this.quaternion, this.scale );\n\n\t\tthis.matrixWorldNeedsUpdate = true;\n\n\t},\n\n\tupdateMatrixWorld: function ( force ) {\n\n\t\tif ( this.matrixAutoUpdate ) this.updateMatrix();\n\n\t\tif ( this.matrixWorldNeedsUpdate || force ) {\n\n\t\t\tif ( this.parent === null ) {\n\n\t\t\t\tthis.matrixWorld.copy( this.matrix );\n\n\t\t\t} else {\n\n\t\t\t\tthis.matrixWorld.multiplyMatrices( this.parent.matrixWorld, this.matrix );\n\n\t\t\t}\n\n\t\t\tthis.matrixWorldNeedsUpdate = false;\n\n\t\t\tforce = true;\n\n\t\t}\n\n\t\t// update children\n\n\t\tvar children = this.children;\n\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tchildren[ i ].updateMatrixWorld( force );\n\n\t\t}\n\n\t},\n\n\tupdateWorldMatrix: function ( updateParents, updateChildren ) {\n\n\t\tvar parent = this.parent;\n\n\t\tif ( updateParents === true && parent !== null ) {\n\n\t\t\tparent.updateWorldMatrix( true, false );\n\n\t\t}\n\n\t\tif ( this.matrixAutoUpdate ) this.updateMatrix();\n\n\t\tif ( this.parent === null ) {\n\n\t\t\tthis.matrixWorld.copy( this.matrix );\n\n\t\t} else {\n\n\t\t\tthis.matrixWorld.multiplyMatrices( this.parent.matrixWorld, this.matrix );\n\n\t\t}\n\n\t\t// update children\n\n\t\tif ( updateChildren === true ) {\n\n\t\t\tvar children = this.children;\n\n\t\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\t\tchildren[ i ].updateWorldMatrix( false, true );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\t// meta is a string when called from JSON.stringify\n\t\tvar isRootObject = ( meta === undefined || typeof meta === 'string' );\n\n\t\tvar output = {};\n\n\t\t// meta is a hash used to collect geometries, materials.\n\t\t// not providing it implies that this is the root object\n\t\t// being serialized.\n\t\tif ( isRootObject ) {\n\n\t\t\t// initialize meta obj\n\t\t\tmeta = {\n\t\t\t\tgeometries: {},\n\t\t\t\tmaterials: {},\n\t\t\t\ttextures: {},\n\t\t\t\timages: {},\n\t\t\t\tshapes: {}\n\t\t\t};\n\n\t\t\toutput.metadata = {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Object',\n\t\t\t\tgenerator: 'Object3D.toJSON'\n\t\t\t};\n\n\t\t}\n\n\t\t// standard Object3D serialization\n\n\t\tvar object = {};\n\n\t\tobject.uuid = this.uuid;\n\t\tobject.type = this.type;\n\n\t\tif ( this.name !== '' ) object.name = this.name;\n\t\tif ( this.castShadow === true ) object.castShadow = true;\n\t\tif ( this.receiveShadow === true ) object.receiveShadow = true;\n\t\tif ( this.visible === false ) object.visible = false;\n\t\tif ( this.frustumCulled === false ) object.frustumCulled = false;\n\t\tif ( this.renderOrder !== 0 ) object.renderOrder = this.renderOrder;\n\t\tif ( JSON.stringify( this.userData ) !== '{}' ) object.userData = this.userData;\n\n\t\tobject.layers = this.layers.mask;\n\t\tobject.matrix = this.matrix.toArray();\n\n\t\tif ( this.matrixAutoUpdate === false ) object.matrixAutoUpdate = false;\n\n\t\t//\n\n\t\tfunction serialize( library, element ) {\n\n\t\t\tif ( library[ element.uuid ] === undefined ) {\n\n\t\t\t\tlibrary[ element.uuid ] = element.toJSON( meta );\n\n\t\t\t}\n\n\t\t\treturn element.uuid;\n\n\t\t}\n\n\t\tif ( this.isMesh || false || false ) {\n\n\t\t\tobject.geometry = serialize( meta.geometries, this.geometry );\n\n\t\t\tvar parameters = this.geometry.parameters;\n\n\t\t\tif ( parameters !== undefined && parameters.shapes !== undefined ) {\n\n\t\t\t\tvar shapes = parameters.shapes;\n\n\t\t\t\tif ( Array.isArray( shapes ) ) {\n\n\t\t\t\t\tfor ( var i = 0, l = shapes.length; i < l; i ++ ) {\n\n\t\t\t\t\t\tvar shape = shapes[ i ];\n\n\t\t\t\t\t\tserialize( meta.shapes, shape );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tserialize( meta.shapes, shapes );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.material !== undefined ) {\n\n\t\t\tif ( Array.isArray( this.material ) ) {\n\n\t\t\t\tvar uuids = [];\n\n\t\t\t\tfor ( var i = 0, l = this.material.length; i < l; i ++ ) {\n\n\t\t\t\t\tuuids.push( serialize( meta.materials, this.material[ i ] ) );\n\n\t\t\t\t}\n\n\t\t\t\tobject.material = uuids;\n\n\t\t\t} else {\n\n\t\t\t\tobject.material = serialize( meta.materials, this.material );\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tif ( this.children.length > 0 ) {\n\n\t\t\tobject.children = [];\n\n\t\t\tfor ( var i = 0; i < this.children.length; i ++ ) {\n\n\t\t\t\tobject.children.push( this.children[ i ].toJSON( meta ).object );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( isRootObject ) {\n\n\t\t\tvar geometries = extractFromCache( meta.geometries );\n\t\t\tvar materials = extractFromCache( meta.materials );\n\t\t\tvar textures = extractFromCache( meta.textures );\n\t\t\tvar images = extractFromCache( meta.images );\n\t\t\tvar shapes = extractFromCache( meta.shapes );\n\n\t\t\tif ( geometries.length > 0 ) output.geometries = geometries;\n\t\t\tif ( materials.length > 0 ) output.materials = materials;\n\t\t\tif ( textures.length > 0 ) output.textures = textures;\n\t\t\tif ( images.length > 0 ) output.images = images;\n\t\t\tif ( shapes.length > 0 ) output.shapes = shapes;\n\n\t\t}\n\n\t\toutput.object = object;\n\n\t\treturn output;\n\n\t\t// extract data from the cache hash\n\t\t// remove metadata on each item\n\t\t// and return as array\n\t\tfunction extractFromCache( cache ) {\n\n\t\t\tvar values = [];\n\t\t\tfor ( var key in cache ) {\n\n\t\t\t\tvar data = cache[ key ];\n\t\t\t\tdelete data.metadata;\n\t\t\t\tvalues.push( data );\n\n\t\t\t}\n\t\t\treturn values;\n\n\t\t}\n\n\t},\n\n\tclone: function ( recursive ) {\n\n\t\treturn new this.constructor().copy( this, recursive );\n\n\t},\n\n\tcopy: function ( source, recursive ) {\n\n\t\tif ( recursive === undefined ) recursive = true;\n\n\t\tthis.name = source.name;\n\n\t\tthis.up.copy( source.up );\n\n\t\tthis.position.copy( source.position );\n\t\tthis.quaternion.copy( source.quaternion );\n\t\tthis.scale.copy( source.scale );\n\n\t\tthis.matrix.copy( source.matrix );\n\t\tthis.matrixWorld.copy( source.matrixWorld );\n\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\n\t\tthis.matrixWorldNeedsUpdate = source.matrixWorldNeedsUpdate;\n\n\t\tthis.layers.mask = source.layers.mask;\n\t\tthis.visible = source.visible;\n\n\t\tthis.castShadow = source.castShadow;\n\t\tthis.receiveShadow = source.receiveShadow;\n\n\t\tthis.frustumCulled = source.frustumCulled;\n\t\tthis.renderOrder = source.renderOrder;\n\n\t\tthis.userData = JSON.parse( JSON.stringify( source.userData ) );\n\n\t\tif ( recursive === true ) {\n\n\t\t\tfor ( var i = 0; i < source.children.length; i ++ ) {\n\n\t\t\t\tvar child = source.children[ i ];\n\t\t\t\tthis.add( child.clone() );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction Scene() {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Scene';\n\n\tthis.background = null;\n\tthis.environment = null;\n\tthis.fog = null;\n\n\tthis.overrideMaterial = null;\n\n\tthis.autoUpdate = true; // checked by the renderer\n\n\tif ( typeof __THREE_DEVTOOLS__ !== 'undefined' ) {\n\n\t\t__THREE_DEVTOOLS__.dispatchEvent( new CustomEvent( 'observe', { detail: this } ) ); // eslint-disable-line no-undef\n\n\t}\n\n}\n\nScene.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Scene,\n\n\tisScene: true,\n\n\tcopy: function ( source, recursive ) {\n\n\t\tObject3D.prototype.copy.call( this, source, recursive );\n\n\t\tif ( source.background !== null ) this.background = source.background.clone();\n\t\tif ( source.environment !== null ) this.environment = source.environment.clone();\n\t\tif ( source.fog !== null ) this.fog = source.fog.clone();\n\n\t\tif ( source.overrideMaterial !== null ) this.overrideMaterial = source.overrideMaterial.clone();\n\n\t\tthis.autoUpdate = source.autoUpdate;\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tvar data = Object3D.prototype.toJSON.call( this, meta );\n\n\t\tif ( this.background !== null ) data.object.background = this.background.toJSON( meta );\n\t\tif ( this.environment !== null ) data.object.environment = this.environment.toJSON( meta );\n\t\tif ( this.fog !== null ) data.object.fog = this.fog.toJSON();\n\n\t\treturn data;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n} );\n\nvar _points = [\n\tnew Vector3(),\n\tnew Vector3(),\n\tnew Vector3(),\n\tnew Vector3(),\n\tnew Vector3(),\n\tnew Vector3(),\n\tnew Vector3(),\n\tnew Vector3()\n];\n\nvar _vector$1 = new Vector3();\n\nvar _box = new Box3();\n\n// triangle centered vertices\n\nvar _v0 = new Vector3();\nvar _v1$2 = new Vector3();\nvar _v2 = new Vector3();\n\n// triangle edge vectors\n\nvar _f0 = new Vector3();\nvar _f1 = new Vector3();\nvar _f2 = new Vector3();\n\nvar _center = new Vector3();\nvar _extents = new Vector3();\nvar _triangleNormal = new Vector3();\nvar _testAxis = new Vector3();\n\n/**\n * @author bhouston / http://clara.io\n * @author WestLangley / http://github.com/WestLangley\n */\n\nfunction Box3( min, max ) {\n\n\tthis.min = ( min !== undefined ) ? min : new Vector3( + Infinity, + Infinity, + Infinity );\n\tthis.max = ( max !== undefined ) ? max : new Vector3( - Infinity, - Infinity, - Infinity );\n\n}\n\n\nObject.assign( Box3.prototype, {\n\n\tisBox3: true,\n\n\tset: function ( min, max ) {\n\n\t\tthis.min.copy( min );\n\t\tthis.max.copy( max );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromArray: function ( array ) {\n\n\t\tvar minX = + Infinity;\n\t\tvar minY = + Infinity;\n\t\tvar minZ = + Infinity;\n\n\t\tvar maxX = - Infinity;\n\t\tvar maxY = - Infinity;\n\t\tvar maxZ = - Infinity;\n\n\t\tfor ( var i = 0, l = array.length; i < l; i += 3 ) {\n\n\t\t\tvar x = array[ i ];\n\t\t\tvar y = array[ i + 1 ];\n\t\t\tvar z = array[ i + 2 ];\n\n\t\t\tif ( x < minX ) minX = x;\n\t\t\tif ( y < minY ) minY = y;\n\t\t\tif ( z < minZ ) minZ = z;\n\n\t\t\tif ( x > maxX ) maxX = x;\n\t\t\tif ( y > maxY ) maxY = y;\n\t\t\tif ( z > maxZ ) maxZ = z;\n\n\t\t}\n\n\t\tthis.min.set( minX, minY, minZ );\n\t\tthis.max.set( maxX, maxY, maxZ );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromBufferAttribute: function ( attribute ) {\n\n\t\tvar minX = + Infinity;\n\t\tvar minY = + Infinity;\n\t\tvar minZ = + Infinity;\n\n\t\tvar maxX = - Infinity;\n\t\tvar maxY = - Infinity;\n\t\tvar maxZ = - Infinity;\n\n\t\tfor ( var i = 0, l = attribute.count; i < l; i ++ ) {\n\n\t\t\tvar x = attribute.getX( i );\n\t\t\tvar y = attribute.getY( i );\n\t\t\tvar z = attribute.getZ( i );\n\n\t\t\tif ( x < minX ) minX = x;\n\t\t\tif ( y < minY ) minY = y;\n\t\t\tif ( z < minZ ) minZ = z;\n\n\t\t\tif ( x > maxX ) maxX = x;\n\t\t\tif ( y > maxY ) maxY = y;\n\t\t\tif ( z > maxZ ) maxZ = z;\n\n\t\t}\n\n\t\tthis.min.set( minX, minY, minZ );\n\t\tthis.max.set( maxX, maxY, maxZ );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromPoints: function ( points ) {\n\n\t\tthis.makeEmpty();\n\n\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\n\n\t\t\tthis.expandByPoint( points[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetFromCenterAndSize: function ( center, size ) {\n\n\t\tvar halfSize = _vector$1.copy( size ).multiplyScalar( 0.5 );\n\n\t\tthis.min.copy( center ).sub( halfSize );\n\t\tthis.max.copy( center ).add( halfSize );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromObject: function ( object ) {\n\n\t\tthis.makeEmpty();\n\n\t\treturn this.expandByObject( object );\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( box ) {\n\n\t\tthis.min.copy( box.min );\n\t\tthis.max.copy( box.max );\n\n\t\treturn this;\n\n\t},\n\n\tmakeEmpty: function () {\n\n\t\tthis.min.x = this.min.y = this.min.z = + Infinity;\n\t\tthis.max.x = this.max.y = this.max.z = - Infinity;\n\n\t\treturn this;\n\n\t},\n\n\tisEmpty: function () {\n\n\t\t// this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\n\n\t\treturn ( this.max.x < this.min.x ) || ( this.max.y < this.min.y ) || ( this.max.z < this.min.z );\n\n\t},\n\n\tgetCenter: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Box3: .getCenter() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn this.isEmpty() ? target.set( 0, 0, 0 ) : target.addVectors( this.min, this.max ).multiplyScalar( 0.5 );\n\n\t},\n\n\tgetSize: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Box3: .getSize() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn this.isEmpty() ? target.set( 0, 0, 0 ) : target.subVectors( this.max, this.min );\n\n\t},\n\n\texpandByPoint: function ( point ) {\n\n\t\tthis.min.min( point );\n\t\tthis.max.max( point );\n\n\t\treturn this;\n\n\t},\n\n\texpandByVector: function ( vector ) {\n\n\t\tthis.min.sub( vector );\n\t\tthis.max.add( vector );\n\n\t\treturn this;\n\n\t},\n\n\texpandByScalar: function ( scalar ) {\n\n\t\tthis.min.addScalar( - scalar );\n\t\tthis.max.addScalar( scalar );\n\n\t\treturn this;\n\n\t},\n\n\texpandByObject: function ( object ) {\n\n\t\t// Computes the world-axis-aligned bounding box of an object (including its children),\n\t\t// accounting for both the object's, and children's, world transforms\n\n\t\tobject.updateWorldMatrix( false, false );\n\n\t\tvar geometry = object.geometry;\n\n\t\tif ( geometry !== undefined ) {\n\n\t\t\tif ( geometry.boundingBox === null ) {\n\n\t\t\t\tgeometry.computeBoundingBox();\n\n\t\t\t}\n\n\t\t\t_box.copy( geometry.boundingBox );\n\t\t\t_box.applyMatrix4( object.matrixWorld );\n\n\t\t\tthis.union( _box );\n\n\t\t}\n\n\t\tvar children = object.children;\n\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tthis.expandByObject( children[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcontainsPoint: function ( point ) {\n\n\t\treturn point.x < this.min.x || point.x > this.max.x ||\n\t\t\tpoint.y < this.min.y || point.y > this.max.y ||\n\t\t\tpoint.z < this.min.z || point.z > this.max.z ? false : true;\n\n\t},\n\n\tcontainsBox: function ( box ) {\n\n\t\treturn this.min.x <= box.min.x && box.max.x <= this.max.x &&\n\t\t\tthis.min.y <= box.min.y && box.max.y <= this.max.y &&\n\t\t\tthis.min.z <= box.min.z && box.max.z <= this.max.z;\n\n\t},\n\n\tgetParameter: function ( point, target ) {\n\n\t\t// This can potentially have a divide by zero if the box\n\t\t// has a size dimension of 0.\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Box3: .getParameter() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.set(\n\t\t\t( point.x - this.min.x ) / ( this.max.x - this.min.x ),\n\t\t\t( point.y - this.min.y ) / ( this.max.y - this.min.y ),\n\t\t\t( point.z - this.min.z ) / ( this.max.z - this.min.z )\n\t\t);\n\n\t},\n\n\tintersectsBox: function ( box ) {\n\n\t\t// using 6 splitting planes to rule out intersections.\n\t\treturn box.max.x < this.min.x || box.min.x > this.max.x ||\n\t\t\tbox.max.y < this.min.y || box.min.y > this.max.y ||\n\t\t\tbox.max.z < this.min.z || box.min.z > this.max.z ? false : true;\n\n\t},\n\n\tintersectsSphere: function ( sphere ) {\n\n\t\t// Find the point on the AABB closest to the sphere center.\n\t\tthis.clampPoint( sphere.center, _vector$1 );\n\n\t\t// If that point is inside the sphere, the AABB and sphere intersect.\n\t\treturn _vector$1.distanceToSquared( sphere.center ) <= ( sphere.radius * sphere.radius );\n\n\t},\n\n\tintersectsPlane: function ( plane ) {\n\n\t\t// We compute the minimum and maximum dot product values. If those values\n\t\t// are on the same side (back or front) of the plane, then there is no intersection.\n\n\t\tvar min, max;\n\n\t\tif ( plane.normal.x > 0 ) {\n\n\t\t\tmin = plane.normal.x * this.min.x;\n\t\t\tmax = plane.normal.x * this.max.x;\n\n\t\t} else {\n\n\t\t\tmin = plane.normal.x * this.max.x;\n\t\t\tmax = plane.normal.x * this.min.x;\n\n\t\t}\n\n\t\tif ( plane.normal.y > 0 ) {\n\n\t\t\tmin += plane.normal.y * this.min.y;\n\t\t\tmax += plane.normal.y * this.max.y;\n\n\t\t} else {\n\n\t\t\tmin += plane.normal.y * this.max.y;\n\t\t\tmax += plane.normal.y * this.min.y;\n\n\t\t}\n\n\t\tif ( plane.normal.z > 0 ) {\n\n\t\t\tmin += plane.normal.z * this.min.z;\n\t\t\tmax += plane.normal.z * this.max.z;\n\n\t\t} else {\n\n\t\t\tmin += plane.normal.z * this.max.z;\n\t\t\tmax += plane.normal.z * this.min.z;\n\n\t\t}\n\n\t\treturn ( min <= - plane.constant && max >= - plane.constant );\n\n\t},\n\n\tintersectsTriangle: function ( triangle ) {\n\n\t\tif ( this.isEmpty() ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\t// compute box center and extents\n\t\tthis.getCenter( _center );\n\t\t_extents.subVectors( this.max, _center );\n\n\t\t// translate triangle to aabb origin\n\t\t_v0.subVectors( triangle.a, _center );\n\t\t_v1$2.subVectors( triangle.b, _center );\n\t\t_v2.subVectors( triangle.c, _center );\n\n\t\t// compute edge vectors for triangle\n\t\t_f0.subVectors( _v1$2, _v0 );\n\t\t_f1.subVectors( _v2, _v1$2 );\n\t\t_f2.subVectors( _v0, _v2 );\n\n\t\t// test against axes that are given by cross product combinations of the edges of the triangle and the edges of the aabb\n\t\t// make an axis testing of each of the 3 sides of the aabb against each of the 3 sides of the triangle = 9 axis of separation\n\t\t// axis_ij = u_i x f_j (u0, u1, u2 = face normals of aabb = x,y,z axes vectors since aabb is axis aligned)\n\t\tvar axes = [\n\t\t\t0, - _f0.z, _f0.y, 0, - _f1.z, _f1.y, 0, - _f2.z, _f2.y,\n\t\t\t_f0.z, 0, - _f0.x, _f1.z, 0, - _f1.x, _f2.z, 0, - _f2.x,\n\t\t\t- _f0.y, _f0.x, 0, - _f1.y, _f1.x, 0, - _f2.y, _f2.x, 0\n\t\t];\n\t\tif ( ! satForAxes( axes, _v0, _v1$2, _v2, _extents ) ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\t// test 3 face normals from the aabb\n\t\taxes = [ 1, 0, 0, 0, 1, 0, 0, 0, 1 ];\n\t\tif ( ! satForAxes( axes, _v0, _v1$2, _v2, _extents ) ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\t// finally testing the face normal of the triangle\n\t\t// use already existing triangle edge vectors here\n\t\t_triangleNormal.crossVectors( _f0, _f1 );\n\t\taxes = [ _triangleNormal.x, _triangleNormal.y, _triangleNormal.z ];\n\n\t\treturn satForAxes( axes, _v0, _v1$2, _v2, _extents );\n\n\t},\n\n\tclampPoint: function ( point, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Box3: .clampPoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.copy( point ).clamp( this.min, this.max );\n\n\t},\n\n\tdistanceToPoint: function ( point ) {\n\n\t\tvar clampedPoint = _vector$1.copy( point ).clamp( this.min, this.max );\n\n\t\treturn clampedPoint.sub( point ).length();\n\n\t},\n\n\tgetBoundingSphere: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.error( 'THREE.Box3: .getBoundingSphere() target is now required' );\n\t\t\t//target = new Sphere(); // removed to avoid cyclic dependency\n\n\t\t}\n\n\t\tthis.getCenter( target.center );\n\n\t\ttarget.radius = this.getSize( _vector$1 ).length() * 0.5;\n\n\t\treturn target;\n\n\t},\n\n\tintersect: function ( box ) {\n\n\t\tthis.min.max( box.min );\n\t\tthis.max.min( box.max );\n\n\t\t// ensure that if there is no overlap, the result is fully empty, not slightly empty with non-inf/+inf values that will cause subsequence intersects to erroneously return valid values.\n\t\tif ( this.isEmpty() ) this.makeEmpty();\n\n\t\treturn this;\n\n\t},\n\n\tunion: function ( box ) {\n\n\t\tthis.min.min( box.min );\n\t\tthis.max.max( box.max );\n\n\t\treturn this;\n\n\t},\n\n\tapplyMatrix4: function ( matrix ) {\n\n\t\t// transform of empty box is an empty box.\n\t\tif ( this.isEmpty() ) return this;\n\n\t\t// NOTE: I am using a binary pattern to specify all 2^3 combinations below\n\t\t_points[ 0 ].set( this.min.x, this.min.y, this.min.z ).applyMatrix4( matrix ); // 000\n\t\t_points[ 1 ].set( this.min.x, this.min.y, this.max.z ).applyMatrix4( matrix ); // 001\n\t\t_points[ 2 ].set( this.min.x, this.max.y, this.min.z ).applyMatrix4( matrix ); // 010\n\t\t_points[ 3 ].set( this.min.x, this.max.y, this.max.z ).applyMatrix4( matrix ); // 011\n\t\t_points[ 4 ].set( this.max.x, this.min.y, this.min.z ).applyMatrix4( matrix ); // 100\n\t\t_points[ 5 ].set( this.max.x, this.min.y, this.max.z ).applyMatrix4( matrix ); // 101\n\t\t_points[ 6 ].set( this.max.x, this.max.y, this.min.z ).applyMatrix4( matrix ); // 110\n\t\t_points[ 7 ].set( this.max.x, this.max.y, this.max.z ).applyMatrix4( matrix ); // 111\n\n\t\tthis.setFromPoints( _points );\n\n\t\treturn this;\n\n\t},\n\n\ttranslate: function ( offset ) {\n\n\t\tthis.min.add( offset );\n\t\tthis.max.add( offset );\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( box ) {\n\n\t\treturn box.min.equals( this.min ) && box.max.equals( this.max );\n\n\t}\n\n} );\n\nfunction satForAxes( axes, v0, v1, v2, extents ) {\n\n\tvar i, j;\n\n\tfor ( i = 0, j = axes.length - 3; i <= j; i += 3 ) {\n\n\t\t_testAxis.fromArray( axes, i );\n\t\t// project the aabb onto the seperating axis\n\t\tvar r = extents.x * Math.abs( _testAxis.x ) + extents.y * Math.abs( _testAxis.y ) + extents.z * Math.abs( _testAxis.z );\n\t\t// project all 3 vertices of the triangle onto the seperating axis\n\t\tvar p0 = v0.dot( _testAxis );\n\t\tvar p1 = v1.dot( _testAxis );\n\t\tvar p2 = v2.dot( _testAxis );\n\t\t// actual test, basically see if either of the most extreme of the triangle points intersects r\n\t\tif ( Math.max( - Math.max( p0, p1, p2 ), Math.min( p0, p1, p2 ) ) > r ) {\n\n\t\t\t// points of the projected triangle are outside the projected half-length of the aabb\n\t\t\t// the axis is seperating and we can exit\n\t\t\treturn false;\n\n\t\t}\n\n\t}\n\n\treturn true;\n\n}\n\nvar _box$1 = new Box3();\n\n/**\n * @author bhouston / http://clara.io\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction Sphere( center, radius ) {\n\n\tthis.center = ( center !== undefined ) ? center : new Vector3();\n\tthis.radius = ( radius !== undefined ) ? radius : 0;\n\n}\n\nObject.assign( Sphere.prototype, {\n\n\tset: function ( center, radius ) {\n\n\t\tthis.center.copy( center );\n\t\tthis.radius = radius;\n\n\t\treturn this;\n\n\t},\n\n\tsetFromPoints: function ( points, optionalCenter ) {\n\n\t\tvar center = this.center;\n\n\t\tif ( optionalCenter !== undefined ) {\n\n\t\t\tcenter.copy( optionalCenter );\n\n\t\t} else {\n\n\t\t\t_box$1.setFromPoints( points ).getCenter( center );\n\n\t\t}\n\n\t\tvar maxRadiusSq = 0;\n\n\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\n\n\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( points[ i ] ) );\n\n\t\t}\n\n\t\tthis.radius = Math.sqrt( maxRadiusSq );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( sphere ) {\n\n\t\tthis.center.copy( sphere.center );\n\t\tthis.radius = sphere.radius;\n\n\t\treturn this;\n\n\t},\n\n\tempty: function () {\n\n\t\treturn ( this.radius <= 0 );\n\n\t},\n\n\tcontainsPoint: function ( point ) {\n\n\t\treturn ( point.distanceToSquared( this.center ) <= ( this.radius * this.radius ) );\n\n\t},\n\n\tdistanceToPoint: function ( point ) {\n\n\t\treturn ( point.distanceTo( this.center ) - this.radius );\n\n\t},\n\n\tintersectsSphere: function ( sphere ) {\n\n\t\tvar radiusSum = this.radius + sphere.radius;\n\n\t\treturn sphere.center.distanceToSquared( this.center ) <= ( radiusSum * radiusSum );\n\n\t},\n\n\tintersectsBox: function ( box ) {\n\n\t\treturn box.intersectsSphere( this );\n\n\t},\n\n\tintersectsPlane: function ( plane ) {\n\n\t\treturn Math.abs( plane.distanceToPoint( this.center ) ) <= this.radius;\n\n\t},\n\n\tclampPoint: function ( point, target ) {\n\n\t\tvar deltaLengthSq = this.center.distanceToSquared( point );\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Sphere: .clampPoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\ttarget.copy( point );\n\n\t\tif ( deltaLengthSq > ( this.radius * this.radius ) ) {\n\n\t\t\ttarget.sub( this.center ).normalize();\n\t\t\ttarget.multiplyScalar( this.radius ).add( this.center );\n\n\t\t}\n\n\t\treturn target;\n\n\t},\n\n\tgetBoundingBox: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Sphere: .getBoundingBox() target is now required' );\n\t\t\ttarget = new Box3();\n\n\t\t}\n\n\t\ttarget.set( this.center, this.center );\n\t\ttarget.expandByScalar( this.radius );\n\n\t\treturn target;\n\n\t},\n\n\tapplyMatrix4: function ( matrix ) {\n\n\t\tthis.center.applyMatrix4( matrix );\n\t\tthis.radius = this.radius * matrix.getMaxScaleOnAxis();\n\n\t\treturn this;\n\n\t},\n\n\ttranslate: function ( offset ) {\n\n\t\tthis.center.add( offset );\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( sphere ) {\n\n\t\treturn sphere.center.equals( this.center ) && ( sphere.radius === this.radius );\n\n\t}\n\n} );\n\nfunction Ray() {}\n\n/**\n * @author bhouston / http://clara.io\n */\n\nvar _vector1 = new Vector3();\nvar _vector2 = new Vector3();\nvar _normalMatrix = new Matrix3();\n\nfunction Plane( normal, constant ) {\n\n\t// normal is assumed to be normalized\n\n\tthis.normal = ( normal !== undefined ) ? normal : new Vector3( 1, 0, 0 );\n\tthis.constant = ( constant !== undefined ) ? constant : 0;\n\n}\n\nObject.assign( Plane.prototype, {\n\n\tisPlane: true,\n\n\tset: function ( normal, constant ) {\n\n\t\tthis.normal.copy( normal );\n\t\tthis.constant = constant;\n\n\t\treturn this;\n\n\t},\n\n\tsetComponents: function ( x, y, z, w ) {\n\n\t\tthis.normal.set( x, y, z );\n\t\tthis.constant = w;\n\n\t\treturn this;\n\n\t},\n\n\tsetFromNormalAndCoplanarPoint: function ( normal, point ) {\n\n\t\tthis.normal.copy( normal );\n\t\tthis.constant = - point.dot( this.normal );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromCoplanarPoints: function ( a, b, c ) {\n\n\t\tvar normal = _vector1.subVectors( c, b ).cross( _vector2.subVectors( a, b ) ).normalize();\n\n\t\t// Q: should an error be thrown if normal is zero (e.g. degenerate plane)?\n\n\t\tthis.setFromNormalAndCoplanarPoint( normal, a );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( plane ) {\n\n\t\tthis.normal.copy( plane.normal );\n\t\tthis.constant = plane.constant;\n\n\t\treturn this;\n\n\t},\n\n\tnormalize: function () {\n\n\t\t// Note: will lead to a divide by zero if the plane is invalid.\n\n\t\tvar inverseNormalLength = 1.0 / this.normal.length();\n\t\tthis.normal.multiplyScalar( inverseNormalLength );\n\t\tthis.constant *= inverseNormalLength;\n\n\t\treturn this;\n\n\t},\n\n\tnegate: function () {\n\n\t\tthis.constant *= - 1;\n\t\tthis.normal.negate();\n\n\t\treturn this;\n\n\t},\n\n\tdistanceToPoint: function ( point ) {\n\n\t\treturn this.normal.dot( point ) + this.constant;\n\n\t},\n\n\tdistanceToSphere: function ( sphere ) {\n\n\t\treturn this.distanceToPoint( sphere.center ) - sphere.radius;\n\n\t},\n\n\tprojectPoint: function ( point, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Plane: .projectPoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.copy( this.normal ).multiplyScalar( - this.distanceToPoint( point ) ).add( point );\n\n\t},\n\n\tintersectLine: function ( line, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Plane: .intersectLine() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\tvar direction = line.delta( _vector1 );\n\n\t\tvar denominator = this.normal.dot( direction );\n\n\t\tif ( denominator === 0 ) {\n\n\t\t\t// line is coplanar, return origin\n\t\t\tif ( this.distanceToPoint( line.start ) === 0 ) {\n\n\t\t\t\treturn target.copy( line.start );\n\n\t\t\t}\n\n\t\t\t// Unsure if this is the correct method to handle this case.\n\t\t\treturn undefined;\n\n\t\t}\n\n\t\tvar t = - ( line.start.dot( this.normal ) + this.constant ) / denominator;\n\n\t\tif ( t < 0 || t > 1 ) {\n\n\t\t\treturn undefined;\n\n\t\t}\n\n\t\treturn target.copy( direction ).multiplyScalar( t ).add( line.start );\n\n\t},\n\n\tintersectsLine: function ( line ) {\n\n\t\t// Note: this tests if a line intersects the plane, not whether it (or its end-points) are coplanar with it.\n\n\t\tvar startSign = this.distanceToPoint( line.start );\n\t\tvar endSign = this.distanceToPoint( line.end );\n\n\t\treturn ( startSign < 0 && endSign > 0 ) || ( endSign < 0 && startSign > 0 );\n\n\t},\n\n\tintersectsBox: function ( box ) {\n\n\t\treturn box.intersectsPlane( this );\n\n\t},\n\n\tintersectsSphere: function ( sphere ) {\n\n\t\treturn sphere.intersectsPlane( this );\n\n\t},\n\n\tcoplanarPoint: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Plane: .coplanarPoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.copy( this.normal ).multiplyScalar( - this.constant );\n\n\t},\n\n\tapplyMatrix4: function ( matrix, optionalNormalMatrix ) {\n\n\t\tvar normalMatrix = optionalNormalMatrix || _normalMatrix.getNormalMatrix( matrix );\n\n\t\tvar referencePoint = this.coplanarPoint( _vector1 ).applyMatrix4( matrix );\n\n\t\tvar normal = this.normal.applyMatrix3( normalMatrix ).normalize();\n\n\t\tthis.constant = - referencePoint.dot( normal );\n\n\t\treturn this;\n\n\t},\n\n\ttranslate: function ( offset ) {\n\n\t\tthis.constant -= offset.dot( this.normal );\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( plane ) {\n\n\t\treturn plane.normal.equals( this.normal ) && ( plane.constant === this.constant );\n\n\t}\n\n} );\n\n/**\n * @author bhouston / http://clara.io\n * @author mrdoob / http://mrdoob.com/\n */\n\nvar _v0$1 = new Vector3();\nvar _v1$3 = new Vector3();\nvar _v2$1 = new Vector3();\nvar _v3 = new Vector3();\n\nvar _vab = new Vector3();\nvar _vac = new Vector3();\nvar _vbc = new Vector3();\nvar _vap = new Vector3();\nvar _vbp = new Vector3();\nvar _vcp = new Vector3();\n\nfunction Triangle( a, b, c ) {\n\n\tthis.a = ( a !== undefined ) ? a : new Vector3();\n\tthis.b = ( b !== undefined ) ? b : new Vector3();\n\tthis.c = ( c !== undefined ) ? c : new Vector3();\n\n}\n\nObject.assign( Triangle, {\n\n\tgetNormal: function ( a, b, c, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Triangle: .getNormal() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\ttarget.subVectors( c, b );\n\t\t_v0$1.subVectors( a, b );\n\t\ttarget.cross( _v0$1 );\n\n\t\tvar targetLengthSq = target.lengthSq();\n\t\tif ( targetLengthSq > 0 ) {\n\n\t\t\treturn target.multiplyScalar( 1 / Math.sqrt( targetLengthSq ) );\n\n\t\t}\n\n\t\treturn target.set( 0, 0, 0 );\n\n\t},\n\n\t// static/instance method to calculate barycentric coordinates\n\t// based on: http://www.blackpawn.com/texts/pointinpoly/default.html\n\tgetBarycoord: function ( point, a, b, c, target ) {\n\n\t\t_v0$1.subVectors( c, a );\n\t\t_v1$3.subVectors( b, a );\n\t\t_v2$1.subVectors( point, a );\n\n\t\tvar dot00 = _v0$1.dot( _v0$1 );\n\t\tvar dot01 = _v0$1.dot( _v1$3 );\n\t\tvar dot02 = _v0$1.dot( _v2$1 );\n\t\tvar dot11 = _v1$3.dot( _v1$3 );\n\t\tvar dot12 = _v1$3.dot( _v2$1 );\n\n\t\tvar denom = ( dot00 * dot11 - dot01 * dot01 );\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Triangle: .getBarycoord() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\t// collinear or singular triangle\n\t\tif ( denom === 0 ) {\n\n\t\t\t// arbitrary location outside of triangle?\n\t\t\t// not sure if this is the best idea, maybe should be returning undefined\n\t\t\treturn target.set( - 2, - 1, - 1 );\n\n\t\t}\n\n\t\tvar invDenom = 1 / denom;\n\t\tvar u = ( dot11 * dot02 - dot01 * dot12 ) * invDenom;\n\t\tvar v = ( dot00 * dot12 - dot01 * dot02 ) * invDenom;\n\n\t\t// barycentric coordinates must always sum to 1\n\t\treturn target.set( 1 - u - v, v, u );\n\n\t},\n\n\tcontainsPoint: function ( point, a, b, c ) {\n\n\t\tTriangle.getBarycoord( point, a, b, c, _v3 );\n\n\t\treturn ( _v3.x >= 0 ) && ( _v3.y >= 0 ) && ( ( _v3.x + _v3.y ) <= 1 );\n\n\t},\n\n\tgetUV: function ( point, p1, p2, p3, uv1, uv2, uv3, target ) {\n\n\t\tthis.getBarycoord( point, p1, p2, p3, _v3 );\n\n\t\ttarget.set( 0, 0 );\n\t\ttarget.addScaledVector( uv1, _v3.x );\n\t\ttarget.addScaledVector( uv2, _v3.y );\n\t\ttarget.addScaledVector( uv3, _v3.z );\n\n\t\treturn target;\n\n\t},\n\n\tisFrontFacing: function ( a, b, c, direction ) {\n\n\t\t_v0$1.subVectors( c, b );\n\t\t_v1$3.subVectors( a, b );\n\n\t\t// strictly front facing\n\t\treturn ( _v0$1.cross( _v1$3 ).dot( direction ) < 0 ) ? true : false;\n\n\t}\n\n} );\n\nObject.assign( Triangle.prototype, {\n\n\tset: function ( a, b, c ) {\n\n\t\tthis.a.copy( a );\n\t\tthis.b.copy( b );\n\t\tthis.c.copy( c );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromPointsAndIndices: function ( points, i0, i1, i2 ) {\n\n\t\tthis.a.copy( points[ i0 ] );\n\t\tthis.b.copy( points[ i1 ] );\n\t\tthis.c.copy( points[ i2 ] );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( triangle ) {\n\n\t\tthis.a.copy( triangle.a );\n\t\tthis.b.copy( triangle.b );\n\t\tthis.c.copy( triangle.c );\n\n\t\treturn this;\n\n\t},\n\n\tgetArea: function () {\n\n\t\t_v0$1.subVectors( this.c, this.b );\n\t\t_v1$3.subVectors( this.a, this.b );\n\n\t\treturn _v0$1.cross( _v1$3 ).length() * 0.5;\n\n\t},\n\n\tgetMidpoint: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Triangle: .getMidpoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.addVectors( this.a, this.b ).add( this.c ).multiplyScalar( 1 / 3 );\n\n\t},\n\n\tgetNormal: function ( target ) {\n\n\t\treturn Triangle.getNormal( this.a, this.b, this.c, target );\n\n\t},\n\n\tgetPlane: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Triangle: .getPlane() target is now required' );\n\t\t\ttarget = new Plane();\n\n\t\t}\n\n\t\treturn target.setFromCoplanarPoints( this.a, this.b, this.c );\n\n\t},\n\n\tgetBarycoord: function ( point, target ) {\n\n\t\treturn Triangle.getBarycoord( point, this.a, this.b, this.c, target );\n\n\t},\n\n\tgetUV: function ( point, uv1, uv2, uv3, target ) {\n\n\t\treturn Triangle.getUV( point, this.a, this.b, this.c, uv1, uv2, uv3, target );\n\n\t},\n\n\tcontainsPoint: function ( point ) {\n\n\t\treturn Triangle.containsPoint( point, this.a, this.b, this.c );\n\n\t},\n\n\tisFrontFacing: function ( direction ) {\n\n\t\treturn Triangle.isFrontFacing( this.a, this.b, this.c, direction );\n\n\t},\n\n\tintersectsBox: function ( box ) {\n\n\t\treturn box.intersectsTriangle( this );\n\n\t},\n\n\tclosestPointToPoint: function ( p, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Triangle: .closestPointToPoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\tvar a = this.a, b = this.b, c = this.c;\n\t\tvar v, w;\n\n\t\t// algorithm thanks to Real-Time Collision Detection by Christer Ericson,\n\t\t// published by Morgan Kaufmann Publishers, (c) 2005 Elsevier Inc.,\n\t\t// under the accompanying license; see chapter 5.1.5 for detailed explanation.\n\t\t// basically, we're distinguishing which of the voronoi regions of the triangle\n\t\t// the point lies in with the minimum amount of redundant computation.\n\n\t\t_vab.subVectors( b, a );\n\t\t_vac.subVectors( c, a );\n\t\t_vap.subVectors( p, a );\n\t\tvar d1 = _vab.dot( _vap );\n\t\tvar d2 = _vac.dot( _vap );\n\t\tif ( d1 <= 0 && d2 <= 0 ) {\n\n\t\t\t// vertex region of A; barycentric coords (1, 0, 0)\n\t\t\treturn target.copy( a );\n\n\t\t}\n\n\t\t_vbp.subVectors( p, b );\n\t\tvar d3 = _vab.dot( _vbp );\n\t\tvar d4 = _vac.dot( _vbp );\n\t\tif ( d3 >= 0 && d4 <= d3 ) {\n\n\t\t\t// vertex region of B; barycentric coords (0, 1, 0)\n\t\t\treturn target.copy( b );\n\n\t\t}\n\n\t\tvar vc = d1 * d4 - d3 * d2;\n\t\tif ( vc <= 0 && d1 >= 0 && d3 <= 0 ) {\n\n\t\t\tv = d1 / ( d1 - d3 );\n\t\t\t// edge region of AB; barycentric coords (1-v, v, 0)\n\t\t\treturn target.copy( a ).addScaledVector( _vab, v );\n\n\t\t}\n\n\t\t_vcp.subVectors( p, c );\n\t\tvar d5 = _vab.dot( _vcp );\n\t\tvar d6 = _vac.dot( _vcp );\n\t\tif ( d6 >= 0 && d5 <= d6 ) {\n\n\t\t\t// vertex region of C; barycentric coords (0, 0, 1)\n\t\t\treturn target.copy( c );\n\n\t\t}\n\n\t\tvar vb = d5 * d2 - d1 * d6;\n\t\tif ( vb <= 0 && d2 >= 0 && d6 <= 0 ) {\n\n\t\t\tw = d2 / ( d2 - d6 );\n\t\t\t// edge region of AC; barycentric coords (1-w, 0, w)\n\t\t\treturn target.copy( a ).addScaledVector( _vac, w );\n\n\t\t}\n\n\t\tvar va = d3 * d6 - d5 * d4;\n\t\tif ( va <= 0 && ( d4 - d3 ) >= 0 && ( d5 - d6 ) >= 0 ) {\n\n\t\t\t_vbc.subVectors( c, b );\n\t\t\tw = ( d4 - d3 ) / ( ( d4 - d3 ) + ( d5 - d6 ) );\n\t\t\t// edge region of BC; barycentric coords (0, 1-w, w)\n\t\t\treturn target.copy( b ).addScaledVector( _vbc, w ); // edge region of BC\n\n\t\t}\n\n\t\t// face region\n\t\tvar denom = 1 / ( va + vb + vc );\n\t\t// u = va * denom\n\t\tv = vb * denom;\n\t\tw = vc * denom;\n\n\t\treturn target.copy( a ).addScaledVector( _vab, v ).addScaledVector( _vac, w );\n\n\t},\n\n\tequals: function ( triangle ) {\n\n\t\treturn triangle.a.equals( this.a ) && triangle.b.equals( this.b ) && triangle.c.equals( this.c );\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nvar _colorKeywords = { 'aliceblue': 0xF0F8FF, 'antiquewhite': 0xFAEBD7, 'aqua': 0x00FFFF, 'aquamarine': 0x7FFFD4, 'azure': 0xF0FFFF,\n\t'beige': 0xF5F5DC, 'bisque': 0xFFE4C4, 'black': 0x000000, 'blanchedalmond': 0xFFEBCD, 'blue': 0x0000FF, 'blueviolet': 0x8A2BE2,\n\t'brown': 0xA52A2A, 'burlywood': 0xDEB887, 'cadetblue': 0x5F9EA0, 'chartreuse': 0x7FFF00, 'chocolate': 0xD2691E, 'coral': 0xFF7F50,\n\t'cornflowerblue': 0x6495ED, 'cornsilk': 0xFFF8DC, 'crimson': 0xDC143C, 'cyan': 0x00FFFF, 'darkblue': 0x00008B, 'darkcyan': 0x008B8B,\n\t'darkgoldenrod': 0xB8860B, 'darkgray': 0xA9A9A9, 'darkgreen': 0x006400, 'darkgrey': 0xA9A9A9, 'darkkhaki': 0xBDB76B, 'darkmagenta': 0x8B008B,\n\t'darkolivegreen': 0x556B2F, 'darkorange': 0xFF8C00, 'darkorchid': 0x9932CC, 'darkred': 0x8B0000, 'darksalmon': 0xE9967A, 'darkseagreen': 0x8FBC8F,\n\t'darkslateblue': 0x483D8B, 'darkslategray': 0x2F4F4F, 'darkslategrey': 0x2F4F4F, 'darkturquoise': 0x00CED1, 'darkviolet': 0x9400D3,\n\t'deeppink': 0xFF1493, 'deepskyblue': 0x00BFFF, 'dimgray': 0x696969, 'dimgrey': 0x696969, 'dodgerblue': 0x1E90FF, 'firebrick': 0xB22222,\n\t'floralwhite': 0xFFFAF0, 'forestgreen': 0x228B22, 'fuchsia': 0xFF00FF, 'gainsboro': 0xDCDCDC, 'ghostwhite': 0xF8F8FF, 'gold': 0xFFD700,\n\t'goldenrod': 0xDAA520, 'gray': 0x808080, 'green': 0x008000, 'greenyellow': 0xADFF2F, 'grey': 0x808080, 'honeydew': 0xF0FFF0, 'hotpink': 0xFF69B4,\n\t'indianred': 0xCD5C5C, 'indigo': 0x4B0082, 'ivory': 0xFFFFF0, 'khaki': 0xF0E68C, 'lavender': 0xE6E6FA, 'lavenderblush': 0xFFF0F5, 'lawngreen': 0x7CFC00,\n\t'lemonchiffon': 0xFFFACD, 'lightblue': 0xADD8E6, 'lightcoral': 0xF08080, 'lightcyan': 0xE0FFFF, 'lightgoldenrodyellow': 0xFAFAD2, 'lightgray': 0xD3D3D3,\n\t'lightgreen': 0x90EE90, 'lightgrey': 0xD3D3D3, 'lightpink': 0xFFB6C1, 'lightsalmon': 0xFFA07A, 'lightseagreen': 0x20B2AA, 'lightskyblue': 0x87CEFA,\n\t'lightslategray': 0x778899, 'lightslategrey': 0x778899, 'lightsteelblue': 0xB0C4DE, 'lightyellow': 0xFFFFE0, 'lime': 0x00FF00, 'limegreen': 0x32CD32,\n\t'linen': 0xFAF0E6, 'magenta': 0xFF00FF, 'maroon': 0x800000, 'mediumaquamarine': 0x66CDAA, 'mediumblue': 0x0000CD, 'mediumorchid': 0xBA55D3,\n\t'mediumpurple': 0x9370DB, 'mediumseagreen': 0x3CB371, 'mediumslateblue': 0x7B68EE, 'mediumspringgreen': 0x00FA9A, 'mediumturquoise': 0x48D1CC,\n\t'mediumvioletred': 0xC71585, 'midnightblue': 0x191970, 'mintcream': 0xF5FFFA, 'mistyrose': 0xFFE4E1, 'moccasin': 0xFFE4B5, 'navajowhite': 0xFFDEAD,\n\t'navy': 0x000080, 'oldlace': 0xFDF5E6, 'olive': 0x808000, 'olivedrab': 0x6B8E23, 'orange': 0xFFA500, 'orangered': 0xFF4500, 'orchid': 0xDA70D6,\n\t'palegoldenrod': 0xEEE8AA, 'palegreen': 0x98FB98, 'paleturquoise': 0xAFEEEE, 'palevioletred': 0xDB7093, 'papayawhip': 0xFFEFD5, 'peachpuff': 0xFFDAB9,\n\t'peru': 0xCD853F, 'pink': 0xFFC0CB, 'plum': 0xDDA0DD, 'powderblue': 0xB0E0E6, 'purple': 0x800080, 'rebeccapurple': 0x663399, 'red': 0xFF0000, 'rosybrown': 0xBC8F8F,\n\t'royalblue': 0x4169E1, 'saddlebrown': 0x8B4513, 'salmon': 0xFA8072, 'sandybrown': 0xF4A460, 'seagreen': 0x2E8B57, 'seashell': 0xFFF5EE,\n\t'sienna': 0xA0522D, 'silver': 0xC0C0C0, 'skyblue': 0x87CEEB, 'slateblue': 0x6A5ACD, 'slategray': 0x708090, 'slategrey': 0x708090, 'snow': 0xFFFAFA,\n\t'springgreen': 0x00FF7F, 'steelblue': 0x4682B4, 'tan': 0xD2B48C, 'teal': 0x008080, 'thistle': 0xD8BFD8, 'tomato': 0xFF6347, 'turquoise': 0x40E0D0,\n\t'violet': 0xEE82EE, 'wheat': 0xF5DEB3, 'white': 0xFFFFFF, 'whitesmoke': 0xF5F5F5, 'yellow': 0xFFFF00, 'yellowgreen': 0x9ACD32 };\n\nvar _hslA = { h: 0, s: 0, l: 0 };\nvar _hslB = { h: 0, s: 0, l: 0 };\n\nfunction Color( r, g, b ) {\n\n\tif ( g === undefined && b === undefined ) {\n\n\t\t// r is THREE.Color, hex or string\n\t\treturn this.set( r );\n\n\t}\n\n\treturn this.setRGB( r, g, b );\n\n}\n\nfunction hue2rgb( p, q, t ) {\n\n\tif ( t < 0 ) t += 1;\n\tif ( t > 1 ) t -= 1;\n\tif ( t < 1 / 6 ) return p + ( q - p ) * 6 * t;\n\tif ( t < 1 / 2 ) return q;\n\tif ( t < 2 / 3 ) return p + ( q - p ) * 6 * ( 2 / 3 - t );\n\treturn p;\n\n}\n\nfunction SRGBToLinear( c ) {\n\n\treturn ( c < 0.04045 ) ? c * 0.0773993808 : Math.pow( c * 0.9478672986 + 0.0521327014, 2.4 );\n\n}\n\nfunction LinearToSRGB( c ) {\n\n\treturn ( c < 0.0031308 ) ? c * 12.92 : 1.055 * ( Math.pow( c, 0.41666 ) ) - 0.055;\n\n}\n\nObject.assign( Color.prototype, {\n\n\tisColor: true,\n\n\tr: 1, g: 1, b: 1,\n\n\tset: function ( value ) {\n\n\t\tif ( value && value.isColor ) {\n\n\t\t\tthis.copy( value );\n\n\t\t} else if ( typeof value === 'number' ) {\n\n\t\t\tthis.setHex( value );\n\n\t\t} else if ( typeof value === 'string' ) {\n\n\t\t\tthis.setStyle( value );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetScalar: function ( scalar ) {\n\n\t\tthis.r = scalar;\n\t\tthis.g = scalar;\n\t\tthis.b = scalar;\n\n\t\treturn this;\n\n\t},\n\n\tsetHex: function ( hex ) {\n\n\t\thex = Math.floor( hex );\n\n\t\tthis.r = ( hex >> 16 & 255 ) / 255;\n\t\tthis.g = ( hex >> 8 & 255 ) / 255;\n\t\tthis.b = ( hex & 255 ) / 255;\n\n\t\treturn this;\n\n\t},\n\n\tsetRGB: function ( r, g, b ) {\n\n\t\tthis.r = r;\n\t\tthis.g = g;\n\t\tthis.b = b;\n\n\t\treturn this;\n\n\t},\n\n\tsetHSL: function ( h, s, l ) {\n\n\t\t// h,s,l ranges are in 0.0 - 1.0\n\t\th = MathUtils.euclideanModulo( h, 1 );\n\t\ts = MathUtils.clamp( s, 0, 1 );\n\t\tl = MathUtils.clamp( l, 0, 1 );\n\n\t\tif ( s === 0 ) {\n\n\t\t\tthis.r = this.g = this.b = l;\n\n\t\t} else {\n\n\t\t\tvar p = l <= 0.5 ? l * ( 1 + s ) : l + s - ( l * s );\n\t\t\tvar q = ( 2 * l ) - p;\n\n\t\t\tthis.r = hue2rgb( q, p, h + 1 / 3 );\n\t\t\tthis.g = hue2rgb( q, p, h );\n\t\t\tthis.b = hue2rgb( q, p, h - 1 / 3 );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetStyle: function ( style ) {\n\n\t\tfunction handleAlpha( string ) {\n\n\t\t\tif ( string === undefined ) return;\n\n\t\t\tif ( parseFloat( string ) < 1 ) {\n\n\t\t\t\tconsole.warn( 'THREE.Color: Alpha component of ' + style + ' will be ignored.' );\n\n\t\t\t}\n\n\t\t}\n\n\n\t\tvar m;\n\n\t\tif ( m = /^((?:rgb|hsl)a?)\\(\\s*([^\\)]*)\\)/.exec( style ) ) {\n\n\t\t\t// rgb / hsl\n\n\t\t\tvar color;\n\t\t\tvar name = m[ 1 ];\n\t\t\tvar components = m[ 2 ];\n\n\t\t\tswitch ( name ) {\n\n\t\t\t\tcase 'rgb':\n\t\t\t\tcase 'rgba':\n\n\t\t\t\t\tif ( color = /^(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec( components ) ) {\n\n\t\t\t\t\t\t// rgb(255,0,0) rgba(255,0,0,0.5)\n\t\t\t\t\t\tthis.r = Math.min( 255, parseInt( color[ 1 ], 10 ) ) / 255;\n\t\t\t\t\t\tthis.g = Math.min( 255, parseInt( color[ 2 ], 10 ) ) / 255;\n\t\t\t\t\t\tthis.b = Math.min( 255, parseInt( color[ 3 ], 10 ) ) / 255;\n\n\t\t\t\t\t\thandleAlpha( color[ 5 ] );\n\n\t\t\t\t\t\treturn this;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( color = /^(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec( components ) ) {\n\n\t\t\t\t\t\t// rgb(100%,0%,0%) rgba(100%,0%,0%,0.5)\n\t\t\t\t\t\tthis.r = Math.min( 100, parseInt( color[ 1 ], 10 ) ) / 100;\n\t\t\t\t\t\tthis.g = Math.min( 100, parseInt( color[ 2 ], 10 ) ) / 100;\n\t\t\t\t\t\tthis.b = Math.min( 100, parseInt( color[ 3 ], 10 ) ) / 100;\n\n\t\t\t\t\t\thandleAlpha( color[ 5 ] );\n\n\t\t\t\t\t\treturn this;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'hsl':\n\t\t\t\tcase 'hsla':\n\n\t\t\t\t\tif ( color = /^([0-9]*\\.?[0-9]+)\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec( components ) ) {\n\n\t\t\t\t\t\t// hsl(120,50%,50%) hsla(120,50%,50%,0.5)\n\t\t\t\t\t\tvar h = parseFloat( color[ 1 ] ) / 360;\n\t\t\t\t\t\tvar s = parseInt( color[ 2 ], 10 ) / 100;\n\t\t\t\t\t\tvar l = parseInt( color[ 3 ], 10 ) / 100;\n\n\t\t\t\t\t\thandleAlpha( color[ 5 ] );\n\n\t\t\t\t\t\treturn this.setHSL( h, s, l );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t} else if ( m = /^\\#([A-Fa-f0-9]+)$/.exec( style ) ) {\n\n\t\t\t// hex color\n\n\t\t\tvar hex = m[ 1 ];\n\t\t\tvar size = hex.length;\n\n\t\t\tif ( size === 3 ) {\n\n\t\t\t\t// #ff0\n\t\t\t\tthis.r = parseInt( hex.charAt( 0 ) + hex.charAt( 0 ), 16 ) / 255;\n\t\t\t\tthis.g = parseInt( hex.charAt( 1 ) + hex.charAt( 1 ), 16 ) / 255;\n\t\t\t\tthis.b = parseInt( hex.charAt( 2 ) + hex.charAt( 2 ), 16 ) / 255;\n\n\t\t\t\treturn this;\n\n\t\t\t} else if ( size === 6 ) {\n\n\t\t\t\t// #ff0000\n\t\t\t\tthis.r = parseInt( hex.charAt( 0 ) + hex.charAt( 1 ), 16 ) / 255;\n\t\t\t\tthis.g = parseInt( hex.charAt( 2 ) + hex.charAt( 3 ), 16 ) / 255;\n\t\t\t\tthis.b = parseInt( hex.charAt( 4 ) + hex.charAt( 5 ), 16 ) / 255;\n\n\t\t\t\treturn this;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( style && style.length > 0 ) {\n\n\t\t\treturn this.setColorName( style );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetColorName: function ( style ) {\n\n\t\t// color keywords\n\t\tvar hex = _colorKeywords[ style ];\n\n\t\tif ( hex !== undefined ) {\n\n\t\t\t// red\n\t\t\tthis.setHex( hex );\n\n\t\t} else {\n\n\t\t\t// unknown color\n\t\t\tconsole.warn( 'THREE.Color: Unknown color ' + style );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.r, this.g, this.b );\n\n\t},\n\n\tcopy: function ( color ) {\n\n\t\tthis.r = color.r;\n\t\tthis.g = color.g;\n\t\tthis.b = color.b;\n\n\t\treturn this;\n\n\t},\n\n\tcopyGammaToLinear: function ( color, gammaFactor ) {\n\n\t\tif ( gammaFactor === undefined ) gammaFactor = 2.0;\n\n\t\tthis.r = Math.pow( color.r, gammaFactor );\n\t\tthis.g = Math.pow( color.g, gammaFactor );\n\t\tthis.b = Math.pow( color.b, gammaFactor );\n\n\t\treturn this;\n\n\t},\n\n\tcopyLinearToGamma: function ( color, gammaFactor ) {\n\n\t\tif ( gammaFactor === undefined ) gammaFactor = 2.0;\n\n\t\tvar safeInverse = ( gammaFactor > 0 ) ? ( 1.0 / gammaFactor ) : 1.0;\n\n\t\tthis.r = Math.pow( color.r, safeInverse );\n\t\tthis.g = Math.pow( color.g, safeInverse );\n\t\tthis.b = Math.pow( color.b, safeInverse );\n\n\t\treturn this;\n\n\t},\n\n\tconvertGammaToLinear: function ( gammaFactor ) {\n\n\t\tthis.copyGammaToLinear( this, gammaFactor );\n\n\t\treturn this;\n\n\t},\n\n\tconvertLinearToGamma: function ( gammaFactor ) {\n\n\t\tthis.copyLinearToGamma( this, gammaFactor );\n\n\t\treturn this;\n\n\t},\n\n\tcopySRGBToLinear: function ( color ) {\n\n\t\tthis.r = SRGBToLinear( color.r );\n\t\tthis.g = SRGBToLinear( color.g );\n\t\tthis.b = SRGBToLinear( color.b );\n\n\t\treturn this;\n\n\t},\n\n\tcopyLinearToSRGB: function ( color ) {\n\n\t\tthis.r = LinearToSRGB( color.r );\n\t\tthis.g = LinearToSRGB( color.g );\n\t\tthis.b = LinearToSRGB( color.b );\n\n\t\treturn this;\n\n\t},\n\n\tconvertSRGBToLinear: function () {\n\n\t\tthis.copySRGBToLinear( this );\n\n\t\treturn this;\n\n\t},\n\n\tconvertLinearToSRGB: function () {\n\n\t\tthis.copyLinearToSRGB( this );\n\n\t\treturn this;\n\n\t},\n\n\tgetHex: function () {\n\n\t\treturn ( this.r * 255 ) << 16 ^ ( this.g * 255 ) << 8 ^ ( this.b * 255 ) << 0;\n\n\t},\n\n\tgetHexString: function () {\n\n\t\treturn ( '000000' + this.getHex().toString( 16 ) ).slice( - 6 );\n\n\t},\n\n\tgetHSL: function ( target ) {\n\n\t\t// h,s,l ranges are in 0.0 - 1.0\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Color: .getHSL() target is now required' );\n\t\t\ttarget = { h: 0, s: 0, l: 0 };\n\n\t\t}\n\n\t\tvar r = this.r, g = this.g, b = this.b;\n\n\t\tvar max = Math.max( r, g, b );\n\t\tvar min = Math.min( r, g, b );\n\n\t\tvar hue, saturation;\n\t\tvar lightness = ( min + max ) / 2.0;\n\n\t\tif ( min === max ) {\n\n\t\t\thue = 0;\n\t\t\tsaturation = 0;\n\n\t\t} else {\n\n\t\t\tvar delta = max - min;\n\n\t\t\tsaturation = lightness <= 0.5 ? delta / ( max + min ) : delta / ( 2 - max - min );\n\n\t\t\tswitch ( max ) {\n\n\t\t\t\tcase r: hue = ( g - b ) / delta + ( g < b ? 6 : 0 ); break;\n\t\t\t\tcase g: hue = ( b - r ) / delta + 2; break;\n\t\t\t\tcase b: hue = ( r - g ) / delta + 4; break;\n\n\t\t\t}\n\n\t\t\thue /= 6;\n\n\t\t}\n\n\t\ttarget.h = hue;\n\t\ttarget.s = saturation;\n\t\ttarget.l = lightness;\n\n\t\treturn target;\n\n\t},\n\n\tgetStyle: function () {\n\n\t\treturn 'rgb(' + ( ( this.r * 255 ) | 0 ) + ',' + ( ( this.g * 255 ) | 0 ) + ',' + ( ( this.b * 255 ) | 0 ) + ')';\n\n\t},\n\n\toffsetHSL: function ( h, s, l ) {\n\n\t\tthis.getHSL( _hslA );\n\n\t\t_hslA.h += h; _hslA.s += s; _hslA.l += l;\n\n\t\tthis.setHSL( _hslA.h, _hslA.s, _hslA.l );\n\n\t\treturn this;\n\n\t},\n\n\tadd: function ( color ) {\n\n\t\tthis.r += color.r;\n\t\tthis.g += color.g;\n\t\tthis.b += color.b;\n\n\t\treturn this;\n\n\t},\n\n\taddColors: function ( color1, color2 ) {\n\n\t\tthis.r = color1.r + color2.r;\n\t\tthis.g = color1.g + color2.g;\n\t\tthis.b = color1.b + color2.b;\n\n\t\treturn this;\n\n\t},\n\n\taddScalar: function ( s ) {\n\n\t\tthis.r += s;\n\t\tthis.g += s;\n\t\tthis.b += s;\n\n\t\treturn this;\n\n\t},\n\n\tsub: function ( color ) {\n\n\t\tthis.r = Math.max( 0, this.r - color.r );\n\t\tthis.g = Math.max( 0, this.g - color.g );\n\t\tthis.b = Math.max( 0, this.b - color.b );\n\n\t\treturn this;\n\n\t},\n\n\tmultiply: function ( color ) {\n\n\t\tthis.r *= color.r;\n\t\tthis.g *= color.g;\n\t\tthis.b *= color.b;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( s ) {\n\n\t\tthis.r *= s;\n\t\tthis.g *= s;\n\t\tthis.b *= s;\n\n\t\treturn this;\n\n\t},\n\n\tlerp: function ( color, alpha ) {\n\n\t\tthis.r += ( color.r - this.r ) * alpha;\n\t\tthis.g += ( color.g - this.g ) * alpha;\n\t\tthis.b += ( color.b - this.b ) * alpha;\n\n\t\treturn this;\n\n\t},\n\n\tlerpHSL: function ( color, alpha ) {\n\n\t\tthis.getHSL( _hslA );\n\t\tcolor.getHSL( _hslB );\n\n\t\tvar h = MathUtils.lerp( _hslA.h, _hslB.h, alpha );\n\t\tvar s = MathUtils.lerp( _hslA.s, _hslB.s, alpha );\n\t\tvar l = MathUtils.lerp( _hslA.l, _hslB.l, alpha );\n\n\t\tthis.setHSL( h, s, l );\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( c ) {\n\n\t\treturn ( c.r === this.r ) && ( c.g === this.g ) && ( c.b === this.b );\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.r = array[ offset ];\n\t\tthis.g = array[ offset + 1 ];\n\t\tthis.b = array[ offset + 2 ];\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this.r;\n\t\tarray[ offset + 1 ] = this.g;\n\t\tarray[ offset + 2 ] = this.b;\n\n\t\treturn array;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\treturn this.getHex();\n\n\t}\n\n} );\n\nColor.NAMES = _colorKeywords;\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction Face3( a, b, c, normal, color, materialIndex ) {\n\n\tthis.a = a;\n\tthis.b = b;\n\tthis.c = c;\n\n\tthis.normal = ( normal && normal.isVector3 ) ? normal : new Vector3();\n\tthis.vertexNormals = Array.isArray( normal ) ? normal : [];\n\n\tthis.color = ( color && color.isColor ) ? color : new Color();\n\tthis.vertexColors = Array.isArray( color ) ? color : [];\n\n\tthis.materialIndex = materialIndex !== undefined ? materialIndex : 0;\n\n}\n\nObject.assign( Face3.prototype, {\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.a = source.a;\n\t\tthis.b = source.b;\n\t\tthis.c = source.c;\n\n\t\tthis.normal.copy( source.normal );\n\t\tthis.color.copy( source.color );\n\n\t\tthis.materialIndex = source.materialIndex;\n\n\t\tfor ( var i = 0, il = source.vertexNormals.length; i < il; i ++ ) {\n\n\t\t\tthis.vertexNormals[ i ] = source.vertexNormals[ i ].clone();\n\n\t\t}\n\n\t\tfor ( var i = 0, il = source.vertexColors.length; i < il; i ++ ) {\n\n\t\t\tthis.vertexColors[ i ] = source.vertexColors[ i ].clone();\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nvar materialId = 0;\n\nfunction Material() {\n\n\tObject.defineProperty( this, 'id', { value: materialId ++ } );\n\n\tthis.uuid = MathUtils.generateUUID();\n\n\tthis.name = '';\n\tthis.type = 'Material';\n\n\tthis.fog = true;\n\n\tthis.blending = NormalBlending;\n\tthis.side = FrontSide;\n\tthis.flatShading = false;\n\tthis.vertexColors = false;\n\n\tthis.opacity = 1;\n\tthis.transparent = false;\n\n\tthis.blendSrc = SrcAlphaFactor;\n\tthis.blendDst = OneMinusSrcAlphaFactor;\n\tthis.blendEquation = AddEquation;\n\tthis.blendSrcAlpha = null;\n\tthis.blendDstAlpha = null;\n\tthis.blendEquationAlpha = null;\n\n\tthis.depthFunc = LessEqualDepth;\n\tthis.depthTest = true;\n\tthis.depthWrite = true;\n\n\tthis.stencilWriteMask = 0xff;\n\tthis.stencilFunc = AlwaysStencilFunc;\n\tthis.stencilRef = 0;\n\tthis.stencilFuncMask = 0xff;\n\tthis.stencilFail = KeepStencilOp;\n\tthis.stencilZFail = KeepStencilOp;\n\tthis.stencilZPass = KeepStencilOp;\n\tthis.stencilWrite = false;\n\n\tthis.clippingPlanes = null;\n\tthis.clipIntersection = false;\n\tthis.clipShadows = false;\n\n\tthis.shadowSide = null;\n\n\tthis.colorWrite = true;\n\n\tthis.precision = null; // override the renderer's default precision for this material\n\n\tthis.polygonOffset = false;\n\tthis.polygonOffsetFactor = 0;\n\tthis.polygonOffsetUnits = 0;\n\n\tthis.dithering = false;\n\n\tthis.alphaTest = 0;\n\tthis.premultipliedAlpha = false;\n\n\tthis.visible = true;\n\n\tthis.toneMapped = true;\n\n\tthis.userData = {};\n\n\tthis.version = 0;\n\n}\n\nMaterial.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: Material,\n\n\tisMaterial: true,\n\n\tonBeforeCompile: function () {},\n\n\tsetValues: function ( values ) {\n\n\t\tif ( values === undefined ) return;\n\n\t\tfor ( var key in values ) {\n\n\t\t\tvar newValue = values[ key ];\n\n\t\t\tif ( newValue === undefined ) {\n\n\t\t\t\tconsole.warn( \"THREE.Material: '\" + key + \"' parameter is undefined.\" );\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\t// for backward compatability if shading is set in the constructor\n\t\t\tif ( key === 'shading' ) {\n\n\t\t\t\tconsole.warn( 'THREE.' + this.type + ': .shading has been removed. Use the boolean .flatShading instead.' );\n\t\t\t\tthis.flatShading = ( newValue === FlatShading ) ? true : false;\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tvar currentValue = this[ key ];\n\n\t\t\tif ( currentValue === undefined ) {\n\n\t\t\t\tconsole.warn( \"THREE.\" + this.type + \": '\" + key + \"' is not a property of this material.\" );\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tif ( currentValue && currentValue.isColor ) {\n\n\t\t\t\tcurrentValue.set( newValue );\n\n\t\t\t} else if ( ( currentValue && currentValue.isVector3 ) && ( newValue && newValue.isVector3 ) ) {\n\n\t\t\t\tcurrentValue.copy( newValue );\n\n\t\t\t} else {\n\n\t\t\t\tthis[ key ] = newValue;\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tvar isRoot = ( meta === undefined || typeof meta === 'string' );\n\n\t\tif ( isRoot ) {\n\n\t\t\tmeta = {\n\t\t\t\ttextures: {},\n\t\t\t\timages: {}\n\t\t\t};\n\n\t\t}\n\n\t\tvar data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Material',\n\t\t\t\tgenerator: 'Material.toJSON'\n\t\t\t}\n\t\t};\n\n\t\t// standard Material serialization\n\t\tdata.uuid = this.uuid;\n\t\tdata.type = this.type;\n\n\t\tif ( this.name !== '' ) data.name = this.name;\n\n\t\tif ( this.color && this.color.isColor ) data.color = this.color.getHex();\n\n\t\tif ( this.roughness !== undefined ) data.roughness = this.roughness;\n\t\tif ( this.metalness !== undefined ) data.metalness = this.metalness;\n\n\t\tif ( this.sheen && this.sheen.isColor ) data.sheen = this.sheen.getHex();\n\t\tif ( this.emissive && this.emissive.isColor ) data.emissive = this.emissive.getHex();\n\t\tif ( this.emissiveIntensity && this.emissiveIntensity !== 1 ) data.emissiveIntensity = this.emissiveIntensity;\n\n\t\tif ( this.specular && this.specular.isColor ) data.specular = this.specular.getHex();\n\t\tif ( this.shininess !== undefined ) data.shininess = this.shininess;\n\t\tif ( this.clearcoat !== undefined ) data.clearcoat = this.clearcoat;\n\t\tif ( this.clearcoatRoughness !== undefined ) data.clearcoatRoughness = this.clearcoatRoughness;\n\n\t\tif ( this.clearcoatNormalMap && this.clearcoatNormalMap.isTexture ) {\n\n\t\t\tdata.clearcoatNormalMap = this.clearcoatNormalMap.toJSON( meta ).uuid;\n\t\t\tdata.clearcoatNormalScale = this.clearcoatNormalScale.toArray();\n\n\t\t}\n\n\t\tif ( this.map && this.map.isTexture ) data.map = this.map.toJSON( meta ).uuid;\n\t\tif ( this.matcap && this.matcap.isTexture ) data.matcap = this.matcap.toJSON( meta ).uuid;\n\t\tif ( this.alphaMap && this.alphaMap.isTexture ) data.alphaMap = this.alphaMap.toJSON( meta ).uuid;\n\t\tif ( this.lightMap && this.lightMap.isTexture ) data.lightMap = this.lightMap.toJSON( meta ).uuid;\n\n\t\tif ( this.aoMap && this.aoMap.isTexture ) {\n\n\t\t\tdata.aoMap = this.aoMap.toJSON( meta ).uuid;\n\t\t\tdata.aoMapIntensity = this.aoMapIntensity;\n\n\t\t}\n\n\t\tif ( this.bumpMap && this.bumpMap.isTexture ) {\n\n\t\t\tdata.bumpMap = this.bumpMap.toJSON( meta ).uuid;\n\t\t\tdata.bumpScale = this.bumpScale;\n\n\t\t}\n\n\t\tif ( this.normalMap && this.normalMap.isTexture ) {\n\n\t\t\tdata.normalMap = this.normalMap.toJSON( meta ).uuid;\n\t\t\tdata.normalMapType = this.normalMapType;\n\t\t\tdata.normalScale = this.normalScale.toArray();\n\n\t\t}\n\n\t\tif ( this.displacementMap && this.displacementMap.isTexture ) {\n\n\t\t\tdata.displacementMap = this.displacementMap.toJSON( meta ).uuid;\n\t\t\tdata.displacementScale = this.displacementScale;\n\t\t\tdata.displacementBias = this.displacementBias;\n\n\t\t}\n\n\t\tif ( this.roughnessMap && this.roughnessMap.isTexture ) data.roughnessMap = this.roughnessMap.toJSON( meta ).uuid;\n\t\tif ( this.metalnessMap && this.metalnessMap.isTexture ) data.metalnessMap = this.metalnessMap.toJSON( meta ).uuid;\n\n\t\tif ( this.emissiveMap && this.emissiveMap.isTexture ) data.emissiveMap = this.emissiveMap.toJSON( meta ).uuid;\n\t\tif ( this.specularMap && this.specularMap.isTexture ) data.specularMap = this.specularMap.toJSON( meta ).uuid;\n\n\t\tif ( this.gradientMap && this.gradientMap.isTexture ) {\n\n\t\t\tdata.gradientMap = this.gradientMap.toJSON( meta ).uuid;\n\n\t\t}\n\n\t\tif ( this.size !== undefined ) data.size = this.size;\n\t\tif ( this.sizeAttenuation !== undefined ) data.sizeAttenuation = this.sizeAttenuation;\n\n\t\tif ( this.blending !== NormalBlending ) data.blending = this.blending;\n\t\tif ( this.flatShading === true ) data.flatShading = this.flatShading;\n\t\tif ( this.side !== FrontSide ) data.side = this.side;\n\t\tif ( this.vertexColors ) data.vertexColors = true;\n\n\t\tif ( this.opacity < 1 ) data.opacity = this.opacity;\n\t\tif ( this.transparent === true ) data.transparent = this.transparent;\n\n\t\tdata.depthFunc = this.depthFunc;\n\t\tdata.depthTest = this.depthTest;\n\t\tdata.depthWrite = this.depthWrite;\n\n\t\tdata.stencilWrite = this.stencilWrite;\n\t\tdata.stencilWriteMask = this.stencilWriteMask;\n\t\tdata.stencilFunc = this.stencilFunc;\n\t\tdata.stencilRef = this.stencilRef;\n\t\tdata.stencilFuncMask = this.stencilFuncMask;\n\t\tdata.stencilFail = this.stencilFail;\n\t\tdata.stencilZFail = this.stencilZFail;\n\t\tdata.stencilZPass = this.stencilZPass;\n\n\t\t// rotation (SpriteMaterial)\n\t\tif ( this.rotation && this.rotation !== 0 ) data.rotation = this.rotation;\n\n\t\tif ( this.polygonOffset === true ) data.polygonOffset = true;\n\t\tif ( this.polygonOffsetFactor !== 0 ) data.polygonOffsetFactor = this.polygonOffsetFactor;\n\t\tif ( this.polygonOffsetUnits !== 0 ) data.polygonOffsetUnits = this.polygonOffsetUnits;\n\n\t\tif ( this.linewidth && this.linewidth !== 1 ) data.linewidth = this.linewidth;\n\t\tif ( this.dashSize !== undefined ) data.dashSize = this.dashSize;\n\t\tif ( this.gapSize !== undefined ) data.gapSize = this.gapSize;\n\t\tif ( this.scale !== undefined ) data.scale = this.scale;\n\n\t\tif ( this.dithering === true ) data.dithering = true;\n\n\t\tif ( this.alphaTest > 0 ) data.alphaTest = this.alphaTest;\n\t\tif ( this.premultipliedAlpha === true ) data.premultipliedAlpha = this.premultipliedAlpha;\n\n\t\tif ( this.wireframe === true ) data.wireframe = this.wireframe;\n\t\tif ( this.wireframeLinewidth > 1 ) data.wireframeLinewidth = this.wireframeLinewidth;\n\t\tif ( this.wireframeLinecap !== 'round' ) data.wireframeLinecap = this.wireframeLinecap;\n\t\tif ( this.wireframeLinejoin !== 'round' ) data.wireframeLinejoin = this.wireframeLinejoin;\n\t\tif ( this.morphNormals === true ) data.morphNormals = true;\n\t\tif ( this.skinning === true ) data.skinning = true;\n\n\t\tif ( this.visible === false ) data.visible = false;\n\n\t\tif ( this.toneMapped === false ) data.toneMapped = false;\n\n\t\tif ( JSON.stringify( this.userData ) !== '{}' ) data.userData = this.userData;\n\n\t\t// TODO: Copied from Object3D.toJSON\n\n\t\tfunction extractFromCache( cache ) {\n\n\t\t\tvar values = [];\n\n\t\t\tfor ( var key in cache ) {\n\n\t\t\t\tvar data = cache[ key ];\n\t\t\t\tdelete data.metadata;\n\t\t\t\tvalues.push( data );\n\n\t\t\t}\n\n\t\t\treturn values;\n\n\t\t}\n\n\t\tif ( isRoot ) {\n\n\t\t\tvar textures = extractFromCache( meta.textures );\n\t\t\tvar images = extractFromCache( meta.images );\n\n\t\t\tif ( textures.length > 0 ) data.textures = textures;\n\t\t\tif ( images.length > 0 ) data.images = images;\n\n\t\t}\n\n\t\treturn data;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.name = source.name;\n\n\t\tthis.fog = source.fog;\n\n\t\tthis.blending = source.blending;\n\t\tthis.side = source.side;\n\t\tthis.flatShading = source.flatShading;\n\t\tthis.vertexColors = source.vertexColors;\n\n\t\tthis.opacity = source.opacity;\n\t\tthis.transparent = source.transparent;\n\n\t\tthis.blendSrc = source.blendSrc;\n\t\tthis.blendDst = source.blendDst;\n\t\tthis.blendEquation = source.blendEquation;\n\t\tthis.blendSrcAlpha = source.blendSrcAlpha;\n\t\tthis.blendDstAlpha = source.blendDstAlpha;\n\t\tthis.blendEquationAlpha = source.blendEquationAlpha;\n\n\t\tthis.depthFunc = source.depthFunc;\n\t\tthis.depthTest = source.depthTest;\n\t\tthis.depthWrite = source.depthWrite;\n\n\t\tthis.stencilWriteMask = source.stencilWriteMask;\n\t\tthis.stencilFunc = source.stencilFunc;\n\t\tthis.stencilRef = source.stencilRef;\n\t\tthis.stencilFuncMask = source.stencilFuncMask;\n\t\tthis.stencilFail = source.stencilFail;\n\t\tthis.stencilZFail = source.stencilZFail;\n\t\tthis.stencilZPass = source.stencilZPass;\n\t\tthis.stencilWrite = source.stencilWrite;\n\n\t\tvar srcPlanes = source.clippingPlanes,\n\t\t\tdstPlanes = null;\n\n\t\tif ( srcPlanes !== null ) {\n\n\t\t\tvar n = srcPlanes.length;\n\t\t\tdstPlanes = new Array( n );\n\n\t\t\tfor ( var i = 0; i !== n; ++ i )\n\t\t\t\tdstPlanes[ i ] = srcPlanes[ i ].clone();\n\n\t\t}\n\n\t\tthis.clippingPlanes = dstPlanes;\n\t\tthis.clipIntersection = source.clipIntersection;\n\t\tthis.clipShadows = source.clipShadows;\n\n\t\tthis.shadowSide = source.shadowSide;\n\n\t\tthis.colorWrite = source.colorWrite;\n\n\t\tthis.precision = source.precision;\n\n\t\tthis.polygonOffset = source.polygonOffset;\n\t\tthis.polygonOffsetFactor = source.polygonOffsetFactor;\n\t\tthis.polygonOffsetUnits = source.polygonOffsetUnits;\n\n\t\tthis.dithering = source.dithering;\n\n\t\tthis.alphaTest = source.alphaTest;\n\t\tthis.premultipliedAlpha = source.premultipliedAlpha;\n\n\t\tthis.visible = source.visible;\n\n\t\tthis.toneMapped = source.toneMapped;\n\n\t\tthis.userData = JSON.parse( JSON.stringify( source.userData ) );\n\n\t\treturn this;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n} );\n\nObject.defineProperty( Material.prototype, 'needsUpdate', {\n\n\tset: function ( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n} );\n\nfunction MeshBasicMaterial() {}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nvar _vector$3 = new Vector3();\n\nfunction BufferAttribute( array, itemSize, normalized ) {\n\n\tif ( Array.isArray( array ) ) {\n\n\t\tthrow new TypeError( 'THREE.BufferAttribute: array should be a Typed Array.' );\n\n\t}\n\n\tthis.name = '';\n\n\tthis.array = array;\n\tthis.itemSize = itemSize;\n\tthis.count = array !== undefined ? array.length / itemSize : 0;\n\tthis.normalized = normalized === true;\n\n\tthis.usage = StaticDrawUsage;\n\tthis.updateRange = { offset: 0, count: - 1 };\n\n\tthis.version = 0;\n\n}\n\nObject.defineProperty( BufferAttribute.prototype, 'needsUpdate', {\n\n\tset: function ( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n} );\n\nObject.assign( BufferAttribute.prototype, {\n\n\tisBufferAttribute: true,\n\n\tonUploadCallback: function () {},\n\n\tsetUsage: function ( value ) {\n\n\t\tthis.usage = value;\n\n\t\treturn this;\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.name = source.name;\n\t\tthis.array = new source.array.constructor( source.array );\n\t\tthis.itemSize = source.itemSize;\n\t\tthis.count = source.count;\n\t\tthis.normalized = source.normalized;\n\n\t\tthis.usage = source.usage;\n\n\t\treturn this;\n\n\t},\n\n\tcopyAt: function ( index1, attribute, index2 ) {\n\n\t\tindex1 *= this.itemSize;\n\t\tindex2 *= attribute.itemSize;\n\n\t\tfor ( var i = 0, l = this.itemSize; i < l; i ++ ) {\n\n\t\t\tthis.array[ index1 + i ] = attribute.array[ index2 + i ];\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcopyArray: function ( array ) {\n\n\t\tthis.array.set( array );\n\n\t\treturn this;\n\n\t},\n\n\tcopyColorsArray: function ( colors ) {\n\n\t\tvar array = this.array, offset = 0;\n\n\t\tfor ( var i = 0, l = colors.length; i < l; i ++ ) {\n\n\t\t\tvar color = colors[ i ];\n\n\t\t\tif ( color === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyColorsArray(): color is undefined', i );\n\t\t\t\tcolor = new Color();\n\n\t\t\t}\n\n\t\t\tarray[ offset ++ ] = color.r;\n\t\t\tarray[ offset ++ ] = color.g;\n\t\t\tarray[ offset ++ ] = color.b;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcopyVector2sArray: function ( vectors ) {\n\n\t\tvar array = this.array, offset = 0;\n\n\t\tfor ( var i = 0, l = vectors.length; i < l; i ++ ) {\n\n\t\t\tvar vector = vectors[ i ];\n\n\t\t\tif ( vector === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector2sArray(): vector is undefined', i );\n\t\t\t\tvector = new Vector2();\n\n\t\t\t}\n\n\t\t\tarray[ offset ++ ] = vector.x;\n\t\t\tarray[ offset ++ ] = vector.y;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcopyVector3sArray: function ( vectors ) {\n\n\t\tvar array = this.array, offset = 0;\n\n\t\tfor ( var i = 0, l = vectors.length; i < l; i ++ ) {\n\n\t\t\tvar vector = vectors[ i ];\n\n\t\t\tif ( vector === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector3sArray(): vector is undefined', i );\n\t\t\t\tvector = new Vector3();\n\n\t\t\t}\n\n\t\t\tarray[ offset ++ ] = vector.x;\n\t\t\tarray[ offset ++ ] = vector.y;\n\t\t\tarray[ offset ++ ] = vector.z;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcopyVector4sArray: function ( vectors ) {\n\n\t\tvar array = this.array, offset = 0;\n\n\t\tfor ( var i = 0, l = vectors.length; i < l; i ++ ) {\n\n\t\t\tvar vector = vectors[ i ];\n\n\t\t\tif ( vector === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector4sArray(): vector is undefined', i );\n\t\t\t\tvector = new Vector4();\n\n\t\t\t}\n\n\t\t\tarray[ offset ++ ] = vector.x;\n\t\t\tarray[ offset ++ ] = vector.y;\n\t\t\tarray[ offset ++ ] = vector.z;\n\t\t\tarray[ offset ++ ] = vector.w;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tapplyMatrix3: function ( m ) {\n\n\t\tfor ( var i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t_vector$3.x = this.getX( i );\n\t\t\t_vector$3.y = this.getY( i );\n\t\t\t_vector$3.z = this.getZ( i );\n\n\t\t\t_vector$3.applyMatrix3( m );\n\n\t\t\tthis.setXYZ( i, _vector$3.x, _vector$3.y, _vector$3.z );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tapplyMatrix4: function ( m ) {\n\n\t\tfor ( var i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t_vector$3.x = this.getX( i );\n\t\t\t_vector$3.y = this.getY( i );\n\t\t\t_vector$3.z = this.getZ( i );\n\n\t\t\t_vector$3.applyMatrix4( m );\n\n\t\t\tthis.setXYZ( i, _vector$3.x, _vector$3.y, _vector$3.z );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tapplyNormalMatrix: function ( m ) {\n\n\t\tfor ( var i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t_vector$3.x = this.getX( i );\n\t\t\t_vector$3.y = this.getY( i );\n\t\t\t_vector$3.z = this.getZ( i );\n\n\t\t\t_vector$3.applyNormalMatrix( m );\n\n\t\t\tthis.setXYZ( i, _vector$3.x, _vector$3.y, _vector$3.z );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\ttransformDirection: function ( m ) {\n\n\t\tfor ( var i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t_vector$3.x = this.getX( i );\n\t\t\t_vector$3.y = this.getY( i );\n\t\t\t_vector$3.z = this.getZ( i );\n\n\t\t\t_vector$3.transformDirection( m );\n\n\t\t\tthis.setXYZ( i, _vector$3.x, _vector$3.y, _vector$3.z );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tset: function ( value, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.array.set( value, offset );\n\n\t\treturn this;\n\n\t},\n\n\tgetX: function ( index ) {\n\n\t\treturn this.array[ index * this.itemSize ];\n\n\t},\n\n\tsetX: function ( index, x ) {\n\n\t\tthis.array[ index * this.itemSize ] = x;\n\n\t\treturn this;\n\n\t},\n\n\tgetY: function ( index ) {\n\n\t\treturn this.array[ index * this.itemSize + 1 ];\n\n\t},\n\n\tsetY: function ( index, y ) {\n\n\t\tthis.array[ index * this.itemSize + 1 ] = y;\n\n\t\treturn this;\n\n\t},\n\n\tgetZ: function ( index ) {\n\n\t\treturn this.array[ index * this.itemSize + 2 ];\n\n\t},\n\n\tsetZ: function ( index, z ) {\n\n\t\tthis.array[ index * this.itemSize + 2 ] = z;\n\n\t\treturn this;\n\n\t},\n\n\tgetW: function ( index ) {\n\n\t\treturn this.array[ index * this.itemSize + 3 ];\n\n\t},\n\n\tsetW: function ( index, w ) {\n\n\t\tthis.array[ index * this.itemSize + 3 ] = w;\n\n\t\treturn this;\n\n\t},\n\n\tsetXY: function ( index, x, y ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tthis.array[ index + 0 ] = x;\n\t\tthis.array[ index + 1 ] = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetXYZ: function ( index, x, y, z ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tthis.array[ index + 0 ] = x;\n\t\tthis.array[ index + 1 ] = y;\n\t\tthis.array[ index + 2 ] = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetXYZW: function ( index, x, y, z, w ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tthis.array[ index + 0 ] = x;\n\t\tthis.array[ index + 1 ] = y;\n\t\tthis.array[ index + 2 ] = z;\n\t\tthis.array[ index + 3 ] = w;\n\n\t\treturn this;\n\n\t},\n\n\tonUpload: function ( callback ) {\n\n\t\tthis.onUploadCallback = callback;\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.array, this.itemSize ).copy( this );\n\n\t},\n\n\ttoJSON: function () {\n\n\t\treturn {\n\t\t\titemSize: this.itemSize,\n\t\t\ttype: this.array.constructor.name,\n\t\t\tarray: Array.prototype.slice.call( this.array ),\n\t\t\tnormalized: this.normalized\n\t\t};\n\n\t}\n\n} );\n\n//\n\nfunction Int8BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Int8Array( array ), itemSize, normalized );\n\n}\n\nInt8BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nInt8BufferAttribute.prototype.constructor = Int8BufferAttribute;\n\n\nfunction Uint8BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Uint8Array( array ), itemSize, normalized );\n\n}\n\nUint8BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nUint8BufferAttribute.prototype.constructor = Uint8BufferAttribute;\n\n\nfunction Uint8ClampedBufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Uint8ClampedArray( array ), itemSize, normalized );\n\n}\n\nUint8ClampedBufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nUint8ClampedBufferAttribute.prototype.constructor = Uint8ClampedBufferAttribute;\n\n\nfunction Int16BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Int16Array( array ), itemSize, normalized );\n\n}\n\nInt16BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nInt16BufferAttribute.prototype.constructor = Int16BufferAttribute;\n\n\nfunction Uint16BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Uint16Array( array ), itemSize, normalized );\n\n}\n\nUint16BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nUint16BufferAttribute.prototype.constructor = Uint16BufferAttribute;\n\n\nfunction Int32BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Int32Array( array ), itemSize, normalized );\n\n}\n\nInt32BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nInt32BufferAttribute.prototype.constructor = Int32BufferAttribute;\n\n\nfunction Uint32BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Uint32Array( array ), itemSize, normalized );\n\n}\n\nUint32BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nUint32BufferAttribute.prototype.constructor = Uint32BufferAttribute;\n\n\nfunction Float32BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Float32Array( array ), itemSize, normalized );\n\n}\n\nFloat32BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nFloat32BufferAttribute.prototype.constructor = Float32BufferAttribute;\n\n\nfunction Float64BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Float64Array( array ), itemSize, normalized );\n\n}\n\nFloat64BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nFloat64BufferAttribute.prototype.constructor = Float64BufferAttribute;\n\nfunction DirectGeometry() {}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction arrayMax( array ) {\n\n\tif ( array.length === 0 ) return - Infinity;\n\n\tvar max = array[ 0 ];\n\n\tfor ( var i = 1, l = array.length; i < l; ++ i ) {\n\n\t\tif ( array[ i ] > max ) max = array[ i ];\n\n\t}\n\n\treturn max;\n\n}\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n */\n\nvar _bufferGeometryId = 1; // BufferGeometry uses odd numbers as Id\n\nvar _m1$2 = new Matrix4();\nvar _obj = new Object3D();\nvar _offset = new Vector3();\nvar _box$2 = new Box3();\nvar _boxMorphTargets = new Box3();\nvar _vector$4 = new Vector3();\n\nfunction BufferGeometry() {\n\n\tObject.defineProperty( this, 'id', { value: _bufferGeometryId += 2 } );\n\n\tthis.uuid = MathUtils.generateUUID();\n\n\tthis.name = '';\n\tthis.type = 'BufferGeometry';\n\n\tthis.index = null;\n\tthis.attributes = {};\n\n\tthis.morphAttributes = {};\n\tthis.morphTargetsRelative = false;\n\n\tthis.groups = [];\n\n\tthis.boundingBox = null;\n\tthis.boundingSphere = null;\n\n\tthis.drawRange = { start: 0, count: Infinity };\n\n\tthis.userData = {};\n\n}\n\nBufferGeometry.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: BufferGeometry,\n\n\tisBufferGeometry: true,\n\n\tgetIndex: function () {\n\n\t\treturn this.index;\n\n\t},\n\n\tsetIndex: function ( index ) {\n\n\t\tif ( Array.isArray( index ) ) {\n\n\t\t\tthis.index = new ( arrayMax( index ) > 65535 ? Uint32BufferAttribute : Uint16BufferAttribute )( index, 1 );\n\n\t\t} else {\n\n\t\t\tthis.index = index;\n\n\t\t}\n\n\t},\n\n\tgetAttribute: function ( name ) {\n\n\t\treturn this.attributes[ name ];\n\n\t},\n\n\tsetAttribute: function ( name, attribute ) {\n\n\t\tthis.attributes[ name ] = attribute;\n\n\t\treturn this;\n\n\t},\n\n\tdeleteAttribute: function ( name ) {\n\n\t\tdelete this.attributes[ name ];\n\n\t\treturn this;\n\n\t},\n\n\taddGroup: function ( start, count, materialIndex ) {\n\n\t\tthis.groups.push( {\n\n\t\t\tstart: start,\n\t\t\tcount: count,\n\t\t\tmaterialIndex: materialIndex !== undefined ? materialIndex : 0\n\n\t\t} );\n\n\t},\n\n\tclearGroups: function () {\n\n\t\tthis.groups = [];\n\n\t},\n\n\tsetDrawRange: function ( start, count ) {\n\n\t\tthis.drawRange.start = start;\n\t\tthis.drawRange.count = count;\n\n\t},\n\n\tapplyMatrix4: function ( matrix ) {\n\n\t\tvar position = this.attributes.position;\n\n\t\tif ( position !== undefined ) {\n\n\t\t\tposition.applyMatrix4( matrix );\n\n\t\t\tposition.needsUpdate = true;\n\n\t\t}\n\n\t\tvar normal = this.attributes.normal;\n\n\t\tif ( normal !== undefined ) {\n\n\t\t\tvar normalMatrix = new Matrix3().getNormalMatrix( matrix );\n\n\t\t\tnormal.applyNormalMatrix( normalMatrix );\n\n\t\t\tnormal.needsUpdate = true;\n\n\t\t}\n\n\t\tvar tangent = this.attributes.tangent;\n\n\t\tif ( tangent !== undefined ) {\n\n\t\t\ttangent.transformDirection( matrix );\n\n\t\t\ttangent.needsUpdate = true;\n\n\t\t}\n\n\t\tif ( this.boundingBox !== null ) {\n\n\t\t\tthis.computeBoundingBox();\n\n\t\t}\n\n\t\tif ( this.boundingSphere !== null ) {\n\n\t\t\tthis.computeBoundingSphere();\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\trotateX: function ( angle ) {\n\n\t\t// rotate geometry around world x-axis\n\n\t\t_m1$2.makeRotationX( angle );\n\n\t\tthis.applyMatrix4( _m1$2 );\n\n\t\treturn this;\n\n\t},\n\n\trotateY: function ( angle ) {\n\n\t\t// rotate geometry around world y-axis\n\n\t\t_m1$2.makeRotationY( angle );\n\n\t\tthis.applyMatrix4( _m1$2 );\n\n\t\treturn this;\n\n\t},\n\n\trotateZ: function ( angle ) {\n\n\t\t// rotate geometry around world z-axis\n\n\t\t_m1$2.makeRotationZ( angle );\n\n\t\tthis.applyMatrix4( _m1$2 );\n\n\t\treturn this;\n\n\t},\n\n\ttranslate: function ( x, y, z ) {\n\n\t\t// translate geometry\n\n\t\t_m1$2.makeTranslation( x, y, z );\n\n\t\tthis.applyMatrix4( _m1$2 );\n\n\t\treturn this;\n\n\t},\n\n\tscale: function ( x, y, z ) {\n\n\t\t// scale geometry\n\n\t\t_m1$2.makeScale( x, y, z );\n\n\t\tthis.applyMatrix4( _m1$2 );\n\n\t\treturn this;\n\n\t},\n\n\tlookAt: function ( vector ) {\n\n\t\t_obj.lookAt( vector );\n\n\t\t_obj.updateMatrix();\n\n\t\tthis.applyMatrix4( _obj.matrix );\n\n\t\treturn this;\n\n\t},\n\n\tcenter: function () {\n\n\t\tthis.computeBoundingBox();\n\n\t\tthis.boundingBox.getCenter( _offset ).negate();\n\n\t\tthis.translate( _offset.x, _offset.y, _offset.z );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromObject: function ( object ) {\n\n\t\t// console.log( 'THREE.BufferGeometry.setFromObject(). Converting', object, this );\n\n\t\tvar geometry = object.geometry;\n\n\t\tif ( object.isMesh ) {\n\n\t\t\tif ( geometry && geometry.isGeometry ) {\n\n\t\t\t\tthis.fromGeometry( geometry );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetFromPoints: function ( points ) {\n\n\t\tvar position = [];\n\n\t\tfor ( var i = 0, l = points.length; i < l; i ++ ) {\n\n\t\t\tvar point = points[ i ];\n\t\t\tposition.push( point.x, point.y, point.z || 0 );\n\n\t\t}\n\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( position, 3 ) );\n\n\t\treturn this;\n\n\t},\n\n\tupdateFromObject: function ( object ) {\n\n\t\tvar geometry = object.geometry;\n\n\t\tif ( object.isMesh ) {\n\n\t\t\tvar direct = geometry.__directGeometry;\n\n\t\t\tif ( geometry.elementsNeedUpdate === true ) {\n\n\t\t\t\tdirect = undefined;\n\t\t\t\tgeometry.elementsNeedUpdate = false;\n\n\t\t\t}\n\n\t\t\tif ( direct === undefined ) {\n\n\t\t\t\treturn this.fromGeometry( geometry );\n\n\t\t\t}\n\n\t\t\tdirect.verticesNeedUpdate = geometry.verticesNeedUpdate;\n\t\t\tdirect.normalsNeedUpdate = geometry.normalsNeedUpdate;\n\t\t\tdirect.colorsNeedUpdate = geometry.colorsNeedUpdate;\n\t\t\tdirect.uvsNeedUpdate = geometry.uvsNeedUpdate;\n\t\t\tdirect.groupsNeedUpdate = geometry.groupsNeedUpdate;\n\n\t\t\tgeometry.verticesNeedUpdate = false;\n\t\t\tgeometry.normalsNeedUpdate = false;\n\t\t\tgeometry.colorsNeedUpdate = false;\n\t\t\tgeometry.uvsNeedUpdate = false;\n\t\t\tgeometry.groupsNeedUpdate = false;\n\n\t\t\tgeometry = direct;\n\n\t\t}\n\n\t\tvar attribute;\n\n\t\tif ( geometry.verticesNeedUpdate === true ) {\n\n\t\t\tattribute = this.attributes.position;\n\n\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\tattribute.copyVector3sArray( geometry.vertices );\n\t\t\t\tattribute.needsUpdate = true;\n\n\t\t\t}\n\n\t\t\tgeometry.verticesNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( geometry.normalsNeedUpdate === true ) {\n\n\t\t\tattribute = this.attributes.normal;\n\n\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\tattribute.copyVector3sArray( geometry.normals );\n\t\t\t\tattribute.needsUpdate = true;\n\n\t\t\t}\n\n\t\t\tgeometry.normalsNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( geometry.colorsNeedUpdate === true ) {\n\n\t\t\tattribute = this.attributes.color;\n\n\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\tattribute.copyColorsArray( geometry.colors );\n\t\t\t\tattribute.needsUpdate = true;\n\n\t\t\t}\n\n\t\t\tgeometry.colorsNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( geometry.uvsNeedUpdate ) {\n\n\t\t\tattribute = this.attributes.uv;\n\n\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\tattribute.copyVector2sArray( geometry.uvs );\n\t\t\t\tattribute.needsUpdate = true;\n\n\t\t\t}\n\n\t\t\tgeometry.uvsNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( geometry.lineDistancesNeedUpdate ) {\n\n\t\t\tattribute = this.attributes.lineDistance;\n\n\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\tattribute.copyArray( geometry.lineDistances );\n\t\t\t\tattribute.needsUpdate = true;\n\n\t\t\t}\n\n\t\t\tgeometry.lineDistancesNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( geometry.groupsNeedUpdate ) {\n\n\t\t\tgeometry.computeGroups( object.geometry );\n\t\t\tthis.groups = geometry.groups;\n\n\t\t\tgeometry.groupsNeedUpdate = false;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tfromGeometry: function ( geometry ) {\n\n\t\tgeometry.__directGeometry = new DirectGeometry().fromGeometry( geometry );\n\n\t\treturn this.fromDirectGeometry( geometry.__directGeometry );\n\n\t},\n\n\tfromDirectGeometry: function ( geometry ) {\n\n\t\tvar positions = new Float32Array( geometry.vertices.length * 3 );\n\t\tthis.setAttribute( 'position', new BufferAttribute( positions, 3 ).copyVector3sArray( geometry.vertices ) );\n\n\t\tif ( geometry.normals.length > 0 ) {\n\n\t\t\tvar normals = new Float32Array( geometry.normals.length * 3 );\n\t\t\tthis.setAttribute( 'normal', new BufferAttribute( normals, 3 ).copyVector3sArray( geometry.normals ) );\n\n\t\t}\n\n\t\tif ( geometry.colors.length > 0 ) {\n\n\t\t\tvar colors = new Float32Array( geometry.colors.length * 3 );\n\t\t\tthis.setAttribute( 'color', new BufferAttribute( colors, 3 ).copyColorsArray( geometry.colors ) );\n\n\t\t}\n\n\t\tif ( geometry.uvs.length > 0 ) {\n\n\t\t\tvar uvs = new Float32Array( geometry.uvs.length * 2 );\n\t\t\tthis.setAttribute( 'uv', new BufferAttribute( uvs, 2 ).copyVector2sArray( geometry.uvs ) );\n\n\t\t}\n\n\t\tif ( geometry.uvs2.length > 0 ) {\n\n\t\t\tvar uvs2 = new Float32Array( geometry.uvs2.length * 2 );\n\t\t\tthis.setAttribute( 'uv2', new BufferAttribute( uvs2, 2 ).copyVector2sArray( geometry.uvs2 ) );\n\n\t\t}\n\n\t\t// groups\n\n\t\tthis.groups = geometry.groups;\n\n\t\t// morphs\n\n\t\tfor ( var name in false ) {\n\n\t\t\tvar array = [];\n\t\t\tvar morphTargets = false[ name ];\n\n\t\t\tfor ( var i = 0, l = morphTargets.length; i < l; i ++ ) {\n\n\t\t\t\tvar morphTarget = morphTargets[ i ];\n\n\t\t\t\tvar attribute = new Float32BufferAttribute( morphTarget.data.length * 3, 3 );\n\t\t\t\tattribute.name = morphTarget.name;\n\n\t\t\t\tarray.push( attribute.copyVector3sArray( morphTarget.data ) );\n\n\t\t\t}\n\n\t\t\tthis.morphAttributes[ name ] = array;\n\n\t\t}\n\n\t\t// skinning\n\n\t\tif ( geometry.skinIndices.length > 0 ) {\n\n\t\t\tvar skinIndices = new Float32BufferAttribute( geometry.skinIndices.length * 4, 4 );\n\t\t\tthis.setAttribute( 'skinIndex', skinIndices.copyVector4sArray( geometry.skinIndices ) );\n\n\t\t}\n\n\t\tif ( geometry.skinWeights.length > 0 ) {\n\n\t\t\tvar skinWeights = new Float32BufferAttribute( geometry.skinWeights.length * 4, 4 );\n\t\t\tthis.setAttribute( 'skinWeight', skinWeights.copyVector4sArray( geometry.skinWeights ) );\n\n\t\t}\n\n\t\t//\n\n\t\tif ( geometry.boundingSphere !== null ) {\n\n\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\n\n\t\t}\n\n\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\tthis.boundingBox = geometry.boundingBox.clone();\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcomputeBoundingBox: function () {\n\n\t\tif ( this.boundingBox === null ) {\n\n\t\t\tthis.boundingBox = new Box3();\n\n\t\t}\n\n\t\tvar position = this.attributes.position;\n\t\tvar morphAttributesPosition = this.morphAttributes.position;\n\n\t\tif ( position !== undefined ) {\n\n\t\t\tthis.boundingBox.setFromBufferAttribute( position );\n\n\t\t\t// process morph attributes if present\n\n\t\t\tif ( morphAttributesPosition ) {\n\n\t\t\t\tfor ( var i = 0, il = morphAttributesPosition.length; i < il; i ++ ) {\n\n\t\t\t\t\tvar morphAttribute = morphAttributesPosition[ i ];\n\t\t\t\t\t_box$2.setFromBufferAttribute( morphAttribute );\n\n\t\t\t\t\tif ( this.morphTargetsRelative ) {\n\n\t\t\t\t\t\t_vector$4.addVectors( this.boundingBox.min, _box$2.min );\n\t\t\t\t\t\tthis.boundingBox.expandByPoint( _vector$4 );\n\n\t\t\t\t\t\t_vector$4.addVectors( this.boundingBox.max, _box$2.max );\n\t\t\t\t\t\tthis.boundingBox.expandByPoint( _vector$4 );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tthis.boundingBox.expandByPoint( _box$2.min );\n\t\t\t\t\t\tthis.boundingBox.expandByPoint( _box$2.max );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tthis.boundingBox.makeEmpty();\n\n\t\t}\n\n\t\tif ( isNaN( this.boundingBox.min.x ) || isNaN( this.boundingBox.min.y ) || isNaN( this.boundingBox.min.z ) ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The \"position\" attribute is likely to have NaN values.', this );\n\n\t\t}\n\n\t},\n\n\tcomputeBoundingSphere: function () {\n\n\t\tif ( this.boundingSphere === null ) {\n\n\t\t\tthis.boundingSphere = new Sphere();\n\n\t\t}\n\n\t\tvar position = this.attributes.position;\n\t\tvar morphAttributesPosition = this.morphAttributes.position;\n\n\t\tif ( position ) {\n\n\t\t\t// first, find the center of the bounding sphere\n\n\t\t\tvar center = this.boundingSphere.center;\n\n\t\t\t_box$2.setFromBufferAttribute( position );\n\n\t\t\t// process morph attributes if present\n\n\t\t\tif ( morphAttributesPosition ) {\n\n\t\t\t\tfor ( var i = 0, il = morphAttributesPosition.length; i < il; i ++ ) {\n\n\t\t\t\t\tvar morphAttribute = morphAttributesPosition[ i ];\n\t\t\t\t\t_boxMorphTargets.setFromBufferAttribute( morphAttribute );\n\n\t\t\t\t\tif ( this.morphTargetsRelative ) {\n\n\t\t\t\t\t\t_vector$4.addVectors( _box$2.min, _boxMorphTargets.min );\n\t\t\t\t\t\t_box$2.expandByPoint( _vector$4 );\n\n\t\t\t\t\t\t_vector$4.addVectors( _box$2.max, _boxMorphTargets.max );\n\t\t\t\t\t\t_box$2.expandByPoint( _vector$4 );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t_box$2.expandByPoint( _boxMorphTargets.min );\n\t\t\t\t\t\t_box$2.expandByPoint( _boxMorphTargets.max );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t_box$2.getCenter( center );\n\n\t\t\t// second, try to find a boundingSphere with a radius smaller than the\n\t\t\t// boundingSphere of the boundingBox: sqrt(3) smaller in the best case\n\n\t\t\tvar maxRadiusSq = 0;\n\n\t\t\tfor ( var i = 0, il = position.count; i < il; i ++ ) {\n\n\t\t\t\t_vector$4.fromBufferAttribute( position, i );\n\n\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( _vector$4 ) );\n\n\t\t\t}\n\n\t\t\t// process morph attributes if present\n\n\t\t\tif ( morphAttributesPosition ) {\n\n\t\t\t\tfor ( var i = 0, il = morphAttributesPosition.length; i < il; i ++ ) {\n\n\t\t\t\t\tvar morphAttribute = morphAttributesPosition[ i ];\n\t\t\t\t\tvar morphTargetsRelative = this.morphTargetsRelative;\n\n\t\t\t\t\tfor ( var j = 0, jl = morphAttribute.count; j < jl; j ++ ) {\n\n\t\t\t\t\t\t_vector$4.fromBufferAttribute( morphAttribute, j );\n\n\t\t\t\t\t\tif ( morphTargetsRelative ) {\n\n\t\t\t\t\t\t\t_offset.fromBufferAttribute( position, j );\n\t\t\t\t\t\t\t_vector$4.add( _offset );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( _vector$4 ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.boundingSphere.radius = Math.sqrt( maxRadiusSq );\n\n\t\t\tif ( isNaN( this.boundingSphere.radius ) ) {\n\n\t\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The \"position\" attribute is likely to have NaN values.', this );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tcomputeFaceNormals: function () {\n\n\t\t// backwards compatibility\n\n\t},\n\n\tcomputeVertexNormals: function () {\n\n\t\tvar index = this.index;\n\t\tvar attributes = this.attributes;\n\n\t\tif ( attributes.position ) {\n\n\t\t\tvar positions = attributes.position.array;\n\n\t\t\tif ( attributes.normal === undefined ) {\n\n\t\t\t\tthis.setAttribute( 'normal', new BufferAttribute( new Float32Array( positions.length ), 3 ) );\n\n\t\t\t} else {\n\n\t\t\t\t// reset existing normals to zero\n\n\t\t\t\tvar array = attributes.normal.array;\n\n\t\t\t\tfor ( var i = 0, il = array.length; i < il; i ++ ) {\n\n\t\t\t\t\tarray[ i ] = 0;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar normals = attributes.normal.array;\n\n\t\t\tvar vA, vB, vC;\n\t\t\tvar pA = new Vector3(), pB = new Vector3(), pC = new Vector3();\n\t\t\tvar cb = new Vector3(), ab = new Vector3();\n\n\t\t\t// indexed elements\n\n\t\t\tif ( index ) {\n\n\t\t\t\tvar indices = index.array;\n\n\t\t\t\tfor ( var i = 0, il = index.count; i < il; i += 3 ) {\n\n\t\t\t\t\tvA = indices[ i + 0 ] * 3;\n\t\t\t\t\tvB = indices[ i + 1 ] * 3;\n\t\t\t\t\tvC = indices[ i + 2 ] * 3;\n\n\t\t\t\t\tpA.fromArray( positions, vA );\n\t\t\t\t\tpB.fromArray( positions, vB );\n\t\t\t\t\tpC.fromArray( positions, vC );\n\n\t\t\t\t\tcb.subVectors( pC, pB );\n\t\t\t\t\tab.subVectors( pA, pB );\n\t\t\t\t\tcb.cross( ab );\n\n\t\t\t\t\tnormals[ vA ] += cb.x;\n\t\t\t\t\tnormals[ vA + 1 ] += cb.y;\n\t\t\t\t\tnormals[ vA + 2 ] += cb.z;\n\n\t\t\t\t\tnormals[ vB ] += cb.x;\n\t\t\t\t\tnormals[ vB + 1 ] += cb.y;\n\t\t\t\t\tnormals[ vB + 2 ] += cb.z;\n\n\t\t\t\t\tnormals[ vC ] += cb.x;\n\t\t\t\t\tnormals[ vC + 1 ] += cb.y;\n\t\t\t\t\tnormals[ vC + 2 ] += cb.z;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// non-indexed elements (unconnected triangle soup)\n\n\t\t\t\tfor ( var i = 0, il = positions.length; i < il; i += 9 ) {\n\n\t\t\t\t\tpA.fromArray( positions, i );\n\t\t\t\t\tpB.fromArray( positions, i + 3 );\n\t\t\t\t\tpC.fromArray( positions, i + 6 );\n\n\t\t\t\t\tcb.subVectors( pC, pB );\n\t\t\t\t\tab.subVectors( pA, pB );\n\t\t\t\t\tcb.cross( ab );\n\n\t\t\t\t\tnormals[ i ] = cb.x;\n\t\t\t\t\tnormals[ i + 1 ] = cb.y;\n\t\t\t\t\tnormals[ i + 2 ] = cb.z;\n\n\t\t\t\t\tnormals[ i + 3 ] = cb.x;\n\t\t\t\t\tnormals[ i + 4 ] = cb.y;\n\t\t\t\t\tnormals[ i + 5 ] = cb.z;\n\n\t\t\t\t\tnormals[ i + 6 ] = cb.x;\n\t\t\t\t\tnormals[ i + 7 ] = cb.y;\n\t\t\t\t\tnormals[ i + 8 ] = cb.z;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.normalizeNormals();\n\n\t\t\tattributes.normal.needsUpdate = true;\n\n\t\t}\n\n\t},\n\n\tmerge: function ( geometry, offset ) {\n\n\t\tif ( ! ( geometry && geometry.isBufferGeometry ) ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.', geometry );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( offset === undefined ) {\n\n\t\t\toffset = 0;\n\n\t\t\tconsole.warn(\n\t\t\t\t'THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. '\n\t\t\t\t+ 'Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge.'\n\t\t\t);\n\n\t\t}\n\n\t\tvar attributes = this.attributes;\n\n\t\tfor ( var key in attributes ) {\n\n\t\t\tif ( geometry.attributes[ key ] === undefined ) continue;\n\n\t\t\tvar attribute1 = attributes[ key ];\n\t\t\tvar attributeArray1 = attribute1.array;\n\n\t\t\tvar attribute2 = geometry.attributes[ key ];\n\t\t\tvar attributeArray2 = attribute2.array;\n\n\t\t\tvar attributeOffset = attribute2.itemSize * offset;\n\t\t\tvar length = Math.min( attributeArray2.length, attributeArray1.length - attributeOffset );\n\n\t\t\tfor ( var i = 0, j = attributeOffset; i < length; i ++, j ++ ) {\n\n\t\t\t\tattributeArray1[ j ] = attributeArray2[ i ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tnormalizeNormals: function () {\n\n\t\tvar normals = this.attributes.normal;\n\n\t\tfor ( var i = 0, il = normals.count; i < il; i ++ ) {\n\n\t\t\t_vector$4.x = normals.getX( i );\n\t\t\t_vector$4.y = normals.getY( i );\n\t\t\t_vector$4.z = normals.getZ( i );\n\n\t\t\t_vector$4.normalize();\n\n\t\t\tnormals.setXYZ( i, _vector$4.x, _vector$4.y, _vector$4.z );\n\n\t\t}\n\n\t},\n\n\ttoNonIndexed: function () {\n\n\t\tfunction convertBufferAttribute( attribute, indices ) {\n\n\t\t\tvar array = attribute.array;\n\t\t\tvar itemSize = attribute.itemSize;\n\n\t\t\tvar array2 = new array.constructor( indices.length * itemSize );\n\n\t\t\tvar index = 0, index2 = 0;\n\n\t\t\tfor ( var i = 0, l = indices.length; i < l; i ++ ) {\n\n\t\t\t\tindex = indices[ i ] * itemSize;\n\n\t\t\t\tfor ( var j = 0; j < itemSize; j ++ ) {\n\n\t\t\t\t\tarray2[ index2 ++ ] = array[ index ++ ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn new BufferAttribute( array2, itemSize );\n\n\t\t}\n\n\t\t//\n\n\t\tif ( this.index === null ) {\n\n\t\t\tconsole.warn( 'THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed.' );\n\t\t\treturn this;\n\n\t\t}\n\n\t\tvar geometry2 = new BufferGeometry();\n\n\t\tvar indices = this.index.array;\n\t\tvar attributes = this.attributes;\n\n\t\t// attributes\n\n\t\tfor ( var name in attributes ) {\n\n\t\t\tvar attribute = attributes[ name ];\n\n\t\t\tvar newAttribute = convertBufferAttribute( attribute, indices );\n\n\t\t\tgeometry2.setAttribute( name, newAttribute );\n\n\t\t}\n\n\t\t// morph attributes\n\n\t\tvar morphAttributes = this.morphAttributes;\n\n\t\tfor ( name in morphAttributes ) {\n\n\t\t\tvar morphArray = [];\n\t\t\tvar morphAttribute = morphAttributes[ name ]; // morphAttribute: array of Float32BufferAttributes\n\n\t\t\tfor ( var i = 0, il = morphAttribute.length; i < il; i ++ ) {\n\n\t\t\t\tvar attribute = morphAttribute[ i ];\n\n\t\t\t\tvar newAttribute = convertBufferAttribute( attribute, indices );\n\n\t\t\t\tmorphArray.push( newAttribute );\n\n\t\t\t}\n\n\t\t\tgeometry2.morphAttributes[ name ] = morphArray;\n\n\t\t}\n\n\t\tgeometry2.morphTargetsRelative = this.morphTargetsRelative;\n\n\t\t// groups\n\n\t\tvar groups = this.groups;\n\n\t\tfor ( var i = 0, l = groups.length; i < l; i ++ ) {\n\n\t\t\tvar group = groups[ i ];\n\t\t\tgeometry2.addGroup( group.start, group.count, group.materialIndex );\n\n\t\t}\n\n\t\treturn geometry2;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tvar data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'BufferGeometry',\n\t\t\t\tgenerator: 'BufferGeometry.toJSON'\n\t\t\t}\n\t\t};\n\n\t\t// standard BufferGeometry serialization\n\n\t\tdata.uuid = this.uuid;\n\t\tdata.type = this.type;\n\t\tif ( this.name !== '' ) data.name = this.name;\n\t\tif ( Object.keys( this.userData ).length > 0 ) data.userData = this.userData;\n\n\t\tif ( this.parameters !== undefined ) {\n\n\t\t\tvar parameters = this.parameters;\n\n\t\t\tfor ( var key in parameters ) {\n\n\t\t\t\tif ( parameters[ key ] !== undefined ) data[ key ] = parameters[ key ];\n\n\t\t\t}\n\n\t\t\treturn data;\n\n\t\t}\n\n\t\tdata.data = { attributes: {} };\n\n\t\tvar index = this.index;\n\n\t\tif ( index !== null ) {\n\n\t\t\tdata.data.index = {\n\t\t\t\ttype: index.array.constructor.name,\n\t\t\t\tarray: Array.prototype.slice.call( index.array )\n\t\t\t};\n\n\t\t}\n\n\t\tvar attributes = this.attributes;\n\n\t\tfor ( var key in attributes ) {\n\n\t\t\tvar attribute = attributes[ key ];\n\n\t\t\tvar attributeData = attribute.toJSON();\n\n\t\t\tif ( attribute.name !== '' ) attributeData.name = attribute.name;\n\n\t\t\tdata.data.attributes[ key ] = attributeData;\n\n\t\t}\n\n\t\tvar morphAttributes = {};\n\t\tvar hasMorphAttributes = false;\n\n\t\tfor ( var key in this.morphAttributes ) {\n\n\t\t\tvar attributeArray = this.morphAttributes[ key ];\n\n\t\t\tvar array = [];\n\n\t\t\tfor ( var i = 0, il = attributeArray.length; i < il; i ++ ) {\n\n\t\t\t\tvar attribute = attributeArray[ i ];\n\n\t\t\t\tvar attributeData = attribute.toJSON();\n\n\t\t\t\tif ( attribute.name !== '' ) attributeData.name = attribute.name;\n\n\t\t\t\tarray.push( attributeData );\n\n\t\t\t}\n\n\t\t\tif ( array.length > 0 ) {\n\n\t\t\t\tmorphAttributes[ key ] = array;\n\n\t\t\t\thasMorphAttributes = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( hasMorphAttributes ) {\n\n\t\t\tdata.data.morphAttributes = morphAttributes;\n\t\t\tdata.data.morphTargetsRelative = this.morphTargetsRelative;\n\n\t\t}\n\n\t\tvar groups = this.groups;\n\n\t\tif ( groups.length > 0 ) {\n\n\t\t\tdata.data.groups = JSON.parse( JSON.stringify( groups ) );\n\n\t\t}\n\n\t\tvar boundingSphere = this.boundingSphere;\n\n\t\tif ( boundingSphere !== null ) {\n\n\t\t\tdata.data.boundingSphere = {\n\t\t\t\tcenter: boundingSphere.center.toArray(),\n\t\t\t\tradius: boundingSphere.radius\n\t\t\t};\n\n\t\t}\n\n\t\treturn data;\n\n\t},\n\n\tclone: function () {\n\n\t\t/*\n\t\t // Handle primitives\n\n\t\t var parameters = this.parameters;\n\n\t\t if ( parameters !== undefined ) {\n\n\t\t var values = [];\n\n\t\t for ( var key in parameters ) {\n\n\t\t values.push( parameters[ key ] );\n\n\t\t }\n\n\t\t var geometry = Object.create( this.constructor.prototype );\n\t\t this.constructor.apply( geometry, values );\n\t\t return geometry;\n\n\t\t }\n\n\t\t return new this.constructor().copy( this );\n\t\t */\n\n\t\treturn new BufferGeometry().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tvar name, i, l;\n\n\t\t// reset\n\n\t\tthis.index = null;\n\t\tthis.attributes = {};\n\t\tthis.morphAttributes = {};\n\t\tthis.groups = [];\n\t\tthis.boundingBox = null;\n\t\tthis.boundingSphere = null;\n\n\t\t// name\n\n\t\tthis.name = source.name;\n\n\t\t// index\n\n\t\tvar index = source.index;\n\n\t\tif ( index !== null ) {\n\n\t\t\tthis.setIndex( index.clone() );\n\n\t\t}\n\n\t\t// attributes\n\n\t\tvar attributes = source.attributes;\n\n\t\tfor ( name in attributes ) {\n\n\t\t\tvar attribute = attributes[ name ];\n\t\t\tthis.setAttribute( name, attribute.clone() );\n\n\t\t}\n\n\t\t// morph attributes\n\n\t\tvar morphAttributes = source.morphAttributes;\n\n\t\tfor ( name in morphAttributes ) {\n\n\t\t\tvar array = [];\n\t\t\tvar morphAttribute = morphAttributes[ name ]; // morphAttribute: array of Float32BufferAttributes\n\n\t\t\tfor ( i = 0, l = morphAttribute.length; i < l; i ++ ) {\n\n\t\t\t\tarray.push( morphAttribute[ i ].clone() );\n\n\t\t\t}\n\n\t\t\tthis.morphAttributes[ name ] = array;\n\n\t\t}\n\n\t\tthis.morphTargetsRelative = source.morphTargetsRelative;\n\n\t\t// groups\n\n\t\tvar groups = source.groups;\n\n\t\tfor ( i = 0, l = groups.length; i < l; i ++ ) {\n\n\t\t\tvar group = groups[ i ];\n\t\t\tthis.addGroup( group.start, group.count, group.materialIndex );\n\n\t\t}\n\n\t\t// bounding box\n\n\t\tvar boundingBox = source.boundingBox;\n\n\t\tif ( boundingBox !== null ) {\n\n\t\t\tthis.boundingBox = boundingBox.clone();\n\n\t\t}\n\n\t\t// bounding sphere\n\n\t\tvar boundingSphere = source.boundingSphere;\n\n\t\tif ( boundingSphere !== null ) {\n\n\t\t\tthis.boundingSphere = boundingSphere.clone();\n\n\t\t}\n\n\t\t// draw range\n\n\t\tthis.drawRange.start = source.drawRange.start;\n\t\tthis.drawRange.count = source.drawRange.count;\n\n\t\t// user data\n\n\t\tthis.userData = source.userData;\n\n\t\treturn this;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author mikael emtinger / http://gomo.se/\n * @author jonobr1 / http://jonobr1.com/\n */\n\nvar _inverseMatrix = new Matrix4();\nvar _ray = new Ray();\nvar _sphere = new Sphere();\n\nvar _vA = new Vector3();\nvar _vB = new Vector3();\nvar _vC = new Vector3();\n\nvar _uvA = new Vector2();\nvar _uvB = new Vector2();\nvar _uvC = new Vector2();\n\nvar _intersectionPoint = new Vector3();\nvar _intersectionPointWorld = new Vector3();\n\nfunction Mesh( geometry, material ) {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Mesh';\n\n\tthis.geometry = geometry !== undefined ? geometry : new BufferGeometry();\n\tthis.material = material !== undefined ? material : new MeshBasicMaterial();\n\n\tthis.updateMorphTargets();\n\n}\n\nMesh.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Mesh,\n\n\tisMesh: true,\n\n\tcopy: function ( source ) {\n\n\t\tObject3D.prototype.copy.call( this, source );\n\n\t\tif ( source.morphTargetInfluences !== undefined ) {\n\n\t\t\tthis.morphTargetInfluences = source.morphTargetInfluences.slice();\n\n\t\t}\n\n\t\tif ( source.morphTargetDictionary !== undefined ) {\n\n\t\t\tthis.morphTargetDictionary = Object.assign( {}, source.morphTargetDictionary );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tupdateMorphTargets: function () {\n\n\t\tvar geometry = this.geometry;\n\t\tvar m, ml, name;\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\tvar morphAttributes = geometry.morphAttributes;\n\t\t\tvar keys = Object.keys( morphAttributes );\n\n\t\t\tif ( keys.length > 0 ) {\n\n\t\t\t\tvar morphAttribute = morphAttributes[ keys[ 0 ] ];\n\n\t\t\t\tif ( morphAttribute !== undefined ) {\n\n\t\t\t\t\tthis.morphTargetInfluences = [];\n\t\t\t\t\tthis.morphTargetDictionary = {};\n\n\t\t\t\t\tfor ( m = 0, ml = morphAttribute.length; m < ml; m ++ ) {\n\n\t\t\t\t\t\tname = morphAttribute[ m ].name || String( m );\n\n\t\t\t\t\t\tthis.morphTargetInfluences.push( 0 );\n\t\t\t\t\t\tthis.morphTargetDictionary[ name ] = m;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tvar morphTargets = false;\n\n\t\t\tif ( morphTargets !== undefined && morphTargets.length > 0 ) {\n\n\t\t\t\tconsole.error( 'THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.' );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\traycast: function ( raycaster, intersects ) {\n\n\t\tvar geometry = this.geometry;\n\t\tvar material = this.material;\n\t\tvar matrixWorld = this.matrixWorld;\n\n\t\tif ( material === undefined ) return;\n\n\t\t// Checking boundingSphere distance to ray\n\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t_sphere.copy( geometry.boundingSphere );\n\t\t_sphere.applyMatrix4( matrixWorld );\n\n\t\tif ( raycaster.ray.intersectsSphere( _sphere ) === false ) return;\n\n\t\t//\n\n\t\t_inverseMatrix.getInverse( matrixWorld );\n\t\t_ray.copy( raycaster.ray ).applyMatrix4( _inverseMatrix );\n\n\t\t// Check boundingBox before continuing\n\n\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\tif ( _ray.intersectsBox( geometry.boundingBox ) === false ) return;\n\n\t\t}\n\n\t\tvar intersection;\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\tvar a, b, c;\n\t\t\tvar index = geometry.index;\n\t\t\tvar position = geometry.attributes.position;\n\t\t\tvar morphPosition = geometry.morphAttributes.position;\n\t\t\tvar morphTargetsRelative = geometry.morphTargetsRelative;\n\t\t\tvar uv = geometry.attributes.uv;\n\t\t\tvar uv2 = geometry.attributes.uv2;\n\t\t\tvar groups = geometry.groups;\n\t\t\tvar drawRange = geometry.drawRange;\n\t\t\tvar i, j, il, jl;\n\t\t\tvar group, groupMaterial;\n\t\t\tvar start, end;\n\n\t\t\tif ( index !== null ) {\n\n\t\t\t\t// indexed buffer geometry\n\n\t\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\t\tfor ( i = 0, il = groups.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tgroup = groups[ i ];\n\t\t\t\t\t\tgroupMaterial = material[ group.materialIndex ];\n\n\t\t\t\t\t\tstart = Math.max( group.start, drawRange.start );\n\t\t\t\t\t\tend = Math.min( ( group.start + group.count ), ( drawRange.start + drawRange.count ) );\n\n\t\t\t\t\t\tfor ( j = start, jl = end; j < jl; j += 3 ) {\n\n\t\t\t\t\t\t\ta = index.getX( j );\n\t\t\t\t\t\t\tb = index.getX( j + 1 );\n\t\t\t\t\t\t\tc = index.getX( j + 2 );\n\n\t\t\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, groupMaterial, raycaster, _ray, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c );\n\n\t\t\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\t\t\tintersection.faceIndex = Math.floor( j / 3 ); // triangle number in indexed buffer semantics\n\t\t\t\t\t\t\t\tintersection.face.materialIndex = group.materialIndex;\n\t\t\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tstart = Math.max( 0, drawRange.start );\n\t\t\t\t\tend = Math.min( index.count, ( drawRange.start + drawRange.count ) );\n\n\t\t\t\t\tfor ( i = start, il = end; i < il; i += 3 ) {\n\n\t\t\t\t\t\ta = index.getX( i );\n\t\t\t\t\t\tb = index.getX( i + 1 );\n\t\t\t\t\t\tc = index.getX( i + 2 );\n\n\t\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, material, raycaster, _ray, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c );\n\n\t\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\t\tintersection.faceIndex = Math.floor( i / 3 ); // triangle number in indexed buffer semantics\n\t\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if ( position !== undefined ) {\n\n\t\t\t\t// non-indexed buffer geometry\n\n\t\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\t\tfor ( i = 0, il = groups.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tgroup = groups[ i ];\n\t\t\t\t\t\tgroupMaterial = material[ group.materialIndex ];\n\n\t\t\t\t\t\tstart = Math.max( group.start, drawRange.start );\n\t\t\t\t\t\tend = Math.min( ( group.start + group.count ), ( drawRange.start + drawRange.count ) );\n\n\t\t\t\t\t\tfor ( j = start, jl = end; j < jl; j += 3 ) {\n\n\t\t\t\t\t\t\ta = j;\n\t\t\t\t\t\t\tb = j + 1;\n\t\t\t\t\t\t\tc = j + 2;\n\n\t\t\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, groupMaterial, raycaster, _ray, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c );\n\n\t\t\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\t\t\tintersection.faceIndex = Math.floor( j / 3 ); // triangle number in non-indexed buffer semantics\n\t\t\t\t\t\t\t\tintersection.face.materialIndex = group.materialIndex;\n\t\t\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tstart = Math.max( 0, drawRange.start );\n\t\t\t\t\tend = Math.min( position.count, ( drawRange.start + drawRange.count ) );\n\n\t\t\t\t\tfor ( i = start, il = end; i < il; i += 3 ) {\n\n\t\t\t\t\t\ta = i;\n\t\t\t\t\t\tb = i + 1;\n\t\t\t\t\t\tc = i + 2;\n\n\t\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, material, raycaster, _ray, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c );\n\n\t\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\t\tintersection.faceIndex = Math.floor( i / 3 ); // triangle number in non-indexed buffer semantics\n\t\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else if ( geometry.isGeometry ) {\n\n\t\t\tvar fvA, fvB, fvC;\n\t\t\tvar isMultiMaterial = Array.isArray( material );\n\n\t\t\tvar vertices = geometry.vertices;\n\t\t\tvar faces = geometry.faces;\n\t\t\tvar uvs;\n\n\t\t\tvar faceVertexUvs = geometry.faceVertexUvs[ 0 ];\n\t\t\tif ( faceVertexUvs.length > 0 ) uvs = faceVertexUvs;\n\n\t\t\tfor ( var f = 0, fl = faces.length; f < fl; f ++ ) {\n\n\t\t\t\tvar face = faces[ f ];\n\t\t\t\tvar faceMaterial = isMultiMaterial ? material[ face.materialIndex ] : material;\n\n\t\t\t\tif ( faceMaterial === undefined ) continue;\n\n\t\t\t\tfvA = vertices[ face.a ];\n\t\t\t\tfvB = vertices[ face.b ];\n\t\t\t\tfvC = vertices[ face.c ];\n\n\t\t\t\tintersection = checkIntersection( this, faceMaterial, raycaster, _ray, fvA, fvB, fvC, _intersectionPoint );\n\n\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\tif ( uvs && uvs[ f ] ) {\n\n\t\t\t\t\t\tvar uvs_f = uvs[ f ];\n\t\t\t\t\t\t_uvA.copy( uvs_f[ 0 ] );\n\t\t\t\t\t\t_uvB.copy( uvs_f[ 1 ] );\n\t\t\t\t\t\t_uvC.copy( uvs_f[ 2 ] );\n\n\t\t\t\t\t\tintersection.uv = Triangle.getUV( _intersectionPoint, fvA, fvB, fvC, _uvA, _uvB, _uvC, new Vector2() );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tintersection.face = face;\n\t\t\t\t\tintersection.faceIndex = f;\n\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.geometry, this.material ).copy( this );\n\n\t}\n\n} );\n\nfunction checkIntersection( object, material, raycaster, ray, pA, pB, pC, point ) {\n\n\tvar intersect;\n\n\tif ( material.side === BackSide ) {\n\n\t\tintersect = ray.intersectTriangle( pC, pB, pA, true, point );\n\n\t} else {\n\n\t\tintersect = ray.intersectTriangle( pA, pB, pC, material.side !== DoubleSide, point );\n\n\t}\n\n\tif ( intersect === null ) return null;\n\n\t_intersectionPointWorld.copy( point );\n\t_intersectionPointWorld.applyMatrix4( object.matrixWorld );\n\n\tvar distance = raycaster.ray.origin.distanceTo( _intersectionPointWorld );\n\n\tif ( distance < raycaster.near || distance > raycaster.far ) return null;\n\n\treturn {\n\t\tdistance: distance,\n\t\tpoint: _intersectionPointWorld.clone(),\n\t\tobject: object\n\t};\n\n}\n\nfunction checkBufferGeometryIntersection( object, material, raycaster, ray, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c ) {\n\n\t_vA.fromBufferAttribute( position, a );\n\t_vB.fromBufferAttribute( position, b );\n\t_vC.fromBufferAttribute( position, c );\n\n\tvar morphInfluences = object.morphTargetInfluences;\n\n\tvar intersection = checkIntersection( object, material, raycaster, ray, _vA, _vB, _vC, _intersectionPoint );\n\n\tif ( intersection ) {\n\n\t\tif ( uv ) {\n\n\t\t\t_uvA.fromBufferAttribute( uv, a );\n\t\t\t_uvB.fromBufferAttribute( uv, b );\n\t\t\t_uvC.fromBufferAttribute( uv, c );\n\n\t\t\tintersection.uv = Triangle.getUV( _intersectionPoint, _vA, _vB, _vC, _uvA, _uvB, _uvC, new Vector2() );\n\n\t\t}\n\n\t\tif ( uv2 ) {\n\n\t\t\t_uvA.fromBufferAttribute( uv2, a );\n\t\t\t_uvB.fromBufferAttribute( uv2, b );\n\t\t\t_uvC.fromBufferAttribute( uv2, c );\n\n\t\t\tintersection.uv2 = Triangle.getUV( _intersectionPoint, _vA, _vB, _vC, _uvA, _uvB, _uvC, new Vector2() );\n\n\t\t}\n\n\t\tvar face = new Face3( a, b, c );\n\t\tTriangle.getNormal( _vA, _vB, _vC, face.normal );\n\n\t\tintersection.face = face;\n\n\t}\n\n\treturn intersection;\n\n}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author kile / http://kile.stravaganza.org/\n * @author alteredq / http://alteredqualia.com/\n * @author mikael emtinger / http://gomo.se/\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * @author bhouston / http://clara.io\n */\n\nvar _geometryId = 0; // Geometry uses even numbers as Id\nvar _m1$3 = new Matrix4();\nvar _obj$1 = new Object3D();\nvar _offset$1 = new Vector3();\n\nfunction Geometry() {\n\n\tObject.defineProperty( this, 'id', { value: _geometryId += 2 } );\n\n\tthis.uuid = MathUtils.generateUUID();\n\n\tthis.name = '';\n\tthis.type = 'Geometry';\n\n\tthis.vertices = [];\n\tthis.colors = [];\n\tthis.faces = [];\n\tthis.faceVertexUvs = [[]];\n\n\tthis.morphTargets = [];\n\tthis.morphNormals = [];\n\n\tthis.skinWeights = [];\n\tthis.skinIndices = [];\n\n\tthis.lineDistances = [];\n\n\tthis.boundingBox = null;\n\tthis.boundingSphere = null;\n\n\t// update flags\n\n\tthis.elementsNeedUpdate = false;\n\tthis.verticesNeedUpdate = false;\n\tthis.uvsNeedUpdate = false;\n\tthis.normalsNeedUpdate = false;\n\tthis.colorsNeedUpdate = false;\n\tthis.lineDistancesNeedUpdate = false;\n\tthis.groupsNeedUpdate = false;\n\n}\n\nGeometry.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: Geometry,\n\n\tisGeometry: true,\n\n\tapplyMatrix4: function ( matrix ) {\n\n\t\tvar normalMatrix = new Matrix3().getNormalMatrix( matrix );\n\n\t\tfor ( var i = 0, il = this.vertices.length; i < il; i ++ ) {\n\n\t\t\tvar vertex = this.vertices[ i ];\n\t\t\tvertex.applyMatrix4( matrix );\n\n\t\t}\n\n\t\tfor ( var i = 0, il = this.faces.length; i < il; i ++ ) {\n\n\t\t\tvar face = this.faces[ i ];\n\t\t\tface.normal.applyMatrix3( normalMatrix ).normalize();\n\n\t\t\tfor ( var j = 0, jl = face.vertexNormals.length; j < jl; j ++ ) {\n\n\t\t\t\tface.vertexNormals[ j ].applyMatrix3( normalMatrix ).normalize();\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.boundingBox !== null ) {\n\n\t\t\tthis.computeBoundingBox();\n\n\t\t}\n\n\t\tif ( this.boundingSphere !== null ) {\n\n\t\t\tthis.computeBoundingSphere();\n\n\t\t}\n\n\t\tthis.verticesNeedUpdate = true;\n\t\tthis.normalsNeedUpdate = true;\n\n\t\treturn this;\n\n\t},\n\n\trotateX: function ( angle ) {\n\n\t\t// rotate geometry around world x-axis\n\n\t\t_m1$3.makeRotationX( angle );\n\n\t\tthis.applyMatrix4( _m1$3 );\n\n\t\treturn this;\n\n\t},\n\n\trotateY: function ( angle ) {\n\n\t\t// rotate geometry around world y-axis\n\n\t\t_m1$3.makeRotationY( angle );\n\n\t\tthis.applyMatrix4( _m1$3 );\n\n\t\treturn this;\n\n\t},\n\n\trotateZ: function ( angle ) {\n\n\t\t// rotate geometry around world z-axis\n\n\t\t_m1$3.makeRotationZ( angle );\n\n\t\tthis.applyMatrix4( _m1$3 );\n\n\t\treturn this;\n\n\t},\n\n\ttranslate: function ( x, y, z ) {\n\n\t\t// translate geometry\n\n\t\t_m1$3.makeTranslation( x, y, z );\n\n\t\tthis.applyMatrix4( _m1$3 );\n\n\t\treturn this;\n\n\t},\n\n\tscale: function ( x, y, z ) {\n\n\t\t// scale geometry\n\n\t\t_m1$3.makeScale( x, y, z );\n\n\t\tthis.applyMatrix4( _m1$3 );\n\n\t\treturn this;\n\n\t},\n\n\tlookAt: function ( vector ) {\n\n\t\t_obj$1.lookAt( vector );\n\n\t\t_obj$1.updateMatrix();\n\n\t\tthis.applyMatrix4( _obj$1.matrix );\n\n\t\treturn this;\n\n\t},\n\n\tfromBufferGeometry: function ( geometry ) {\n\n\t\tvar scope = this;\n\n\t\tvar indices = geometry.index !== null ? geometry.index.array : undefined;\n\t\tvar attributes = geometry.attributes;\n\n\t\tif ( attributes.position === undefined ) {\n\n\t\t\tconsole.error( 'THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion.' );\n\t\t\treturn this;\n\n\t\t}\n\n\t\tvar positions = attributes.position.array;\n\t\tvar normals = attributes.normal !== undefined ? attributes.normal.array : undefined;\n\t\tvar colors = attributes.color !== undefined ? attributes.color.array : undefined;\n\t\tvar uvs = attributes.uv !== undefined ? attributes.uv.array : undefined;\n\t\tvar uvs2 = attributes.uv2 !== undefined ? attributes.uv2.array : undefined;\n\n\t\tif ( uvs2 !== undefined ) this.faceVertexUvs[ 1 ] = [];\n\n\t\tfor ( var i = 0; i < positions.length; i += 3 ) {\n\n\t\t\tscope.vertices.push( new Vector3().fromArray( positions, i ) );\n\n\t\t\tif ( colors !== undefined ) {\n\n\t\t\t\tscope.colors.push( new Color().fromArray( colors, i ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction addFace( a, b, c, materialIndex ) {\n\n\t\t\tvar vertexColors = ( colors === undefined ) ? [] : [\n\t\t\t\tscope.colors[ a ].clone(),\n\t\t\t\tscope.colors[ b ].clone(),\n\t\t\t\tscope.colors[ c ].clone() ];\n\n\t\t\tvar vertexNormals = ( normals === undefined ) ? [] : [\n\t\t\t\tnew Vector3().fromArray( normals, a * 3 ),\n\t\t\t\tnew Vector3().fromArray( normals, b * 3 ),\n\t\t\t\tnew Vector3().fromArray( normals, c * 3 )\n\t\t\t];\n\n\t\t\tvar face = new Face3( a, b, c, vertexNormals, vertexColors, materialIndex );\n\n\t\t\tscope.faces.push( face );\n\n\t\t\tif ( uvs !== undefined ) {\n\n\t\t\t\tscope.faceVertexUvs[ 0 ].push( [\n\t\t\t\t\tnew Vector2().fromArray( uvs, a * 2 ),\n\t\t\t\t\tnew Vector2().fromArray( uvs, b * 2 ),\n\t\t\t\t\tnew Vector2().fromArray( uvs, c * 2 )\n\t\t\t\t] );\n\n\t\t\t}\n\n\t\t\tif ( uvs2 !== undefined ) {\n\n\t\t\t\tscope.faceVertexUvs[ 1 ].push( [\n\t\t\t\t\tnew Vector2().fromArray( uvs2, a * 2 ),\n\t\t\t\t\tnew Vector2().fromArray( uvs2, b * 2 ),\n\t\t\t\t\tnew Vector2().fromArray( uvs2, c * 2 )\n\t\t\t\t] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar groups = geometry.groups;\n\n\t\tif ( groups.length > 0 ) {\n\n\t\t\tfor ( var i = 0; i < groups.length; i ++ ) {\n\n\t\t\t\tvar group = groups[ i ];\n\n\t\t\t\tvar start = group.start;\n\t\t\t\tvar count = group.count;\n\n\t\t\t\tfor ( var j = start, jl = start + count; j < jl; j += 3 ) {\n\n\t\t\t\t\tif ( indices !== undefined ) {\n\n\t\t\t\t\t\taddFace( indices[ j ], indices[ j + 1 ], indices[ j + 2 ], group.materialIndex );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\taddFace( j, j + 1, j + 2, group.materialIndex );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tif ( indices !== undefined ) {\n\n\t\t\t\tfor ( var i = 0; i < indices.length; i += 3 ) {\n\n\t\t\t\t\taddFace( indices[ i ], indices[ i + 1 ], indices[ i + 2 ] );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tfor ( var i = 0; i < positions.length / 3; i += 3 ) {\n\n\t\t\t\t\taddFace( i, i + 1, i + 2 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.computeFaceNormals();\n\n\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\tthis.boundingBox = geometry.boundingBox.clone();\n\n\t\t}\n\n\t\tif ( geometry.boundingSphere !== null ) {\n\n\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcenter: function () {\n\n\t\tthis.computeBoundingBox();\n\n\t\tthis.boundingBox.getCenter( _offset$1 ).negate();\n\n\t\tthis.translate( _offset$1.x, _offset$1.y, _offset$1.z );\n\n\t\treturn this;\n\n\t},\n\n\tnormalize: function () {\n\n\t\tthis.computeBoundingSphere();\n\n\t\tvar center = this.boundingSphere.center;\n\t\tvar radius = this.boundingSphere.radius;\n\n\t\tvar s = radius === 0 ? 1 : 1.0 / radius;\n\n\t\tvar matrix = new Matrix4();\n\t\tmatrix.set(\n\t\t\ts, 0, 0, - s * center.x,\n\t\t\t0, s, 0, - s * center.y,\n\t\t\t0, 0, s, - s * center.z,\n\t\t\t0, 0, 0, 1\n\t\t);\n\n\t\tthis.applyMatrix4( matrix );\n\n\t\treturn this;\n\n\t},\n\n\tcomputeFaceNormals: function () {\n\n\t\tvar cb = new Vector3(), ab = new Vector3();\n\n\t\tfor ( var f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tvar face = this.faces[ f ];\n\n\t\t\tvar vA = this.vertices[ face.a ];\n\t\t\tvar vB = this.vertices[ face.b ];\n\t\t\tvar vC = this.vertices[ face.c ];\n\n\t\t\tcb.subVectors( vC, vB );\n\t\t\tab.subVectors( vA, vB );\n\t\t\tcb.cross( ab );\n\n\t\t\tcb.normalize();\n\n\t\t\tface.normal.copy( cb );\n\n\t\t}\n\n\t},\n\n\tcomputeVertexNormals: function ( areaWeighted ) {\n\n\t\tif ( areaWeighted === undefined ) areaWeighted = true;\n\n\t\tvar v, vl, f, fl, face, vertices;\n\n\t\tvertices = new Array( this.vertices.length );\n\n\t\tfor ( v = 0, vl = this.vertices.length; v < vl; v ++ ) {\n\n\t\t\tvertices[ v ] = new Vector3();\n\n\t\t}\n\n\t\tif ( areaWeighted ) {\n\n\t\t\t// vertex normals weighted by triangle areas\n\t\t\t// http://www.iquilezles.org/www/articles/normals/normals.htm\n\n\t\t\tvar vA, vB, vC;\n\t\t\tvar cb = new Vector3(), ab = new Vector3();\n\n\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\tface = this.faces[ f ];\n\n\t\t\t\tvA = this.vertices[ face.a ];\n\t\t\t\tvB = this.vertices[ face.b ];\n\t\t\t\tvC = this.vertices[ face.c ];\n\n\t\t\t\tcb.subVectors( vC, vB );\n\t\t\t\tab.subVectors( vA, vB );\n\t\t\t\tcb.cross( ab );\n\n\t\t\t\tvertices[ face.a ].add( cb );\n\t\t\t\tvertices[ face.b ].add( cb );\n\t\t\t\tvertices[ face.c ].add( cb );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tthis.computeFaceNormals();\n\n\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\tface = this.faces[ f ];\n\n\t\t\t\tvertices[ face.a ].add( face.normal );\n\t\t\t\tvertices[ face.b ].add( face.normal );\n\t\t\t\tvertices[ face.c ].add( face.normal );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( v = 0, vl = this.vertices.length; v < vl; v ++ ) {\n\n\t\t\tvertices[ v ].normalize();\n\n\t\t}\n\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tface = this.faces[ f ];\n\n\t\t\tvar vertexNormals = face.vertexNormals;\n\n\t\t\tif ( vertexNormals.length === 3 ) {\n\n\t\t\t\tvertexNormals[ 0 ].copy( vertices[ face.a ] );\n\t\t\t\tvertexNormals[ 1 ].copy( vertices[ face.b ] );\n\t\t\t\tvertexNormals[ 2 ].copy( vertices[ face.c ] );\n\n\t\t\t} else {\n\n\t\t\t\tvertexNormals[ 0 ] = vertices[ face.a ].clone();\n\t\t\t\tvertexNormals[ 1 ] = vertices[ face.b ].clone();\n\t\t\t\tvertexNormals[ 2 ] = vertices[ face.c ].clone();\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.faces.length > 0 ) {\n\n\t\t\tthis.normalsNeedUpdate = true;\n\n\t\t}\n\n\t},\n\n\tcomputeFlatVertexNormals: function () {\n\n\t\tvar f, fl, face;\n\n\t\tthis.computeFaceNormals();\n\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tface = this.faces[ f ];\n\n\t\t\tvar vertexNormals = face.vertexNormals;\n\n\t\t\tif ( vertexNormals.length === 3 ) {\n\n\t\t\t\tvertexNormals[ 0 ].copy( face.normal );\n\t\t\t\tvertexNormals[ 1 ].copy( face.normal );\n\t\t\t\tvertexNormals[ 2 ].copy( face.normal );\n\n\t\t\t} else {\n\n\t\t\t\tvertexNormals[ 0 ] = face.normal.clone();\n\t\t\t\tvertexNormals[ 1 ] = face.normal.clone();\n\t\t\t\tvertexNormals[ 2 ] = face.normal.clone();\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.faces.length > 0 ) {\n\n\t\t\tthis.normalsNeedUpdate = true;\n\n\t\t}\n\n\t},\n\n\tcomputeMorphNormals: function () {\n\n\t\tvar i, il, f, fl, face;\n\n\t\t// save original normals\n\t\t// - create temp variables on first access\n\t\t//   otherwise just copy (for faster repeated calls)\n\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tface = this.faces[ f ];\n\n\t\t\tif ( ! face.__originalFaceNormal ) {\n\n\t\t\t\tface.__originalFaceNormal = face.normal.clone();\n\n\t\t\t} else {\n\n\t\t\t\tface.__originalFaceNormal.copy( face.normal );\n\n\t\t\t}\n\n\t\t\tif ( ! face.__originalVertexNormals ) face.__originalVertexNormals = [];\n\n\t\t\tfor ( i = 0, il = face.vertexNormals.length; i < il; i ++ ) {\n\n\t\t\t\tif ( ! face.__originalVertexNormals[ i ] ) {\n\n\t\t\t\t\tface.__originalVertexNormals[ i ] = face.vertexNormals[ i ].clone();\n\n\t\t\t\t} else {\n\n\t\t\t\t\tface.__originalVertexNormals[ i ].copy( face.vertexNormals[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// use temp geometry to compute face and vertex normals for each morph\n\n\t\tvar tmpGeo = new Geometry();\n\t\ttmpGeo.faces = this.faces;\n\n\t\tfor ( i = 0, il = false.length; i < il; i ++ ) {\n\n\t\t\t// create on first access\n\n\t\t\tif ( ! this.morphNormals[ i ] ) {\n\n\t\t\t\tthis.morphNormals[ i ] = {};\n\t\t\t\tthis.morphNormals[ i ].faceNormals = [];\n\t\t\t\tthis.morphNormals[ i ].vertexNormals = [];\n\n\t\t\t\tvar dstNormalsFace = this.morphNormals[ i ].faceNormals;\n\t\t\t\tvar dstNormalsVertex = this.morphNormals[ i ].vertexNormals;\n\n\t\t\t\tvar faceNormal, vertexNormals;\n\n\t\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\t\tfaceNormal = new Vector3();\n\t\t\t\t\tvertexNormals = { a: new Vector3(), b: new Vector3(), c: new Vector3() };\n\n\t\t\t\t\tdstNormalsFace.push( faceNormal );\n\t\t\t\t\tdstNormalsVertex.push( vertexNormals );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar morphNormals = this.morphNormals[ i ];\n\n\t\t\t// set vertices to morph target\n\n\t\t\ttmpGeo.vertices = false[ i ].vertices;\n\n\t\t\t// compute morph normals\n\n\t\t\ttmpGeo.computeFaceNormals();\n\t\t\ttmpGeo.computeVertexNormals();\n\n\t\t\t// store morph normals\n\n\t\t\tvar faceNormal, vertexNormals;\n\n\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\tface = this.faces[ f ];\n\n\t\t\t\tfaceNormal = morphNormals.faceNormals[ f ];\n\t\t\t\tvertexNormals = morphNormals.vertexNormals[ f ];\n\n\t\t\t\tfaceNormal.copy( face.normal );\n\n\t\t\t\tvertexNormals.a.copy( face.vertexNormals[ 0 ] );\n\t\t\t\tvertexNormals.b.copy( face.vertexNormals[ 1 ] );\n\t\t\t\tvertexNormals.c.copy( face.vertexNormals[ 2 ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// restore original normals\n\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tface = this.faces[ f ];\n\n\t\t\tface.normal = face.__originalFaceNormal;\n\t\t\tface.vertexNormals = face.__originalVertexNormals;\n\n\t\t}\n\n\t},\n\n\tcomputeBoundingBox: function () {\n\n\t\tif ( this.boundingBox === null ) {\n\n\t\t\tthis.boundingBox = new Box3();\n\n\t\t}\n\n\t\tthis.boundingBox.setFromPoints( this.vertices );\n\n\t},\n\n\tcomputeBoundingSphere: function () {\n\n\t\tif ( this.boundingSphere === null ) {\n\n\t\t\tthis.boundingSphere = new Sphere();\n\n\t\t}\n\n\t\tthis.boundingSphere.setFromPoints( this.vertices );\n\n\t},\n\n\tmerge: function ( geometry, matrix, materialIndexOffset ) {\n\n\t\tif ( ! ( geometry && geometry.isGeometry ) ) {\n\n\t\t\tconsole.error( 'THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.', geometry );\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar normalMatrix,\n\t\t\tvertexOffset = this.vertices.length,\n\t\t\tvertices1 = this.vertices,\n\t\t\tvertices2 = geometry.vertices,\n\t\t\tfaces1 = this.faces,\n\t\t\tfaces2 = geometry.faces,\n\t\t\tcolors1 = this.colors,\n\t\t\tcolors2 = geometry.colors;\n\n\t\tif ( materialIndexOffset === undefined ) materialIndexOffset = 0;\n\n\t\tif ( matrix !== undefined ) {\n\n\t\t\tnormalMatrix = new Matrix3().getNormalMatrix( matrix );\n\n\t\t}\n\n\t\t// vertices\n\n\t\tfor ( var i = 0, il = vertices2.length; i < il; i ++ ) {\n\n\t\t\tvar vertex = vertices2[ i ];\n\n\t\t\tvar vertexCopy = vertex.clone();\n\n\t\t\tif ( matrix !== undefined ) vertexCopy.applyMatrix4( matrix );\n\n\t\t\tvertices1.push( vertexCopy );\n\n\t\t}\n\n\t\t// colors\n\n\t\tfor ( var i = 0, il = colors2.length; i < il; i ++ ) {\n\n\t\t\tcolors1.push( colors2[ i ].clone() );\n\n\t\t}\n\n\t\t// faces\n\n\t\tfor ( i = 0, il = faces2.length; i < il; i ++ ) {\n\n\t\t\tvar face = faces2[ i ], faceCopy, normal, color,\n\t\t\t\tfaceVertexNormals = face.vertexNormals,\n\t\t\t\tfaceVertexColors = face.vertexColors;\n\n\t\t\tfaceCopy = new Face3( face.a + vertexOffset, face.b + vertexOffset, face.c + vertexOffset );\n\t\t\tfaceCopy.normal.copy( face.normal );\n\n\t\t\tif ( normalMatrix !== undefined ) {\n\n\t\t\t\tfaceCopy.normal.applyMatrix3( normalMatrix ).normalize();\n\n\t\t\t}\n\n\t\t\tfor ( var j = 0, jl = faceVertexNormals.length; j < jl; j ++ ) {\n\n\t\t\t\tnormal = faceVertexNormals[ j ].clone();\n\n\t\t\t\tif ( normalMatrix !== undefined ) {\n\n\t\t\t\t\tnormal.applyMatrix3( normalMatrix ).normalize();\n\n\t\t\t\t}\n\n\t\t\t\tfaceCopy.vertexNormals.push( normal );\n\n\t\t\t}\n\n\t\t\tfaceCopy.color.copy( face.color );\n\n\t\t\tfor ( var j = 0, jl = faceVertexColors.length; j < jl; j ++ ) {\n\n\t\t\t\tcolor = faceVertexColors[ j ];\n\t\t\t\tfaceCopy.vertexColors.push( color.clone() );\n\n\t\t\t}\n\n\t\t\tfaceCopy.materialIndex = face.materialIndex + materialIndexOffset;\n\n\t\t\tfaces1.push( faceCopy );\n\n\t\t}\n\n\t\t// uvs\n\n\t\tfor ( var i = 0, il = geometry.faceVertexUvs.length; i < il; i ++ ) {\n\n\t\t\tvar faceVertexUvs2 = geometry.faceVertexUvs[ i ];\n\n\t\t\tif ( this.faceVertexUvs[ i ] === undefined ) this.faceVertexUvs[ i ] = [];\n\n\t\t\tfor ( var j = 0, jl = faceVertexUvs2.length; j < jl; j ++ ) {\n\n\t\t\t\tvar uvs2 = faceVertexUvs2[ j ], uvsCopy = [];\n\n\t\t\t\tfor ( var k = 0, kl = uvs2.length; k < kl; k ++ ) {\n\n\t\t\t\t\tuvsCopy.push( uvs2[ k ].clone() );\n\n\t\t\t\t}\n\n\t\t\t\tthis.faceVertexUvs[ i ].push( uvsCopy );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tmergeMesh: function ( mesh ) {\n\n\t\tif ( ! ( mesh && mesh.isMesh ) ) {\n\n\t\t\tconsole.error( 'THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.', mesh );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( mesh.matrixAutoUpdate ) mesh.updateMatrix();\n\n\t\tthis.merge( mesh.geometry, mesh.matrix );\n\n\t},\n\n\t/*\n\t * Checks for duplicate vertices with hashmap.\n\t * Duplicated vertices are removed\n\t * and faces' vertices are updated.\n\t */\n\n\tmergeVertices: function () {\n\n\t\tvar verticesMap = {}; // Hashmap for looking up vertices by position coordinates (and making sure they are unique)\n\t\tvar unique = [], changes = [];\n\n\t\tvar v, key;\n\t\tvar precisionPoints = 4; // number of decimal points, e.g. 4 for epsilon of 0.0001\n\t\tvar precision = Math.pow( 10, precisionPoints );\n\t\tvar i, il, face;\n\t\tvar indices, j, jl;\n\n\t\tfor ( i = 0, il = this.vertices.length; i < il; i ++ ) {\n\n\t\t\tv = this.vertices[ i ];\n\t\t\tkey = Math.round( v.x * precision ) + '_' + Math.round( v.y * precision ) + '_' + Math.round( v.z * precision );\n\n\t\t\tif ( verticesMap[ key ] === undefined ) {\n\n\t\t\t\tverticesMap[ key ] = i;\n\t\t\t\tunique.push( this.vertices[ i ] );\n\t\t\t\tchanges[ i ] = unique.length - 1;\n\n\t\t\t} else {\n\n\t\t\t\t//console.log('Duplicate vertex found. ', i, ' could be using ', verticesMap[key]);\n\t\t\t\tchanges[ i ] = changes[ verticesMap[ key ] ];\n\n\t\t\t}\n\n\t\t}\n\n\n\t\t// if faces are completely degenerate after merging vertices, we\n\t\t// have to remove them from the geometry.\n\t\tvar faceIndicesToRemove = [];\n\n\t\tfor ( i = 0, il = this.faces.length; i < il; i ++ ) {\n\n\t\t\tface = this.faces[ i ];\n\n\t\t\tface.a = changes[ face.a ];\n\t\t\tface.b = changes[ face.b ];\n\t\t\tface.c = changes[ face.c ];\n\n\t\t\tindices = [ face.a, face.b, face.c ];\n\n\t\t\t// if any duplicate vertices are found in a Face3\n\t\t\t// we have to remove the face as nothing can be saved\n\t\t\tfor ( var n = 0; n < 3; n ++ ) {\n\n\t\t\t\tif ( indices[ n ] === indices[ ( n + 1 ) % 3 ] ) {\n\n\t\t\t\t\tfaceIndicesToRemove.push( i );\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( i = faceIndicesToRemove.length - 1; i >= 0; i -- ) {\n\n\t\t\tvar idx = faceIndicesToRemove[ i ];\n\n\t\t\tthis.faces.splice( idx, 1 );\n\n\t\t\tfor ( j = 0, jl = this.faceVertexUvs.length; j < jl; j ++ ) {\n\n\t\t\t\tthis.faceVertexUvs[ j ].splice( idx, 1 );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Use unique set of vertices\n\n\t\tvar diff = this.vertices.length - unique.length;\n\t\tthis.vertices = unique;\n\t\treturn diff;\n\n\t},\n\n\tsetFromPoints: function ( points ) {\n\n\t\tthis.vertices = [];\n\n\t\tfor ( var i = 0, l = points.length; i < l; i ++ ) {\n\n\t\t\tvar point = points[ i ];\n\t\t\tthis.vertices.push( new Vector3( point.x, point.y, point.z || 0 ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsortFacesByMaterialIndex: function () {\n\n\t\tvar faces = this.faces;\n\t\tvar length = faces.length;\n\n\t\t// tag faces\n\n\t\tfor ( var i = 0; i < length; i ++ ) {\n\n\t\t\tfaces[ i ]._id = i;\n\n\t\t}\n\n\t\t// sort faces\n\n\t\tfunction materialIndexSort( a, b ) {\n\n\t\t\treturn a.materialIndex - b.materialIndex;\n\n\t\t}\n\n\t\tfaces.sort( materialIndexSort );\n\n\t\t// sort uvs\n\n\t\tvar uvs1 = this.faceVertexUvs[ 0 ];\n\t\tvar uvs2 = this.faceVertexUvs[ 1 ];\n\n\t\tvar newUvs1, newUvs2;\n\n\t\tif ( uvs1 && uvs1.length === length ) newUvs1 = [];\n\t\tif ( uvs2 && uvs2.length === length ) newUvs2 = [];\n\n\t\tfor ( var i = 0; i < length; i ++ ) {\n\n\t\t\tvar id = faces[ i ]._id;\n\n\t\t\tif ( newUvs1 ) newUvs1.push( uvs1[ id ] );\n\t\t\tif ( newUvs2 ) newUvs2.push( uvs2[ id ] );\n\n\t\t}\n\n\t\tif ( newUvs1 ) this.faceVertexUvs[ 0 ] = newUvs1;\n\t\tif ( newUvs2 ) this.faceVertexUvs[ 1 ] = newUvs2;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tvar data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Geometry',\n\t\t\t\tgenerator: 'Geometry.toJSON'\n\t\t\t}\n\t\t};\n\n\t\t// standard Geometry serialization\n\n\t\tdata.uuid = this.uuid;\n\t\tdata.type = this.type;\n\t\tif ( this.name !== '' ) data.name = this.name;\n\n\t\tif ( this.parameters !== undefined ) {\n\n\t\t\tvar parameters = this.parameters;\n\n\t\t\tfor ( var key in parameters ) {\n\n\t\t\t\tif ( parameters[ key ] !== undefined ) data[ key ] = parameters[ key ];\n\n\t\t\t}\n\n\t\t\treturn data;\n\n\t\t}\n\n\t\tvar vertices = [];\n\n\t\tfor ( var i = 0; i < this.vertices.length; i ++ ) {\n\n\t\t\tvar vertex = this.vertices[ i ];\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t}\n\n\t\tvar faces = [];\n\t\tvar normals = [];\n\t\tvar normalsHash = {};\n\t\tvar colors = [];\n\t\tvar colorsHash = {};\n\t\tvar uvs = [];\n\t\tvar uvsHash = {};\n\n\t\tfor ( var i = 0; i < this.faces.length; i ++ ) {\n\n\t\t\tvar face = this.faces[ i ];\n\n\t\t\tvar hasMaterial = true;\n\t\t\tvar hasFaceUv = false; // deprecated\n\t\t\tvar hasFaceVertexUv = this.faceVertexUvs[ 0 ][ i ] !== undefined;\n\t\t\tvar hasFaceNormal = face.normal.length() > 0;\n\t\t\tvar hasFaceVertexNormal = face.vertexNormals.length > 0;\n\t\t\tvar hasFaceColor = face.color.r !== 1 || face.color.g !== 1 || face.color.b !== 1;\n\t\t\tvar hasFaceVertexColor = face.vertexColors.length > 0;\n\n\t\t\tvar faceType = 0;\n\n\t\t\tfaceType = setBit( faceType, 0, 0 ); // isQuad\n\t\t\tfaceType = setBit( faceType, 1, hasMaterial );\n\t\t\tfaceType = setBit( faceType, 2, hasFaceUv );\n\t\t\tfaceType = setBit( faceType, 3, hasFaceVertexUv );\n\t\t\tfaceType = setBit( faceType, 4, hasFaceNormal );\n\t\t\tfaceType = setBit( faceType, 5, hasFaceVertexNormal );\n\t\t\tfaceType = setBit( faceType, 6, hasFaceColor );\n\t\t\tfaceType = setBit( faceType, 7, hasFaceVertexColor );\n\n\t\t\tfaces.push( faceType );\n\t\t\tfaces.push( face.a, face.b, face.c );\n\t\t\tfaces.push( face.materialIndex );\n\n\t\t\tif ( hasFaceVertexUv ) {\n\n\t\t\t\tvar faceVertexUvs = this.faceVertexUvs[ 0 ][ i ];\n\n\t\t\t\tfaces.push(\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 0 ] ),\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 1 ] ),\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 2 ] )\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t\tif ( hasFaceNormal ) {\n\n\t\t\t\tfaces.push( getNormalIndex( face.normal ) );\n\n\t\t\t}\n\n\t\t\tif ( hasFaceVertexNormal ) {\n\n\t\t\t\tvar vertexNormals = face.vertexNormals;\n\n\t\t\t\tfaces.push(\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 0 ] ),\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 1 ] ),\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 2 ] )\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t\tif ( hasFaceColor ) {\n\n\t\t\t\tfaces.push( getColorIndex( face.color ) );\n\n\t\t\t}\n\n\t\t\tif ( hasFaceVertexColor ) {\n\n\t\t\t\tvar vertexColors = face.vertexColors;\n\n\t\t\t\tfaces.push(\n\t\t\t\t\tgetColorIndex( vertexColors[ 0 ] ),\n\t\t\t\t\tgetColorIndex( vertexColors[ 1 ] ),\n\t\t\t\t\tgetColorIndex( vertexColors[ 2 ] )\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction setBit( value, position, enabled ) {\n\n\t\t\treturn enabled ? value | ( 1 << position ) : value & ( ~ ( 1 << position ) );\n\n\t\t}\n\n\t\tfunction getNormalIndex( normal ) {\n\n\t\t\tvar hash = normal.x.toString() + normal.y.toString() + normal.z.toString();\n\n\t\t\tif ( normalsHash[ hash ] !== undefined ) {\n\n\t\t\t\treturn normalsHash[ hash ];\n\n\t\t\t}\n\n\t\t\tnormalsHash[ hash ] = normals.length / 3;\n\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\treturn normalsHash[ hash ];\n\n\t\t}\n\n\t\tfunction getColorIndex( color ) {\n\n\t\t\tvar hash = color.r.toString() + color.g.toString() + color.b.toString();\n\n\t\t\tif ( colorsHash[ hash ] !== undefined ) {\n\n\t\t\t\treturn colorsHash[ hash ];\n\n\t\t\t}\n\n\t\t\tcolorsHash[ hash ] = colors.length;\n\t\t\tcolors.push( color.getHex() );\n\n\t\t\treturn colorsHash[ hash ];\n\n\t\t}\n\n\t\tfunction getUvIndex( uv ) {\n\n\t\t\tvar hash = uv.x.toString() + uv.y.toString();\n\n\t\t\tif ( uvsHash[ hash ] !== undefined ) {\n\n\t\t\t\treturn uvsHash[ hash ];\n\n\t\t\t}\n\n\t\t\tuvsHash[ hash ] = uvs.length / 2;\n\t\t\tuvs.push( uv.x, uv.y );\n\n\t\t\treturn uvsHash[ hash ];\n\n\t\t}\n\n\t\tdata.data = {};\n\n\t\tdata.data.vertices = vertices;\n\t\tdata.data.normals = normals;\n\t\tif ( colors.length > 0 ) data.data.colors = colors;\n\t\tif ( uvs.length > 0 ) data.data.uvs = [ uvs ]; // temporal backward compatibility\n\t\tdata.data.faces = faces;\n\n\t\treturn data;\n\n\t},\n\n\tclone: function () {\n\n\t\t/*\n\t\t // Handle primitives\n\n\t\t var parameters = this.parameters;\n\n\t\t if ( parameters !== undefined ) {\n\n\t\t var values = [];\n\n\t\t for ( var key in parameters ) {\n\n\t\t values.push( parameters[ key ] );\n\n\t\t }\n\n\t\t var geometry = Object.create( this.constructor.prototype );\n\t\t this.constructor.apply( geometry, values );\n\t\t return geometry;\n\n\t\t }\n\n\t\t return new this.constructor().copy( this );\n\t\t */\n\n\t\treturn new Geometry().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tvar i, il, j, jl, k, kl;\n\n\t\t// reset\n\n\t\tthis.vertices = [];\n\t\tthis.colors = [];\n\t\tthis.faces = [];\n\t\tthis.faceVertexUvs = [[]];\n\t\tthis.morphTargets = [];\n\t\tthis.morphNormals = [];\n\t\tthis.skinWeights = [];\n\t\tthis.skinIndices = [];\n\t\tthis.lineDistances = [];\n\t\tthis.boundingBox = null;\n\t\tthis.boundingSphere = null;\n\n\t\t// name\n\n\t\tthis.name = source.name;\n\n\t\t// vertices\n\n\t\tvar vertices = source.vertices;\n\n\t\tfor ( i = 0, il = vertices.length; i < il; i ++ ) {\n\n\t\t\tthis.vertices.push( vertices[ i ].clone() );\n\n\t\t}\n\n\t\t// colors\n\n\t\tvar colors = source.colors;\n\n\t\tfor ( i = 0, il = colors.length; i < il; i ++ ) {\n\n\t\t\tthis.colors.push( colors[ i ].clone() );\n\n\t\t}\n\n\t\t// faces\n\n\t\tvar faces = source.faces;\n\n\t\tfor ( i = 0, il = faces.length; i < il; i ++ ) {\n\n\t\t\tthis.faces.push( faces[ i ].clone() );\n\n\t\t}\n\n\t\t// face vertex uvs\n\n\t\tfor ( i = 0, il = source.faceVertexUvs.length; i < il; i ++ ) {\n\n\t\t\tvar faceVertexUvs = source.faceVertexUvs[ i ];\n\n\t\t\tif ( this.faceVertexUvs[ i ] === undefined ) {\n\n\t\t\t\tthis.faceVertexUvs[ i ] = [];\n\n\t\t\t}\n\n\t\t\tfor ( j = 0, jl = faceVertexUvs.length; j < jl; j ++ ) {\n\n\t\t\t\tvar uvs = faceVertexUvs[ j ], uvsCopy = [];\n\n\t\t\t\tfor ( k = 0, kl = uvs.length; k < kl; k ++ ) {\n\n\t\t\t\t\tvar uv = uvs[ k ];\n\n\t\t\t\t\tuvsCopy.push( uv.clone() );\n\n\t\t\t\t}\n\n\t\t\t\tthis.faceVertexUvs[ i ].push( uvsCopy );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// morph targets\n\n\t\tvar morphTargets = false;\n\n\t\tfor ( i = 0, il = morphTargets.length; i < il; i ++ ) {\n\n\t\t\tvar morphTarget = {};\n\t\t\tmorphTarget.name = morphTargets[ i ].name;\n\n\t\t\t// vertices\n\n\t\t\tif ( morphTargets[ i ].vertices !== undefined ) {\n\n\t\t\t\tmorphTarget.vertices = [];\n\n\t\t\t\tfor ( j = 0, jl = morphTargets[ i ].vertices.length; j < jl; j ++ ) {\n\n\t\t\t\t\tmorphTarget.vertices.push( morphTargets[ i ].vertices[ j ].clone() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// normals\n\n\t\t\tif ( morphTargets[ i ].normals !== undefined ) {\n\n\t\t\t\tmorphTarget.normals = [];\n\n\t\t\t\tfor ( j = 0, jl = morphTargets[ i ].normals.length; j < jl; j ++ ) {\n\n\t\t\t\t\tmorphTarget.normals.push( morphTargets[ i ].normals[ j ].clone() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfalse.push( morphTarget );\n\n\t\t}\n\n\t\t// morph normals\n\n\t\tvar morphNormals = source.morphNormals;\n\n\t\tfor ( i = 0, il = morphNormals.length; i < il; i ++ ) {\n\n\t\t\tvar morphNormal = {};\n\n\t\t\t// vertex normals\n\n\t\t\tif ( morphNormals[ i ].vertexNormals !== undefined ) {\n\n\t\t\t\tmorphNormal.vertexNormals = [];\n\n\t\t\t\tfor ( j = 0, jl = morphNormals[ i ].vertexNormals.length; j < jl; j ++ ) {\n\n\t\t\t\t\tvar srcVertexNormal = morphNormals[ i ].vertexNormals[ j ];\n\t\t\t\t\tvar destVertexNormal = {};\n\n\t\t\t\t\tdestVertexNormal.a = srcVertexNormal.a.clone();\n\t\t\t\t\tdestVertexNormal.b = srcVertexNormal.b.clone();\n\t\t\t\t\tdestVertexNormal.c = srcVertexNormal.c.clone();\n\n\t\t\t\t\tmorphNormal.vertexNormals.push( destVertexNormal );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// face normals\n\n\t\t\tif ( morphNormals[ i ].faceNormals !== undefined ) {\n\n\t\t\t\tmorphNormal.faceNormals = [];\n\n\t\t\t\tfor ( j = 0, jl = morphNormals[ i ].faceNormals.length; j < jl; j ++ ) {\n\n\t\t\t\t\tmorphNormal.faceNormals.push( morphNormals[ i ].faceNormals[ j ].clone() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.morphNormals.push( morphNormal );\n\n\t\t}\n\n\t\t// skin weights\n\n\t\tvar skinWeights = source.skinWeights;\n\n\t\tfor ( i = 0, il = skinWeights.length; i < il; i ++ ) {\n\n\t\t\tthis.skinWeights.push( skinWeights[ i ].clone() );\n\n\t\t}\n\n\t\t// skin indices\n\n\t\tvar skinIndices = source.skinIndices;\n\n\t\tfor ( i = 0, il = skinIndices.length; i < il; i ++ ) {\n\n\t\t\tthis.skinIndices.push( skinIndices[ i ].clone() );\n\n\t\t}\n\n\t\t// line distances\n\n\t\tvar lineDistances = source.lineDistances;\n\n\t\tfor ( i = 0, il = lineDistances.length; i < il; i ++ ) {\n\n\t\t\tthis.lineDistances.push( lineDistances[ i ] );\n\n\t\t}\n\n\t\t// bounding box\n\n\t\tvar boundingBox = source.boundingBox;\n\n\t\tif ( boundingBox !== null ) {\n\n\t\t\tthis.boundingBox = boundingBox.clone();\n\n\t\t}\n\n\t\t// bounding sphere\n\n\t\tvar boundingSphere = source.boundingSphere;\n\n\t\tif ( boundingSphere !== null ) {\n\n\t\t\tthis.boundingSphere = boundingSphere.clone();\n\n\t\t}\n\n\t\t// update flags\n\n\t\tthis.elementsNeedUpdate = source.elementsNeedUpdate;\n\t\tthis.verticesNeedUpdate = source.verticesNeedUpdate;\n\t\tthis.uvsNeedUpdate = source.uvsNeedUpdate;\n\t\tthis.normalsNeedUpdate = source.normalsNeedUpdate;\n\t\tthis.colorsNeedUpdate = source.colorsNeedUpdate;\n\t\tthis.lineDistancesNeedUpdate = source.lineDistancesNeedUpdate;\n\t\tthis.groupsNeedUpdate = source.groupsNeedUpdate;\n\n\t\treturn this;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author Mugen87 / https://github.com/Mugen87\n */\n\n// BoxGeometry\n\nclass BoxGeometry extends Geometry {\n\n\tconstructor( width, height, depth, widthSegments, heightSegments, depthSegments ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'BoxGeometry';\n\n\t\tthis.parameters = {\n\t\t\twidth: width,\n\t\t\theight: height,\n\t\t\tdepth: depth,\n\t\t\twidthSegments: widthSegments,\n\t\t\theightSegments: heightSegments,\n\t\t\tdepthSegments: depthSegments\n\t\t};\n\n\t\tthis.fromBufferGeometry( new BoxBufferGeometry( width, height, depth, widthSegments, heightSegments, depthSegments ) );\n\t\tthis.mergeVertices();\n\n\t}\n\n}\n\n// BoxBufferGeometry\n\nclass BoxBufferGeometry extends BufferGeometry {\n\n\tconstructor( width, height, depth, widthSegments, heightSegments, depthSegments ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'BoxBufferGeometry';\n\n\t\tthis.parameters = {\n\t\t\twidth: width,\n\t\t\theight: height,\n\t\t\tdepth: depth,\n\t\t\twidthSegments: widthSegments,\n\t\t\theightSegments: heightSegments,\n\t\t\tdepthSegments: depthSegments\n\t\t};\n\n\t\tvar scope = this;\n\n\t\twidth = width || 1;\n\t\theight = height || 1;\n\t\tdepth = depth || 1;\n\n\t\t// segments\n\n\t\twidthSegments = Math.floor( widthSegments ) || 1;\n\t\theightSegments = Math.floor( heightSegments ) || 1;\n\t\tdepthSegments = Math.floor( depthSegments ) || 1;\n\n\t\t// buffers\n\n\t\tvar indices = [];\n\t\tvar vertices = [];\n\t\tvar normals = [];\n\t\tvar uvs = [];\n\n\t\t// helper variables\n\n\t\tvar numberOfVertices = 0;\n\t\tvar groupStart = 0;\n\n\t\t// build each side of the box geometry\n\n\t\tbuildPlane( 'z', 'y', 'x', - 1, - 1, depth, height, width, depthSegments, heightSegments, 0 ); // px\n\t\tbuildPlane( 'z', 'y', 'x', 1, - 1, depth, height, - width, depthSegments, heightSegments, 1 ); // nx\n\t\tbuildPlane( 'x', 'z', 'y', 1, 1, width, depth, height, widthSegments, depthSegments, 2 ); // py\n\t\tbuildPlane( 'x', 'z', 'y', 1, - 1, width, depth, - height, widthSegments, depthSegments, 3 ); // ny\n\t\tbuildPlane( 'x', 'y', 'z', 1, - 1, width, height, depth, widthSegments, heightSegments, 4 ); // pz\n\t\tbuildPlane( 'x', 'y', 'z', - 1, - 1, width, height, - depth, widthSegments, heightSegments, 5 ); // nz\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t\tfunction buildPlane( u, v, w, udir, vdir, width, height, depth, gridX, gridY, materialIndex ) {\n\n\t\t\tvar segmentWidth = width / gridX;\n\t\t\tvar segmentHeight = height / gridY;\n\n\t\t\tvar widthHalf = width / 2;\n\t\t\tvar heightHalf = height / 2;\n\t\t\tvar depthHalf = depth / 2;\n\n\t\t\tvar gridX1 = gridX + 1;\n\t\t\tvar gridY1 = gridY + 1;\n\n\t\t\tvar vertexCounter = 0;\n\t\t\tvar groupCount = 0;\n\n\t\t\tvar ix, iy;\n\n\t\t\tvar vector = new Vector3();\n\n\t\t\t// generate vertices, normals and uvs\n\n\t\t\tfor ( iy = 0; iy < gridY1; iy ++ ) {\n\n\t\t\t\tvar y = iy * segmentHeight - heightHalf;\n\n\t\t\t\tfor ( ix = 0; ix < gridX1; ix ++ ) {\n\n\t\t\t\t\tvar x = ix * segmentWidth - widthHalf;\n\n\t\t\t\t\t// set values to correct vector component\n\n\t\t\t\t\tvector[ u ] = x * udir;\n\t\t\t\t\tvector[ v ] = y * vdir;\n\t\t\t\t\tvector[ w ] = depthHalf;\n\n\t\t\t\t\t// now apply vector to vertex buffer\n\n\t\t\t\t\tvertices.push( vector.x, vector.y, vector.z );\n\n\t\t\t\t\t// set values to correct vector component\n\n\t\t\t\t\tvector[ u ] = 0;\n\t\t\t\t\tvector[ v ] = 0;\n\t\t\t\t\tvector[ w ] = depth > 0 ? 1 : - 1;\n\n\t\t\t\t\t// now apply vector to normal buffer\n\n\t\t\t\t\tnormals.push( vector.x, vector.y, vector.z );\n\n\t\t\t\t\t// uvs\n\n\t\t\t\t\tuvs.push( ix / gridX );\n\t\t\t\t\tuvs.push( 1 - ( iy / gridY ) );\n\n\t\t\t\t\t// counters\n\n\t\t\t\t\tvertexCounter += 1;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// indices\n\n\t\t\t// 1. you need three indices to draw a single face\n\t\t\t// 2. a single segment consists of two faces\n\t\t\t// 3. so we need to generate six (2*3) indices per segment\n\n\t\t\tfor ( iy = 0; iy < gridY; iy ++ ) {\n\n\t\t\t\tfor ( ix = 0; ix < gridX; ix ++ ) {\n\n\t\t\t\t\tvar a = numberOfVertices + ix + gridX1 * iy;\n\t\t\t\t\tvar b = numberOfVertices + ix + gridX1 * ( iy + 1 );\n\t\t\t\t\tvar c = numberOfVertices + ( ix + 1 ) + gridX1 * ( iy + 1 );\n\t\t\t\t\tvar d = numberOfVertices + ( ix + 1 ) + gridX1 * iy;\n\n\t\t\t\t\t// faces\n\n\t\t\t\t\tindices.push( a, b, d );\n\t\t\t\t\tindices.push( b, c, d );\n\n\t\t\t\t\t// increase counter\n\n\t\t\t\t\tgroupCount += 6;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// add a group to the geometry. this will ensure multi material support\n\n\t\t\tscope.addGroup( groupStart, groupCount, materialIndex );\n\n\t\t\t// calculate new start value for groups\n\n\t\t\tgroupStart += groupCount;\n\n\t\t\t// update total number of vertices\n\n\t\t\tnumberOfVertices += vertexCounter;\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * Uniform Utilities\n */\n\nfunction cloneUniforms( src ) {\n\n\tvar dst = {};\n\n\tfor ( var u in src ) {\n\n\t\tdst[ u ] = {};\n\n\t\tfor ( var p in src[ u ] ) {\n\n\t\t\tvar property = src[ u ][ p ];\n\n\t\t\tif ( property && ( property.isColor ||\n\t\t\t\tproperty.isMatrix3 || property.isMatrix4 ||\n\t\t\t\tproperty.isVector2 || property.isVector3 || property.isVector4 ||\n\t\t\t\tproperty.isTexture ) ) {\n\n\t\t\t\tdst[ u ][ p ] = property.clone();\n\n\t\t\t} else if ( Array.isArray( property ) ) {\n\n\t\t\t\tdst[ u ][ p ] = property.slice();\n\n\t\t\t} else {\n\n\t\t\t\tdst[ u ][ p ] = property;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\treturn dst;\n\n}\n\nfunction mergeUniforms( uniforms ) {\n\n\tvar merged = {};\n\n\tfor ( var u = 0; u < uniforms.length; u ++ ) {\n\n\t\tvar tmp = cloneUniforms( uniforms[ u ] );\n\n\t\tfor ( var p in tmp ) {\n\n\t\t\tmerged[ p ] = tmp[ p ];\n\n\t\t}\n\n\t}\n\n\treturn merged;\n\n}\n\n// Legacy\n\nvar UniformsUtils = { clone: cloneUniforms, merge: mergeUniforms };\n\nvar default_vertex = \"\";\n\nvar default_fragment = \"\";\n\n/**\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  defines: { \"label\" : \"value\" },\n *  uniforms: { \"parameter1\": { value: 1.0 }, \"parameter2\": { value2: 2 } },\n *\n *  fragmentShader: <string>,\n *  vertexShader: <string>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  lights: <bool>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\n\nfunction ShaderMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'ShaderMaterial';\n\n\tthis.defines = {};\n\tthis.uniforms = {};\n\n\tthis.vertexShader = default_vertex;\n\tthis.fragmentShader = default_fragment;\n\n\tthis.linewidth = 1;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\n\tthis.fog = false; // set to use scene fog\n\tthis.lights = false; // set to use scene lights\n\tthis.clipping = false; // set to use user-defined clipping planes\n\n\tthis.skinning = false; // set to use skinning attribute streams\n\tthis.morphTargets = false; // set to use morph targets\n\tthis.morphNormals = false; // set to use morph normals\n\n\tthis.extensions = {\n\t\tderivatives: false, // set to use derivatives\n\t\tfragDepth: false, // set to use fragment depth values\n\t\tdrawBuffers: false, // set to use draw buffers\n\t\tshaderTextureLOD: false // set to use shader texture LOD\n\t};\n\n\t// When rendered geometry doesn't include these attributes but the material does,\n\t// use these default values in WebGL. This avoids errors when buffer data is missing.\n\tthis.defaultAttributeValues = {\n\t\t'color': [ 1, 1, 1 ],\n\t\t'uv': [ 0, 0 ],\n\t\t'uv2': [ 0, 0 ]\n\t};\n\n\tthis.index0AttributeName = undefined;\n\tthis.uniformsNeedUpdate = false;\n\n\tif ( parameters !== undefined ) {\n\n\t\tif ( parameters.attributes !== undefined ) {\n\n\t\t\tconsole.error( 'THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead.' );\n\n\t\t}\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n}\n\nShaderMaterial.prototype = Object.create( Material.prototype );\nShaderMaterial.prototype.constructor = ShaderMaterial;\n\nShaderMaterial.prototype.isShaderMaterial = true;\n\nShaderMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.fragmentShader = source.fragmentShader;\n\tthis.vertexShader = source.vertexShader;\n\n\tthis.uniforms = cloneUniforms( source.uniforms );\n\n\tthis.defines = Object.assign( {}, source.defines );\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\n\tthis.lights = source.lights;\n\tthis.clipping = source.clipping;\n\n\tthis.skinning = source.skinning;\n\n\tthis.morphTargets = source.morphTargets;\n\tthis.morphNormals = source.morphNormals;\n\n\tthis.extensions = source.extensions;\n\n\treturn this;\n\n};\n\nShaderMaterial.prototype.toJSON = function ( meta ) {\n\n\tvar data = Material.prototype.toJSON.call( this, meta );\n\n\tdata.uniforms = {};\n\n\tfor ( var name in this.uniforms ) {\n\n\t\tvar uniform = this.uniforms[ name ];\n\t\tvar value = uniform.value;\n\n\t\tif ( value && value.isTexture ) {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\ttype: 't',\n\t\t\t\tvalue: value.toJSON( meta ).uuid\n\t\t\t};\n\n\t\t} else if ( value && value.isColor ) {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\ttype: 'c',\n\t\t\t\tvalue: value.getHex()\n\t\t\t};\n\n\t\t} else if ( value && value.isVector2 ) {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\ttype: 'v2',\n\t\t\t\tvalue: value.toArray()\n\t\t\t};\n\n\t\t} else if ( value && value.isVector3 ) {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\ttype: 'v3',\n\t\t\t\tvalue: value.toArray()\n\t\t\t};\n\n\t\t} else if ( value && value.isVector4 ) {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\ttype: 'v4',\n\t\t\t\tvalue: value.toArray()\n\t\t\t};\n\n\t\t} else if ( value && value.isMatrix3 ) {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\ttype: 'm3',\n\t\t\t\tvalue: value.toArray()\n\t\t\t};\n\n\t\t} else if ( value && value.isMatrix4 ) {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\ttype: 'm4',\n\t\t\t\tvalue: value.toArray()\n\t\t\t};\n\n\t\t} else {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\tvalue: value\n\t\t\t};\n\n\t\t\t// note: the array variants v2v, v3v, v4v, m4v and tv are not supported so far\n\n\t\t}\n\n\t}\n\n\tif ( Object.keys( this.defines ).length > 0 ) data.defines = this.defines;\n\n\tdata.vertexShader = this.vertexShader;\n\tdata.fragmentShader = this.fragmentShader;\n\n\tvar extensions = {};\n\n\tfor ( var key in this.extensions ) {\n\n\t\tif ( this.extensions[ key ] === true ) extensions[ key ] = true;\n\n\t}\n\n\tif ( Object.keys( extensions ).length > 0 ) data.extensions = extensions;\n\n\treturn data;\n\n};\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author mikael emtinger / http://gomo.se/\n * @author WestLangley / http://github.com/WestLangley\n*/\n\nfunction Camera() {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Camera';\n\n\tthis.matrixWorldInverse = new Matrix4();\n\n\tthis.projectionMatrix = new Matrix4();\n\tthis.projectionMatrixInverse = new Matrix4();\n\n}\n\nCamera.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Camera,\n\n\tisCamera: true,\n\n\tcopy: function ( source, recursive ) {\n\n\t\tObject3D.prototype.copy.call( this, source, recursive );\n\n\t\tthis.matrixWorldInverse.copy( source.matrixWorldInverse );\n\n\t\tthis.projectionMatrix.copy( source.projectionMatrix );\n\t\tthis.projectionMatrixInverse.copy( source.projectionMatrixInverse );\n\n\t\treturn this;\n\n\t},\n\n\tgetWorldDirection: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Camera: .getWorldDirection() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\tthis.updateMatrixWorld( true );\n\n\t\tvar e = this.matrixWorld.elements;\n\n\t\treturn target.set( - e[ 8 ], - e[ 9 ], - e[ 10 ] ).normalize();\n\n\t},\n\n\tupdateMatrixWorld: function ( force ) {\n\n\t\tObject3D.prototype.updateMatrixWorld.call( this, force );\n\n\t\tthis.matrixWorldInverse.getInverse( this.matrixWorld );\n\n\t},\n\n\tupdateWorldMatrix: function ( updateParents, updateChildren ) {\n\n\t\tObject3D.prototype.updateWorldMatrix.call( this, updateParents, updateChildren );\n\n\t\tthis.matrixWorldInverse.getInverse( this.matrixWorld );\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author greggman / http://games.greggman.com/\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * @author tschw\n */\n\nfunction PerspectiveCamera( fov, aspect, near, far ) {\n\n\tCamera.call( this );\n\n\tthis.type = 'PerspectiveCamera';\n\n\tthis.fov = fov !== undefined ? fov : 50;\n\tthis.zoom = 1;\n\n\tthis.near = near !== undefined ? near : 0.1;\n\tthis.far = far !== undefined ? far : 2000;\n\tthis.focus = 10;\n\n\tthis.aspect = aspect !== undefined ? aspect : 1;\n\tthis.view = null;\n\n\tthis.filmGauge = 35;\t// width of the film (default in millimeters)\n\tthis.filmOffset = 0;\t// horizontal film offset (same unit as gauge)\n\n\tthis.updateProjectionMatrix();\n\n}\n\nPerspectiveCamera.prototype = Object.assign( Object.create( Camera.prototype ), {\n\n\tconstructor: PerspectiveCamera,\n\n\tisPerspectiveCamera: true,\n\n\tcopy: function ( source, recursive ) {\n\n\t\tCamera.prototype.copy.call( this, source, recursive );\n\n\t\tthis.fov = source.fov;\n\t\tthis.zoom = source.zoom;\n\n\t\tthis.near = source.near;\n\t\tthis.far = source.far;\n\t\tthis.focus = source.focus;\n\n\t\tthis.aspect = source.aspect;\n\t\tthis.view = source.view === null ? null : Object.assign( {}, source.view );\n\n\t\tthis.filmGauge = source.filmGauge;\n\t\tthis.filmOffset = source.filmOffset;\n\n\t\treturn this;\n\n\t},\n\n\t/**\n\t * Sets the FOV by focal length in respect to the current .filmGauge.\n\t *\n\t * The default film gauge is 35, so that the focal length can be specified for\n\t * a 35mm (full frame) camera.\n\t *\n\t * Values for focal length and film gauge must have the same unit.\n\t */\n\tsetFocalLength: function ( focalLength ) {\n\n\t\t// see http://www.bobatkins.com/photography/technical/field_of_view.html\n\t\tvar vExtentSlope = 0.5 * this.getFilmHeight() / focalLength;\n\n\t\tthis.fov = MathUtils.RAD2DEG * 2 * Math.atan( vExtentSlope );\n\t\tthis.updateProjectionMatrix();\n\n\t},\n\n\t/**\n\t * Calculates the focal length from the current .fov and .filmGauge.\n\t */\n\tgetFocalLength: function () {\n\n\t\tvar vExtentSlope = Math.tan( MathUtils.DEG2RAD * 0.5 * this.fov );\n\n\t\treturn 0.5 * this.getFilmHeight() / vExtentSlope;\n\n\t},\n\n\tgetEffectiveFOV: function () {\n\n\t\treturn MathUtils.RAD2DEG * 2 * Math.atan(\n\t\t\tMath.tan( MathUtils.DEG2RAD * 0.5 * this.fov ) / this.zoom );\n\n\t},\n\n\tgetFilmWidth: function () {\n\n\t\t// film not completely covered in portrait format (aspect < 1)\n\t\treturn this.filmGauge * Math.min( this.aspect, 1 );\n\n\t},\n\n\tgetFilmHeight: function () {\n\n\t\t// film not completely covered in landscape format (aspect > 1)\n\t\treturn this.filmGauge / Math.max( this.aspect, 1 );\n\n\t},\n\n\t/**\n\t * Sets an offset in a larger frustum. This is useful for multi-window or\n\t * multi-monitor/multi-machine setups.\n\t *\n\t * For example, if you have 3x2 monitors and each monitor is 1920x1080 and\n\t * the monitors are in grid like this\n\t *\n\t *   +---+---+---+\n\t *   | A | B | C |\n\t *   +---+---+---+\n\t *   | D | E | F |\n\t *   +---+---+---+\n\t *\n\t * then for each monitor you would call it like this\n\t *\n\t *   var w = 1920;\n\t *   var h = 1080;\n\t *   var fullWidth = w * 3;\n\t *   var fullHeight = h * 2;\n\t *\n\t *   --A--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 0, h * 0, w, h );\n\t *   --B--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 1, h * 0, w, h );\n\t *   --C--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 2, h * 0, w, h );\n\t *   --D--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 0, h * 1, w, h );\n\t *   --E--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 1, h * 1, w, h );\n\t *   --F--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 2, h * 1, w, h );\n\t *\n\t *   Note there is no reason monitors have to be the same size or in a grid.\n\t */\n\tsetViewOffset: function ( fullWidth, fullHeight, x, y, width, height ) {\n\n\t\tthis.aspect = fullWidth / fullHeight;\n\n\t\tif ( this.view === null ) {\n\n\t\t\tthis.view = {\n\t\t\t\tenabled: true,\n\t\t\t\tfullWidth: 1,\n\t\t\t\tfullHeight: 1,\n\t\t\t\toffsetX: 0,\n\t\t\t\toffsetY: 0,\n\t\t\t\twidth: 1,\n\t\t\t\theight: 1\n\t\t\t};\n\n\t\t}\n\n\t\tthis.view.enabled = true;\n\t\tthis.view.fullWidth = fullWidth;\n\t\tthis.view.fullHeight = fullHeight;\n\t\tthis.view.offsetX = x;\n\t\tthis.view.offsetY = y;\n\t\tthis.view.width = width;\n\t\tthis.view.height = height;\n\n\t\tthis.updateProjectionMatrix();\n\n\t},\n\n\tclearViewOffset: function () {\n\n\t\tif ( this.view !== null ) {\n\n\t\t\tthis.view.enabled = false;\n\n\t\t}\n\n\t\tthis.updateProjectionMatrix();\n\n\t},\n\n\tupdateProjectionMatrix: function () {\n\n\t\tvar near = this.near,\n\t\t\ttop = near * Math.tan( MathUtils.DEG2RAD * 0.5 * this.fov ) / this.zoom,\n\t\t\theight = 2 * top,\n\t\t\twidth = this.aspect * height,\n\t\t\tleft = - 0.5 * width,\n\t\t\tview = this.view;\n\n\t\tif ( this.view !== null && this.view.enabled ) {\n\n\t\t\tvar fullWidth = view.fullWidth,\n\t\t\t\tfullHeight = view.fullHeight;\n\n\t\t\tleft += view.offsetX * width / fullWidth;\n\t\t\ttop -= view.offsetY * height / fullHeight;\n\t\t\twidth *= view.width / fullWidth;\n\t\t\theight *= view.height / fullHeight;\n\n\t\t}\n\n\t\tvar skew = this.filmOffset;\n\t\tif ( skew !== 0 ) left += near * skew / this.getFilmWidth();\n\n\t\tthis.projectionMatrix.makePerspective( left, left + width, top, top - height, near, this.far );\n\n\t\tthis.projectionMatrixInverse.getInverse( this.projectionMatrix );\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tvar data = Object3D.prototype.toJSON.call( this, meta );\n\n\t\tdata.object.fov = this.fov;\n\t\tdata.object.zoom = this.zoom;\n\n\t\tdata.object.near = this.near;\n\t\tdata.object.far = this.far;\n\t\tdata.object.focus = this.focus;\n\n\t\tdata.object.aspect = this.aspect;\n\n\t\tif ( this.view !== null ) data.object.view = Object.assign( {}, this.view );\n\n\t\tdata.object.filmGauge = this.filmGauge;\n\t\tdata.object.filmOffset = this.filmOffset;\n\n\t\treturn data;\n\n\t}\n\n} );\n\n/**\n * Camera for rendering cube maps\n *\t- renders scene into axis-aligned cube\n *\n * @author alteredq / http://alteredqualia.com/\n */\n\nvar fov = 90, aspect = 1;\n\nfunction CubeCamera( near, far, cubeResolution, options ) {\n\n\tObject3D.call( this );\n\n\tthis.type = 'CubeCamera';\n\n\tvar cameraPX = new PerspectiveCamera( fov, aspect, near, far );\n\tcameraPX.up.set( 0, - 1, 0 );\n\tcameraPX.lookAt( new Vector3( 1, 0, 0 ) );\n\tthis.add( cameraPX );\n\n\tvar cameraNX = new PerspectiveCamera( fov, aspect, near, far );\n\tcameraNX.up.set( 0, - 1, 0 );\n\tcameraNX.lookAt( new Vector3( - 1, 0, 0 ) );\n\tthis.add( cameraNX );\n\n\tvar cameraPY = new PerspectiveCamera( fov, aspect, near, far );\n\tcameraPY.up.set( 0, 0, 1 );\n\tcameraPY.lookAt( new Vector3( 0, 1, 0 ) );\n\tthis.add( cameraPY );\n\n\tvar cameraNY = new PerspectiveCamera( fov, aspect, near, far );\n\tcameraNY.up.set( 0, 0, - 1 );\n\tcameraNY.lookAt( new Vector3( 0, - 1, 0 ) );\n\tthis.add( cameraNY );\n\n\tvar cameraPZ = new PerspectiveCamera( fov, aspect, near, far );\n\tcameraPZ.up.set( 0, - 1, 0 );\n\tcameraPZ.lookAt( new Vector3( 0, 0, 1 ) );\n\tthis.add( cameraPZ );\n\n\tvar cameraNZ = new PerspectiveCamera( fov, aspect, near, far );\n\tcameraNZ.up.set( 0, - 1, 0 );\n\tcameraNZ.lookAt( new Vector3( 0, 0, - 1 ) );\n\tthis.add( cameraNZ );\n\n\toptions = options || { format: RGBFormat, magFilter: LinearFilter, minFilter: LinearFilter };\n\n\tthis.renderTarget = new WebGLCubeRenderTarget( cubeResolution, options );\n\tthis.renderTarget.texture.name = \"CubeCamera\";\n\n\tthis.update = function ( renderer, scene ) {\n\n\t\tif ( this.parent === null ) this.updateMatrixWorld();\n\n\t\tvar currentRenderTarget = renderer.getRenderTarget();\n\n\t\tvar renderTarget = this.renderTarget;\n\t\tvar generateMipmaps = renderTarget.texture.generateMipmaps;\n\n\t\trenderTarget.texture.generateMipmaps = false;\n\n\t\trenderer.setRenderTarget( renderTarget, 0 );\n\t\trenderer.render( scene, cameraPX );\n\n\t\trenderer.setRenderTarget( renderTarget, 1 );\n\t\trenderer.render( scene, cameraNX );\n\n\t\trenderer.setRenderTarget( renderTarget, 2 );\n\t\trenderer.render( scene, cameraPY );\n\n\t\trenderer.setRenderTarget( renderTarget, 3 );\n\t\trenderer.render( scene, cameraNY );\n\n\t\trenderer.setRenderTarget( renderTarget, 4 );\n\t\trenderer.render( scene, cameraPZ );\n\n\t\trenderTarget.texture.generateMipmaps = generateMipmaps;\n\n\t\trenderer.setRenderTarget( renderTarget, 5 );\n\t\trenderer.render( scene, cameraNZ );\n\n\t\trenderer.setRenderTarget( currentRenderTarget );\n\n\t};\n\n\tthis.clear = function ( renderer, color, depth, stencil ) {\n\n\t\tvar currentRenderTarget = renderer.getRenderTarget();\n\n\t\tvar renderTarget = this.renderTarget;\n\n\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\trenderer.setRenderTarget( renderTarget, i );\n\n\t\t\trenderer.clear( color, depth, stencil );\n\n\t\t}\n\n\t\trenderer.setRenderTarget( currentRenderTarget );\n\n\t};\n\n}\n\nCubeCamera.prototype = Object.create( Object3D.prototype );\nCubeCamera.prototype.constructor = CubeCamera;\n\nfunction WebGLCubeRenderTarget() {}\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction DataTexture( data, width, height, format, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy, encoding ) {\n\n\tTexture.call( this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding );\n\n\tthis.image = { data: data || null, width: width || 1, height: height || 1 };\n\n\tthis.magFilter = magFilter !== undefined ? magFilter : NearestFilter;\n\tthis.minFilter = minFilter !== undefined ? minFilter : NearestFilter;\n\n\tthis.generateMipmaps = false;\n\tthis.flipY = false;\n\tthis.unpackAlignment = 1;\n\n\tthis.needsUpdate = true;\n\n}\n\nDataTexture.prototype = Object.create( Texture.prototype );\nDataTexture.prototype.constructor = DataTexture;\n\nDataTexture.prototype.isDataTexture = true;\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author bhouston / http://clara.io\n */\n\nvar _sphere$1 = new Sphere();\nvar _vector$5 = new Vector3();\n\nfunction Frustum( p0, p1, p2, p3, p4, p5 ) {\n\n\tthis.planes = [\n\n\t\t( p0 !== undefined ) ? p0 : new Plane(),\n\t\t( p1 !== undefined ) ? p1 : new Plane(),\n\t\t( p2 !== undefined ) ? p2 : new Plane(),\n\t\t( p3 !== undefined ) ? p3 : new Plane(),\n\t\t( p4 !== undefined ) ? p4 : new Plane(),\n\t\t( p5 !== undefined ) ? p5 : new Plane()\n\n\t];\n\n}\n\nObject.assign( Frustum.prototype, {\n\n\tset: function ( p0, p1, p2, p3, p4, p5 ) {\n\n\t\tvar planes = this.planes;\n\n\t\tplanes[ 0 ].copy( p0 );\n\t\tplanes[ 1 ].copy( p1 );\n\t\tplanes[ 2 ].copy( p2 );\n\t\tplanes[ 3 ].copy( p3 );\n\t\tplanes[ 4 ].copy( p4 );\n\t\tplanes[ 5 ].copy( p5 );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( frustum ) {\n\n\t\tvar planes = this.planes;\n\n\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\tplanes[ i ].copy( frustum.planes[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetFromProjectionMatrix: function ( m ) {\n\n\t\tvar planes = this.planes;\n\t\tvar me = m.elements;\n\t\tvar me0 = me[ 0 ], me1 = me[ 1 ], me2 = me[ 2 ], me3 = me[ 3 ];\n\t\tvar me4 = me[ 4 ], me5 = me[ 5 ], me6 = me[ 6 ], me7 = me[ 7 ];\n\t\tvar me8 = me[ 8 ], me9 = me[ 9 ], me10 = me[ 10 ], me11 = me[ 11 ];\n\t\tvar me12 = me[ 12 ], me13 = me[ 13 ], me14 = me[ 14 ], me15 = me[ 15 ];\n\n\t\tplanes[ 0 ].setComponents( me3 - me0, me7 - me4, me11 - me8, me15 - me12 ).normalize();\n\t\tplanes[ 1 ].setComponents( me3 + me0, me7 + me4, me11 + me8, me15 + me12 ).normalize();\n\t\tplanes[ 2 ].setComponents( me3 + me1, me7 + me5, me11 + me9, me15 + me13 ).normalize();\n\t\tplanes[ 3 ].setComponents( me3 - me1, me7 - me5, me11 - me9, me15 - me13 ).normalize();\n\t\tplanes[ 4 ].setComponents( me3 - me2, me7 - me6, me11 - me10, me15 - me14 ).normalize();\n\t\tplanes[ 5 ].setComponents( me3 + me2, me7 + me6, me11 + me10, me15 + me14 ).normalize();\n\n\t\treturn this;\n\n\t},\n\n\tintersectsObject: function ( object ) {\n\n\t\tvar geometry = object.geometry;\n\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t_sphere$1.copy( geometry.boundingSphere ).applyMatrix4( object.matrixWorld );\n\n\t\treturn this.intersectsSphere( _sphere$1 );\n\n\t},\n\n\tintersectsSprite: function ( sprite ) {\n\n\t\t_sphere$1.center.set( 0, 0, 0 );\n\t\t_sphere$1.radius = 0.7071067811865476;\n\t\t_sphere$1.applyMatrix4( sprite.matrixWorld );\n\n\t\treturn this.intersectsSphere( _sphere$1 );\n\n\t},\n\n\tintersectsSphere: function ( sphere ) {\n\n\t\tvar planes = this.planes;\n\t\tvar center = sphere.center;\n\t\tvar negRadius = - sphere.radius;\n\n\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\tvar distance = planes[ i ].distanceToPoint( center );\n\n\t\t\tif ( distance < negRadius ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t},\n\n\tintersectsBox: function ( box ) {\n\n\t\tvar planes = this.planes;\n\n\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\tvar plane = planes[ i ];\n\n\t\t\t// corner at max distance\n\n\t\t\t_vector$5.x = plane.normal.x > 0 ? box.max.x : box.min.x;\n\t\t\t_vector$5.y = plane.normal.y > 0 ? box.max.y : box.min.y;\n\t\t\t_vector$5.z = plane.normal.z > 0 ? box.max.z : box.min.z;\n\n\t\t\tif ( plane.distanceToPoint( _vector$5 ) < 0 ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t},\n\n\tcontainsPoint: function ( point ) {\n\n\t\tvar planes = this.planes;\n\n\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\tif ( planes[ i ].distanceToPoint( point ) < 0 ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n} );\n\n/**\n * Uniforms library for shared webgl shaders\n */\n\nvar UniformsLib = {\n\n\tcommon: {\n\n\t\tdiffuse: { value: new Color( 0xeeeeee ) },\n\t\topacity: { value: 1.0 },\n\n\t\tmap: { value: null },\n\t\tuvTransform: { value: new Matrix3() },\n\t\tuv2Transform: { value: new Matrix3() },\n\n\t\talphaMap: { value: null },\n\n\t},\n\n\tspecularmap: {\n\n\t\tspecularMap: { value: null },\n\n\t},\n\n\tenvmap: {\n\n\t\tenvMap: { value: null },\n\t\tflipEnvMap: { value: - 1 },\n\t\treflectivity: { value: 1.0 },\n\t\trefractionRatio: { value: 0.98 },\n\t\tmaxMipLevel: { value: 0 }\n\n\t},\n\n\taomap: {\n\n\t\taoMap: { value: null },\n\t\taoMapIntensity: { value: 1 }\n\n\t},\n\n\tlightmap: {\n\n\t\tlightMap: { value: null },\n\t\tlightMapIntensity: { value: 1 }\n\n\t},\n\n\temissivemap: {\n\n\t\temissiveMap: { value: null }\n\n\t},\n\n\tbumpmap: {\n\n\t\tbumpMap: { value: null },\n\t\tbumpScale: { value: 1 }\n\n\t},\n\n\tnormalmap: {\n\n\t\tnormalMap: { value: null },\n\t\tnormalScale: { value: new Vector2( 1, 1 ) }\n\n\t},\n\n\tdisplacementmap: {\n\n\t\tdisplacementMap: { value: null },\n\t\tdisplacementScale: { value: 1 },\n\t\tdisplacementBias: { value: 0 }\n\n\t},\n\n\troughnessmap: {\n\n\t\troughnessMap: { value: null }\n\n\t},\n\n\tmetalnessmap: {\n\n\t\tmetalnessMap: { value: null }\n\n\t},\n\n\tgradientmap: {\n\n\t\tgradientMap: { value: null }\n\n\t},\n\n\tfog: {\n\n\t\tfogDensity: { value: 0.00025 },\n\t\tfogNear: { value: 1 },\n\t\tfogFar: { value: 2000 },\n\t\tfogColor: { value: new Color( 0xffffff ) }\n\n\t},\n\n\tlights: {\n\n\t\tambientLightColor: { value: [] },\n\n\t\tlightProbe: { value: [] },\n\n\t\tdirectionalLights: { value: [], properties: {\n\t\t\tdirection: {},\n\t\t\tcolor: {}\n\t\t} },\n\n\t\tdirectionalLightShadows: { value: [], properties: {\n\t\t\tshadowBias: {},\n\t\t\tshadowRadius: {},\n\t\t\tshadowMapSize: {}\n\t\t} },\n\n\t\tdirectionalShadowMap: { value: [] },\n\t\tdirectionalShadowMatrix: { value: [] },\n\n\t\tspotLights: { value: [], properties: {\n\t\t\tcolor: {},\n\t\t\tposition: {},\n\t\t\tdirection: {},\n\t\t\tdistance: {},\n\t\t\tconeCos: {},\n\t\t\tpenumbraCos: {},\n\t\t\tdecay: {}\n\t\t} },\n\n\t\tspotLightShadows: { value: [], properties: {\n\t\t\tshadowBias: {},\n\t\t\tshadowRadius: {},\n\t\t\tshadowMapSize: {}\n\t\t} },\n\n\t\tspotShadowMap: { value: [] },\n\t\tspotShadowMatrix: { value: [] },\n\n\t\tpointLights: { value: [], properties: {\n\t\t\tcolor: {},\n\t\t\tposition: {},\n\t\t\tdecay: {},\n\t\t\tdistance: {}\n\t\t} },\n\n\t\tpointLightShadows: { value: [], properties: {\n\t\t\tshadowBias: {},\n\t\t\tshadowRadius: {},\n\t\t\tshadowMapSize: {},\n\t\t\tshadowCameraNear: {},\n\t\t\tshadowCameraFar: {}\n\t\t} },\n\n\t\tpointShadowMap: { value: [] },\n\t\tpointShadowMatrix: { value: [] },\n\n\t\themisphereLights: { value: [], properties: {\n\t\t\tdirection: {},\n\t\t\tskyColor: {},\n\t\t\tgroundColor: {}\n\t\t} },\n\n\t\t// TODO (abelnation): RectAreaLight BRDF data needs to be moved from example to main src\n\t\trectAreaLights: { value: [], properties: {\n\t\t\tcolor: {},\n\t\t\tposition: {},\n\t\t\twidth: {},\n\t\t\theight: {}\n\t\t} }\n\n\t},\n\n\tpoints: {\n\n\t\tdiffuse: { value: new Color( 0xeeeeee ) },\n\t\topacity: { value: 1.0 },\n\t\tsize: { value: 1.0 },\n\t\tscale: { value: 1.0 },\n\t\tmap: { value: null },\n\t\talphaMap: { value: null },\n\t\tuvTransform: { value: new Matrix3() }\n\n\t},\n\n\tsprite: {\n\n\t\tdiffuse: { value: new Color( 0xeeeeee ) },\n\t\topacity: { value: 1.0 },\n\t\tcenter: { value: new Vector2( 0.5, 0.5 ) },\n\t\trotation: { value: 0.0 },\n\t\tmap: { value: null },\n\t\talphaMap: { value: null },\n\t\tuvTransform: { value: new Matrix3() }\n\n\t}\n\n};\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLAnimation() {\n\n\tvar context = null;\n\tvar isAnimating = false;\n\tvar animationLoop = null;\n\n\tfunction onAnimationFrame( time, frame ) {\n\n\t\tif ( isAnimating === false ) return;\n\n\t\tanimationLoop( time, frame );\n\n\t\tcontext.requestAnimationFrame( onAnimationFrame );\n\n\t}\n\n\treturn {\n\n\t\tstart: function () {\n\n\t\t\tif ( isAnimating === true ) return;\n\t\t\tif ( animationLoop === null ) return;\n\n\t\t\tcontext.requestAnimationFrame( onAnimationFrame );\n\n\t\t\tisAnimating = true;\n\n\t\t},\n\n\t\tstop: function () {\n\n\t\t\tisAnimating = false;\n\n\t\t},\n\n\t\tsetAnimationLoop: function ( callback ) {\n\n\t\t\tanimationLoop = callback;\n\n\t\t},\n\n\t\tsetContext: function ( value ) {\n\n\t\t\tcontext = value;\n\n\t\t}\n\n\t};\n\n}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLAttributes( gl, capabilities ) {\n\n\tvar isWebGL2 = capabilities.isWebGL2;\n\n\tvar buffers = new WeakMap();\n\n\tfunction createBuffer( attribute, bufferType ) {\n\n\t\tvar array = attribute.array;\n\t\tvar usage = attribute.usage;\n\n\t\tvar buffer = gl.createBuffer();\n\n\t\tgl.bindBuffer( bufferType, buffer );\n\t\tgl.bufferData( bufferType, array, usage );\n\n\t\tattribute.onUploadCallback();\n\n\t\tvar type = 5126;\n\n\t\tif ( array instanceof Float32Array ) {\n\n\t\t\ttype = 5126;\n\n\t\t} else if ( array instanceof Float64Array ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLAttributes: Unsupported data buffer format: Float64Array.' );\n\n\t\t} else if ( array instanceof Uint16Array ) {\n\n\t\t\ttype = 5123;\n\n\t\t} else if ( array instanceof Int16Array ) {\n\n\t\t\ttype = 5122;\n\n\t\t} else if ( array instanceof Uint32Array ) {\n\n\t\t\ttype = 5125;\n\n\t\t} else if ( array instanceof Int32Array ) {\n\n\t\t\ttype = 5124;\n\n\t\t} else if ( array instanceof Int8Array ) {\n\n\t\t\ttype = 5120;\n\n\t\t} else if ( array instanceof Uint8Array ) {\n\n\t\t\ttype = 5121;\n\n\t\t}\n\n\t\treturn {\n\t\t\tbuffer: buffer,\n\t\t\ttype: type,\n\t\t\tbytesPerElement: array.BYTES_PER_ELEMENT,\n\t\t\tversion: attribute.version\n\t\t};\n\n\t}\n\n\tfunction updateBuffer( buffer, attribute, bufferType ) {\n\n\t\tvar array = attribute.array;\n\t\tvar updateRange = attribute.updateRange;\n\n\t\tgl.bindBuffer( bufferType, buffer );\n\n\t\tif ( updateRange.count === - 1 ) {\n\n\t\t\t// Not using update ranges\n\n\t\t\tgl.bufferSubData( bufferType, 0, array );\n\n\t\t} else {\n\n\t\t\tif ( isWebGL2 ) {\n\n\t\t\t\tgl.bufferSubData( bufferType, updateRange.offset * array.BYTES_PER_ELEMENT,\n\t\t\t\t\tarray, updateRange.offset, updateRange.count );\n\n\t\t\t} else {\n\n\t\t\t\tgl.bufferSubData( bufferType, updateRange.offset * array.BYTES_PER_ELEMENT,\n\t\t\t\t\tarray.subarray( updateRange.offset, updateRange.offset + updateRange.count ) );\n\n\t\t\t}\n\n\t\t\tupdateRange.count = - 1; // reset range\n\n\t\t}\n\n\t}\n\n\t//\n\n\tfunction get( attribute ) {\n\n\t\tif ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\n\n\t\treturn buffers.get( attribute );\n\n\t}\n\n\tfunction remove( attribute ) {\n\n\t\tif ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\n\n\t\tvar data = buffers.get( attribute );\n\n\t\tif ( data ) {\n\n\t\t\tgl.deleteBuffer( data.buffer );\n\n\t\t\tbuffers.delete( attribute );\n\n\t\t}\n\n\t}\n\n\tfunction update( attribute, bufferType ) {\n\n\t\tif ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\n\n\t\tvar data = buffers.get( attribute );\n\n\t\tif ( data === undefined ) {\n\n\t\t\tbuffers.set( attribute, createBuffer( attribute, bufferType ) );\n\n\t\t} else if ( data.version < attribute.version ) {\n\n\t\t\tupdateBuffer( data.buffer, attribute, bufferType );\n\n\t\t\tdata.version = attribute.version;\n\n\t\t}\n\n\t}\n\n\treturn {\n\n\t\tget: get,\n\t\tremove: remove,\n\t\tupdate: update\n\n\t};\n\n}\n\nfunction PlaneGeometry() {}\n\n// PlaneBufferGeometry\n\nfunction PlaneBufferGeometry( width, height, widthSegments, heightSegments ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'PlaneBufferGeometry';\n\n\tthis.parameters = {\n\t\twidth: width,\n\t\theight: height,\n\t\twidthSegments: widthSegments,\n\t\theightSegments: heightSegments\n\t};\n\n\twidth = width || 1;\n\theight = height || 1;\n\n\tvar width_half = width / 2;\n\tvar height_half = height / 2;\n\n\tvar gridX = Math.floor( widthSegments ) || 1;\n\tvar gridY = Math.floor( heightSegments ) || 1;\n\n\tvar gridX1 = gridX + 1;\n\tvar gridY1 = gridY + 1;\n\n\tvar segment_width = width / gridX;\n\tvar segment_height = height / gridY;\n\n\tvar ix, iy;\n\n\t// buffers\n\n\tvar indices = [];\n\tvar vertices = [];\n\tvar normals = [];\n\tvar uvs = [];\n\n\t// generate vertices, normals and uvs\n\n\tfor ( iy = 0; iy < gridY1; iy ++ ) {\n\n\t\tvar y = iy * segment_height - height_half;\n\n\t\tfor ( ix = 0; ix < gridX1; ix ++ ) {\n\n\t\t\tvar x = ix * segment_width - width_half;\n\n\t\t\tvertices.push( x, - y, 0 );\n\n\t\t\tnormals.push( 0, 0, 1 );\n\n\t\t\tuvs.push( ix / gridX );\n\t\t\tuvs.push( 1 - ( iy / gridY ) );\n\n\t\t}\n\n\t}\n\n\t// indices\n\n\tfor ( iy = 0; iy < gridY; iy ++ ) {\n\n\t\tfor ( ix = 0; ix < gridX; ix ++ ) {\n\n\t\t\tvar a = ix + gridX1 * iy;\n\t\t\tvar b = ix + gridX1 * ( iy + 1 );\n\t\t\tvar c = ( ix + 1 ) + gridX1 * ( iy + 1 );\n\t\t\tvar d = ( ix + 1 ) + gridX1 * iy;\n\n\t\t\t// faces\n\n\t\t\tindices.push( a, b, d );\n\t\t\tindices.push( b, c, d );\n\n\t\t}\n\n\t}\n\n\t// build geometry\n\n\tthis.setIndex( indices );\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n}\n\nPlaneBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\nPlaneBufferGeometry.prototype.constructor = PlaneBufferGeometry;\n\nvar alphamap_fragment = \"\";\n\nvar alphamap_pars_fragment = \"\";\n\nvar alphatest_fragment = \"\";\n\nvar aomap_fragment = \"\";\n\nvar aomap_pars_fragment = \"\";\n\nvar begin_vertex = \"\";\n\nvar beginnormal_vertex = \"\";\n\nvar bsdfs = \"\";\n\nvar bumpmap_pars_fragment = \"\";\n\nvar clipping_planes_fragment = \"\";\n\nvar clipping_planes_pars_fragment = \"\";\n\nvar clipping_planes_pars_vertex = \"\";\n\nvar clipping_planes_vertex = \"\";\n\nvar color_fragment = \"\";\n\nvar color_pars_fragment = \"\";\n\nvar color_pars_vertex = \"\";\n\nvar color_vertex = \"\";\n\nvar common = \"\";\n\nvar cube_uv_reflection_fragment = \"\";\n\nvar defaultnormal_vertex = \"\";\n\nvar displacementmap_pars_vertex = \"\";\n\nvar displacementmap_vertex = \"\";\n\nvar emissivemap_fragment = \"\";\n\nvar emissivemap_pars_fragment = \"\";\n\nvar encodings_fragment = \"\";\n\nvar encodings_pars_fragment = \"\";\n\nvar envmap_fragment = \"\";\n\nvar envmap_common_pars_fragment = \"\";\n\nvar envmap_pars_fragment = \"\";\n\nvar envmap_pars_vertex = \"\";\n\nvar envmap_vertex = \"\";\n\nvar fog_vertex = \"\";\n\nvar fog_pars_vertex = \"\";\n\nvar fog_fragment = \"\";\n\nvar fog_pars_fragment = \"\";\n\nvar gradientmap_pars_fragment = \"\";\n\nvar lightmap_fragment = \"\";\n\nvar lightmap_pars_fragment = \"\";\n\nvar lights_lambert_vertex = \"\";\n\nvar lights_pars_begin = \"\";\n\nvar envmap_physical_pars_fragment = \"\";\n\nvar lights_toon_fragment = \"\";\n\nvar lights_toon_pars_fragment = \"\";\n\nvar lights_phong_fragment = \"\";\n\nvar lights_phong_pars_fragment = \"\";\n\nvar lights_physical_fragment = \"\";\n\nvar lights_physical_pars_fragment = \"\";\n\nvar lights_fragment_begin = \"\";\n\nvar lights_fragment_maps = \"\";\n\nvar lights_fragment_end = \"\";\n\nvar logdepthbuf_fragment = \"\";\n\nvar logdepthbuf_pars_fragment = \"\";\n\nvar logdepthbuf_pars_vertex = \"\";\n\nvar logdepthbuf_vertex = \"\";\n\nvar map_fragment = \"\";\n\nvar map_pars_fragment = \"\";\n\nvar map_particle_fragment = \"\";\n\nvar map_particle_pars_fragment = \"\";\n\nvar metalnessmap_fragment = \"\";\n\nvar metalnessmap_pars_fragment = \"\";\n\nvar morphnormal_vertex = \"\";\n\nvar morphtarget_pars_vertex = \"\";\n\nvar morphtarget_vertex = \"\";\n\nvar normal_fragment_begin = \"\";\n\nvar normal_fragment_maps = \"\";\n\nvar normalmap_pars_fragment = \"\";\n\nvar clearcoat_normal_fragment_begin = \"\";\n\nvar clearcoat_normal_fragment_maps = \"\";\n\nvar clearcoat_normalmap_pars_fragment = \"\";\n\nvar packing = \"\";\n\nvar premultiplied_alpha_fragment = \"\";\n\nvar project_vertex = \"\";\n\nvar dithering_fragment = \"\";\n\nvar dithering_pars_fragment = \"\";\n\nvar roughnessmap_fragment = \"\";\n\nvar roughnessmap_pars_fragment = \"\";\n\nvar shadowmap_pars_fragment = \"\";\n\nvar shadowmap_pars_vertex = \"\";\n\nvar shadowmap_vertex = \"\";\n\nvar shadowmask_pars_fragment = \"\";\n\nvar skinbase_vertex = \"\";\n\nvar skinning_pars_vertex = \"\";\n\nvar skinning_vertex = \"\";\n\nvar skinnormal_vertex = \"\";\n\nvar specularmap_fragment = \"\";\n\nvar specularmap_pars_fragment = \"\";\n\nvar tonemapping_fragment = \"\";\n\nvar tonemapping_pars_fragment = \"\";\n\nvar uv_pars_fragment = \"\";\n\nvar uv_pars_vertex = \"\";\n\nvar uv_vertex = \"\";\n\nvar uv2_pars_fragment = \"\";\n\nvar uv2_pars_vertex = \"\";\n\nvar uv2_vertex = \"\";\n\nvar worldpos_vertex = \"\";\n\nvar background_frag = \"\";\n\nvar background_vert = \"\";\n\nvar cube_frag = \"\";\n\nvar cube_vert = \"\";\n\nvar depth_frag = \"\";\n\nvar depth_vert = \"\";\n\nvar distanceRGBA_frag = \"\";\n\nvar distanceRGBA_vert = \"\";\n\nvar equirect_frag = \"\";\n\nvar equirect_vert = \"\";\n\nvar linedashed_frag = \"\";\n\nvar linedashed_vert = \"\";\n\nvar meshbasic_frag = \"\";\n\nvar meshbasic_vert = \"\";\n\nvar meshlambert_frag = \"\";\n\nvar meshlambert_vert = \"\";\n\nvar meshmatcap_frag = \"\";\n\nvar meshmatcap_vert = \"\";\n\nvar meshtoon_frag = \"\";\n\nvar meshtoon_vert = \"\";\n\nvar meshphong_frag = \"\";\n\nvar meshphong_vert = \"\";\n\nvar meshphysical_frag = \"\";\n\nvar meshphysical_vert = \"\";\n\nvar normal_frag = \"\";\n\nvar normal_vert = \"\";\n\nvar points_frag = \"\";\n\nvar points_vert = \"\";\n\nvar shadow_frag = \"\";\n\nvar shadow_vert = \"\";\n\nvar sprite_frag = \"\";\n\nvar sprite_vert = \"\";\n\nvar ShaderChunk = {\n\talphamap_fragment: alphamap_fragment,\n\talphamap_pars_fragment: alphamap_pars_fragment,\n\talphatest_fragment: alphatest_fragment,\n\taomap_fragment: aomap_fragment,\n\taomap_pars_fragment: aomap_pars_fragment,\n\tbegin_vertex: begin_vertex,\n\tbeginnormal_vertex: beginnormal_vertex,\n\tbsdfs: bsdfs,\n\tbumpmap_pars_fragment: bumpmap_pars_fragment,\n\tclipping_planes_fragment: clipping_planes_fragment,\n\tclipping_planes_pars_fragment: clipping_planes_pars_fragment,\n\tclipping_planes_pars_vertex: clipping_planes_pars_vertex,\n\tclipping_planes_vertex: clipping_planes_vertex,\n\tcolor_fragment: color_fragment,\n\tcolor_pars_fragment: color_pars_fragment,\n\tcolor_pars_vertex: color_pars_vertex,\n\tcolor_vertex: color_vertex,\n\tcommon: common,\n\tcube_uv_reflection_fragment: cube_uv_reflection_fragment,\n\tdefaultnormal_vertex: defaultnormal_vertex,\n\tdisplacementmap_pars_vertex: displacementmap_pars_vertex,\n\tdisplacementmap_vertex: displacementmap_vertex,\n\temissivemap_fragment: emissivemap_fragment,\n\temissivemap_pars_fragment: emissivemap_pars_fragment,\n\tencodings_fragment: encodings_fragment,\n\tencodings_pars_fragment: encodings_pars_fragment,\n\tenvmap_fragment: envmap_fragment,\n\tenvmap_common_pars_fragment: envmap_common_pars_fragment,\n\tenvmap_pars_fragment: envmap_pars_fragment,\n\tenvmap_pars_vertex: envmap_pars_vertex,\n\tenvmap_physical_pars_fragment: envmap_physical_pars_fragment,\n\tenvmap_vertex: envmap_vertex,\n\tfog_vertex: fog_vertex,\n\tfog_pars_vertex: fog_pars_vertex,\n\tfog_fragment: fog_fragment,\n\tfog_pars_fragment: fog_pars_fragment,\n\tgradientmap_pars_fragment: gradientmap_pars_fragment,\n\tlightmap_fragment: lightmap_fragment,\n\tlightmap_pars_fragment: lightmap_pars_fragment,\n\tlights_lambert_vertex: lights_lambert_vertex,\n\tlights_pars_begin: lights_pars_begin,\n\tlights_toon_fragment: lights_toon_fragment,\n\tlights_toon_pars_fragment: lights_toon_pars_fragment,\n\tlights_phong_fragment: lights_phong_fragment,\n\tlights_phong_pars_fragment: lights_phong_pars_fragment,\n\tlights_physical_fragment: lights_physical_fragment,\n\tlights_physical_pars_fragment: lights_physical_pars_fragment,\n\tlights_fragment_begin: lights_fragment_begin,\n\tlights_fragment_maps: lights_fragment_maps,\n\tlights_fragment_end: lights_fragment_end,\n\tlogdepthbuf_fragment: logdepthbuf_fragment,\n\tlogdepthbuf_pars_fragment: logdepthbuf_pars_fragment,\n\tlogdepthbuf_pars_vertex: logdepthbuf_pars_vertex,\n\tlogdepthbuf_vertex: logdepthbuf_vertex,\n\tmap_fragment: map_fragment,\n\tmap_pars_fragment: map_pars_fragment,\n\tmap_particle_fragment: map_particle_fragment,\n\tmap_particle_pars_fragment: map_particle_pars_fragment,\n\tmetalnessmap_fragment: metalnessmap_fragment,\n\tmetalnessmap_pars_fragment: metalnessmap_pars_fragment,\n\tmorphnormal_vertex: morphnormal_vertex,\n\tmorphtarget_pars_vertex: morphtarget_pars_vertex,\n\tmorphtarget_vertex: morphtarget_vertex,\n\tnormal_fragment_begin: normal_fragment_begin,\n\tnormal_fragment_maps: normal_fragment_maps,\n\tnormalmap_pars_fragment: normalmap_pars_fragment,\n\tclearcoat_normal_fragment_begin: clearcoat_normal_fragment_begin,\n\tclearcoat_normal_fragment_maps: clearcoat_normal_fragment_maps,\n\tclearcoat_normalmap_pars_fragment: clearcoat_normalmap_pars_fragment,\n\tpacking: packing,\n\tpremultiplied_alpha_fragment: premultiplied_alpha_fragment,\n\tproject_vertex: project_vertex,\n\tdithering_fragment: dithering_fragment,\n\tdithering_pars_fragment: dithering_pars_fragment,\n\troughnessmap_fragment: roughnessmap_fragment,\n\troughnessmap_pars_fragment: roughnessmap_pars_fragment,\n\tshadowmap_pars_fragment: shadowmap_pars_fragment,\n\tshadowmap_pars_vertex: shadowmap_pars_vertex,\n\tshadowmap_vertex: shadowmap_vertex,\n\tshadowmask_pars_fragment: shadowmask_pars_fragment,\n\tskinbase_vertex: skinbase_vertex,\n\tskinning_pars_vertex: skinning_pars_vertex,\n\tskinning_vertex: skinning_vertex,\n\tskinnormal_vertex: skinnormal_vertex,\n\tspecularmap_fragment: specularmap_fragment,\n\tspecularmap_pars_fragment: specularmap_pars_fragment,\n\ttonemapping_fragment: tonemapping_fragment,\n\ttonemapping_pars_fragment: tonemapping_pars_fragment,\n\tuv_pars_fragment: uv_pars_fragment,\n\tuv_pars_vertex: uv_pars_vertex,\n\tuv_vertex: uv_vertex,\n\tuv2_pars_fragment: uv2_pars_fragment,\n\tuv2_pars_vertex: uv2_pars_vertex,\n\tuv2_vertex: uv2_vertex,\n\tworldpos_vertex: worldpos_vertex,\n\n\tbackground_frag: background_frag,\n\tbackground_vert: background_vert,\n\tcube_frag: cube_frag,\n\tcube_vert: cube_vert,\n\tdepth_frag: depth_frag,\n\tdepth_vert: depth_vert,\n\tdistanceRGBA_frag: distanceRGBA_frag,\n\tdistanceRGBA_vert: distanceRGBA_vert,\n\tequirect_frag: equirect_frag,\n\tequirect_vert: equirect_vert,\n\tlinedashed_frag: linedashed_frag,\n\tlinedashed_vert: linedashed_vert,\n\tmeshbasic_frag: meshbasic_frag,\n\tmeshbasic_vert: meshbasic_vert,\n\tmeshlambert_frag: meshlambert_frag,\n\tmeshlambert_vert: meshlambert_vert,\n\tmeshmatcap_frag: meshmatcap_frag,\n\tmeshmatcap_vert: meshmatcap_vert,\n\tmeshtoon_frag: meshtoon_frag,\n\tmeshtoon_vert: meshtoon_vert,\n\tmeshphong_frag: meshphong_frag,\n\tmeshphong_vert: meshphong_vert,\n\tmeshphysical_frag: meshphysical_frag,\n\tmeshphysical_vert: meshphysical_vert,\n\tnormal_frag: normal_frag,\n\tnormal_vert: normal_vert,\n\tpoints_frag: points_frag,\n\tpoints_vert: points_vert,\n\tshadow_frag: shadow_frag,\n\tshadow_vert: shadow_vert,\n\tsprite_frag: sprite_frag,\n\tsprite_vert: sprite_vert\n};\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n * @author mikael emtinger / http://gomo.se/\n */\n\nvar ShaderLib = {\n\n\tbasic: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.specularmap,\n\t\t\tUniformsLib.envmap,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.fog\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshbasic_vert,\n\t\tfragmentShader: ShaderChunk.meshbasic_frag\n\n\t},\n\n\tlambert: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.specularmap,\n\t\t\tUniformsLib.envmap,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.emissivemap,\n\t\t\tUniformsLib.fog,\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\temissive: { value: new Color( 0x000000 ) }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshlambert_vert,\n\t\tfragmentShader: ShaderChunk.meshlambert_frag\n\n\t},\n\n\tphong: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.specularmap,\n\t\t\tUniformsLib.envmap,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.emissivemap,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\tUniformsLib.fog,\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\temissive: { value: new Color( 0x000000 ) },\n\t\t\t\tspecular: { value: new Color( 0x111111 ) },\n\t\t\t\tshininess: { value: 30 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshphong_vert,\n\t\tfragmentShader: ShaderChunk.meshphong_frag\n\n\t},\n\n\tstandard: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.envmap,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.emissivemap,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\tUniformsLib.roughnessmap,\n\t\t\tUniformsLib.metalnessmap,\n\t\t\tUniformsLib.fog,\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\temissive: { value: new Color( 0x000000 ) },\n\t\t\t\troughness: { value: 0.5 },\n\t\t\t\tmetalness: { value: 0.5 },\n\t\t\t\tenvMapIntensity: { value: 1 } // temporary\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshphysical_vert,\n\t\tfragmentShader: ShaderChunk.meshphysical_frag\n\n\t},\n\n\ttoon: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.specularmap,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.emissivemap,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\tUniformsLib.gradientmap,\n\t\t\tUniformsLib.fog,\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\temissive: { value: new Color( 0x000000 ) },\n\t\t\t\tspecular: { value: new Color( 0x111111 ) },\n\t\t\t\tshininess: { value: 30 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshtoon_vert,\n\t\tfragmentShader: ShaderChunk.meshtoon_frag\n\n\t},\n\n\tmatcap: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\tUniformsLib.fog,\n\t\t\t{\n\t\t\t\tmatcap: { value: null }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshmatcap_vert,\n\t\tfragmentShader: ShaderChunk.meshmatcap_frag\n\n\t},\n\n\tpoints: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.points,\n\t\t\tUniformsLib.fog\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.points_vert,\n\t\tfragmentShader: ShaderChunk.points_frag\n\n\t},\n\n\tdashed: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.fog,\n\t\t\t{\n\t\t\t\tscale: { value: 1 },\n\t\t\t\tdashSize: { value: 1 },\n\t\t\t\ttotalSize: { value: 2 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.linedashed_vert,\n\t\tfragmentShader: ShaderChunk.linedashed_frag\n\n\t},\n\n\tdepth: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.displacementmap\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.depth_vert,\n\t\tfragmentShader: ShaderChunk.depth_frag\n\n\t},\n\n\tnormal: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\t{\n\t\t\t\topacity: { value: 1.0 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.normal_vert,\n\t\tfragmentShader: ShaderChunk.normal_frag\n\n\t},\n\n\tsprite: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.sprite,\n\t\t\tUniformsLib.fog\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.sprite_vert,\n\t\tfragmentShader: ShaderChunk.sprite_frag\n\n\t},\n\n\tbackground: {\n\n\t\tuniforms: {\n\t\t\tuvTransform: { value: new Matrix3() },\n\t\t\tt2D: { value: null },\n\t\t},\n\n\t\tvertexShader: ShaderChunk.background_vert,\n\t\tfragmentShader: ShaderChunk.background_frag\n\n\t},\n\t/* -------------------------------------------------------------------------\n\t//\tCube map shader\n\t ------------------------------------------------------------------------- */\n\n\tcube: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.envmap,\n\t\t\t{\n\t\t\t\topacity: { value: 1.0 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.cube_vert,\n\t\tfragmentShader: ShaderChunk.cube_frag\n\n\t},\n\n\tequirect: {\n\n\t\tuniforms: {\n\t\t\ttEquirect: { value: null },\n\t\t},\n\n\t\tvertexShader: ShaderChunk.equirect_vert,\n\t\tfragmentShader: ShaderChunk.equirect_frag\n\n\t},\n\n\tdistanceRGBA: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.displacementmap,\n\t\t\t{\n\t\t\t\treferencePosition: { value: new Vector3() },\n\t\t\t\tnearDistance: { value: 1 },\n\t\t\t\tfarDistance: { value: 1000 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.distanceRGBA_vert,\n\t\tfragmentShader: ShaderChunk.distanceRGBA_frag\n\n\t},\n\n\tshadow: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.lights,\n\t\t\tUniformsLib.fog,\n\t\t\t{\n\t\t\t\tcolor: { value: new Color( 0x00000 ) },\n\t\t\t\topacity: { value: 1.0 }\n\t\t\t},\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.shadow_vert,\n\t\tfragmentShader: ShaderChunk.shadow_frag\n\n\t}\n\n};\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLBackground( renderer, state, objects, premultipliedAlpha ) {\n\n\tvar clearColor = new Color( 0x000000 );\n\tvar clearAlpha = 0;\n\n\tvar planeMesh;\n\tvar boxMesh;\n\n\tvar currentBackground = null;\n\tvar currentBackgroundVersion = 0;\n\tvar currentTonemapping = null;\n\n\tfunction render( renderList, scene, camera, forceClear ) {\n\n\t\tvar background = scene.background;\n\n\t\t// Ignore background in AR\n\t\t// TODO: Reconsider this.\n\n\t\tvar xr = renderer.xr;\n\t\tvar session = xr.getSession && xr.getSession();\n\n\t\tif ( session && session.environmentBlendMode === 'additive' ) {\n\n\t\t\tbackground = null;\n\n\t\t}\n\n\t\tif ( background === null ) {\n\n\t\t\tsetClear( clearColor, clearAlpha );\n\n\t\t} else if ( background && background.isColor ) {\n\n\t\t\tsetClear( background, 1 );\n\t\t\tforceClear = true;\n\n\t\t}\n\n\t\tif ( renderer.autoClear || forceClear ) {\n\n\t\t\trenderer.clear( renderer.autoClearColor, renderer.autoClearDepth, renderer.autoClearStencil );\n\n\t\t}\n\n\t\tif ( background && (  background.mapping === CubeUVReflectionMapping ) ) {\n\n\t\t\tif ( boxMesh === undefined ) {\n\n\t\t\t\tboxMesh = new Mesh(\n\t\t\t\t\tnew BoxBufferGeometry( 1, 1, 1 ),\n\t\t\t\t\tnew ShaderMaterial( {\n\t\t\t\t\t\ttype: 'BackgroundCubeMaterial',\n\t\t\t\t\t\tuniforms: cloneUniforms( ShaderLib.cube.uniforms ),\n\t\t\t\t\t\tvertexShader: ShaderLib.cube.vertexShader,\n\t\t\t\t\t\tfragmentShader: ShaderLib.cube.fragmentShader,\n\t\t\t\t\t\tside: BackSide,\n\t\t\t\t\t\tdepthTest: false,\n\t\t\t\t\t\tdepthWrite: false,\n\t\t\t\t\t\tfog: false\n\t\t\t\t\t} )\n\t\t\t\t);\n\n\t\t\t\tboxMesh.geometry.deleteAttribute( 'normal' );\n\t\t\t\tboxMesh.geometry.deleteAttribute( 'uv' );\n\n\t\t\t\tboxMesh.onBeforeRender = function ( renderer, scene, camera ) {\n\n\t\t\t\t\tthis.matrixWorld.copyPosition( camera.matrixWorld );\n\n\t\t\t\t};\n\n\t\t\t\t// enable code injection for non-built-in material\n\t\t\t\tObject.defineProperty( boxMesh.material, 'envMap', {\n\n\t\t\t\t\tget: function () {\n\n\t\t\t\t\t\treturn false.value;\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t\tobjects.update( boxMesh );\n\n\t\t\t}\n\n\t\t\tvar texture =  background;\n\n\t\t\tfalse.value = texture;\n\t\t\tboxMesh.material.uniforms.flipEnvMap.value =  1;\n\n\t\t\tif ( currentBackground !== background ||\n\t\t\t\tcurrentBackgroundVersion !== texture.version ||\n\t\t\t\tcurrentTonemapping !== renderer.toneMapping ) {\n\n\t\t\t\tboxMesh.material.needsUpdate = true;\n\n\t\t\t\tcurrentBackground = background;\n\t\t\t\tcurrentBackgroundVersion = texture.version;\n\t\t\t\tcurrentTonemapping = renderer.toneMapping;\n\n\t\t\t}\n\n\t\t\t// push to the pre-sorted opaque render list\n\t\t\trenderList.unshift( boxMesh, boxMesh.geometry, boxMesh.material, 0, 0, null );\n\n\t\t} else if ( background && background.isTexture ) {\n\n\t\t\tif ( planeMesh === undefined ) {\n\n\t\t\t\tplaneMesh = new Mesh(\n\t\t\t\t\tnew PlaneBufferGeometry( 2, 2 ),\n\t\t\t\t\tnew ShaderMaterial( {\n\t\t\t\t\t\ttype: 'BackgroundMaterial',\n\t\t\t\t\t\tuniforms: cloneUniforms( ShaderLib.background.uniforms ),\n\t\t\t\t\t\tvertexShader: ShaderLib.background.vertexShader,\n\t\t\t\t\t\tfragmentShader: ShaderLib.background.fragmentShader,\n\t\t\t\t\t\tside: FrontSide,\n\t\t\t\t\t\tdepthTest: false,\n\t\t\t\t\t\tdepthWrite: false,\n\t\t\t\t\t\tfog: false\n\t\t\t\t\t} )\n\t\t\t\t);\n\n\t\t\t\tplaneMesh.geometry.deleteAttribute( 'normal' );\n\n\t\t\t\t// enable code injection for non-built-in material\n\t\t\t\tObject.defineProperty( planeMesh.material, 'map', {\n\n\t\t\t\t\tget: function () {\n\n\t\t\t\t\t\treturn this.uniforms.t2D.value;\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t\tobjects.update( planeMesh );\n\n\t\t\t}\n\n\t\t\tplaneMesh.material.uniforms.t2D.value = background;\n\n\t\t\tif ( background.matrixAutoUpdate === true ) {\n\n\t\t\t\tbackground.updateMatrix();\n\n\t\t\t}\n\n\t\t\tplaneMesh.material.uniforms.uvTransform.value.copy( background.matrix );\n\n\t\t\tif ( currentBackground !== background ||\n\t\t\t\tcurrentBackgroundVersion !== background.version ||\n\t\t\t\tcurrentTonemapping !== renderer.toneMapping ) {\n\n\t\t\t\tplaneMesh.material.needsUpdate = true;\n\n\t\t\t\tcurrentBackground = background;\n\t\t\t\tcurrentBackgroundVersion = background.version;\n\t\t\t\tcurrentTonemapping = renderer.toneMapping;\n\n\t\t\t}\n\n\n\t\t\t// push to the pre-sorted opaque render list\n\t\t\trenderList.unshift( planeMesh, planeMesh.geometry, planeMesh.material, 0, 0, null );\n\n\t\t}\n\n\t}\n\n\tfunction setClear( color, alpha ) {\n\n\t\tstate.buffers.color.setClear( color.r, color.g, color.b, alpha, premultipliedAlpha );\n\n\t}\n\n\treturn {\n\n\t\tgetClearColor: function () {\n\n\t\t\treturn clearColor;\n\n\t\t},\n\t\tsetClearColor: function ( color, alpha ) {\n\n\t\t\tclearColor.set( color );\n\t\t\tclearAlpha = alpha !== undefined ? alpha : 1;\n\t\t\tsetClear( clearColor, clearAlpha );\n\n\t\t},\n\t\tgetClearAlpha: function () {\n\n\t\t\treturn clearAlpha;\n\n\t\t},\n\t\tsetClearAlpha: function ( alpha ) {\n\n\t\t\tclearAlpha = alpha;\n\t\t\tsetClear( clearColor, clearAlpha );\n\n\t\t},\n\t\trender: render\n\n\t};\n\n}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLBufferRenderer( gl, extensions, info, capabilities ) {\n\n\tvar isWebGL2 = capabilities.isWebGL2;\n\n\tvar mode;\n\n\tfunction setMode( value ) {\n\n\t\tmode = value;\n\n\t}\n\n\tfunction render( start, count ) {\n\n\t\tgl.drawArrays( mode, start, count );\n\n\t\tinfo.update( count, mode );\n\n\t}\n\n\tfunction renderInstances( geometry, start, count, primcount ) {\n\n\t\tif ( primcount === 0 ) return;\n\n\t\tvar extension, methodName;\n\n\t\tif ( isWebGL2 ) {\n\n\t\t\textension = gl;\n\t\t\tmethodName = 'drawArraysInstanced';\n\n\t\t} else {\n\n\t\t\textension = extensions.get( 'ANGLE_instanced_arrays' );\n\t\t\tmethodName = 'drawArraysInstancedANGLE';\n\n\t\t\tif ( extension === null ) {\n\n\t\t\t\tconsole.error( 'THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t\textension[ methodName ]( mode, start, count, primcount );\n\n\t\tinfo.update( count, mode, primcount );\n\n\t}\n\n\t//\n\n\tthis.setMode = setMode;\n\tthis.render = render;\n\tthis.renderInstances = renderInstances;\n\n}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLCapabilities( gl, extensions, parameters ) {\n\n\tvar maxAnisotropy;\n\n\tfunction getMaxAnisotropy() {\n\n\t\tif ( maxAnisotropy !== undefined ) return maxAnisotropy;\n\n\t\tvar extension = extensions.get( 'EXT_texture_filter_anisotropic' );\n\n\t\tif ( extension !== null ) {\n\n\t\t\tmaxAnisotropy = gl.getParameter( extension.MAX_TEXTURE_MAX_ANISOTROPY_EXT );\n\n\t\t} else {\n\n\t\t\tmaxAnisotropy = 0;\n\n\t\t}\n\n\t\treturn maxAnisotropy;\n\n\t}\n\n\tfunction getMaxPrecision( precision ) {\n\n\t\tif ( precision === 'highp' ) {\n\n\t\t\tif ( gl.getShaderPrecisionFormat( 35633, 36338 ).precision > 0 &&\n\t\t\t\tgl.getShaderPrecisionFormat( 35632, 36338 ).precision > 0 ) {\n\n\t\t\t\treturn 'highp';\n\n\t\t\t}\n\n\t\t\tprecision = 'mediump';\n\n\t\t}\n\n\t\tif ( precision === 'mediump' ) {\n\n\t\t\tif ( gl.getShaderPrecisionFormat( 35633, 36337 ).precision > 0 &&\n\t\t\t\tgl.getShaderPrecisionFormat( 35632, 36337 ).precision > 0 ) {\n\n\t\t\t\treturn 'mediump';\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn 'lowp';\n\n\t}\n\n\t/* eslint-disable no-undef */\n\tvar isWebGL2 = ( typeof WebGL2RenderingContext !== 'undefined' && gl instanceof WebGL2RenderingContext ) ||\n\t\t( typeof WebGL2ComputeRenderingContext !== 'undefined' && gl instanceof WebGL2ComputeRenderingContext );\n\t/* eslint-enable no-undef */\n\n\tvar precision = parameters.precision !== undefined ? parameters.precision : 'highp';\n\tvar maxPrecision = getMaxPrecision( precision );\n\n\tif ( maxPrecision !== precision ) {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer:', precision, 'not supported, using', maxPrecision, 'instead.' );\n\t\tprecision = maxPrecision;\n\n\t}\n\n\tvar logarithmicDepthBuffer = parameters.logarithmicDepthBuffer === true;\n\n\tvar maxTextures = gl.getParameter( 34930 );\n\tvar maxVertexTextures = gl.getParameter( 35660 );\n\tvar maxTextureSize = gl.getParameter( 3379 );\n\tvar maxCubemapSize = gl.getParameter( 34076 );\n\n\tvar maxAttributes = gl.getParameter( 34921 );\n\tvar maxVertexUniforms = gl.getParameter( 36347 );\n\tvar maxVaryings = gl.getParameter( 36348 );\n\tvar maxFragmentUniforms = gl.getParameter( 36349 );\n\n\tvar vertexTextures = maxVertexTextures > 0;\n\tvar floatFragmentTextures = isWebGL2 || !! extensions.get( 'OES_texture_float' );\n\tvar floatVertexTextures = vertexTextures && floatFragmentTextures;\n\n\tvar maxSamples = isWebGL2 ? gl.getParameter( 36183 ) : 0;\n\n\treturn {\n\n\t\tisWebGL2: isWebGL2,\n\n\t\tgetMaxAnisotropy: getMaxAnisotropy,\n\t\tgetMaxPrecision: getMaxPrecision,\n\n\t\tprecision: precision,\n\t\tlogarithmicDepthBuffer: logarithmicDepthBuffer,\n\n\t\tmaxTextures: maxTextures,\n\t\tmaxVertexTextures: maxVertexTextures,\n\t\tmaxTextureSize: maxTextureSize,\n\t\tmaxCubemapSize: maxCubemapSize,\n\n\t\tmaxAttributes: maxAttributes,\n\t\tmaxVertexUniforms: maxVertexUniforms,\n\t\tmaxVaryings: maxVaryings,\n\t\tmaxFragmentUniforms: maxFragmentUniforms,\n\n\t\tvertexTextures: vertexTextures,\n\t\tfloatFragmentTextures: floatFragmentTextures,\n\t\tfloatVertexTextures: floatVertexTextures,\n\n\t\tmaxSamples: maxSamples\n\n\t};\n\n}\n\n/**\n * @author tschw\n */\n\nfunction WebGLClipping() {\n\n\tvar scope = this,\n\n\t\tglobalState = null,\n\t\tnumGlobalPlanes = 0,\n\t\tlocalClippingEnabled = false,\n\t\trenderingShadows = false,\n\n\t\tplane = new Plane(),\n\t\tviewNormalMatrix = new Matrix3(),\n\n\t\tuniform = { value: null, needsUpdate: false };\n\n\tthis.uniform = uniform;\n\tthis.numPlanes = 0;\n\tthis.numIntersection = 0;\n\n\tthis.init = function ( planes, enableLocalClipping, camera ) {\n\n\t\tvar enabled =\n\t\t\tplanes.length !== 0 ||\n\t\t\tenableLocalClipping ||\n\t\t\t// enable state of previous frame - the clipping code has to\n\t\t\t// run another frame in order to reset the state:\n\t\t\tnumGlobalPlanes !== 0 ||\n\t\t\tlocalClippingEnabled;\n\n\t\tlocalClippingEnabled = enableLocalClipping;\n\n\t\tglobalState = projectPlanes( planes, camera, 0 );\n\t\tnumGlobalPlanes = planes.length;\n\n\t\treturn enabled;\n\n\t};\n\n\tthis.beginShadows = function () {\n\n\t\trenderingShadows = true;\n\t\tprojectPlanes( null );\n\n\t};\n\n\tthis.endShadows = function () {\n\n\t\trenderingShadows = false;\n\t\tresetGlobalState();\n\n\t};\n\n\tthis.setState = function ( planes, clipIntersection, clipShadows, camera, cache, fromCache ) {\n\n\t\tif ( ! localClippingEnabled || planes === null || planes.length === 0 || renderingShadows && ! clipShadows ) {\n\n\t\t\t// there's no local clipping\n\n\t\t\tif ( renderingShadows ) {\n\n\t\t\t\t// there's no global clipping\n\n\t\t\t\tprojectPlanes( null );\n\n\t\t\t} else {\n\n\t\t\t\tresetGlobalState();\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tvar nGlobal = renderingShadows ? 0 : numGlobalPlanes,\n\t\t\t\tlGlobal = nGlobal * 4,\n\n\t\t\t\tdstArray = cache.clippingState || null;\n\n\t\t\tuniform.value = dstArray; // ensure unique state\n\n\t\t\tdstArray = projectPlanes( planes, camera, lGlobal, fromCache );\n\n\t\t\tfor ( var i = 0; i !== lGlobal; ++ i ) {\n\n\t\t\t\tdstArray[ i ] = globalState[ i ];\n\n\t\t\t}\n\n\t\t\tcache.clippingState = dstArray;\n\t\t\tthis.numIntersection = clipIntersection ? this.numPlanes : 0;\n\t\t\tthis.numPlanes += nGlobal;\n\n\t\t}\n\n\n\t};\n\n\tfunction resetGlobalState() {\n\n\t\tif ( uniform.value !== globalState ) {\n\n\t\t\tuniform.value = globalState;\n\t\t\tuniform.needsUpdate = numGlobalPlanes > 0;\n\n\t\t}\n\n\t\tscope.numPlanes = numGlobalPlanes;\n\t\tscope.numIntersection = 0;\n\n\t}\n\n\tfunction projectPlanes( planes, camera, dstOffset, skipTransform ) {\n\n\t\tvar nPlanes = planes !== null ? planes.length : 0,\n\t\t\tdstArray = null;\n\n\t\tif ( nPlanes !== 0 ) {\n\n\t\t\tdstArray = uniform.value;\n\n\t\t\tif ( skipTransform !== true || dstArray === null ) {\n\n\t\t\t\tvar flatSize = dstOffset + nPlanes * 4,\n\t\t\t\t\tviewMatrix = camera.matrixWorldInverse;\n\n\t\t\t\tviewNormalMatrix.getNormalMatrix( viewMatrix );\n\n\t\t\t\tif ( dstArray === null || dstArray.length < flatSize ) {\n\n\t\t\t\t\tdstArray = new Float32Array( flatSize );\n\n\t\t\t\t}\n\n\t\t\t\tfor ( var i = 0, i4 = dstOffset; i !== nPlanes; ++ i, i4 += 4 ) {\n\n\t\t\t\t\tplane.copy( planes[ i ] ).applyMatrix4( viewMatrix, viewNormalMatrix );\n\n\t\t\t\t\tplane.normal.toArray( dstArray, i4 );\n\t\t\t\t\tdstArray[ i4 + 3 ] = plane.constant;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tuniform.value = dstArray;\n\t\t\tuniform.needsUpdate = true;\n\n\t\t}\n\n\t\tscope.numPlanes = nPlanes;\n\t\tscope.numIntersection = 0;\n\n\t\treturn dstArray;\n\n\t}\n\n}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLExtensions( gl ) {\n\n\tvar extensions = {};\n\n\treturn {\n\n\t\tget: function ( name ) {\n\n\t\t\tif ( extensions[ name ] !== undefined ) {\n\n\t\t\t\treturn extensions[ name ];\n\n\t\t\t}\n\n\t\t\tvar extension;\n\n\t\t\tswitch ( name ) {\n\n\t\t\t\tcase 'WEBGL_depth_texture':\n\t\t\t\t\textension = gl.getExtension( 'WEBGL_depth_texture' ) || gl.getExtension( 'MOZ_WEBGL_depth_texture' ) || gl.getExtension( 'WEBKIT_WEBGL_depth_texture' );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'EXT_texture_filter_anisotropic':\n\t\t\t\t\textension = gl.getExtension( 'EXT_texture_filter_anisotropic' ) || gl.getExtension( 'MOZ_EXT_texture_filter_anisotropic' ) || gl.getExtension( 'WEBKIT_EXT_texture_filter_anisotropic' );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'WEBGL_compressed_texture_s3tc':\n\t\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'MOZ_WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_s3tc' );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'WEBGL_compressed_texture_pvrtc':\n\t\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_pvrtc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_pvrtc' );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\textension = gl.getExtension( name );\n\n\t\t\t}\n\n\t\t\tif ( extension === null ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: ' + name + ' extension not supported.' );\n\n\t\t\t}\n\n\t\t\textensions[ name ] = extension;\n\n\t\t\treturn extension;\n\n\t\t}\n\n\t};\n\n}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLGeometries( gl, attributes, info ) {\n\n\tvar geometries = new WeakMap();\n\tvar wireframeAttributes = new WeakMap();\n\n\tfunction onGeometryDispose( event ) {\n\n\t\tvar geometry = event.target;\n\t\tvar buffergeometry = geometries.get( geometry );\n\n\t\tif ( buffergeometry.index !== null ) {\n\n\t\t\tattributes.remove( buffergeometry.index );\n\n\t\t}\n\n\t\tfor ( var name in buffergeometry.attributes ) {\n\n\t\t\tattributes.remove( buffergeometry.attributes[ name ] );\n\n\t\t}\n\n\t\tgeometry.removeEventListener( 'dispose', onGeometryDispose );\n\n\t\tgeometries.delete( geometry );\n\n\t\tvar attribute = wireframeAttributes.get( buffergeometry );\n\n\t\tif ( attribute ) {\n\n\t\t\tattributes.remove( attribute );\n\t\t\twireframeAttributes.delete( buffergeometry );\n\n\t\t}\n\n\t\t//\n\n\t\tinfo.memory.geometries --;\n\n\t}\n\n\tfunction get( object, geometry ) {\n\n\t\tvar buffergeometry = geometries.get( geometry );\n\n\t\tif ( buffergeometry ) return buffergeometry;\n\n\t\tgeometry.addEventListener( 'dispose', onGeometryDispose );\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\tbuffergeometry = geometry;\n\n\t\t} else if ( geometry.isGeometry ) {\n\n\t\t\tif ( geometry._bufferGeometry === undefined ) {\n\n\t\t\t\tgeometry._bufferGeometry = new BufferGeometry().setFromObject( object );\n\n\t\t\t}\n\n\t\t\tbuffergeometry = geometry._bufferGeometry;\n\n\t\t}\n\n\t\tgeometries.set( geometry, buffergeometry );\n\n\t\tinfo.memory.geometries ++;\n\n\t\treturn buffergeometry;\n\n\t}\n\n\tfunction update( geometry ) {\n\n\t\tvar index = geometry.index;\n\t\tvar geometryAttributes = geometry.attributes;\n\n\t\tif ( index !== null ) {\n\n\t\t\tattributes.update( index, 34963 );\n\n\t\t}\n\n\t\tfor ( var name in geometryAttributes ) {\n\n\t\t\tattributes.update( geometryAttributes[ name ], 34962 );\n\n\t\t}\n\n\t\t// morph targets\n\n\t\tvar morphAttributes = geometry.morphAttributes;\n\n\t\tfor ( var name in morphAttributes ) {\n\n\t\t\tvar array = morphAttributes[ name ];\n\n\t\t\tfor ( var i = 0, l = array.length; i < l; i ++ ) {\n\n\t\t\t\tattributes.update( array[ i ], 34962 );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction updateWireframeAttribute( geometry ) {\n\n\t\tvar indices = [];\n\n\t\tvar geometryIndex = geometry.index;\n\t\tvar geometryPosition = geometry.attributes.position;\n\t\tvar version = 0;\n\n\t\tif ( geometryIndex !== null ) {\n\n\t\t\tvar array = geometryIndex.array;\n\t\t\tversion = geometryIndex.version;\n\n\t\t\tfor ( var i = 0, l = array.length; i < l; i += 3 ) {\n\n\t\t\t\tvar a = array[ i + 0 ];\n\t\t\t\tvar b = array[ i + 1 ];\n\t\t\t\tvar c = array[ i + 2 ];\n\n\t\t\t\tindices.push( a, b, b, c, c, a );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tvar array = geometryPosition.array;\n\t\t\tversion = geometryPosition.version;\n\n\t\t\tfor ( var i = 0, l = ( array.length / 3 ) - 1; i < l; i += 3 ) {\n\n\t\t\t\tvar a = i + 0;\n\t\t\t\tvar b = i + 1;\n\t\t\t\tvar c = i + 2;\n\n\t\t\t\tindices.push( a, b, b, c, c, a );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar attribute = new ( arrayMax( indices ) > 65535 ? Uint32BufferAttribute : Uint16BufferAttribute )( indices, 1 );\n\t\tattribute.version = version;\n\n\t\tattributes.update( attribute, 34963 );\n\n\t\t//\n\n\t\tvar previousAttribute = wireframeAttributes.get( geometry );\n\n\t\tif ( previousAttribute ) attributes.remove( previousAttribute );\n\n\t\t//\n\n\t\twireframeAttributes.set( geometry, attribute );\n\n\t}\n\n\tfunction getWireframeAttribute( geometry ) {\n\n\t\tvar currentAttribute = wireframeAttributes.get( geometry );\n\n\t\tif ( currentAttribute ) {\n\n\t\t\tvar geometryIndex = geometry.index;\n\n\t\t\tif ( geometryIndex !== null ) {\n\n\t\t\t\t// if the attribute is obsolete, create a new one\n\n\t\t\t\tif ( currentAttribute.version < geometryIndex.version ) {\n\n\t\t\t\t\tupdateWireframeAttribute( geometry );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tupdateWireframeAttribute( geometry );\n\n\t\t}\n\n\t\treturn wireframeAttributes.get( geometry );\n\n\t}\n\n\treturn {\n\n\t\tget: get,\n\t\tupdate: update,\n\n\t\tgetWireframeAttribute: getWireframeAttribute\n\n\t};\n\n}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLIndexedBufferRenderer( gl, extensions, info, capabilities ) {\n\n\tvar isWebGL2 = capabilities.isWebGL2;\n\n\tvar mode;\n\n\tfunction setMode( value ) {\n\n\t\tmode = value;\n\n\t}\n\n\tvar type, bytesPerElement;\n\n\tfunction setIndex( value ) {\n\n\t\ttype = value.type;\n\t\tbytesPerElement = value.bytesPerElement;\n\n\t}\n\n\tfunction render( start, count ) {\n\n\t\tgl.drawElements( mode, count, type, start * bytesPerElement );\n\n\t\tinfo.update( count, mode );\n\n\t}\n\n\tfunction renderInstances( geometry, start, count, primcount ) {\n\n\t\tif ( primcount === 0 ) return;\n\n\t\tvar extension, methodName;\n\n\t\tif ( isWebGL2 ) {\n\n\t\t\textension = gl;\n\t\t\tmethodName = 'drawElementsInstanced';\n\n\t\t} else {\n\n\t\t\textension = extensions.get( 'ANGLE_instanced_arrays' );\n\t\t\tmethodName = 'drawElementsInstancedANGLE';\n\n\t\t\tif ( extension === null ) {\n\n\t\t\t\tconsole.error( 'THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t\textension[ methodName ]( mode, count, type, start * bytesPerElement, primcount );\n\n\t\tinfo.update( count, mode, primcount );\n\n\t}\n\n\t//\n\n\tthis.setMode = setMode;\n\tthis.setIndex = setIndex;\n\tthis.render = render;\n\tthis.renderInstances = renderInstances;\n\n}\n\n/**\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nfunction WebGLInfo( gl ) {\n\n\tvar memory = {\n\t\tgeometries: 0,\n\t\ttextures: 0\n\t};\n\n\tvar render = {\n\t\tframe: 0,\n\t\tcalls: 0,\n\t\ttriangles: 0,\n\t\tpoints: 0,\n\t\tlines: 0\n\t};\n\n\tfunction update( count, mode, instanceCount ) {\n\n\t\tinstanceCount = instanceCount || 1;\n\n\t\trender.calls ++;\n\n\t\tswitch ( mode ) {\n\n\t\t\tcase 4:\n\t\t\t\trender.triangles += instanceCount * ( count / 3 );\n\t\t\t\tbreak;\n\n\t\t\tcase 1:\n\t\t\t\trender.lines += instanceCount * ( count / 2 );\n\t\t\t\tbreak;\n\n\t\t\tcase 3:\n\t\t\t\trender.lines += instanceCount * ( count - 1 );\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\n\t\t\t\trender.lines += instanceCount * count;\n\t\t\t\tbreak;\n\n\t\t\tcase 0:\n\t\t\t\trender.points += instanceCount * count;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tconsole.error( 'THREE.WebGLInfo: Unknown draw mode:', mode );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\tfunction reset() {\n\n\t\trender.frame ++;\n\t\trender.calls = 0;\n\t\trender.triangles = 0;\n\t\trender.points = 0;\n\t\trender.lines = 0;\n\n\t}\n\n\treturn {\n\t\tmemory: memory,\n\t\trender: render,\n\t\tprograms: null,\n\t\tautoReset: true,\n\t\treset: reset,\n\t\tupdate: update\n\t};\n\n}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction absNumericalSort( a, b ) {\n\n\treturn Math.abs( b[ 1 ] ) - Math.abs( a[ 1 ] );\n\n}\n\nfunction WebGLMorphtargets( gl ) {\n\n\tvar influencesList = {};\n\tvar morphInfluences = new Float32Array( 8 );\n\n\tfunction update( object, geometry, material, program ) {\n\n\t\tvar objectInfluences = object.morphTargetInfluences;\n\n\t\t// When object doesn't have morph target influences defined, we treat it as a 0-length array\n\t\t// This is important to make sure we set up morphTargetBaseInfluence / morphTargetInfluences\n\n\t\tvar length = objectInfluences === undefined ? 0 : objectInfluences.length;\n\n\t\tvar influences = influencesList[ geometry.id ];\n\n\t\tif ( influences === undefined ) {\n\n\t\t\t// initialise list\n\n\t\t\tinfluences = [];\n\n\t\t\tfor ( var i = 0; i < length; i ++ ) {\n\n\t\t\t\tinfluences[ i ] = [ i, 0 ];\n\n\t\t\t}\n\n\t\t\tinfluencesList[ geometry.id ] = influences;\n\n\t\t}\n\t\tvar morphNormals = material.morphNormals && geometry.morphAttributes.normal;\n\n\t\t// Remove current morphAttributes\n\n\t\tfor ( var i = 0; i < length; i ++ ) {\n\n\t\t\tvar influence = influences[ i ];\n\n\t\t\tif ( influence[ 1 ] !== 0 ) {\n\t\t\t\tif ( morphNormals ) geometry.deleteAttribute( 'morphNormal' + i );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Collect influences\n\n\t\tfor ( var i = 0; i < length; i ++ ) {\n\n\t\t\tvar influence = influences[ i ];\n\n\t\t\tinfluence[ 0 ] = i;\n\t\t\tinfluence[ 1 ] = objectInfluences[ i ];\n\n\t\t}\n\n\t\tinfluences.sort( absNumericalSort );\n\n\t\t// Add morphAttributes\n\n\t\tvar morphInfluencesSum = 0;\n\n\t\tfor ( var i = 0; i < 8; i ++ ) {\n\n\t\t\tvar influence = influences[ i ];\n\n\t\t\tif ( influence ) {\n\n\t\t\t\tvar index = influence[ 0 ];\n\t\t\t\tvar value = influence[ 1 ];\n\n\t\t\t\tif ( value ) {\n\t\t\t\t\tif ( morphNormals ) geometry.setAttribute( 'morphNormal' + i, morphNormals[ index ] );\n\n\t\t\t\t\tmorphInfluences[ i ] = value;\n\t\t\t\t\tmorphInfluencesSum += value;\n\t\t\t\t\tcontinue;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tmorphInfluences[ i ] = 0;\n\n\t\t}\n\n\t\t// GLSL shader uses formula baseinfluence * base + sum(target * influence)\n\t\t// This allows us to switch between absolute morphs and relative morphs without changing shader code\n\t\t// When baseinfluence = 1 - sum(influence), the above is equivalent to sum((target - base) * influence)\n\t\tvar morphBaseInfluence = geometry.morphTargetsRelative ? 1 : 1 - morphInfluencesSum;\n\n\t\tprogram.getUniforms().setValue( gl, 'morphTargetBaseInfluence', morphBaseInfluence );\n\t\tprogram.getUniforms().setValue( gl, 'morphTargetInfluences', morphInfluences );\n\n\t}\n\n\treturn {\n\n\t\tupdate: update\n\n\t};\n\n}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLObjects( gl, geometries, attributes, info ) {\n\n\tvar updateMap = new WeakMap();\n\n\tfunction update( object ) {\n\n\t\tvar frame = info.render.frame;\n\n\t\tvar geometry = object.geometry;\n\t\tvar buffergeometry = geometries.get( object, geometry );\n\n\t\t// Update once per frame\n\n\t\tif ( updateMap.get( buffergeometry ) !== frame ) {\n\n\t\t\tif ( geometry.isGeometry ) {\n\n\t\t\t\tbuffergeometry.updateFromObject( object );\n\n\t\t\t}\n\n\t\t\tgeometries.update( buffergeometry );\n\n\t\t\tupdateMap.set( buffergeometry, frame );\n\n\t\t}\n\n\t\treturn buffergeometry;\n\n\t}\n\n\tfunction dispose() {\n\n\t\tupdateMap = new WeakMap();\n\n\t}\n\n\treturn {\n\n\t\tupdate: update,\n\t\tdispose: dispose\n\n\t};\n\n}\n\nfunction CubeTexture() {}\n\nObject.defineProperty( CubeTexture.prototype, 'images', {\n\n\tget: function () {\n\n\t\treturn this.image;\n\n\t},\n\n\tset: function ( value ) {\n\n\t\tthis.image = value;\n\n\t}\n\n} );\n\nfunction DataTexture2DArray() {}\nfunction DataTexture3D() {}\n\n/**\n * @author tschw\n * @author Mugen87 / https://github.com/Mugen87\n * @author mrdoob / http://mrdoob.com/\n *\n * Uniforms of a program.\n * Those form a tree structure with a special top-level container for the root,\n * which you get by calling 'new WebGLUniforms( gl, program )'.\n *\n *\n * Properties of inner nodes including the top-level container:\n *\n * .seq - array of nested uniforms\n * .map - nested uniforms by name\n *\n *\n * Methods of all nodes except the top-level container:\n *\n * .setValue( gl, value, [textures] )\n *\n * \t\tuploads a uniform value(s)\n *  \tthe 'textures' parameter is needed for sampler uniforms\n *\n *\n * Static methods of the top-level container (textures factorizations):\n *\n * .upload( gl, seq, values, textures )\n *\n * \t\tsets uniforms in 'seq' to 'values[id].value'\n *\n * .seqWithValue( seq, values ) : filteredSeq\n *\n * \t\tfilters 'seq' entries with corresponding entry in values\n *\n *\n * Methods of the top-level container (textures factorizations):\n *\n * .setValue( gl, name, value, textures )\n *\n * \t\tsets uniform with  name 'name' to 'value'\n *\n * .setOptional( gl, obj, prop )\n *\n * \t\tlike .set for an optional property of the object\n *\n */\n\nvar emptyTexture = new Texture();\nvar emptyTexture2dArray = new DataTexture2DArray();\nvar emptyTexture3d = new DataTexture3D();\nvar emptyCubeTexture = new CubeTexture();\n\n// --- Utilities ---\n\n// Array Caches (provide typed arrays for temporary by size)\n\nvar arrayCacheF32 = [];\nvar arrayCacheI32 = [];\n\n// Float32Array caches used for uploading Matrix uniforms\n\nvar mat4array = new Float32Array( 16 );\nvar mat3array = new Float32Array( 9 );\nvar mat2array = new Float32Array( 4 );\n\n// Flattening for arrays of vectors and matrices\n\nfunction flatten( array, nBlocks, blockSize ) {\n\n\tvar firstElem = array[ 0 ];\n\n\tif ( firstElem <= 0 || firstElem > 0 ) return array;\n\t// unoptimized: ! isNaN( firstElem )\n\t// see http://jacksondunstan.com/articles/983\n\n\tvar n = nBlocks * blockSize,\n\t\tr = arrayCacheF32[ n ];\n\n\tif ( r === undefined ) {\n\n\t\tr = new Float32Array( n );\n\t\tarrayCacheF32[ n ] = r;\n\n\t}\n\n\tif ( nBlocks !== 0 ) {\n\n\t\tfirstElem.toArray( r, 0 );\n\n\t\tfor ( var i = 1, offset = 0; i !== nBlocks; ++ i ) {\n\n\t\t\toffset += blockSize;\n\t\t\tarray[ i ].toArray( r, offset );\n\n\t\t}\n\n\t}\n\n\treturn r;\n\n}\n\nfunction arraysEqual( a, b ) {\n\n\tif ( a.length !== b.length ) return false;\n\n\tfor ( var i = 0, l = a.length; i < l; i ++ ) {\n\n\t\tif ( a[ i ] !== b[ i ] ) return false;\n\n\t}\n\n\treturn true;\n\n}\n\nfunction copyArray( a, b ) {\n\n\tfor ( var i = 0, l = b.length; i < l; i ++ ) {\n\n\t\ta[ i ] = b[ i ];\n\n\t}\n\n}\n\n// Texture unit allocation\n\nfunction allocTexUnits( textures, n ) {\n\n\tvar r = arrayCacheI32[ n ];\n\n\tif ( r === undefined ) {\n\n\t\tr = new Int32Array( n );\n\t\tarrayCacheI32[ n ] = r;\n\n\t}\n\n\tfor ( var i = 0; i !== n; ++ i )\n\t\tr[ i ] = textures.allocateTextureUnit();\n\n\treturn r;\n\n}\n\n// --- Setters ---\n\n// Note: Defining these methods externally, because they come in a bunch\n// and this way their names minify.\n\n// Single scalar\n\nfunction setValueV1f( gl, v ) {\n\n\tvar cache = this.cache;\n\n\tif ( cache[ 0 ] === v ) return;\n\n\tgl.uniform1f( this.addr, v );\n\n\tcache[ 0 ] = v;\n\n}\n\n// Single float vector (from flat array or THREE.VectorN)\n\nfunction setValueV2f( gl, v ) {\n\n\tvar cache = this.cache;\n\n\tif ( v.x !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y ) {\n\n\t\t\tgl.uniform2f( this.addr, v.x, v.y );\n\n\t\t\tcache[ 0 ] = v.x;\n\t\t\tcache[ 1 ] = v.y;\n\n\t\t}\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniform2fv( this.addr, v );\n\n\t\tcopyArray( cache, v );\n\n\t}\n\n}\n\nfunction setValueV3f( gl, v ) {\n\n\tvar cache = this.cache;\n\n\tif ( v.x !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y || cache[ 2 ] !== v.z ) {\n\n\t\t\tgl.uniform3f( this.addr, v.x, v.y, v.z );\n\n\t\t\tcache[ 0 ] = v.x;\n\t\t\tcache[ 1 ] = v.y;\n\t\t\tcache[ 2 ] = v.z;\n\n\t\t}\n\n\t} else if ( v.r !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.r || cache[ 1 ] !== v.g || cache[ 2 ] !== v.b ) {\n\n\t\t\tgl.uniform3f( this.addr, v.r, v.g, v.b );\n\n\t\t\tcache[ 0 ] = v.r;\n\t\t\tcache[ 1 ] = v.g;\n\t\t\tcache[ 2 ] = v.b;\n\n\t\t}\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniform3fv( this.addr, v );\n\n\t\tcopyArray( cache, v );\n\n\t}\n\n}\n\nfunction setValueV4f( gl, v ) {\n\n\tvar cache = this.cache;\n\n\tif ( v.x !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y || cache[ 2 ] !== v.z || cache[ 3 ] !== v.w ) {\n\n\t\t\tgl.uniform4f( this.addr, v.x, v.y, v.z, v.w );\n\n\t\t\tcache[ 0 ] = v.x;\n\t\t\tcache[ 1 ] = v.y;\n\t\t\tcache[ 2 ] = v.z;\n\t\t\tcache[ 3 ] = v.w;\n\n\t\t}\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniform4fv( this.addr, v );\n\n\t\tcopyArray( cache, v );\n\n\t}\n\n}\n\n// Single matrix (from flat array or MatrixN)\n\nfunction setValueM2( gl, v ) {\n\n\tvar cache = this.cache;\n\tvar elements = v.elements;\n\n\tif ( elements === undefined ) {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniformMatrix2fv( this.addr, false, v );\n\n\t\tcopyArray( cache, v );\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, elements ) ) return;\n\n\t\tmat2array.set( elements );\n\n\t\tgl.uniformMatrix2fv( this.addr, false, mat2array );\n\n\t\tcopyArray( cache, elements );\n\n\t}\n\n}\n\nfunction setValueM3( gl, v ) {\n\n\tvar cache = this.cache;\n\tvar elements = v.elements;\n\n\tif ( elements === undefined ) {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniformMatrix3fv( this.addr, false, v );\n\n\t\tcopyArray( cache, v );\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, elements ) ) return;\n\n\t\tmat3array.set( elements );\n\n\t\tgl.uniformMatrix3fv( this.addr, false, mat3array );\n\n\t\tcopyArray( cache, elements );\n\n\t}\n\n}\n\nfunction setValueM4( gl, v ) {\n\n\tvar cache = this.cache;\n\tvar elements = v.elements;\n\n\tif ( elements === undefined ) {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniformMatrix4fv( this.addr, false, v );\n\n\t\tcopyArray( cache, v );\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, elements ) ) return;\n\n\t\tmat4array.set( elements );\n\n\t\tgl.uniformMatrix4fv( this.addr, false, mat4array );\n\n\t\tcopyArray( cache, elements );\n\n\t}\n\n}\n\n// Single texture (2D / Cube)\n\nfunction setValueT1( gl, v, textures ) {\n\n\tvar cache = this.cache;\n\tvar unit = textures.allocateTextureUnit();\n\n\tif ( cache[ 0 ] !== unit ) {\n\n\t\tgl.uniform1i( this.addr, unit );\n\t\tcache[ 0 ] = unit;\n\n\t}\n\n\ttextures.safeSetTexture2D( v || emptyTexture, unit );\n\n}\n\nfunction setValueT2DArray1( gl, v, textures ) {\n\n\tvar cache = this.cache;\n\tvar unit = textures.allocateTextureUnit();\n\n\tif ( cache[ 0 ] !== unit ) {\n\n\t\tgl.uniform1i( this.addr, unit );\n\t\tcache[ 0 ] = unit;\n\n\t}\n\n\ttextures.setTexture2DArray( v || emptyTexture2dArray, unit );\n\n}\n\nfunction setValueT3D1( gl, v, textures ) {\n\n\tvar cache = this.cache;\n\tvar unit = textures.allocateTextureUnit();\n\n\tif ( cache[ 0 ] !== unit ) {\n\n\t\tgl.uniform1i( this.addr, unit );\n\t\tcache[ 0 ] = unit;\n\n\t}\n\n\ttextures.setTexture3D( v || emptyTexture3d, unit );\n\n}\n\nfunction setValueT6( gl, v, textures ) {\n\n\tvar cache = this.cache;\n\tvar unit = textures.allocateTextureUnit();\n\n\tif ( cache[ 0 ] !== unit ) {\n\n\t\tgl.uniform1i( this.addr, unit );\n\t\tcache[ 0 ] = unit;\n\n\t}\n\n\ttextures.safeSetTextureCube( v || emptyCubeTexture, unit );\n\n}\n\n// Integer / Boolean vectors or arrays thereof (always flat arrays)\n\nfunction setValueV1i( gl, v ) {\n\n\tvar cache = this.cache;\n\n\tif ( cache[ 0 ] === v ) return;\n\n\tgl.uniform1i( this.addr, v );\n\n\tcache[ 0 ] = v;\n\n}\n\nfunction setValueV2i( gl, v ) {\n\n\tvar cache = this.cache;\n\n\tif ( arraysEqual( cache, v ) ) return;\n\n\tgl.uniform2iv( this.addr, v );\n\n\tcopyArray( cache, v );\n\n}\n\nfunction setValueV3i( gl, v ) {\n\n\tvar cache = this.cache;\n\n\tif ( arraysEqual( cache, v ) ) return;\n\n\tgl.uniform3iv( this.addr, v );\n\n\tcopyArray( cache, v );\n\n}\n\nfunction setValueV4i( gl, v ) {\n\n\tvar cache = this.cache;\n\n\tif ( arraysEqual( cache, v ) ) return;\n\n\tgl.uniform4iv( this.addr, v );\n\n\tcopyArray( cache, v );\n\n}\n\n// uint\n\nfunction setValueV1ui( gl, v ) {\n\n\tvar cache = this.cache;\n\n\tif ( cache[ 0 ] === v ) return;\n\n\tgl.uniform1ui( this.addr, v );\n\n\tcache[ 0 ] = v;\n\n}\n\n// Helper to pick the right setter for the singular case\n\nfunction getSingularSetter( type ) {\n\n\tswitch ( type ) {\n\n\t\tcase 0x1406: return setValueV1f; // FLOAT\n\t\tcase 0x8b50: return setValueV2f; // _VEC2\n\t\tcase 0x8b51: return setValueV3f; // _VEC3\n\t\tcase 0x8b52: return setValueV4f; // _VEC4\n\n\t\tcase 0x8b5a: return setValueM2; // _MAT2\n\t\tcase 0x8b5b: return setValueM3; // _MAT3\n\t\tcase 0x8b5c: return setValueM4; // _MAT4\n\n\t\tcase 0x1404: case 0x8b56: return setValueV1i; // INT, BOOL\n\t\tcase 0x8b53: case 0x8b57: return setValueV2i; // _VEC2\n\t\tcase 0x8b54: case 0x8b58: return setValueV3i; // _VEC3\n\t\tcase 0x8b55: case 0x8b59: return setValueV4i; // _VEC4\n\n\t\tcase 0x1405: return setValueV1ui; // UINT\n\n\t\tcase 0x8b5e: // SAMPLER_2D\n\t\tcase 0x8d66: // SAMPLER_EXTERNAL_OES\n\t\tcase 0x8dca: // INT_SAMPLER_2D\n\t\tcase 0x8dd2: // UNSIGNED_INT_SAMPLER_2D\n\t\tcase 0x8b62: // SAMPLER_2D_SHADOW\n\t\t\treturn setValueT1;\n\n\t\tcase 0x8b5f: // SAMPLER_3D\n\t\tcase 0x8dcb: // INT_SAMPLER_3D\n\t\tcase 0x8dd3: // UNSIGNED_INT_SAMPLER_3D\n\t\t\treturn setValueT3D1;\n\n\t\tcase 0x8b60: // SAMPLER_CUBE\n\t\tcase 0x8dcc: // INT_SAMPLER_CUBE\n\t\tcase 0x8dd4: // UNSIGNED_INT_SAMPLER_CUBE\n\t\tcase 0x8dc5: // SAMPLER_CUBE_SHADOW\n\t\t\treturn setValueT6;\n\n\t\tcase 0x8dc1: // SAMPLER_2D_ARRAY\n\t\tcase 0x8dcf: // INT_SAMPLER_2D_ARRAY\n\t\tcase 0x8dd7: // UNSIGNED_INT_SAMPLER_2D_ARRAY\n\t\tcase 0x8dc4: // SAMPLER_2D_ARRAY_SHADOW\n\t\t\treturn setValueT2DArray1;\n\n\t}\n\n}\n\n// Array of scalars\nfunction setValueV1fArray( gl, v ) {\n\n\tgl.uniform1fv( this.addr, v );\n\n}\n\n// Integer / Boolean vectors or arrays thereof (always flat arrays)\nfunction setValueV1iArray( gl, v ) {\n\n\tgl.uniform1iv( this.addr, v );\n\n}\n\nfunction setValueV2iArray( gl, v ) {\n\n\tgl.uniform2iv( this.addr, v );\n\n}\n\nfunction setValueV3iArray( gl, v ) {\n\n\tgl.uniform3iv( this.addr, v );\n\n}\n\nfunction setValueV4iArray( gl, v ) {\n\n\tgl.uniform4iv( this.addr, v );\n\n}\n\n\n// Array of vectors (flat or from THREE classes)\n\nfunction setValueV2fArray( gl, v ) {\n\n\tvar data = flatten( v, this.size, 2 );\n\n\tgl.uniform2fv( this.addr, data );\n\n}\n\nfunction setValueV3fArray( gl, v ) {\n\n\tvar data = flatten( v, this.size, 3 );\n\n\tgl.uniform3fv( this.addr, data );\n\n}\n\nfunction setValueV4fArray( gl, v ) {\n\n\tvar data = flatten( v, this.size, 4 );\n\n\tgl.uniform4fv( this.addr, data );\n\n}\n\n// Array of matrices (flat or from THREE clases)\n\nfunction setValueM2Array( gl, v ) {\n\n\tvar data = flatten( v, this.size, 4 );\n\n\tgl.uniformMatrix2fv( this.addr, false, data );\n\n}\n\nfunction setValueM3Array( gl, v ) {\n\n\tvar data = flatten( v, this.size, 9 );\n\n\tgl.uniformMatrix3fv( this.addr, false, data );\n\n}\n\nfunction setValueM4Array( gl, v ) {\n\n\tvar data = flatten( v, this.size, 16 );\n\n\tgl.uniformMatrix4fv( this.addr, false, data );\n\n}\n\n// Array of textures (2D / Cube)\n\nfunction setValueT1Array( gl, v, textures ) {\n\n\tvar n = v.length;\n\n\tvar units = allocTexUnits( textures, n );\n\n\tgl.uniform1iv( this.addr, units );\n\n\tfor ( var i = 0; i !== n; ++ i ) {\n\n\t\ttextures.safeSetTexture2D( v[ i ] || emptyTexture, units[ i ] );\n\n\t}\n\n}\n\nfunction setValueT6Array( gl, v, textures ) {\n\n\tvar n = v.length;\n\n\tvar units = allocTexUnits( textures, n );\n\n\tgl.uniform1iv( this.addr, units );\n\n\tfor ( var i = 0; i !== n; ++ i ) {\n\n\t\ttextures.safeSetTextureCube( v[ i ] || emptyCubeTexture, units[ i ] );\n\n\t}\n\n}\n\n// Helper to pick the right setter for a pure (bottom-level) array\n\nfunction getPureArraySetter( type ) {\n\n\tswitch ( type ) {\n\n\t\tcase 0x1406: return setValueV1fArray; // FLOAT\n\t\tcase 0x8b50: return setValueV2fArray; // _VEC2\n\t\tcase 0x8b51: return setValueV3fArray; // _VEC3\n\t\tcase 0x8b52: return setValueV4fArray; // _VEC4\n\n\t\tcase 0x8b5a: return setValueM2Array; // _MAT2\n\t\tcase 0x8b5b: return setValueM3Array; // _MAT3\n\t\tcase 0x8b5c: return setValueM4Array; // _MAT4\n\n\t\tcase 0x1404: case 0x8b56: return setValueV1iArray; // INT, BOOL\n\t\tcase 0x8b53: case 0x8b57: return setValueV2iArray; // _VEC2\n\t\tcase 0x8b54: case 0x8b58: return setValueV3iArray; // _VEC3\n\t\tcase 0x8b55: case 0x8b59: return setValueV4iArray; // _VEC4\n\n\t\tcase 0x8b5e: // SAMPLER_2D\n\t\tcase 0x8d66: // SAMPLER_EXTERNAL_OES\n\t\tcase 0x8dca: // INT_SAMPLER_2D\n\t\tcase 0x8dd2: // UNSIGNED_INT_SAMPLER_2D\n\t\tcase 0x8b62: // SAMPLER_2D_SHADOW\n\t\t\treturn setValueT1Array;\n\n\t\tcase 0x8b60: // SAMPLER_CUBE\n\t\tcase 0x8dcc: // INT_SAMPLER_CUBE\n\t\tcase 0x8dd4: // UNSIGNED_INT_SAMPLER_CUBE\n\t\tcase 0x8dc5: // SAMPLER_CUBE_SHADOW\n\t\t\treturn setValueT6Array;\n\n\t}\n\n}\n\n// --- Uniform Classes ---\n\nfunction SingleUniform( id, activeInfo, addr ) {\n\n\tthis.id = id;\n\tthis.addr = addr;\n\tthis.cache = [];\n\tthis.setValue = getSingularSetter( activeInfo.type );\n\n\t// this.path = activeInfo.name; // DEBUG\n\n}\n\nfunction PureArrayUniform( id, activeInfo, addr ) {\n\n\tthis.id = id;\n\tthis.addr = addr;\n\tthis.cache = [];\n\tthis.size = activeInfo.size;\n\tthis.setValue = getPureArraySetter( activeInfo.type );\n\n\t// this.path = activeInfo.name; // DEBUG\n\n}\n\nPureArrayUniform.prototype.updateCache = function ( data ) {\n\n\tvar cache = this.cache;\n\n\tif ( data instanceof Float32Array && cache.length !== data.length ) {\n\n\t\tthis.cache = new Float32Array( data.length );\n\n\t}\n\n\tcopyArray( cache, data );\n\n};\n\nfunction StructuredUniform( id ) {\n\n\tthis.id = id;\n\n\tthis.seq = [];\n\tthis.map = {};\n\n}\n\nStructuredUniform.prototype.setValue = function ( gl, value, textures ) {\n\n\tvar seq = this.seq;\n\n\tfor ( var i = 0, n = seq.length; i !== n; ++ i ) {\n\n\t\tvar u = seq[ i ];\n\t\tu.setValue( gl, value[ u.id ], textures );\n\n\t}\n\n};\n\n// --- Top-level ---\n\n// Parser - builds up the property tree from the path strings\n\nvar RePathPart = /([\\w\\d_]+)(\\])?(\\[|\\.)?/g;\n\n// extracts\n// \t- the identifier (member name or array index)\n//  - followed by an optional right bracket (found when array index)\n//  - followed by an optional left bracket or dot (type of subscript)\n//\n// Note: These portions can be read in a non-overlapping fashion and\n// allow straightforward parsing of the hierarchy that WebGL encodes\n// in the uniform names.\n\nfunction addUniform( container, uniformObject ) {\n\n\tcontainer.seq.push( uniformObject );\n\tcontainer.map[ uniformObject.id ] = uniformObject;\n\n}\n\nfunction parseUniform( activeInfo, addr, container ) {\n\n\tvar path = activeInfo.name,\n\t\tpathLength = path.length;\n\n\t// reset RegExp object, because of the early exit of a previous run\n\tRePathPart.lastIndex = 0;\n\n\twhile ( true ) {\n\n\t\tvar match = RePathPart.exec( path ),\n\t\t\tmatchEnd = RePathPart.lastIndex,\n\n\t\t\tid = match[ 1 ],\n\t\t\tidIsIndex = match[ 2 ] === ']',\n\t\t\tsubscript = match[ 3 ];\n\n\t\tif ( idIsIndex ) id = id | 0; // convert to integer\n\n\t\tif ( subscript === undefined || subscript === '[' && matchEnd + 2 === pathLength ) {\n\n\t\t\t// bare name or \"pure\" bottom-level array \"[0]\" suffix\n\n\t\t\taddUniform( container, subscript === undefined ?\n\t\t\t\tnew SingleUniform( id, activeInfo, addr ) :\n\t\t\t\tnew PureArrayUniform( id, activeInfo, addr ) );\n\n\t\t\tbreak;\n\n\t\t} else {\n\n\t\t\t// step into inner node / create it in case it doesn't exist\n\n\t\t\tvar map = container.map, next = map[ id ];\n\n\t\t\tif ( next === undefined ) {\n\n\t\t\t\tnext = new StructuredUniform( id );\n\t\t\t\taddUniform( container, next );\n\n\t\t\t}\n\n\t\t\tcontainer = next;\n\n\t\t}\n\n\t}\n\n}\n\n// Root Container\n\nfunction WebGLUniforms( gl, program ) {\n\n\tthis.seq = [];\n\tthis.map = {};\n\n\tvar n = gl.getProgramParameter( program, 35718 );\n\n\tfor ( var i = 0; i < n; ++ i ) {\n\n\t\tvar info = gl.getActiveUniform( program, i ),\n\t\t\taddr = gl.getUniformLocation( program, info.name );\n\n\t\tparseUniform( info, addr, this );\n\n\t}\n\n}\n\nWebGLUniforms.prototype.setValue = function ( gl, name, value, textures ) {\n\n\tvar u = this.map[ name ];\n\n\tif ( u !== undefined ) u.setValue( gl, value, textures );\n\n};\n\nWebGLUniforms.prototype.setOptional = function ( gl, object, name ) {\n\n\tvar v = object[ name ];\n\n\tif ( v !== undefined ) this.setValue( gl, name, v );\n\n};\n\n\n// Static interface\n\nWebGLUniforms.upload = function ( gl, seq, values, textures ) {\n\n\tfor ( var i = 0, n = seq.length; i !== n; ++ i ) {\n\n\t\tvar u = seq[ i ],\n\t\t\tv = values[ u.id ];\n\n\t\tif ( v.needsUpdate !== false ) {\n\n\t\t\t// note: always updating when .needsUpdate is undefined\n\t\t\tu.setValue( gl, v.value, textures );\n\n\t\t}\n\n\t}\n\n};\n\nWebGLUniforms.seqWithValue = function ( seq, values ) {\n\n\tvar r = [];\n\n\tfor ( var i = 0, n = seq.length; i !== n; ++ i ) {\n\n\t\tvar u = seq[ i ];\n\t\tif ( u.id in values ) r.push( u );\n\n\t}\n\n\treturn r;\n\n};\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLShader( gl, type, string ) {\n\n\tvar shader = gl.createShader( type );\n\n\tgl.shaderSource( shader, string );\n\tgl.compileShader( shader );\n\n\treturn shader;\n\n}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nvar programIdCount = 0;\n\nfunction addLineNumbers( string ) {\n\n\tvar lines = string.split( '\\n' );\n\n\tfor ( var i = 0; i < lines.length; i ++ ) {\n\n\t\tlines[ i ] = ( i + 1 ) + ': ' + lines[ i ];\n\n\t}\n\n\treturn lines.join( '\\n' );\n\n}\n\nfunction getShaderErrors( gl, shader, type ) {\n\n\tvar status = gl.getShaderParameter( shader, 35713 );\n\tvar log = gl.getShaderInfoLog( shader ).trim();\n\n\tif ( status && log === '' ) return '';\n\n\t// --enable-privileged-webgl-extension\n\t// console.log( '**' + type + '**', gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( shader ) );\n\n\tvar source = gl.getShaderSource( shader );\n\n\treturn 'THREE.WebGLShader: gl.getShaderInfoLog() ' + type + '\\n' + log + addLineNumbers( source );\n\n}\n\nfunction generateExtensions( parameters ) {\n\n\tvar chunks = [\n\t\t( parameters.extensionDerivatives || parameters.envMapCubeUV || parameters.bumpMap || parameters.tangentSpaceNormalMap || parameters.clearcoatNormalMap || parameters.flatShading || parameters.shaderID === 'physical' ) ? '#extension GL_OES_standard_derivatives : enable' : '',\n\t\t( parameters.extensionFragDepth || parameters.logarithmicDepthBuffer ) && parameters.rendererExtensionFragDepth ? '#extension GL_EXT_frag_depth : enable' : '',\n\t\t( parameters.extensionDrawBuffers && parameters.rendererExtensionDrawBuffers ) ? '#extension GL_EXT_draw_buffers : require' : '',\n\t\t( parameters.extensionShaderTextureLOD || false ) && parameters.rendererExtensionShaderTextureLod ? '#extension GL_EXT_shader_texture_lod : enable' : ''\n\t];\n\n\treturn chunks.filter( filterEmptyLine ).join( '\\n' );\n\n}\n\nfunction generateDefines( defines ) {\n\n\tvar chunks = [];\n\n\tfor ( var name in defines ) {\n\n\t\tvar value = defines[ name ];\n\n\t\tif ( value === false ) continue;\n\n\t\tchunks.push( '#define ' + name + ' ' + value );\n\n\t}\n\n\treturn chunks.join( '\\n' );\n\n}\n\nfunction fetchAttributeLocations( gl, program ) {\n\n\tvar attributes = {};\n\n\tvar n = gl.getProgramParameter( program, 35721 );\n\n\tfor ( var i = 0; i < n; i ++ ) {\n\n\t\tvar info = gl.getActiveAttrib( program, i );\n\t\tvar name = info.name;\n\n\t\t// console.log( 'THREE.WebGLProgram: ACTIVE VERTEX ATTRIBUTE:', name, i );\n\n\t\tattributes[ name ] = gl.getAttribLocation( program, name );\n\n\t}\n\n\treturn attributes;\n\n}\n\nfunction filterEmptyLine( string ) {\n\n\treturn string !== '';\n\n}\n\nfunction replaceLightNums( string, parameters ) {\n\n\treturn string\n\t\t.replace( /NUM_DIR_LIGHTS/g, parameters.numDirLights )\n\t\t.replace( /NUM_SPOT_LIGHTS/g, parameters.numSpotLights )\n\t\t.replace( /NUM_RECT_AREA_LIGHTS/g, parameters.numRectAreaLights )\n\t\t.replace( /NUM_POINT_LIGHTS/g, parameters.numPointLights )\n\t\t.replace( /NUM_HEMI_LIGHTS/g, parameters.numHemiLights )\n\t\t.replace( /NUM_DIR_LIGHT_SHADOWS/g, parameters.numDirLightShadows )\n\t\t.replace( /NUM_SPOT_LIGHT_SHADOWS/g, parameters.numSpotLightShadows )\n\t\t.replace( /NUM_POINT_LIGHT_SHADOWS/g, parameters.numPointLightShadows );\n\n}\n\nfunction replaceClippingPlaneNums( string, parameters ) {\n\n\treturn string\n\t\t.replace( /NUM_CLIPPING_PLANES/g, parameters.numClippingPlanes )\n\t\t.replace( /UNION_CLIPPING_PLANES/g, ( parameters.numClippingPlanes - parameters.numClipIntersection ) );\n\n}\n\n// Resolve Includes\n\nvar includePattern = /^[ \\t]*#include +<([\\w\\d./]+)>/gm;\n\nfunction resolveIncludes( string ) {\n\n\treturn string.replace( includePattern, includeReplacer );\n\n}\n\nfunction includeReplacer( match, include ) {\n\n\tvar string = ShaderChunk[ include ];\n\n\tif ( string === undefined ) {\n\n\t\tthrow new Error( 'Can not resolve #include <' + include + '>' );\n\n\t}\n\n\treturn resolveIncludes( string );\n\n}\n\n// Unroll Loops\n\nvar loopPattern = /#pragma unroll_loop[\\s]+?for \\( int i \\= (\\d+)\\; i < (\\d+)\\; i \\+\\+ \\) \\{([\\s\\S]+?)(?=\\})\\}/g;\n\nfunction unrollLoops( string ) {\n\n\treturn string.replace( loopPattern, loopReplacer );\n\n}\n\nfunction loopReplacer( match, start, end, snippet ) {\n\n\tvar string = '';\n\n\tfor ( var i = parseInt( start ); i < parseInt( end ); i ++ ) {\n\n\t\tstring += snippet\n\t\t\t.replace( /\\[ i \\]/g, '[ ' + i + ' ]' )\n\t\t\t.replace( /UNROLLED_LOOP_INDEX/g, i );\n\n\t}\n\n\treturn string;\n\n}\n\nfunction WebGLProgram( renderer, cacheKey, parameters ) {\n\n\tvar gl = renderer.getContext();\n\n\tvar defines = parameters.defines;\n\n\tvar vertexShader = parameters.vertexShader;\n\tvar fragmentShader = parameters.fragmentShader;\n\n\n\tvar gammaFactorDefine = ( renderer.gammaFactor > 0 ) ? renderer.gammaFactor : 1.0;\n\n\tvar customExtensions = parameters.isWebGL2 ? '' : generateExtensions( parameters );\n\n\tvar customDefines = generateDefines( defines );\n\n\tvar program = gl.createProgram();\n\n\tvar prefixVertex, prefixFragment;\n\n\t{\n\n\t\tprefixVertex = [\n\n\t\t\tcustomDefines\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t\tif ( prefixVertex.length > 0 ) {\n\n\t\t\tprefixVertex += '\\n';\n\n\t\t}\n\n\t\tprefixFragment = [\n\n\t\t\tcustomExtensions,\n\t\t\tcustomDefines\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t\tif ( prefixFragment.length > 0 ) {\n\n\t\t\tprefixFragment += '\\n';\n\n\t\t}\n\n\t}\n\n\tvertexShader = resolveIncludes( vertexShader );\n\tvertexShader = replaceLightNums( vertexShader, parameters );\n\tvertexShader = replaceClippingPlaneNums( vertexShader, parameters );\n\n\tfragmentShader = resolveIncludes( fragmentShader );\n\tfragmentShader = replaceLightNums( fragmentShader, parameters );\n\tfragmentShader = replaceClippingPlaneNums( fragmentShader, parameters );\n\n\tvertexShader = unrollLoops( vertexShader );\n\tfragmentShader = unrollLoops( fragmentShader );\n\n\tif ( parameters.isWebGL2 && ! true ) {\n\n\t\tvar isGLSL3ShaderMaterial = false;\n\n\t\tvar versionRegex = /^\\s*#version\\s+300\\s+es\\s*\\n/;\n\n\t\tif ( \n\t\t\tvertexShader.match( versionRegex ) !== null &&\n\t\t\tfragmentShader.match( versionRegex ) !== null ) {\n\n\t\t\tisGLSL3ShaderMaterial = true;\n\n\t\t\tvertexShader = vertexShader.replace( versionRegex, '' );\n\t\t\tfragmentShader = fragmentShader.replace( versionRegex, '' );\n\n\t\t}\n\n\t\t// GLSL 3.0 conversion\n\n\t\tprefixVertex = [\n\t\t\t'#version 300 es\\n',\n\t\t\t'#define attribute in',\n\t\t\t'#define varying out',\n\t\t\t'#define texture2D texture'\n\t\t].join( '\\n' ) + '\\n' + prefixVertex;\n\n\t\tprefixFragment = [\n\t\t\t'#version 300 es\\n',\n\t\t\t'#define varying in',\n\t\t\tisGLSL3ShaderMaterial ? '' : 'out highp vec4 pc_fragColor;',\n\t\t\tisGLSL3ShaderMaterial ? '' : '#define gl_FragColor pc_fragColor',\n\t\t\t'#define gl_FragDepthEXT gl_FragDepth',\n\t\t\t'#define texture2D texture',\n\t\t\t'#define textureCube texture',\n\t\t\t'#define texture2DProj textureProj',\n\t\t\t'#define texture2DLodEXT textureLod',\n\t\t\t'#define texture2DProjLodEXT textureProjLod',\n\t\t\t'#define textureCubeLodEXT textureLod',\n\t\t\t'#define texture2DGradEXT textureGrad',\n\t\t\t'#define texture2DProjGradEXT textureProjGrad',\n\t\t\t'#define textureCubeGradEXT textureGrad'\n\t\t].join( '\\n' ) + '\\n' + prefixFragment;\n\n\t}\n\n\tvar vertexGlsl = prefixVertex + vertexShader;\n\tvar fragmentGlsl = prefixFragment + fragmentShader;\n\n\t// console.log( '*VERTEX*', vertexGlsl );\n\t// console.log( '*FRAGMENT*', fragmentGlsl );\n\n\tvar glVertexShader = WebGLShader( gl, 35633, vertexGlsl );\n\tvar glFragmentShader = WebGLShader( gl, 35632, fragmentGlsl );\n\n\tgl.attachShader( program, glVertexShader );\n\tgl.attachShader( program, glFragmentShader );\n\n\t// Force a particular attribute to index 0.\n\n\tif ( parameters.index0AttributeName !== undefined ) {\n\n\t\tgl.bindAttribLocation( program, 0, parameters.index0AttributeName );\n\n\t}\n\n\tgl.linkProgram( program );\n\n\t// check for link errors\n\tif ( renderer.debug.checkShaderErrors ) {\n\n\t\tvar programLog = gl.getProgramInfoLog( program ).trim();\n\t\tvar vertexLog = gl.getShaderInfoLog( glVertexShader ).trim();\n\t\tvar fragmentLog = gl.getShaderInfoLog( glFragmentShader ).trim();\n\n\t\tvar runnable = true;\n\t\tvar haveDiagnostics = true;\n\n\t\tif ( gl.getProgramParameter( program, 35714 ) === false ) {\n\n\t\t\trunnable = false;\n\n\t\t\tvar vertexErrors = getShaderErrors( gl, glVertexShader, 'vertex' );\n\t\t\tvar fragmentErrors = getShaderErrors( gl, glFragmentShader, 'fragment' );\n\n\t\t\tconsole.error( 'THREE.WebGLProgram: shader error: ', gl.getError(), '35715', gl.getProgramParameter( program, 35715 ), 'gl.getProgramInfoLog', programLog, vertexErrors, fragmentErrors );\n\n\t\t} else if ( programLog !== '' ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLProgram: gl.getProgramInfoLog()', programLog );\n\n\t\t} else if ( vertexLog === '' || fragmentLog === '' ) {\n\n\t\t\thaveDiagnostics = false;\n\n\t\t}\n\n\t\tif ( haveDiagnostics ) {\n\n\t\t\tthis.diagnostics = {\n\n\t\t\t\trunnable: runnable,\n\n\t\t\t\tprogramLog: programLog,\n\n\t\t\t\tvertexShader: {\n\n\t\t\t\t\tlog: vertexLog,\n\t\t\t\t\tprefix: prefixVertex\n\n\t\t\t\t},\n\n\t\t\t\tfragmentShader: {\n\n\t\t\t\t\tlog: fragmentLog,\n\t\t\t\t\tprefix: prefixFragment\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t}\n\n\t}\n\n\t// clean up\n\n\tgl.detachShader( program, glVertexShader );\n\tgl.detachShader( program, glFragmentShader );\n\n\tgl.deleteShader( glVertexShader );\n\tgl.deleteShader( glFragmentShader );\n\n\t// set up caching for uniform locations\n\n\tvar cachedUniforms;\n\n\tthis.getUniforms = function () {\n\n\t\tif ( cachedUniforms === undefined ) {\n\n\t\t\tcachedUniforms = new WebGLUniforms( gl, program );\n\n\t\t}\n\n\t\treturn cachedUniforms;\n\n\t};\n\n\t// set up caching for attribute locations\n\n\tvar cachedAttributes;\n\n\tthis.getAttributes = function () {\n\n\t\tif ( cachedAttributes === undefined ) {\n\n\t\t\tcachedAttributes = fetchAttributeLocations( gl, program );\n\n\t\t}\n\n\t\treturn cachedAttributes;\n\n\t};\n\n\t// free resource\n\n\tthis.destroy = function () {\n\n\t\tgl.deleteProgram( program );\n\t\tthis.program = undefined;\n\n\t};\n\n\t//\n\n\tthis.name = parameters.shaderName;\n\tthis.id = programIdCount ++;\n\tthis.cacheKey = cacheKey;\n\tthis.usedTimes = 1;\n\tthis.program = program;\n\tthis.vertexShader = glVertexShader;\n\tthis.fragmentShader = glFragmentShader;\n\n\treturn this;\n\n}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLPrograms( renderer, extensions, capabilities ) {\n\n\tvar programs = [];\n\n\tvar isWebGL2 = capabilities.isWebGL2;\n\tvar logarithmicDepthBuffer = capabilities.logarithmicDepthBuffer;\n\tvar floatVertexTextures = capabilities.floatVertexTextures;\n\tvar precision = capabilities.precision;\n\tvar maxVertexUniforms = capabilities.maxVertexUniforms;\n\tvar vertexTextures = capabilities.vertexTextures;\n\n\tvar shaderIDs = {\n\t\tMeshDepthMaterial: 'depth',\n\t\tMeshDistanceMaterial: 'distanceRGBA',\n\t\tMeshNormalMaterial: 'normal',\n\t\tMeshBasicMaterial: 'basic',\n\t\tMeshLambertMaterial: 'lambert',\n\t\tMeshPhongMaterial: 'phong',\n\t\tMeshToonMaterial: 'toon',\n\t\tMeshStandardMaterial: 'physical',\n\t\tMeshPhysicalMaterial: 'physical',\n\t\tMeshMatcapMaterial: 'matcap',\n\t\tLineBasicMaterial: 'basic',\n\t\tLineDashedMaterial: 'dashed',\n\t\tPointsMaterial: 'points',\n\t\tShadowMaterial: 'shadow',\n\t\tSpriteMaterial: 'sprite'\n\t};\n\n\tfunction getShaderObject( material, shaderID ) {\n\n\t\tvar shaderobject;\n\n\t\tif ( shaderID ) {\n\n\t\t\tvar shader = ShaderLib[ shaderID ];\n\n\t\t\tshaderobject = {\n\t\t\t\tname: material.type,\n\t\t\t\tuniforms: UniformsUtils.clone( shader.uniforms ),\n\t\t\t\tvertexShader: shader.vertexShader,\n\t\t\t\tfragmentShader: shader.fragmentShader\n\t\t\t};\n\n\t\t} else {\n\n\t\t\tshaderobject = {\n\t\t\t\tname: material.type,\n\t\t\t\tuniforms: material.uniforms,\n\t\t\t\tvertexShader: material.vertexShader,\n\t\t\t\tfragmentShader: material.fragmentShader\n\t\t\t};\n\n\t\t}\n\n\t\treturn shaderobject;\n\n\t}\n\n\tfunction getTextureEncodingFromMap( map ) {\n\n\t\tvar encoding;\n\n\t\tif ( ! map ) {\n\n\t\t\tencoding = LinearEncoding;\n\n\t\t} else if ( map.isTexture ) {\n\n\t\t\tencoding = map.encoding;\n\n\t\t} else if ( map.isWebGLRenderTarget ) {\n\n\t\t\tconsole.warn( \"THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead.\" );\n\t\t\tencoding = map.texture.encoding;\n\n\t\t}\n\n\t\treturn encoding;\n\n\t}\n\n\tthis.getParameters = function ( material, lights, shadows, scene, nClipPlanes, nClipIntersection, object ) {\n\n\t\tvar fog = scene.fog;\n\t\tvar environment =  null;\n\n\t\tvar envMap =  environment;\n\n\t\tvar shaderID = shaderIDs[ material.type ];\n\n\t\t// heuristics to create shader parameters according to lights in the scene\n\t\t// (not to blow over maxLights budget)\n\n\t\tvar maxBones =  0;\n\n\t\tif ( material.precision !== null ) {\n\n\t\t\tprecision = capabilities.getMaxPrecision( material.precision );\n\n\t\t\tif ( precision !== material.precision ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLProgram.getParameters:', material.precision, 'not supported, using', precision, 'instead.' );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar shaderobject = getShaderObject( material, shaderID );\n\t\tmaterial.onBeforeCompile( shaderobject, renderer );\n\n\t\tvar currentRenderTarget = renderer.getRenderTarget();\n\n\t\tvar parameters = {\n\n\t\t\tisWebGL2: isWebGL2,\n\n\t\t\tshaderID: shaderID,\n\t\t\tshaderName: shaderobject.name,\n\n\t\t\tuniforms: shaderobject.uniforms,\n\t\t\tvertexShader: shaderobject.vertexShader,\n\t\t\tfragmentShader: shaderobject.fragmentShader,\n\t\t\tdefines: material.defines,\n\n\t\t\tisRawShaderMaterial: true,\n\t\t\tisShaderMaterial: true,\n\n\t\t\tprecision: precision,\n\n\t\t\tinstancing: false === true,\n\n\t\t\tsupportsVertexTextures: vertexTextures,\n\t\t\toutputEncoding: ( currentRenderTarget !== null ) ? getTextureEncodingFromMap( currentRenderTarget.texture ) : renderer.outputEncoding,\n\t\t\tmap: !! material.map,\n\t\t\tmapEncoding: getTextureEncodingFromMap( material.map ),\n\t\t\tmatcap: !! material.matcap,\n\t\t\tmatcapEncoding: getTextureEncodingFromMap( material.matcap ),\n\t\t\tenvMap: !! envMap,\n\t\t\tenvMapMode: envMap ,\n\t\t\tenvMapEncoding: getTextureEncodingFromMap( envMap ),\n\t\t\tenvMapCubeUV: ( !! envMap ) ,\n\t\t\tlightMap: !! material.lightMap,\n\t\t\tlightMapEncoding: getTextureEncodingFromMap( material.lightMap ),\n\t\t\taoMap: !! material.aoMap,\n\t\t\temissiveMap: !! material.emissiveMap,\n\t\t\temissiveMapEncoding: getTextureEncodingFromMap( material.emissiveMap ),\n\t\t\tbumpMap: !! material.bumpMap,\n\t\t\tnormalMap: !! material.normalMap,\n\t\t\tobjectSpaceNormalMap: material.normalMapType === ObjectSpaceNormalMap,\n\t\t\ttangentSpaceNormalMap: material.normalMapType === TangentSpaceNormalMap,\n\t\t\tclearcoatNormalMap: !! material.clearcoatNormalMap,\n\t\t\tdisplacementMap: !! material.displacementMap,\n\t\t\troughnessMap: !! material.roughnessMap,\n\t\t\tmetalnessMap: !! material.metalnessMap,\n\t\t\tspecularMap: !! material.specularMap,\n\t\t\talphaMap: !! material.alphaMap,\n\n\t\t\tgradientMap: !! material.gradientMap,\n\n\t\t\tsheen: !! material.sheen,\n\n\t\t\tcombine: material.combine,\n\n\t\t\tvertexTangents: ( material.normalMap && material.vertexTangents ),\n\t\t\tvertexColors: material.vertexColors,\n\t\t\tvertexUvs: !! material.map || !! material.bumpMap || !! material.normalMap || !! material.specularMap || !! material.alphaMap || !! material.emissiveMap || !! material.roughnessMap || !! material.metalnessMap || !! material.clearcoatNormalMap || !! material.displacementMap,\n\t\t\tuvsVertexOnly: ! ( !! material.map || !! material.bumpMap || !! material.normalMap || !! material.specularMap || !! material.alphaMap || !! material.emissiveMap || !! material.roughnessMap || !! material.metalnessMap || !! material.clearcoatNormalMap ) && !! material.displacementMap,\n\n\t\t\tfog: !! fog,\n\t\t\tuseFog: material.fog,\n\t\t\tfogExp2: ( fog && fog.isFogExp2 ),\n\n\t\t\tflatShading: material.flatShading,\n\n\t\t\tsizeAttenuation: material.sizeAttenuation,\n\t\t\tlogarithmicDepthBuffer: logarithmicDepthBuffer,\n\n\t\t\tskinning: material.skinning && maxBones > 0,\n\t\t\tmaxBones: maxBones,\n\t\t\tuseVertexTexture: floatVertexTextures,\n\n\t\t\tmorphTargets: false,\n\t\t\tmorphNormals: material.morphNormals,\n\t\t\tmaxMorphTargets: renderer.maxMorphTargets,\n\t\t\tmaxMorphNormals: renderer.maxMorphNormals,\n\n\t\t\tnumDirLights: lights.directional.length,\n\t\t\tnumPointLights: lights.point.length,\n\t\t\tnumSpotLights: lights.spot.length,\n\t\t\tnumRectAreaLights: lights.rectArea.length,\n\t\t\tnumHemiLights: lights.hemi.length,\n\n\t\t\tnumDirLightShadows: lights.directionalShadowMap.length,\n\t\t\tnumPointLightShadows: lights.pointShadowMap.length,\n\t\t\tnumSpotLightShadows: lights.spotShadowMap.length,\n\n\t\t\tnumClippingPlanes: nClipPlanes,\n\t\t\tnumClipIntersection: nClipIntersection,\n\n\t\t\tdithering: material.dithering,\n\n\t\t\tshadowMapEnabled: renderer.shadowMap.enabled && shadows.length > 0,\n\t\t\tshadowMapType: renderer.shadowMap.type,\n\n\t\t\ttoneMapping: material.toneMapped ? renderer.toneMapping : NoToneMapping,\n\t\t\tphysicallyCorrectLights: renderer.physicallyCorrectLights,\n\n\t\t\tpremultipliedAlpha: material.premultipliedAlpha,\n\n\t\t\talphaTest: material.alphaTest,\n\t\t\tdoubleSided: material.side === DoubleSide,\n\t\t\tflipSided: material.side === BackSide,\n\n\t\t\tdepthPacking: ( material.depthPacking !== undefined ) ? material.depthPacking : false,\n\n\t\t\tindex0AttributeName: material.index0AttributeName,\n\n\t\t\textensionDerivatives: material.extensions && material.extensions.derivatives,\n\t\t\textensionFragDepth: material.extensions && material.extensions.fragDepth,\n\t\t\textensionDrawbuffers: material.extensions && material.extensions.drawBuffers,\n\t\t\textensionShaderTextureLOD: material.extensions && material.extensions.shaderTextureLOD,\n\n\t\t\trendererExtensionFragDepth: isWebGL2 || extensions.get( 'EXT_frag_depth' ) !== null,\n\t\t\trendererExtensionDrawBuffers: isWebGL2 || extensions.get( 'WEBGL_draw_buffers' ) !== null,\n\t\t\trendererExtensionShaderTextureLod: isWebGL2 || extensions.get( 'EXT_shader_texture_lod' ) !== null,\n\n\t\t\tonBeforeCompile: material.onBeforeCompile\n\n\t\t};\n\n\t\treturn parameters;\n\n\t};\n\n\tthis.getProgramCacheKey = function ( parameters ) {\n\n\t\tvar array = [];\n\n\t\tif ( parameters.shaderID ) {\n\n\t\t\tarray.push( parameters.shaderID );\n\n\t\t} else {\n\n\t\t\tarray.push( parameters.fragmentShader );\n\t\t\tarray.push( parameters.vertexShader );\n\n\t\t}\n\n\t\tif ( parameters.defines !== undefined ) {\n\n\t\t\tfor ( var name in parameters.defines ) {\n\n\t\t\t\tarray.push( name );\n\t\t\t\tarray.push( parameters.defines[ name ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tarray.push( parameters.onBeforeCompile.toString() );\n\n\t\treturn array.join();\n\n\t};\n\n\tthis.acquireProgram = function ( parameters, cacheKey ) {\n\n\t\tvar program;\n\n\t\t// Check if code has been already compiled\n\t\tfor ( var p = 0, pl = programs.length; p < pl; p ++ ) {\n\n\t\t\tvar preexistingProgram = programs[ p ];\n\n\t\t\tif ( preexistingProgram.cacheKey === cacheKey ) {\n\n\t\t\t\tprogram = preexistingProgram;\n\t\t\t\t++ program.usedTimes;\n\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( program === undefined ) {\n\n\t\t\tprogram = new WebGLProgram( renderer, cacheKey, parameters );\n\t\t\tprograms.push( program );\n\n\t\t}\n\n\t\treturn program;\n\n\t};\n\n\tthis.releaseProgram = function ( program ) {\n\n\t\tif ( -- program.usedTimes === 0 ) {\n\n\t\t\t// Remove from unordered set\n\t\t\tvar i = programs.indexOf( program );\n\t\t\tprograms[ i ] = programs[ programs.length - 1 ];\n\t\t\tprograms.pop();\n\n\t\t\t// Free WebGL resources\n\t\t\tprogram.destroy();\n\n\t\t}\n\n\t};\n\n\t// Exposed for resource monitoring & error feedback via renderer.info:\n\tthis.programs = programs;\n\n}\n\n/**\n * @author fordacious / fordacious.github.io\n */\n\nfunction WebGLProperties() {\n\n\tvar properties = new WeakMap();\n\n\tfunction get( object ) {\n\n\t\tvar map = properties.get( object );\n\n\t\tif ( map === undefined ) {\n\n\t\t\tmap = {};\n\t\t\tproperties.set( object, map );\n\n\t\t}\n\n\t\treturn map;\n\n\t}\n\n\tfunction remove( object ) {\n\n\t\tproperties.delete( object );\n\n\t}\n\n\tfunction update( object, key, value ) {\n\n\t\tproperties.get( object )[ key ] = value;\n\n\t}\n\n\tfunction dispose() {\n\n\t\tproperties = new WeakMap();\n\n\t}\n\n\treturn {\n\t\tget: get,\n\t\tremove: remove,\n\t\tupdate: update,\n\t\tdispose: dispose\n\t};\n\n}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction painterSortStable( a, b ) {\n\n\tif ( a.groupOrder !== b.groupOrder ) {\n\n\t\treturn a.groupOrder - b.groupOrder;\n\n\t} else if ( a.renderOrder !== b.renderOrder ) {\n\n\t\treturn a.renderOrder - b.renderOrder;\n\n\t} else if ( a.program !== b.program ) {\n\n\t\treturn a.program.id - b.program.id;\n\n\t} else if ( a.material.id !== b.material.id ) {\n\n\t\treturn a.material.id - b.material.id;\n\n\t} else if ( a.z !== b.z ) {\n\n\t\treturn a.z - b.z;\n\n\t} else {\n\n\t\treturn a.id - b.id;\n\n\t}\n\n}\n\nfunction reversePainterSortStable( a, b ) {\n\n\tif ( a.groupOrder !== b.groupOrder ) {\n\n\t\treturn a.groupOrder - b.groupOrder;\n\n\t} else if ( a.renderOrder !== b.renderOrder ) {\n\n\t\treturn a.renderOrder - b.renderOrder;\n\n\t} else if ( a.z !== b.z ) {\n\n\t\treturn b.z - a.z;\n\n\t} else {\n\n\t\treturn a.id - b.id;\n\n\t}\n\n}\n\n\nfunction WebGLRenderList() {\n\n\tvar renderItems = [];\n\tvar renderItemsIndex = 0;\n\n\tvar opaque = [];\n\tvar transparent = [];\n\n\tvar defaultProgram = { id: - 1 };\n\n\tfunction init() {\n\n\t\trenderItemsIndex = 0;\n\n\t\topaque.length = 0;\n\t\ttransparent.length = 0;\n\n\t}\n\n\tfunction getNextRenderItem( object, geometry, material, groupOrder, z, group ) {\n\n\t\tvar renderItem = renderItems[ renderItemsIndex ];\n\n\t\tif ( renderItem === undefined ) {\n\n\t\t\trenderItem = {\n\t\t\t\tid: object.id,\n\t\t\t\tobject: object,\n\t\t\t\tgeometry: geometry,\n\t\t\t\tmaterial: material,\n\t\t\t\tprogram: material.program || defaultProgram,\n\t\t\t\tgroupOrder: groupOrder,\n\t\t\t\trenderOrder: object.renderOrder,\n\t\t\t\tz: z,\n\t\t\t\tgroup: group\n\t\t\t};\n\n\t\t\trenderItems[ renderItemsIndex ] = renderItem;\n\n\t\t} else {\n\n\t\t\trenderItem.id = object.id;\n\t\t\trenderItem.object = object;\n\t\t\trenderItem.geometry = geometry;\n\t\t\trenderItem.material = material;\n\t\t\trenderItem.program = material.program || defaultProgram;\n\t\t\trenderItem.groupOrder = groupOrder;\n\t\t\trenderItem.renderOrder = object.renderOrder;\n\t\t\trenderItem.z = z;\n\t\t\trenderItem.group = group;\n\n\t\t}\n\n\t\trenderItemsIndex ++;\n\n\t\treturn renderItem;\n\n\t}\n\n\tfunction push( object, geometry, material, groupOrder, z, group ) {\n\n\t\tvar renderItem = getNextRenderItem( object, geometry, material, groupOrder, z, group );\n\n\t\t( material.transparent === true ? transparent : opaque ).push( renderItem );\n\n\t}\n\n\tfunction unshift( object, geometry, material, groupOrder, z, group ) {\n\n\t\tvar renderItem = getNextRenderItem( object, geometry, material, groupOrder, z, group );\n\n\t\t( material.transparent === true ? transparent : opaque ).unshift( renderItem );\n\n\t}\n\n\tfunction sort( customOpaqueSort, customTransparentSort ) {\n\n\t\tif ( opaque.length > 1 ) opaque.sort( customOpaqueSort || painterSortStable );\n\t\tif ( transparent.length > 1 ) transparent.sort( customTransparentSort || reversePainterSortStable );\n\n\t}\n\n\tfunction finish() {\n\n\t\t// Clear references from inactive renderItems in the list\n\n\t\tfor ( var i = renderItemsIndex, il = renderItems.length; i < il; i ++ ) {\n\n\t\t\tvar renderItem = renderItems[ i ];\n\n\t\t\tif ( renderItem.id === null ) break;\n\n\t\t\trenderItem.id = null;\n\t\t\trenderItem.object = null;\n\t\t\trenderItem.geometry = null;\n\t\t\trenderItem.material = null;\n\t\t\trenderItem.program = null;\n\t\t\trenderItem.group = null;\n\n\t\t}\n\n\t}\n\n\treturn {\n\t\topaque: opaque,\n\t\ttransparent: transparent,\n\n\t\tinit: init,\n\t\tpush: push,\n\t\tunshift: unshift,\n\t\tfinish: finish,\n\n\t\tsort: sort\n\t};\n\n}\n\nfunction WebGLRenderLists() {\n\n\tvar lists = new WeakMap();\n\n\tfunction onSceneDispose( event ) {\n\n\t\tvar scene = event.target;\n\n\t\tscene.removeEventListener( 'dispose', onSceneDispose );\n\n\t\tlists.delete( scene );\n\n\t}\n\n\tfunction get( scene, camera ) {\n\n\t\tvar cameras = lists.get( scene );\n\t\tvar list;\n\t\tif ( cameras === undefined ) {\n\n\t\t\tlist = new WebGLRenderList();\n\t\t\tlists.set( scene, new WeakMap() );\n\t\t\tlists.get( scene ).set( camera, list );\n\n\t\t\tscene.addEventListener( 'dispose', onSceneDispose );\n\n\t\t} else {\n\n\t\t\tlist = cameras.get( camera );\n\t\t\tif ( list === undefined ) {\n\n\t\t\t\tlist = new WebGLRenderList();\n\t\t\t\tcameras.set( camera, list );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn list;\n\n\t}\n\n\tfunction dispose() {\n\n\t\tlists = new WeakMap();\n\n\t}\n\n\treturn {\n\t\tget: get,\n\t\tdispose: dispose\n\t};\n\n}\n\n\n\nvar nextVersion = 0;\n\nfunction shadowCastingLightsFirst( lightA, lightB ) {\n\n\treturn ( lightB.castShadow ? 1 : 0 ) - ( lightA.castShadow ? 1 : 0 );\n\n}\n\nfunction WebGLLights() {\n\n\tvar state = {\n\n\t\tversion: 0,\n\n\t\thash: {\n\t\t\tdirectionalLength: - 1,\n\t\t\tpointLength: - 1,\n\t\t\tspotLength: - 1,\n\t\t\trectAreaLength: - 1,\n\t\t\themiLength: - 1,\n\n\t\t\tnumDirectionalShadows: - 1,\n\t\t\tnumPointShadows: - 1,\n\t\t\tnumSpotShadows: - 1\n\t\t},\n\n\t\tambient: [ 0, 0, 0 ],\n\t\tprobe: [],\n\t\tdirectional: [],\n\t\tdirectionalShadow: [],\n\t\tdirectionalShadowMap: [],\n\t\tdirectionalShadowMatrix: [],\n\t\tspot: [],\n\t\tspotShadow: [],\n\t\tspotShadowMap: [],\n\t\tspotShadowMatrix: [],\n\t\trectArea: [],\n\t\tpoint: [],\n\t\tpointShadow: [],\n\t\tpointShadowMap: [],\n\t\tpointShadowMatrix: [],\n\t\themi: []\n\n\t};\n\n\tfor ( var i = 0; i < 9; i ++ ) state.probe.push( new Vector3() );\n\tvar matrix4 = new Matrix4();\n\tvar matrix42 = new Matrix4();\n\n\tfunction setup( lights, shadows, camera ) {\n\n\t\tvar r = 0, g = 0, b = 0;\n\n\t\tfor ( var i = 0; i < 9; i ++ ) state.probe[ i ].set( 0, 0, 0 );\n\n\t\tvar directionalLength = 0;\n\t\tvar pointLength = 0;\n\t\tvar spotLength = 0;\n\t\tvar rectAreaLength = 0;\n\t\tvar hemiLength = 0;\n\n\t\tvar numDirectionalShadows = 0;\n\t\tvar numPointShadows = 0;\n\t\tvar numSpotShadows = 0;\n\n\t\tvar viewMatrix = camera.matrixWorldInverse;\n\n\t\tlights.sort( shadowCastingLightsFirst );\n\n\t\tfor ( var i = 0, l = lights.length; i < l; i ++ ) {\n\n\t\t\tvar light = lights[ i ];\n\n\t\t\tvar color = light.color;\n\t\t\tvar intensity = light.intensity;\n\t\t\tvar distance = light.distance;\n\n\t\t\tvar shadowMap = ( light.shadow && light.shadow.map ) ? light.shadow.map.texture : null;\n\n\t\t}\n\n\t\tstate.ambient[ 0 ] = r;\n\t\tstate.ambient[ 1 ] = g;\n\t\tstate.ambient[ 2 ] = b;\n\n\t\tvar hash = state.hash;\n\n\t\tif ( hash.directionalLength !== directionalLength ||\n\t\t\thash.pointLength !== pointLength ||\n\t\t\thash.spotLength !== spotLength ||\n\t\t\thash.rectAreaLength !== rectAreaLength ||\n\t\t\thash.hemiLength !== hemiLength ||\n\t\t\thash.numDirectionalShadows !== numDirectionalShadows ||\n\t\t\thash.numPointShadows !== numPointShadows ||\n\t\t\thash.numSpotShadows !== numSpotShadows ) {\n\n\t\t\tstate.directional.length = directionalLength;\n\t\t\tstate.spot.length = spotLength;\n\t\t\tstate.rectArea.length = rectAreaLength;\n\t\t\tstate.point.length = pointLength;\n\t\t\tstate.hemi.length = hemiLength;\n\n\t\t\tstate.directionalShadow.length = numDirectionalShadows;\n\t\t\tstate.directionalShadowMap.length = numDirectionalShadows;\n\t\t\tstate.pointShadow.length = numPointShadows;\n\t\t\tstate.pointShadowMap.length = numPointShadows;\n\t\t\tstate.spotShadow.length = numSpotShadows;\n\t\t\tstate.spotShadowMap.length = numSpotShadows;\n\t\t\tstate.directionalShadowMatrix.length = numDirectionalShadows;\n\t\t\tstate.pointShadowMatrix.length = numPointShadows;\n\t\t\tstate.spotShadowMatrix.length = numSpotShadows;\n\n\t\t\thash.directionalLength = directionalLength;\n\t\t\thash.pointLength = pointLength;\n\t\t\thash.spotLength = spotLength;\n\t\t\thash.rectAreaLength = rectAreaLength;\n\t\t\thash.hemiLength = hemiLength;\n\n\t\t\thash.numDirectionalShadows = numDirectionalShadows;\n\t\t\thash.numPointShadows = numPointShadows;\n\t\t\thash.numSpotShadows = numSpotShadows;\n\n\t\t\tstate.version = nextVersion ++;\n\n\t\t}\n\n\t}\n\n\treturn {\n\t\tsetup: setup,\n\t\tstate: state\n\t};\n\n}\n\n/**\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nfunction WebGLRenderState() {\n\n\tvar lights = new WebGLLights();\n\n\tvar lightsArray = [];\n\tvar shadowsArray = [];\n\n\tfunction init() {\n\n\t\tlightsArray.length = 0;\n\t\tshadowsArray.length = 0;\n\n\t}\n\n\tfunction pushLight( light ) {\n\n\t\tlightsArray.push( light );\n\n\t}\n\n\tfunction pushShadow( shadowLight ) {\n\n\t\tshadowsArray.push( shadowLight );\n\n\t}\n\n\tfunction setupLights( camera ) {\n\n\t\tlights.setup( lightsArray, shadowsArray, camera );\n\n\t}\n\n\tvar state = {\n\t\tlightsArray: lightsArray,\n\t\tshadowsArray: shadowsArray,\n\n\t\tlights: lights\n\t};\n\n\treturn {\n\t\tinit: init,\n\t\tstate: state,\n\t\tsetupLights: setupLights,\n\n\t\tpushLight: pushLight,\n\t\tpushShadow: pushShadow\n\t};\n\n}\n\nfunction WebGLRenderStates() {\n\n\tvar renderStates = new WeakMap();\n\n\tfunction onSceneDispose( event ) {\n\n\t\tvar scene = event.target;\n\n\t\tscene.removeEventListener( 'dispose', onSceneDispose );\n\n\t\trenderStates.delete( scene );\n\n\t}\n\n\tfunction get( scene, camera ) {\n\n\t\tvar renderState;\n\n\t\tif ( renderStates.has( scene ) === false ) {\n\n\t\t\trenderState = new WebGLRenderState();\n\t\t\trenderStates.set( scene, new WeakMap() );\n\t\t\trenderStates.get( scene ).set( camera, renderState );\n\n\t\t\tscene.addEventListener( 'dispose', onSceneDispose );\n\n\t\t} else {\n\n\t\t\tif ( renderStates.get( scene ).has( camera ) === false ) {\n\n\t\t\t\trenderState = new WebGLRenderState();\n\t\t\t\trenderStates.get( scene ).set( camera, renderState );\n\n\t\t\t} else {\n\n\t\t\t\trenderState = renderStates.get( scene ).get( camera );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn renderState;\n\n\t}\n\n\tfunction dispose() {\n\n\t\trenderStates = new WeakMap();\n\n\t}\n\n\treturn {\n\t\tget: get,\n\t\tdispose: dispose\n\t};\n\n}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author bhouston / https://clara.io\n * @author WestLangley / http://github.com/WestLangley\n *\n * parameters = {\n *\n *  opacity: <float>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>\n * }\n */\n\nfunction MeshDepthMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'MeshDepthMaterial';\n\n\tthis.depthPacking = BasicDepthPacking;\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\n\tthis.map = null;\n\n\tthis.alphaMap = null;\n\n\tthis.displacementMap = null;\n\tthis.displacementScale = 1;\n\tthis.displacementBias = 0;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\n\tthis.fog = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshDepthMaterial.prototype = Object.create( Material.prototype );\nMeshDepthMaterial.prototype.constructor = MeshDepthMaterial;\n\nMeshDepthMaterial.prototype.isMeshDepthMaterial = true;\n\nMeshDepthMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.depthPacking = source.depthPacking;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\n\tthis.map = source.map;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.displacementMap = source.displacementMap;\n\tthis.displacementScale = source.displacementScale;\n\tthis.displacementBias = source.displacementBias;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\n\treturn this;\n\n};\n\nfunction MeshDistanceMaterial() {}\n\nfunction WebGLShadowMap() {\n    this.render = function() {};\n}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLState( gl, extensions, capabilities ) {\n\n\tvar isWebGL2 = capabilities.isWebGL2;\n\n\tfunction ColorBuffer() {\n\n\t\tvar locked = false;\n\n\t\tvar color = new Vector4();\n\t\tvar currentColorMask = null;\n\t\tvar currentColorClear = new Vector4( 0, 0, 0, 0 );\n\n\t\treturn {\n\n\t\t\tsetMask: function ( colorMask ) {\n\n\t\t\t\tif ( currentColorMask !== colorMask && ! locked ) {\n\n\t\t\t\t\tgl.colorMask( colorMask, colorMask, colorMask, colorMask );\n\t\t\t\t\tcurrentColorMask = colorMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetLocked: function ( lock ) {\n\n\t\t\t\tlocked = lock;\n\n\t\t\t},\n\n\t\t\tsetClear: function ( r, g, b, a, premultipliedAlpha ) {\n\n\t\t\t\tif ( premultipliedAlpha === true ) {\n\n\t\t\t\t\tr *= a; g *= a; b *= a;\n\n\t\t\t\t}\n\n\t\t\t\tcolor.set( r, g, b, a );\n\n\t\t\t\tif ( currentColorClear.equals( color ) === false ) {\n\n\t\t\t\t\tgl.clearColor( r, g, b, a );\n\t\t\t\t\tcurrentColorClear.copy( color );\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\treset: function () {\n\n\t\t\t\tlocked = false;\n\n\t\t\t\tcurrentColorMask = null;\n\t\t\t\tcurrentColorClear.set( - 1, 0, 0, 0 ); // set to invalid state\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\tfunction DepthBuffer() {\n\n\t\tvar locked = false;\n\n\t\tvar currentDepthMask = null;\n\t\tvar currentDepthFunc = null;\n\t\tvar currentDepthClear = null;\n\n\t\treturn {\n\n\t\t\tsetTest: function ( depthTest ) {\n\n\t\t\t\tif ( depthTest ) {\n\n\t\t\t\t\tenable( 2929 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tdisable( 2929 );\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetMask: function ( depthMask ) {\n\n\t\t\t\tif ( currentDepthMask !== depthMask && ! locked ) {\n\n\t\t\t\t\tgl.depthMask( depthMask );\n\t\t\t\t\tcurrentDepthMask = depthMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetFunc: function ( depthFunc ) {\n\n\t\t\t\tif ( currentDepthFunc !== depthFunc ) {\n\n\t\t\t\t\tif ( depthFunc ) {\n\n\t\t\t\t\t\tswitch ( depthFunc ) {\n\n\t\t\t\t\t\t\tcase NeverDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( 512 );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase AlwaysDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( 519 );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase LessDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( 513 );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase LessEqualDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( 515 );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase EqualDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( 514 );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase GreaterEqualDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( 518 );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase GreaterDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( 516 );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase NotEqualDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( 517 );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( 515 );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tgl.depthFunc( 515 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tcurrentDepthFunc = depthFunc;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetLocked: function ( lock ) {\n\n\t\t\t\tlocked = lock;\n\n\t\t\t},\n\n\t\t\tsetClear: function ( depth ) {\n\n\t\t\t\tif ( currentDepthClear !== depth ) {\n\n\t\t\t\t\tgl.clearDepth( depth );\n\t\t\t\t\tcurrentDepthClear = depth;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\treset: function () {\n\n\t\t\t\tlocked = false;\n\n\t\t\t\tcurrentDepthMask = null;\n\t\t\t\tcurrentDepthFunc = null;\n\t\t\t\tcurrentDepthClear = null;\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\tfunction StencilBuffer() {\n\n\t\tvar locked = false;\n\n\t\tvar currentStencilMask = null;\n\t\tvar currentStencilFunc = null;\n\t\tvar currentStencilRef = null;\n\t\tvar currentStencilFuncMask = null;\n\t\tvar currentStencilFail = null;\n\t\tvar currentStencilZFail = null;\n\t\tvar currentStencilZPass = null;\n\t\tvar currentStencilClear = null;\n\n\t\treturn {\n\n\t\t\tsetTest: function ( stencilTest ) {\n\n\t\t\t\tif ( ! locked ) {\n\n\t\t\t\t\tif ( stencilTest ) {\n\n\t\t\t\t\t\tenable( 2960 );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tdisable( 2960 );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetMask: function ( stencilMask ) {\n\n\t\t\t\tif ( currentStencilMask !== stencilMask && ! locked ) {\n\n\t\t\t\t\tgl.stencilMask( stencilMask );\n\t\t\t\t\tcurrentStencilMask = stencilMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetFunc: function ( stencilFunc, stencilRef, stencilMask ) {\n\n\t\t\t\tif ( currentStencilFunc !== stencilFunc ||\n\t\t\t\t     currentStencilRef \t!== stencilRef \t||\n\t\t\t\t     currentStencilFuncMask !== stencilMask ) {\n\n\t\t\t\t\tgl.stencilFunc( stencilFunc, stencilRef, stencilMask );\n\n\t\t\t\t\tcurrentStencilFunc = stencilFunc;\n\t\t\t\t\tcurrentStencilRef = stencilRef;\n\t\t\t\t\tcurrentStencilFuncMask = stencilMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetOp: function ( stencilFail, stencilZFail, stencilZPass ) {\n\n\t\t\t\tif ( currentStencilFail\t !== stencilFail \t||\n\t\t\t\t     currentStencilZFail !== stencilZFail ||\n\t\t\t\t     currentStencilZPass !== stencilZPass ) {\n\n\t\t\t\t\tgl.stencilOp( stencilFail, stencilZFail, stencilZPass );\n\n\t\t\t\t\tcurrentStencilFail = stencilFail;\n\t\t\t\t\tcurrentStencilZFail = stencilZFail;\n\t\t\t\t\tcurrentStencilZPass = stencilZPass;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetLocked: function ( lock ) {\n\n\t\t\t\tlocked = lock;\n\n\t\t\t},\n\n\t\t\tsetClear: function ( stencil ) {\n\n\t\t\t\tif ( currentStencilClear !== stencil ) {\n\n\t\t\t\t\tgl.clearStencil( stencil );\n\t\t\t\t\tcurrentStencilClear = stencil;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\treset: function () {\n\n\t\t\t\tlocked = false;\n\n\t\t\t\tcurrentStencilMask = null;\n\t\t\t\tcurrentStencilFunc = null;\n\t\t\t\tcurrentStencilRef = null;\n\t\t\t\tcurrentStencilFuncMask = null;\n\t\t\t\tcurrentStencilFail = null;\n\t\t\t\tcurrentStencilZFail = null;\n\t\t\t\tcurrentStencilZPass = null;\n\t\t\t\tcurrentStencilClear = null;\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\t//\n\n\tvar colorBuffer = new ColorBuffer();\n\tvar depthBuffer = new DepthBuffer();\n\tvar stencilBuffer = new StencilBuffer();\n\n\tvar maxVertexAttributes = gl.getParameter( 34921 );\n\tvar newAttributes = new Uint8Array( maxVertexAttributes );\n\tvar enabledAttributes = new Uint8Array( maxVertexAttributes );\n\tvar attributeDivisors = new Uint8Array( maxVertexAttributes );\n\n\tvar enabledCapabilities = {};\n\n\tvar currentProgram = null;\n\n\tvar currentBlendingEnabled = null;\n\tvar currentBlending = null;\n\tvar currentBlendEquation = null;\n\tvar currentBlendSrc = null;\n\tvar currentBlendDst = null;\n\tvar currentBlendEquationAlpha = null;\n\tvar currentBlendSrcAlpha = null;\n\tvar currentBlendDstAlpha = null;\n\tvar currentPremultipledAlpha = false;\n\n\tvar currentFlipSided = null;\n\tvar currentCullFace = null;\n\n\tvar currentLineWidth = null;\n\n\tvar currentPolygonOffsetFactor = null;\n\tvar currentPolygonOffsetUnits = null;\n\n\tvar maxTextures = gl.getParameter( 35661 );\n\n\tvar lineWidthAvailable = false;\n\tvar version = 0;\n\tvar glVersion = gl.getParameter( 7938 );\n\n\tif ( glVersion.indexOf( 'WebGL' ) !== - 1 ) {\n\n\t\tversion = parseFloat( /^WebGL\\ ([0-9])/.exec( glVersion )[ 1 ] );\n\t\tlineWidthAvailable = ( version >= 1.0 );\n\n\t} else if ( glVersion.indexOf( 'OpenGL ES' ) !== - 1 ) {\n\n\t\tversion = parseFloat( /^OpenGL\\ ES\\ ([0-9])/.exec( glVersion )[ 1 ] );\n\t\tlineWidthAvailable = ( version >= 2.0 );\n\n\t}\n\n\tvar currentTextureSlot = null;\n\tvar currentBoundTextures = {};\n\n\tvar currentScissor = new Vector4();\n\tvar currentViewport = new Vector4();\n\n\tfunction createTexture( type, target, count ) {\n\n\t\tvar data = new Uint8Array( 4 ); // 4 is required to match default unpack alignment of 4.\n\t\tvar texture = gl.createTexture();\n\n\t\tgl.bindTexture( type, texture );\n\t\tgl.texParameteri( type, 10241, 9728 );\n\t\tgl.texParameteri( type, 10240, 9728 );\n\n\t\tfor ( var i = 0; i < count; i ++ ) {\n\n\t\t\tgl.texImage2D( target + i, 0, 6408, 1, 1, 0, 6408, 5121, data );\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n\tvar emptyTextures = {};\n\temptyTextures[ 3553 ] = createTexture( 3553, 3553, 1 );\n\temptyTextures[ 34067 ] = createTexture( 34067, 34069, 6 );\n\n\t// init\n\n\tcolorBuffer.setClear( 0, 0, 0, 1 );\n\tdepthBuffer.setClear( 1 );\n\tstencilBuffer.setClear( 0 );\n\n\tenable( 2929 );\n\tdepthBuffer.setFunc( LessEqualDepth );\n\n\tsetFlipSided( false );\n\tsetCullFace( CullFaceBack );\n\tenable( 2884 );\n\n\tsetBlending( NoBlending );\n\n\t//\n\n\tfunction initAttributes() {\n\n\t\tfor ( var i = 0, l = newAttributes.length; i < l; i ++ ) {\n\n\t\t\tnewAttributes[ i ] = 0;\n\n\t\t}\n\n\t}\n\n\tfunction enableAttribute( attribute ) {\n\n\t\tenableAttributeAndDivisor( attribute, 0 );\n\n\t}\n\n\tfunction enableAttributeAndDivisor( attribute, meshPerAttribute ) {\n\n\t\tnewAttributes[ attribute ] = 1;\n\n\t\tif ( enabledAttributes[ attribute ] === 0 ) {\n\n\t\t\tgl.enableVertexAttribArray( attribute );\n\t\t\tenabledAttributes[ attribute ] = 1;\n\n\t\t}\n\n\t\tif ( attributeDivisors[ attribute ] !== meshPerAttribute ) {\n\n\t\t\tvar extension = isWebGL2 ? gl : extensions.get( 'ANGLE_instanced_arrays' );\n\n\t\t\textension[ isWebGL2 ? 'vertexAttribDivisor' : 'vertexAttribDivisorANGLE' ]( attribute, meshPerAttribute );\n\t\t\tattributeDivisors[ attribute ] = meshPerAttribute;\n\n\t\t}\n\n\t}\n\n\tfunction disableUnusedAttributes() {\n\n\t\tfor ( var i = 0, l = enabledAttributes.length; i !== l; ++ i ) {\n\n\t\t\tif ( enabledAttributes[ i ] !== newAttributes[ i ] ) {\n\n\t\t\t\tgl.disableVertexAttribArray( i );\n\t\t\t\tenabledAttributes[ i ] = 0;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction enable( id ) {\n\n\t\tif ( enabledCapabilities[ id ] !== true ) {\n\n\t\t\tgl.enable( id );\n\t\t\tenabledCapabilities[ id ] = true;\n\n\t\t}\n\n\t}\n\n\tfunction disable( id ) {\n\n\t\tif ( enabledCapabilities[ id ] !== false ) {\n\n\t\t\tgl.disable( id );\n\t\t\tenabledCapabilities[ id ] = false;\n\n\t\t}\n\n\t}\n\n\tfunction useProgram( program ) {\n\n\t\tif ( currentProgram !== program ) {\n\n\t\t\tgl.useProgram( program );\n\n\t\t\tcurrentProgram = program;\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\tvar equationToGL = {\n\t\t[ AddEquation ]: 32774,\n\t\t[ SubtractEquation ]: 32778,\n\t\t[ ReverseSubtractEquation ]: 32779\n\t};\n\n\tif ( isWebGL2 ) {\n\n\t\tequationToGL[ MinEquation ] = 32775;\n\t\tequationToGL[ MaxEquation ] = 32776;\n\n\t} else {\n\n\t\tvar extension = extensions.get( 'EXT_blend_minmax' );\n\n\t\tif ( extension !== null ) {\n\n\t\t\tequationToGL[ MinEquation ] = extension.MIN_EXT;\n\t\t\tequationToGL[ MaxEquation ] = extension.MAX_EXT;\n\n\t\t}\n\n\t}\n\n\tvar factorToGL = {\n\t\t[ ZeroFactor ]: 0,\n\t\t[ OneFactor ]: 1,\n\t\t[ SrcColorFactor ]: 768,\n\t\t[ SrcAlphaFactor ]: 770,\n\t\t[ SrcAlphaSaturateFactor ]: 776,\n\t\t[ DstColorFactor ]: 774,\n\t\t[ DstAlphaFactor ]: 772,\n\t\t[ OneMinusSrcColorFactor ]: 769,\n\t\t[ OneMinusSrcAlphaFactor ]: 771,\n\t\t[ OneMinusDstColorFactor ]: 775,\n\t\t[ OneMinusDstAlphaFactor ]: 773\n\t};\n\n\tfunction setBlending( blending, blendEquation, blendSrc, blendDst, blendEquationAlpha, blendSrcAlpha, blendDstAlpha, premultipliedAlpha ) {\n\n\t\tif ( blending === NoBlending ) {\n\n\t\t\tif ( currentBlendingEnabled ) {\n\n\t\t\t\tdisable( 3042 );\n\t\t\t\tcurrentBlendingEnabled = false;\n\n\t\t\t}\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( ! currentBlendingEnabled ) {\n\n\t\t\tenable( 3042 );\n\t\t\tcurrentBlendingEnabled = true;\n\n\t\t}\n\n\t\tif ( blending !== CustomBlending ) {\n\n\t\t\tif ( blending !== currentBlending || premultipliedAlpha !== currentPremultipledAlpha ) {\n\n\t\t\t\tif ( currentBlendEquation !== AddEquation || currentBlendEquationAlpha !== AddEquation ) {\n\n\t\t\t\t\tgl.blendEquation( 32774 );\n\n\t\t\t\t\tcurrentBlendEquation = AddEquation;\n\t\t\t\t\tcurrentBlendEquationAlpha = AddEquation;\n\n\t\t\t\t}\n\n\t\t\t\tif ( premultipliedAlpha ) {\n\n\t\t\t\t\tswitch ( blending ) {\n\n\t\t\t\t\t\tcase NormalBlending:\n\t\t\t\t\t\t\tgl.blendFuncSeparate( 1, 771, 1, 771 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase AdditiveBlending:\n\t\t\t\t\t\t\tgl.blendFunc( 1, 1 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase SubtractiveBlending:\n\t\t\t\t\t\t\tgl.blendFuncSeparate( 0, 0, 769, 771 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase MultiplyBlending:\n\t\t\t\t\t\t\tgl.blendFuncSeparate( 0, 768, 0, 770 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tconsole.error( 'THREE.WebGLState: Invalid blending: ', blending );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tswitch ( blending ) {\n\n\t\t\t\t\t\tcase NormalBlending:\n\t\t\t\t\t\t\tgl.blendFuncSeparate( 770, 771, 1, 771 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase AdditiveBlending:\n\t\t\t\t\t\t\tgl.blendFunc( 770, 1 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase SubtractiveBlending:\n\t\t\t\t\t\t\tgl.blendFunc( 0, 769 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase MultiplyBlending:\n\t\t\t\t\t\t\tgl.blendFunc( 0, 768 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tconsole.error( 'THREE.WebGLState: Invalid blending: ', blending );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tcurrentBlendSrc = null;\n\t\t\t\tcurrentBlendDst = null;\n\t\t\t\tcurrentBlendSrcAlpha = null;\n\t\t\t\tcurrentBlendDstAlpha = null;\n\n\t\t\t\tcurrentBlending = blending;\n\t\t\t\tcurrentPremultipledAlpha = premultipliedAlpha;\n\n\t\t\t}\n\n\t\t\treturn;\n\n\t\t}\n\n\t\t// custom blending\n\n\t\tblendEquationAlpha = blendEquationAlpha || blendEquation;\n\t\tblendSrcAlpha = blendSrcAlpha || blendSrc;\n\t\tblendDstAlpha = blendDstAlpha || blendDst;\n\n\t\tif ( blendEquation !== currentBlendEquation || blendEquationAlpha !== currentBlendEquationAlpha ) {\n\n\t\t\tgl.blendEquationSeparate( equationToGL[ blendEquation ], equationToGL[ blendEquationAlpha ] );\n\n\t\t\tcurrentBlendEquation = blendEquation;\n\t\t\tcurrentBlendEquationAlpha = blendEquationAlpha;\n\n\t\t}\n\n\t\tif ( blendSrc !== currentBlendSrc || blendDst !== currentBlendDst || blendSrcAlpha !== currentBlendSrcAlpha || blendDstAlpha !== currentBlendDstAlpha ) {\n\n\t\t\tgl.blendFuncSeparate( factorToGL[ blendSrc ], factorToGL[ blendDst ], factorToGL[ blendSrcAlpha ], factorToGL[ blendDstAlpha ] );\n\n\t\t\tcurrentBlendSrc = blendSrc;\n\t\t\tcurrentBlendDst = blendDst;\n\t\t\tcurrentBlendSrcAlpha = blendSrcAlpha;\n\t\t\tcurrentBlendDstAlpha = blendDstAlpha;\n\n\t\t}\n\n\t\tcurrentBlending = blending;\n\t\tcurrentPremultipledAlpha = null;\n\n\t}\n\n\tfunction setMaterial( material, frontFaceCW ) {\n\n\t\tmaterial.side === DoubleSide\n\t\t\t? disable( 2884 )\n\t\t\t: enable( 2884 );\n\n\t\tvar flipSided = ( material.side === BackSide );\n\t\tif ( frontFaceCW ) flipSided = ! flipSided;\n\n\t\tsetFlipSided( flipSided );\n\n\t\t( material.blending === NormalBlending && material.transparent === false )\n\t\t\t? setBlending( NoBlending )\n\t\t\t: setBlending( material.blending, material.blendEquation, material.blendSrc, material.blendDst, material.blendEquationAlpha, material.blendSrcAlpha, material.blendDstAlpha, material.premultipliedAlpha );\n\n\t\tdepthBuffer.setFunc( material.depthFunc );\n\t\tdepthBuffer.setTest( material.depthTest );\n\t\tdepthBuffer.setMask( material.depthWrite );\n\t\tcolorBuffer.setMask( material.colorWrite );\n\n\t\tvar stencilWrite = material.stencilWrite;\n\t\tstencilBuffer.setTest( stencilWrite );\n\t\tif ( stencilWrite ) {\n\n\t\t\tstencilBuffer.setMask( material.stencilWriteMask );\n\t\t\tstencilBuffer.setFunc( material.stencilFunc, material.stencilRef, material.stencilFuncMask );\n\t\t\tstencilBuffer.setOp( material.stencilFail, material.stencilZFail, material.stencilZPass );\n\n\t\t}\n\n\t\tsetPolygonOffset( material.polygonOffset, material.polygonOffsetFactor, material.polygonOffsetUnits );\n\n\t}\n\n\t//\n\n\tfunction setFlipSided( flipSided ) {\n\n\t\tif ( currentFlipSided !== flipSided ) {\n\n\t\t\tif ( flipSided ) {\n\n\t\t\t\tgl.frontFace( 2304 );\n\n\t\t\t} else {\n\n\t\t\t\tgl.frontFace( 2305 );\n\n\t\t\t}\n\n\t\t\tcurrentFlipSided = flipSided;\n\n\t\t}\n\n\t}\n\n\tfunction setCullFace( cullFace ) {\n\n\t\tif ( cullFace !== CullFaceNone ) {\n\n\t\t\tenable( 2884 );\n\n\t\t\tif ( cullFace !== currentCullFace ) {\n\n\t\t\t\tif ( cullFace === CullFaceBack ) {\n\n\t\t\t\t\tgl.cullFace( 1029 );\n\n\t\t\t\t} else if ( cullFace === CullFaceFront ) {\n\n\t\t\t\t\tgl.cullFace( 1028 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tgl.cullFace( 1032 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tdisable( 2884 );\n\n\t\t}\n\n\t\tcurrentCullFace = cullFace;\n\n\t}\n\n\tfunction setLineWidth( width ) {\n\n\t\tif ( width !== currentLineWidth ) {\n\n\t\t\tif ( lineWidthAvailable ) gl.lineWidth( width );\n\n\t\t\tcurrentLineWidth = width;\n\n\t\t}\n\n\t}\n\n\tfunction setPolygonOffset( polygonOffset, factor, units ) {\n\n\t\tif ( polygonOffset ) {\n\n\t\t\tenable( 32823 );\n\n\t\t\tif ( currentPolygonOffsetFactor !== factor || currentPolygonOffsetUnits !== units ) {\n\n\t\t\t\tgl.polygonOffset( factor, units );\n\n\t\t\t\tcurrentPolygonOffsetFactor = factor;\n\t\t\t\tcurrentPolygonOffsetUnits = units;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tdisable( 32823 );\n\n\t\t}\n\n\t}\n\n\tfunction setScissorTest( scissorTest ) {\n\n\t\tif ( scissorTest ) {\n\n\t\t\tenable( 3089 );\n\n\t\t} else {\n\n\t\t\tdisable( 3089 );\n\n\t\t}\n\n\t}\n\n\t// texture\n\n\tfunction activeTexture( webglSlot ) {\n\n\t\tif ( webglSlot === undefined ) webglSlot = 33984 + maxTextures - 1;\n\n\t\tif ( currentTextureSlot !== webglSlot ) {\n\n\t\t\tgl.activeTexture( webglSlot );\n\t\t\tcurrentTextureSlot = webglSlot;\n\n\t\t}\n\n\t}\n\n\tfunction bindTexture( webglType, webglTexture ) {\n\n\t\tif ( currentTextureSlot === null ) {\n\n\t\t\tactiveTexture();\n\n\t\t}\n\n\t\tvar boundTexture = currentBoundTextures[ currentTextureSlot ];\n\n\t\tif ( boundTexture === undefined ) {\n\n\t\t\tboundTexture = { type: undefined, texture: undefined };\n\t\t\tcurrentBoundTextures[ currentTextureSlot ] = boundTexture;\n\n\t\t}\n\n\t\tif ( boundTexture.type !== webglType || boundTexture.texture !== webglTexture ) {\n\n\t\t\tgl.bindTexture( webglType, webglTexture || emptyTextures[ webglType ] );\n\n\t\t\tboundTexture.type = webglType;\n\t\t\tboundTexture.texture = webglTexture;\n\n\t\t}\n\n\t}\n\n\tfunction activeAndBindTexture( webglSlot, webglType, webglTexture ) {\n\t\tconst boundTexture = currentBoundTextures[ webglSlot ];\n\t\tconst needsUpdate = ( boundTexture === undefined || boundTexture.type !== webglType || boundTexture.texture !== webglTexture ); \n    if ( !needsUpdate ) { return }\n    activeTexture( webglSlot );\n    bindTexture( webglType, webglTexture );\n  }\n\n\tfunction unbindTexture() {\n\n\t\tvar boundTexture = currentBoundTextures[ currentTextureSlot ];\n\n\t\tif ( boundTexture !== undefined && boundTexture.type !== undefined ) {\n\n\t\t\tgl.bindTexture( boundTexture.type, null );\n\n\t\t\tboundTexture.type = undefined;\n\t\t\tboundTexture.texture = undefined;\n\n\t\t}\n\n\t}\n\n\tfunction compressedTexImage2D() {\n\n\t\ttry {\n\n\t\t\tgl.compressedTexImage2D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\tfunction texImage2D() {\n\n\t\ttry {\n\n\t\t\tgl.texImage2D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\tfunction texImage3D() {\n\n\t\ttry {\n\n\t\t\tgl.texImage3D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\t//\n\n\tfunction scissor( scissor ) {\n\n\t\tif ( currentScissor.equals( scissor ) === false ) {\n\n\t\t\tgl.scissor( scissor.x, scissor.y, scissor.z, scissor.w );\n\t\t\tcurrentScissor.copy( scissor );\n\n\t\t}\n\n\t}\n\n\tfunction viewport( viewport ) {\n\n\t\tif ( currentViewport.equals( viewport ) === false ) {\n\n\t\t\tgl.viewport( viewport.x, viewport.y, viewport.z, viewport.w );\n\t\t\tcurrentViewport.copy( viewport );\n\n\t\t}\n\n\t}\n\n\t//\n\n\tfunction reset() {\n\n\t\tfor ( var i = 0; i < enabledAttributes.length; i ++ ) {\n\n\t\t\tif ( enabledAttributes[ i ] === 1 ) {\n\n\t\t\t\tgl.disableVertexAttribArray( i );\n\t\t\t\tenabledAttributes[ i ] = 0;\n\n\t\t\t}\n\n\t\t}\n\n\t\tenabledCapabilities = {};\n\n\t\tcurrentTextureSlot = null;\n\t\tcurrentBoundTextures = {};\n\n\t\tcurrentProgram = null;\n\n\t\tcurrentBlending = null;\n\n\t\tcurrentFlipSided = null;\n\t\tcurrentCullFace = null;\n\n\t\tcolorBuffer.reset();\n\t\tdepthBuffer.reset();\n\t\tstencilBuffer.reset();\n\n\t}\n\n\treturn {\n\n\t\tbuffers: {\n\t\t\tcolor: colorBuffer,\n\t\t\tdepth: depthBuffer,\n\t\t\tstencil: stencilBuffer\n\t\t},\n\n\t\tinitAttributes: initAttributes,\n\t\tenableAttribute: enableAttribute,\n\t\tenableAttributeAndDivisor: enableAttributeAndDivisor,\n\t\tdisableUnusedAttributes: disableUnusedAttributes,\n\t\tenable: enable,\n\t\tdisable: disable,\n\n\t\tuseProgram: useProgram,\n\n\t\tsetBlending: setBlending,\n\t\tsetMaterial: setMaterial,\n\n\t\tsetFlipSided: setFlipSided,\n\t\tsetCullFace: setCullFace,\n\n\t\tsetLineWidth: setLineWidth,\n\t\tsetPolygonOffset: setPolygonOffset,\n\n\t\tsetScissorTest: setScissorTest,\n\n\t\tactiveTexture: activeTexture,\n\t\tbindTexture: bindTexture,\n\t\tactiveAndBindTexture: activeAndBindTexture,\n\t\tunbindTexture: unbindTexture,\n\t\tcompressedTexImage2D: compressedTexImage2D,\n\t\ttexImage2D: texImage2D,\n\t\ttexImage3D: texImage3D,\n\n\t\tscissor: scissor,\n\t\tviewport: viewport,\n\n\t\treset: reset\n\n\t};\n\n}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLTextures( _gl, extensions, state, properties, capabilities, utils, info ) {\n\n\tvar isWebGL2 = capabilities.isWebGL2;\n\tvar maxTextures = capabilities.maxTextures;\n\tvar maxCubemapSize = capabilities.maxCubemapSize;\n\tvar maxTextureSize = capabilities.maxTextureSize;\n\tvar maxSamples = capabilities.maxSamples;\n\tvar _canvas;\n\n\t// cordova iOS (as of 5.0) still uses UIWebView, which provides OffscreenCanvas,\n\t// also OffscreenCanvas.getContext(\"webgl\"), but not OffscreenCanvas.getContext(\"2d\")!\n\t// Some implementations may only implement OffscreenCanvas partially (e.g. lacking 2d).\n\n\tvar useOffscreenCanvas = false;\n\n\ttry {\n\n\t\tuseOffscreenCanvas = typeof OffscreenCanvas !== 'undefined'\n\t\t\t&& ( new OffscreenCanvas( 1, 1 ).getContext( \"2d\" ) ) !== null;\n\n\t} catch ( err ) {\n\n\t\t// Ignore any errors\n\n\t}\n\n\tfunction createCanvas( width, height ) {\n\n\t\t// Use OffscreenCanvas when available. Specially needed in web workers\n\n\t\treturn useOffscreenCanvas ?\n\t\t\tnew OffscreenCanvas( width, height ) :\n\t\t\tdocument.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' );\n\n\t}\n\n\tfunction resizeImage( image, needsPowerOfTwo, needsNewCanvas, maxSize ) {\n\n\t\tvar scale = 1;\n\n\t\t// handle case if texture exceeds max size\n\n\t\tif ( image.width > maxSize || image.height > maxSize ) {\n\n\t\t\tscale = maxSize / Math.max( image.width, image.height );\n\n\t\t}\n\n\t\t// only perform resize if necessary\n\n\t\tif ( scale < 1 || needsPowerOfTwo === true ) {\n\n\t\t\t// only perform resize for certain image types\n\n\t\t\tif ( ( typeof HTMLImageElement !== 'undefined' && image instanceof HTMLImageElement ) ||\n\t\t\t\t( typeof HTMLCanvasElement !== 'undefined' && image instanceof HTMLCanvasElement ) ||\n\t\t\t\t( typeof ImageBitmap !== 'undefined' && image instanceof ImageBitmap ) ) {\n\n\t\t\t\tvar floor = needsPowerOfTwo ? MathUtils.floorPowerOfTwo : Math.floor;\n\n\t\t\t\tvar width = floor( scale * image.width );\n\t\t\t\tvar height = floor( scale * image.height );\n\n\t\t\t\tif ( _canvas === undefined ) _canvas = createCanvas( width, height );\n\n\t\t\t\t// cube textures can't reuse the same canvas\n\n\t\t\t\tvar canvas = needsNewCanvas ? createCanvas( width, height ) : _canvas;\n\n\t\t\t\tcanvas.width = width;\n\t\t\t\tcanvas.height = height;\n\n\t\t\t\tvar context = canvas.getContext( '2d' );\n\t\t\t\tcontext.drawImage( image, 0, 0, width, height );\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture has been resized from (' + image.width + 'x' + image.height + ') to (' + width + 'x' + height + ').' );\n\n\t\t\t\treturn canvas;\n\n\t\t\t} else {\n\n\t\t\t\tif ( 'data' in image ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Image in DataTexture is too big (' + image.width + 'x' + image.height + ').' );\n\n\t\t\t\t}\n\n\t\t\t\treturn image;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn image;\n\n\t}\n\n\tfunction isPowerOfTwo( image ) {\n\n\t\treturn MathUtils.isPowerOfTwo( image.width ) && MathUtils.isPowerOfTwo( image.height );\n\n\t}\n\n\tfunction textureNeedsPowerOfTwo( texture ) {\n\n\t\tif ( isWebGL2 ) return false;\n\n\t\treturn ( texture.wrapS !== ClampToEdgeWrapping || texture.wrapT !== ClampToEdgeWrapping ) ||\n\t\t\t( texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter );\n\n\t}\n\n\tfunction textureNeedsGenerateMipmaps( texture, supportsMips ) {\n\n\t\treturn texture.generateMipmaps && supportsMips &&\n\t\t\ttexture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter;\n\n\t}\n\n\tfunction generateMipmap( target, texture, width, height ) {\n\n\t\t_gl.generateMipmap( target );\n\n\t\tvar textureProperties = properties.get( texture );\n\n\t\t// Note: Math.log( x ) * Math.LOG2E used instead of Math.log2( x ) which is not supported by IE11\n\t\ttextureProperties.__maxMipLevel = Math.log( Math.max( width, height ) ) * Math.LOG2E;\n\n\t}\n\n\tfunction getInternalFormat( internalFormatName, glFormat, glType ) {\n\n\t\tif ( isWebGL2 === false ) return glFormat;\n\n\t\tif ( internalFormatName !== null ) {\n\n\t\t\tif ( _gl[ internalFormatName ] !== undefined ) return _gl[ internalFormatName ];\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format \\'' + internalFormatName + '\\'' );\n\n\t\t}\n\n\t\tvar internalFormat = glFormat;\n\n\t\tif ( glFormat === 6403 ) {\n\n\t\t\tif ( glType === 5126 ) internalFormat = 33326;\n\t\t\tif ( glType === 5131 ) internalFormat = 33325;\n\t\t\tif ( glType === 5121 ) internalFormat = 33321;\n\n\t\t}\n\n\t\tif ( glFormat === 6407 ) {\n\n\t\t\tif ( glType === 5126 ) internalFormat = 34837;\n\t\t\tif ( glType === 5131 ) internalFormat = 34843;\n\t\t\tif ( glType === 5121 ) internalFormat = 32849;\n\n\t\t}\n\n\t\tif ( glFormat === 6408 ) {\n\n\t\t\tif ( glType === 5126 ) internalFormat = 34836;\n\t\t\tif ( glType === 5131 ) internalFormat = 34842;\n\t\t\tif ( glType === 5121 ) internalFormat = 32856;\n\n\t\t}\n\n\t\tif ( internalFormat === 33325 || internalFormat === 33326 ||\n\t\t\tinternalFormat === 34842 || internalFormat === 34836 ) {\n\n\t\t\textensions.get( 'EXT_color_buffer_float' );\n\n\t\t} else if ( internalFormat === 34843 || internalFormat === 34837 ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: Floating point textures with RGB format not supported. Please use RGBA instead.' );\n\n\t\t}\n\n\t\treturn internalFormat;\n\n\t}\n\n\t// Fallback filters for non-power-of-2 textures\n\n\tfunction filterFallback( f ) {\n\n\t\tif ( f === NearestFilter || f === NearestMipmapNearestFilter || f === NearestMipmapLinearFilter ) {\n\n\t\t\treturn 9728;\n\n\t\t}\n\n\t\treturn 9729;\n\n\t}\n\n\t//\n\n\tfunction onTextureDispose( event ) {\n\n\t\tvar texture = event.target;\n\n\t\ttexture.removeEventListener( 'dispose', onTextureDispose );\n\n\t\tdeallocateTexture( texture );\n\n\t\tinfo.memory.textures --;\n\n\t}\n\n\tfunction onRenderTargetDispose( event ) {\n\n\t\tvar renderTarget = event.target;\n\n\t\trenderTarget.removeEventListener( 'dispose', onRenderTargetDispose );\n\n\t\tdeallocateRenderTarget( renderTarget );\n\n\t\tinfo.memory.textures --;\n\n\t}\n\n\t//\n\n\tfunction deallocateTexture( texture ) {\n\n\t\tvar textureProperties = properties.get( texture );\n\n\t\tif ( textureProperties.__webglInit === undefined ) return;\n\n\t\t_gl.deleteTexture( textureProperties.__webglTexture );\n\n\t\tproperties.remove( texture );\n\n\t}\n\n\tfunction deallocateRenderTarget( renderTarget ) {\n\n\t\tvar renderTargetProperties = properties.get( renderTarget );\n\t\tvar textureProperties = properties.get( renderTarget.texture );\n\n\t\tif ( ! renderTarget ) return;\n\n\t\tif ( textureProperties.__webglTexture !== undefined ) {\n\n\t\t\t_gl.deleteTexture( textureProperties.__webglTexture );\n\n\t\t}\n\n\t\tif ( renderTarget.depthTexture ) {\n\n\t\t\trenderTarget.depthTexture.dispose();\n\n\t\t}\n\n\t\t{\n\n\t\t\t_gl.deleteFramebuffer( renderTargetProperties.__webglFramebuffer );\n\t\t\tif ( renderTargetProperties.__webglDepthbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglDepthbuffer );\n\n\t\t}\n\n\t\tproperties.remove( renderTarget.texture );\n\t\tproperties.remove( renderTarget );\n\n\t}\n\n\t//\n\n\tvar textureUnits = 0;\n\n\tfunction resetTextureUnits() {\n\n\t\ttextureUnits = 0;\n\n\t}\n\n\tfunction allocateTextureUnit() {\n\n\t\tvar textureUnit = textureUnits;\n\n\t\tif ( textureUnit >= maxTextures ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLTextures: Trying to use ' + textureUnit + ' texture units while this GPU supports only ' + maxTextures );\n\n\t\t}\n\n\t\ttextureUnits += 1;\n\n\t\treturn textureUnit;\n\n\t}\n\n\t//\n\n\tfunction setTexture2D( texture, slot ) {\n\n\t\tvar textureProperties = properties.get( texture );\n\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\n\n\t\t\tvar image = texture.image;\n\n\t\t\tif ( image === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture marked for update but image is undefined' );\n\n\t\t\t} else if ( image.complete === false ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture marked for update but image is incomplete' );\n\n\t\t\t} else {\n\n\t\t\t\tuploadTexture( textureProperties, texture, slot );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t\tstate.activeAndBindTexture( 33984 + slot, 3553, textureProperties.__webglTexture );\n\n\t}\n\n\tfunction setTexture2DArray( texture, slot ) {\n\n\t\tvar textureProperties = properties.get( texture );\n\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\n\n\t\t\tuploadTexture( textureProperties, texture, slot );\n\t\t\treturn;\n\n\t\t}\n\n\t\tstate.activeTexture( 33984 + slot );\n\t\tstate.bindTexture( 35866, textureProperties.__webglTexture );\n\n\t}\n\n\tfunction setTexture3D( texture, slot ) {\n\n\t\tvar textureProperties = properties.get( texture );\n\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\n\n\t\t\tuploadTexture( textureProperties, texture, slot );\n\t\t\treturn;\n\n\t\t}\n\n\t\tstate.activeTexture( 33984 + slot );\n\t\tstate.bindTexture( 32879, textureProperties.__webglTexture );\n\n\t}\n\n\tfunction setTextureCube() {}\n\n\tfunction setTextureCubeDynamic() {}\n\n\tvar wrappingToGL = {\n\t\t[ RepeatWrapping ]: 10497,\n\t\t[ ClampToEdgeWrapping ]: 33071,\n\t\t[ MirroredRepeatWrapping ]: 33648\n\t};\n\n\tvar filterToGL = {\n\t\t[ NearestFilter ]: 9728,\n\t\t[ NearestMipmapNearestFilter ]: 9984,\n\t\t[ NearestMipmapLinearFilter ]: 9986,\n\n\t\t[ LinearFilter ]: 9729,\n\t\t[ LinearMipmapNearestFilter ]: 9985,\n\t\t[ LinearMipmapLinearFilter ]: 9987\n\t};\n\n\tfunction setTextureParameters( textureType, texture, supportsMips ) {\n\n\t\tif ( supportsMips ) {\n\n\t\t\t_gl.texParameteri( textureType, 10242, wrappingToGL[ texture.wrapS ] );\n\t\t\t_gl.texParameteri( textureType, 10243, wrappingToGL[ texture.wrapT ] );\n\n\t\t\tif ( textureType === 32879 || textureType === 35866 ) {\n\n\t\t\t\t_gl.texParameteri( textureType, 32882, wrappingToGL[ texture.wrapR ] );\n\n\t\t\t}\n\n\t\t\t_gl.texParameteri( textureType, 10240, filterToGL[ texture.magFilter ] );\n\t\t\t_gl.texParameteri( textureType, 10241, filterToGL[ texture.minFilter ] );\n\n\t\t} else {\n\n\t\t\t_gl.texParameteri( textureType, 10242, 33071 );\n\t\t\t_gl.texParameteri( textureType, 10243, 33071 );\n\n\t\t\tif ( textureType === 32879 || textureType === 35866 ) {\n\n\t\t\t\t_gl.texParameteri( textureType, 32882, 33071 );\n\n\t\t\t}\n\n\t\t\tif ( texture.wrapS !== ClampToEdgeWrapping || texture.wrapT !== ClampToEdgeWrapping ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.' );\n\n\t\t\t}\n\n\t\t\t_gl.texParameteri( textureType, 10240, filterFallback( texture.magFilter ) );\n\t\t\t_gl.texParameteri( textureType, 10241, filterFallback( texture.minFilter ) );\n\n\t\t\tif ( texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.' );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar extension = extensions.get( 'EXT_texture_filter_anisotropic' );\n\n\t\tif ( extension ) {\n\n\t\t\tif ( texture.type === FloatType && extensions.get( 'OES_texture_float_linear' ) === null ) return;\n\t\t\tif ( texture.type === HalfFloatType && ( isWebGL2 || extensions.get( 'OES_texture_half_float_linear' ) ) === null ) return;\n\n\t\t\tif ( texture.anisotropy > 1 || properties.get( texture ).__currentAnisotropy ) {\n\n\t\t\t\t_gl.texParameterf( textureType, extension.TEXTURE_MAX_ANISOTROPY_EXT, Math.min( texture.anisotropy, capabilities.getMaxAnisotropy() ) );\n\t\t\t\tproperties.get( texture ).__currentAnisotropy = texture.anisotropy;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction initTexture( textureProperties, texture ) {\n\n\t\tif ( textureProperties.__webglInit === undefined ) {\n\n\t\t\ttextureProperties.__webglInit = true;\n\n\t\t\ttexture.addEventListener( 'dispose', onTextureDispose );\n\n\t\t\ttextureProperties.__webglTexture = _gl.createTexture();\n\n\t\t\tinfo.memory.textures ++;\n\n\t\t}\n\n\t}\n\n\tfunction uploadTexture( textureProperties, texture, slot ) {\n\n\t\tvar textureType = 3553;\n\n\t\tif ( texture.isDataTexture2DArray ) textureType = 35866;\n\t\tif ( texture.isDataTexture3D ) textureType = 32879;\n\n\t\tinitTexture( textureProperties, texture );\n\n\t\tstate.activeTexture( 33984 + slot );\n\t\tstate.bindTexture( textureType, textureProperties.__webglTexture );\n\n\t\t_gl.pixelStorei( 37440, texture.flipY );\n\t\t_gl.pixelStorei( 37441, texture.premultiplyAlpha );\n\t\t_gl.pixelStorei( 3317, texture.unpackAlignment );\n\n\t\tvar needsPowerOfTwo = textureNeedsPowerOfTwo( texture ) && isPowerOfTwo( texture.image ) === false;\n\t\tvar image = resizeImage( texture.image, needsPowerOfTwo, false, maxTextureSize );\n\n\t\tvar supportsMips = isPowerOfTwo( image ) || isWebGL2,\n\t\t\tglFormat = utils.convert( texture.format ),\n\t\t\tglType = utils.convert( texture.type ),\n\t\t\tglInternalFormat = getInternalFormat( texture.internalFormat, glFormat, glType );\n\n\t\tsetTextureParameters( textureType, texture, supportsMips );\n\n\t\tvar mipmap, mipmaps = texture.mipmaps;\n\n\t\tif ( texture.isDepthTexture ) {\n\n\t\t\t// populate depth texture with dummy data\n\n\t\t\tglInternalFormat = 6402;\n\n\t\t\tif ( texture.type === FloatType ) {\n\n\t\t\t\tif ( isWebGL2 === false ) throw new Error( 'Float Depth Texture only supported in WebGL2.0' );\n\t\t\t\tglInternalFormat = 36012;\n\n\t\t\t} else if ( isWebGL2 ) {\n\n\t\t\t\t// WebGL 2.0 requires signed internalformat for glTexImage2D\n\t\t\t\tglInternalFormat = 33189;\n\n\t\t\t}\n\n\t\t\tif ( texture.format === DepthFormat && glInternalFormat === 6402 ) {\n\n\t\t\t\t// The error INVALID_OPERATION is generated by texImage2D if format and internalformat are\n\t\t\t\t// DEPTH_COMPONENT and type is not UNSIGNED_SHORT or UNSIGNED_INT\n\t\t\t\t// (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\n\t\t\t\tif ( texture.type !== UnsignedShortType && texture.type !== UnsignedIntType ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture.' );\n\n\t\t\t\t\ttexture.type = UnsignedShortType;\n\t\t\t\t\tglType = utils.convert( texture.type );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// Depth stencil textures need the DEPTH_STENCIL internal format\n\t\t\t// (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\n\t\t\tif ( texture.format === DepthStencilFormat ) {\n\n\t\t\t\tglInternalFormat = 34041;\n\n\t\t\t\t// The error INVALID_OPERATION is generated by texImage2D if format and internalformat are\n\t\t\t\t// DEPTH_STENCIL and type is not UNSIGNED_INT_24_8_WEBGL.\n\t\t\t\t// (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\n\t\t\t\tif ( texture.type !== UnsignedInt248Type ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture.' );\n\n\t\t\t\t\ttexture.type = UnsignedInt248Type;\n\t\t\t\t\tglType = utils.convert( texture.type );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tstate.texImage2D( 3553, 0, glInternalFormat, image.width, image.height, 0, glFormat, glType, null );\n\n\t\t} else if ( texture.isDataTexture ) {\n\n\t\t\t// use manually created mipmaps if available\n\t\t\t// if there are no manual mipmaps\n\t\t\t// set 0 level mipmap and then use GL to generate other mipmap levels\n\n\t\t\tif ( mipmaps.length > 0 && supportsMips ) {\n\n\t\t\t\tfor ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\t\tmipmap = mipmaps[ i ];\n\t\t\t\t\tstate.texImage2D( 3553, i, glInternalFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t}\n\n\t\t\t\ttexture.generateMipmaps = false;\n\t\t\t\ttextureProperties.__maxMipLevel = mipmaps.length - 1;\n\n\t\t\t} else {\n\n\t\t\t\tstate.texImage2D( 3553, 0, glInternalFormat, image.width, image.height, 0, glFormat, glType, image.data );\n\t\t\t\ttextureProperties.__maxMipLevel = 0;\n\n\t\t\t}\n\n\t\t} else if ( texture.isCompressedTexture ) {\n\n\t\t\tfor ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\tmipmap = mipmaps[ i ];\n\n\t\t\t\tif ( texture.format !== RGBAFormat && texture.format !== RGBFormat ) {\n\n\t\t\t\t\tif ( glFormat !== null ) {\n\n\t\t\t\t\t\tstate.compressedTexImage2D( 3553, i, glInternalFormat, mipmap.width, mipmap.height, 0, mipmap.data );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()' );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tstate.texImage2D( 3553, i, glInternalFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\ttextureProperties.__maxMipLevel = mipmaps.length - 1;\n\n\t\t} else if ( texture.isDataTexture2DArray ) {\n\n\t\t\tstate.texImage3D( 35866, 0, glInternalFormat, image.width, image.height, image.depth, 0, glFormat, glType, image.data );\n\t\t\ttextureProperties.__maxMipLevel = 0;\n\n\t\t} else if ( texture.isDataTexture3D ) {\n\n\t\t\tstate.texImage3D( 32879, 0, glInternalFormat, image.width, image.height, image.depth, 0, glFormat, glType, image.data );\n\t\t\ttextureProperties.__maxMipLevel = 0;\n\n\t\t} else {\n\n\t\t\t// regular Texture (image, video, canvas)\n\n\t\t\t// use manually created mipmaps if available\n\t\t\t// if there are no manual mipmaps\n\t\t\t// set 0 level mipmap and then use GL to generate other mipmap levels\n\n\t\t\tif ( mipmaps.length > 0 && supportsMips ) {\n\n\t\t\t\tfor ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\t\tmipmap = mipmaps[ i ];\n\t\t\t\t\tstate.texImage2D( 3553, i, glInternalFormat, glFormat, glType, mipmap );\n\n\t\t\t\t}\n\n\t\t\t\ttexture.generateMipmaps = false;\n\t\t\t\ttextureProperties.__maxMipLevel = mipmaps.length - 1;\n\n\t\t\t} else {\n\n\t\t\t\tstate.texImage2D( 3553, 0, glInternalFormat, glFormat, glType, image );\n\t\t\t\ttextureProperties.__maxMipLevel = 0;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( textureNeedsGenerateMipmaps( texture, supportsMips ) ) {\n\n\t\t\tgenerateMipmap( textureType, texture, image.width, image.height );\n\n\t\t}\n\n\t\ttextureProperties.__version = texture.version;\n\n\t\tif ( texture.onUpdate ) texture.onUpdate( texture );\n\n\t}\n\n\t// Render targets\n\n\t// Setup storage for target texture and bind it to correct framebuffer\n\tfunction setupFrameBufferTexture( framebuffer, renderTarget, attachment, textureTarget ) {\n\n\t\tvar glFormat = utils.convert( renderTarget.texture.format );\n\t\tvar glType = utils.convert( renderTarget.texture.type );\n\t\tvar glInternalFormat = getInternalFormat( renderTarget.texture.internalFormat, glFormat, glType );\n\t\tstate.texImage2D( textureTarget, 0, glInternalFormat, renderTarget.width, renderTarget.height, 0, glFormat, glType, null );\n\t\t_gl.bindFramebuffer( 36160, framebuffer );\n\t\t_gl.framebufferTexture2D( 36160, attachment, textureTarget, properties.get( renderTarget.texture ).__webglTexture, 0 );\n\t\t_gl.bindFramebuffer( 36160, null );\n\n\t}\n\n\t// Setup storage for internal depth/stencil buffers and bind to correct framebuffer\n\tfunction setupRenderBufferStorage( renderbuffer, renderTarget, isMultisample ) {\n\n\t\t_gl.bindRenderbuffer( 36161, renderbuffer );\n\n\t\tif ( renderTarget.depthBuffer && ! renderTarget.stencilBuffer ) {\n\n\t\t\tif ( isMultisample ) {\n\n\t\t\t\tvar samples = getRenderTargetSamples( renderTarget );\n\n\t\t\t\t_gl.renderbufferStorageMultisample( 36161, samples, 33189, renderTarget.width, renderTarget.height );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.renderbufferStorage( 36161, 33189, renderTarget.width, renderTarget.height );\n\n\t\t\t}\n\n\t\t\t_gl.framebufferRenderbuffer( 36160, 36096, 36161, renderbuffer );\n\n\t\t} else if ( renderTarget.depthBuffer && renderTarget.stencilBuffer ) {\n\n\t\t\tif ( isMultisample ) {\n\n\t\t\t\tvar samples = getRenderTargetSamples( renderTarget );\n\n\t\t\t\t_gl.renderbufferStorageMultisample( 36161, samples, 35056, renderTarget.width, renderTarget.height );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.renderbufferStorage( 36161, 34041, renderTarget.width, renderTarget.height );\n\n\t\t\t}\n\n\n\t\t\t_gl.framebufferRenderbuffer( 36160, 33306, 36161, renderbuffer );\n\n\t\t} else {\n\n\t\t\tvar glFormat = utils.convert( renderTarget.texture.format );\n\t\t\tvar glType = utils.convert( renderTarget.texture.type );\n\t\t\tvar glInternalFormat = getInternalFormat( renderTarget.texture.internalFormat, glFormat, glType );\n\n\t\t\tif ( isMultisample ) {\n\n\t\t\t\tvar samples = getRenderTargetSamples( renderTarget );\n\n\t\t\t\t_gl.renderbufferStorageMultisample( 36161, samples, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.renderbufferStorage( 36161, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t}\n\n\t\t}\n\n\t\t_gl.bindRenderbuffer( 36161, null );\n\n\t}\n\n\t// Setup resources for a Depth Texture for a FBO (needs an extension)\n\tfunction setupDepthTexture( framebuffer, renderTarget ) {\n\n\t\tvar isCube = ( renderTarget && false );\n\t\tif ( isCube ) throw new Error( 'Depth Texture with cube render targets is not supported' );\n\n\t\t_gl.bindFramebuffer( 36160, framebuffer );\n\n\t\tif ( ! ( renderTarget.depthTexture && renderTarget.depthTexture.isDepthTexture ) ) {\n\n\t\t\tthrow new Error( 'renderTarget.depthTexture must be an instance of THREE.DepthTexture' );\n\n\t\t}\n\n\t\t// upload an empty depth texture with framebuffer size\n\t\tif ( ! properties.get( renderTarget.depthTexture ).__webglTexture ||\n\t\t\t\trenderTarget.depthTexture.image.width !== renderTarget.width ||\n\t\t\t\trenderTarget.depthTexture.image.height !== renderTarget.height ) {\n\n\t\t\trenderTarget.depthTexture.image.width = renderTarget.width;\n\t\t\trenderTarget.depthTexture.image.height = renderTarget.height;\n\t\t\trenderTarget.depthTexture.needsUpdate = true;\n\n\t\t}\n\n\t\tsetTexture2D( renderTarget.depthTexture, 0 );\n\n\t\tvar webglDepthTexture = properties.get( renderTarget.depthTexture ).__webglTexture;\n\n\t\tif ( renderTarget.depthTexture.format === DepthFormat ) {\n\n\t\t\t_gl.framebufferTexture2D( 36160, 36096, 3553, webglDepthTexture, 0 );\n\n\t\t} else if ( renderTarget.depthTexture.format === DepthStencilFormat ) {\n\n\t\t\t_gl.framebufferTexture2D( 36160, 33306, 3553, webglDepthTexture, 0 );\n\n\t\t} else {\n\n\t\t\tthrow new Error( 'Unknown depthTexture format' );\n\n\t\t}\n\n\t}\n\n\t// Setup GL resources for a non-texture depth buffer\n\tfunction setupDepthRenderbuffer( renderTarget ) {\n\n\t\tvar renderTargetProperties = properties.get( renderTarget );\n\n\t\tif ( renderTarget.depthTexture ) {\n\n\t\t\tsetupDepthTexture( renderTargetProperties.__webglFramebuffer, renderTarget );\n\n\t\t} else {\n\n\t\t\t{\n\n\t\t\t\t_gl.bindFramebuffer( 36160, renderTargetProperties.__webglFramebuffer );\n\t\t\t\trenderTargetProperties.__webglDepthbuffer = _gl.createRenderbuffer();\n\t\t\t\tsetupRenderBufferStorage( renderTargetProperties.__webglDepthbuffer, renderTarget );\n\n\t\t\t}\n\n\t\t}\n\n\t\t_gl.bindFramebuffer( 36160, null );\n\n\t}\n\n\t// Set up GL resources for the render target\n\tfunction setupRenderTarget( renderTarget ) {\n\n\t\tvar renderTargetProperties = properties.get( renderTarget );\n\t\tvar textureProperties = properties.get( renderTarget.texture );\n\n\t\trenderTarget.addEventListener( 'dispose', onRenderTargetDispose );\n\n\t\ttextureProperties.__webglTexture = _gl.createTexture();\n\n\t\tinfo.memory.textures ++;\n\t\tvar isMultisample = ( renderTarget.isWebGLMultisampleRenderTarget === true );\n\t\tvar supportsMips = isPowerOfTwo( renderTarget ) || isWebGL2;\n\n\t\t// Setup framebuffer\n\n\t\t{\n\n\t\t\trenderTargetProperties.__webglFramebuffer = _gl.createFramebuffer();\n\n\t\t\tif ( isMultisample ) {\n\n\t\t\t\tif ( isWebGL2 ) {\n\n\t\t\t\t\trenderTargetProperties.__webglMultisampledFramebuffer = _gl.createFramebuffer();\n\t\t\t\t\trenderTargetProperties.__webglColorRenderbuffer = _gl.createRenderbuffer();\n\n\t\t\t\t\t_gl.bindRenderbuffer( 36161, renderTargetProperties.__webglColorRenderbuffer );\n\n\t\t\t\t\tvar glFormat = utils.convert( renderTarget.texture.format );\n\t\t\t\t\tvar glType = utils.convert( renderTarget.texture.type );\n\t\t\t\t\tvar glInternalFormat = getInternalFormat( renderTarget.texture.internalFormat, glFormat, glType );\n\t\t\t\t\tvar samples = getRenderTargetSamples( renderTarget );\n\t\t\t\t\t_gl.renderbufferStorageMultisample( 36161, samples, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t\t\t_gl.bindFramebuffer( 36160, renderTargetProperties.__webglMultisampledFramebuffer );\n\t\t\t\t\t_gl.framebufferRenderbuffer( 36160, 36064, 36161, renderTargetProperties.__webglColorRenderbuffer );\n\t\t\t\t\t_gl.bindRenderbuffer( 36161, null );\n\n\t\t\t\t\tif ( renderTarget.depthBuffer ) {\n\n\t\t\t\t\t\trenderTargetProperties.__webglDepthRenderbuffer = _gl.createRenderbuffer();\n\t\t\t\t\t\tsetupRenderBufferStorage( renderTargetProperties.__webglDepthRenderbuffer, renderTarget, true );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t_gl.bindFramebuffer( 36160, null );\n\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Setup color buffer\n\n\t\t{\n\n\t\t\tstate.bindTexture( 3553, textureProperties.__webglTexture );\n\t\t\tsetTextureParameters( 3553, renderTarget.texture, supportsMips );\n\t\t\tsetupFrameBufferTexture( renderTargetProperties.__webglFramebuffer, renderTarget, 36064, 3553 );\n\n\t\t\tif ( textureNeedsGenerateMipmaps( renderTarget.texture, supportsMips ) ) {\n\n\t\t\t\tgenerateMipmap( 3553, renderTarget.texture, renderTarget.width, renderTarget.height );\n\n\t\t\t}\n\n\t\t\tstate.bindTexture( 3553, null );\n\n\t\t}\n\n\t\t// Setup depth and stencil buffers\n\n\t\tif ( renderTarget.depthBuffer ) {\n\n\t\t\tsetupDepthRenderbuffer( renderTarget );\n\n\t\t}\n\n\t}\n\n\tfunction updateRenderTargetMipmap( renderTarget ) {\n\n\t\tvar texture = renderTarget.texture;\n\t\tvar supportsMips = isPowerOfTwo( renderTarget ) || isWebGL2;\n\n\t\tif ( textureNeedsGenerateMipmaps( texture, supportsMips ) ) {\n\n\t\t\tvar target =  3553;\n\t\t\tvar webglTexture = properties.get( texture ).__webglTexture;\n\n\t\t\tstate.bindTexture( target, webglTexture );\n\t\t\tgenerateMipmap( target, texture, renderTarget.width, renderTarget.height );\n\t\t\tstate.bindTexture( target, null );\n\n\t\t}\n\n\t}\n\n\tfunction updateMultisampleRenderTarget( renderTarget ) {\n\n\t\tif ( renderTarget.isWebGLMultisampleRenderTarget ) {\n\n\t\t\tif ( isWebGL2 ) {\n\n\t\t\t\tvar renderTargetProperties = properties.get( renderTarget );\n\n\t\t\t\t_gl.bindFramebuffer( 36008, renderTargetProperties.__webglMultisampledFramebuffer );\n\t\t\t\t_gl.bindFramebuffer( 36009, renderTargetProperties.__webglFramebuffer );\n\n\t\t\t\tvar width = renderTarget.width;\n\t\t\t\tvar height = renderTarget.height;\n\t\t\t\tvar mask = 16384;\n\n\t\t\t\tif ( renderTarget.depthBuffer ) mask |= 256;\n\t\t\t\tif ( renderTarget.stencilBuffer ) mask |= 1024;\n\n\t\t\t\t_gl.blitFramebuffer( 0, 0, width, height, 0, 0, width, height, mask, 9728 );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.' );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction getRenderTargetSamples( renderTarget ) {\n\n\t\treturn ( isWebGL2 && renderTarget.isWebGLMultisampleRenderTarget ) ?\n\t\t\tMath.min( maxSamples, renderTarget.samples ) : 0;\n\n\t}\n\n\t// backwards compatibility\n\n\tvar warnedTexture2D = false;\n\tvar warnedTextureCube = false;\n\n\tfunction safeSetTexture2D( texture, slot ) {\n\n\t\tif ( texture && texture.isWebGLRenderTarget ) {\n\n\t\t\tif ( warnedTexture2D === false ) {\n\n\t\t\t\tconsole.warn( \"THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead.\" );\n\t\t\t\twarnedTexture2D = true;\n\n\t\t\t}\n\n\t\t\ttexture = texture.texture;\n\n\t\t}\n\n\t\tsetTexture2D( texture, slot );\n\n\t}\n\n\tfunction safeSetTextureCube( texture, slot ) {\n\n\t\tif ( texture && false ) {\n\n\t\t\tif ( warnedTextureCube === false ) {\n\n\t\t\t\tconsole.warn( \"THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead.\" );\n\t\t\t\twarnedTextureCube = true;\n\n\t\t\t}\n\n\t\t\ttexture = texture.texture;\n\n\t\t}\n\n\t\t// currently relying on the fact that WebGLCubeRenderTarget.texture is a Texture and NOT a CubeTexture\n\t\t// TODO: unify these code paths\n\t\tif ( ( texture && false ) ||\n\t\t\t( Array.isArray( texture.image ) && texture.image.length === 6 ) ) ;\n\n\t}\n\n\t//\n\n\tthis.allocateTextureUnit = allocateTextureUnit;\n\tthis.resetTextureUnits = resetTextureUnits;\n\n\tthis.setTexture2D = setTexture2D;\n\tthis.setTexture2DArray = setTexture2DArray;\n\tthis.setTexture3D = setTexture3D;\n\tthis.setTextureCube = setTextureCube;\n\tthis.setTextureCubeDynamic = setTextureCubeDynamic;\n\tthis.setupRenderTarget = setupRenderTarget;\n\tthis.updateRenderTargetMipmap = updateRenderTargetMipmap;\n\tthis.updateMultisampleRenderTarget = updateMultisampleRenderTarget;\n\n\tthis.safeSetTexture2D = safeSetTexture2D;\n\tthis.safeSetTextureCube = safeSetTextureCube;\n\n}\n\n/**\n * @author thespite / http://www.twitter.com/thespite\n */\n\nfunction WebGLUtils( gl, extensions, capabilities ) {\n\n\tvar isWebGL2 = capabilities.isWebGL2;\n\n\tfunction convert( p ) {\n\n\t\tvar extension;\n\n\t\tif ( p === UnsignedByteType ) return 5121;\n\t\tif ( p === UnsignedShort4444Type ) return 32819;\n\t\tif ( p === UnsignedShort5551Type ) return 32820;\n\t\tif ( p === UnsignedShort565Type ) return 33635;\n\n\t\tif ( p === ByteType ) return 5120;\n\t\tif ( p === ShortType ) return 5122;\n\t\tif ( p === UnsignedShortType ) return 5123;\n\t\tif ( p === IntType ) return 5124;\n\t\tif ( p === UnsignedIntType ) return 5125;\n\t\tif ( p === FloatType ) return 5126;\n\n\t\tif ( p === HalfFloatType ) {\n\n\t\t\tif ( isWebGL2 ) return 5131;\n\n\t\t\textension = extensions.get( 'OES_texture_half_float' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\treturn extension.HALF_FLOAT_OES;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === AlphaFormat ) return 6406;\n\t\tif ( p === RGBFormat ) return 6407;\n\t\tif ( p === RGBAFormat ) return 6408;\n\t\tif ( p === LuminanceFormat ) return 6409;\n\t\tif ( p === LuminanceAlphaFormat ) return 6410;\n\t\tif ( p === DepthFormat ) return 6402;\n\t\tif ( p === DepthStencilFormat ) return 34041;\n\t\tif ( p === RedFormat ) return 6403;\n\n\t\t// WebGL2 formats.\n\n\t\tif ( p === RedIntegerFormat ) return 36244;\n\t\tif ( p === RGFormat ) return 33319;\n\t\tif ( p === RGIntegerFormat ) return 33320;\n\t\tif ( p === RGBIntegerFormat ) return 36248;\n\t\tif ( p === RGBAIntegerFormat ) return 36249;\n\n\t\tif ( p === RGB_S3TC_DXT1_Format || p === RGBA_S3TC_DXT1_Format ||\n\t\t\tp === RGBA_S3TC_DXT3_Format || p === RGBA_S3TC_DXT5_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_s3tc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\tif ( p === RGB_S3TC_DXT1_Format ) return extension.COMPRESSED_RGB_S3TC_DXT1_EXT;\n\t\t\t\tif ( p === RGBA_S3TC_DXT1_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT1_EXT;\n\t\t\t\tif ( p === RGBA_S3TC_DXT3_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT3_EXT;\n\t\t\t\tif ( p === RGBA_S3TC_DXT5_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT5_EXT;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === RGB_PVRTC_4BPPV1_Format || p === RGB_PVRTC_2BPPV1_Format ||\n\t\t\tp === RGBA_PVRTC_4BPPV1_Format || p === RGBA_PVRTC_2BPPV1_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_pvrtc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\tif ( p === RGB_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;\n\t\t\t\tif ( p === RGB_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;\n\t\t\t\tif ( p === RGBA_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;\n\t\t\t\tif ( p === RGBA_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === RGB_ETC1_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_etc1' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\treturn extension.COMPRESSED_RGB_ETC1_WEBGL;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === RGB_ETC2_Format || p === RGBA_ETC2_EAC_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_etc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\tif ( p === RGB_ETC2_Format ) return extension.COMPRESSED_RGB8_ETC2;\n\t\t\t\tif ( p === RGBA_ETC2_EAC_Format ) return extension.COMPRESSED_RGBA8_ETC2_EAC;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === RGBA_ASTC_4x4_Format || p === RGBA_ASTC_5x4_Format || p === RGBA_ASTC_5x5_Format ||\n\t\t\tp === RGBA_ASTC_6x5_Format || p === RGBA_ASTC_6x6_Format || p === RGBA_ASTC_8x5_Format ||\n\t\t\tp === RGBA_ASTC_8x6_Format || p === RGBA_ASTC_8x8_Format || p === RGBA_ASTC_10x5_Format ||\n\t\t\tp === RGBA_ASTC_10x6_Format || p === RGBA_ASTC_10x8_Format || p === RGBA_ASTC_10x10_Format ||\n\t\t\tp === RGBA_ASTC_12x10_Format || p === RGBA_ASTC_12x12_Format ||\n\t\t\tp === SRGB8_ALPHA8_ASTC_4x4_Format || p === SRGB8_ALPHA8_ASTC_5x4_Format || p === SRGB8_ALPHA8_ASTC_5x5_Format ||\n\t\t\tp === SRGB8_ALPHA8_ASTC_6x5_Format || p === SRGB8_ALPHA8_ASTC_6x6_Format || p === SRGB8_ALPHA8_ASTC_8x5_Format ||\n\t\t\tp === SRGB8_ALPHA8_ASTC_8x6_Format || p === SRGB8_ALPHA8_ASTC_8x8_Format || p === SRGB8_ALPHA8_ASTC_10x5_Format ||\n\t\t\tp === SRGB8_ALPHA8_ASTC_10x6_Format || p === SRGB8_ALPHA8_ASTC_10x8_Format || p === SRGB8_ALPHA8_ASTC_10x10_Format ||\n\t\t\tp === SRGB8_ALPHA8_ASTC_12x10_Format || p === SRGB8_ALPHA8_ASTC_12x12_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_astc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\t// TODO Complete?\n\n\t\t\t\treturn p;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === UnsignedInt248Type ) {\n\n\t\t\tif ( isWebGL2 ) return 34042;\n\n\t\t\textension = extensions.get( 'WEBGL_depth_texture' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\treturn extension.UNSIGNED_INT_24_8_WEBGL;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\treturn { convert: convert };\n\n}\n\nfunction ArrayCamera() {}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction Group() {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Group';\n\n}\n\nGroup.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Group,\n\n\tisGroup: true\n\n} );\n\nfunction WebXRManager() {\n    this.getDevice = function() {};\n}\n\nObject.assign( WebXRManager.prototype, EventDispatcher.prototype );\n\n/**\n * @author supereggbert / http://www.paulbrunt.co.uk/\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author szimek / https://github.com/szimek/\n * @author tschw\n */\n\nfunction WebGLRenderer( parameters ) {\n\n\tparameters = parameters || {};\n\n\tvar _canvas = parameters.canvas !== undefined ? parameters.canvas : document.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' ),\n\t\t_context = parameters.context !== undefined ? parameters.context : null,\n\n\t\t_alpha = parameters.alpha !== undefined ? parameters.alpha : false,\n\t\t_depth = parameters.depth !== undefined ? parameters.depth : true,\n\t\t_stencil = parameters.stencil !== undefined ? parameters.stencil : true,\n\t\t_antialias = parameters.antialias !== undefined ? parameters.antialias : false,\n\t\t_premultipliedAlpha = parameters.premultipliedAlpha !== undefined ? parameters.premultipliedAlpha : true,\n\t\t_preserveDrawingBuffer = parameters.preserveDrawingBuffer !== undefined ? parameters.preserveDrawingBuffer : false,\n\t\t_powerPreference = parameters.powerPreference !== undefined ? parameters.powerPreference : 'default',\n\t\t_failIfMajorPerformanceCaveat = parameters.failIfMajorPerformanceCaveat !== undefined ? parameters.failIfMajorPerformanceCaveat : false;\n\n\tvar currentRenderList = null;\n\tvar currentRenderState = null;\n\n\t// public properties\n\n\tthis.domElement = _canvas;\n\n\t// Debug configuration container\n\tthis.debug = {\n\n\t\t/**\n\t\t * Enables error checking and reporting when shader programs are being compiled\n\t\t * @type {boolean}\n\t\t */\n\t\tcheckShaderErrors: true\n\t};\n\n\t// clearing\n\n\tthis.autoClear = true;\n\tthis.autoClearColor = true;\n\tthis.autoClearDepth = true;\n\tthis.autoClearStencil = true;\n\n\t// scene graph\n\n\tthis.sortObjects = true;\n\n\t// user-defined clipping\n\n\tthis.clippingPlanes = [];\n\tthis.localClippingEnabled = false;\n\n\t// physically based shading\n\n\tthis.gammaFactor = 2.0;\t// for backwards compatibility\n\tthis.outputEncoding = LinearEncoding;\n\n\t// physical lights\n\n\tthis.physicallyCorrectLights = false;\n\n\t// tone mapping\n\n\tthis.toneMapping = LinearToneMapping;\n\tthis.toneMappingExposure = 1.0;\n\tthis.toneMappingWhitePoint = 1.0;\n\n\t// morphs\n\n\tthis.maxMorphTargets = 8;\n\tthis.maxMorphNormals = 4;\n\n\t// internal properties\n\n\tvar _this = this,\n\n\t\t_isContextLost = false,\n\n\t\t// internal state cache\n\n\t\t_framebuffer = null,\n\n\t\t_currentActiveCubeFace = 0,\n\t\t_currentActiveMipmapLevel = 0,\n\t\t_currentRenderTarget = null,\n\t\t_currentFramebuffer = null,\n\t\t_currentMaterialId = - 1,\n\n\t\t// geometry and program caching\n\n\t\t_currentGeometryProgram = {\n\t\t\tgeometry: null,\n\t\t\tprogram: null,\n\t\t\twireframe: false\n\t\t},\n\n\t\t_currentCamera = null,\n\t\t_currentArrayCamera = null,\n\n\t\t_currentViewport = new Vector4(),\n\t\t_currentScissor = new Vector4(),\n\t\t_currentScissorTest = null,\n\n\t\t//\n\n\t\t_width = _canvas.width,\n\t\t_height = _canvas.height,\n\n\t\t_pixelRatio = 1,\n\t\t_opaqueSort = null,\n\t\t_transparentSort = null,\n\n\t\t_viewport = new Vector4( 0, 0, _width, _height ),\n\t\t_scissor = new Vector4( 0, 0, _width, _height ),\n\t\t_scissorTest = false,\n\n\t\t// frustum\n\n\t\t_frustum = new Frustum(),\n\n\t\t// clipping\n\n\t\t_clipping = new WebGLClipping(),\n\t\t_clippingEnabled = false,\n\t\t_localClippingEnabled = false,\n\n\t\t// camera matrices cache\n\n\t\t_projScreenMatrix = new Matrix4(),\n\n\t\t_vector3 = new Vector3();\n\n\tfunction getTargetPixelRatio() {\n\n\t\treturn _currentRenderTarget === null ? _pixelRatio : 1;\n\n\t}\n\n\t// initialize\n\n\tvar _gl;\n\n\ttry {\n\n\t\tvar contextAttributes = {\n\t\t\talpha: _alpha,\n\t\t\tdepth: _depth,\n\t\t\tstencil: _stencil,\n\t\t\tantialias: _antialias,\n\t\t\tpremultipliedAlpha: _premultipliedAlpha,\n\t\t\tpreserveDrawingBuffer: _preserveDrawingBuffer,\n\t\t\tpowerPreference: _powerPreference,\n\t\t\tfailIfMajorPerformanceCaveat: _failIfMajorPerformanceCaveat,\n\t\t\txrCompatible: true\n\t\t};\n\n\t\t// event listeners must be registered before WebGL context is created, see #12753\n\n\t\t_canvas.addEventListener( 'webglcontextlost', onContextLost, false );\n\t\t_canvas.addEventListener( 'webglcontextrestored', onContextRestore, false );\n\n\t\t_gl = _context || _canvas.getContext( 'webgl', contextAttributes ) || _canvas.getContext( 'experimental-webgl', contextAttributes );\n\n\t\tif ( _gl === null ) {\n\n\t\t\tif ( _canvas.getContext( 'webgl' ) !== null ) {\n\n\t\t\t\tthrow new Error( 'Error creating WebGL context with your selected attributes.' );\n\n\t\t\t} else {\n\n\t\t\t\tthrow new Error( 'Error creating WebGL context.' );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Some experimental-webgl implementations do not have getShaderPrecisionFormat\n\n\t\tif ( _gl.getShaderPrecisionFormat === undefined ) {\n\n\t\t\t_gl.getShaderPrecisionFormat = function () {\n\n\t\t\t\treturn { 'rangeMin': 1, 'rangeMax': 1, 'precision': 1 };\n\n\t\t\t};\n\n\t\t}\n\n\t} catch ( error ) {\n\n\t\tconsole.error( 'THREE.WebGLRenderer: ' + error.message );\n\t\tthrow error;\n\n\t}\n\n\tvar extensions, capabilities, state, info;\n\tvar properties, textures, attributes, geometries, objects;\n\tvar programCache, renderLists, renderStates;\n\n\tvar background, morphtargets, bufferRenderer, indexedBufferRenderer;\n\n\tvar utils;\n\n\tfunction initGLContext() {\n\n\t\textensions = new WebGLExtensions( _gl );\n\n\t\tcapabilities = new WebGLCapabilities( _gl, extensions, parameters );\n\n\t\tif ( capabilities.isWebGL2 === false ) {\n\n\t\t\textensions.get( 'WEBGL_depth_texture' );\n\t\t\textensions.get( 'OES_texture_float' );\n\t\t\textensions.get( 'OES_texture_half_float' );\n\t\t\textensions.get( 'OES_texture_half_float_linear' );\n\t\t\textensions.get( 'OES_standard_derivatives' );\n\t\t\textensions.get( 'OES_element_index_uint' );\n\t\t\textensions.get( 'ANGLE_instanced_arrays' );\n\n\t\t}\n\n\t\textensions.get( 'OES_texture_float_linear' );\n\n\t\tutils = new WebGLUtils( _gl, extensions, capabilities );\n\n\t\tstate = new WebGLState( _gl, extensions, capabilities );\n\t\tstate.scissor( _currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio ).floor() );\n\t\tstate.viewport( _currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio ).floor() );\n\n\t\tinfo = new WebGLInfo( _gl );\n\t\tproperties = new WebGLProperties();\n\t\ttextures = new WebGLTextures( _gl, extensions, state, properties, capabilities, utils, info );\n\t\tattributes = new WebGLAttributes( _gl, capabilities );\n\t\tgeometries = new WebGLGeometries( _gl, attributes, info );\n\t\tobjects = new WebGLObjects( _gl, geometries, attributes, info );\n\t\tmorphtargets = new WebGLMorphtargets( _gl );\n\t\tprogramCache = new WebGLPrograms( _this, extensions, capabilities );\n\t\trenderLists = new WebGLRenderLists();\n\t\trenderStates = new WebGLRenderStates();\n\n\t\tbackground = new WebGLBackground( _this, state, objects, _premultipliedAlpha );\n\n\t\tbufferRenderer = new WebGLBufferRenderer( _gl, extensions, info, capabilities );\n\t\tindexedBufferRenderer = new WebGLIndexedBufferRenderer( _gl, extensions, info, capabilities );\n\n\t\tinfo.programs = programCache.programs;\n\n\t\t_this.capabilities = capabilities;\n\t\t_this.extensions = extensions;\n\t\t_this.properties = properties;\n\t\t_this.renderLists = renderLists;\n\t\t_this.state = state;\n\t\t_this.info = info;\n\n\t}\n\n\tinitGLContext();\n\n\t// xr\n\n\tvar xr = new WebXRManager( _this, _gl );\n\n\tthis.xr = xr;\n\n\t// shadow map\n\n\tvar shadowMap = new WebGLShadowMap( _this, objects, capabilities.maxTextureSize );\n\n\tthis.shadowMap = shadowMap;\n\n\t// API\n\n\tthis.getContext = function () {\n\n\t\treturn _gl;\n\n\t};\n\n\tthis.getContextAttributes = function () {\n\n\t\treturn _gl.getContextAttributes();\n\n\t};\n\n\tthis.forceContextLoss = function () {\n\n\t\tvar extension = extensions.get( 'WEBGL_lose_context' );\n\t\tif ( extension ) extension.loseContext();\n\n\t};\n\n\tthis.forceContextRestore = function () {\n\n\t\tvar extension = extensions.get( 'WEBGL_lose_context' );\n\t\tif ( extension ) extension.restoreContext();\n\n\t};\n\n\tthis.getPixelRatio = function () {\n\n\t\treturn _pixelRatio;\n\n\t};\n\n\tthis.setPixelRatio = function ( value ) {\n\n\t\tif ( value === undefined ) return;\n\n\t\t_pixelRatio = value;\n\n\t\tthis.setSize( _width, _height, false );\n\n\t};\n\n\tthis.getSize = function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'WebGLRenderer: .getsize() now requires a Vector2 as an argument' );\n\n\t\t\ttarget = new Vector2();\n\n\t\t}\n\n\t\treturn target.set( _width, _height );\n\n\t};\n\n\tthis.setSize = function ( width, height, updateStyle ) {\n\n\t\tif ( xr.isPresenting ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: Can\\'t change size while VR device is presenting.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\t_width = width;\n\t\t_height = height;\n\n\t\t_canvas.width = Math.floor( width * _pixelRatio );\n\t\t_canvas.height = Math.floor( height * _pixelRatio );\n\n\t\tif ( updateStyle !== false ) {\n\n\t\t\t_canvas.style.width = width + 'px';\n\t\t\t_canvas.style.height = height + 'px';\n\n\t\t}\n\n\t\tthis.setViewport( 0, 0, width, height );\n\n\t};\n\n\tthis.getDrawingBufferSize = function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument' );\n\n\t\t\ttarget = new Vector2();\n\n\t\t}\n\n\t\treturn target.set( _width * _pixelRatio, _height * _pixelRatio ).floor();\n\n\t};\n\n\tthis.setDrawingBufferSize = function ( width, height, pixelRatio ) {\n\n\t\t_width = width;\n\t\t_height = height;\n\n\t\t_pixelRatio = pixelRatio;\n\n\t\t_canvas.width = Math.floor( width * pixelRatio );\n\t\t_canvas.height = Math.floor( height * pixelRatio );\n\n\t\tthis.setViewport( 0, 0, width, height );\n\n\t};\n\n\tthis.getCurrentViewport = function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument' );\n\n\t\t\ttarget = new Vector4();\n\n\t\t}\n\n\t\treturn target.copy( _currentViewport );\n\n\t};\n\n\tthis.getViewport = function ( target ) {\n\n\t\treturn target.copy( _viewport );\n\n\t};\n\n\tthis.setViewport = function ( x, y, width, height ) {\n\n\t\tif ( x.isVector4 ) {\n\n\t\t\t_viewport.set( x.x, x.y, x.z, x.w );\n\n\t\t} else {\n\n\t\t\t_viewport.set( x, y, width, height );\n\n\t\t}\n\n\t\tstate.viewport( _currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio ).floor() );\n\n\t};\n\n\tthis.getScissor = function ( target ) {\n\n\t\treturn target.copy( _scissor );\n\n\t};\n\n\tthis.setScissor = function ( x, y, width, height ) {\n\n\t\tif ( x.isVector4 ) {\n\n\t\t\t_scissor.set( x.x, x.y, x.z, x.w );\n\n\t\t} else {\n\n\t\t\t_scissor.set( x, y, width, height );\n\n\t\t}\n\n\t\tstate.scissor( _currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio ).floor() );\n\n\t};\n\n\tthis.getScissorTest = function () {\n\n\t\treturn _scissorTest;\n\n\t};\n\n\tthis.setScissorTest = function ( boolean ) {\n\n\t\tstate.setScissorTest( _scissorTest = boolean );\n\n\t};\n\n\tthis.setOpaqueSort = function ( method ) {\n\n\t\t_opaqueSort = method;\n\n\t};\n\n\tthis.setTransparentSort = function ( method ) {\n\n\t\t_transparentSort = method;\n\n\t};\n\n\t// Clearing\n\n\tthis.getClearColor = function () {\n\n\t\treturn background.getClearColor();\n\n\t};\n\n\tthis.setClearColor = function () {\n\n\t\tbackground.setClearColor.apply( background, arguments );\n\n\t};\n\n\tthis.getClearAlpha = function () {\n\n\t\treturn background.getClearAlpha();\n\n\t};\n\n\tthis.setClearAlpha = function () {\n\n\t\tbackground.setClearAlpha.apply( background, arguments );\n\n\t};\n\n\tthis.clear = function ( color, depth, stencil ) {\n\n\t\tvar bits = 0;\n\n\t\tif ( color === undefined || color ) bits |= 16384;\n\t\tif ( depth === undefined || depth ) bits |= 256;\n\t\tif ( stencil === undefined || stencil ) bits |= 1024;\n\n\t\t_gl.clear( bits );\n\n\t};\n\n\tthis.clearColor = function () {\n\n\t\tthis.clear( true, false, false );\n\n\t};\n\n\tthis.clearDepth = function () {\n\n\t\tthis.clear( false, true, false );\n\n\t};\n\n\tthis.clearStencil = function () {\n\n\t\tthis.clear( false, false, true );\n\n\t};\n\n\t//\n\n\tthis.dispose = function () {\n\n\t\t_canvas.removeEventListener( 'webglcontextlost', onContextLost, false );\n\t\t_canvas.removeEventListener( 'webglcontextrestored', onContextRestore, false );\n\n\t\trenderLists.dispose();\n\t\trenderStates.dispose();\n\t\tproperties.dispose();\n\t\tobjects.dispose();\n\n\t\txr.dispose();\n\n\t\tanimation.stop();\n\n\t};\n\n\t// Events\n\n\tfunction onContextLost( event ) {\n\n\t\tevent.preventDefault();\n\n\t\tconsole.log( 'THREE.WebGLRenderer: Context Lost.' );\n\n\t\t_isContextLost = true;\n\n\t}\n\n\tfunction onContextRestore( /* event */ ) {\n\n\t\tconsole.log( 'THREE.WebGLRenderer: Context Restored.' );\n\n\t\t_isContextLost = false;\n\n\t\tinitGLContext();\n\n\t}\n\n\tfunction onMaterialDispose( event ) {\n\n\t\tvar material = event.target;\n\n\t\tmaterial.removeEventListener( 'dispose', onMaterialDispose );\n\n\t\tdeallocateMaterial( material );\n\n\t}\n\n\t// Buffer deallocation\n\n\tfunction deallocateMaterial( material ) {\n\n\t\treleaseMaterialProgramReference( material );\n\n\t\tproperties.remove( material );\n\n\t}\n\n\n\tfunction releaseMaterialProgramReference( material ) {\n\n\t\tvar programInfo = properties.get( material ).program;\n\n\t\tmaterial.program = undefined;\n\n\t\tif ( programInfo !== undefined ) {\n\n\t\t\tprogramCache.releaseProgram( programInfo );\n\n\t\t}\n\n\t}\n\n\t// Buffer rendering\n\n\tfunction renderObjectImmediate( object, program ) {\n\n\t\tobject.render( function ( object ) {\n\n\t\t\t_this.renderBufferImmediate( object, program );\n\n\t\t} );\n\n\t}\n\n\tthis.renderBufferImmediate = function ( object, program ) {\n\n\t\tstate.initAttributes();\n\n\t\tvar buffers = properties.get( object );\n\n\t\tif ( object.hasPositions && ! buffers.position ) buffers.position = _gl.createBuffer();\n\t\tif ( object.hasNormals && ! buffers.normal ) buffers.normal = _gl.createBuffer();\n\t\tif ( object.hasUvs && ! buffers.uv ) buffers.uv = _gl.createBuffer();\n\t\tif ( object.hasColors && ! buffers.color ) buffers.color = _gl.createBuffer();\n\n\t\tvar programAttributes = program.getAttributes();\n\n\t\tif ( object.hasPositions ) {\n\n\t\t\t_gl.bindBuffer( 34962, buffers.position );\n\t\t\t_gl.bufferData( 34962, object.positionArray, 35048 );\n\n\t\t\tstate.enableAttribute( programAttributes.position );\n\t\t\t_gl.vertexAttribPointer( programAttributes.position, 3, 5126, false, 0, 0 );\n\n\t\t}\n\n\t\tif ( object.hasNormals ) {\n\n\t\t\t_gl.bindBuffer( 34962, buffers.normal );\n\t\t\t_gl.bufferData( 34962, object.normalArray, 35048 );\n\n\t\t\tstate.enableAttribute( programAttributes.normal );\n\t\t\t_gl.vertexAttribPointer( programAttributes.normal, 3, 5126, false, 0, 0 );\n\n\t\t}\n\n\t\tif ( object.hasUvs ) {\n\n\t\t\t_gl.bindBuffer( 34962, buffers.uv );\n\t\t\t_gl.bufferData( 34962, object.uvArray, 35048 );\n\n\t\t\tstate.enableAttribute( programAttributes.uv );\n\t\t\t_gl.vertexAttribPointer( programAttributes.uv, 2, 5126, false, 0, 0 );\n\n\t\t}\n\n\t\tif ( object.hasColors ) {\n\n\t\t\t_gl.bindBuffer( 34962, buffers.color );\n\t\t\t_gl.bufferData( 34962, object.colorArray, 35048 );\n\n\t\t\tstate.enableAttribute( programAttributes.color );\n\t\t\t_gl.vertexAttribPointer( programAttributes.color, 3, 5126, false, 0, 0 );\n\n\t\t}\n\n\t\tstate.disableUnusedAttributes();\n\n\t\t_gl.drawArrays( 4, 0, object.count );\n\n\t\tobject.count = 0;\n\n\t};\n\n\tvar tempScene = new Scene();\n\n\tthis.renderBufferDirect = function ( camera, scene, geometry, material, object, group ) {\n\n\t\tif ( scene === null ) scene = tempScene; // renderBufferDirect second parameter used to be fog (could be null)\n\n\t\tvar frontFaceCW = ( object.isMesh && object.matrixWorld.determinant() < 0 );\n\n\t\tvar program = setProgram( camera, scene, material, object );\n\n\t\tstate.setMaterial( material, frontFaceCW );\n\n\t\tvar updateBuffers = false;\n\n\t\tif ( _currentGeometryProgram.geometry !== geometry.id ||\n\t\t\t_currentGeometryProgram.program !== program.id ||\n\t\t\t_currentGeometryProgram.wireframe !== ( material.wireframe === true ) ) {\n\n\t\t\t_currentGeometryProgram.geometry = geometry.id;\n\t\t\t_currentGeometryProgram.program = program.id;\n\t\t\t_currentGeometryProgram.wireframe = material.wireframe === true;\n\t\t\tupdateBuffers = true;\n\n\t\t}\n\n\t\tif (  material.morphNormals ) {\n\n\t\t\tmorphtargets.update( object, geometry, material, program );\n\n\t\t\tupdateBuffers = true;\n\n\t\t}\n\n\t\t//\n\n\t\tvar index = geometry.index;\n\t\tvar position = geometry.attributes.position;\n\n\t\t//\n\n\t\tif ( index === null ) {\n\n\t\t\tif ( position === undefined || position.count === 0 ) return;\n\n\t\t} else if ( index.count === 0 ) {\n\n\t\t\treturn;\n\n\t\t}\n\n\t\t//\n\n\t\tvar rangeFactor = 1;\n\n\t\tif ( material.wireframe === true ) {\n\n\t\t\tindex = geometries.getWireframeAttribute( geometry );\n\t\t\trangeFactor = 2;\n\n\t\t}\n\n\t\tvar attribute;\n\t\tvar renderer = bufferRenderer;\n\n\t\tif ( index !== null ) {\n\n\t\t\tattribute = attributes.get( index );\n\n\t\t\trenderer = indexedBufferRenderer;\n\t\t\trenderer.setIndex( attribute );\n\n\t\t}\n\n\t\tif ( updateBuffers ) {\n\n\t\t\tsetupVertexAttributes( object, geometry, material, program );\n\n\t\t\tif ( index !== null ) {\n\n\t\t\t\t_gl.bindBuffer( 34963, attribute.buffer );\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tvar dataCount = ( index !== null ) ? index.count : position.count;\n\n\t\tvar rangeStart = geometry.drawRange.start * rangeFactor;\n\t\tvar rangeCount = geometry.drawRange.count * rangeFactor;\n\n\t\tvar groupStart = group !== null ? group.start * rangeFactor : 0;\n\t\tvar groupCount = group !== null ? group.count * rangeFactor : Infinity;\n\n\t\tvar drawStart = Math.max( rangeStart, groupStart );\n\t\tvar drawEnd = Math.min( dataCount, rangeStart + rangeCount, groupStart + groupCount ) - 1;\n\n\t\tvar drawCount = Math.max( 0, drawEnd - drawStart + 1 );\n\n\t\tif ( drawCount === 0 ) return;\n\n\t\t//\n\n\t\tif ( object.isMesh ) {\n\n\t\t\tif ( material.wireframe === true ) {\n\n\t\t\t\tstate.setLineWidth( material.wireframeLinewidth * getTargetPixelRatio() );\n\t\t\t\trenderer.setMode( 1 );\n\n\t\t\t} else {\n\n\t\t\t\trenderer.setMode( 4 );\n\n\t\t\t}\n\n\t\t} else if ( object.isSprite ) {\n\n\t\t\trenderer.setMode( 4 );\n\n\t\t}\n\n\t\tif ( geometry.isInstancedBufferGeometry ) {\n\n\t\t\trenderer.renderInstances( geometry, drawStart, drawCount, geometry.maxInstancedCount );\n\n\t\t} else {\n\n\t\t\trenderer.render( drawStart, drawCount );\n\n\t\t}\n\n\t};\n\n\tfunction setupVertexAttributes( object, geometry, material, program ) {\n\n\t\tif ( capabilities.isWebGL2 === false && (  geometry.isInstancedBufferGeometry ) ) {\n\n\t\t\tif ( extensions.get( 'ANGLE_instanced_arrays' ) === null ) return;\n\n\t\t}\n\n\t\tstate.initAttributes();\n\n\t\tvar geometryAttributes = geometry.attributes;\n\n\t\tvar programAttributes = program.getAttributes();\n\n\t\tvar materialDefaultAttributeValues = material.defaultAttributeValues;\n\n\t\tfor ( var name in programAttributes ) {\n\n\t\t\tvar programAttribute = programAttributes[ name ];\n\n\t\t\tif ( programAttribute >= 0 ) {\n\n\t\t\t\tvar geometryAttribute = geometryAttributes[ name ];\n\n\t\t\t\tif ( geometryAttribute !== undefined ) {\n\n\t\t\t\t\tvar normalized = geometryAttribute.normalized;\n\t\t\t\t\tvar size = geometryAttribute.itemSize;\n\n\t\t\t\t\tvar attribute = attributes.get( geometryAttribute );\n\n\t\t\t\t\t// TODO Attribute may not be available on context restore\n\n\t\t\t\t\tif ( attribute === undefined ) continue;\n\n\t\t\t\t\tvar buffer = attribute.buffer;\n\t\t\t\t\tvar type = attribute.type;\n\t\t\t\t\tvar bytesPerElement = attribute.bytesPerElement;\n\n\t\t\t\t\tif ( geometryAttribute.isInterleavedBufferAttribute ) {\n\n\t\t\t\t\t\tvar data = geometryAttribute.data;\n\t\t\t\t\t\tvar stride = data.stride;\n\t\t\t\t\t\tvar offset = geometryAttribute.offset;\n\n\t\t\t\t\t\tif ( data && data.isInstancedInterleavedBuffer ) {\n\n\t\t\t\t\t\t\tstate.enableAttributeAndDivisor( programAttribute, data.meshPerAttribute );\n\n\t\t\t\t\t\t\tif ( geometry.maxInstancedCount === undefined ) {\n\n\t\t\t\t\t\t\t\tgeometry.maxInstancedCount = data.meshPerAttribute * data.count;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tstate.enableAttribute( programAttribute );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t_gl.bindBuffer( 34962, buffer );\n\t\t\t\t\t\t_gl.vertexAttribPointer( programAttribute, size, type, normalized, stride * bytesPerElement, offset * bytesPerElement );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( geometryAttribute.isInstancedBufferAttribute ) {\n\n\t\t\t\t\t\t\tstate.enableAttributeAndDivisor( programAttribute, geometryAttribute.meshPerAttribute );\n\n\t\t\t\t\t\t\tif ( geometry.maxInstancedCount === undefined ) {\n\n\t\t\t\t\t\t\t\tgeometry.maxInstancedCount = geometryAttribute.meshPerAttribute * geometryAttribute.count;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tstate.enableAttribute( programAttribute );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t_gl.bindBuffer( 34962, buffer );\n\t\t\t\t\t\t_gl.vertexAttribPointer( programAttribute, size, type, normalized, 0, 0 );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( name === 'instanceMatrix' ) {\n\n\t\t\t\t\tvar attribute = attributes.get( object.instanceMatrix );\n\n\t\t\t\t\t// TODO Attribute may not be available on context restore\n\n\t\t\t\t\tif ( attribute === undefined ) continue;\n\n\t\t\t\t\tvar buffer = attribute.buffer;\n\t\t\t\t\tvar type = attribute.type;\n\n\t\t\t\t\tstate.enableAttributeAndDivisor( programAttribute + 0, 1 );\n\t\t\t\t\tstate.enableAttributeAndDivisor( programAttribute + 1, 1 );\n\t\t\t\t\tstate.enableAttributeAndDivisor( programAttribute + 2, 1 );\n\t\t\t\t\tstate.enableAttributeAndDivisor( programAttribute + 3, 1 );\n\n\t\t\t\t\t_gl.bindBuffer( 34962, buffer );\n\n\t\t\t\t\t_gl.vertexAttribPointer( programAttribute + 0, 4, type, false, 64, 0 );\n\t\t\t\t\t_gl.vertexAttribPointer( programAttribute + 1, 4, type, false, 64, 16 );\n\t\t\t\t\t_gl.vertexAttribPointer( programAttribute + 2, 4, type, false, 64, 32 );\n\t\t\t\t\t_gl.vertexAttribPointer( programAttribute + 3, 4, type, false, 64, 48 );\n\n\t\t\t\t} else if ( materialDefaultAttributeValues !== undefined ) {\n\n\t\t\t\t\tvar value = materialDefaultAttributeValues[ name ];\n\n\t\t\t\t\tif ( value !== undefined ) {\n\n\t\t\t\t\t\tswitch ( value.length ) {\n\n\t\t\t\t\t\t\tcase 2:\n\t\t\t\t\t\t\t\t_gl.vertexAttrib2fv( programAttribute, value );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 3:\n\t\t\t\t\t\t\t\t_gl.vertexAttrib3fv( programAttribute, value );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 4:\n\t\t\t\t\t\t\t\t_gl.vertexAttrib4fv( programAttribute, value );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t_gl.vertexAttrib1fv( programAttribute, value );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tstate.disableUnusedAttributes();\n\n\t}\n\n\t// Compile\n\n\tthis.compile = function ( scene, camera ) {\n\n\t\tcurrentRenderState = renderStates.get( scene, camera );\n\t\tcurrentRenderState.init();\n\n\t\tscene.traverse( function ( object ) {\n\n\t\t} );\n\n\t\tcurrentRenderState.setupLights( camera );\n\n\t\tvar compiled = {};\n\n\t\tscene.traverse( function ( object ) {\n\n\t\t\tif ( object.material ) {\n\n\t\t\t\tif ( Array.isArray( object.material ) ) {\n\n\t\t\t\t\tfor ( var i = 0; i < object.material.length; i ++ ) {\n\n\t\t\t\t\t\tif ( object.material[ i ].uuid in compiled === false ) {\n\n\t\t\t\t\t\t\tinitMaterial( object.material[ i ], scene, object );\n\t\t\t\t\t\t\tcompiled[ object.material[ i ].uuid ] = true;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( object.material.uuid in compiled === false ) {\n\n\t\t\t\t\tinitMaterial( object.material, scene, object );\n\t\t\t\t\tcompiled[ object.material.uuid ] = true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} );\n\n\t};\n\n\t// Animation Loop\n\n\tvar onAnimationFrameCallback = null;\n\n\tfunction onAnimationFrame( time ) {\n\n\t\tif ( xr.isPresenting ) return;\n\t\tif ( onAnimationFrameCallback ) onAnimationFrameCallback( time );\n\n\t}\n\n\tvar animation = new WebGLAnimation();\n\tanimation.setAnimationLoop( onAnimationFrame );\n\n\tif ( typeof window !== 'undefined' ) animation.setContext( window );\n\n\tthis.setAnimationLoop = function ( callback ) {\n\n\t\tonAnimationFrameCallback = callback;\n\t\txr.setAnimationLoop( callback );\n\n\t\tanimation.start();\n\n\t};\n\n\t// Rendering\n\n\tthis.render = function ( scene, camera ) {\n\n\t\tvar renderTarget, forceClear;\n\n\t\tif ( arguments[ 2 ] !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead.' );\n\t\t\trenderTarget = arguments[ 2 ];\n\n\t\t}\n\n\t\tif ( arguments[ 3 ] !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead.' );\n\t\t\tforceClear = arguments[ 3 ];\n\n\t\t}\n\n\t\tif ( ! ( camera && camera.isCamera ) ) {\n\n\t\t\tconsole.error( 'THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( _isContextLost ) return;\n\n\t\t// reset caching for this frame\n\n\t\t_currentGeometryProgram.geometry = null;\n\t\t_currentGeometryProgram.program = null;\n\t\t_currentGeometryProgram.wireframe = false;\n\t\t_currentMaterialId = - 1;\n\t\t_currentCamera = null;\n\n\t\t// update scene graph\n\n\t\tif ( scene.autoUpdate === true ) scene.updateMatrixWorld();\n\n\t\t// update camera matrices and frustum\n\n\t\tif ( camera.parent === null ) camera.updateMatrixWorld();\n\n\t\tif ( xr.enabled && xr.isPresenting ) {\n\n\t\t\tcamera = xr.getCamera( camera );\n\n\t\t}\n\n\t\t//\n\n\t\tcurrentRenderState = renderStates.get( scene, camera );\n\t\tcurrentRenderState.init();\n\n\t\tscene.onBeforeRender( _this, scene, camera, renderTarget || _currentRenderTarget );\n\n\t\t_projScreenMatrix.multiplyMatrices( camera.projectionMatrix, camera.matrixWorldInverse );\n\t\t_frustum.setFromProjectionMatrix( _projScreenMatrix );\n\n\t\t_localClippingEnabled = this.localClippingEnabled;\n\t\t_clippingEnabled = _clipping.init( this.clippingPlanes, _localClippingEnabled, camera );\n\n\t\tcurrentRenderList = renderLists.get( scene, camera );\n\t\tcurrentRenderList.init();\n\n\t\tprojectObject( scene, camera, 0, _this.sortObjects );\n\n\t\tcurrentRenderList.finish();\n\n\t\tif ( _this.sortObjects === true ) {\n\n\t\t\tcurrentRenderList.sort( _opaqueSort, _transparentSort );\n\n\t\t}\n\n\t\t//\n\n\t\tif ( _clippingEnabled ) _clipping.beginShadows();\n\n\t\tvar shadowsArray = currentRenderState.state.shadowsArray;\n\n\t\tshadowMap.render( shadowsArray, scene, camera );\n\n\t\tcurrentRenderState.setupLights( camera );\n\n\t\tif ( _clippingEnabled ) _clipping.endShadows();\n\n\t\t//\n\n\t\tif ( this.info.autoReset ) this.info.reset();\n\n\t\tif ( renderTarget !== undefined ) {\n\n\t\t\tthis.setRenderTarget( renderTarget );\n\n\t\t}\n\n\t\t//\n\n\t\tbackground.render( currentRenderList, scene, camera, forceClear );\n\n\t\t// render scene\n\n\t\tvar opaqueObjects = currentRenderList.opaque;\n\t\tvar transparentObjects = currentRenderList.transparent;\n\n\t\tif ( scene.overrideMaterial ) {\n\n\t\t\tvar overrideMaterial = scene.overrideMaterial;\n\n\t\t\tif ( opaqueObjects.length ) renderObjects( opaqueObjects, scene, camera, overrideMaterial );\n\t\t\tif ( transparentObjects.length ) renderObjects( transparentObjects, scene, camera, overrideMaterial );\n\n\t\t} else {\n\n\t\t\t// opaque pass (front-to-back order)\n\n\t\t\tif ( opaqueObjects.length ) renderObjects( opaqueObjects, scene, camera );\n\n\t\t\t// transparent pass (back-to-front order)\n\n\t\t\tif ( transparentObjects.length ) renderObjects( transparentObjects, scene, camera );\n\n\t\t}\n\n\t\t//\n\n\t\tscene.onAfterRender( _this, scene, camera );\n\n\t\t//\n\n\t\tif ( _currentRenderTarget !== null ) {\n\n\t\t\t// Generate mipmap if we're using any kind of mipmap filtering\n\n\t\t\ttextures.updateRenderTargetMipmap( _currentRenderTarget );\n\n\t\t\t// resolve multisample renderbuffers to a single-sample texture if necessary\n\n\t\t\ttextures.updateMultisampleRenderTarget( _currentRenderTarget );\n\n\t\t}\n\n\t\t// Ensure depth buffer writing is enabled so it can be cleared on next render\n\n\t\tstate.buffers.depth.setTest( true );\n\t\tstate.buffers.depth.setMask( true );\n\t\tstate.buffers.color.setMask( true );\n\n\t\tstate.setPolygonOffset( false );\n\n\t\t// _gl.finish();\n\n\t\tcurrentRenderList = null;\n\t\tcurrentRenderState = null;\n\n\t};\n\n\tfunction projectObject( object, camera, groupOrder, sortObjects ) {\n\n\t\tif ( object.visible === false ) return;\n\n\t\tvar visible = object.layers.test( camera.layers );\n\n\t\tif ( visible ) {\n\n\t\t\tif ( object.isGroup ) {\n\n\t\t\t\tgroupOrder = object.renderOrder;\n\n\t\t\t} else if ( object.isLOD ) {\n\n\t\t\t\tif ( object.autoUpdate === true ) object.update( camera );\n\n\t\t\t} else if ( object.isSprite ) {\n\n\t\t\t\tif ( ! object.frustumCulled || _frustum.intersectsSprite( object ) ) {\n\n\t\t\t\t\tif ( sortObjects ) {\n\n\t\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld )\n\t\t\t\t\t\t\t.applyMatrix4( _projScreenMatrix );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvar geometry = objects.update( object );\n\t\t\t\t\tvar material = object.material;\n\n\t\t\t\t\tif ( material.visible ) {\n\n\t\t\t\t\t\tcurrentRenderList.push( object, geometry, material, groupOrder, _vector3.z, null );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if ( object.isImmediateRenderObject ) {\n\n\t\t\t\tif ( sortObjects ) {\n\n\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld )\n\t\t\t\t\t\t.applyMatrix4( _projScreenMatrix );\n\n\t\t\t\t}\n\n\t\t\t\tcurrentRenderList.push( object, null, object.material, groupOrder, _vector3.z, null );\n\n\t\t\t} else if ( object.isMesh || false || false ) {\n\n\t\t\t\tif ( ! object.frustumCulled || _frustum.intersectsObject( object ) ) {\n\n\t\t\t\t\tif ( sortObjects ) {\n\n\t\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld )\n\t\t\t\t\t\t\t.applyMatrix4( _projScreenMatrix );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvar geometry = objects.update( object );\n\t\t\t\t\tvar material = object.material;\n\n\t\t\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\t\t\tvar groups = geometry.groups;\n\n\t\t\t\t\t\tfor ( var i = 0, l = groups.length; i < l; i ++ ) {\n\n\t\t\t\t\t\t\tvar group = groups[ i ];\n\t\t\t\t\t\t\tvar groupMaterial = material[ group.materialIndex ];\n\n\t\t\t\t\t\t\tif ( groupMaterial && groupMaterial.visible ) {\n\n\t\t\t\t\t\t\t\tcurrentRenderList.push( object, geometry, groupMaterial, groupOrder, _vector3.z, group );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if ( material.visible ) {\n\n\t\t\t\t\t\tcurrentRenderList.push( object, geometry, material, groupOrder, _vector3.z, null );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar children = object.children;\n\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tprojectObject( children[ i ], camera, groupOrder, sortObjects );\n\n\t\t}\n\n\t}\n\n\tfunction renderObjects( renderList, scene, camera, overrideMaterial ) {\n\n\t\tfor ( var i = 0, l = renderList.length; i < l; i ++ ) {\n\n\t\t\tvar renderItem = renderList[ i ];\n\n\t\t\tvar object = renderItem.object;\n\t\t\tvar geometry = renderItem.geometry;\n\t\t\tvar material = overrideMaterial === undefined ? renderItem.material : overrideMaterial;\n\t\t\tvar group = renderItem.group;\n\n\t\t\tif ( camera.isArrayCamera ) {\n\n\t\t\t\t_currentArrayCamera = camera;\n\n\t\t\t\tvar cameras = camera.cameras;\n\n\t\t\t\tfor ( var j = 0, jl = cameras.length; j < jl; j ++ ) {\n\n\t\t\t\t\tvar camera2 = cameras[ j ];\n\n\t\t\t\t\tif ( object.layers.test( camera2.layers ) ) {\n\n\t\t\t\t\t\tstate.viewport( _currentViewport.copy( camera2.viewport ) );\n\n\t\t\t\t\t\tcurrentRenderState.setupLights( camera2 );\n\n\t\t\t\t\t\trenderObject( object, scene, camera2, geometry, material, group );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t_currentArrayCamera = null;\n\n\t\t\t\trenderObject( object, scene, camera, geometry, material, group );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction renderObject( object, scene, camera, geometry, material, group ) {\n\n\t\tobject.onBeforeRender( _this, scene, camera, geometry, material, group );\n\t\tcurrentRenderState = renderStates.get( scene, _currentArrayCamera || camera );\n\n\t\tobject.modelViewMatrix.multiplyMatrices( camera.matrixWorldInverse, object.matrixWorld );\n\t\tobject.normalMatrix.getNormalMatrix( object.modelViewMatrix );\n\n\t\tif ( object.isImmediateRenderObject ) {\n\n\t\t\tvar program = setProgram( camera, scene, material, object );\n\n\t\t\tstate.setMaterial( material );\n\n\t\t\t_currentGeometryProgram.geometry = null;\n\t\t\t_currentGeometryProgram.program = null;\n\t\t\t_currentGeometryProgram.wireframe = false;\n\n\t\t\trenderObjectImmediate( object, program );\n\n\t\t} else {\n\n\t\t\t_this.renderBufferDirect( camera, scene, geometry, material, object, group );\n\n\t\t}\n\n\t\tobject.onAfterRender( _this, scene, camera, geometry, material, group );\n\t\tcurrentRenderState = renderStates.get( scene, _currentArrayCamera || camera );\n\n\t}\n\n\tfunction initMaterial( material, scene, object ) {\n\n\t\tvar materialProperties = properties.get( material );\n\n\t\tvar lights = currentRenderState.state.lights;\n\t\tvar shadowsArray = currentRenderState.state.shadowsArray;\n\n\t\tvar lightsStateVersion = lights.state.version;\n\n\t\tvar parameters = programCache.getParameters( material, lights.state, shadowsArray, scene, _clipping.numPlanes, _clipping.numIntersection, object );\n\t\tvar programCacheKey = programCache.getProgramCacheKey( parameters );\n\n\t\tvar program = materialProperties.program;\n\t\tvar programChange = true;\n\n\t\tif ( program === undefined ) {\n\n\t\t\t// new material\n\t\t\tmaterial.addEventListener( 'dispose', onMaterialDispose );\n\n\t\t} else if ( program.cacheKey !== programCacheKey ) {\n\n\t\t\t// changed glsl or parameters\n\t\t\treleaseMaterialProgramReference( material );\n\n\t\t} else if ( materialProperties.lightsStateVersion !== lightsStateVersion ) {\n\n\t\t\tmaterialProperties.lightsStateVersion = lightsStateVersion;\n\n\t\t\tprogramChange = false;\n\n\t\t} else if ( parameters.shaderID !== undefined ) {\n\n\t\t\t// same glsl and uniform list\n\t\t\treturn;\n\n\t\t} else {\n\n\t\t\t// only rebuild uniform list\n\t\t\tprogramChange = false;\n\n\t\t}\n\n\t\tif ( programChange ) {\n\n\t\t\tprogram = programCache.acquireProgram( parameters, programCacheKey );\n\n\t\t\tmaterialProperties.program = program;\n\t\t\tmaterialProperties.uniforms = parameters.uniforms;\n\t\t\tmaterialProperties.environment =  null;\n\t\t\tmaterialProperties.outputEncoding = _this.outputEncoding;\n\t\t\tmaterial.program = program;\n\n\t\t}\n\n\t\tvar programAttributes = program.getAttributes();\n\n\t\tif ( false ) {\n\n\t\t\tfor ( var i; i < _this.maxMorphTargets; i ++ ) {\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( material.morphNormals ) {\n\n\t\t\tmaterial.numSupportedMorphNormals = 0;\n\n\t\t\tfor ( var i = 0; i < _this.maxMorphNormals; i ++ ) {\n\n\t\t\t\tif ( programAttributes[ 'morphNormal' + i ] >= 0 ) {\n\n\t\t\t\t\tmaterial.numSupportedMorphNormals ++;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar uniforms = materialProperties.uniforms;\n\n\t\tif ( \n\t\t\tmaterial.clipping === true ) {\n\n\t\t\tmaterialProperties.numClippingPlanes = _clipping.numPlanes;\n\t\t\tmaterialProperties.numIntersection = _clipping.numIntersection;\n\t\t\tuniforms.clippingPlanes = _clipping.uniform;\n\n\t\t}\n\n\t\tmaterialProperties.fog = scene.fog;\n\n\t\t// store the light setup it was created for\n\n\t\tmaterialProperties.needsLights = materialNeedsLights( material );\n\t\tmaterialProperties.lightsStateVersion = lightsStateVersion;\n\n\t\tif ( materialProperties.needsLights ) {\n\n\t\t\t// wire up the material to this renderer's lighting state\n\n\t\t\tuniforms.ambientLightColor.value = lights.state.ambient;\n\t\t\tuniforms.lightProbe.value = lights.state.probe;\n\t\t\tuniforms.directionalLights.value = lights.state.directional;\n\t\t\tuniforms.directionalLightShadows.value = lights.state.directionalShadow;\n\t\t\tuniforms.spotLights.value = lights.state.spot;\n\t\t\tuniforms.spotLightShadows.value = lights.state.spotShadow;\n\t\t\tuniforms.rectAreaLights.value = lights.state.rectArea;\n\t\t\tuniforms.pointLights.value = lights.state.point;\n\t\t\tuniforms.pointLightShadows.value = lights.state.pointShadow;\n\t\t\tuniforms.hemisphereLights.value = lights.state.hemi;\n\n\t\t\tuniforms.directionalShadowMap.value = lights.state.directionalShadowMap;\n\t\t\tuniforms.directionalShadowMatrix.value = lights.state.directionalShadowMatrix;\n\t\t\tuniforms.spotShadowMap.value = lights.state.spotShadowMap;\n\t\t\tuniforms.spotShadowMatrix.value = lights.state.spotShadowMatrix;\n\t\t\tuniforms.pointShadowMap.value = lights.state.pointShadowMap;\n\t\t\tuniforms.pointShadowMatrix.value = lights.state.pointShadowMatrix;\n\t\t\t// TODO (abelnation): add area lights shadow info to uniforms\n\n\t\t}\n\n\t\tvar progUniforms = materialProperties.program.getUniforms(),\n\t\t\tuniformsList =\n\t\t\t\tWebGLUniforms.seqWithValue( progUniforms.seq, uniforms );\n\n\t\tmaterialProperties.uniformsList = uniformsList;\n\n\t}\n\n\tfunction setProgram( camera, scene, material, object ) {\n\n\t\ttextures.resetTextureUnits();\n\n\t\tvar fog = scene.fog;\n\t\tvar environment =  null;\n\n\t\tvar materialProperties = properties.get( material );\n\t\tvar lights = currentRenderState.state.lights;\n\n\t\tif ( _clippingEnabled ) {\n\n\t\t\tif ( _localClippingEnabled || camera !== _currentCamera ) {\n\n\t\t\t\tvar useCache =\n\t\t\t\t\tcamera === _currentCamera &&\n\t\t\t\t\tmaterial.id === _currentMaterialId;\n\n\t\t\t\t// we might want to call this function with some ClippingGroup\n\t\t\t\t// object instead of the material, once it becomes feasible\n\t\t\t\t// (#8465, #8379)\n\t\t\t\t_clipping.setState(\n\t\t\t\t\tmaterial.clippingPlanes, material.clipIntersection, material.clipShadows,\n\t\t\t\t\tcamera, materialProperties, useCache );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( material.version === materialProperties.__version ) {\n\n\t\t\tif ( materialProperties.program === undefined ) {\n\n\t\t\t\tinitMaterial( material, scene, object );\n\n\t\t\t} else if ( material.fog && materialProperties.fog !== fog ) {\n\n\t\t\t\tinitMaterial( material, scene, object );\n\n\t\t\t} else if ( materialProperties.environment !== environment ) {\n\n\t\t\t\tinitMaterial( material, scene, object );\n\n\t\t\t} else if ( materialProperties.needsLights && ( materialProperties.lightsStateVersion !== lights.state.version ) ) {\n\n\t\t\t\tinitMaterial( material, scene, object );\n\n\t\t\t} else if ( materialProperties.numClippingPlanes !== undefined &&\n\t\t\t\t( materialProperties.numClippingPlanes !== _clipping.numPlanes ||\n\t\t\t\tmaterialProperties.numIntersection !== _clipping.numIntersection ) ) {\n\n\t\t\t\tinitMaterial( material, scene, object );\n\n\t\t\t} else if ( materialProperties.outputEncoding !== _this.outputEncoding ) {\n\n\t\t\t\tinitMaterial( material, scene, object );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tinitMaterial( material, scene, object );\n\t\t\tmaterialProperties.__version = material.version;\n\n\t\t}\n\n\t\tvar refreshProgram = false;\n\t\tvar refreshMaterial = false;\n\t\tvar refreshLights = false;\n\n\t\tvar program = materialProperties.program,\n\t\t\tp_uniforms = program.getUniforms(),\n\t\t\tm_uniforms = materialProperties.uniforms;\n\n\t\tif ( state.useProgram( program.program ) ) {\n\n\t\t\trefreshProgram = true;\n\t\t\trefreshMaterial = true;\n\t\t\trefreshLights = true;\n\n\t\t}\n\n\t\tif ( material.id !== _currentMaterialId ) {\n\n\t\t\t_currentMaterialId = material.id;\n\n\t\t\trefreshMaterial = true;\n\n\t\t}\n\n\t\tif ( refreshProgram || _currentCamera !== camera ) {\n\n\t\t\tp_uniforms.setValue( _gl, 'projectionMatrix', camera.projectionMatrix );\n\n\t\t\tif ( capabilities.logarithmicDepthBuffer ) {\n\n\t\t\t\tp_uniforms.setValue( _gl, 'logDepthBufFC',\n\t\t\t\t\t2.0 / ( Math.log( camera.far + 1.0 ) / Math.LN2 ) );\n\n\t\t\t}\n\n\t\t\tif ( _currentCamera !== camera ) {\n\n\t\t\t\t_currentCamera = camera;\n\n\t\t\t\t// lighting uniforms depend on the camera so enforce an update\n\t\t\t\t// now, in case this material supports lights - or later, when\n\t\t\t\t// the next material that does gets activated:\n\n\t\t\t\trefreshMaterial = true;\t\t// set to true on material change\n\t\t\t\trefreshLights = true;\t\t// remains set until update done\n\n\t\t\t}\n\n\t\t\t// load material specific uniforms\n\t\t\t// (shader material also gets them for the sake of genericity)\n\n\t\t\t{\n\n\t\t\t\tvar uCamPos = p_uniforms.map.cameraPosition;\n\n\t\t\t\tif ( uCamPos !== undefined ) {\n\n\t\t\t\t\tuCamPos.setValue( _gl,\n\t\t\t\t\t\t_vector3.setFromMatrixPosition( camera.matrixWorld ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( \n\t\t\t\tmaterial.isMeshBasicMaterial ||\n\t\t\t\tfalse ||\n\t\t\t\ttrue ) {\n\n\t\t\t\tp_uniforms.setValue( _gl, 'isOrthographic', camera.isOrthographicCamera === true );\n\n\t\t\t}\n\n\t\t\tif ( \n\t\t\t\tmaterial.isMeshBasicMaterial ||\n\t\t\t\tfalse ||\n\t\t\t\ttrue ||\n\t\t\t\tmaterial.skinning ) {\n\n\t\t\t\tp_uniforms.setValue( _gl, 'viewMatrix', camera.matrixWorldInverse );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// skinning uniforms must be set even if material didn't change\n\t\t// auto-setting of texture unit for bone texture must go before other textures\n\t\t// otherwise textures used for skinning can take over texture units reserved for other material textures\n\n\t\tif ( material.skinning ) {\n\n\t\t\tp_uniforms.setOptional( _gl, object, 'bindMatrix' );\n\t\t\tp_uniforms.setOptional( _gl, object, 'bindMatrixInverse' );\n\n\t\t\tvar skeleton = object.skeleton;\n\n\t\t\tif ( skeleton ) {\n\n\t\t\t\tvar bones = skeleton.bones;\n\n\t\t\t\tif ( capabilities.floatVertexTextures ) {\n\n\t\t\t\t\tif ( skeleton.boneTexture === undefined ) {\n\n\t\t\t\t\t\t// layout (1 matrix = 4 pixels)\n\t\t\t\t\t\t//      RGBA RGBA RGBA RGBA (=> column1, column2, column3, column4)\n\t\t\t\t\t\t//  with  8x8  pixel texture max   16 bones * 4 pixels =  (8 * 8)\n\t\t\t\t\t\t//       16x16 pixel texture max   64 bones * 4 pixels = (16 * 16)\n\t\t\t\t\t\t//       32x32 pixel texture max  256 bones * 4 pixels = (32 * 32)\n\t\t\t\t\t\t//       64x64 pixel texture max 1024 bones * 4 pixels = (64 * 64)\n\n\n\t\t\t\t\t\tvar size = Math.sqrt( bones.length * 4 ); // 4 pixels needed for 1 matrix\n\t\t\t\t\t\tsize = MathUtils.ceilPowerOfTwo( size );\n\t\t\t\t\t\tsize = Math.max( size, 4 );\n\n\t\t\t\t\t\tvar boneMatrices = new Float32Array( size * size * 4 ); // 4 floats per RGBA pixel\n\t\t\t\t\t\tboneMatrices.set( skeleton.boneMatrices ); // copy current values\n\n\t\t\t\t\t\tvar boneTexture = new DataTexture( boneMatrices, size, size, RGBAFormat, FloatType );\n\n\t\t\t\t\t\tskeleton.boneMatrices = boneMatrices;\n\t\t\t\t\t\tskeleton.boneTexture = boneTexture;\n\t\t\t\t\t\tskeleton.boneTextureSize = size;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tp_uniforms.setValue( _gl, 'boneTexture', skeleton.boneTexture, textures );\n\t\t\t\t\tp_uniforms.setValue( _gl, 'boneTextureSize', skeleton.boneTextureSize );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tp_uniforms.setOptional( _gl, skeleton, 'boneMatrices' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( refreshMaterial || materialProperties.receiveShadow !== object.receiveShadow ) {\n\n\t\t\tmaterialProperties.receiveShadow = object.receiveShadow;\n\t\t\tp_uniforms.setValue( _gl, 'receiveShadow', object.receiveShadow );\n\n\t\t}\n\n\t\tif ( refreshMaterial ) {\n\n\t\t\tp_uniforms.setValue( _gl, 'toneMappingExposure', _this.toneMappingExposure );\n\t\t\tp_uniforms.setValue( _gl, 'toneMappingWhitePoint', _this.toneMappingWhitePoint );\n\n\t\t\tif ( materialProperties.needsLights ) {\n\n\t\t\t\t// the current material requires lighting info\n\n\t\t\t\t// note: all lighting uniforms are always set correctly\n\t\t\t\t// they simply reference the renderer's state for their\n\t\t\t\t// values\n\t\t\t\t//\n\t\t\t\t// use the current material's .needsUpdate flags to set\n\t\t\t\t// the GL state when required\n\n\t\t\t\tmarkUniformsLightsNeedsUpdate( m_uniforms, refreshLights );\n\n\t\t\t}\n\n\t\t\t// refresh uniforms common to several materials\n\n\t\t\tif ( fog && material.fog ) {\n\n\t\t\t\trefreshUniformsFog( m_uniforms, fog );\n\n\t\t\t}\n\n\t\t\tif ( material.isMeshBasicMaterial ) {\n\n\t\t\t\trefreshUniformsCommon( m_uniforms, material );\n\n\t\t\t} else if ( material.isMeshMatcapMaterial ) {\n\n\t\t\t\trefreshUniformsCommon( m_uniforms, material );\n\t\t\t\trefreshUniformsMatcap( m_uniforms, material );\n\n\t\t\t} else if ( material.isMeshDepthMaterial ) {\n\n\t\t\t\trefreshUniformsCommon( m_uniforms, material );\n\t\t\t\trefreshUniformsDepth( m_uniforms, material );\n\n\t\t\t} else if ( material.isMeshNormalMaterial ) {\n\n\t\t\t\trefreshUniformsCommon( m_uniforms, material );\n\t\t\t\trefreshUniformsNormal( m_uniforms, material );\n\n\t\t\t} else if ( material.isLineBasicMaterial ) {\n\n\t\t\t\trefreshUniformsLine( m_uniforms, material );\n\n\t\t\t\tif ( material.isLineDashedMaterial ) {\n\n\t\t\t\t\trefreshUniformsDash( m_uniforms, material );\n\n\t\t\t\t}\n\n\t\t\t} else if ( material.isPointsMaterial ) {\n\n\t\t\t\trefreshUniformsPoints( m_uniforms, material );\n\n\t\t\t} else if ( material.isSpriteMaterial ) {\n\n\t\t\t\trefreshUniformsSprites( m_uniforms, material );\n\n\t\t\t} else if ( material.isShadowMaterial ) {\n\n\t\t\t\tm_uniforms.color.value.copy( material.color );\n\t\t\t\tm_uniforms.opacity.value = material.opacity;\n\n\t\t\t}\n\n\t\t\t// RectAreaLight Texture\n\t\t\t// TODO (mrdoob): Find a nicer implementation\n\n\t\t\tif ( m_uniforms.ltc_1 !== undefined ) m_uniforms.ltc_1.value = UniformsLib.LTC_1;\n\t\t\tif ( m_uniforms.ltc_2 !== undefined ) m_uniforms.ltc_2.value = UniformsLib.LTC_2;\n\n\t\t\tWebGLUniforms.upload( _gl, materialProperties.uniformsList, m_uniforms, textures );\n\n\t\t\t{\n\n\t\t\t\tmaterial.uniformsNeedUpdate = false; // #15581\n\n\t\t\t}\n\n\t\t}\n\n\t\tif (  material.uniformsNeedUpdate === true ) {\n\n\t\t\tWebGLUniforms.upload( _gl, materialProperties.uniformsList, m_uniforms, textures );\n\t\t\tmaterial.uniformsNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( material.isSpriteMaterial ) {\n\n\t\t\tp_uniforms.setValue( _gl, 'center', object.center );\n\n\t\t}\n\n\t\t// common matrices\n\n\t\tp_uniforms.setValue( _gl, 'modelViewMatrix', object.modelViewMatrix );\n\t\tp_uniforms.setValue( _gl, 'normalMatrix', object.normalMatrix );\n\t\tp_uniforms.setValue( _gl, 'modelMatrix', object.matrixWorld );\n\n\t\treturn program;\n\n\t}\n\n\t// Uniforms (refresh uniforms objects)\n\n\tfunction refreshUniformsCommon( uniforms, material, environment ) {\n\n\t\tuniforms.opacity.value = material.opacity;\n\n\t\tif ( material.color ) {\n\n\t\t\tuniforms.diffuse.value.copy( material.color );\n\n\t\t}\n\n\t\tif ( material.emissive ) {\n\n\t\t\tuniforms.emissive.value.copy( material.emissive ).multiplyScalar( material.emissiveIntensity );\n\n\t\t}\n\n\t\tif ( material.map ) {\n\n\t\t\tuniforms.map.value = material.map;\n\n\t\t}\n\n\t\tif ( material.alphaMap ) {\n\n\t\t\tuniforms.alphaMap.value = material.alphaMap;\n\n\t\t}\n\n\t\tif ( material.specularMap ) {\n\n\t\t\tuniforms.specularMap.value = material.specularMap;\n\n\t\t}\n\n\t\tvar envMap =  environment;\n\n\t\tif ( envMap ) {\n\n\t\t\tfalse.value = envMap;\n\n\t\t\tuniforms.flipEnvMap.value =  1;\n\n\t\t\tuniforms.reflectivity.value = material.reflectivity;\n\t\t\tuniforms.refractionRatio.value = material.refractionRatio;\n\n\t\t\tuniforms.maxMipLevel.value = properties.get( envMap ).__maxMipLevel;\n\n\t\t}\n\n\t\tif ( material.lightMap ) {\n\n\t\t\tuniforms.lightMap.value = material.lightMap;\n\t\t\tuniforms.lightMapIntensity.value = material.lightMapIntensity;\n\n\t\t}\n\n\t\tif ( material.aoMap ) {\n\n\t\t\tuniforms.aoMap.value = material.aoMap;\n\t\t\tuniforms.aoMapIntensity.value = material.aoMapIntensity;\n\n\t\t}\n\n\t\t// uv repeat and offset setting priorities\n\t\t// 1. color map\n\t\t// 2. specular map\n\t\t// 3. normal map\n\t\t// 4. bump map\n\t\t// 5. alpha map\n\t\t// 6. emissive map\n\n\t\tvar uvScaleMap;\n\n\t\tif ( material.map ) {\n\n\t\t\tuvScaleMap = material.map;\n\n\t\t} else if ( material.specularMap ) {\n\n\t\t\tuvScaleMap = material.specularMap;\n\n\t\t} else if ( material.displacementMap ) {\n\n\t\t\tuvScaleMap = material.displacementMap;\n\n\t\t} else if ( material.normalMap ) {\n\n\t\t\tuvScaleMap = material.normalMap;\n\n\t\t} else if ( material.bumpMap ) {\n\n\t\t\tuvScaleMap = material.bumpMap;\n\n\t\t} else if ( material.roughnessMap ) {\n\n\t\t\tuvScaleMap = material.roughnessMap;\n\n\t\t} else if ( material.metalnessMap ) {\n\n\t\t\tuvScaleMap = material.metalnessMap;\n\n\t\t} else if ( material.alphaMap ) {\n\n\t\t\tuvScaleMap = material.alphaMap;\n\n\t\t} else if ( material.emissiveMap ) {\n\n\t\t\tuvScaleMap = material.emissiveMap;\n\n\t\t}\n\n\t\tif ( uvScaleMap !== undefined ) {\n\n\t\t\t// backwards compatibility\n\t\t\tif ( uvScaleMap.isWebGLRenderTarget ) {\n\n\t\t\t\tuvScaleMap = uvScaleMap.texture;\n\n\t\t\t}\n\n\t\t\tif ( uvScaleMap.matrixAutoUpdate === true ) {\n\n\t\t\t\tuvScaleMap.updateMatrix();\n\n\t\t\t}\n\n\t\t\tuniforms.uvTransform.value.copy( uvScaleMap.matrix );\n\n\t\t}\n\n\t\t// uv repeat and offset setting priorities for uv2\n\t\t// 1. ao map\n\t\t// 2. light map\n\n\t\tvar uv2ScaleMap;\n\n\t\tif ( material.aoMap ) {\n\n\t\t\tuv2ScaleMap = material.aoMap;\n\n\t\t} else if ( material.lightMap ) {\n\n\t\t\tuv2ScaleMap = material.lightMap;\n\n\t\t}\n\n\t\tif ( uv2ScaleMap !== undefined ) {\n\n\t\t\t// backwards compatibility\n\t\t\tif ( uv2ScaleMap.isWebGLRenderTarget ) {\n\n\t\t\t\tuv2ScaleMap = uv2ScaleMap.texture;\n\n\t\t\t}\n\n\t\t\tif ( uv2ScaleMap.matrixAutoUpdate === true ) {\n\n\t\t\t\tuv2ScaleMap.updateMatrix();\n\n\t\t\t}\n\n\t\t\tuniforms.uv2Transform.value.copy( uv2ScaleMap.matrix );\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsLine( uniforms, material ) {\n\n\t\tuniforms.diffuse.value.copy( material.color );\n\t\tuniforms.opacity.value = material.opacity;\n\n\t}\n\n\tfunction refreshUniformsDash( uniforms, material ) {\n\n\t\tuniforms.dashSize.value = material.dashSize;\n\t\tuniforms.totalSize.value = material.dashSize + material.gapSize;\n\t\tuniforms.scale.value = material.scale;\n\n\t}\n\n\tfunction refreshUniformsPoints( uniforms, material ) {\n\n\t\tuniforms.diffuse.value.copy( material.color );\n\t\tuniforms.opacity.value = material.opacity;\n\t\tuniforms.size.value = material.size * _pixelRatio;\n\t\tuniforms.scale.value = _height * 0.5;\n\n\t\tif ( material.map ) {\n\n\t\t\tuniforms.map.value = material.map;\n\n\t\t}\n\n\t\tif ( material.alphaMap ) {\n\n\t\t\tuniforms.alphaMap.value = material.alphaMap;\n\n\t\t}\n\n\t\t// uv repeat and offset setting priorities\n\t\t// 1. color map\n\t\t// 2. alpha map\n\n\t\tvar uvScaleMap;\n\n\t\tif ( material.map ) {\n\n\t\t\tuvScaleMap = material.map;\n\n\t\t} else if ( material.alphaMap ) {\n\n\t\t\tuvScaleMap = material.alphaMap;\n\n\t\t}\n\n\t\tif ( uvScaleMap !== undefined ) {\n\n\t\t\tif ( uvScaleMap.matrixAutoUpdate === true ) {\n\n\t\t\t\tuvScaleMap.updateMatrix();\n\n\t\t\t}\n\n\t\t\tuniforms.uvTransform.value.copy( uvScaleMap.matrix );\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsSprites( uniforms, material ) {\n\n\t\tuniforms.diffuse.value.copy( material.color );\n\t\tuniforms.opacity.value = material.opacity;\n\t\tuniforms.rotation.value = material.rotation;\n\n\t\tif ( material.map ) {\n\n\t\t\tuniforms.map.value = material.map;\n\n\t\t}\n\n\t\tif ( material.alphaMap ) {\n\n\t\t\tuniforms.alphaMap.value = material.alphaMap;\n\n\t\t}\n\n\t\t// uv repeat and offset setting priorities\n\t\t// 1. color map\n\t\t// 2. alpha map\n\n\t\tvar uvScaleMap;\n\n\t\tif ( material.map ) {\n\n\t\t\tuvScaleMap = material.map;\n\n\t\t} else if ( material.alphaMap ) {\n\n\t\t\tuvScaleMap = material.alphaMap;\n\n\t\t}\n\n\t\tif ( uvScaleMap !== undefined ) {\n\n\t\t\tif ( uvScaleMap.matrixAutoUpdate === true ) {\n\n\t\t\t\tuvScaleMap.updateMatrix();\n\n\t\t\t}\n\n\t\t\tuniforms.uvTransform.value.copy( uvScaleMap.matrix );\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsFog( uniforms, fog ) {\n\n\t\tuniforms.fogColor.value.copy( fog.color );\n\n\t\tif ( fog.isFog ) {\n\n\t\t\tuniforms.fogNear.value = fog.near;\n\t\t\tuniforms.fogFar.value = fog.far;\n\n\t\t} else if ( fog.isFogExp2 ) {\n\n\t\t\tuniforms.fogDensity.value = fog.density;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsMatcap( uniforms, material ) {\n\n\t\tif ( material.matcap ) {\n\n\t\t\tuniforms.matcap.value = material.matcap;\n\n\t\t}\n\n\t\tif ( material.bumpMap ) {\n\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\t\t\tif ( material.side === BackSide ) uniforms.bumpScale.value *= - 1;\n\n\t\t}\n\n\t\tif ( material.normalMap ) {\n\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\n\t\t\tif ( material.side === BackSide ) uniforms.normalScale.value.negate();\n\n\t\t}\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsDepth( uniforms, material ) {\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsNormal( uniforms, material ) {\n\n\t\tif ( material.bumpMap ) {\n\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\t\t\tif ( material.side === BackSide ) uniforms.bumpScale.value *= - 1;\n\n\t\t}\n\n\t\tif ( material.normalMap ) {\n\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\n\t\t\tif ( material.side === BackSide ) uniforms.normalScale.value.negate();\n\n\t\t}\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t}\n\n\t// If uniforms are marked as clean, they don't need to be loaded to the GPU.\n\n\tfunction markUniformsLightsNeedsUpdate( uniforms, value ) {\n\n\t\tuniforms.ambientLightColor.needsUpdate = value;\n\t\tuniforms.lightProbe.needsUpdate = value;\n\n\t\tuniforms.directionalLights.needsUpdate = value;\n\t\tuniforms.directionalLightShadows.needsUpdate = value;\n\t\tuniforms.pointLights.needsUpdate = value;\n\t\tuniforms.pointLightShadows.needsUpdate = value;\n\t\tuniforms.spotLights.needsUpdate = value;\n\t\tuniforms.spotLightShadows.needsUpdate = value;\n\t\tuniforms.rectAreaLights.needsUpdate = value;\n\t\tuniforms.hemisphereLights.needsUpdate = value;\n\n\t}\n\n\tfunction materialNeedsLights( material ) {\n\n\t\treturn  material.isShadowMaterial ||\n\t\t\t(  material.lights === true );\n\n\t}\n\n\t//\n\tthis.setFramebuffer = function ( value ) {\n\n\t\tif ( _framebuffer !== value && _currentRenderTarget === null ) _gl.bindFramebuffer( 36160, value );\n\n\t\t_framebuffer = value;\n\n\t};\n\n\tthis.getActiveCubeFace = function () {\n\n\t\treturn _currentActiveCubeFace;\n\n\t};\n\n\tthis.getActiveMipmapLevel = function () {\n\n\t\treturn _currentActiveMipmapLevel;\n\n\t};\n\n\tthis.getRenderTarget = function () {\n\n\t\treturn _currentRenderTarget;\n\n\t};\n\n\tthis.setRenderTarget = function ( renderTarget, activeCubeFace, activeMipmapLevel ) {\n\n\t\t_currentRenderTarget = renderTarget;\n\t\t_currentActiveCubeFace = activeCubeFace;\n\t\t_currentActiveMipmapLevel = activeMipmapLevel;\n\n\t\tif ( renderTarget && properties.get( renderTarget ).__webglFramebuffer === undefined ) {\n\n\t\t\ttextures.setupRenderTarget( renderTarget );\n\n\t\t}\n\n\t\tvar framebuffer = _framebuffer;\n\n\t\tif ( renderTarget ) {\n\n\t\t\tvar __webglFramebuffer = properties.get( renderTarget ).__webglFramebuffer;\n\n\t\t\tif ( renderTarget.isWebGLMultisampleRenderTarget ) {\n\n\t\t\t\tframebuffer = properties.get( renderTarget ).__webglMultisampledFramebuffer;\n\n\t\t\t} else {\n\n\t\t\t\tframebuffer = __webglFramebuffer;\n\n\t\t\t}\n\n\t\t\t_currentViewport.copy( renderTarget.viewport );\n\t\t\t_currentScissor.copy( renderTarget.scissor );\n\t\t\t_currentScissorTest = renderTarget.scissorTest;\n\n\t\t} else {\n\n\t\t\t_currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio ).floor();\n\t\t\t_currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio ).floor();\n\t\t\t_currentScissorTest = _scissorTest;\n\n\t\t}\n\n\t\tif ( _currentFramebuffer !== framebuffer ) {\n\n\t\t\t_gl.bindFramebuffer( 36160, framebuffer );\n\t\t\t_currentFramebuffer = framebuffer;\n\n\t\t}\n\n\t\tstate.viewport( _currentViewport );\n\t\tstate.scissor( _currentScissor );\n\t\tstate.setScissorTest( _currentScissorTest );\n\n\t};\n\n\tthis.readRenderTargetPixels = function ( renderTarget, x, y, width, height, buffer, activeCubeFaceIndex ) {\n\n\t\tif ( ! ( renderTarget && renderTarget.isWebGLRenderTarget ) ) {\n\n\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar framebuffer = properties.get( renderTarget ).__webglFramebuffer;\n\n\t\tif ( framebuffer ) {\n\n\t\t\tvar restore = false;\n\n\t\t\tif ( framebuffer !== _currentFramebuffer ) {\n\n\t\t\t\t_gl.bindFramebuffer( 36160, framebuffer );\n\n\t\t\t\trestore = true;\n\n\t\t\t}\n\n\t\t\ttry {\n\n\t\t\t\tvar texture = renderTarget.texture;\n\t\t\t\tvar textureFormat = texture.format;\n\t\t\t\tvar textureType = texture.type;\n\n\t\t\t\tif ( textureFormat !== RGBAFormat && utils.convert( textureFormat ) !== _gl.getParameter( 35739 ) ) {\n\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.' );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tif ( textureType !== UnsignedByteType && utils.convert( textureType ) !== _gl.getParameter( 35738 ) && // IE11, Edge and Chrome Mac < 52 (#9513)\n\t\t\t\t\t! ( textureType === FloatType && ( capabilities.isWebGL2 || extensions.get( 'OES_texture_float' ) || extensions.get( 'WEBGL_color_buffer_float' ) ) ) && // Chrome Mac >= 52 and Firefox\n\t\t\t\t\t! ( textureType === HalfFloatType && ( capabilities.isWebGL2 ? extensions.get( 'EXT_color_buffer_float' ) : extensions.get( 'EXT_color_buffer_half_float' ) ) ) ) {\n\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.' );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\t//if ( _gl.checkFramebufferStatus( 36160 ) === 36053 ) {\n\t\t\t\tif (true) {\n\n\t\t\t\t\t// the following if statement ensures valid read requests (no out-of-bounds pixels, see #8604)\n\n\t\t\t\t\tif ( ( x >= 0 && x <= ( renderTarget.width - width ) ) && ( y >= 0 && y <= ( renderTarget.height - height ) ) ) {\n\n\t\t\t\t\t\t_gl.readPixels( x, y, width, height, utils.convert( textureFormat ), utils.convert( textureType ), buffer );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.' );\n\n\t\t\t\t}\n\n\t\t\t} finally {\n\n\t\t\t\tif ( restore ) {\n\n\t\t\t\t\t_gl.bindFramebuffer( 36160, _currentFramebuffer );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tthis.copyFramebufferToTexture = function ( position, texture, level ) {\n\n\t\tif ( level === undefined ) level = 0;\n\n\t\tvar levelScale = Math.pow( 2, - level );\n\t\tvar width = Math.floor( texture.image.width * levelScale );\n\t\tvar height = Math.floor( texture.image.height * levelScale );\n\t\tvar glFormat = utils.convert( texture.format );\n\n\t\ttextures.setTexture2D( texture, 0 );\n\n\t\t_gl.copyTexImage2D( 3553, level, glFormat, position.x, position.y, width, height, 0 );\n\n\t\tstate.unbindTexture();\n\n\t};\n\n\tthis.copyTextureToTexture = function ( position, srcTexture, dstTexture, level ) {\n\n\t\tvar width = srcTexture.image.width;\n\t\tvar height = srcTexture.image.height;\n\t\tvar glFormat = utils.convert( dstTexture.format );\n\t\tvar glType = utils.convert( dstTexture.type );\n\n\t\ttextures.setTexture2D( dstTexture, 0 );\n\n\t\t_gl.pixelStorei( 37440, dstTexture.flipY );\n\t\t_gl.pixelStorei( 37441, dstTexture.premultiplyAlpha );\n\t\t_gl.pixelStorei( 3317, dstTexture.unpackAlignment );\n\t\tif ( srcTexture.isDataTexture ) {\n\n\t\t\t_gl.texSubImage2D( 3553, level || 0, position.x, position.y, width, height, glFormat, glType, srcTexture.image.data );\n\n\t\t} else {\n\n\t\t\t_gl.texSubImage2D( 3553, level || 0, position.x, position.y, glFormat, glType, srcTexture.image );\n\n\t\t}\n\n\t\tstate.unbindTexture();\n\n\t};\n\n\tthis.initTexture = function ( texture ) {\n\n\t\ttextures.setTexture2D( texture, 0 );\n\n\t\tstate.unbindTexture();\n\n\t};\n\n\tif ( typeof __THREE_DEVTOOLS__ !== 'undefined' ) {\n\n\t\t__THREE_DEVTOOLS__.dispatchEvent( new CustomEvent( 'observe', { detail: this } ) ); // eslint-disable-line no-undef\n\n\t}\n\n}\n\nfunction FogExp2() {}\nfunction Fog() {}\n\n/**\n * @author benaadams / https://twitter.com/ben_a_adams\n */\n\nfunction InterleavedBuffer( array, stride ) {\n\n\tthis.array = array;\n\tthis.stride = stride;\n\tthis.count = array !== undefined ? array.length / stride : 0;\n\n\tthis.usage = StaticDrawUsage;\n\tthis.updateRange = { offset: 0, count: - 1 };\n\n\tthis.version = 0;\n\n}\n\nObject.defineProperty( InterleavedBuffer.prototype, 'needsUpdate', {\n\n\tset: function ( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n} );\n\nObject.assign( InterleavedBuffer.prototype, {\n\n\tisInterleavedBuffer: true,\n\n\tonUploadCallback: function () {},\n\n\tsetUsage: function ( value ) {\n\n\t\tthis.usage = value;\n\n\t\treturn this;\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.array = new source.array.constructor( source.array );\n\t\tthis.count = source.count;\n\t\tthis.stride = source.stride;\n\t\tthis.usage = source.usage;\n\n\t\treturn this;\n\n\t},\n\n\tcopyAt: function ( index1, attribute, index2 ) {\n\n\t\tindex1 *= this.stride;\n\t\tindex2 *= attribute.stride;\n\n\t\tfor ( var i = 0, l = this.stride; i < l; i ++ ) {\n\n\t\t\tthis.array[ index1 + i ] = attribute.array[ index2 + i ];\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tset: function ( value, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.array.set( value, offset );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tonUpload: function ( callback ) {\n\n\t\tthis.onUploadCallback = callback;\n\n\t\treturn this;\n\n\t}\n\n} );\n\n/**\n * @author benaadams / https://twitter.com/ben_a_adams\n */\n\nvar _vector$6 = new Vector3();\n\nfunction InterleavedBufferAttribute( interleavedBuffer, itemSize, offset, normalized ) {\n\n\tthis.data = interleavedBuffer;\n\tthis.itemSize = itemSize;\n\tthis.offset = offset;\n\n\tthis.normalized = normalized === true;\n\n}\n\nObject.defineProperties( InterleavedBufferAttribute.prototype, {\n\n\tcount: {\n\n\t\tget: function () {\n\n\t\t\treturn this.data.count;\n\n\t\t}\n\n\t},\n\n\tarray: {\n\n\t\tget: function () {\n\n\t\t\treturn this.data.array;\n\n\t\t}\n\n\t}\n\n} );\n\nObject.assign( InterleavedBufferAttribute.prototype, {\n\n\tisInterleavedBufferAttribute: true,\n\n\tapplyMatrix4: function ( m ) {\n\n\t\tfor ( var i = 0, l = this.data.count; i < l; i ++ ) {\n\n\t\t\t_vector$6.x = this.getX( i );\n\t\t\t_vector$6.y = this.getY( i );\n\t\t\t_vector$6.z = this.getZ( i );\n\n\t\t\t_vector$6.applyMatrix4( m );\n\n\t\t\tthis.setXYZ( i, _vector$6.x, _vector$6.y, _vector$6.z );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetX: function ( index, x ) {\n\n\t\tthis.data.array[ index * this.data.stride + this.offset ] = x;\n\n\t\treturn this;\n\n\t},\n\n\tsetY: function ( index, y ) {\n\n\t\tthis.data.array[ index * this.data.stride + this.offset + 1 ] = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetZ: function ( index, z ) {\n\n\t\tthis.data.array[ index * this.data.stride + this.offset + 2 ] = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetW: function ( index, w ) {\n\n\t\tthis.data.array[ index * this.data.stride + this.offset + 3 ] = w;\n\n\t\treturn this;\n\n\t},\n\n\tgetX: function ( index ) {\n\n\t\treturn this.data.array[ index * this.data.stride + this.offset ];\n\n\t},\n\n\tgetY: function ( index ) {\n\n\t\treturn this.data.array[ index * this.data.stride + this.offset + 1 ];\n\n\t},\n\n\tgetZ: function ( index ) {\n\n\t\treturn this.data.array[ index * this.data.stride + this.offset + 2 ];\n\n\t},\n\n\tgetW: function ( index ) {\n\n\t\treturn this.data.array[ index * this.data.stride + this.offset + 3 ];\n\n\t},\n\n\tsetXY: function ( index, x, y ) {\n\n\t\tindex = index * this.data.stride + this.offset;\n\n\t\tthis.data.array[ index + 0 ] = x;\n\t\tthis.data.array[ index + 1 ] = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetXYZ: function ( index, x, y, z ) {\n\n\t\tindex = index * this.data.stride + this.offset;\n\n\t\tthis.data.array[ index + 0 ] = x;\n\t\tthis.data.array[ index + 1 ] = y;\n\t\tthis.data.array[ index + 2 ] = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetXYZW: function ( index, x, y, z, w ) {\n\n\t\tindex = index * this.data.stride + this.offset;\n\n\t\tthis.data.array[ index + 0 ] = x;\n\t\tthis.data.array[ index + 1 ] = y;\n\t\tthis.data.array[ index + 2 ] = z;\n\t\tthis.data.array[ index + 3 ] = w;\n\n\t\treturn this;\n\n\t}\n\n} );\n\nfunction SpriteMaterial() {}\nvar _viewWorldMatrix = new Matrix4();\n\nfunction Sprite() {}\n\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n */\n\nvar _v1$4 = new Vector3();\nvar _v2$2 = new Vector3();\n\nfunction LOD() {\n\n\tObject3D.call( this );\n\n\tthis._currentLevel = 0;\n\n\tthis.type = 'LOD';\n\n\tObject.defineProperties( this, {\n\t\tlevels: {\n\t\t\tenumerable: true,\n\t\t\tvalue: []\n\t\t}\n\t} );\n\n\tthis.autoUpdate = true;\n\n}\n\nLOD.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: LOD,\n\n\tisLOD: true,\n\n\tcopy: function ( source ) {\n\n\t\tObject3D.prototype.copy.call( this, source, false );\n\n\t\tvar levels = source.levels;\n\n\t\tfor ( var i = 0, l = levels.length; i < l; i ++ ) {\n\n\t\t\tvar level = levels[ i ];\n\n\t\t\tthis.addLevel( level.object.clone(), level.distance );\n\n\t\t}\n\n\t\tthis.autoUpdate = source.autoUpdate;\n\n\t\treturn this;\n\n\t},\n\n\taddLevel: function ( object, distance ) {\n\n\t\tif ( distance === undefined ) distance = 0;\n\n\t\tdistance = Math.abs( distance );\n\n\t\tvar levels = this.levels;\n\n\t\tfor ( var l = 0; l < levels.length; l ++ ) {\n\n\t\t\tif ( distance < levels[ l ].distance ) {\n\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tlevels.splice( l, 0, { distance: distance, object: object } );\n\n\t\tthis.add( object );\n\n\t\treturn this;\n\n\t},\n\n\tgetCurrentLevel: function () {\n\n\t\treturn this._currentLevel;\n\n\t},\n\n\tgetObjectForDistance: function ( distance ) {\n\n\t\tvar levels = this.levels;\n\n\t\tif ( levels.length > 0 ) {\n\n\t\t\tfor ( var i = 1, l = levels.length; i < l; i ++ ) {\n\n\t\t\t\tif ( distance < levels[ i ].distance ) {\n\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn levels[ i - 1 ].object;\n\n\t\t}\n\n\t\treturn null;\n\n\t},\n\n\traycast: function ( raycaster, intersects ) {\n\n\t\tvar levels = this.levels;\n\n\t\tif ( levels.length > 0 ) {\n\n\t\t\t_v1$4.setFromMatrixPosition( this.matrixWorld );\n\n\t\t\tvar distance = raycaster.ray.origin.distanceTo( _v1$4 );\n\n\t\t\tthis.getObjectForDistance( distance ).raycast( raycaster, intersects );\n\n\t\t}\n\n\t},\n\n\tupdate: function ( camera ) {\n\n\t\tvar levels = this.levels;\n\n\t\tif ( levels.length > 1 ) {\n\n\t\t\t_v1$4.setFromMatrixPosition( camera.matrixWorld );\n\t\t\t_v2$2.setFromMatrixPosition( this.matrixWorld );\n\n\t\t\tvar distance = _v1$4.distanceTo( _v2$2 ) / camera.zoom;\n\n\t\t\tlevels[ 0 ].object.visible = true;\n\n\t\t\tfor ( var i = 1, l = levels.length; i < l; i ++ ) {\n\n\t\t\t\tif ( distance >= levels[ i ].distance ) {\n\n\t\t\t\t\tlevels[ i - 1 ].object.visible = false;\n\t\t\t\t\tlevels[ i ].object.visible = true;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis._currentLevel = i - 1;\n\n\t\t\tfor ( ; i < l; i ++ ) {\n\n\t\t\t\tlevels[ i ].object.visible = false;\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tvar data = Object3D.prototype.toJSON.call( this, meta );\n\n\t\tif ( this.autoUpdate === false ) data.object.autoUpdate = false;\n\n\t\tdata.object.levels = [];\n\n\t\tvar levels = this.levels;\n\n\t\tfor ( var i = 0, l = levels.length; i < l; i ++ ) {\n\n\t\t\tvar level = levels[ i ];\n\n\t\t\tdata.object.levels.push( {\n\t\t\t\tobject: level.object.uuid,\n\t\t\t\tdistance: level.distance\n\t\t\t} );\n\n\t\t}\n\n\t\treturn data;\n\n\t}\n\n} );\n\nfunction SkinnedMesh() {}\n\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n * @author michael guerrero / http://realitymeltdown.com\n * @author ikerr / http://verold.com\n */\n\nvar _offsetMatrix = new Matrix4();\nvar _identityMatrix = new Matrix4();\n\nfunction Skeleton() {}\nfunction Bone() {}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nvar _instanceLocalMatrix = new Matrix4();\nvar _instanceWorldMatrix = new Matrix4();\n\nvar _mesh = new Mesh();\n\nfunction InstancedMesh() {}\nfunction LineBasicMaterial() {}\nvar _inverseMatrix$1 = new Matrix4();\n\nfunction Line() {}\n\nfunction LineSegments() {}\nfunction LineLoop() {}\nfunction PointsMaterial() {}\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nvar _inverseMatrix$2 = new Matrix4();\n\nfunction Points() {}\n\nfunction VideoTexture() {}\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction CompressedTexture( mipmaps, width, height, format, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy, encoding ) {\n\n\tTexture.call( this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding );\n\n\tthis.image = { width: width, height: height };\n\tthis.mipmaps = mipmaps;\n\n\t// no flipping for cube textures\n\t// (also flipping doesn't work for compressed textures )\n\n\tthis.flipY = false;\n\n\t// can't generate mipmaps for compressed textures\n\t// mips must be embedded in DDS files\n\n\tthis.generateMipmaps = false;\n\n}\n\nCompressedTexture.prototype = Object.create( Texture.prototype );\nCompressedTexture.prototype.constructor = CompressedTexture;\n\nCompressedTexture.prototype.isCompressedTexture = true;\n\nfunction CanvasTexture() {}\n\n/**\n * @author Matt DesLauriers / @mattdesl\n * @author atix / arthursilber.de\n */\n\nfunction DepthTexture( width, height, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy, format ) {\n\n\tformat = format !== undefined ? format : DepthFormat;\n\n\tif ( format !== DepthFormat && format !== DepthStencilFormat ) {\n\n\t\tthrow new Error( 'DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat' );\n\n\t}\n\n\tif ( type === undefined && format === DepthFormat ) type = UnsignedShortType;\n\tif ( type === undefined && format === DepthStencilFormat ) type = UnsignedInt248Type;\n\n\tTexture.call( this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\n\n\tthis.image = { width: width, height: height };\n\n\tthis.magFilter = magFilter !== undefined ? magFilter : NearestFilter;\n\tthis.minFilter = minFilter !== undefined ? minFilter : NearestFilter;\n\n\tthis.flipY = false;\n\tthis.generateMipmaps\t= false;\n\n}\n\nDepthTexture.prototype = Object.create( Texture.prototype );\nDepthTexture.prototype.constructor = DepthTexture;\nDepthTexture.prototype.isDepthTexture = true;\n\nfunction WireframeGeometry() {}\nfunction ParametricGeometry() {}\nfunction ParametricBufferGeometry() {}\nfunction PolyhedronGeometry() {}\nfunction PolyhedronBufferGeometry() {}\nfunction TetrahedronGeometry() {}\nfunction TetrahedronBufferGeometry() {}\nfunction OctahedronGeometry() {}\nfunction OctahedronBufferGeometry() {}\nfunction IcosahedronGeometry() {}\nfunction IcosahedronBufferGeometry() {}\nfunction DodecahedronGeometry() {}\nfunction DodecahedronBufferGeometry() {}\nfunction TubeGeometry() {}\nfunction TubeBufferGeometry() {}\nfunction TorusKnotGeometry() {}\nfunction TorusKnotBufferGeometry() {}\nfunction TorusGeometry() {}\nfunction TorusBufferGeometry() {}\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n */\n\nvar ShapeUtils = {\n\n\t// calculate area of the contour polygon\n\n\tarea: function ( contour ) {\n\n\t\tvar n = contour.length;\n\t\tvar a = 0.0;\n\n\t\tfor ( var p = n - 1, q = 0; q < n; p = q ++ ) {\n\n\t\t\ta += contour[ p ].x * contour[ q ].y - contour[ q ].x * contour[ p ].y;\n\n\t\t}\n\n\t\treturn a * 0.5;\n\n\t},\n\n\tisClockWise: function ( pts ) {\n\n\t\treturn ShapeUtils.area( pts ) < 0;\n\n\t},\n\n\ttriangulateShape: \"\"\n\n};\n\nfunction ExtrudeGeometry() {}\nfunction ExtrudeBufferGeometry() {}\n\nfunction TextGeometry() {}\nfunction TextBufferGeometry() {}\nfunction SphereGeometry() {}\n\n// SphereBufferGeometry\n\nfunction SphereBufferGeometry( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'SphereBufferGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\twidthSegments: widthSegments,\n\t\theightSegments: heightSegments,\n\t\tphiStart: phiStart,\n\t\tphiLength: phiLength,\n\t\tthetaStart: thetaStart,\n\t\tthetaLength: thetaLength\n\t};\n\n\tradius = radius || 1;\n\n\twidthSegments = Math.max( 3, Math.floor( widthSegments ) || 8 );\n\theightSegments = Math.max( 2, Math.floor( heightSegments ) || 6 );\n\n\tphiStart = phiStart !== undefined ? phiStart : 0;\n\tphiLength = phiLength !== undefined ? phiLength : Math.PI * 2;\n\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\n\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI;\n\n\tvar thetaEnd = Math.min( thetaStart + thetaLength, Math.PI );\n\n\tvar ix, iy;\n\n\tvar index = 0;\n\tvar grid = [];\n\n\tvar vertex = new Vector3();\n\tvar normal = new Vector3();\n\n\t// buffers\n\n\tvar indices = [];\n\tvar vertices = [];\n\tvar normals = [];\n\tvar uvs = [];\n\n\t// generate vertices, normals and uvs\n\n\tfor ( iy = 0; iy <= heightSegments; iy ++ ) {\n\n\t\tvar verticesRow = [];\n\n\t\tvar v = iy / heightSegments;\n\n\t\t// special case for the poles\n\n\t\tvar uOffset = 0;\n\n\t\tif ( iy == 0 && thetaStart == 0 ) {\n\n\t\t\tuOffset = 0.5 / widthSegments;\n\n\t\t} else if ( iy == heightSegments && thetaEnd == Math.PI ) {\n\n\t\t\tuOffset = - 0.5 / widthSegments;\n\n\t\t}\n\n\t\tfor ( ix = 0; ix <= widthSegments; ix ++ ) {\n\n\t\t\tvar u = ix / widthSegments;\n\n\t\t\t// vertex\n\n\t\t\tvertex.x = - radius * Math.cos( phiStart + u * phiLength ) * Math.sin( thetaStart + v * thetaLength );\n\t\t\tvertex.y = radius * Math.cos( thetaStart + v * thetaLength );\n\t\t\tvertex.z = radius * Math.sin( phiStart + u * phiLength ) * Math.sin( thetaStart + v * thetaLength );\n\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t// normal\n\n\t\t\tnormal.copy( vertex ).normalize();\n\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t// uv\n\n\t\t\tuvs.push( u + uOffset, 1 - v );\n\n\t\t\tverticesRow.push( index ++ );\n\n\t\t}\n\n\t\tgrid.push( verticesRow );\n\n\t}\n\n\t// indices\n\n\tfor ( iy = 0; iy < heightSegments; iy ++ ) {\n\n\t\tfor ( ix = 0; ix < widthSegments; ix ++ ) {\n\n\t\t\tvar a = grid[ iy ][ ix + 1 ];\n\t\t\tvar b = grid[ iy ][ ix ];\n\t\t\tvar c = grid[ iy + 1 ][ ix ];\n\t\t\tvar d = grid[ iy + 1 ][ ix + 1 ];\n\n\t\t\tif ( iy !== 0 || thetaStart > 0 ) indices.push( a, b, d );\n\t\t\tif ( iy !== heightSegments - 1 || thetaEnd < Math.PI ) indices.push( b, c, d );\n\n\t\t}\n\n\t}\n\n\t// build geometry\n\n\tthis.setIndex( indices );\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n}\n\nSphereBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\nSphereBufferGeometry.prototype.constructor = SphereBufferGeometry;\n\nfunction RingGeometry() {}\nfunction RingBufferGeometry() {}\nfunction LatheGeometry() {}\nfunction LatheBufferGeometry() {}\nfunction ShapeGeometry() {}\nfunction ShapeBufferGeometry() {}\n\nfunction EdgesGeometry() {}\nfunction CylinderGeometry() {}\nfunction CylinderBufferGeometry() {}\nfunction ConeGeometry() {}\nfunction ConeBufferGeometry() {}\nfunction CircleGeometry() {}\nfunction CircleBufferGeometry() {}\n\nfunction ShadowMaterial() {}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction RawShaderMaterial( parameters ) {\n\n\tShaderMaterial.call( this, parameters );\n\n\tthis.type = 'RawShaderMaterial';\n\n}\n\nRawShaderMaterial.prototype = Object.create( ShaderMaterial.prototype );\nRawShaderMaterial.prototype.constructor = RawShaderMaterial;\n\nRawShaderMaterial.prototype.isRawShaderMaterial = true;\n\nfunction MeshStandardMaterial() {}\nfunction MeshPhysicalMaterial() {}\nfunction MeshPhongMaterial() {}\nfunction MeshToonMaterial() {}\nfunction MeshNormalMaterial() {}\nfunction MeshLambertMaterial() {}\n\n/**\n * @author WestLangley / http://github.com/WestLangley\n *\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *\n *  matcap: new THREE.Texture( <Image> ),\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  bumpMap: new THREE.Texture( <Image> ),\n *  bumpScale: <float>,\n *\n *  normalMap: new THREE.Texture( <Image> ),\n *  normalMapType: THREE.TangentSpaceNormalMap,\n *  normalScale: <Vector2>,\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>,\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\n\nfunction MeshMatcapMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.defines = { 'MATCAP': '' };\n\n\tthis.type = 'MeshMatcapMaterial';\n\n\tthis.color = new Color( 0xffffff ); // diffuse\n\n\tthis.matcap = null;\n\n\tthis.map = null;\n\n\tthis.bumpMap = null;\n\tthis.bumpScale = 1;\n\n\tthis.normalMap = null;\n\tthis.normalMapType = TangentSpaceNormalMap;\n\tthis.normalScale = new Vector2( 1, 1 );\n\n\tthis.displacementMap = null;\n\tthis.displacementScale = 1;\n\tthis.displacementBias = 0;\n\n\tthis.alphaMap = null;\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\tthis.morphNormals = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshMatcapMaterial.prototype = Object.create( Material.prototype );\nMeshMatcapMaterial.prototype.constructor = MeshMatcapMaterial;\n\nMeshMatcapMaterial.prototype.isMeshMatcapMaterial = true;\n\nMeshMatcapMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.defines = { 'MATCAP': '' };\n\n\tthis.color.copy( source.color );\n\n\tthis.matcap = source.matcap;\n\n\tthis.map = source.map;\n\n\tthis.bumpMap = source.bumpMap;\n\tthis.bumpScale = source.bumpScale;\n\n\tthis.normalMap = source.normalMap;\n\tthis.normalMapType = source.normalMapType;\n\tthis.normalScale.copy( source.normalScale );\n\n\tthis.displacementMap = source.displacementMap;\n\tthis.displacementScale = source.displacementScale;\n\tthis.displacementBias = source.displacementBias;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\tthis.morphNormals = source.morphNormals;\n\n\treturn this;\n\n};\n\nfunction LineDashedMaterial() {}\n\n/**\n * @author tschw\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n */\n\nvar AnimationUtils = {\n\n\t// same as Array.prototype.slice, but also works on typed arrays\n\tarraySlice: function ( array, from, to ) {\n\n\t\tif ( AnimationUtils.isTypedArray( array ) ) {\n\n\t\t\t// in ios9 array.subarray(from, undefined) will return empty array\n\t\t\t// but array.subarray(from) or array.subarray(from, len) is correct\n\t\t\treturn new array.constructor( array.subarray( from, to !== undefined ? to : array.length ) );\n\n\t\t}\n\n\t\treturn array.slice( from, to );\n\n\t},\n\n\t// converts an array to a specific type\n\tconvertArray: function ( array, type, forceClone ) {\n\n\t\tif ( ! array || // let 'undefined' and 'null' pass\n\t\t\t! forceClone && array.constructor === type ) return array;\n\n\t\tif ( typeof type.BYTES_PER_ELEMENT === 'number' ) {\n\n\t\t\treturn new type( array ); // create typed array\n\n\t\t}\n\n\t\treturn Array.prototype.slice.call( array ); // create Array\n\n\t},\n\n\tisTypedArray: function ( object ) {\n\n\t\treturn ArrayBuffer.isView( object ) &&\n\t\t\t! ( object instanceof DataView );\n\n\t},\n\n\t// returns an array by which times and values can be sorted\n\tgetKeyframeOrder: function ( times ) {\n\n\t\tfunction compareTime( i, j ) {\n\n\t\t\treturn times[ i ] - times[ j ];\n\n\t\t}\n\n\t\tvar n = times.length;\n\t\tvar result = new Array( n );\n\t\tfor ( var i = 0; i !== n; ++ i ) result[ i ] = i;\n\n\t\tresult.sort( compareTime );\n\n\t\treturn result;\n\n\t},\n\n\t// uses the array previously returned by 'getKeyframeOrder' to sort data\n\tsortedArray: function ( values, stride, order ) {\n\n\t\tvar nValues = values.length;\n\t\tvar result = new values.constructor( nValues );\n\n\t\tfor ( var i = 0, dstOffset = 0; dstOffset !== nValues; ++ i ) {\n\n\t\t\tvar srcOffset = order[ i ] * stride;\n\n\t\t\tfor ( var j = 0; j !== stride; ++ j ) {\n\n\t\t\t\tresult[ dstOffset ++ ] = values[ srcOffset + j ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn result;\n\n\t},\n\n\t// function for parsing AOS keyframe formats\n\tflattenJSON: function ( jsonKeys, times, values, valuePropertyName ) {\n\n\t\tvar i = 1, key = jsonKeys[ 0 ];\n\n\t\twhile ( key !== undefined && key[ valuePropertyName ] === undefined ) {\n\n\t\t\tkey = jsonKeys[ i ++ ];\n\n\t\t}\n\n\t\tif ( key === undefined ) return; // no data\n\n\t\tvar value = key[ valuePropertyName ];\n\t\tif ( value === undefined ) return; // no data\n\n\t\tif ( Array.isArray( value ) ) {\n\n\t\t\tdo {\n\n\t\t\t\tvalue = key[ valuePropertyName ];\n\n\t\t\t\tif ( value !== undefined ) {\n\n\t\t\t\t\ttimes.push( key.time );\n\t\t\t\t\tvalues.push.apply( values, value ); // push all elements\n\n\t\t\t\t}\n\n\t\t\t\tkey = jsonKeys[ i ++ ];\n\n\t\t\t} while ( key !== undefined );\n\n\t\t} else if ( value.toArray !== undefined ) {\n\n\t\t\t// ...assume THREE.Math-ish\n\n\t\t\tdo {\n\n\t\t\t\tvalue = key[ valuePropertyName ];\n\n\t\t\t\tif ( value !== undefined ) {\n\n\t\t\t\t\ttimes.push( key.time );\n\t\t\t\t\tvalue.toArray( values, values.length );\n\n\t\t\t\t}\n\n\t\t\t\tkey = jsonKeys[ i ++ ];\n\n\t\t\t} while ( key !== undefined );\n\n\t\t} else {\n\n\t\t\t// otherwise push as-is\n\n\t\t\tdo {\n\n\t\t\t\tvalue = key[ valuePropertyName ];\n\n\t\t\t\tif ( value !== undefined ) {\n\n\t\t\t\t\ttimes.push( key.time );\n\t\t\t\t\tvalues.push( value );\n\n\t\t\t\t}\n\n\t\t\t\tkey = jsonKeys[ i ++ ];\n\n\t\t\t} while ( key !== undefined );\n\n\t\t}\n\n\t},\n\n\tsubclip: function ( sourceClip, name, startFrame, endFrame, fps ) {\n\n\t\tfps = fps || 30;\n\n\t\tvar clip = sourceClip.clone();\n\n\t\tclip.name = name;\n\n\t\tvar tracks = [];\n\n\t\tfor ( var i = 0; i < clip.tracks.length; ++ i ) {\n\n\t\t\tvar track = clip.tracks[ i ];\n\t\t\tvar valueSize = track.getValueSize();\n\n\t\t\tvar times = [];\n\t\t\tvar values = [];\n\n\t\t\tfor ( var j = 0; j < track.times.length; ++ j ) {\n\n\t\t\t\tvar frame = track.times[ j ] * fps;\n\n\t\t\t\tif ( frame < startFrame || frame >= endFrame ) continue;\n\n\t\t\t\ttimes.push( track.times[ j ] );\n\n\t\t\t\tfor ( var k = 0; k < valueSize; ++ k ) {\n\n\t\t\t\t\tvalues.push( track.values[ j * valueSize + k ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( times.length === 0 ) continue;\n\n\t\t\ttrack.times = AnimationUtils.convertArray( times, track.times.constructor );\n\t\t\ttrack.values = AnimationUtils.convertArray( values, track.values.constructor );\n\n\t\t\ttracks.push( track );\n\n\t\t}\n\n\t\tclip.tracks = tracks;\n\n\t\t// find minimum .times value across all tracks in the trimmed clip\n\n\t\tvar minStartTime = Infinity;\n\n\t\tfor ( var i = 0; i < clip.tracks.length; ++ i ) {\n\n\t\t\tif ( minStartTime > clip.tracks[ i ].times[ 0 ] ) {\n\n\t\t\t\tminStartTime = clip.tracks[ i ].times[ 0 ];\n\n\t\t\t}\n\n\t\t}\n\n\t\t// shift all tracks such that clip begins at t=0\n\n\t\tfor ( var i = 0; i < clip.tracks.length; ++ i ) {\n\n\t\t\tclip.tracks[ i ].shift( - 1 * minStartTime );\n\n\t\t}\n\n\t\tclip.resetDuration();\n\n\t\treturn clip;\n\n\t}\n\n};\n\n/**\n * Abstract base class of interpolants over parametric samples.\n *\n * The parameter domain is one dimensional, typically the time or a path\n * along a curve defined by the data.\n *\n * The sample values can have any dimensionality and derived classes may\n * apply special interpretations to the data.\n *\n * This class provides the interval seek in a Template Method, deferring\n * the actual interpolation to derived classes.\n *\n * Time complexity is O(1) for linear access crossing at most two points\n * and O(log N) for random access, where N is the number of positions.\n *\n * References:\n *\n * \t\thttp://www.oodesign.com/template-method-pattern.html\n *\n * @author tschw\n */\n\nfunction Interpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\tthis.parameterPositions = parameterPositions;\n\tthis._cachedIndex = 0;\n\n\tthis.resultBuffer = resultBuffer !== undefined ?\n\t\tresultBuffer : new sampleValues.constructor( sampleSize );\n\tthis.sampleValues = sampleValues;\n\tthis.valueSize = sampleSize;\n\n}\n\nObject.assign( Interpolant.prototype, {\n\n\tevaluate: function ( t ) {\n\n\t\tvar pp = this.parameterPositions,\n\t\t\ti1 = this._cachedIndex,\n\n\t\t\tt1 = pp[ i1 ],\n\t\t\tt0 = pp[ i1 - 1 ];\n\n\t\tvalidate_interval: {\n\n\t\t\tseek: {\n\n\t\t\t\tvar right;\n\n\t\t\t\tlinear_scan: {\n\n\t\t\t\t\t//- See http://jsperf.com/comparison-to-undefined/3\n\t\t\t\t\t//- slower code:\n\t\t\t\t\t//-\n\t\t\t\t\t//- \t\t\t\tif ( t >= t1 || t1 === undefined ) {\n\t\t\t\t\tforward_scan: if ( ! ( t < t1 ) ) {\n\n\t\t\t\t\t\tfor ( var giveUpAt = i1 + 2; ; ) {\n\n\t\t\t\t\t\t\tif ( t1 === undefined ) {\n\n\t\t\t\t\t\t\t\tif ( t < t0 ) break forward_scan;\n\n\t\t\t\t\t\t\t\t// after end\n\n\t\t\t\t\t\t\t\ti1 = pp.length;\n\t\t\t\t\t\t\t\tthis._cachedIndex = i1;\n\t\t\t\t\t\t\t\treturn this.afterEnd_( i1 - 1, t, t0 );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( i1 === giveUpAt ) break; // this loop\n\n\t\t\t\t\t\t\tt0 = t1;\n\t\t\t\t\t\t\tt1 = pp[ ++ i1 ];\n\n\t\t\t\t\t\t\tif ( t < t1 ) {\n\n\t\t\t\t\t\t\t\t// we have arrived at the sought interval\n\t\t\t\t\t\t\t\tbreak seek;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// prepare binary search on the right side of the index\n\t\t\t\t\t\tright = pp.length;\n\t\t\t\t\t\tbreak linear_scan;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t//- slower code:\n\t\t\t\t\t//-\t\t\t\t\tif ( t < t0 || t0 === undefined ) {\n\t\t\t\t\tif ( ! ( t >= t0 ) ) {\n\n\t\t\t\t\t\t// looping?\n\n\t\t\t\t\t\tvar t1global = pp[ 1 ];\n\n\t\t\t\t\t\tif ( t < t1global ) {\n\n\t\t\t\t\t\t\ti1 = 2; // + 1, using the scan for the details\n\t\t\t\t\t\t\tt0 = t1global;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// linear reverse scan\n\n\t\t\t\t\t\tfor ( var giveUpAt = i1 - 2; ; ) {\n\n\t\t\t\t\t\t\tif ( t0 === undefined ) {\n\n\t\t\t\t\t\t\t\t// before start\n\n\t\t\t\t\t\t\t\tthis._cachedIndex = 0;\n\t\t\t\t\t\t\t\treturn this.beforeStart_( 0, t, t1 );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( i1 === giveUpAt ) break; // this loop\n\n\t\t\t\t\t\t\tt1 = t0;\n\t\t\t\t\t\t\tt0 = pp[ -- i1 - 1 ];\n\n\t\t\t\t\t\t\tif ( t >= t0 ) {\n\n\t\t\t\t\t\t\t\t// we have arrived at the sought interval\n\t\t\t\t\t\t\t\tbreak seek;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// prepare binary search on the left side of the index\n\t\t\t\t\t\tright = i1;\n\t\t\t\t\t\ti1 = 0;\n\t\t\t\t\t\tbreak linear_scan;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// the interval is valid\n\n\t\t\t\t\tbreak validate_interval;\n\n\t\t\t\t} // linear scan\n\n\t\t\t\t// binary search\n\n\t\t\t\twhile ( i1 < right ) {\n\n\t\t\t\t\tvar mid = ( i1 + right ) >>> 1;\n\n\t\t\t\t\tif ( t < pp[ mid ] ) {\n\n\t\t\t\t\t\tright = mid;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\ti1 = mid + 1;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tt1 = pp[ i1 ];\n\t\t\t\tt0 = pp[ i1 - 1 ];\n\n\t\t\t\t// check boundary cases, again\n\n\t\t\t\tif ( t0 === undefined ) {\n\n\t\t\t\t\tthis._cachedIndex = 0;\n\t\t\t\t\treturn this.beforeStart_( 0, t, t1 );\n\n\t\t\t\t}\n\n\t\t\t\tif ( t1 === undefined ) {\n\n\t\t\t\t\ti1 = pp.length;\n\t\t\t\t\tthis._cachedIndex = i1;\n\t\t\t\t\treturn this.afterEnd_( i1 - 1, t0, t );\n\n\t\t\t\t}\n\n\t\t\t} // seek\n\n\t\t\tthis._cachedIndex = i1;\n\n\t\t\tthis.intervalChanged_( i1, t0, t1 );\n\n\t\t} // validate_interval\n\n\t\treturn this.interpolate_( i1, t0, t, t1 );\n\n\t},\n\n\tsettings: null, // optional, subclass-specific settings structure\n\t// Note: The indirection allows central control of many interpolants.\n\n\t// --- Protected interface\n\n\tDefaultSettings_: {},\n\n\tgetSettings_: function () {\n\n\t\treturn this.settings || this.DefaultSettings_;\n\n\t},\n\n\tcopySampleValue_: function ( index ) {\n\n\t\t// copies a sample value to the result buffer\n\n\t\tvar result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tstride = this.valueSize,\n\t\t\toffset = index * stride;\n\n\t\tfor ( var i = 0; i !== stride; ++ i ) {\n\n\t\t\tresult[ i ] = values[ offset + i ];\n\n\t\t}\n\n\t\treturn result;\n\n\t},\n\n\t// Template methods for derived classes:\n\n\tinterpolate_: function ( /* i1, t0, t, t1 */ ) {\n\n\t\tthrow new Error( 'call to abstract method' );\n\t\t// implementations shall return this.resultBuffer\n\n\t},\n\n\tintervalChanged_: function ( /* i1, t0, t1 */ ) {\n\n\t\t// empty\n\n\t}\n\n} );\n\n//!\\ DECLARE ALIAS AFTER assign prototype !\nObject.assign( Interpolant.prototype, {\n\n\t//( 0, t, t0 ), returns this.resultBuffer\n\tbeforeStart_: Interpolant.prototype.copySampleValue_,\n\n\t//( N-1, tN-1, t ), returns this.resultBuffer\n\tafterEnd_: Interpolant.prototype.copySampleValue_,\n\n} );\n\n/**\n * Fast and simple cubic spline interpolant.\n *\n * It was derived from a Hermitian construction setting the first derivative\n * at each sample position to the linear slope between neighboring positions\n * over their parameter interval.\n *\n * @author tschw\n */\n\nfunction CubicInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\tInterpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n\tthis._weightPrev = - 0;\n\tthis._offsetPrev = - 0;\n\tthis._weightNext = - 0;\n\tthis._offsetNext = - 0;\n\n}\n\nCubicInterpolant.prototype = Object.assign( Object.create( Interpolant.prototype ), {\n\n\tconstructor: CubicInterpolant,\n\n\tDefaultSettings_: {\n\n\t\tendingStart: ZeroCurvatureEnding,\n\t\tendingEnd: ZeroCurvatureEnding\n\n\t},\n\n\tintervalChanged_: function ( i1, t0, t1 ) {\n\n\t\tvar pp = this.parameterPositions,\n\t\t\tiPrev = i1 - 2,\n\t\t\tiNext = i1 + 1,\n\n\t\t\ttPrev = pp[ iPrev ],\n\t\t\ttNext = pp[ iNext ];\n\n\t\tif ( tPrev === undefined ) {\n\n\t\t\tswitch ( this.getSettings_().endingStart ) {\n\n\t\t\t\tcase ZeroSlopeEnding:\n\n\t\t\t\t\t// f'(t0) = 0\n\t\t\t\t\tiPrev = i1;\n\t\t\t\t\ttPrev = 2 * t0 - t1;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase WrapAroundEnding:\n\n\t\t\t\t\t// use the other end of the curve\n\t\t\t\t\tiPrev = pp.length - 2;\n\t\t\t\t\ttPrev = t0 + pp[ iPrev ] - pp[ iPrev + 1 ];\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault: // ZeroCurvatureEnding\n\n\t\t\t\t\t// f''(t0) = 0 a.k.a. Natural Spline\n\t\t\t\t\tiPrev = i1;\n\t\t\t\t\ttPrev = t1;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( tNext === undefined ) {\n\n\t\t\tswitch ( this.getSettings_().endingEnd ) {\n\n\t\t\t\tcase ZeroSlopeEnding:\n\n\t\t\t\t\t// f'(tN) = 0\n\t\t\t\t\tiNext = i1;\n\t\t\t\t\ttNext = 2 * t1 - t0;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase WrapAroundEnding:\n\n\t\t\t\t\t// use the other end of the curve\n\t\t\t\t\tiNext = 1;\n\t\t\t\t\ttNext = t1 + pp[ 1 ] - pp[ 0 ];\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault: // ZeroCurvatureEnding\n\n\t\t\t\t\t// f''(tN) = 0, a.k.a. Natural Spline\n\t\t\t\t\tiNext = i1 - 1;\n\t\t\t\t\ttNext = t0;\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar halfDt = ( t1 - t0 ) * 0.5,\n\t\t\tstride = this.valueSize;\n\n\t\tthis._weightPrev = halfDt / ( t0 - tPrev );\n\t\tthis._weightNext = halfDt / ( tNext - t1 );\n\t\tthis._offsetPrev = iPrev * stride;\n\t\tthis._offsetNext = iNext * stride;\n\n\t},\n\n\tinterpolate_: function ( i1, t0, t, t1 ) {\n\n\t\tvar result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tstride = this.valueSize,\n\n\t\t\to1 = i1 * stride,\t\to0 = o1 - stride,\n\t\t\toP = this._offsetPrev, \toN = this._offsetNext,\n\t\t\twP = this._weightPrev,\twN = this._weightNext,\n\n\t\t\tp = ( t - t0 ) / ( t1 - t0 ),\n\t\t\tpp = p * p,\n\t\t\tppp = pp * p;\n\n\t\t// evaluate polynomials\n\n\t\tvar sP = - wP * ppp + 2 * wP * pp - wP * p;\n\t\tvar s0 = ( 1 + wP ) * ppp + ( - 1.5 - 2 * wP ) * pp + ( - 0.5 + wP ) * p + 1;\n\t\tvar s1 = ( - 1 - wN ) * ppp + ( 1.5 + wN ) * pp + 0.5 * p;\n\t\tvar sN = wN * ppp - wN * pp;\n\n\t\t// combine data linearly\n\n\t\tfor ( var i = 0; i !== stride; ++ i ) {\n\n\t\t\tresult[ i ] =\n\t\t\t\t\tsP * values[ oP + i ] +\n\t\t\t\t\ts0 * values[ o0 + i ] +\n\t\t\t\t\ts1 * values[ o1 + i ] +\n\t\t\t\t\tsN * values[ oN + i ];\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n} );\n\n/**\n * @author tschw\n */\n\nfunction LinearInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\tInterpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n}\n\nLinearInterpolant.prototype = Object.assign( Object.create( Interpolant.prototype ), {\n\n\tconstructor: LinearInterpolant,\n\n\tinterpolate_: function ( i1, t0, t, t1 ) {\n\n\t\tvar result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tstride = this.valueSize,\n\n\t\t\toffset1 = i1 * stride,\n\t\t\toffset0 = offset1 - stride,\n\n\t\t\tweight1 = ( t - t0 ) / ( t1 - t0 ),\n\t\t\tweight0 = 1 - weight1;\n\n\t\tfor ( var i = 0; i !== stride; ++ i ) {\n\n\t\t\tresult[ i ] =\n\t\t\t\t\tvalues[ offset0 + i ] * weight0 +\n\t\t\t\t\tvalues[ offset1 + i ] * weight1;\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n} );\n\n/**\n *\n * Interpolant that evaluates to the sample value at the position preceeding\n * the parameter.\n *\n * @author tschw\n */\n\nfunction DiscreteInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\tInterpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n}\n\nDiscreteInterpolant.prototype = Object.assign( Object.create( Interpolant.prototype ), {\n\n\tconstructor: DiscreteInterpolant,\n\n\tinterpolate_: function ( i1 /*, t0, t, t1 */ ) {\n\n\t\treturn this.copySampleValue_( i1 - 1 );\n\n\t}\n\n} );\n\nfunction KeyframeTrack() {}\n\nfunction BooleanKeyframeTrack() {}\nfunction ColorKeyframeTrack() {}\nfunction NumberKeyframeTrack() {}\nfunction QuaternionLinearInterpolant() {}\nfunction QuaternionKeyframeTrack() {}\nfunction StringKeyframeTrack() {}\nfunction VectorKeyframeTrack() {}\nfunction AnimationClip() {}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nvar Cache = {\n\n\tenabled: false,\n\n\tfiles: {},\n\n\tadd: function ( key, file ) {\n\n\t\tif ( this.enabled === false ) return;\n\n\t\t// console.log( 'THREE.Cache', 'Adding key:', key );\n\n\t\tthis.files[ key ] = file;\n\n\t},\n\n\tget: function ( key ) {\n\n\t\tif ( this.enabled === false ) return;\n\n\t\t// console.log( 'THREE.Cache', 'Checking key:', key );\n\n\t\treturn this.files[ key ];\n\n\t},\n\n\tremove: function ( key ) {\n\n\t\tdelete this.files[ key ];\n\n\t},\n\n\tclear: function () {\n\n\t\tthis.files = {};\n\n\t}\n\n};\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction LoadingManager( onLoad, onProgress, onError ) {\n\n\tvar scope = this;\n\n\tvar isLoading = false;\n\tvar itemsLoaded = 0;\n\tvar itemsTotal = 0;\n\tvar urlModifier = undefined;\n\tvar handlers = [];\n\n\t// Refer to #5689 for the reason why we don't set .onStart\n\t// in the constructor\n\n\tthis.onStart = undefined;\n\tthis.onLoad = onLoad;\n\tthis.onProgress = onProgress;\n\tthis.onError = onError;\n\n\tthis.itemStart = function ( url ) {\n\n\t\titemsTotal ++;\n\n\t\tif ( isLoading === false ) {\n\n\t\t\tif ( scope.onStart !== undefined ) {\n\n\t\t\t\tscope.onStart( url, itemsLoaded, itemsTotal );\n\n\t\t\t}\n\n\t\t}\n\n\t\tisLoading = true;\n\n\t};\n\n\tthis.itemEnd = function ( url ) {\n\n\t\titemsLoaded ++;\n\n\t\tif ( scope.onProgress !== undefined ) {\n\n\t\t\tscope.onProgress( url, itemsLoaded, itemsTotal );\n\n\t\t}\n\n\t\tif ( itemsLoaded === itemsTotal ) {\n\n\t\t\tisLoading = false;\n\n\t\t\tif ( scope.onLoad !== undefined ) {\n\n\t\t\t\tscope.onLoad();\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tthis.itemError = function ( url ) {\n\n\t\tif ( scope.onError !== undefined ) {\n\n\t\t\tscope.onError( url );\n\n\t\t}\n\n\t};\n\n\tthis.resolveURL = function ( url ) {\n\n\t\tif ( urlModifier ) {\n\n\t\t\treturn urlModifier( url );\n\n\t\t}\n\n\t\treturn url;\n\n\t};\n\n\tthis.setURLModifier = function ( transform ) {\n\n\t\turlModifier = transform;\n\n\t\treturn this;\n\n\t};\n\n\tthis.addHandler = function ( regex, loader ) {\n\n\t\thandlers.push( regex, loader );\n\n\t\treturn this;\n\n\t};\n\n\tthis.removeHandler = function ( regex ) {\n\n\t\tvar index = handlers.indexOf( regex );\n\n\t\tif ( index !== - 1 ) {\n\n\t\t\thandlers.splice( index, 2 );\n\n\t\t}\n\n\t\treturn this;\n\n\t};\n\n\tthis.getHandler = function ( file ) {\n\n\t\tfor ( var i = 0, l = handlers.length; i < l; i += 2 ) {\n\n\t\t\tvar regex = handlers[ i ];\n\t\t\tvar loader = handlers[ i + 1 ];\n\n\t\t\tif ( regex.global ) regex.lastIndex = 0; // see #17920\n\n\t\t\tif ( regex.test( file ) ) {\n\n\t\t\t\treturn loader;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn null;\n\n\t};\n\n}\n\nvar DefaultLoadingManager = new LoadingManager();\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction Loader( manager ) {\n\n\tthis.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\n\n\tthis.crossOrigin = 'anonymous';\n\tthis.path = '';\n\tthis.resourcePath = '';\n\n}\n\nObject.assign( Loader.prototype, {\n\n\tload: function ( /* url, onLoad, onProgress, onError */ ) {},\n\n\tparse: function ( /* data */ ) {},\n\n\tsetCrossOrigin: function ( crossOrigin ) {\n\n\t\tthis.crossOrigin = crossOrigin;\n\t\treturn this;\n\n\t},\n\n\tsetPath: function ( path ) {\n\n\t\tthis.path = path;\n\t\treturn this;\n\n\t},\n\n\tsetResourcePath: function ( resourcePath ) {\n\n\t\tthis.resourcePath = resourcePath;\n\t\treturn this;\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nvar loading = {};\n\nfunction FileLoader( manager ) {\n\n\tLoader.call( this, manager );\n\n}\n\nFileLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: FileLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tif ( url === undefined ) url = '';\n\n\t\tif ( this.path !== undefined ) url = this.path + url;\n\n\t\turl = this.manager.resolveURL( url );\n\n\t\tvar scope = this;\n\n\t\tvar cached = Cache.get( url );\n\n\t\tif ( cached !== undefined ) {\n\n\t\t\tscope.manager.itemStart( url );\n\n\t\t\tsetTimeout( function () {\n\n\t\t\t\tif ( onLoad ) onLoad( cached );\n\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t}, 0 );\n\n\t\t\treturn cached;\n\n\t\t}\n\n\t\t// Check if request is duplicate\n\n\t\tif ( loading[ url ] !== undefined ) {\n\n\t\t\tloading[ url ].push( {\n\n\t\t\t\tonLoad: onLoad,\n\t\t\t\tonProgress: onProgress,\n\t\t\t\tonError: onError\n\n\t\t\t} );\n\n\t\t\treturn;\n\n\t\t}\n\n\t\t// Check for data: URI\n\t\tvar dataUriRegex = /^data:(.*?)(;base64)?,(.*)$/;\n\t\tvar dataUriRegexResult = url.match( dataUriRegex );\n\n\t\t// Safari can not handle Data URIs through XMLHttpRequest so process manually\n\t\tif ( dataUriRegexResult ) {\n\n\t\t\tvar mimeType = dataUriRegexResult[ 1 ];\n\t\t\tvar isBase64 = !! dataUriRegexResult[ 2 ];\n\t\t\tvar data = dataUriRegexResult[ 3 ];\n\n\t\t\tdata = decodeURIComponent( data );\n\n\t\t\tif ( isBase64 ) data = atob( data );\n\n\t\t\ttry {\n\n\t\t\t\tvar response;\n\t\t\t\tvar responseType = ( this.responseType || '' ).toLowerCase();\n\n\t\t\t\tswitch ( responseType ) {\n\n\t\t\t\t\tcase 'arraybuffer':\n\t\t\t\t\tcase 'blob':\n\n\t\t\t\t\t\tvar view = new Uint8Array( data.length );\n\n\t\t\t\t\t\tfor ( var i = 0; i < data.length; i ++ ) {\n\n\t\t\t\t\t\t\tview[ i ] = data.charCodeAt( i );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( responseType === 'blob' ) {\n\n\t\t\t\t\t\t\tresponse = new Blob( [ view.buffer ], { type: mimeType } );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tresponse = view.buffer;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'document':\n\n\t\t\t\t\t\tvar parser = new DOMParser();\n\t\t\t\t\t\tresponse = parser.parseFromString( data, mimeType );\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'json':\n\n\t\t\t\t\t\tresponse = JSON.parse( data );\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault: // 'text' or other\n\n\t\t\t\t\t\tresponse = data;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\t// Wait for next browser tick like standard XMLHttpRequest event dispatching does\n\t\t\t\tsetTimeout( function () {\n\n\t\t\t\t\tif ( onLoad ) onLoad( response );\n\n\t\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t\t}, 0 );\n\n\t\t\t} catch ( error ) {\n\n\t\t\t\t// Wait for next browser tick like standard XMLHttpRequest event dispatching does\n\t\t\t\tsetTimeout( function () {\n\n\t\t\t\t\tif ( onError ) onError( error );\n\n\t\t\t\t\tscope.manager.itemError( url );\n\t\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t\t}, 0 );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// Initialise array for duplicate requests\n\n\t\t\tloading[ url ] = [];\n\n\t\t\tloading[ url ].push( {\n\n\t\t\t\tonLoad: onLoad,\n\t\t\t\tonProgress: onProgress,\n\t\t\t\tonError: onError\n\n\t\t\t} );\n\n\t\t\tvar request = new XMLHttpRequest();\n\n\t\t\trequest.open( 'GET', url, true );\n\n\t\t\trequest.addEventListener( 'load', function ( event ) {\n\n\t\t\t\tvar response = this.response;\n\n\t\t\t\tvar callbacks = loading[ url ];\n\n\t\t\t\tdelete loading[ url ];\n\n\t\t\t\tif ( this.status === 200 || this.status === 0 ) {\n\n\t\t\t\t\t// Some browsers return HTTP Status 0 when using non-http protocol\n\t\t\t\t\t// e.g. 'file://' or 'data://'. Handle as success.\n\n\t\t\t\t\tif ( this.status === 0 ) console.warn( 'THREE.FileLoader: HTTP Status 0 received.' );\n\n\t\t\t\t\t// Add to cache only on HTTP success, so that we do not cache\n\t\t\t\t\t// error response bodies as proper responses to requests.\n\t\t\t\t\tCache.add( url, response );\n\n\t\t\t\t\tfor ( var i = 0, il = callbacks.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tvar callback = callbacks[ i ];\n\t\t\t\t\t\tif ( callback.onLoad ) callback.onLoad( response );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tfor ( var i = 0, il = callbacks.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tvar callback = callbacks[ i ];\n\t\t\t\t\t\tif ( callback.onError ) callback.onError( event );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tscope.manager.itemError( url );\n\t\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t\t}\n\n\t\t\t}, false );\n\n\t\t\trequest.addEventListener( 'progress', function ( event ) {\n\n\t\t\t\tvar callbacks = loading[ url ];\n\n\t\t\t\tfor ( var i = 0, il = callbacks.length; i < il; i ++ ) {\n\n\t\t\t\t\tvar callback = callbacks[ i ];\n\t\t\t\t\tif ( callback.onProgress ) callback.onProgress( event );\n\n\t\t\t\t}\n\n\t\t\t}, false );\n\n\t\t\trequest.addEventListener( 'error', function ( event ) {\n\n\t\t\t\tvar callbacks = loading[ url ];\n\n\t\t\t\tdelete loading[ url ];\n\n\t\t\t\tfor ( var i = 0, il = callbacks.length; i < il; i ++ ) {\n\n\t\t\t\t\tvar callback = callbacks[ i ];\n\t\t\t\t\tif ( callback.onError ) callback.onError( event );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t}, false );\n\n\t\t\trequest.addEventListener( 'abort', function ( event ) {\n\n\t\t\t\tvar callbacks = loading[ url ];\n\n\t\t\t\tdelete loading[ url ];\n\n\t\t\t\tfor ( var i = 0, il = callbacks.length; i < il; i ++ ) {\n\n\t\t\t\t\tvar callback = callbacks[ i ];\n\t\t\t\t\tif ( callback.onError ) callback.onError( event );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t}, false );\n\n\t\t\tif ( this.responseType !== undefined ) request.responseType = this.responseType;\n\t\t\tif ( this.withCredentials !== undefined ) request.withCredentials = this.withCredentials;\n\n\t\t\tif ( request.overrideMimeType ) request.overrideMimeType( this.mimeType !== undefined ? this.mimeType : 'text/plain' );\n\n\t\t\tfor ( var header in this.requestHeader ) {\n\n\t\t\t\trequest.setRequestHeader( header, this.requestHeader[ header ] );\n\n\t\t\t}\n\n\t\t\trequest.send( null );\n\n\t\t}\n\n\t\tscope.manager.itemStart( url );\n\n\t\treturn request;\n\n\t},\n\n\tsetResponseType: function ( value ) {\n\n\t\tthis.responseType = value;\n\t\treturn this;\n\n\t},\n\n\tsetWithCredentials: function ( value ) {\n\n\t\tthis.withCredentials = value;\n\t\treturn this;\n\n\t},\n\n\tsetMimeType: function ( value ) {\n\n\t\tthis.mimeType = value;\n\t\treturn this;\n\n\t},\n\n\tsetRequestHeader: function ( value ) {\n\n\t\tthis.requestHeader = value;\n\t\treturn this;\n\n\t}\n\n} );\n\n/**\n * @author bhouston / http://clara.io/\n */\n\nfunction AnimationLoader( manager ) {\n\n\tLoader.call( this, manager );\n\n}\n\nAnimationLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: AnimationLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar scope = this;\n\n\t\tvar loader = new FileLoader( scope.manager );\n\t\tloader.setPath( scope.path );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\n\n\t\t}, onProgress, onError );\n\n\t},\n\n\tparse: function ( json ) {\n\n\t\tvar animations = [];\n\n\t\tfor ( var i = 0; i < json.length; i ++ ) {\n\n\t\t\tvar clip = AnimationClip.parse( json[ i ] );\n\n\t\t\tanimations.push( clip );\n\n\t\t}\n\n\t\treturn animations;\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n *\n * Abstract Base class to block based textures loader (dds, pvr, ...)\n *\n * Sub classes have to implement the parse() method which will be used in load().\n */\n\nfunction CompressedTextureLoader( manager ) {\n\n\tLoader.call( this, manager );\n\n}\n\nCompressedTextureLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: CompressedTextureLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar scope = this;\n\n\t\tvar images = [];\n\n\t\tvar texture = new CompressedTexture();\n\t\ttexture.image = images;\n\n\t\tvar loader = new FileLoader( this.manager );\n\t\tloader.setPath( this.path );\n\t\tloader.setResponseType( 'arraybuffer' );\n\n\t\tfunction loadTexture( i ) {\n\n\t\t\tloader.load( url[ i ], function ( buffer ) {\n\n\t\t\t\tvar texDatas = scope.parse( buffer, true );\n\n\t\t\t\timages[ i ] = {\n\t\t\t\t\twidth: texDatas.width,\n\t\t\t\t\theight: texDatas.height,\n\t\t\t\t\tformat: texDatas.format,\n\t\t\t\t\tmipmaps: texDatas.mipmaps\n\t\t\t\t};\n\n\t\t\t\tloaded += 1;\n\n\t\t\t\tif ( loaded === 6 ) {\n\n\t\t\t\t\tif ( texDatas.mipmapCount === 1 )\n\t\t\t\t\t\ttexture.minFilter = LinearFilter;\n\n\t\t\t\t\ttexture.format = texDatas.format;\n\t\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\t\tif ( onLoad ) onLoad( texture );\n\n\t\t\t\t}\n\n\t\t\t}, onProgress, onError );\n\n\t\t}\n\n\t\tif ( Array.isArray( url ) ) {\n\n\t\t\tvar loaded = 0;\n\n\t\t\tfor ( var i = 0, il = url.length; i < il; ++ i ) {\n\n\t\t\t\tloadTexture( i );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// compressed cubemap texture stored in a single DDS file\n\n\t\t\tloader.load( url, function ( buffer ) {\n\n\t\t\t\tvar texDatas = scope.parse( buffer, true );\n\n\t\t\t\tif ( texDatas.isCubemap ) {\n\n\t\t\t\t\tvar faces = texDatas.mipmaps.length / texDatas.mipmapCount;\n\n\t\t\t\t\tfor ( var f = 0; f < faces; f ++ ) {\n\n\t\t\t\t\t\timages[ f ] = { mipmaps: [] };\n\n\t\t\t\t\t\tfor ( var i = 0; i < texDatas.mipmapCount; i ++ ) {\n\n\t\t\t\t\t\t\timages[ f ].mipmaps.push( texDatas.mipmaps[ f * texDatas.mipmapCount + i ] );\n\t\t\t\t\t\t\timages[ f ].format = texDatas.format;\n\t\t\t\t\t\t\timages[ f ].width = texDatas.width;\n\t\t\t\t\t\t\timages[ f ].height = texDatas.height;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttexture.image.width = texDatas.width;\n\t\t\t\t\ttexture.image.height = texDatas.height;\n\t\t\t\t\ttexture.mipmaps = texDatas.mipmaps;\n\n\t\t\t\t}\n\n\t\t\t\tif ( texDatas.mipmapCount === 1 ) {\n\n\t\t\t\t\ttexture.minFilter = LinearFilter;\n\n\t\t\t\t}\n\n\t\t\t\ttexture.format = texDatas.format;\n\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\tif ( onLoad ) onLoad( texture );\n\n\t\t\t}, onProgress, onError );\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n} );\n\nfunction DataTextureLoader() {}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction ImageLoader( manager ) {\n\n\tLoader.call( this, manager );\n\n}\n\nImageLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: ImageLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tif ( this.path !== undefined ) url = this.path + url;\n\n\t\turl = this.manager.resolveURL( url );\n\n\t\tvar scope = this;\n\n\t\tvar cached = Cache.get( url );\n\n\t\tif ( cached !== undefined ) {\n\n\t\t\tscope.manager.itemStart( url );\n\n\t\t\tsetTimeout( function () {\n\n\t\t\t\tif ( onLoad ) onLoad( cached );\n\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t}, 0 );\n\n\t\t\treturn cached;\n\n\t\t}\n\n\t\tvar image = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'img' );\n\n\t\tfunction onImageLoad() {\n\n\t\t\timage.removeEventListener( 'load', onImageLoad, false );\n\t\t\timage.removeEventListener( 'error', onImageError, false );\n\n\t\t\tCache.add( url, this );\n\n\t\t\tif ( onLoad ) onLoad( this );\n\n\t\t\tscope.manager.itemEnd( url );\n\n\t\t}\n\n\t\tfunction onImageError( event ) {\n\n\t\t\timage.removeEventListener( 'load', onImageLoad, false );\n\t\t\timage.removeEventListener( 'error', onImageError, false );\n\n\t\t\tif ( onError ) onError( event );\n\n\t\t\tscope.manager.itemError( url );\n\t\t\tscope.manager.itemEnd( url );\n\n\t\t}\n\n\t\timage.addEventListener( 'load', onImageLoad, false );\n\t\timage.addEventListener( 'error', onImageError, false );\n\n\t\tif ( url.substr( 0, 5 ) !== 'data:' ) {\n\n\t\t\tif ( this.crossOrigin !== undefined ) image.crossOrigin = this.crossOrigin;\n\n\t\t}\n\n\t\tscope.manager.itemStart( url );\n\n\t\timage.src = url;\n\n\t\treturn image;\n\n\t}\n\n} );\n\nfunction CubeTextureLoader() {}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction TextureLoader( manager ) {\n\n\tLoader.call( this, manager );\n\n}\n\nTextureLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: TextureLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar texture = new Texture();\n\n\t\tvar loader = new ImageLoader( this.manager );\n\t\tloader.setCrossOrigin( this.crossOrigin );\n\t\tloader.setPath( this.path );\n\n\t\tloader.load( url, function ( image ) {\n\n\t\t\ttexture.image = image;\n\n\t\t\t// JPEGs can't have an alpha channel, so memory can be saved by storing them as RGB.\n\t\t\tvar isJPEG = url.search( /\\.jpe?g($|\\?)/i ) > 0 || url.search( /^data\\:image\\/jpeg/ ) === 0;\n\n\t\t\ttexture.format = isJPEG ? RGBFormat : RGBAFormat;\n\t\t\ttexture.needsUpdate = true;\n\n\t\t\tif ( onLoad !== undefined ) {\n\n\t\t\t\tonLoad( texture );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t\treturn texture;\n\n\t}\n\n} );\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * Extensible curve object\n *\n * Some common of curve methods:\n * .getPoint( t, optionalTarget ), .getTangent( t )\n * .getPointAt( u, optionalTarget ), .getTangentAt( u )\n * .getPoints(), .getSpacedPoints()\n * .getLength()\n * .updateArcLengths()\n *\n * This following curves inherit from THREE.Curve:\n *\n * -- 2D curves --\n * THREE.ArcCurve\n * THREE.CubicBezierCurve\n * THREE.EllipseCurve\n * THREE.LineCurve\n * THREE.QuadraticBezierCurve\n * THREE.SplineCurve\n *\n * -- 3D curves --\n * THREE.CatmullRomCurve3\n * THREE.CubicBezierCurve3\n * THREE.LineCurve3\n * THREE.QuadraticBezierCurve3\n *\n * A series of curves can be represented as a THREE.CurvePath.\n *\n **/\n\n/**************************************************************\n *\tAbstract Curve base class\n **************************************************************/\n\nfunction Curve() {\n\n\tthis.type = 'Curve';\n\n\tthis.arcLengthDivisions = 200;\n\n}\n\nObject.assign( Curve.prototype, {\n\n\t// Virtual base class method to overwrite and implement in subclasses\n\t//\t- t [0 .. 1]\n\n\tgetPoint: function ( /* t, optionalTarget */ ) {\n\n\t\tconsole.warn( 'THREE.Curve: .getPoint() not implemented.' );\n\t\treturn null;\n\n\t},\n\n\t// Get point at relative position in curve according to arc length\n\t// - u [0 .. 1]\n\n\tgetPointAt: function ( u, optionalTarget ) {\n\n\t\tvar t = this.getUtoTmapping( u );\n\t\treturn this.getPoint( t, optionalTarget );\n\n\t},\n\n\t// Get sequence of points using getPoint( t )\n\n\tgetPoints: function ( divisions ) {\n\n\t\tif ( divisions === undefined ) divisions = 5;\n\n\t\tvar points = [];\n\n\t\tfor ( var d = 0; d <= divisions; d ++ ) {\n\n\t\t\tpoints.push( this.getPoint( d / divisions ) );\n\n\t\t}\n\n\t\treturn points;\n\n\t},\n\n\t// Get sequence of points using getPointAt( u )\n\n\tgetSpacedPoints: function ( divisions ) {\n\n\t\tif ( divisions === undefined ) divisions = 5;\n\n\t\tvar points = [];\n\n\t\tfor ( var d = 0; d <= divisions; d ++ ) {\n\n\t\t\tpoints.push( this.getPointAt( d / divisions ) );\n\n\t\t}\n\n\t\treturn points;\n\n\t},\n\n\t// Get total curve arc length\n\n\tgetLength: function () {\n\n\t\tvar lengths = this.getLengths();\n\t\treturn lengths[ lengths.length - 1 ];\n\n\t},\n\n\t// Get list of cumulative segment lengths\n\n\tgetLengths: function ( divisions ) {\n\n\t\tif ( divisions === undefined ) divisions = this.arcLengthDivisions;\n\n\t\tif ( this.cacheArcLengths &&\n\t\t\t( this.cacheArcLengths.length === divisions + 1 ) &&\n\t\t\t! this.needsUpdate ) {\n\n\t\t\treturn this.cacheArcLengths;\n\n\t\t}\n\n\t\tthis.needsUpdate = false;\n\n\t\tvar cache = [];\n\t\tvar current, last = this.getPoint( 0 );\n\t\tvar p, sum = 0;\n\n\t\tcache.push( 0 );\n\n\t\tfor ( p = 1; p <= divisions; p ++ ) {\n\n\t\t\tcurrent = this.getPoint( p / divisions );\n\t\t\tsum += current.distanceTo( last );\n\t\t\tcache.push( sum );\n\t\t\tlast = current;\n\n\t\t}\n\n\t\tthis.cacheArcLengths = cache;\n\n\t\treturn cache; // { sums: cache, sum: sum }; Sum is in the last element.\n\n\t},\n\n\tupdateArcLengths: function () {\n\n\t\tthis.needsUpdate = true;\n\t\tthis.getLengths();\n\n\t},\n\n\t// Given u ( 0 .. 1 ), get a t to find p. This gives you points which are equidistant\n\n\tgetUtoTmapping: function ( u, distance ) {\n\n\t\tvar arcLengths = this.getLengths();\n\n\t\tvar i = 0, il = arcLengths.length;\n\n\t\tvar targetArcLength; // The targeted u distance value to get\n\n\t\tif ( distance ) {\n\n\t\t\ttargetArcLength = distance;\n\n\t\t} else {\n\n\t\t\ttargetArcLength = u * arcLengths[ il - 1 ];\n\n\t\t}\n\n\t\t// binary search for the index with largest value smaller than target u distance\n\n\t\tvar low = 0, high = il - 1, comparison;\n\n\t\twhile ( low <= high ) {\n\n\t\t\ti = Math.floor( low + ( high - low ) / 2 ); // less likely to overflow, though probably not issue here, JS doesn't really have integers, all numbers are floats\n\n\t\t\tcomparison = arcLengths[ i ] - targetArcLength;\n\n\t\t\tif ( comparison < 0 ) {\n\n\t\t\t\tlow = i + 1;\n\n\t\t\t} else if ( comparison > 0 ) {\n\n\t\t\t\thigh = i - 1;\n\n\t\t\t} else {\n\n\t\t\t\thigh = i;\n\t\t\t\tbreak;\n\n\t\t\t\t// DONE\n\n\t\t\t}\n\n\t\t}\n\n\t\ti = high;\n\n\t\tif ( arcLengths[ i ] === targetArcLength ) {\n\n\t\t\treturn i / ( il - 1 );\n\n\t\t}\n\n\t\t// we could get finer grain at lengths, or use simple interpolation between two points\n\n\t\tvar lengthBefore = arcLengths[ i ];\n\t\tvar lengthAfter = arcLengths[ i + 1 ];\n\n\t\tvar segmentLength = lengthAfter - lengthBefore;\n\n\t\t// determine where we are between the 'before' and 'after' points\n\n\t\tvar segmentFraction = ( targetArcLength - lengthBefore ) / segmentLength;\n\n\t\t// add that fractional amount to t\n\n\t\tvar t = ( i + segmentFraction ) / ( il - 1 );\n\n\t\treturn t;\n\n\t},\n\n\t// Returns a unit vector tangent at t\n\t// In case any sub curve does not implement its tangent derivation,\n\t// 2 points a small delta apart will be used to find its gradient\n\t// which seems to give a reasonable approximation\n\n\tgetTangent: function ( t ) {\n\n\t\tvar delta = 0.0001;\n\t\tvar t1 = t - delta;\n\t\tvar t2 = t + delta;\n\n\t\t// Capping in case of danger\n\n\t\tif ( t1 < 0 ) t1 = 0;\n\t\tif ( t2 > 1 ) t2 = 1;\n\n\t\tvar pt1 = this.getPoint( t1 );\n\t\tvar pt2 = this.getPoint( t2 );\n\n\t\tvar vec = pt2.clone().sub( pt1 );\n\t\treturn vec.normalize();\n\n\t},\n\n\tgetTangentAt: function ( u ) {\n\n\t\tvar t = this.getUtoTmapping( u );\n\t\treturn this.getTangent( t );\n\n\t},\n\n\tcomputeFrenetFrames: function ( segments, closed ) {\n\n\t\t// see http://www.cs.indiana.edu/pub/techreports/TR425.pdf\n\n\t\tvar normal = new Vector3();\n\n\t\tvar tangents = [];\n\t\tvar normals = [];\n\t\tvar binormals = [];\n\n\t\tvar vec = new Vector3();\n\t\tvar mat = new Matrix4();\n\n\t\tvar i, u, theta;\n\n\t\t// compute the tangent vectors for each segment on the curve\n\n\t\tfor ( i = 0; i <= segments; i ++ ) {\n\n\t\t\tu = i / segments;\n\n\t\t\ttangents[ i ] = this.getTangentAt( u );\n\t\t\ttangents[ i ].normalize();\n\n\t\t}\n\n\t\t// select an initial normal vector perpendicular to the first tangent vector,\n\t\t// and in the direction of the minimum tangent xyz component\n\n\t\tnormals[ 0 ] = new Vector3();\n\t\tbinormals[ 0 ] = new Vector3();\n\t\tvar min = Number.MAX_VALUE;\n\t\tvar tx = Math.abs( tangents[ 0 ].x );\n\t\tvar ty = Math.abs( tangents[ 0 ].y );\n\t\tvar tz = Math.abs( tangents[ 0 ].z );\n\n\t\tif ( tx <= min ) {\n\n\t\t\tmin = tx;\n\t\t\tnormal.set( 1, 0, 0 );\n\n\t\t}\n\n\t\tif ( ty <= min ) {\n\n\t\t\tmin = ty;\n\t\t\tnormal.set( 0, 1, 0 );\n\n\t\t}\n\n\t\tif ( tz <= min ) {\n\n\t\t\tnormal.set( 0, 0, 1 );\n\n\t\t}\n\n\t\tvec.crossVectors( tangents[ 0 ], normal ).normalize();\n\n\t\tnormals[ 0 ].crossVectors( tangents[ 0 ], vec );\n\t\tbinormals[ 0 ].crossVectors( tangents[ 0 ], normals[ 0 ] );\n\n\n\t\t// compute the slowly-varying normal and binormal vectors for each segment on the curve\n\n\t\tfor ( i = 1; i <= segments; i ++ ) {\n\n\t\t\tnormals[ i ] = normals[ i - 1 ].clone();\n\n\t\t\tbinormals[ i ] = binormals[ i - 1 ].clone();\n\n\t\t\tvec.crossVectors( tangents[ i - 1 ], tangents[ i ] );\n\n\t\t\tif ( vec.length() > Number.EPSILON ) {\n\n\t\t\t\tvec.normalize();\n\n\t\t\t\ttheta = Math.acos( MathUtils.clamp( tangents[ i - 1 ].dot( tangents[ i ] ), - 1, 1 ) ); // clamp for floating pt errors\n\n\t\t\t\tnormals[ i ].applyMatrix4( mat.makeRotationAxis( vec, theta ) );\n\n\t\t\t}\n\n\t\t\tbinormals[ i ].crossVectors( tangents[ i ], normals[ i ] );\n\n\t\t}\n\n\t\t// if the curve is closed, postprocess the vectors so the first and last normal vectors are the same\n\n\t\tif ( closed === true ) {\n\n\t\t\ttheta = Math.acos( MathUtils.clamp( normals[ 0 ].dot( normals[ segments ] ), - 1, 1 ) );\n\t\t\ttheta /= segments;\n\n\t\t\tif ( tangents[ 0 ].dot( vec.crossVectors( normals[ 0 ], normals[ segments ] ) ) > 0 ) {\n\n\t\t\t\ttheta = - theta;\n\n\t\t\t}\n\n\t\t\tfor ( i = 1; i <= segments; i ++ ) {\n\n\t\t\t\t// twist a little...\n\t\t\t\tnormals[ i ].applyMatrix4( mat.makeRotationAxis( tangents[ i ], theta * i ) );\n\t\t\t\tbinormals[ i ].crossVectors( tangents[ i ], normals[ i ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn {\n\t\t\ttangents: tangents,\n\t\t\tnormals: normals,\n\t\t\tbinormals: binormals\n\t\t};\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.arcLengthDivisions = source.arcLengthDivisions;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tvar data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Curve',\n\t\t\t\tgenerator: 'Curve.toJSON'\n\t\t\t}\n\t\t};\n\n\t\tdata.arcLengthDivisions = this.arcLengthDivisions;\n\t\tdata.type = this.type;\n\n\t\treturn data;\n\n\t},\n\n\tfromJSON: function ( json ) {\n\n\t\tthis.arcLengthDivisions = json.arcLengthDivisions;\n\n\t\treturn this;\n\n\t}\n\n} );\n\nfunction EllipseCurve( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'EllipseCurve';\n\n\tthis.aX = aX || 0;\n\tthis.aY = aY || 0;\n\n\tthis.xRadius = xRadius || 1;\n\tthis.yRadius = yRadius || 1;\n\n\tthis.aStartAngle = aStartAngle || 0;\n\tthis.aEndAngle = aEndAngle || 2 * Math.PI;\n\n\tthis.aClockwise = aClockwise || false;\n\n\tthis.aRotation = aRotation || 0;\n\n}\n\nEllipseCurve.prototype = Object.create( Curve.prototype );\nEllipseCurve.prototype.constructor = EllipseCurve;\n\nEllipseCurve.prototype.isEllipseCurve = true;\n\nEllipseCurve.prototype.getPoint = function ( t, optionalTarget ) {\n\n\tvar point = optionalTarget || new Vector2();\n\n\tvar twoPi = Math.PI * 2;\n\tvar deltaAngle = this.aEndAngle - this.aStartAngle;\n\tvar samePoints = Math.abs( deltaAngle ) < Number.EPSILON;\n\n\t// ensures that deltaAngle is 0 .. 2 PI\n\twhile ( deltaAngle < 0 ) deltaAngle += twoPi;\n\twhile ( deltaAngle > twoPi ) deltaAngle -= twoPi;\n\n\tif ( deltaAngle < Number.EPSILON ) {\n\n\t\tif ( samePoints ) {\n\n\t\t\tdeltaAngle = 0;\n\n\t\t} else {\n\n\t\t\tdeltaAngle = twoPi;\n\n\t\t}\n\n\t}\n\n\tif ( this.aClockwise === true && ! samePoints ) {\n\n\t\tif ( deltaAngle === twoPi ) {\n\n\t\t\tdeltaAngle = - twoPi;\n\n\t\t} else {\n\n\t\t\tdeltaAngle = deltaAngle - twoPi;\n\n\t\t}\n\n\t}\n\n\tvar angle = this.aStartAngle + t * deltaAngle;\n\tvar x = this.aX + this.xRadius * Math.cos( angle );\n\tvar y = this.aY + this.yRadius * Math.sin( angle );\n\n\tif ( this.aRotation !== 0 ) {\n\n\t\tvar cos = Math.cos( this.aRotation );\n\t\tvar sin = Math.sin( this.aRotation );\n\n\t\tvar tx = x - this.aX;\n\t\tvar ty = y - this.aY;\n\n\t\t// Rotate the point about the center of the ellipse.\n\t\tx = tx * cos - ty * sin + this.aX;\n\t\ty = tx * sin + ty * cos + this.aY;\n\n\t}\n\n\treturn point.set( x, y );\n\n};\n\nEllipseCurve.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.aX = source.aX;\n\tthis.aY = source.aY;\n\n\tthis.xRadius = source.xRadius;\n\tthis.yRadius = source.yRadius;\n\n\tthis.aStartAngle = source.aStartAngle;\n\tthis.aEndAngle = source.aEndAngle;\n\n\tthis.aClockwise = source.aClockwise;\n\n\tthis.aRotation = source.aRotation;\n\n\treturn this;\n\n};\n\n\nEllipseCurve.prototype.toJSON = function () {\n\n\tvar data = Curve.prototype.toJSON.call( this );\n\n\tdata.aX = this.aX;\n\tdata.aY = this.aY;\n\n\tdata.xRadius = this.xRadius;\n\tdata.yRadius = this.yRadius;\n\n\tdata.aStartAngle = this.aStartAngle;\n\tdata.aEndAngle = this.aEndAngle;\n\n\tdata.aClockwise = this.aClockwise;\n\n\tdata.aRotation = this.aRotation;\n\n\treturn data;\n\n};\n\nEllipseCurve.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.aX = json.aX;\n\tthis.aY = json.aY;\n\n\tthis.xRadius = json.xRadius;\n\tthis.yRadius = json.yRadius;\n\n\tthis.aStartAngle = json.aStartAngle;\n\tthis.aEndAngle = json.aEndAngle;\n\n\tthis.aClockwise = json.aClockwise;\n\n\tthis.aRotation = json.aRotation;\n\n\treturn this;\n\n};\n\nfunction ArcCurve( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\n\n\tEllipseCurve.call( this, aX, aY, aRadius, aRadius, aStartAngle, aEndAngle, aClockwise );\n\n\tthis.type = 'ArcCurve';\n\n}\n\nArcCurve.prototype = Object.create( EllipseCurve.prototype );\nArcCurve.prototype.constructor = ArcCurve;\n\nArcCurve.prototype.isArcCurve = true;\n\n/**\n * @author zz85 https://github.com/zz85\n *\n * Centripetal CatmullRom Curve - which is useful for avoiding\n * cusps and self-intersections in non-uniform catmull rom curves.\n * http://www.cemyuksel.com/research/catmullrom_param/catmullrom.pdf\n *\n * curve.type accepts centripetal(default), chordal and catmullrom\n * curve.tension is used for catmullrom which defaults to 0.5\n */\n\n\n/*\nBased on an optimized c++ solution in\n - http://stackoverflow.com/questions/9489736/catmull-rom-curve-with-no-cusps-and-no-self-intersections/\n - http://ideone.com/NoEbVM\n\nThis CubicPoly class could be used for reusing some variables and calculations,\nbut for three.js curve use, it could be possible inlined and flatten into a single function call\nwhich can be placed in CurveUtils.\n*/\n\nfunction CubicPoly() {\n\n\tvar c0 = 0, c1 = 0, c2 = 0, c3 = 0;\n\n\t/*\n\t * Compute coefficients for a cubic polynomial\n\t *   p(s) = c0 + c1*s + c2*s^2 + c3*s^3\n\t * such that\n\t *   p(0) = x0, p(1) = x1\n\t *  and\n\t *   p'(0) = t0, p'(1) = t1.\n\t */\n\tfunction init( x0, x1, t0, t1 ) {\n\n\t\tc0 = x0;\n\t\tc1 = t0;\n\t\tc2 = - 3 * x0 + 3 * x1 - 2 * t0 - t1;\n\t\tc3 = 2 * x0 - 2 * x1 + t0 + t1;\n\n\t}\n\n\treturn {\n\n\t\tinitCatmullRom: function ( x0, x1, x2, x3, tension ) {\n\n\t\t\tinit( x1, x2, tension * ( x2 - x0 ), tension * ( x3 - x1 ) );\n\n\t\t},\n\n\t\tinitNonuniformCatmullRom: function ( x0, x1, x2, x3, dt0, dt1, dt2 ) {\n\n\t\t\t// compute tangents when parameterized in [t1,t2]\n\t\t\tvar t1 = ( x1 - x0 ) / dt0 - ( x2 - x0 ) / ( dt0 + dt1 ) + ( x2 - x1 ) / dt1;\n\t\t\tvar t2 = ( x2 - x1 ) / dt1 - ( x3 - x1 ) / ( dt1 + dt2 ) + ( x3 - x2 ) / dt2;\n\n\t\t\t// rescale tangents for parametrization in [0,1]\n\t\t\tt1 *= dt1;\n\t\t\tt2 *= dt1;\n\n\t\t\tinit( x1, x2, t1, t2 );\n\n\t\t},\n\n\t\tcalc: function ( t ) {\n\n\t\t\tvar t2 = t * t;\n\t\t\tvar t3 = t2 * t;\n\t\t\treturn c0 + c1 * t + c2 * t2 + c3 * t3;\n\n\t\t}\n\n\t};\n\n}\n\n//\n\nvar tmp = new Vector3();\nvar px = new CubicPoly(), py = new CubicPoly(), pz = new CubicPoly();\n\nfunction CatmullRomCurve3( points, closed, curveType, tension ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'CatmullRomCurve3';\n\n\tthis.points = points || [];\n\tthis.closed = closed || false;\n\tthis.curveType = curveType || 'centripetal';\n\tthis.tension = tension || 0.5;\n\n}\n\nCatmullRomCurve3.prototype = Object.create( Curve.prototype );\nCatmullRomCurve3.prototype.constructor = CatmullRomCurve3;\n\nCatmullRomCurve3.prototype.isCatmullRomCurve3 = true;\n\nCatmullRomCurve3.prototype.getPoint = function ( t, optionalTarget ) {\n\n\tvar point = optionalTarget || new Vector3();\n\n\tvar points = this.points;\n\tvar l = points.length;\n\n\tvar p = ( l - ( this.closed ? 0 : 1 ) ) * t;\n\tvar intPoint = Math.floor( p );\n\tvar weight = p - intPoint;\n\n\tif ( this.closed ) {\n\n\t\tintPoint += intPoint > 0 ? 0 : ( Math.floor( Math.abs( intPoint ) / l ) + 1 ) * l;\n\n\t} else if ( weight === 0 && intPoint === l - 1 ) {\n\n\t\tintPoint = l - 2;\n\t\tweight = 1;\n\n\t}\n\n\tvar p0, p1, p2, p3; // 4 points\n\n\tif ( this.closed || intPoint > 0 ) {\n\n\t\tp0 = points[ ( intPoint - 1 ) % l ];\n\n\t} else {\n\n\t\t// extrapolate first point\n\t\ttmp.subVectors( points[ 0 ], points[ 1 ] ).add( points[ 0 ] );\n\t\tp0 = tmp;\n\n\t}\n\n\tp1 = points[ intPoint % l ];\n\tp2 = points[ ( intPoint + 1 ) % l ];\n\n\tif ( this.closed || intPoint + 2 < l ) {\n\n\t\tp3 = points[ ( intPoint + 2 ) % l ];\n\n\t} else {\n\n\t\t// extrapolate last point\n\t\ttmp.subVectors( points[ l - 1 ], points[ l - 2 ] ).add( points[ l - 1 ] );\n\t\tp3 = tmp;\n\n\t}\n\n\tif ( this.curveType === 'centripetal' || this.curveType === 'chordal' ) {\n\n\t\t// init Centripetal / Chordal Catmull-Rom\n\t\tvar pow = this.curveType === 'chordal' ? 0.5 : 0.25;\n\t\tvar dt0 = Math.pow( p0.distanceToSquared( p1 ), pow );\n\t\tvar dt1 = Math.pow( p1.distanceToSquared( p2 ), pow );\n\t\tvar dt2 = Math.pow( p2.distanceToSquared( p3 ), pow );\n\n\t\t// safety check for repeated points\n\t\tif ( dt1 < 1e-4 ) dt1 = 1.0;\n\t\tif ( dt0 < 1e-4 ) dt0 = dt1;\n\t\tif ( dt2 < 1e-4 ) dt2 = dt1;\n\n\t\tpx.initNonuniformCatmullRom( p0.x, p1.x, p2.x, p3.x, dt0, dt1, dt2 );\n\t\tpy.initNonuniformCatmullRom( p0.y, p1.y, p2.y, p3.y, dt0, dt1, dt2 );\n\t\tpz.initNonuniformCatmullRom( p0.z, p1.z, p2.z, p3.z, dt0, dt1, dt2 );\n\n\t} else if ( this.curveType === 'catmullrom' ) {\n\n\t\tpx.initCatmullRom( p0.x, p1.x, p2.x, p3.x, this.tension );\n\t\tpy.initCatmullRom( p0.y, p1.y, p2.y, p3.y, this.tension );\n\t\tpz.initCatmullRom( p0.z, p1.z, p2.z, p3.z, this.tension );\n\n\t}\n\n\tpoint.set(\n\t\tpx.calc( weight ),\n\t\tpy.calc( weight ),\n\t\tpz.calc( weight )\n\t);\n\n\treturn point;\n\n};\n\nCatmullRomCurve3.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.points = [];\n\n\tfor ( var i = 0, l = source.points.length; i < l; i ++ ) {\n\n\t\tvar point = source.points[ i ];\n\n\t\tthis.points.push( point.clone() );\n\n\t}\n\n\tthis.closed = source.closed;\n\tthis.curveType = source.curveType;\n\tthis.tension = source.tension;\n\n\treturn this;\n\n};\n\nCatmullRomCurve3.prototype.toJSON = function () {\n\n\tvar data = Curve.prototype.toJSON.call( this );\n\n\tdata.points = [];\n\n\tfor ( var i = 0, l = this.points.length; i < l; i ++ ) {\n\n\t\tvar point = this.points[ i ];\n\t\tdata.points.push( point.toArray() );\n\n\t}\n\n\tdata.closed = this.closed;\n\tdata.curveType = this.curveType;\n\tdata.tension = this.tension;\n\n\treturn data;\n\n};\n\nCatmullRomCurve3.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.points = [];\n\n\tfor ( var i = 0, l = json.points.length; i < l; i ++ ) {\n\n\t\tvar point = json.points[ i ];\n\t\tthis.points.push( new Vector3().fromArray( point ) );\n\n\t}\n\n\tthis.closed = json.closed;\n\tthis.curveType = json.curveType;\n\tthis.tension = json.tension;\n\n\treturn this;\n\n};\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n *\n * Bezier Curves formulas obtained from\n * http://en.wikipedia.org/wiki/Bézier_curve\n */\n\nfunction CatmullRom( t, p0, p1, p2, p3 ) {\n\n\tvar v0 = ( p2 - p0 ) * 0.5;\n\tvar v1 = ( p3 - p1 ) * 0.5;\n\tvar t2 = t * t;\n\tvar t3 = t * t2;\n\treturn ( 2 * p1 - 2 * p2 + v0 + v1 ) * t3 + ( - 3 * p1 + 3 * p2 - 2 * v0 - v1 ) * t2 + v0 * t + p1;\n\n}\n\n//\n\nfunction QuadraticBezierP0( t, p ) {\n\n\tvar k = 1 - t;\n\treturn k * k * p;\n\n}\n\nfunction QuadraticBezierP1( t, p ) {\n\n\treturn 2 * ( 1 - t ) * t * p;\n\n}\n\nfunction QuadraticBezierP2( t, p ) {\n\n\treturn t * t * p;\n\n}\n\nfunction QuadraticBezier( t, p0, p1, p2 ) {\n\n\treturn QuadraticBezierP0( t, p0 ) + QuadraticBezierP1( t, p1 ) +\n\t\tQuadraticBezierP2( t, p2 );\n\n}\n\n//\n\nfunction CubicBezierP0( t, p ) {\n\n\tvar k = 1 - t;\n\treturn k * k * k * p;\n\n}\n\nfunction CubicBezierP1( t, p ) {\n\n\tvar k = 1 - t;\n\treturn 3 * k * k * t * p;\n\n}\n\nfunction CubicBezierP2( t, p ) {\n\n\treturn 3 * ( 1 - t ) * t * t * p;\n\n}\n\nfunction CubicBezierP3( t, p ) {\n\n\treturn t * t * t * p;\n\n}\n\nfunction CubicBezier( t, p0, p1, p2, p3 ) {\n\n\treturn CubicBezierP0( t, p0 ) + CubicBezierP1( t, p1 ) + CubicBezierP2( t, p2 ) +\n\t\tCubicBezierP3( t, p3 );\n\n}\n\nfunction CubicBezierCurve( v0, v1, v2, v3 ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'CubicBezierCurve';\n\n\tthis.v0 = v0 || new Vector2();\n\tthis.v1 = v1 || new Vector2();\n\tthis.v2 = v2 || new Vector2();\n\tthis.v3 = v3 || new Vector2();\n\n}\n\nCubicBezierCurve.prototype = Object.create( Curve.prototype );\nCubicBezierCurve.prototype.constructor = CubicBezierCurve;\n\nCubicBezierCurve.prototype.isCubicBezierCurve = true;\n\nCubicBezierCurve.prototype.getPoint = function ( t, optionalTarget ) {\n\n\tvar point = optionalTarget || new Vector2();\n\n\tvar v0 = this.v0, v1 = this.v1, v2 = this.v2, v3 = this.v3;\n\n\tpoint.set(\n\t\tCubicBezier( t, v0.x, v1.x, v2.x, v3.x ),\n\t\tCubicBezier( t, v0.y, v1.y, v2.y, v3.y )\n\t);\n\n\treturn point;\n\n};\n\nCubicBezierCurve.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.v0.copy( source.v0 );\n\tthis.v1.copy( source.v1 );\n\tthis.v2.copy( source.v2 );\n\tthis.v3.copy( source.v3 );\n\n\treturn this;\n\n};\n\nCubicBezierCurve.prototype.toJSON = function () {\n\n\tvar data = Curve.prototype.toJSON.call( this );\n\n\tdata.v0 = this.v0.toArray();\n\tdata.v1 = this.v1.toArray();\n\tdata.v2 = this.v2.toArray();\n\tdata.v3 = this.v3.toArray();\n\n\treturn data;\n\n};\n\nCubicBezierCurve.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.v0.fromArray( json.v0 );\n\tthis.v1.fromArray( json.v1 );\n\tthis.v2.fromArray( json.v2 );\n\tthis.v3.fromArray( json.v3 );\n\n\treturn this;\n\n};\n\nfunction CubicBezierCurve3( v0, v1, v2, v3 ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'CubicBezierCurve3';\n\n\tthis.v0 = v0 || new Vector3();\n\tthis.v1 = v1 || new Vector3();\n\tthis.v2 = v2 || new Vector3();\n\tthis.v3 = v3 || new Vector3();\n\n}\n\nCubicBezierCurve3.prototype = Object.create( Curve.prototype );\nCubicBezierCurve3.prototype.constructor = CubicBezierCurve3;\n\nCubicBezierCurve3.prototype.isCubicBezierCurve3 = true;\n\nCubicBezierCurve3.prototype.getPoint = function ( t, optionalTarget ) {\n\n\tvar point = optionalTarget || new Vector3();\n\n\tvar v0 = this.v0, v1 = this.v1, v2 = this.v2, v3 = this.v3;\n\n\tpoint.set(\n\t\tCubicBezier( t, v0.x, v1.x, v2.x, v3.x ),\n\t\tCubicBezier( t, v0.y, v1.y, v2.y, v3.y ),\n\t\tCubicBezier( t, v0.z, v1.z, v2.z, v3.z )\n\t);\n\n\treturn point;\n\n};\n\nCubicBezierCurve3.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.v0.copy( source.v0 );\n\tthis.v1.copy( source.v1 );\n\tthis.v2.copy( source.v2 );\n\tthis.v3.copy( source.v3 );\n\n\treturn this;\n\n};\n\nCubicBezierCurve3.prototype.toJSON = function () {\n\n\tvar data = Curve.prototype.toJSON.call( this );\n\n\tdata.v0 = this.v0.toArray();\n\tdata.v1 = this.v1.toArray();\n\tdata.v2 = this.v2.toArray();\n\tdata.v3 = this.v3.toArray();\n\n\treturn data;\n\n};\n\nCubicBezierCurve3.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.v0.fromArray( json.v0 );\n\tthis.v1.fromArray( json.v1 );\n\tthis.v2.fromArray( json.v2 );\n\tthis.v3.fromArray( json.v3 );\n\n\treturn this;\n\n};\n\nfunction LineCurve( v1, v2 ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'LineCurve';\n\n\tthis.v1 = v1 || new Vector2();\n\tthis.v2 = v2 || new Vector2();\n\n}\n\nLineCurve.prototype = Object.create( Curve.prototype );\nLineCurve.prototype.constructor = LineCurve;\n\nLineCurve.prototype.isLineCurve = true;\n\nLineCurve.prototype.getPoint = function ( t, optionalTarget ) {\n\n\tvar point = optionalTarget || new Vector2();\n\n\tif ( t === 1 ) {\n\n\t\tpoint.copy( this.v2 );\n\n\t} else {\n\n\t\tpoint.copy( this.v2 ).sub( this.v1 );\n\t\tpoint.multiplyScalar( t ).add( this.v1 );\n\n\t}\n\n\treturn point;\n\n};\n\n// Line curve is linear, so we can overwrite default getPointAt\n\nLineCurve.prototype.getPointAt = function ( u, optionalTarget ) {\n\n\treturn this.getPoint( u, optionalTarget );\n\n};\n\nLineCurve.prototype.getTangent = function ( /* t */ ) {\n\n\tvar tangent = this.v2.clone().sub( this.v1 );\n\n\treturn tangent.normalize();\n\n};\n\nLineCurve.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.v1.copy( source.v1 );\n\tthis.v2.copy( source.v2 );\n\n\treturn this;\n\n};\n\nLineCurve.prototype.toJSON = function () {\n\n\tvar data = Curve.prototype.toJSON.call( this );\n\n\tdata.v1 = this.v1.toArray();\n\tdata.v2 = this.v2.toArray();\n\n\treturn data;\n\n};\n\nLineCurve.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.v1.fromArray( json.v1 );\n\tthis.v2.fromArray( json.v2 );\n\n\treturn this;\n\n};\n\nfunction LineCurve3( v1, v2 ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'LineCurve3';\n\n\tthis.v1 = v1 || new Vector3();\n\tthis.v2 = v2 || new Vector3();\n\n}\n\nLineCurve3.prototype = Object.create( Curve.prototype );\nLineCurve3.prototype.constructor = LineCurve3;\n\nLineCurve3.prototype.isLineCurve3 = true;\n\nLineCurve3.prototype.getPoint = function ( t, optionalTarget ) {\n\n\tvar point = optionalTarget || new Vector3();\n\n\tif ( t === 1 ) {\n\n\t\tpoint.copy( this.v2 );\n\n\t} else {\n\n\t\tpoint.copy( this.v2 ).sub( this.v1 );\n\t\tpoint.multiplyScalar( t ).add( this.v1 );\n\n\t}\n\n\treturn point;\n\n};\n\n// Line curve is linear, so we can overwrite default getPointAt\n\nLineCurve3.prototype.getPointAt = function ( u, optionalTarget ) {\n\n\treturn this.getPoint( u, optionalTarget );\n\n};\n\nLineCurve3.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.v1.copy( source.v1 );\n\tthis.v2.copy( source.v2 );\n\n\treturn this;\n\n};\n\nLineCurve3.prototype.toJSON = function () {\n\n\tvar data = Curve.prototype.toJSON.call( this );\n\n\tdata.v1 = this.v1.toArray();\n\tdata.v2 = this.v2.toArray();\n\n\treturn data;\n\n};\n\nLineCurve3.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.v1.fromArray( json.v1 );\n\tthis.v2.fromArray( json.v2 );\n\n\treturn this;\n\n};\n\nfunction QuadraticBezierCurve( v0, v1, v2 ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'QuadraticBezierCurve';\n\n\tthis.v0 = v0 || new Vector2();\n\tthis.v1 = v1 || new Vector2();\n\tthis.v2 = v2 || new Vector2();\n\n}\n\nQuadraticBezierCurve.prototype = Object.create( Curve.prototype );\nQuadraticBezierCurve.prototype.constructor = QuadraticBezierCurve;\n\nQuadraticBezierCurve.prototype.isQuadraticBezierCurve = true;\n\nQuadraticBezierCurve.prototype.getPoint = function ( t, optionalTarget ) {\n\n\tvar point = optionalTarget || new Vector2();\n\n\tvar v0 = this.v0, v1 = this.v1, v2 = this.v2;\n\n\tpoint.set(\n\t\tQuadraticBezier( t, v0.x, v1.x, v2.x ),\n\t\tQuadraticBezier( t, v0.y, v1.y, v2.y )\n\t);\n\n\treturn point;\n\n};\n\nQuadraticBezierCurve.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.v0.copy( source.v0 );\n\tthis.v1.copy( source.v1 );\n\tthis.v2.copy( source.v2 );\n\n\treturn this;\n\n};\n\nQuadraticBezierCurve.prototype.toJSON = function () {\n\n\tvar data = Curve.prototype.toJSON.call( this );\n\n\tdata.v0 = this.v0.toArray();\n\tdata.v1 = this.v1.toArray();\n\tdata.v2 = this.v2.toArray();\n\n\treturn data;\n\n};\n\nQuadraticBezierCurve.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.v0.fromArray( json.v0 );\n\tthis.v1.fromArray( json.v1 );\n\tthis.v2.fromArray( json.v2 );\n\n\treturn this;\n\n};\n\nfunction QuadraticBezierCurve3( v0, v1, v2 ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'QuadraticBezierCurve3';\n\n\tthis.v0 = v0 || new Vector3();\n\tthis.v1 = v1 || new Vector3();\n\tthis.v2 = v2 || new Vector3();\n\n}\n\nQuadraticBezierCurve3.prototype = Object.create( Curve.prototype );\nQuadraticBezierCurve3.prototype.constructor = QuadraticBezierCurve3;\n\nQuadraticBezierCurve3.prototype.isQuadraticBezierCurve3 = true;\n\nQuadraticBezierCurve3.prototype.getPoint = function ( t, optionalTarget ) {\n\n\tvar point = optionalTarget || new Vector3();\n\n\tvar v0 = this.v0, v1 = this.v1, v2 = this.v2;\n\n\tpoint.set(\n\t\tQuadraticBezier( t, v0.x, v1.x, v2.x ),\n\t\tQuadraticBezier( t, v0.y, v1.y, v2.y ),\n\t\tQuadraticBezier( t, v0.z, v1.z, v2.z )\n\t);\n\n\treturn point;\n\n};\n\nQuadraticBezierCurve3.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.v0.copy( source.v0 );\n\tthis.v1.copy( source.v1 );\n\tthis.v2.copy( source.v2 );\n\n\treturn this;\n\n};\n\nQuadraticBezierCurve3.prototype.toJSON = function () {\n\n\tvar data = Curve.prototype.toJSON.call( this );\n\n\tdata.v0 = this.v0.toArray();\n\tdata.v1 = this.v1.toArray();\n\tdata.v2 = this.v2.toArray();\n\n\treturn data;\n\n};\n\nQuadraticBezierCurve3.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.v0.fromArray( json.v0 );\n\tthis.v1.fromArray( json.v1 );\n\tthis.v2.fromArray( json.v2 );\n\n\treturn this;\n\n};\n\nfunction SplineCurve( points /* array of Vector2 */ ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'SplineCurve';\n\n\tthis.points = points || [];\n\n}\n\nSplineCurve.prototype = Object.create( Curve.prototype );\nSplineCurve.prototype.constructor = SplineCurve;\n\nSplineCurve.prototype.isSplineCurve = true;\n\nSplineCurve.prototype.getPoint = function ( t, optionalTarget ) {\n\n\tvar point = optionalTarget || new Vector2();\n\n\tvar points = this.points;\n\tvar p = ( points.length - 1 ) * t;\n\n\tvar intPoint = Math.floor( p );\n\tvar weight = p - intPoint;\n\n\tvar p0 = points[ intPoint === 0 ? intPoint : intPoint - 1 ];\n\tvar p1 = points[ intPoint ];\n\tvar p2 = points[ intPoint > points.length - 2 ? points.length - 1 : intPoint + 1 ];\n\tvar p3 = points[ intPoint > points.length - 3 ? points.length - 1 : intPoint + 2 ];\n\n\tpoint.set(\n\t\tCatmullRom( weight, p0.x, p1.x, p2.x, p3.x ),\n\t\tCatmullRom( weight, p0.y, p1.y, p2.y, p3.y )\n\t);\n\n\treturn point;\n\n};\n\nSplineCurve.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.points = [];\n\n\tfor ( var i = 0, l = source.points.length; i < l; i ++ ) {\n\n\t\tvar point = source.points[ i ];\n\n\t\tthis.points.push( point.clone() );\n\n\t}\n\n\treturn this;\n\n};\n\nSplineCurve.prototype.toJSON = function () {\n\n\tvar data = Curve.prototype.toJSON.call( this );\n\n\tdata.points = [];\n\n\tfor ( var i = 0, l = this.points.length; i < l; i ++ ) {\n\n\t\tvar point = this.points[ i ];\n\t\tdata.points.push( point.toArray() );\n\n\t}\n\n\treturn data;\n\n};\n\nSplineCurve.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.points = [];\n\n\tfor ( var i = 0, l = json.points.length; i < l; i ++ ) {\n\n\t\tvar point = json.points[ i ];\n\t\tthis.points.push( new Vector2().fromArray( point ) );\n\n\t}\n\n\treturn this;\n\n};\n\n\n\nvar Curves = /*#__PURE__*/Object.freeze({\n\t__proto__: null,\n\tArcCurve: ArcCurve,\n\tCatmullRomCurve3: CatmullRomCurve3,\n\tCubicBezierCurve: CubicBezierCurve,\n\tCubicBezierCurve3: CubicBezierCurve3,\n\tEllipseCurve: EllipseCurve,\n\tLineCurve: LineCurve,\n\tLineCurve3: LineCurve3,\n\tQuadraticBezierCurve: QuadraticBezierCurve,\n\tQuadraticBezierCurve3: QuadraticBezierCurve3,\n\tSplineCurve: SplineCurve\n});\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n *\n **/\n\n/**************************************************************\n *\tCurved Path - a curve path is simply a array of connected\n *  curves, but retains the api of a curve\n **************************************************************/\n\nfunction CurvePath() {\n\n\tCurve.call( this );\n\n\tthis.type = 'CurvePath';\n\n\tthis.curves = [];\n\tthis.autoClose = false; // Automatically closes the path\n\n}\n\nCurvePath.prototype = Object.assign( Object.create( Curve.prototype ), {\n\n\tconstructor: CurvePath,\n\n\tadd: function ( curve ) {\n\n\t\tthis.curves.push( curve );\n\n\t},\n\n\tclosePath: function () {\n\n\t\t// Add a line curve if start and end of lines are not connected\n\t\tvar startPoint = this.curves[ 0 ].getPoint( 0 );\n\t\tvar endPoint = this.curves[ this.curves.length - 1 ].getPoint( 1 );\n\n\t\tif ( ! startPoint.equals( endPoint ) ) {\n\n\t\t\tthis.curves.push( new LineCurve( endPoint, startPoint ) );\n\n\t\t}\n\n\t},\n\n\t// To get accurate point with reference to\n\t// entire path distance at time t,\n\t// following has to be done:\n\n\t// 1. Length of each sub path have to be known\n\t// 2. Locate and identify type of curve\n\t// 3. Get t for the curve\n\t// 4. Return curve.getPointAt(t')\n\n\tgetPoint: function ( t ) {\n\n\t\tvar d = t * this.getLength();\n\t\tvar curveLengths = this.getCurveLengths();\n\t\tvar i = 0;\n\n\t\t// To think about boundaries points.\n\n\t\twhile ( i < curveLengths.length ) {\n\n\t\t\tif ( curveLengths[ i ] >= d ) {\n\n\t\t\t\tvar diff = curveLengths[ i ] - d;\n\t\t\t\tvar curve = this.curves[ i ];\n\n\t\t\t\tvar segmentLength = curve.getLength();\n\t\t\t\tvar u = segmentLength === 0 ? 0 : 1 - diff / segmentLength;\n\n\t\t\t\treturn curve.getPointAt( u );\n\n\t\t\t}\n\n\t\t\ti ++;\n\n\t\t}\n\n\t\treturn null;\n\n\t\t// loop where sum != 0, sum > d , sum+1 <d\n\n\t},\n\n\t// We cannot use the default THREE.Curve getPoint() with getLength() because in\n\t// THREE.Curve, getLength() depends on getPoint() but in THREE.CurvePath\n\t// getPoint() depends on getLength\n\n\tgetLength: function () {\n\n\t\tvar lens = this.getCurveLengths();\n\t\treturn lens[ lens.length - 1 ];\n\n\t},\n\n\t// cacheLengths must be recalculated.\n\tupdateArcLengths: function () {\n\n\t\tthis.needsUpdate = true;\n\t\tthis.cacheLengths = null;\n\t\tthis.getCurveLengths();\n\n\t},\n\n\t// Compute lengths and cache them\n\t// We cannot overwrite getLengths() because UtoT mapping uses it.\n\n\tgetCurveLengths: function () {\n\n\t\t// We use cache values if curves and cache array are same length\n\n\t\tif ( this.cacheLengths && this.cacheLengths.length === this.curves.length ) {\n\n\t\t\treturn this.cacheLengths;\n\n\t\t}\n\n\t\t// Get length of sub-curve\n\t\t// Push sums into cached array\n\n\t\tvar lengths = [], sums = 0;\n\n\t\tfor ( var i = 0, l = this.curves.length; i < l; i ++ ) {\n\n\t\t\tsums += this.curves[ i ].getLength();\n\t\t\tlengths.push( sums );\n\n\t\t}\n\n\t\tthis.cacheLengths = lengths;\n\n\t\treturn lengths;\n\n\t},\n\n\tgetSpacedPoints: function ( divisions ) {\n\n\t\tif ( divisions === undefined ) divisions = 40;\n\n\t\tvar points = [];\n\n\t\tfor ( var i = 0; i <= divisions; i ++ ) {\n\n\t\t\tpoints.push( this.getPoint( i / divisions ) );\n\n\t\t}\n\n\t\tif ( this.autoClose ) {\n\n\t\t\tpoints.push( points[ 0 ] );\n\n\t\t}\n\n\t\treturn points;\n\n\t},\n\n\tgetPoints: function ( divisions ) {\n\n\t\tdivisions = divisions || 12;\n\n\t\tvar points = [], last;\n\n\t\tfor ( var i = 0, curves = this.curves; i < curves.length; i ++ ) {\n\n\t\t\tvar curve = curves[ i ];\n\t\t\tvar resolution = ( curve && curve.isEllipseCurve ) ? divisions * 2\n\t\t\t\t: ( curve && ( curve.isLineCurve || curve.isLineCurve3 ) ) ? 1\n\t\t\t\t\t: ( curve && curve.isSplineCurve ) ? divisions * curve.points.length\n\t\t\t\t\t\t: divisions;\n\n\t\t\tvar pts = curve.getPoints( resolution );\n\n\t\t\tfor ( var j = 0; j < pts.length; j ++ ) {\n\n\t\t\t\tvar point = pts[ j ];\n\n\t\t\t\tif ( last && last.equals( point ) ) continue; // ensures no consecutive points are duplicates\n\n\t\t\t\tpoints.push( point );\n\t\t\t\tlast = point;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.autoClose && points.length > 1 && ! points[ points.length - 1 ].equals( points[ 0 ] ) ) {\n\n\t\t\tpoints.push( points[ 0 ] );\n\n\t\t}\n\n\t\treturn points;\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tCurve.prototype.copy.call( this, source );\n\n\t\tthis.curves = [];\n\n\t\tfor ( var i = 0, l = source.curves.length; i < l; i ++ ) {\n\n\t\t\tvar curve = source.curves[ i ];\n\n\t\t\tthis.curves.push( curve.clone() );\n\n\t\t}\n\n\t\tthis.autoClose = source.autoClose;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tvar data = Curve.prototype.toJSON.call( this );\n\n\t\tdata.autoClose = this.autoClose;\n\t\tdata.curves = [];\n\n\t\tfor ( var i = 0, l = this.curves.length; i < l; i ++ ) {\n\n\t\t\tvar curve = this.curves[ i ];\n\t\t\tdata.curves.push( curve.toJSON() );\n\n\t\t}\n\n\t\treturn data;\n\n\t},\n\n\tfromJSON: function ( json ) {\n\n\t\tCurve.prototype.fromJSON.call( this, json );\n\n\t\tthis.autoClose = json.autoClose;\n\t\tthis.curves = [];\n\n\t\tfor ( var i = 0, l = json.curves.length; i < l; i ++ ) {\n\n\t\t\tvar curve = json.curves[ i ];\n\t\t\tthis.curves.push( new Curves[ curve.type ]().fromJSON( curve ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n} );\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * Creates free form 2d path using series of points, lines or curves.\n **/\n\nfunction Path( points ) {\n\n\tCurvePath.call( this );\n\n\tthis.type = 'Path';\n\n\tthis.currentPoint = new Vector2();\n\n\tif ( points ) {\n\n\t\tthis.setFromPoints( points );\n\n\t}\n\n}\n\nPath.prototype = Object.assign( Object.create( CurvePath.prototype ), {\n\n\tconstructor: Path,\n\n\tsetFromPoints: function ( points ) {\n\n\t\tthis.moveTo( points[ 0 ].x, points[ 0 ].y );\n\n\t\tfor ( var i = 1, l = points.length; i < l; i ++ ) {\n\n\t\t\tthis.lineTo( points[ i ].x, points[ i ].y );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tmoveTo: function ( x, y ) {\n\n\t\tthis.currentPoint.set( x, y ); // TODO consider referencing vectors instead of copying?\n\n\t\treturn this;\n\n\t},\n\n\tlineTo: function ( x, y ) {\n\n\t\tvar curve = new LineCurve( this.currentPoint.clone(), new Vector2( x, y ) );\n\t\tthis.curves.push( curve );\n\n\t\tthis.currentPoint.set( x, y );\n\n\t\treturn this;\n\n\t},\n\n\tquadraticCurveTo: function ( aCPx, aCPy, aX, aY ) {\n\n\t\tvar curve = new QuadraticBezierCurve(\n\t\t\tthis.currentPoint.clone(),\n\t\t\tnew Vector2( aCPx, aCPy ),\n\t\t\tnew Vector2( aX, aY )\n\t\t);\n\n\t\tthis.curves.push( curve );\n\n\t\tthis.currentPoint.set( aX, aY );\n\n\t\treturn this;\n\n\t},\n\n\tbezierCurveTo: function ( aCP1x, aCP1y, aCP2x, aCP2y, aX, aY ) {\n\n\t\tvar curve = new CubicBezierCurve(\n\t\t\tthis.currentPoint.clone(),\n\t\t\tnew Vector2( aCP1x, aCP1y ),\n\t\t\tnew Vector2( aCP2x, aCP2y ),\n\t\t\tnew Vector2( aX, aY )\n\t\t);\n\n\t\tthis.curves.push( curve );\n\n\t\tthis.currentPoint.set( aX, aY );\n\n\t\treturn this;\n\n\t},\n\n\tsplineThru: function ( pts /*Array of Vector*/ ) {\n\n\t\tvar npts = [ this.currentPoint.clone() ].concat( pts );\n\n\t\tvar curve = new SplineCurve( npts );\n\t\tthis.curves.push( curve );\n\n\t\tthis.currentPoint.copy( pts[ pts.length - 1 ] );\n\n\t\treturn this;\n\n\t},\n\n\tarc: function ( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\n\n\t\tvar x0 = this.currentPoint.x;\n\t\tvar y0 = this.currentPoint.y;\n\n\t\tthis.absarc( aX + x0, aY + y0, aRadius,\n\t\t\taStartAngle, aEndAngle, aClockwise );\n\n\t\treturn this;\n\n\t},\n\n\tabsarc: function ( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\n\n\t\tthis.absellipse( aX, aY, aRadius, aRadius, aStartAngle, aEndAngle, aClockwise );\n\n\t\treturn this;\n\n\t},\n\n\tellipse: function ( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\n\n\t\tvar x0 = this.currentPoint.x;\n\t\tvar y0 = this.currentPoint.y;\n\n\t\tthis.absellipse( aX + x0, aY + y0, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation );\n\n\t\treturn this;\n\n\t},\n\n\tabsellipse: function ( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\n\n\t\tvar curve = new EllipseCurve( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation );\n\n\t\tif ( this.curves.length > 0 ) {\n\n\t\t\t// if a previous curve is present, attempt to join\n\t\t\tvar firstPoint = curve.getPoint( 0 );\n\n\t\t\tif ( ! firstPoint.equals( this.currentPoint ) ) {\n\n\t\t\t\tthis.lineTo( firstPoint.x, firstPoint.y );\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.curves.push( curve );\n\n\t\tvar lastPoint = curve.getPoint( 1 );\n\t\tthis.currentPoint.copy( lastPoint );\n\n\t\treturn this;\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tCurvePath.prototype.copy.call( this, source );\n\n\t\tthis.currentPoint.copy( source.currentPoint );\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tvar data = CurvePath.prototype.toJSON.call( this );\n\n\t\tdata.currentPoint = this.currentPoint.toArray();\n\n\t\treturn data;\n\n\t},\n\n\tfromJSON: function ( json ) {\n\n\t\tCurvePath.prototype.fromJSON.call( this, json );\n\n\t\tthis.currentPoint.fromArray( json.currentPoint );\n\n\t\treturn this;\n\n\t}\n\n} );\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * Defines a 2d shape plane using paths.\n **/\n\n// STEP 1 Create a path.\n// STEP 2 Turn path into shape.\n// STEP 3 ExtrudeGeometry takes in Shape/Shapes\n// STEP 3a - Extract points from each shape, turn to vertices\n// STEP 3b - Triangulate each shape, add faces.\n\nfunction Shape( points ) {\n\n\tPath.call( this, points );\n\n\tthis.uuid = MathUtils.generateUUID();\n\n\tthis.type = 'Shape';\n\n\tthis.holes = [];\n\n}\n\nShape.prototype = Object.assign( Object.create( Path.prototype ), {\n\n\tconstructor: Shape,\n\n\tgetPointsHoles: function ( divisions ) {\n\n\t\tvar holesPts = [];\n\n\t\tfor ( var i = 0, l = this.holes.length; i < l; i ++ ) {\n\n\t\t\tholesPts[ i ] = this.holes[ i ].getPoints( divisions );\n\n\t\t}\n\n\t\treturn holesPts;\n\n\t},\n\n\t// get points of shape and holes (keypoints based on segments parameter)\n\n\textractPoints: function ( divisions ) {\n\n\t\treturn {\n\n\t\t\tshape: this.getPoints( divisions ),\n\t\t\tholes: this.getPointsHoles( divisions )\n\n\t\t};\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tPath.prototype.copy.call( this, source );\n\n\t\tthis.holes = [];\n\n\t\tfor ( var i = 0, l = source.holes.length; i < l; i ++ ) {\n\n\t\t\tvar hole = source.holes[ i ];\n\n\t\t\tthis.holes.push( hole.clone() );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tvar data = Path.prototype.toJSON.call( this );\n\n\t\tdata.uuid = this.uuid;\n\t\tdata.holes = [];\n\n\t\tfor ( var i = 0, l = this.holes.length; i < l; i ++ ) {\n\n\t\t\tvar hole = this.holes[ i ];\n\t\t\tdata.holes.push( hole.toJSON() );\n\n\t\t}\n\n\t\treturn data;\n\n\t},\n\n\tfromJSON: function ( json ) {\n\n\t\tPath.prototype.fromJSON.call( this, json );\n\n\t\tthis.uuid = json.uuid;\n\t\tthis.holes = [];\n\n\t\tfor ( var i = 0, l = json.holes.length; i < l; i ++ ) {\n\n\t\t\tvar hole = json.holes[ i ];\n\t\t\tthis.holes.push( new Path().fromJSON( hole ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n} );\n\nfunction Light() {}\nfunction HemisphereLight() {}\nfunction LightShadow() {}\nfunction SpotLightShadow() {}\nfunction SpotLight() {}\nfunction PointLight() {}\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author arose / http://github.com/arose\n */\n\nfunction OrthographicCamera( left, right, top, bottom, near, far ) {\n\n\tCamera.call( this );\n\n\tthis.type = 'OrthographicCamera';\n\n\tthis.zoom = 1;\n\tthis.view = null;\n\n\tthis.left = ( left !== undefined ) ? left : - 1;\n\tthis.right = ( right !== undefined ) ? right : 1;\n\tthis.top = ( top !== undefined ) ? top : 1;\n\tthis.bottom = ( bottom !== undefined ) ? bottom : - 1;\n\n\tthis.near = ( near !== undefined ) ? near : 0.1;\n\tthis.far = ( far !== undefined ) ? far : 2000;\n\n\tthis.updateProjectionMatrix();\n\n}\n\nOrthographicCamera.prototype = Object.assign( Object.create( Camera.prototype ), {\n\n\tconstructor: OrthographicCamera,\n\n\tisOrthographicCamera: true,\n\n\tcopy: function ( source, recursive ) {\n\n\t\tCamera.prototype.copy.call( this, source, recursive );\n\n\t\tthis.left = source.left;\n\t\tthis.right = source.right;\n\t\tthis.top = source.top;\n\t\tthis.bottom = source.bottom;\n\t\tthis.near = source.near;\n\t\tthis.far = source.far;\n\n\t\tthis.zoom = source.zoom;\n\t\tthis.view = source.view === null ? null : Object.assign( {}, source.view );\n\n\t\treturn this;\n\n\t},\n\n\tsetViewOffset: function ( fullWidth, fullHeight, x, y, width, height ) {\n\n\t\tif ( this.view === null ) {\n\n\t\t\tthis.view = {\n\t\t\t\tenabled: true,\n\t\t\t\tfullWidth: 1,\n\t\t\t\tfullHeight: 1,\n\t\t\t\toffsetX: 0,\n\t\t\t\toffsetY: 0,\n\t\t\t\twidth: 1,\n\t\t\t\theight: 1\n\t\t\t};\n\n\t\t}\n\n\t\tthis.view.enabled = true;\n\t\tthis.view.fullWidth = fullWidth;\n\t\tthis.view.fullHeight = fullHeight;\n\t\tthis.view.offsetX = x;\n\t\tthis.view.offsetY = y;\n\t\tthis.view.width = width;\n\t\tthis.view.height = height;\n\n\t\tthis.updateProjectionMatrix();\n\n\t},\n\n\tclearViewOffset: function () {\n\n\t\tif ( this.view !== null ) {\n\n\t\t\tthis.view.enabled = false;\n\n\t\t}\n\n\t\tthis.updateProjectionMatrix();\n\n\t},\n\n\tupdateProjectionMatrix: function () {\n\n\t\tvar dx = ( this.right - this.left ) / ( 2 * this.zoom );\n\t\tvar dy = ( this.top - this.bottom ) / ( 2 * this.zoom );\n\t\tvar cx = ( this.right + this.left ) / 2;\n\t\tvar cy = ( this.top + this.bottom ) / 2;\n\n\t\tvar left = cx - dx;\n\t\tvar right = cx + dx;\n\t\tvar top = cy + dy;\n\t\tvar bottom = cy - dy;\n\n\t\tif ( this.view !== null && this.view.enabled ) {\n\n\t\t\tvar scaleW = ( this.right - this.left ) / this.view.fullWidth / this.zoom;\n\t\t\tvar scaleH = ( this.top - this.bottom ) / this.view.fullHeight / this.zoom;\n\n\t\t\tleft += scaleW * this.view.offsetX;\n\t\t\tright = left + scaleW * this.view.width;\n\t\t\ttop -= scaleH * this.view.offsetY;\n\t\t\tbottom = top - scaleH * this.view.height;\n\n\t\t}\n\n\t\tthis.projectionMatrix.makeOrthographic( left, right, top, bottom, this.near, this.far );\n\n\t\tthis.projectionMatrixInverse.getInverse( this.projectionMatrix );\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tvar data = Object3D.prototype.toJSON.call( this, meta );\n\n\t\tdata.object.zoom = this.zoom;\n\t\tdata.object.left = this.left;\n\t\tdata.object.right = this.right;\n\t\tdata.object.top = this.top;\n\t\tdata.object.bottom = this.bottom;\n\t\tdata.object.near = this.near;\n\t\tdata.object.far = this.far;\n\n\t\tif ( this.view !== null ) data.object.view = Object.assign( {}, this.view );\n\n\t\treturn data;\n\n\t}\n\n} );\n\nfunction DirectionalLightShadow() {}\nfunction DirectionalLight() {}\nfunction AmbientLight() {}\nfunction RectAreaLight() {}\nfunction MaterialLoader() {}\n\n/**\n * @author Don McCurdy / https://www.donmccurdy.com\n */\n\nvar LoaderUtils = {\n\n\tdecodeText: function ( array ) {\n\n\t\tif ( typeof TextDecoder !== 'undefined' ) {\n\n\t\t\treturn new TextDecoder().decode( array );\n\n\t\t}\n\n\t\t// Avoid the String.fromCharCode.apply(null, array) shortcut, which\n\t\t// throws a \"maximum call stack size exceeded\" error for large arrays.\n\n\t\tvar s = '';\n\n\t\tfor ( var i = 0, il = array.length; i < il; i ++ ) {\n\n\t\t\t// Implicitly assumes little-endian.\n\t\t\ts += String.fromCharCode( array[ i ] );\n\n\t\t}\n\n\t\ttry {\n\n\t\t\t// merges multi-byte utf-8 characters.\n\n\t\t\treturn decodeURIComponent( escape( s ) );\n\n\t\t} catch ( e ) { // see #16358\n\n\t\t\treturn s;\n\n\t\t}\n\n\t},\n\n\textractUrlBase: function ( url ) {\n\n\t\tvar index = url.lastIndexOf( '/' );\n\n\t\tif ( index === - 1 ) return './';\n\n\t\treturn url.substr( 0, index + 1 );\n\n\t}\n\n};\n\n/**\n * @author benaadams / https://twitter.com/ben_a_adams\n */\n\nfunction InstancedBufferGeometry() {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'InstancedBufferGeometry';\n\tthis.maxInstancedCount = undefined;\n\n}\n\nInstancedBufferGeometry.prototype = Object.assign( Object.create( BufferGeometry.prototype ), {\n\n\tconstructor: InstancedBufferGeometry,\n\n\tisInstancedBufferGeometry: true,\n\n\tcopy: function ( source ) {\n\n\t\tBufferGeometry.prototype.copy.call( this, source );\n\n\t\tthis.maxInstancedCount = source.maxInstancedCount;\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tvar data = BufferGeometry.prototype.toJSON.call( this );\n\n\t\tdata.maxInstancedCount = this.maxInstancedCount;\n\n\t\tdata.isInstancedBufferGeometry = true;\n\n\t\treturn data;\n\n\t}\n\n} );\n\n/**\n * @author benaadams / https://twitter.com/ben_a_adams\n */\n\nfunction InstancedBufferAttribute( array, itemSize, normalized, meshPerAttribute ) {\n\n\tif ( typeof ( normalized ) === 'number' ) {\n\n\t\tmeshPerAttribute = normalized;\n\n\t\tnormalized = false;\n\n\t\tconsole.error( 'THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.' );\n\n\t}\n\n\tBufferAttribute.call( this, array, itemSize, normalized );\n\n\tthis.meshPerAttribute = meshPerAttribute || 1;\n\n}\n\nInstancedBufferAttribute.prototype = Object.assign( Object.create( BufferAttribute.prototype ), {\n\n\tconstructor: InstancedBufferAttribute,\n\n\tisInstancedBufferAttribute: true,\n\n\tcopy: function ( source ) {\n\n\t\tBufferAttribute.prototype.copy.call( this, source );\n\n\t\tthis.meshPerAttribute = source.meshPerAttribute;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function ()\t{\n\n\t\tvar data = BufferAttribute.prototype.toJSON.call( this );\n\n\t\tdata.meshPerAttribute = this.meshPerAttribute;\n\n\t\tdata.isInstancedBufferAttribute = true;\n\n\t\treturn data;\n\n\t}\n\n} );\n\nfunction BufferGeometryLoader() {}\n\nfunction ObjectLoader() {}\n\n/**\n * @author thespite / http://clicktorelease.com/\n */\n\n\nfunction ImageBitmapLoader( manager ) {\n\n\tif ( typeof createImageBitmap === 'undefined' ) {\n\n\t\tconsole.warn( 'THREE.ImageBitmapLoader: createImageBitmap() not supported.' );\n\n\t}\n\n\tif ( typeof fetch === 'undefined' ) {\n\n\t\tconsole.warn( 'THREE.ImageBitmapLoader: fetch() not supported.' );\n\n\t}\n\n\tLoader.call( this, manager );\n\n\tthis.options = undefined;\n\n}\n\nImageBitmapLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: ImageBitmapLoader,\n\n\tsetOptions: function setOptions( options ) {\n\n\t\tthis.options = options;\n\n\t\treturn this;\n\n\t},\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tif ( url === undefined ) url = '';\n\n\t\tif ( this.path !== undefined ) url = this.path + url;\n\n\t\turl = this.manager.resolveURL( url );\n\n\t\tvar scope = this;\n\n\t\tvar cached = Cache.get( url );\n\n\t\tif ( cached !== undefined ) {\n\n\t\t\tscope.manager.itemStart( url );\n\n\t\t\tsetTimeout( function () {\n\n\t\t\t\tif ( onLoad ) onLoad( cached );\n\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t}, 0 );\n\n\t\t\treturn cached;\n\n\t\t}\n\n\t\tfetch( url ).then( function ( res ) {\n\n\t\t\treturn res.blob();\n\n\t\t} ).then( function ( blob ) {\n\n\t\t\tif ( scope.options === undefined ) {\n\n\t\t\t\t// Workaround for FireFox. It causes an error if you pass options.\n\t\t\t\treturn createImageBitmap( blob );\n\n\t\t\t} else {\n\n\t\t\t\treturn createImageBitmap( blob, scope.options );\n\n\t\t\t}\n\n\t\t} ).then( function ( imageBitmap ) {\n\n\t\t\tCache.add( url, imageBitmap );\n\n\t\t\tif ( onLoad ) onLoad( imageBitmap );\n\n\t\t\tscope.manager.itemEnd( url );\n\n\t\t} ).catch( function ( e ) {\n\n\t\t\tif ( onError ) onError( e );\n\n\t\t\tscope.manager.itemError( url );\n\t\t\tscope.manager.itemEnd( url );\n\n\t\t} );\n\n\t\tscope.manager.itemStart( url );\n\n\t}\n\n} );\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * minimal class for proxing functions to Path. Replaces old \"extractSubpaths()\"\n **/\n\nfunction ShapePath() {\n\n\tthis.type = 'ShapePath';\n\n\tthis.color = new Color();\n\n\tthis.subPaths = [];\n\tthis.currentPath = null;\n\n}\n\nObject.assign( ShapePath.prototype, {\n\n\tmoveTo: function ( x, y ) {\n\n\t\tthis.currentPath = new Path();\n\t\tthis.subPaths.push( this.currentPath );\n\t\tthis.currentPath.moveTo( x, y );\n\n\t\treturn this;\n\n\t},\n\n\tlineTo: function ( x, y ) {\n\n\t\tthis.currentPath.lineTo( x, y );\n\n\t\treturn this;\n\n\t},\n\n\tquadraticCurveTo: function ( aCPx, aCPy, aX, aY ) {\n\n\t\tthis.currentPath.quadraticCurveTo( aCPx, aCPy, aX, aY );\n\n\t\treturn this;\n\n\t},\n\n\tbezierCurveTo: function ( aCP1x, aCP1y, aCP2x, aCP2y, aX, aY ) {\n\n\t\tthis.currentPath.bezierCurveTo( aCP1x, aCP1y, aCP2x, aCP2y, aX, aY );\n\n\t\treturn this;\n\n\t},\n\n\tsplineThru: function ( pts ) {\n\n\t\tthis.currentPath.splineThru( pts );\n\n\t\treturn this;\n\n\t},\n\n\ttoShapes: function ( isCCW, noHoles ) {\n\n\t\tfunction toShapesNoHoles( inSubpaths ) {\n\n\t\t\tvar shapes = [];\n\n\t\t\tfor ( var i = 0, l = inSubpaths.length; i < l; i ++ ) {\n\n\t\t\t\tvar tmpPath = inSubpaths[ i ];\n\n\t\t\t\tvar tmpShape = new Shape();\n\t\t\t\ttmpShape.curves = tmpPath.curves;\n\n\t\t\t\tshapes.push( tmpShape );\n\n\t\t\t}\n\n\t\t\treturn shapes;\n\n\t\t}\n\n\t\tfunction isPointInsidePolygon( inPt, inPolygon ) {\n\n\t\t\tvar polyLen = inPolygon.length;\n\n\t\t\t// inPt on polygon contour => immediate success    or\n\t\t\t// toggling of inside/outside at every single! intersection point of an edge\n\t\t\t//  with the horizontal line through inPt, left of inPt\n\t\t\t//  not counting lowerY endpoints of edges and whole edges on that line\n\t\t\tvar inside = false;\n\t\t\tfor ( var p = polyLen - 1, q = 0; q < polyLen; p = q ++ ) {\n\n\t\t\t\tvar edgeLowPt = inPolygon[ p ];\n\t\t\t\tvar edgeHighPt = inPolygon[ q ];\n\n\t\t\t\tvar edgeDx = edgeHighPt.x - edgeLowPt.x;\n\t\t\t\tvar edgeDy = edgeHighPt.y - edgeLowPt.y;\n\n\t\t\t\tif ( Math.abs( edgeDy ) > Number.EPSILON ) {\n\n\t\t\t\t\t// not parallel\n\t\t\t\t\tif ( edgeDy < 0 ) {\n\n\t\t\t\t\t\tedgeLowPt = inPolygon[ q ]; edgeDx = - edgeDx;\n\t\t\t\t\t\tedgeHighPt = inPolygon[ p ]; edgeDy = - edgeDy;\n\n\t\t\t\t\t}\n\t\t\t\t\tif ( ( inPt.y < edgeLowPt.y ) || ( inPt.y > edgeHighPt.y ) ) \t\tcontinue;\n\n\t\t\t\t\tif ( inPt.y === edgeLowPt.y ) {\n\n\t\t\t\t\t\tif ( inPt.x === edgeLowPt.x )\t\treturn\ttrue;\t\t// inPt is on contour ?\n\t\t\t\t\t\t// continue;\t\t\t\t// no intersection or edgeLowPt => doesn't count !!!\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tvar perpEdge = edgeDy * ( inPt.x - edgeLowPt.x ) - edgeDx * ( inPt.y - edgeLowPt.y );\n\t\t\t\t\t\tif ( perpEdge === 0 )\t\t\t\treturn\ttrue;\t\t// inPt is on contour ?\n\t\t\t\t\t\tif ( perpEdge < 0 ) \t\t\t\tcontinue;\n\t\t\t\t\t\tinside = ! inside;\t\t// true intersection left of inPt\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// parallel or collinear\n\t\t\t\t\tif ( inPt.y !== edgeLowPt.y ) \t\tcontinue;\t\t\t// parallel\n\t\t\t\t\t// edge lies on the same horizontal line as inPt\n\t\t\t\t\tif ( ( ( edgeHighPt.x <= inPt.x ) && ( inPt.x <= edgeLowPt.x ) ) ||\n\t\t\t\t\t\t ( ( edgeLowPt.x <= inPt.x ) && ( inPt.x <= edgeHighPt.x ) ) )\t\treturn\ttrue;\t// inPt: Point on contour !\n\t\t\t\t\t// continue;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn\tinside;\n\n\t\t}\n\n\t\tvar isClockWise = ShapeUtils.isClockWise;\n\n\t\tvar subPaths = this.subPaths;\n\t\tif ( subPaths.length === 0 ) return [];\n\n\t\tif ( noHoles === true )\treturn\ttoShapesNoHoles( subPaths );\n\n\n\t\tvar solid, tmpPath, tmpShape, shapes = [];\n\n\t\tif ( subPaths.length === 1 ) {\n\n\t\t\ttmpPath = subPaths[ 0 ];\n\t\t\ttmpShape = new Shape();\n\t\t\ttmpShape.curves = tmpPath.curves;\n\t\t\tshapes.push( tmpShape );\n\t\t\treturn shapes;\n\n\t\t}\n\n\t\tvar holesFirst = ! isClockWise( subPaths[ 0 ].getPoints() );\n\t\tholesFirst = isCCW ? ! holesFirst : holesFirst;\n\n\t\t// console.log(\"Holes first\", holesFirst);\n\n\t\tvar betterShapeHoles = [];\n\t\tvar newShapes = [];\n\t\tvar newShapeHoles = [];\n\t\tvar mainIdx = 0;\n\t\tvar tmpPoints;\n\n\t\tnewShapes[ mainIdx ] = undefined;\n\t\tnewShapeHoles[ mainIdx ] = [];\n\n\t\tfor ( var i = 0, l = subPaths.length; i < l; i ++ ) {\n\n\t\t\ttmpPath = subPaths[ i ];\n\t\t\ttmpPoints = tmpPath.getPoints();\n\t\t\tsolid = isClockWise( tmpPoints );\n\t\t\tsolid = isCCW ? ! solid : solid;\n\n\t\t\tif ( solid ) {\n\n\t\t\t\tif ( ( ! holesFirst ) && ( newShapes[ mainIdx ] ) )\tmainIdx ++;\n\n\t\t\t\tnewShapes[ mainIdx ] = { s: new Shape(), p: tmpPoints };\n\t\t\t\tnewShapes[ mainIdx ].s.curves = tmpPath.curves;\n\n\t\t\t\tif ( holesFirst )\tmainIdx ++;\n\t\t\t\tnewShapeHoles[ mainIdx ] = [];\n\n\t\t\t\t//console.log('cw', i);\n\n\t\t\t} else {\n\n\t\t\t\tnewShapeHoles[ mainIdx ].push( { h: tmpPath, p: tmpPoints[ 0 ] } );\n\n\t\t\t\t//console.log('ccw', i);\n\n\t\t\t}\n\n\t\t}\n\n\t\t// only Holes? -> probably all Shapes with wrong orientation\n\t\tif ( ! newShapes[ 0 ] )\treturn\ttoShapesNoHoles( subPaths );\n\n\n\t\tif ( newShapes.length > 1 ) {\n\n\t\t\tvar ambiguous = false;\n\t\t\tvar toChange = [];\n\n\t\t\tfor ( var sIdx = 0, sLen = newShapes.length; sIdx < sLen; sIdx ++ ) {\n\n\t\t\t\tbetterShapeHoles[ sIdx ] = [];\n\n\t\t\t}\n\n\t\t\tfor ( var sIdx = 0, sLen = newShapes.length; sIdx < sLen; sIdx ++ ) {\n\n\t\t\t\tvar sho = newShapeHoles[ sIdx ];\n\n\t\t\t\tfor ( var hIdx = 0; hIdx < sho.length; hIdx ++ ) {\n\n\t\t\t\t\tvar ho = sho[ hIdx ];\n\t\t\t\t\tvar hole_unassigned = true;\n\n\t\t\t\t\tfor ( var s2Idx = 0; s2Idx < newShapes.length; s2Idx ++ ) {\n\n\t\t\t\t\t\tif ( isPointInsidePolygon( ho.p, newShapes[ s2Idx ].p ) ) {\n\n\t\t\t\t\t\t\tif ( sIdx !== s2Idx )\ttoChange.push( { froms: sIdx, tos: s2Idx, hole: hIdx } );\n\t\t\t\t\t\t\tif ( hole_unassigned ) {\n\n\t\t\t\t\t\t\t\thole_unassigned = false;\n\t\t\t\t\t\t\t\tbetterShapeHoles[ s2Idx ].push( ho );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tambiguous = true;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\t\t\t\t\tif ( hole_unassigned ) {\n\n\t\t\t\t\t\tbetterShapeHoles[ sIdx ].push( ho );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t\t// console.log(\"ambiguous: \", ambiguous);\n\t\t\tif ( toChange.length > 0 ) {\n\n\t\t\t\t// console.log(\"to change: \", toChange);\n\t\t\t\tif ( ! ambiguous )\tnewShapeHoles = betterShapeHoles;\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar tmpHoles;\n\n\t\tfor ( var i = 0, il = newShapes.length; i < il; i ++ ) {\n\n\t\t\ttmpShape = newShapes[ i ].s;\n\t\t\tshapes.push( tmpShape );\n\t\t\ttmpHoles = newShapeHoles[ i ];\n\n\t\t\tfor ( var j = 0, jl = tmpHoles.length; j < jl; j ++ ) {\n\n\t\t\t\ttmpShape.holes.push( tmpHoles[ j ].h );\n\n\t\t\t}\n\n\t\t}\n\n\t\t//console.log(\"shape\", shapes);\n\n\t\treturn shapes;\n\n\t}\n\n} );\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * @author mrdoob / http://mrdoob.com/\n */\n\n\nfunction Font( data ) {\n\n\tthis.type = 'Font';\n\n\tthis.data = data;\n\n}\n\nObject.assign( Font.prototype, {\n\n\tisFont: true,\n\n\tgenerateShapes: function ( text, size ) {\n\n\t\tif ( size === undefined ) size = 100;\n\n\t\tvar shapes = [];\n\t\tvar paths = createPaths( text, size, this.data );\n\n\t\tfor ( var p = 0, pl = paths.length; p < pl; p ++ ) {\n\n\t\t\tArray.prototype.push.apply( shapes, paths[ p ].toShapes() );\n\n\t\t}\n\n\t\treturn shapes;\n\n\t}\n\n} );\n\nfunction createPaths( text, size, data ) {\n\n\tvar chars = Array.from ? Array.from( text ) : String( text ).split( '' ); // workaround for IE11, see #13988\n\tvar scale = size / data.resolution;\n\tvar line_height = ( data.boundingBox.yMax - data.boundingBox.yMin + data.underlineThickness ) * scale;\n\n\tvar paths = [];\n\n\tvar offsetX = 0, offsetY = 0;\n\n\tfor ( var i = 0; i < chars.length; i ++ ) {\n\n\t\tvar char = chars[ i ];\n\n\t\tif ( char === '\\n' ) {\n\n\t\t\toffsetX = 0;\n\t\t\toffsetY -= line_height;\n\n\t\t} else {\n\n\t\t\tvar ret = createPath( char, scale, offsetX, offsetY, data );\n\t\t\toffsetX += ret.offsetX;\n\t\t\tpaths.push( ret.path );\n\n\t\t}\n\n\t}\n\n\treturn paths;\n\n}\n\nfunction createPath( char, scale, offsetX, offsetY, data ) {\n\n\tvar glyph = data.glyphs[ char ] || data.glyphs[ '?' ];\n\n\tif ( ! glyph ) {\n\n\t\tconsole.error( 'THREE.Font: character \"' + char + '\" does not exists in font family ' + data.familyName + '.' );\n\n\t\treturn;\n\n\t}\n\n\tvar path = new ShapePath();\n\n\tvar x, y, cpx, cpy, cpx1, cpy1, cpx2, cpy2;\n\n\tif ( glyph.o ) {\n\n\t\tvar outline = glyph._cachedOutline || ( glyph._cachedOutline = glyph.o.split( ' ' ) );\n\n\t\tfor ( var i = 0, l = outline.length; i < l; ) {\n\n\t\t\tvar action = outline[ i ++ ];\n\n\t\t\tswitch ( action ) {\n\n\t\t\t\tcase 'm': // moveTo\n\n\t\t\t\t\tx = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\ty = outline[ i ++ ] * scale + offsetY;\n\n\t\t\t\t\tpath.moveTo( x, y );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'l': // lineTo\n\n\t\t\t\t\tx = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\ty = outline[ i ++ ] * scale + offsetY;\n\n\t\t\t\t\tpath.lineTo( x, y );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'q': // quadraticCurveTo\n\n\t\t\t\t\tcpx = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\tcpy = outline[ i ++ ] * scale + offsetY;\n\t\t\t\t\tcpx1 = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\tcpy1 = outline[ i ++ ] * scale + offsetY;\n\n\t\t\t\t\tpath.quadraticCurveTo( cpx1, cpy1, cpx, cpy );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'b': // bezierCurveTo\n\n\t\t\t\t\tcpx = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\tcpy = outline[ i ++ ] * scale + offsetY;\n\t\t\t\t\tcpx1 = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\tcpy1 = outline[ i ++ ] * scale + offsetY;\n\t\t\t\t\tcpx2 = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\tcpy2 = outline[ i ++ ] * scale + offsetY;\n\n\t\t\t\t\tpath.bezierCurveTo( cpx1, cpy1, cpx2, cpy2, cpx, cpy );\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\treturn { offsetX: glyph.ha * scale, path: path };\n\n}\n\nfunction FontLoader() {}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nvar _context;\n\nvar AudioContext = {\n\n\tgetContext: function () {\n\n\t\tif ( _context === undefined ) {\n\n\t\t\t_context = new ( window.AudioContext || window.webkitAudioContext )();\n\n\t\t}\n\n\t\treturn _context;\n\n\t},\n\n\tsetContext: function ( value ) {\n\n\t\t_context = value;\n\n\t}\n\n};\n\nfunction AudioLoader() {}\n\nfunction SphericalHarmonics3() {}\n\nfunction LightProbe() {}\n\n/**\n * @author WestLangley / http://github.com/WestLangley\n */\n\nfunction HemisphereLightProbe( skyColor, groundColor, intensity ) {\n\n\tLightProbe.call( this, undefined, intensity );\n\n\tvar color1 = new Color().set( skyColor );\n\tvar color2 = new Color().set( groundColor );\n\n\tvar sky = new Vector3( color1.r, color1.g, color1.b );\n\tvar ground = new Vector3( color2.r, color2.g, color2.b );\n\n\t// without extra factor of PI in the shader, should = 1 / Math.sqrt( Math.PI );\n\tvar c0 = Math.sqrt( Math.PI );\n\tvar c1 = c0 * Math.sqrt( 0.75 );\n\n\tthis.sh.coefficients[ 0 ].copy( sky ).add( ground ).multiplyScalar( c0 );\n\tthis.sh.coefficients[ 1 ].copy( sky ).sub( ground ).multiplyScalar( c1 );\n\n}\n\nHemisphereLightProbe.prototype = Object.assign( Object.create( LightProbe.prototype ), {\n\n\tconstructor: HemisphereLightProbe,\n\n\tisHemisphereLightProbe: true,\n\n\tcopy: function ( source ) { // modifying colors not currently supported\n\n\t\tLightProbe.prototype.copy.call( this, source );\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tvar data = LightProbe.prototype.toJSON.call( this, meta );\n\n\t\t// data.sh = this.sh.toArray(); // todo\n\n\t\treturn data;\n\n\t}\n\n} );\n\n/**\n * @author WestLangley / http://github.com/WestLangley\n */\n\nfunction AmbientLightProbe( color, intensity ) {\n\n\tLightProbe.call( this, undefined, intensity );\n\n\tvar color1 = new Color().set( color );\n\n\t// without extra factor of PI in the shader, would be 2 / Math.sqrt( Math.PI );\n\tthis.sh.coefficients[ 0 ].set( color1.r, color1.g, color1.b ).multiplyScalar( 2 * Math.sqrt( Math.PI ) );\n\n}\n\nAmbientLightProbe.prototype = Object.assign( Object.create( LightProbe.prototype ), {\n\n\tconstructor: AmbientLightProbe,\n\n\tisAmbientLightProbe: true,\n\n\tcopy: function ( source ) { // modifying color not currently supported\n\n\t\tLightProbe.prototype.copy.call( this, source );\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tvar data = LightProbe.prototype.toJSON.call( this, meta );\n\n\t\t// data.sh = this.sh.toArray(); // todo\n\n\t\treturn data;\n\n\t}\n\n} );\n\nvar _eyeRight = new Matrix4();\nvar _eyeLeft = new Matrix4();\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction StereoCamera() {\n\n\tthis.type = 'StereoCamera';\n\n\tthis.aspect = 1;\n\n\tthis.eyeSep = 0.064;\n\n\tthis.cameraL = new PerspectiveCamera();\n\tthis.cameraL.layers.enable( 1 );\n\tthis.cameraL.matrixAutoUpdate = false;\n\n\tthis.cameraR = new PerspectiveCamera();\n\tthis.cameraR.layers.enable( 2 );\n\tthis.cameraR.matrixAutoUpdate = false;\n\n\tthis._cache = {\n\t\tfocus: null,\n\t\tfov: null,\n\t\taspect: null,\n\t\tnear: null,\n\t\tfar: null,\n\t\tzoom: null,\n\t\teyeSep: null\n\t};\n\n}\n\nObject.assign( StereoCamera.prototype, {\n\n\tupdate: function ( camera ) {\n\n\t\tvar cache = this._cache;\n\n\t\tvar needsUpdate = cache.focus !== camera.focus || cache.fov !== camera.fov ||\n\t\t\tcache.aspect !== camera.aspect * this.aspect || cache.near !== camera.near ||\n\t\t\tcache.far !== camera.far || cache.zoom !== camera.zoom || cache.eyeSep !== this.eyeSep;\n\n\t\tif ( needsUpdate ) {\n\n\t\t\tcache.focus = camera.focus;\n\t\t\tcache.fov = camera.fov;\n\t\t\tcache.aspect = camera.aspect * this.aspect;\n\t\t\tcache.near = camera.near;\n\t\t\tcache.far = camera.far;\n\t\t\tcache.zoom = camera.zoom;\n\t\t\tcache.eyeSep = this.eyeSep;\n\n\t\t\t// Off-axis stereoscopic effect based on\n\t\t\t// http://paulbourke.net/stereographics/stereorender/\n\n\t\t\tvar projectionMatrix = camera.projectionMatrix.clone();\n\t\t\tvar eyeSepHalf = cache.eyeSep / 2;\n\t\t\tvar eyeSepOnProjection = eyeSepHalf * cache.near / cache.focus;\n\t\t\tvar ymax = ( cache.near * Math.tan( MathUtils.DEG2RAD * cache.fov * 0.5 ) ) / cache.zoom;\n\t\t\tvar xmin, xmax;\n\n\t\t\t// translate xOffset\n\n\t\t\t_eyeLeft.elements[ 12 ] = - eyeSepHalf;\n\t\t\t_eyeRight.elements[ 12 ] = eyeSepHalf;\n\n\t\t\t// for left eye\n\n\t\t\txmin = - ymax * cache.aspect + eyeSepOnProjection;\n\t\t\txmax = ymax * cache.aspect + eyeSepOnProjection;\n\n\t\t\tprojectionMatrix.elements[ 0 ] = 2 * cache.near / ( xmax - xmin );\n\t\t\tprojectionMatrix.elements[ 8 ] = ( xmax + xmin ) / ( xmax - xmin );\n\n\t\t\tthis.cameraL.projectionMatrix.copy( projectionMatrix );\n\n\t\t\t// for right eye\n\n\t\t\txmin = - ymax * cache.aspect - eyeSepOnProjection;\n\t\t\txmax = ymax * cache.aspect - eyeSepOnProjection;\n\n\t\t\tprojectionMatrix.elements[ 0 ] = 2 * cache.near / ( xmax - xmin );\n\t\t\tprojectionMatrix.elements[ 8 ] = ( xmax + xmin ) / ( xmax - xmin );\n\n\t\t\tthis.cameraR.projectionMatrix.copy( projectionMatrix );\n\n\t\t}\n\n\t\tthis.cameraL.matrixWorld.copy( camera.matrixWorld ).multiply( _eyeLeft );\n\t\tthis.cameraR.matrixWorld.copy( camera.matrixWorld ).multiply( _eyeRight );\n\n\t}\n\n} );\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction Clock( autoStart ) {\n\n\tthis.autoStart = ( autoStart !== undefined ) ? autoStart : true;\n\n\tthis.startTime = 0;\n\tthis.oldTime = 0;\n\tthis.elapsedTime = 0;\n\n\tthis.running = false;\n\n}\n\nObject.assign( Clock.prototype, {\n\n\tstart: function () {\n\n\t\tthis.startTime = ( typeof performance === 'undefined' ? Date : performance ).now(); // see #10732\n\n\t\tthis.oldTime = this.startTime;\n\t\tthis.elapsedTime = 0;\n\t\tthis.running = true;\n\n\t},\n\n\tstop: function () {\n\n\t\tthis.getElapsedTime();\n\t\tthis.running = false;\n\t\tthis.autoStart = false;\n\n\t},\n\n\tgetElapsedTime: function () {\n\n\t\tthis.getDelta();\n\t\treturn this.elapsedTime;\n\n\t},\n\n\tgetDelta: function () {\n\n\t\tvar diff = 0;\n\n\t\tif ( this.autoStart && ! this.running ) {\n\n\t\t\tthis.start();\n\t\t\treturn 0;\n\n\t\t}\n\n\t\tif ( this.running ) {\n\n\t\t\tvar newTime = ( typeof performance === 'undefined' ? Date : performance ).now();\n\n\t\t\tdiff = ( newTime - this.oldTime ) / 1000;\n\t\t\tthis.oldTime = newTime;\n\n\t\t\tthis.elapsedTime += diff;\n\n\t\t}\n\n\t\treturn diff;\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nvar _position$2 = new Vector3();\nvar _quaternion$3 = new Quaternion();\nvar _scale$1 = new Vector3();\nvar _orientation = new Vector3();\n\nfunction AudioListener() {\n\n\tObject3D.call( this );\n\n\tthis.type = 'AudioListener';\n\n\tthis.context = AudioContext.getContext();\n\n\tthis.gain = this.context.createGain();\n\tthis.gain.connect( this.context.destination );\n\n\tthis.filter = null;\n\n\tthis.timeDelta = 0;\n\n\t// private\n\n\tthis._clock = new Clock();\n\n}\n\nAudioListener.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: AudioListener,\n\n\tgetInput: function () {\n\n\t\treturn this.gain;\n\n\t},\n\n\tremoveFilter: function ( ) {\n\n\t\tif ( this.filter !== null ) {\n\n\t\t\tthis.gain.disconnect( this.filter );\n\t\t\tthis.filter.disconnect( this.context.destination );\n\t\t\tthis.gain.connect( this.context.destination );\n\t\t\tthis.filter = null;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tgetFilter: function () {\n\n\t\treturn this.filter;\n\n\t},\n\n\tsetFilter: function ( value ) {\n\n\t\tif ( this.filter !== null ) {\n\n\t\t\tthis.gain.disconnect( this.filter );\n\t\t\tthis.filter.disconnect( this.context.destination );\n\n\t\t} else {\n\n\t\t\tthis.gain.disconnect( this.context.destination );\n\n\t\t}\n\n\t\tthis.filter = value;\n\t\tthis.gain.connect( this.filter );\n\t\tthis.filter.connect( this.context.destination );\n\n\t\treturn this;\n\n\t},\n\n\tgetMasterVolume: function () {\n\n\t\treturn this.gain.gain.value;\n\n\t},\n\n\tsetMasterVolume: function ( value ) {\n\n\t\tthis.gain.gain.setTargetAtTime( value, this.context.currentTime, 0.01 );\n\n\t\treturn this;\n\n\t},\n\n\tupdateMatrixWorld: function ( force ) {\n\n\t\tObject3D.prototype.updateMatrixWorld.call( this, force );\n\n\t\tvar listener = this.context.listener;\n\t\tvar up = this.up;\n\n\t\tthis.timeDelta = this._clock.getDelta();\n\n\t\tthis.matrixWorld.decompose( _position$2, _quaternion$3, _scale$1 );\n\n\t\t_orientation.set( 0, 0, - 1 ).applyQuaternion( _quaternion$3 );\n\n\t\tif ( listener.positionX ) {\n\n\t\t\t// code path for Chrome (see #14393)\n\n\t\t\tvar endTime = this.context.currentTime + this.timeDelta;\n\n\t\t\tlistener.positionX.linearRampToValueAtTime( _position$2.x, endTime );\n\t\t\tlistener.positionY.linearRampToValueAtTime( _position$2.y, endTime );\n\t\t\tlistener.positionZ.linearRampToValueAtTime( _position$2.z, endTime );\n\t\t\tlistener.forwardX.linearRampToValueAtTime( _orientation.x, endTime );\n\t\t\tlistener.forwardY.linearRampToValueAtTime( _orientation.y, endTime );\n\t\t\tlistener.forwardZ.linearRampToValueAtTime( _orientation.z, endTime );\n\t\t\tlistener.upX.linearRampToValueAtTime( up.x, endTime );\n\t\t\tlistener.upY.linearRampToValueAtTime( up.y, endTime );\n\t\t\tlistener.upZ.linearRampToValueAtTime( up.z, endTime );\n\n\t\t} else {\n\n\t\t\tlistener.setPosition( _position$2.x, _position$2.y, _position$2.z );\n\t\t\tlistener.setOrientation( _orientation.x, _orientation.y, _orientation.z, up.x, up.y, up.z );\n\n\t\t}\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author Reece Aaron Lecrivain / http://reecenotes.com/\n */\n\nfunction Audio( listener ) {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Audio';\n\n\tthis.listener = listener;\n\tthis.context = listener.context;\n\n\tthis.gain = this.context.createGain();\n\tthis.gain.connect( listener.getInput() );\n\n\tthis.autoplay = false;\n\n\tthis.buffer = null;\n\tthis.detune = 0;\n\tthis.loop = false;\n\tthis.loopStart = 0;\n\tthis.loopEnd = 0;\n\tthis.offset = 0;\n\tthis.duration = undefined;\n\tthis.playbackRate = 1;\n\tthis.isPlaying = false;\n\tthis.hasPlaybackControl = true;\n\tthis.sourceType = 'empty';\n\n\tthis._startedAt = 0;\n\tthis._pausedAt = 0;\n\n\tthis.filters = [];\n\n}\n\nAudio.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Audio,\n\n\tgetOutput: function () {\n\n\t\treturn this.gain;\n\n\t},\n\n\tsetNodeSource: function ( audioNode ) {\n\n\t\tthis.hasPlaybackControl = false;\n\t\tthis.sourceType = 'audioNode';\n\t\tthis.source = audioNode;\n\t\tthis.connect();\n\n\t\treturn this;\n\n\t},\n\n\tsetMediaElementSource: function ( mediaElement ) {\n\n\t\tthis.hasPlaybackControl = false;\n\t\tthis.sourceType = 'mediaNode';\n\t\tthis.source = this.context.createMediaElementSource( mediaElement );\n\t\tthis.connect();\n\n\t\treturn this;\n\n\t},\n\n\tsetMediaStreamSource: function ( mediaStream ) {\n\n\t\tthis.hasPlaybackControl = false;\n\t\tthis.sourceType = 'mediaStreamNode';\n\t\tthis.source = this.context.createMediaStreamSource( mediaStream );\n\t\tthis.connect();\n\n\t\treturn this;\n\n\t},\n\n\tsetBuffer: function ( audioBuffer ) {\n\n\t\tthis.buffer = audioBuffer;\n\t\tthis.sourceType = 'buffer';\n\n\t\tif ( this.autoplay ) this.play();\n\n\t\treturn this;\n\n\t},\n\n\tplay: function ( delay ) {\n\n\t\tif ( delay === undefined ) delay = 0;\n\n\t\tif ( this.isPlaying === true ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: Audio is already playing.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis._startedAt = this.context.currentTime + delay;\n\n\t\tvar source = this.context.createBufferSource();\n\t\tsource.buffer = this.buffer;\n\t\tsource.loop = this.loop;\n\t\tsource.loopStart = this.loopStart;\n\t\tsource.loopEnd = this.loopEnd;\n\t\tsource.onended = this.onEnded.bind( this );\n\t\tsource.start( this._startedAt, this._pausedAt + this.offset, this.duration );\n\n\t\tthis.isPlaying = true;\n\n\t\tthis.source = source;\n\n\t\tthis.setDetune( this.detune );\n\t\tthis.setPlaybackRate( this.playbackRate );\n\n\t\treturn this.connect();\n\n\t},\n\n\tpause: function () {\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( this.isPlaying === true ) {\n\n\t\t\tthis._pausedAt += Math.max( this.context.currentTime - this._startedAt, 0 ) * this.playbackRate;\n\n\t\t\tthis.source.stop();\n\t\t\tthis.source.onended = null;\n\n\t\t\tthis.isPlaying = false;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tstop: function () {\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis._pausedAt = 0;\n\n\t\tthis.source.stop();\n\t\tthis.source.onended = null;\n\t\tthis.isPlaying = false;\n\n\t\treturn this;\n\n\t},\n\n\tconnect: function () {\n\n\t\tif ( this.filters.length > 0 ) {\n\n\t\t\tthis.source.connect( this.filters[ 0 ] );\n\n\t\t\tfor ( var i = 1, l = this.filters.length; i < l; i ++ ) {\n\n\t\t\t\tthis.filters[ i - 1 ].connect( this.filters[ i ] );\n\n\t\t\t}\n\n\t\t\tthis.filters[ this.filters.length - 1 ].connect( this.getOutput() );\n\n\t\t} else {\n\n\t\t\tthis.source.connect( this.getOutput() );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tdisconnect: function () {\n\n\t\tif ( this.filters.length > 0 ) {\n\n\t\t\tthis.source.disconnect( this.filters[ 0 ] );\n\n\t\t\tfor ( var i = 1, l = this.filters.length; i < l; i ++ ) {\n\n\t\t\t\tthis.filters[ i - 1 ].disconnect( this.filters[ i ] );\n\n\t\t\t}\n\n\t\t\tthis.filters[ this.filters.length - 1 ].disconnect( this.getOutput() );\n\n\t\t} else {\n\n\t\t\tthis.source.disconnect( this.getOutput() );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tgetFilters: function () {\n\n\t\treturn this.filters;\n\n\t},\n\n\tsetFilters: function ( value ) {\n\n\t\tif ( ! value ) value = [];\n\n\t\tif ( this.isPlaying === true ) {\n\n\t\t\tthis.disconnect();\n\t\t\tthis.filters = value;\n\t\t\tthis.connect();\n\n\t\t} else {\n\n\t\t\tthis.filters = value;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetDetune: function ( value ) {\n\n\t\tthis.detune = value;\n\n\t\tif ( this.source.detune === undefined ) return; // only set detune when available\n\n\t\tif ( this.isPlaying === true ) {\n\n\t\t\tthis.source.detune.setTargetAtTime( this.detune, this.context.currentTime, 0.01 );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tgetDetune: function () {\n\n\t\treturn this.detune;\n\n\t},\n\n\tgetFilter: function () {\n\n\t\treturn this.getFilters()[ 0 ];\n\n\t},\n\n\tsetFilter: function ( filter ) {\n\n\t\treturn this.setFilters( filter ? [ filter ] : [] );\n\n\t},\n\n\tsetPlaybackRate: function ( value ) {\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis.playbackRate = value;\n\n\t\tif ( this.isPlaying === true ) {\n\n\t\t\tthis.source.playbackRate.setTargetAtTime( this.playbackRate, this.context.currentTime, 0.01 );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tgetPlaybackRate: function () {\n\n\t\treturn this.playbackRate;\n\n\t},\n\n\tonEnded: function () {\n\n\t\tthis.isPlaying = false;\n\n\t},\n\n\tgetLoop: function () {\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn false;\n\n\t\t}\n\n\t\treturn this.loop;\n\n\t},\n\n\tsetLoop: function ( value ) {\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis.loop = value;\n\n\t\tif ( this.isPlaying === true ) {\n\n\t\t\tthis.source.loop = this.loop;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetLoopStart: function ( value ) {\n\n\t\tthis.loopStart = value;\n\n\t\treturn this;\n\n\t},\n\n\tsetLoopEnd: function ( value ) {\n\n\t\tthis.loopEnd = value;\n\n\t\treturn this;\n\n\t},\n\n\tgetVolume: function () {\n\n\t\treturn this.gain.gain.value;\n\n\t},\n\n\tsetVolume: function ( value ) {\n\n\t\tthis.gain.gain.setTargetAtTime( value, this.context.currentTime, 0.01 );\n\n\t\treturn this;\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nvar _position$3 = new Vector3();\nvar _quaternion$4 = new Quaternion();\nvar _scale$2 = new Vector3();\nvar _orientation$1 = new Vector3();\n\nfunction PositionalAudio( listener ) {\n\n\tAudio.call( this, listener );\n\n\tthis.panner = this.context.createPanner();\n\tthis.panner.panningModel = 'HRTF';\n\tthis.panner.connect( this.gain );\n\n}\n\nPositionalAudio.prototype = Object.assign( Object.create( Audio.prototype ), {\n\n\tconstructor: PositionalAudio,\n\n\tgetOutput: function () {\n\n\t\treturn this.panner;\n\n\t},\n\n\tgetRefDistance: function () {\n\n\t\treturn this.panner.refDistance;\n\n\t},\n\n\tsetRefDistance: function ( value ) {\n\n\t\tthis.panner.refDistance = value;\n\n\t\treturn this;\n\n\t},\n\n\tgetRolloffFactor: function () {\n\n\t\treturn this.panner.rolloffFactor;\n\n\t},\n\n\tsetRolloffFactor: function ( value ) {\n\n\t\tthis.panner.rolloffFactor = value;\n\n\t\treturn this;\n\n\t},\n\n\tgetDistanceModel: function () {\n\n\t\treturn this.panner.distanceModel;\n\n\t},\n\n\tsetDistanceModel: function ( value ) {\n\n\t\tthis.panner.distanceModel = value;\n\n\t\treturn this;\n\n\t},\n\n\tgetMaxDistance: function () {\n\n\t\treturn this.panner.maxDistance;\n\n\t},\n\n\tsetMaxDistance: function ( value ) {\n\n\t\tthis.panner.maxDistance = value;\n\n\t\treturn this;\n\n\t},\n\n\tsetDirectionalCone: function ( coneInnerAngle, coneOuterAngle, coneOuterGain ) {\n\n\t\tthis.panner.coneInnerAngle = coneInnerAngle;\n\t\tthis.panner.coneOuterAngle = coneOuterAngle;\n\t\tthis.panner.coneOuterGain = coneOuterGain;\n\n\t\treturn this;\n\n\t},\n\n\tupdateMatrixWorld: function ( force ) {\n\n\t\tObject3D.prototype.updateMatrixWorld.call( this, force );\n\n\t\tif ( this.hasPlaybackControl === true && this.isPlaying === false ) return;\n\n\t\tthis.matrixWorld.decompose( _position$3, _quaternion$4, _scale$2 );\n\n\t\t_orientation$1.set( 0, 0, 1 ).applyQuaternion( _quaternion$4 );\n\n\t\tvar panner = this.panner;\n\n\t\tif ( panner.positionX ) {\n\n\t\t\t// code path for Chrome and Firefox (see #14393)\n\n\t\t\tvar endTime = this.context.currentTime + this.listener.timeDelta;\n\n\t\t\tpanner.positionX.linearRampToValueAtTime( _position$3.x, endTime );\n\t\t\tpanner.positionY.linearRampToValueAtTime( _position$3.y, endTime );\n\t\t\tpanner.positionZ.linearRampToValueAtTime( _position$3.z, endTime );\n\t\t\tpanner.orientationX.linearRampToValueAtTime( _orientation$1.x, endTime );\n\t\t\tpanner.orientationY.linearRampToValueAtTime( _orientation$1.y, endTime );\n\t\t\tpanner.orientationZ.linearRampToValueAtTime( _orientation$1.z, endTime );\n\n\t\t} else {\n\n\t\t\tpanner.setPosition( _position$3.x, _position$3.y, _position$3.z );\n\t\t\tpanner.setOrientation( _orientation$1.x, _orientation$1.y, _orientation$1.z );\n\n\t\t}\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction AudioAnalyser( audio, fftSize ) {\n\n\tthis.analyser = audio.context.createAnalyser();\n\tthis.analyser.fftSize = fftSize !== undefined ? fftSize : 2048;\n\n\tthis.data = new Uint8Array( this.analyser.frequencyBinCount );\n\n\taudio.getOutput().connect( this.analyser );\n\n}\n\nObject.assign( AudioAnalyser.prototype, {\n\n\tgetFrequencyData: function () {\n\n\t\tthis.analyser.getByteFrequencyData( this.data );\n\n\t\treturn this.data;\n\n\t},\n\n\tgetAverageFrequency: function () {\n\n\t\tvar value = 0, data = this.getFrequencyData();\n\n\t\tfor ( var i = 0; i < data.length; i ++ ) {\n\n\t\t\tvalue += data[ i ];\n\n\t\t}\n\n\t\treturn value / data.length;\n\n\t}\n\n} );\n\nfunction PropertyMixer() {}\n\n/**\n *\n * A reference to a real property in the scene graph.\n *\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n * @author tschw\n */\n\n// Characters [].:/ are reserved for track binding syntax.\nvar _RESERVED_CHARS_RE = '\\\\[\\\\]\\\\.:\\\\/';\nvar _reservedRe = new RegExp( '[' + _RESERVED_CHARS_RE + ']', 'g' );\n\n// Attempts to allow node names from any language. ES5's `\\w` regexp matches\n// only latin characters, and the unicode \\p{L} is not yet supported. So\n// instead, we exclude reserved characters and match everything else.\nvar _wordChar = '[^' + _RESERVED_CHARS_RE + ']';\nvar _wordCharOrDot = '[^' + _RESERVED_CHARS_RE.replace( '\\\\.', '' ) + ']';\n\n// Parent directories, delimited by '/' or ':'. Currently unused, but must\n// be matched to parse the rest of the track name.\nvar _directoryRe = /((?:WC+[\\/:])*)/.source.replace( 'WC', _wordChar );\n\n// Target node. May contain word characters (a-zA-Z0-9_) and '.' or '-'.\nvar _nodeRe = /(WCOD+)?/.source.replace( 'WCOD', _wordCharOrDot );\n\n// Object on target node, and accessor. May not contain reserved\n// characters. Accessor may contain any character except closing bracket.\nvar _objectRe = /(?:\\.(WC+)(?:\\[(.+)\\])?)?/.source.replace( 'WC', _wordChar );\n\n// Property and accessor. May not contain reserved characters. Accessor may\n// contain any non-bracket characters.\nvar _propertyRe = /\\.(WC+)(?:\\[(.+)\\])?/.source.replace( 'WC', _wordChar );\n\nvar _trackRe = new RegExp( ''\n\t+ '^'\n\t+ _directoryRe\n\t+ _nodeRe\n\t+ _objectRe\n\t+ _propertyRe\n\t+ '$'\n);\n\nvar _supportedObjectNames = [ 'material', 'materials', 'bones' ];\n\nfunction Composite() {}\n\n\nfunction PropertyBinding( rootNode, path, parsedPath ) {\n\n\tthis.path = path;\n\tthis.parsedPath = parsedPath || PropertyBinding.parseTrackName( path );\n\n\tthis.node = PropertyBinding.findNode( rootNode, this.parsedPath.nodeName ) || rootNode;\n\n\tthis.rootNode = rootNode;\n\n}\n\nObject.assign( PropertyBinding, {\n\n\tComposite: Composite,\n\n\tcreate: function ( root, path, parsedPath ) {\n\n\t\tif ( ! ( root && false ) ) {\n\n\t\t\treturn new PropertyBinding( root, path, parsedPath );\n\n\t\t} else {\n\n\t\t\treturn new PropertyBinding.Composite( root, path, parsedPath );\n\n\t\t}\n\n\t},\n\n\t/**\n\t * Replaces spaces with underscores and removes unsupported characters from\n\t * node names, to ensure compatibility with parseTrackName().\n\t *\n\t * @param {string} name Node name to be sanitized.\n\t * @return {string}\n\t */\n\tsanitizeNodeName: function ( name ) {\n\n\t\treturn name.replace( /\\s/g, '_' ).replace( _reservedRe, '' );\n\n\t},\n\n\tparseTrackName: function ( trackName ) {\n\n\t\tvar matches = _trackRe.exec( trackName );\n\n\t\tif ( ! matches ) {\n\n\t\t\tthrow new Error( 'PropertyBinding: Cannot parse trackName: ' + trackName );\n\n\t\t}\n\n\t\tvar results = {\n\t\t\t// directoryName: matches[ 1 ], // (tschw) currently unused\n\t\t\tnodeName: matches[ 2 ],\n\t\t\tobjectName: matches[ 3 ],\n\t\t\tobjectIndex: matches[ 4 ],\n\t\t\tpropertyName: matches[ 5 ], // required\n\t\t\tpropertyIndex: matches[ 6 ]\n\t\t};\n\n\t\tvar lastDot = results.nodeName && results.nodeName.lastIndexOf( '.' );\n\n\t\tif ( lastDot !== undefined && lastDot !== - 1 ) {\n\n\t\t\tvar objectName = results.nodeName.substring( lastDot + 1 );\n\n\t\t\t// Object names must be checked against a whitelist. Otherwise, there\n\t\t\t// is no way to parse 'foo.bar.baz': 'baz' must be a property, but\n\t\t\t// 'bar' could be the objectName, or part of a nodeName (which can\n\t\t\t// include '.' characters).\n\t\t\tif ( _supportedObjectNames.indexOf( objectName ) !== - 1 ) {\n\n\t\t\t\tresults.nodeName = results.nodeName.substring( 0, lastDot );\n\t\t\t\tresults.objectName = objectName;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( results.propertyName === null || results.propertyName.length === 0 ) {\n\n\t\t\tthrow new Error( 'PropertyBinding: can not parse propertyName from trackName: ' + trackName );\n\n\t\t}\n\n\t\treturn results;\n\n\t},\n\n\tfindNode: function ( root, nodeName ) {\n\n\t\tif ( ! nodeName || nodeName === \"\" || nodeName === \".\" || nodeName === - 1 || nodeName === root.name || nodeName === root.uuid ) {\n\n\t\t\treturn root;\n\n\t\t}\n\n\t\t// search into skeleton bones.\n\t\tif ( root.skeleton ) {\n\n\t\t\tvar bone = root.skeleton.getBoneByName( nodeName );\n\n\t\t\tif ( bone !== undefined ) {\n\n\t\t\t\treturn bone;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// search into node subtree.\n\t\tif ( root.children ) {\n\n\t\t\tvar searchNodeSubtree = function ( children ) {\n\n\t\t\t\tfor ( var i = 0; i < children.length; i ++ ) {\n\n\t\t\t\t\tvar childNode = children[ i ];\n\n\t\t\t\t\tif ( childNode.name === nodeName || childNode.uuid === nodeName ) {\n\n\t\t\t\t\t\treturn childNode;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvar result = searchNodeSubtree( childNode.children );\n\n\t\t\t\t\tif ( result ) return result;\n\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\n\t\t\t};\n\n\t\t\tvar subTreeNode = searchNodeSubtree( root.children );\n\n\t\t\tif ( subTreeNode ) {\n\n\t\t\t\treturn subTreeNode;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n} );\n\nObject.assign( PropertyBinding.prototype, { // prototype, continued\n\n\t// these are used to \"bind\" a nonexistent property\n\t_getValue_unavailable: function () {},\n\t_setValue_unavailable: function () {},\n\n\tBindingType: {\n\t\tDirect: 0,\n\t\tEntireArray: 1,\n\t\tArrayElement: 2,\n\t\tHasFromToArray: 3\n\t},\n\n\tVersioning: {\n\t\tNone: 0,\n\t\tNeedsUpdate: 1,\n\t\tMatrixWorldNeedsUpdate: 2\n\t},\n\n\tGetterByBindingType: [\n\n\t\tfunction getValue_direct( buffer, offset ) {\n\n\t\t\tbuffer[ offset ] = this.node[ this.propertyName ];\n\n\t\t},\n\n\t\tfunction getValue_array( buffer, offset ) {\n\n\t\t\tvar source = this.resolvedProperty;\n\n\t\t\tfor ( var i = 0, n = source.length; i !== n; ++ i ) {\n\n\t\t\t\tbuffer[ offset ++ ] = source[ i ];\n\n\t\t\t}\n\n\t\t},\n\n\t\tfunction getValue_arrayElement( buffer, offset ) {\n\n\t\t\tbuffer[ offset ] = this.resolvedProperty[ this.propertyIndex ];\n\n\t\t},\n\n\t\tfunction getValue_toArray( buffer, offset ) {\n\n\t\t\tthis.resolvedProperty.toArray( buffer, offset );\n\n\t\t}\n\n\t],\n\n\tSetterByBindingTypeAndVersioning: [\n\n\t\t[\n\t\t\t// Direct\n\n\t\t\tfunction setValue_direct( buffer, offset ) {\n\n\t\t\t\tthis.targetObject[ this.propertyName ] = buffer[ offset ];\n\n\t\t\t},\n\n\t\t\tfunction setValue_direct_setNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tthis.targetObject[ this.propertyName ] = buffer[ offset ];\n\t\t\t\tthis.targetObject.needsUpdate = true;\n\n\t\t\t},\n\n\t\t\tfunction setValue_direct_setMatrixWorldNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tthis.targetObject[ this.propertyName ] = buffer[ offset ];\n\t\t\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\n\n\t\t\t}\n\n\t\t], [\n\n\t\t\t// EntireArray\n\n\t\t\tfunction setValue_array( buffer, offset ) {\n\n\t\t\t\tvar dest = this.resolvedProperty;\n\n\t\t\t\tfor ( var i = 0, n = dest.length; i !== n; ++ i ) {\n\n\t\t\t\t\tdest[ i ] = buffer[ offset ++ ];\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tfunction setValue_array_setNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tvar dest = this.resolvedProperty;\n\n\t\t\t\tfor ( var i = 0, n = dest.length; i !== n; ++ i ) {\n\n\t\t\t\t\tdest[ i ] = buffer[ offset ++ ];\n\n\t\t\t\t}\n\n\t\t\t\tthis.targetObject.needsUpdate = true;\n\n\t\t\t},\n\n\t\t\tfunction setValue_array_setMatrixWorldNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tvar dest = this.resolvedProperty;\n\n\t\t\t\tfor ( var i = 0, n = dest.length; i !== n; ++ i ) {\n\n\t\t\t\t\tdest[ i ] = buffer[ offset ++ ];\n\n\t\t\t\t}\n\n\t\t\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\n\n\t\t\t}\n\n\t\t], [\n\n\t\t\t// ArrayElement\n\n\t\t\tfunction setValue_arrayElement( buffer, offset ) {\n\n\t\t\t\tthis.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\n\n\t\t\t},\n\n\t\t\tfunction setValue_arrayElement_setNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tthis.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\n\t\t\t\tthis.targetObject.needsUpdate = true;\n\n\t\t\t},\n\n\t\t\tfunction setValue_arrayElement_setMatrixWorldNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tthis.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\n\t\t\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\n\n\t\t\t}\n\n\t\t], [\n\n\t\t\t// HasToFromArray\n\n\t\t\tfunction setValue_fromArray( buffer, offset ) {\n\n\t\t\t\tthis.resolvedProperty.fromArray( buffer, offset );\n\n\t\t\t},\n\n\t\t\tfunction setValue_fromArray_setNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tthis.resolvedProperty.fromArray( buffer, offset );\n\t\t\t\tthis.targetObject.needsUpdate = true;\n\n\t\t\t},\n\n\t\t\tfunction setValue_fromArray_setMatrixWorldNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tthis.resolvedProperty.fromArray( buffer, offset );\n\t\t\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\n\n\t\t\t}\n\n\t\t]\n\n\t],\n\n\tgetValue: function getValue_unbound( targetArray, offset ) {\n\n\t\tthis.bind();\n\t\tthis.getValue( targetArray, offset );\n\n\t\t// Note: This class uses a State pattern on a per-method basis:\n\t\t// 'bind' sets 'this.getValue' / 'setValue' and shadows the\n\t\t// prototype version of these methods with one that represents\n\t\t// the bound state. When the property is not found, the methods\n\t\t// become no-ops.\n\n\t},\n\n\tsetValue: function getValue_unbound( sourceArray, offset ) {\n\n\t\tthis.bind();\n\t\tthis.setValue( sourceArray, offset );\n\n\t},\n\n\t// create getter / setter pair for a property in the scene graph\n\tbind: function () {\n\n\t\tvar targetObject = this.node,\n\t\t\tparsedPath = this.parsedPath,\n\n\t\t\tobjectName = parsedPath.objectName,\n\t\t\tpropertyName = parsedPath.propertyName,\n\t\t\tpropertyIndex = parsedPath.propertyIndex;\n\n\t\tif ( ! targetObject ) {\n\n\t\t\ttargetObject = PropertyBinding.findNode( this.rootNode, parsedPath.nodeName ) || this.rootNode;\n\n\t\t\tthis.node = targetObject;\n\n\t\t}\n\n\t\t// set fail state so we can just 'return' on error\n\t\tthis.getValue = this._getValue_unavailable;\n\t\tthis.setValue = this._setValue_unavailable;\n\n\t\t// ensure there is a value node\n\t\tif ( ! targetObject ) {\n\n\t\t\tconsole.error( 'THREE.PropertyBinding: Trying to update node for track: ' + this.path + ' but it wasn\\'t found.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( objectName ) {\n\n\t\t\tvar objectIndex = parsedPath.objectIndex;\n\n\t\t\t// special cases were we need to reach deeper into the hierarchy to get the face materials....\n\t\t\tswitch ( objectName ) {\n\n\t\t\t\tcase 'materials':\n\n\t\t\t\t\tif ( ! targetObject.material ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to material as node does not have a material.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( ! targetObject.material.materials ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttargetObject = targetObject.material.materials;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'bones':\n\n\t\t\t\t\tif ( ! targetObject.skeleton ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// potential future optimization: skip this if propertyIndex is already an integer\n\t\t\t\t\t// and convert the integer string to a true integer.\n\n\t\t\t\t\ttargetObject = targetObject.skeleton.bones;\n\n\t\t\t\t\t// support resolving morphTarget names into indices.\n\t\t\t\t\tfor ( var i = 0; i < targetObject.length; i ++ ) {\n\n\t\t\t\t\t\tif ( targetObject[ i ].name === objectIndex ) {\n\n\t\t\t\t\t\t\tobjectIndex = i;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tif ( targetObject[ objectName ] === undefined ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to objectName of node undefined.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttargetObject = targetObject[ objectName ];\n\n\t\t\t}\n\n\n\t\t\tif ( objectIndex !== undefined ) {\n\n\t\t\t\tif ( targetObject[ objectIndex ] === undefined ) {\n\n\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.', this, targetObject );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\ttargetObject = targetObject[ objectIndex ];\n\n\t\t\t}\n\n\t\t}\n\n\t\t// resolve property\n\t\tvar nodeProperty = targetObject[ propertyName ];\n\n\t\tif ( nodeProperty === undefined ) {\n\n\t\t\tvar nodeName = parsedPath.nodeName;\n\n\t\t\tconsole.error( 'THREE.PropertyBinding: Trying to update property for track: ' + nodeName +\n\t\t\t\t'.' + propertyName + ' but it wasn\\'t found.', targetObject );\n\t\t\treturn;\n\n\t\t}\n\n\t\t// determine versioning scheme\n\t\tvar versioning = this.Versioning.None;\n\n\t\tthis.targetObject = targetObject;\n\n\t\tif ( targetObject.needsUpdate !== undefined ) { // material\n\n\t\t\tversioning = this.Versioning.NeedsUpdate;\n\n\t\t} else if ( targetObject.matrixWorldNeedsUpdate !== undefined ) { // node transform\n\n\t\t\tversioning = this.Versioning.MatrixWorldNeedsUpdate;\n\n\t\t}\n\n\t\t// determine how the property gets bound\n\t\tvar bindingType = this.BindingType.Direct;\n\n\t\tif ( propertyIndex !== undefined ) {\n\n\t\t\t// access a sub element of the property array (only primitives are supported right now)\n\n\t\t\tif ( propertyName === \"morphTargetInfluences\" ) {\n\n\t\t\t\t// potential optimization, skip this if propertyIndex is already an integer, and convert the integer string to a true integer.\n\n\t\t\t\t// support resolving morphTarget names into indices.\n\t\t\t\tif ( ! targetObject.geometry ) {\n\n\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.', this );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tif ( targetObject.geometry.isBufferGeometry ) {\n\n\t\t\t\t\tif ( ! targetObject.geometry.morphAttributes ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfor ( var i = 0; i < this.node.geometry.morphAttributes.position.length; i ++ ) {\n\n\t\t\t\t\t\tif ( targetObject.geometry.morphAttributes.position[ i ].name === propertyIndex ) {\n\n\t\t\t\t\t\t\tpropertyIndex = i;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\n\t\t\t\t} else {\n\n\t\t\t\t\t{\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfor ( var i = 0; i < false.length; i ++ ) {\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tbindingType = this.BindingType.ArrayElement;\n\n\t\t\tthis.resolvedProperty = nodeProperty;\n\t\t\tthis.propertyIndex = propertyIndex;\n\n\t\t} else if ( nodeProperty.fromArray !== undefined && nodeProperty.toArray !== undefined ) {\n\n\t\t\t// must use copy for Object3D.Euler/Quaternion\n\n\t\t\tbindingType = this.BindingType.HasFromToArray;\n\n\t\t\tthis.resolvedProperty = nodeProperty;\n\n\t\t} else if ( Array.isArray( nodeProperty ) ) {\n\n\t\t\tbindingType = this.BindingType.EntireArray;\n\n\t\t\tthis.resolvedProperty = nodeProperty;\n\n\t\t} else {\n\n\t\t\tthis.propertyName = propertyName;\n\n\t\t}\n\n\t\t// select getter / setter\n\t\tthis.getValue = this.GetterByBindingType[ bindingType ];\n\t\tthis.setValue = this.SetterByBindingTypeAndVersioning[ bindingType ][ versioning ];\n\n\t},\n\n\tunbind: function () {\n\n\t\tthis.node = null;\n\n\t\t// back to the prototype version of getValue / setValue\n\t\t// note: avoiding to mutate the shape of 'this' via 'delete'\n\t\tthis.getValue = this._getValue_unbound;\n\t\tthis.setValue = this._setValue_unbound;\n\n\t}\n\n} );\n\n//!\\ DECLARE ALIAS AFTER assign prototype !\nObject.assign( PropertyBinding.prototype, {\n\n\t// initial state of these methods that calls 'bind'\n\t_getValue_unbound: PropertyBinding.prototype.getValue,\n\t_setValue_unbound: PropertyBinding.prototype.setValue,\n\n} );\n\nfunction AnimationObjectGroup() {}\nfunction AnimationMixer() {}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction Uniform( value ) {\n\n\tif ( typeof value === 'string' ) {\n\n\t\tconsole.warn( 'THREE.Uniform: Type parameter is no longer needed.' );\n\t\tvalue = arguments[ 1 ];\n\n\t}\n\n\tthis.value = value;\n\n}\n\nUniform.prototype.clone = function () {\n\n\treturn new Uniform( this.value.clone === undefined ? this.value : this.value.clone() );\n\n};\n\n/**\n * @author benaadams / https://twitter.com/ben_a_adams\n */\n\nfunction InstancedInterleavedBuffer( array, stride, meshPerAttribute ) {\n\n\tInterleavedBuffer.call( this, array, stride );\n\n\tthis.meshPerAttribute = meshPerAttribute || 1;\n\n}\n\nInstancedInterleavedBuffer.prototype = Object.assign( Object.create( InterleavedBuffer.prototype ), {\n\n\tconstructor: InstancedInterleavedBuffer,\n\n\tisInstancedInterleavedBuffer: true,\n\n\tcopy: function ( source ) {\n\n\t\tInterleavedBuffer.prototype.copy.call( this, source );\n\n\t\tthis.meshPerAttribute = source.meshPerAttribute;\n\n\t\treturn this;\n\n\t}\n\n} );\n\nfunction Raycaster() {}\n\n/**\n * @author bhouston / http://clara.io\n * @author WestLangley / http://github.com/WestLangley\n *\n * Ref: https://en.wikipedia.org/wiki/Spherical_coordinate_system\n *\n * The polar angle (phi) is measured from the positive y-axis. The positive y-axis is up.\n * The azimuthal angle (theta) is measured from the positive z-axis.\n */\n\nfunction Spherical( radius, phi, theta ) {\n\n\tthis.radius = ( radius !== undefined ) ? radius : 1.0;\n\tthis.phi = ( phi !== undefined ) ? phi : 0; // polar angle\n\tthis.theta = ( theta !== undefined ) ? theta : 0; // azimuthal angle\n\n\treturn this;\n\n}\n\nObject.assign( Spherical.prototype, {\n\n\tset: function ( radius, phi, theta ) {\n\n\t\tthis.radius = radius;\n\t\tthis.phi = phi;\n\t\tthis.theta = theta;\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( other ) {\n\n\t\tthis.radius = other.radius;\n\t\tthis.phi = other.phi;\n\t\tthis.theta = other.theta;\n\n\t\treturn this;\n\n\t},\n\n\t// restrict phi to be betwee EPS and PI-EPS\n\tmakeSafe: function () {\n\n\t\tvar EPS = 0.000001;\n\t\tthis.phi = Math.max( EPS, Math.min( Math.PI - EPS, this.phi ) );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromVector3: function ( v ) {\n\n\t\treturn this.setFromCartesianCoords( v.x, v.y, v.z );\n\n\t},\n\n\tsetFromCartesianCoords: function ( x, y, z ) {\n\n\t\tthis.radius = Math.sqrt( x * x + y * y + z * z );\n\n\t\tif ( this.radius === 0 ) {\n\n\t\t\tthis.theta = 0;\n\t\t\tthis.phi = 0;\n\n\t\t} else {\n\n\t\t\tthis.theta = Math.atan2( x, z );\n\t\t\tthis.phi = Math.acos( MathUtils.clamp( y / this.radius, - 1, 1 ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n} );\n\nfunction Cylindrical() {}\n\nfunction Box2() {}\n\nfunction Line3() {}\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction ImmediateRenderObject( material ) {\n\n\tObject3D.call( this );\n\n\tthis.material = material;\n\tthis.render = function ( /* renderCallback */ ) {};\n\n}\n\nImmediateRenderObject.prototype = Object.create( Object3D.prototype );\nImmediateRenderObject.prototype.constructor = ImmediateRenderObject;\n\nImmediateRenderObject.prototype.isImmediateRenderObject = true;\n\nfunction SpotLightHelper() {}\nvar _boneMatrix = new Matrix4();\nvar _matrixWorldInv = new Matrix4();\nfunction SkeletonHelper() {}\nfunction PointLightHelper() {}\nvar _color1 = new Color();\nvar _color2 = new Color();\n\nfunction HemisphereLightHelper() {}\nfunction GridHelper() {}\nfunction PolarGridHelper() {}\n\nfunction DirectionalLightHelper() {}\nvar _camera = new Camera();\n\nfunction CameraHelper() {}\n\nfunction BoxHelper() {}\nfunction Box3Helper() {}\nfunction PlaneHelper() {}\n\nfunction ArrowHelper() {}\nfunction AxesHelper() {}\n\nvar _flatCamera = new OrthographicCamera();\n\nfunction PMREMGenerator() {}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction Face4( a, b, c, d, normal, color, materialIndex ) {\n\n\tconsole.warn( 'THREE.Face4 has been removed. A THREE.Face3 will be created instead.' );\n\treturn new Face3( a, b, c, normal, color, materialIndex );\n\n}\n\nvar LineStrip = 0;\nvar LinePieces = 1;\nvar NoColors = 0;\nvar FaceColors = 1;\nvar VertexColors = 2;\n\nfunction MeshFaceMaterial() {}\nfunction MultiMaterial() {}\nfunction PointCloud() {}\nfunction Particle() {}\nfunction ParticleSystem() {}\nfunction PointCloudMaterial() {}\nfunction ParticleBasicMaterial() {}\nfunction ParticleSystemMaterial() {}\nfunction Vertex() {}\nfunction DynamicBufferAttribute() {}\nfunction Int8Attribute() {}\nfunction Uint8Attribute() {}\nfunction Uint8ClampedAttribute() {}\nfunction Int16Attribute() {}\nfunction Uint16Attribute() {}\nfunction Int32Attribute() {}\nfunction Uint32Attribute() {}\nfunction Float32Attribute() {}\nfunction Float64Attribute() {}\n\n//\n\nCurve.create = function ( construct, getPoint ) {\n\n\tconsole.log( 'THREE.Curve.create() has been deprecated' );\n\n\tconstruct.prototype = Object.create( Curve.prototype );\n\tconstruct.prototype.constructor = construct;\n\tconstruct.prototype.getPoint = getPoint;\n\n\treturn construct;\n\n};\n\n//\n\nObject.assign( CurvePath.prototype, {\n\n\tcreatePointsGeometry: function ( divisions ) {\n\n\t\tconsole.warn( 'THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.' );\n\n\t\t// generate geometry from path points (for Line or Points objects)\n\n\t\tvar pts = this.getPoints( divisions );\n\t\treturn this.createGeometry( pts );\n\n\t},\n\n\tcreateSpacedPointsGeometry: function ( divisions ) {\n\n\t\tconsole.warn( 'THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.' );\n\n\t\t// generate geometry from equidistant sampling along the path\n\n\t\tvar pts = this.getSpacedPoints( divisions );\n\t\treturn this.createGeometry( pts );\n\n\t},\n\n\tcreateGeometry: function ( points ) {\n\n\t\tconsole.warn( 'THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.' );\n\n\t\tvar geometry = new Geometry();\n\n\t\tfor ( var i = 0, l = points.length; i < l; i ++ ) {\n\n\t\t\tvar point = points[ i ];\n\t\t\tgeometry.vertices.push( new Vector3( point.x, point.y, point.z || 0 ) );\n\n\t\t}\n\n\t\treturn geometry;\n\n\t}\n\n} );\n\n//\n\nObject.assign( Path.prototype, {\n\n\tfromPoints: function ( points ) {\n\n\t\tconsole.warn( 'THREE.Path: .fromPoints() has been renamed to .setFromPoints().' );\n\t\treturn this.setFromPoints( points );\n\n\t}\n\n} );\n\n//\n\nfunction ClosedSplineCurve3( points ) {\n\n\tconsole.warn( 'THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.' );\n\n\tCatmullRomCurve3.call( this, points );\n\tthis.type = 'catmullrom';\n\tthis.closed = true;\n\n}\n\nClosedSplineCurve3.prototype = Object.create( CatmullRomCurve3.prototype );\n\n//\n\nfunction SplineCurve3( points ) {\n\n\tconsole.warn( 'THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.' );\n\n\tCatmullRomCurve3.call( this, points );\n\tthis.type = 'catmullrom';\n\n}\n\nSplineCurve3.prototype = Object.create( CatmullRomCurve3.prototype );\n\n//\n\nfunction Spline( points ) {\n\n\tconsole.warn( 'THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead.' );\n\n\tCatmullRomCurve3.call( this, points );\n\tthis.type = 'catmullrom';\n\n}\n\nSpline.prototype = Object.create( CatmullRomCurve3.prototype );\n\nObject.assign( Spline.prototype, {\n\n\tinitFromArray: function ( /* a */ ) {\n\n\t\tconsole.error( 'THREE.Spline: .initFromArray() has been removed.' );\n\n\t},\n\tgetControlPointsArray: function ( /* optionalTarget */ ) {\n\n\t\tconsole.error( 'THREE.Spline: .getControlPointsArray() has been removed.' );\n\n\t},\n\treparametrizeByArcLength: function ( /* samplingCoef */ ) {\n\n\t\tconsole.error( 'THREE.Spline: .reparametrizeByArcLength() has been removed.' );\n\n\t}\n\n} );\n\nfunction AxisHelper() {}\nfunction BoundingBoxHelper() {}\nfunction EdgesHelper() {}\nfunction WireframeHelper() {}\n\n//\n\nObject.assign( Loader.prototype, {\n\n\textractUrlBase: function ( url ) {\n\n\t\tconsole.warn( 'THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead.' );\n\t\treturn LoaderUtils.extractUrlBase( url );\n\n\t}\n\n} );\n\nLoader.Handlers = {\n\n\tadd: function ( /* regex, loader */ ) {\n\n\t\tconsole.error( 'THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.' );\n\n\t},\n\n\tget: function ( /* file */ ) {\n\n\t\tconsole.error( 'THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.' );\n\n\t}\n\n};\n\nfunction XHRLoader() {}\nfunction BinaryTextureLoader() {}\n\nObject.assign( Box3.prototype, {\n\n\tcenter: function ( optionalTarget ) {\n\n\t\tconsole.warn( 'THREE.Box3: .center() has been renamed to .getCenter().' );\n\t\treturn this.getCenter( optionalTarget );\n\n\t},\n\tempty: function () {\n\n\t\tconsole.warn( 'THREE.Box3: .empty() has been renamed to .isEmpty().' );\n\t\treturn this.isEmpty();\n\n\t},\n\tisIntersectionBox: function ( box ) {\n\n\t\tconsole.warn( 'THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox().' );\n\t\treturn this.intersectsBox( box );\n\n\t},\n\tisIntersectionSphere: function ( sphere ) {\n\n\t\tconsole.warn( 'THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere().' );\n\t\treturn this.intersectsSphere( sphere );\n\n\t},\n\tsize: function ( optionalTarget ) {\n\n\t\tconsole.warn( 'THREE.Box3: .size() has been renamed to .getSize().' );\n\t\treturn this.getSize( optionalTarget );\n\n\t}\n} );\n\nFrustum.prototype.setFromMatrix = function ( m ) {\n\n\tconsole.warn( 'THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix().' );\n\treturn this.setFromProjectionMatrix( m );\n\n};\n\nObject.assign( MathUtils, {\n\n\trandom16: function () {\n\n\t\tconsole.warn( 'THREE.Math: .random16() has been deprecated. Use Math.random() instead.' );\n\t\treturn Math.random();\n\n\t},\n\n\tnearestPowerOfTwo: function ( value ) {\n\n\t\tconsole.warn( 'THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo().' );\n\t\treturn MathUtils.floorPowerOfTwo( value );\n\n\t},\n\n\tnextPowerOfTwo: function ( value ) {\n\n\t\tconsole.warn( 'THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo().' );\n\t\treturn MathUtils.ceilPowerOfTwo( value );\n\n\t}\n\n} );\n\nObject.assign( Matrix3.prototype, {\n\n\tflattenToArrayOffset: function ( array, offset ) {\n\n\t\tconsole.warn( \"THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.\" );\n\t\treturn this.toArray( array, offset );\n\n\t},\n\tmultiplyVector3: function ( vector ) {\n\n\t\tconsole.warn( 'THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.' );\n\t\treturn vector.applyMatrix3( this );\n\n\t},\n\tmultiplyVector3Array: function ( /* a */ ) {\n\n\t\tconsole.error( 'THREE.Matrix3: .multiplyVector3Array() has been removed.' );\n\n\t},\n\tapplyToBufferAttribute: function ( attribute ) {\n\n\t\tconsole.warn( 'THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead.' );\n\t\treturn attribute.applyMatrix3( this );\n\n\t},\n\tapplyToVector3Array: function ( /* array, offset, length */ ) {\n\n\t\tconsole.error( 'THREE.Matrix3: .applyToVector3Array() has been removed.' );\n\n\t}\n\n} );\n\nObject.assign( Matrix4.prototype, {\n\n\textractPosition: function ( m ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().' );\n\t\treturn this.copyPosition( m );\n\n\t},\n\tflattenToArrayOffset: function ( array, offset ) {\n\n\t\tconsole.warn( \"THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.\" );\n\t\treturn this.toArray( array, offset );\n\n\t},\n\tgetPosition: function () {\n\n\t\tconsole.warn( 'THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.' );\n\t\treturn new Vector3().setFromMatrixColumn( this, 3 );\n\n\t},\n\tsetRotationFromQuaternion: function ( q ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().' );\n\t\treturn this.makeRotationFromQuaternion( q );\n\n\t},\n\tmultiplyToArray: function () {\n\n\t\tconsole.warn( 'THREE.Matrix4: .multiplyToArray() has been removed.' );\n\n\t},\n\tmultiplyVector3: function ( vector ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead.' );\n\t\treturn vector.applyMatrix4( this );\n\n\t},\n\tmultiplyVector4: function ( vector ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.' );\n\t\treturn vector.applyMatrix4( this );\n\n\t},\n\tmultiplyVector3Array: function ( /* a */ ) {\n\n\t\tconsole.error( 'THREE.Matrix4: .multiplyVector3Array() has been removed.' );\n\n\t},\n\trotateAxis: function ( v ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.' );\n\t\tv.transformDirection( this );\n\n\t},\n\tcrossVector: function ( vector ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.' );\n\t\treturn vector.applyMatrix4( this );\n\n\t},\n\ttranslate: function () {\n\n\t\tconsole.error( 'THREE.Matrix4: .translate() has been removed.' );\n\n\t},\n\trotateX: function () {\n\n\t\tconsole.error( 'THREE.Matrix4: .rotateX() has been removed.' );\n\n\t},\n\trotateY: function () {\n\n\t\tconsole.error( 'THREE.Matrix4: .rotateY() has been removed.' );\n\n\t},\n\trotateZ: function () {\n\n\t\tconsole.error( 'THREE.Matrix4: .rotateZ() has been removed.' );\n\n\t},\n\trotateByAxis: function () {\n\n\t\tconsole.error( 'THREE.Matrix4: .rotateByAxis() has been removed.' );\n\n\t},\n\tapplyToBufferAttribute: function ( attribute ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead.' );\n\t\treturn attribute.applyMatrix4( this );\n\n\t},\n\tapplyToVector3Array: function ( /* array, offset, length */ ) {\n\n\t\tconsole.error( 'THREE.Matrix4: .applyToVector3Array() has been removed.' );\n\n\t},\n\tmakeFrustum: function ( left, right, bottom, top, near, far ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead.' );\n\t\treturn this.makePerspective( left, right, top, bottom, near, far );\n\n\t}\n\n} );\n\nPlane.prototype.isIntersectionLine = function ( line ) {\n\n\tconsole.warn( 'THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine().' );\n\treturn this.intersectsLine( line );\n\n};\n\nQuaternion.prototype.multiplyVector3 = function ( vector ) {\n\n\tconsole.warn( 'THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.' );\n\treturn vector.applyQuaternion( this );\n\n};\n\nObject.assign( Triangle.prototype, {\n\n\tarea: function () {\n\n\t\tconsole.warn( 'THREE.Triangle: .area() has been renamed to .getArea().' );\n\t\treturn this.getArea();\n\n\t},\n\tbarycoordFromPoint: function ( point, target ) {\n\n\t\tconsole.warn( 'THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord().' );\n\t\treturn this.getBarycoord( point, target );\n\n\t},\n\tmidpoint: function ( target ) {\n\n\t\tconsole.warn( 'THREE.Triangle: .midpoint() has been renamed to .getMidpoint().' );\n\t\treturn this.getMidpoint( target );\n\n\t},\n\tnormal: function ( target ) {\n\n\t\tconsole.warn( 'THREE.Triangle: .normal() has been renamed to .getNormal().' );\n\t\treturn this.getNormal( target );\n\n\t},\n\tplane: function ( target ) {\n\n\t\tconsole.warn( 'THREE.Triangle: .plane() has been renamed to .getPlane().' );\n\t\treturn this.getPlane( target );\n\n\t}\n\n} );\n\nObject.assign( Triangle, {\n\n\tbarycoordFromPoint: function ( point, a, b, c, target ) {\n\n\t\tconsole.warn( 'THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord().' );\n\t\treturn Triangle.getBarycoord( point, a, b, c, target );\n\n\t},\n\tnormal: function ( a, b, c, target ) {\n\n\t\tconsole.warn( 'THREE.Triangle: .normal() has been renamed to .getNormal().' );\n\t\treturn Triangle.getNormal( a, b, c, target );\n\n\t}\n\n} );\n\nObject.assign( Shape.prototype, {\n\n\textractAllPoints: function ( divisions ) {\n\n\t\tconsole.warn( 'THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead.' );\n\t\treturn this.extractPoints( divisions );\n\n\t},\n\textrude: function ( options ) {\n\n\t\tconsole.warn( 'THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead.' );\n\t\treturn new ExtrudeGeometry( this, options );\n\n\t},\n\tmakeGeometry: function ( options ) {\n\n\t\tconsole.warn( 'THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead.' );\n\t\treturn new ShapeGeometry( this, options );\n\n\t}\n\n} );\n\nObject.assign( Vector2.prototype, {\n\n\tfromAttribute: function ( attribute, index, offset ) {\n\n\t\tconsole.warn( 'THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute().' );\n\t\treturn this.fromBufferAttribute( attribute, index, offset );\n\n\t},\n\tdistanceToManhattan: function ( v ) {\n\n\t\tconsole.warn( 'THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo().' );\n\t\treturn this.manhattanDistanceTo( v );\n\n\t},\n\tlengthManhattan: function () {\n\n\t\tconsole.warn( 'THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength().' );\n\t\treturn this.manhattanLength();\n\n\t}\n\n} );\n\nObject.assign( Vector3.prototype, {\n\n\tsetEulerFromRotationMatrix: function () {\n\n\t\tconsole.error( 'THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.' );\n\n\t},\n\tsetEulerFromQuaternion: function () {\n\n\t\tconsole.error( 'THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.' );\n\n\t},\n\tgetPositionFromMatrix: function ( m ) {\n\n\t\tconsole.warn( 'THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().' );\n\t\treturn this.setFromMatrixPosition( m );\n\n\t},\n\tgetScaleFromMatrix: function ( m ) {\n\n\t\tconsole.warn( 'THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().' );\n\t\treturn this.setFromMatrixScale( m );\n\n\t},\n\tgetColumnFromMatrix: function ( index, matrix ) {\n\n\t\tconsole.warn( 'THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().' );\n\t\treturn this.setFromMatrixColumn( matrix, index );\n\n\t},\n\tapplyProjection: function ( m ) {\n\n\t\tconsole.warn( 'THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead.' );\n\t\treturn this.applyMatrix4( m );\n\n\t},\n\tfromAttribute: function ( attribute, index, offset ) {\n\n\t\tconsole.warn( 'THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute().' );\n\t\treturn this.fromBufferAttribute( attribute, index, offset );\n\n\t},\n\tdistanceToManhattan: function ( v ) {\n\n\t\tconsole.warn( 'THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo().' );\n\t\treturn this.manhattanDistanceTo( v );\n\n\t},\n\tlengthManhattan: function () {\n\n\t\tconsole.warn( 'THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength().' );\n\t\treturn this.manhattanLength();\n\n\t}\n\n} );\n\nObject.assign( Vector4.prototype, {\n\n\tfromAttribute: function ( attribute, index, offset ) {\n\n\t\tconsole.warn( 'THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute().' );\n\t\treturn this.fromBufferAttribute( attribute, index, offset );\n\n\t},\n\tlengthManhattan: function () {\n\n\t\tconsole.warn( 'THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength().' );\n\t\treturn this.manhattanLength();\n\n\t}\n\n} );\n\n//\n\nObject.assign( Geometry.prototype, {\n\n\tcomputeTangents: function () {\n\n\t\tconsole.error( 'THREE.Geometry: .computeTangents() has been removed.' );\n\n\t},\n\tcomputeLineDistances: function () {\n\n\t\tconsole.error( 'THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.' );\n\n\t},\n\tapplyMatrix: function ( matrix ) {\n\n\t\tconsole.warn( 'THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4().' );\n\t\treturn this.applyMatrix4( matrix );\n\n\t}\n\n} );\n\nObject.assign( Object3D.prototype, {\n\n\tgetChildByName: function ( name ) {\n\n\t\tconsole.warn( 'THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().' );\n\t\treturn this.getObjectByName( name );\n\n\t},\n\trenderDepth: function () {\n\n\t\tconsole.warn( 'THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.' );\n\n\t},\n\ttranslate: function ( distance, axis ) {\n\n\t\tconsole.warn( 'THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.' );\n\t\treturn this.translateOnAxis( axis, distance );\n\n\t},\n\tgetWorldRotation: function () {\n\n\t\tconsole.error( 'THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.' );\n\n\t},\n\tapplyMatrix: function ( matrix ) {\n\n\t\tconsole.warn( 'THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4().' );\n\t\treturn this.applyMatrix4( matrix );\n\n\t}\n\n} );\n\nObject.defineProperties( Object3D.prototype, {\n\n\teulerOrder: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .eulerOrder is now .rotation.order.' );\n\t\t\treturn this.rotation.order;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .eulerOrder is now .rotation.order.' );\n\t\t\tthis.rotation.order = value;\n\n\t\t}\n\t},\n\tuseQuaternion: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.' );\n\n\t\t},\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.' );\n\n\t\t}\n\t}\n\n} );\n\nObject.assign( Mesh.prototype, {\n\n\tsetDrawMode: function () {\n\n\t\tconsole.error( 'THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.' );\n\n\t},\n\n} );\n\nObject.defineProperties( Mesh.prototype, {\n\n\tdrawMode: {\n\t\tget: function () {\n\n\t\t\tconsole.error( 'THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode.' );\n\t\t\treturn TrianglesDrawMode;\n\n\t\t},\n\t\tset: function () {\n\n\t\t\tconsole.error( 'THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.' );\n\n\t\t}\n\t}\n\n} );\n\nObject.defineProperties( LOD.prototype, {\n\n\tobjects: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.LOD: .objects has been renamed to .levels.' );\n\t\t\treturn this.levels;\n\n\t\t}\n\t}\n\n} );\n\nObject.defineProperty( Skeleton.prototype, 'useVertexTexture', {\n\n\tget: function () {\n\n\t\tconsole.warn( 'THREE.Skeleton: useVertexTexture has been removed.' );\n\n\t},\n\tset: function () {\n\n\t\tconsole.warn( 'THREE.Skeleton: useVertexTexture has been removed.' );\n\n\t}\n\n} );\n\nObject.defineProperty( Curve.prototype, '__arcLengthDivisions', {\n\n\tget: function () {\n\n\t\tconsole.warn( 'THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.' );\n\t\treturn this.arcLengthDivisions;\n\n\t},\n\tset: function ( value ) {\n\n\t\tconsole.warn( 'THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.' );\n\t\tthis.arcLengthDivisions = value;\n\n\t}\n\n} );\n\n//\n\nPerspectiveCamera.prototype.setLens = function ( focalLength, filmGauge ) {\n\n\tconsole.warn( \"THREE.PerspectiveCamera.setLens is deprecated. \" +\n\t\t\t\"Use .setFocalLength and .filmGauge for a photographic setup.\" );\n\n\tif ( filmGauge !== undefined ) this.filmGauge = filmGauge;\n\tthis.setFocalLength( focalLength );\n\n};\n\n//\n\nObject.defineProperties( Light.prototype, {\n\tonlyShadow: {\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.Light: .onlyShadow has been removed.' );\n\n\t\t}\n\t},\n\tshadowCameraFov: {\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraFov is now .shadow.camera.fov.' );\n\t\t\tthis.shadow.camera.fov = value;\n\n\t\t}\n\t},\n\tshadowCameraLeft: {\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraLeft is now .shadow.camera.left.' );\n\t\t\tthis.shadow.camera.left = value;\n\n\t\t}\n\t},\n\tshadowCameraRight: {\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraRight is now .shadow.camera.right.' );\n\t\t\tthis.shadow.camera.right = value;\n\n\t\t}\n\t},\n\tshadowCameraTop: {\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraTop is now .shadow.camera.top.' );\n\t\t\tthis.shadow.camera.top = value;\n\n\t\t}\n\t},\n\tshadowCameraBottom: {\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom.' );\n\t\t\tthis.shadow.camera.bottom = value;\n\n\t\t}\n\t},\n\tshadowCameraNear: {\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraNear is now .shadow.camera.near.' );\n\t\t\tthis.shadow.camera.near = value;\n\n\t\t}\n\t},\n\tshadowCameraFar: {\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraFar is now .shadow.camera.far.' );\n\t\t\tthis.shadow.camera.far = value;\n\n\t\t}\n\t},\n\tshadowCameraVisible: {\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.' );\n\n\t\t}\n\t},\n\tshadowBias: {\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowBias is now .shadow.bias.' );\n\t\t\tthis.shadow.bias = value;\n\n\t\t}\n\t},\n\tshadowDarkness: {\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowDarkness has been removed.' );\n\n\t\t}\n\t},\n\tshadowMapWidth: {\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowMapWidth is now .shadow.mapSize.width.' );\n\t\t\tthis.shadow.mapSize.width = value;\n\n\t\t}\n\t},\n\tshadowMapHeight: {\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowMapHeight is now .shadow.mapSize.height.' );\n\t\t\tthis.shadow.mapSize.height = value;\n\n\t\t}\n\t}\n} );\n\n//\n\nObject.defineProperties( BufferAttribute.prototype, {\n\n\tlength: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.BufferAttribute: .length has been deprecated. Use .count instead.' );\n\t\t\treturn this.array.length;\n\n\t\t}\n\t},\n\tdynamic: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead.' );\n\t\t\treturn this.usage === DynamicDrawUsage;\n\n\t\t},\n\t\tset: function ( /* value */ ) {\n\n\t\t\tconsole.warn( 'THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead.' );\n\t\t\tthis.setUsage( DynamicDrawUsage );\n\n\t\t}\n\t}\n\n} );\n\nObject.assign( BufferAttribute.prototype, {\n\tsetDynamic: function ( value ) {\n\n\t\tconsole.warn( 'THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead.' );\n\t\tthis.setUsage( value === true ? DynamicDrawUsage : StaticDrawUsage );\n\t\treturn this;\n\n\t},\n\tcopyIndicesArray: function ( /* indices */ ) {\n\n\t\tconsole.error( 'THREE.BufferAttribute: .copyIndicesArray() has been removed.' );\n\n\t},\n\tsetArray: function ( /* array */ ) {\n\n\t\tconsole.error( 'THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers' );\n\n\t}\n} );\n\nObject.assign( BufferGeometry.prototype, {\n\n\taddIndex: function ( index ) {\n\n\t\tconsole.warn( 'THREE.BufferGeometry: .addIndex() has been renamed to .setIndex().' );\n\t\tthis.setIndex( index );\n\n\t},\n\taddAttribute: function ( name, attribute ) {\n\n\t\tconsole.warn( 'THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute().' );\n\n\t\tif ( ! ( attribute && attribute.isBufferAttribute ) && ! ( attribute && attribute.isInterleavedBufferAttribute ) ) {\n\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .addAttribute() now expects ( name, attribute ).' );\n\n\t\t\treturn this.setAttribute( name, new BufferAttribute( arguments[ 1 ], arguments[ 2 ] ) );\n\n\t\t}\n\n\t\tif ( name === 'index' ) {\n\n\t\t\tconsole.warn( 'THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute.' );\n\t\t\tthis.setIndex( attribute );\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\treturn this.setAttribute( name, attribute );\n\n\t},\n\taddDrawCall: function ( start, count, indexOffset ) {\n\n\t\tif ( indexOffset !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset.' );\n\n\t\t}\n\t\tconsole.warn( 'THREE.BufferGeometry: .addDrawCall() is now .addGroup().' );\n\t\tthis.addGroup( start, count );\n\n\t},\n\tclearDrawCalls: function () {\n\n\t\tconsole.warn( 'THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups().' );\n\t\tthis.clearGroups();\n\n\t},\n\tcomputeTangents: function () {\n\n\t\tconsole.warn( 'THREE.BufferGeometry: .computeTangents() has been removed.' );\n\n\t},\n\tcomputeOffsets: function () {\n\n\t\tconsole.warn( 'THREE.BufferGeometry: .computeOffsets() has been removed.' );\n\n\t},\n\tremoveAttribute: function ( name ) {\n\n\t\tconsole.warn( 'THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute().' );\n\n\t\treturn this.deleteAttribute( name );\n\n\t},\n\tapplyMatrix: function ( matrix ) {\n\n\t\tconsole.warn( 'THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4().' );\n\t\treturn this.applyMatrix4( matrix );\n\n\t}\n\n} );\n\nObject.defineProperties( BufferGeometry.prototype, {\n\n\tdrawcalls: {\n\t\tget: function () {\n\n\t\t\tconsole.error( 'THREE.BufferGeometry: .drawcalls has been renamed to .groups.' );\n\t\t\treturn this.groups;\n\n\t\t}\n\t},\n\toffsets: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .offsets has been renamed to .groups.' );\n\t\t\treturn this.groups;\n\n\t\t}\n\t}\n\n} );\n\nObject.defineProperties( Raycaster.prototype, {\n\n\tlinePrecision: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead.' );\n\t\t\treturn this.params.Line.threshold;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead.' );\n\t\t\tthis.params.Line.threshold = value;\n\n\t\t}\n\t}\n\n} );\n\nObject.defineProperties( InterleavedBuffer.prototype, {\n\n\tdynamic: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead.' );\n\t\t\treturn this.usage === DynamicDrawUsage;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead.' );\n\t\t\tthis.setUsage( value );\n\n\t\t}\n\t}\n\n} );\n\nObject.assign( InterleavedBuffer.prototype, {\n\tsetDynamic: function ( value ) {\n\n\t\tconsole.warn( 'THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead.' );\n\t\tthis.setUsage( value === true ? DynamicDrawUsage : StaticDrawUsage );\n\t\treturn this;\n\n\t},\n\tsetArray: function ( /* array */ ) {\n\n\t\tconsole.error( 'THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers' );\n\n\t}\n} );\n\n//\n\nObject.defineProperties( Uniform.prototype, {\n\n\tdynamic: {\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.' );\n\n\t\t}\n\t},\n\tonUpdate: {\n\t\tvalue: function () {\n\n\t\t\tconsole.warn( 'THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead.' );\n\t\t\treturn this;\n\n\t\t}\n\t}\n\n} );\n\n//\n\nObject.defineProperties( Material.prototype, {\n\n\twrapAround: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.Material: .wrapAround has been removed.' );\n\n\t\t},\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.Material: .wrapAround has been removed.' );\n\n\t\t}\n\t},\n\n\toverdraw: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.Material: .overdraw has been removed.' );\n\n\t\t},\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.Material: .overdraw has been removed.' );\n\n\t\t}\n\t},\n\n\twrapRGB: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.Material: .wrapRGB has been removed.' );\n\t\t\treturn new Color();\n\n\t\t}\n\t},\n\n\tshading: {\n\t\tget: function () {\n\n\t\t\tconsole.error( 'THREE.' + this.type + ': .shading has been removed. Use the boolean .flatShading instead.' );\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.' + this.type + ': .shading has been removed. Use the boolean .flatShading instead.' );\n\t\t\tthis.flatShading = ( value === FlatShading );\n\n\t\t}\n\t},\n\n\tstencilMask: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.' + this.type + ': .stencilMask has been removed. Use .stencilFuncMask instead.' );\n\t\t\treturn this.stencilFuncMask;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.' + this.type + ': .stencilMask has been removed. Use .stencilFuncMask instead.' );\n\t\t\tthis.stencilFuncMask = value;\n\n\t\t}\n\t}\n\n} );\n\nObject.defineProperties( MeshPhongMaterial.prototype, {\n\n\tmetal: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead.' );\n\t\t\treturn false;\n\n\t\t},\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead' );\n\n\t\t}\n\t}\n\n} );\n\nObject.defineProperties( ShaderMaterial.prototype, {\n\n\tderivatives: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives.' );\n\t\t\treturn this.extensions.derivatives;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives.' );\n\t\t\tthis.extensions.derivatives = value;\n\n\t\t}\n\t}\n\n} );\n\n//\n\nObject.assign( WebGLRenderer.prototype, {\n\n\tclearTarget: function ( renderTarget, color, depth, stencil ) {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead.' );\n\t\tthis.setRenderTarget( renderTarget );\n\t\tthis.clear( color, depth, stencil );\n\n\t},\n\tanimate: function ( callback ) {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .animate() is now .setAnimationLoop().' );\n\t\tthis.setAnimationLoop( callback );\n\n\t},\n\tgetCurrentRenderTarget: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget().' );\n\t\treturn this.getRenderTarget();\n\n\t},\n\tgetMaxAnisotropy: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy().' );\n\t\treturn this.capabilities.getMaxAnisotropy();\n\n\t},\n\tgetPrecision: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision.' );\n\t\treturn this.capabilities.precision;\n\n\t},\n\tresetGLState: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .resetGLState() is now .state.reset().' );\n\t\treturn this.state.reset();\n\n\t},\n\tsupportsFloatTextures: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( \\'OES_texture_float\\' ).' );\n\t\treturn this.extensions.get( 'OES_texture_float' );\n\n\t},\n\tsupportsHalfFloatTextures: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( \\'OES_texture_half_float\\' ).' );\n\t\treturn this.extensions.get( 'OES_texture_half_float' );\n\n\t},\n\tsupportsStandardDerivatives: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( \\'OES_standard_derivatives\\' ).' );\n\t\treturn this.extensions.get( 'OES_standard_derivatives' );\n\n\t},\n\tsupportsCompressedTextureS3TC: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( \\'WEBGL_compressed_texture_s3tc\\' ).' );\n\t\treturn this.extensions.get( 'WEBGL_compressed_texture_s3tc' );\n\n\t},\n\tsupportsCompressedTexturePVRTC: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( \\'WEBGL_compressed_texture_pvrtc\\' ).' );\n\t\treturn this.extensions.get( 'WEBGL_compressed_texture_pvrtc' );\n\n\t},\n\tsupportsBlendMinMax: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( \\'EXT_blend_minmax\\' ).' );\n\t\treturn this.extensions.get( 'EXT_blend_minmax' );\n\n\t},\n\tsupportsVertexTextures: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures.' );\n\t\treturn this.capabilities.vertexTextures;\n\n\t},\n\tsupportsInstancedArrays: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( \\'ANGLE_instanced_arrays\\' ).' );\n\t\treturn this.extensions.get( 'ANGLE_instanced_arrays' );\n\n\t},\n\tenableScissorTest: function ( boolean ) {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest().' );\n\t\tthis.setScissorTest( boolean );\n\n\t},\n\tinitMaterial: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .initMaterial() has been removed.' );\n\n\t},\n\taddPrePlugin: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .addPrePlugin() has been removed.' );\n\n\t},\n\taddPostPlugin: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .addPostPlugin() has been removed.' );\n\n\t},\n\tupdateShadowMap: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .updateShadowMap() has been removed.' );\n\n\t},\n\tsetFaceCulling: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .setFaceCulling() has been removed.' );\n\n\t},\n\tallocTextureUnit: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .allocTextureUnit() has been removed.' );\n\n\t},\n\tsetTexture: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .setTexture() has been removed.' );\n\n\t},\n\tsetTexture2D: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .setTexture2D() has been removed.' );\n\n\t},\n\tsetTextureCube: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .setTextureCube() has been removed.' );\n\n\t},\n\tgetActiveMipMapLevel: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel().' );\n\t\treturn this.getActiveMipmapLevel();\n\n\t}\n\n} );\n\nObject.defineProperties( WebGLRenderer.prototype, {\n\n\tshadowMapEnabled: {\n\t\tget: function () {\n\n\t\t\treturn this.shadowMap.enabled;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.' );\n\t\t\tthis.shadowMap.enabled = value;\n\n\t\t}\n\t},\n\tshadowMapType: {\n\t\tget: function () {\n\n\t\t\treturn this.shadowMap.type;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.' );\n\t\t\tthis.shadowMap.type = value;\n\n\t\t}\n\t},\n\tshadowMapCullFace: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.' );\n\t\t\treturn undefined;\n\n\t\t},\n\t\tset: function ( /* value */ ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.' );\n\n\t\t}\n\t},\n\tcontext: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .context has been removed. Use .getContext() instead.' );\n\t\t\treturn this.getContext();\n\n\t\t}\n\t},\n\tvr: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .vr has been renamed to .xr' );\n\t\t\treturn this.xr;\n\n\t\t}\n\t},\n\tgammaInput: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.' );\n\t\t\treturn false;\n\n\t\t},\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.' );\n\n\t\t}\n\t},\n\tgammaOutput: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead.' );\n\t\t\treturn false;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead.' );\n\t\t\tthis.outputEncoding = ( value === true ) ? sRGBEncoding : LinearEncoding;\n\n\t\t}\n\t}\n\n} );\n\nObject.defineProperties( WebGLShadowMap.prototype, {\n\n\tcullFace: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.' );\n\t\t\treturn undefined;\n\n\t\t},\n\t\tset: function ( /* cullFace */ ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.' );\n\n\t\t}\n\t},\n\trenderReverseSided: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.' );\n\t\t\treturn undefined;\n\n\t\t},\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.' );\n\n\t\t}\n\t},\n\trenderSingleSided: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.' );\n\t\t\treturn undefined;\n\n\t\t},\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.' );\n\n\t\t}\n\t}\n\n} );\n\nfunction WebGLRenderTargetCube() {}\n\n//\n\nObject.defineProperties( WebGLRenderTarget.prototype, {\n\n\twrapS: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.' );\n\t\t\treturn this.texture.wrapS;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.' );\n\t\t\tthis.texture.wrapS = value;\n\n\t\t}\n\t},\n\twrapT: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.' );\n\t\t\treturn this.texture.wrapT;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.' );\n\t\t\tthis.texture.wrapT = value;\n\n\t\t}\n\t},\n\tmagFilter: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.' );\n\t\t\treturn this.texture.magFilter;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.' );\n\t\t\tthis.texture.magFilter = value;\n\n\t\t}\n\t},\n\tminFilter: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.' );\n\t\t\treturn this.texture.minFilter;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.' );\n\t\t\tthis.texture.minFilter = value;\n\n\t\t}\n\t},\n\tanisotropy: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.' );\n\t\t\treturn this.texture.anisotropy;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.' );\n\t\t\tthis.texture.anisotropy = value;\n\n\t\t}\n\t},\n\toffset: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .offset is now .texture.offset.' );\n\t\t\treturn this.texture.offset;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .offset is now .texture.offset.' );\n\t\t\tthis.texture.offset = value;\n\n\t\t}\n\t},\n\trepeat: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .repeat is now .texture.repeat.' );\n\t\t\treturn this.texture.repeat;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .repeat is now .texture.repeat.' );\n\t\t\tthis.texture.repeat = value;\n\n\t\t}\n\t},\n\tformat: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .format is now .texture.format.' );\n\t\t\treturn this.texture.format;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .format is now .texture.format.' );\n\t\t\tthis.texture.format = value;\n\n\t\t}\n\t},\n\ttype: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .type is now .texture.type.' );\n\t\t\treturn this.texture.type;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .type is now .texture.type.' );\n\t\t\tthis.texture.type = value;\n\n\t\t}\n\t},\n\tgenerateMipmaps: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.' );\n\t\t\treturn this.texture.generateMipmaps;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.' );\n\t\t\tthis.texture.generateMipmaps = value;\n\n\t\t}\n\t}\n\n} );\n\n//\n\nObject.defineProperties( Audio.prototype, {\n\n\tload: {\n\t\tvalue: function ( file ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.' );\n\t\t\tvar scope = this;\n\t\t\tvar audioLoader = new AudioLoader();\n\t\t\taudioLoader.load( file, function ( buffer ) {\n\n\t\t\t\tscope.setBuffer( buffer );\n\n\t\t\t} );\n\t\t\treturn this;\n\n\t\t}\n\t},\n\tstartTime: {\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.Audio: .startTime is now .play( delay ).' );\n\n\t\t}\n\t}\n\n} );\n\nAudioAnalyser.prototype.getData = function () {\n\n\tconsole.warn( 'THREE.AudioAnalyser: .getData() is now .getFrequencyData().' );\n\treturn this.getFrequencyData();\n\n};\n\n//\n\nCubeCamera.prototype.updateCubeMap = function ( renderer, scene ) {\n\n\tconsole.warn( 'THREE.CubeCamera: .updateCubeMap() is now .update().' );\n\treturn this.update( renderer, scene );\n\n};\n\n//\n\nvar GeometryUtils = {\n\n\tmerge: function ( geometry1, geometry2, materialIndexOffset ) {\n\n\t\tconsole.warn( 'THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.' );\n\t\tvar matrix;\n\n\t\tif ( geometry2.isMesh ) {\n\n\t\t\tgeometry2.matrixAutoUpdate && geometry2.updateMatrix();\n\n\t\t\tmatrix = geometry2.matrix;\n\t\t\tgeometry2 = geometry2.geometry;\n\n\t\t}\n\n\t\tgeometry1.merge( geometry2, matrix, materialIndexOffset );\n\n\t},\n\n\tcenter: function ( geometry ) {\n\n\t\tconsole.warn( 'THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead.' );\n\t\treturn geometry.center();\n\n\t}\n\n};\n\nImageUtils.crossOrigin = undefined;\n\nImageUtils.loadTexture = function ( url, mapping, onLoad, onError ) {\n\n\tconsole.warn( 'THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.' );\n\n\tvar loader = new TextureLoader();\n\tloader.setCrossOrigin( this.crossOrigin );\n\n\tvar texture = loader.load( url, onLoad, undefined, onError );\n\n\tif ( mapping ) texture.mapping = mapping;\n\n\treturn texture;\n\n};\n\nImageUtils.loadTextureCube = function ( urls, mapping, onLoad, onError ) {\n\n\tconsole.warn( 'THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.' );\n\n\tvar loader = new CubeTextureLoader();\n\tloader.setCrossOrigin( this.crossOrigin );\n\n\tvar texture = loader.load( urls, onLoad, undefined, onError );\n\n\tif ( mapping ) texture.mapping = mapping;\n\n\treturn texture;\n\n};\n\nImageUtils.loadCompressedTexture = function () {\n\n\tconsole.error( 'THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.' );\n\n};\n\nImageUtils.loadCompressedTextureCube = function () {\n\n\tconsole.error( 'THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.' );\n\n};\n\nfunction CanvasRenderer() {}\nfunction JSONLoader() {}\n\n//\n\nvar SceneUtils = {\n\n\tcreateMultiMaterialObject: function ( /* geometry, materials */ ) {\n\n\t\tconsole.error( 'THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js' );\n\n\t},\n\n\tdetach: function ( /* child, parent, scene */ ) {\n\n\t\tconsole.error( 'THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js' );\n\n\t},\n\n\tattach: function ( /* child, scene, parent */ ) {\n\n\t\tconsole.error( 'THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js' );\n\n\t}\n\n};\n\nfunction LensFlare() {}\n\nif ( typeof __THREE_DEVTOOLS__ !== 'undefined' ) {\n\n\t/* eslint-disable no-undef */\n\t__THREE_DEVTOOLS__.dispatchEvent( new CustomEvent( 'register', { detail: {\n\t\trevision: REVISION,\n\t} } ) );\n\t/* eslint-enable no-undef */\n\n}\n\nvar THREE = /*#__PURE__*/Object.freeze({\n\t__proto__: null,\n\tACESFilmicToneMapping: ACESFilmicToneMapping,\n\tAddEquation: AddEquation,\n\tAddOperation: AddOperation,\n\tAdditiveBlending: AdditiveBlending,\n\tAlphaFormat: AlphaFormat,\n\tAlwaysDepth: AlwaysDepth,\n\tAlwaysStencilFunc: AlwaysStencilFunc,\n\tAmbientLight: AmbientLight,\n\tAmbientLightProbe: AmbientLightProbe,\n\tAnimationClip: AnimationClip,\n\tAnimationLoader: AnimationLoader,\n\tAnimationMixer: AnimationMixer,\n\tAnimationObjectGroup: AnimationObjectGroup,\n\tAnimationUtils: AnimationUtils,\n\tArcCurve: ArcCurve,\n\tArrayCamera: ArrayCamera,\n\tArrowHelper: ArrowHelper,\n\tAudio: Audio,\n\tAudioAnalyser: AudioAnalyser,\n\tAudioContext: AudioContext,\n\tAudioListener: AudioListener,\n\tAudioLoader: AudioLoader,\n\tAxesHelper: AxesHelper,\n\tAxisHelper: AxisHelper,\n\tBackSide: BackSide,\n\tBasicDepthPacking: BasicDepthPacking,\n\tBasicShadowMap: BasicShadowMap,\n\tBinaryTextureLoader: BinaryTextureLoader,\n\tBone: Bone,\n\tBooleanKeyframeTrack: BooleanKeyframeTrack,\n\tBoundingBoxHelper: BoundingBoxHelper,\n\tBox2: Box2,\n\tBox3: Box3,\n\tBox3Helper: Box3Helper,\n\tBoxBufferGeometry: BoxBufferGeometry,\n\tBoxGeometry: BoxGeometry,\n\tBoxHelper: BoxHelper,\n\tBufferAttribute: BufferAttribute,\n\tBufferGeometry: BufferGeometry,\n\tBufferGeometryLoader: BufferGeometryLoader,\n\tByteType: ByteType,\n\tCache: Cache,\n\tCamera: Camera,\n\tCameraHelper: CameraHelper,\n\tCanvasRenderer: CanvasRenderer,\n\tCanvasTexture: CanvasTexture,\n\tCatmullRomCurve3: CatmullRomCurve3,\n\tCineonToneMapping: CineonToneMapping,\n\tCircleBufferGeometry: CircleBufferGeometry,\n\tCircleGeometry: CircleGeometry,\n\tClampToEdgeWrapping: ClampToEdgeWrapping,\n\tClock: Clock,\n\tClosedSplineCurve3: ClosedSplineCurve3,\n\tColor: Color,\n\tColorKeyframeTrack: ColorKeyframeTrack,\n\tCompressedTexture: CompressedTexture,\n\tCompressedTextureLoader: CompressedTextureLoader,\n\tConeBufferGeometry: ConeBufferGeometry,\n\tConeGeometry: ConeGeometry,\n\tCubeCamera: CubeCamera,\n\tCubeGeometry: BoxGeometry,\n\tCubeReflectionMapping: CubeReflectionMapping,\n\tCubeRefractionMapping: CubeRefractionMapping,\n\tCubeTexture: CubeTexture,\n\tCubeTextureLoader: CubeTextureLoader,\n\tCubeUVReflectionMapping: CubeUVReflectionMapping,\n\tCubeUVRefractionMapping: CubeUVRefractionMapping,\n\tCubicBezierCurve: CubicBezierCurve,\n\tCubicBezierCurve3: CubicBezierCurve3,\n\tCubicInterpolant: CubicInterpolant,\n\tCullFaceBack: CullFaceBack,\n\tCullFaceFront: CullFaceFront,\n\tCullFaceFrontBack: CullFaceFrontBack,\n\tCullFaceNone: CullFaceNone,\n\tCurve: Curve,\n\tCurvePath: CurvePath,\n\tCustomBlending: CustomBlending,\n\tCylinderBufferGeometry: CylinderBufferGeometry,\n\tCylinderGeometry: CylinderGeometry,\n\tCylindrical: Cylindrical,\n\tDataTexture: DataTexture,\n\tDataTexture2DArray: DataTexture2DArray,\n\tDataTexture3D: DataTexture3D,\n\tDataTextureLoader: DataTextureLoader,\n\tDecrementStencilOp: DecrementStencilOp,\n\tDecrementWrapStencilOp: DecrementWrapStencilOp,\n\tDefaultLoadingManager: DefaultLoadingManager,\n\tDepthFormat: DepthFormat,\n\tDepthStencilFormat: DepthStencilFormat,\n\tDepthTexture: DepthTexture,\n\tDirectionalLight: DirectionalLight,\n\tDirectionalLightHelper: DirectionalLightHelper,\n\tDirectionalLightShadow: DirectionalLightShadow,\n\tDiscreteInterpolant: DiscreteInterpolant,\n\tDodecahedronBufferGeometry: DodecahedronBufferGeometry,\n\tDodecahedronGeometry: DodecahedronGeometry,\n\tDoubleSide: DoubleSide,\n\tDstAlphaFactor: DstAlphaFactor,\n\tDstColorFactor: DstColorFactor,\n\tDynamicBufferAttribute: DynamicBufferAttribute,\n\tDynamicCopyUsage: DynamicCopyUsage,\n\tDynamicDrawUsage: DynamicDrawUsage,\n\tDynamicReadUsage: DynamicReadUsage,\n\tEdgesGeometry: EdgesGeometry,\n\tEdgesHelper: EdgesHelper,\n\tEllipseCurve: EllipseCurve,\n\tEqualDepth: EqualDepth,\n\tEqualStencilFunc: EqualStencilFunc,\n\tEquirectangularReflectionMapping: EquirectangularReflectionMapping,\n\tEquirectangularRefractionMapping: EquirectangularRefractionMapping,\n\tEuler: Euler,\n\tEventDispatcher: EventDispatcher,\n\tExtrudeBufferGeometry: ExtrudeBufferGeometry,\n\tExtrudeGeometry: ExtrudeGeometry,\n\tFace3: Face3,\n\tFace4: Face4,\n\tFaceColors: FaceColors,\n\tFileLoader: FileLoader,\n\tFlatShading: FlatShading,\n\tFloat32Attribute: Float32Attribute,\n\tFloat32BufferAttribute: Float32BufferAttribute,\n\tFloat64Attribute: Float64Attribute,\n\tFloat64BufferAttribute: Float64BufferAttribute,\n\tFloatType: FloatType,\n\tFog: Fog,\n\tFogExp2: FogExp2,\n\tFont: Font,\n\tFontLoader: FontLoader,\n\tFrontFaceDirectionCCW: FrontFaceDirectionCCW,\n\tFrontFaceDirectionCW: FrontFaceDirectionCW,\n\tFrontSide: FrontSide,\n\tFrustum: Frustum,\n\tGammaEncoding: GammaEncoding,\n\tGeometry: Geometry,\n\tGeometryUtils: GeometryUtils,\n\tGreaterDepth: GreaterDepth,\n\tGreaterEqualDepth: GreaterEqualDepth,\n\tGreaterEqualStencilFunc: GreaterEqualStencilFunc,\n\tGreaterStencilFunc: GreaterStencilFunc,\n\tGridHelper: GridHelper,\n\tGroup: Group,\n\tHalfFloatType: HalfFloatType,\n\tHemisphereLight: HemisphereLight,\n\tHemisphereLightHelper: HemisphereLightHelper,\n\tHemisphereLightProbe: HemisphereLightProbe,\n\tIcosahedronBufferGeometry: IcosahedronBufferGeometry,\n\tIcosahedronGeometry: IcosahedronGeometry,\n\tImageBitmapLoader: ImageBitmapLoader,\n\tImageLoader: ImageLoader,\n\tImageUtils: ImageUtils,\n\tImmediateRenderObject: ImmediateRenderObject,\n\tIncrementStencilOp: IncrementStencilOp,\n\tIncrementWrapStencilOp: IncrementWrapStencilOp,\n\tInstancedBufferAttribute: InstancedBufferAttribute,\n\tInstancedBufferGeometry: InstancedBufferGeometry,\n\tInstancedInterleavedBuffer: InstancedInterleavedBuffer,\n\tInstancedMesh: InstancedMesh,\n\tInt16Attribute: Int16Attribute,\n\tInt16BufferAttribute: Int16BufferAttribute,\n\tInt32Attribute: Int32Attribute,\n\tInt32BufferAttribute: Int32BufferAttribute,\n\tInt8Attribute: Int8Attribute,\n\tInt8BufferAttribute: Int8BufferAttribute,\n\tIntType: IntType,\n\tInterleavedBuffer: InterleavedBuffer,\n\tInterleavedBufferAttribute: InterleavedBufferAttribute,\n\tInterpolant: Interpolant,\n\tInterpolateDiscrete: InterpolateDiscrete,\n\tInterpolateLinear: InterpolateLinear,\n\tInterpolateSmooth: InterpolateSmooth,\n\tInvertStencilOp: InvertStencilOp,\n\tJSONLoader: JSONLoader,\n\tKeepStencilOp: KeepStencilOp,\n\tKeyframeTrack: KeyframeTrack,\n\tLOD: LOD,\n\tLatheBufferGeometry: LatheBufferGeometry,\n\tLatheGeometry: LatheGeometry,\n\tLayers: Layers,\n\tLensFlare: LensFlare,\n\tLessDepth: LessDepth,\n\tLessEqualDepth: LessEqualDepth,\n\tLessEqualStencilFunc: LessEqualStencilFunc,\n\tLessStencilFunc: LessStencilFunc,\n\tLight: Light,\n\tLightProbe: LightProbe,\n\tLightShadow: LightShadow,\n\tLine: Line,\n\tLine3: Line3,\n\tLineBasicMaterial: LineBasicMaterial,\n\tLineCurve: LineCurve,\n\tLineCurve3: LineCurve3,\n\tLineDashedMaterial: LineDashedMaterial,\n\tLineLoop: LineLoop,\n\tLinePieces: LinePieces,\n\tLineSegments: LineSegments,\n\tLineStrip: LineStrip,\n\tLinearEncoding: LinearEncoding,\n\tLinearFilter: LinearFilter,\n\tLinearInterpolant: LinearInterpolant,\n\tLinearMipMapLinearFilter: LinearMipMapLinearFilter,\n\tLinearMipMapNearestFilter: LinearMipMapNearestFilter,\n\tLinearMipmapLinearFilter: LinearMipmapLinearFilter,\n\tLinearMipmapNearestFilter: LinearMipmapNearestFilter,\n\tLinearToneMapping: LinearToneMapping,\n\tLoader: Loader,\n\tLoaderUtils: LoaderUtils,\n\tLoadingManager: LoadingManager,\n\tLogLuvEncoding: LogLuvEncoding,\n\tLoopOnce: LoopOnce,\n\tLoopPingPong: LoopPingPong,\n\tLoopRepeat: LoopRepeat,\n\tLuminanceAlphaFormat: LuminanceAlphaFormat,\n\tLuminanceFormat: LuminanceFormat,\n\tMOUSE: MOUSE,\n\tMaterial: Material,\n\tMaterialLoader: MaterialLoader,\n\tMath: MathUtils,\n\tMathUtils: MathUtils,\n\tMatrix3: Matrix3,\n\tMatrix4: Matrix4,\n\tMaxEquation: MaxEquation,\n\tMesh: Mesh,\n\tMeshBasicMaterial: MeshBasicMaterial,\n\tMeshDepthMaterial: MeshDepthMaterial,\n\tMeshDistanceMaterial: MeshDistanceMaterial,\n\tMeshFaceMaterial: MeshFaceMaterial,\n\tMeshLambertMaterial: MeshLambertMaterial,\n\tMeshMatcapMaterial: MeshMatcapMaterial,\n\tMeshNormalMaterial: MeshNormalMaterial,\n\tMeshPhongMaterial: MeshPhongMaterial,\n\tMeshPhysicalMaterial: MeshPhysicalMaterial,\n\tMeshStandardMaterial: MeshStandardMaterial,\n\tMeshToonMaterial: MeshToonMaterial,\n\tMinEquation: MinEquation,\n\tMirroredRepeatWrapping: MirroredRepeatWrapping,\n\tMixOperation: MixOperation,\n\tMultiMaterial: MultiMaterial,\n\tMultiplyBlending: MultiplyBlending,\n\tMultiplyOperation: MultiplyOperation,\n\tNearestFilter: NearestFilter,\n\tNearestMipMapLinearFilter: NearestMipMapLinearFilter,\n\tNearestMipMapNearestFilter: NearestMipMapNearestFilter,\n\tNearestMipmapLinearFilter: NearestMipmapLinearFilter,\n\tNearestMipmapNearestFilter: NearestMipmapNearestFilter,\n\tNeverDepth: NeverDepth,\n\tNeverStencilFunc: NeverStencilFunc,\n\tNoBlending: NoBlending,\n\tNoColors: NoColors,\n\tNoToneMapping: NoToneMapping,\n\tNormalBlending: NormalBlending,\n\tNotEqualDepth: NotEqualDepth,\n\tNotEqualStencilFunc: NotEqualStencilFunc,\n\tNumberKeyframeTrack: NumberKeyframeTrack,\n\tObject3D: Object3D,\n\tObjectLoader: ObjectLoader,\n\tObjectSpaceNormalMap: ObjectSpaceNormalMap,\n\tOctahedronBufferGeometry: OctahedronBufferGeometry,\n\tOctahedronGeometry: OctahedronGeometry,\n\tOneFactor: OneFactor,\n\tOneMinusDstAlphaFactor: OneMinusDstAlphaFactor,\n\tOneMinusDstColorFactor: OneMinusDstColorFactor,\n\tOneMinusSrcAlphaFactor: OneMinusSrcAlphaFactor,\n\tOneMinusSrcColorFactor: OneMinusSrcColorFactor,\n\tOrthographicCamera: OrthographicCamera,\n\tPCFShadowMap: PCFShadowMap,\n\tPCFSoftShadowMap: PCFSoftShadowMap,\n\tPMREMGenerator: PMREMGenerator,\n\tParametricBufferGeometry: ParametricBufferGeometry,\n\tParametricGeometry: ParametricGeometry,\n\tParticle: Particle,\n\tParticleBasicMaterial: ParticleBasicMaterial,\n\tParticleSystem: ParticleSystem,\n\tParticleSystemMaterial: ParticleSystemMaterial,\n\tPath: Path,\n\tPerspectiveCamera: PerspectiveCamera,\n\tPlane: Plane,\n\tPlaneBufferGeometry: PlaneBufferGeometry,\n\tPlaneGeometry: PlaneGeometry,\n\tPlaneHelper: PlaneHelper,\n\tPointCloud: PointCloud,\n\tPointCloudMaterial: PointCloudMaterial,\n\tPointLight: PointLight,\n\tPointLightHelper: PointLightHelper,\n\tPoints: Points,\n\tPointsMaterial: PointsMaterial,\n\tPolarGridHelper: PolarGridHelper,\n\tPolyhedronBufferGeometry: PolyhedronBufferGeometry,\n\tPolyhedronGeometry: PolyhedronGeometry,\n\tPositionalAudio: PositionalAudio,\n\tPropertyBinding: PropertyBinding,\n\tPropertyMixer: PropertyMixer,\n\tQuadraticBezierCurve: QuadraticBezierCurve,\n\tQuadraticBezierCurve3: QuadraticBezierCurve3,\n\tQuaternion: Quaternion,\n\tQuaternionKeyframeTrack: QuaternionKeyframeTrack,\n\tQuaternionLinearInterpolant: QuaternionLinearInterpolant,\n\tREVISION: REVISION,\n\tRGBADepthPacking: RGBADepthPacking,\n\tRGBAFormat: RGBAFormat,\n\tRGBAIntegerFormat: RGBAIntegerFormat,\n\tRGBA_ASTC_10x10_Format: RGBA_ASTC_10x10_Format,\n\tRGBA_ASTC_10x5_Format: RGBA_ASTC_10x5_Format,\n\tRGBA_ASTC_10x6_Format: RGBA_ASTC_10x6_Format,\n\tRGBA_ASTC_10x8_Format: RGBA_ASTC_10x8_Format,\n\tRGBA_ASTC_12x10_Format: RGBA_ASTC_12x10_Format,\n\tRGBA_ASTC_12x12_Format: RGBA_ASTC_12x12_Format,\n\tRGBA_ASTC_4x4_Format: RGBA_ASTC_4x4_Format,\n\tRGBA_ASTC_5x4_Format: RGBA_ASTC_5x4_Format,\n\tRGBA_ASTC_5x5_Format: RGBA_ASTC_5x5_Format,\n\tRGBA_ASTC_6x5_Format: RGBA_ASTC_6x5_Format,\n\tRGBA_ASTC_6x6_Format: RGBA_ASTC_6x6_Format,\n\tRGBA_ASTC_8x5_Format: RGBA_ASTC_8x5_Format,\n\tRGBA_ASTC_8x6_Format: RGBA_ASTC_8x6_Format,\n\tRGBA_ASTC_8x8_Format: RGBA_ASTC_8x8_Format,\n\tRGBA_ETC2_EAC_Format: RGBA_ETC2_EAC_Format,\n\tRGBA_PVRTC_2BPPV1_Format: RGBA_PVRTC_2BPPV1_Format,\n\tRGBA_PVRTC_4BPPV1_Format: RGBA_PVRTC_4BPPV1_Format,\n\tRGBA_S3TC_DXT1_Format: RGBA_S3TC_DXT1_Format,\n\tRGBA_S3TC_DXT3_Format: RGBA_S3TC_DXT3_Format,\n\tRGBA_S3TC_DXT5_Format: RGBA_S3TC_DXT5_Format,\n\tRGBDEncoding: RGBDEncoding,\n\tRGBEEncoding: RGBEEncoding,\n\tRGBEFormat: RGBEFormat,\n\tRGBFormat: RGBFormat,\n\tRGBIntegerFormat: RGBIntegerFormat,\n\tRGBM16Encoding: RGBM16Encoding,\n\tRGBM7Encoding: RGBM7Encoding,\n\tRGB_ETC1_Format: RGB_ETC1_Format,\n\tRGB_ETC2_Format: RGB_ETC2_Format,\n\tRGB_PVRTC_2BPPV1_Format: RGB_PVRTC_2BPPV1_Format,\n\tRGB_PVRTC_4BPPV1_Format: RGB_PVRTC_4BPPV1_Format,\n\tRGB_S3TC_DXT1_Format: RGB_S3TC_DXT1_Format,\n\tRGFormat: RGFormat,\n\tRGIntegerFormat: RGIntegerFormat,\n\tRawShaderMaterial: RawShaderMaterial,\n\tRay: Ray,\n\tRaycaster: Raycaster,\n\tRectAreaLight: RectAreaLight,\n\tRedFormat: RedFormat,\n\tRedIntegerFormat: RedIntegerFormat,\n\tReinhardToneMapping: ReinhardToneMapping,\n\tRepeatWrapping: RepeatWrapping,\n\tReplaceStencilOp: ReplaceStencilOp,\n\tReverseSubtractEquation: ReverseSubtractEquation,\n\tRingBufferGeometry: RingBufferGeometry,\n\tRingGeometry: RingGeometry,\n\tSRGB8_ALPHA8_ASTC_10x10_Format: SRGB8_ALPHA8_ASTC_10x10_Format,\n\tSRGB8_ALPHA8_ASTC_10x5_Format: SRGB8_ALPHA8_ASTC_10x5_Format,\n\tSRGB8_ALPHA8_ASTC_10x6_Format: SRGB8_ALPHA8_ASTC_10x6_Format,\n\tSRGB8_ALPHA8_ASTC_10x8_Format: SRGB8_ALPHA8_ASTC_10x8_Format,\n\tSRGB8_ALPHA8_ASTC_12x10_Format: SRGB8_ALPHA8_ASTC_12x10_Format,\n\tSRGB8_ALPHA8_ASTC_12x12_Format: SRGB8_ALPHA8_ASTC_12x12_Format,\n\tSRGB8_ALPHA8_ASTC_4x4_Format: SRGB8_ALPHA8_ASTC_4x4_Format,\n\tSRGB8_ALPHA8_ASTC_5x4_Format: SRGB8_ALPHA8_ASTC_5x4_Format,\n\tSRGB8_ALPHA8_ASTC_5x5_Format: SRGB8_ALPHA8_ASTC_5x5_Format,\n\tSRGB8_ALPHA8_ASTC_6x5_Format: SRGB8_ALPHA8_ASTC_6x5_Format,\n\tSRGB8_ALPHA8_ASTC_6x6_Format: SRGB8_ALPHA8_ASTC_6x6_Format,\n\tSRGB8_ALPHA8_ASTC_8x5_Format: SRGB8_ALPHA8_ASTC_8x5_Format,\n\tSRGB8_ALPHA8_ASTC_8x6_Format: SRGB8_ALPHA8_ASTC_8x6_Format,\n\tSRGB8_ALPHA8_ASTC_8x8_Format: SRGB8_ALPHA8_ASTC_8x8_Format,\n\tScene: Scene,\n\tSceneUtils: SceneUtils,\n\tShaderChunk: ShaderChunk,\n\tShaderLib: ShaderLib,\n\tShaderMaterial: ShaderMaterial,\n\tShadowMaterial: ShadowMaterial,\n\tShape: Shape,\n\tShapeBufferGeometry: ShapeBufferGeometry,\n\tShapeGeometry: ShapeGeometry,\n\tShapePath: ShapePath,\n\tShapeUtils: ShapeUtils,\n\tShortType: ShortType,\n\tSkeleton: Skeleton,\n\tSkeletonHelper: SkeletonHelper,\n\tSkinnedMesh: SkinnedMesh,\n\tSmoothShading: SmoothShading,\n\tSphere: Sphere,\n\tSphereBufferGeometry: SphereBufferGeometry,\n\tSphereGeometry: SphereGeometry,\n\tSpherical: Spherical,\n\tSphericalHarmonics3: SphericalHarmonics3,\n\tSphericalReflectionMapping: SphericalReflectionMapping,\n\tSpline: Spline,\n\tSplineCurve: SplineCurve,\n\tSplineCurve3: SplineCurve3,\n\tSpotLight: SpotLight,\n\tSpotLightHelper: SpotLightHelper,\n\tSpotLightShadow: SpotLightShadow,\n\tSprite: Sprite,\n\tSpriteMaterial: SpriteMaterial,\n\tSrcAlphaFactor: SrcAlphaFactor,\n\tSrcAlphaSaturateFactor: SrcAlphaSaturateFactor,\n\tSrcColorFactor: SrcColorFactor,\n\tStaticCopyUsage: StaticCopyUsage,\n\tStaticDrawUsage: StaticDrawUsage,\n\tStaticReadUsage: StaticReadUsage,\n\tStereoCamera: StereoCamera,\n\tStreamCopyUsage: StreamCopyUsage,\n\tStreamDrawUsage: StreamDrawUsage,\n\tStreamReadUsage: StreamReadUsage,\n\tStringKeyframeTrack: StringKeyframeTrack,\n\tSubtractEquation: SubtractEquation,\n\tSubtractiveBlending: SubtractiveBlending,\n\tTOUCH: TOUCH,\n\tTangentSpaceNormalMap: TangentSpaceNormalMap,\n\tTetrahedronBufferGeometry: TetrahedronBufferGeometry,\n\tTetrahedronGeometry: TetrahedronGeometry,\n\tTextBufferGeometry: TextBufferGeometry,\n\tTextGeometry: TextGeometry,\n\tTexture: Texture,\n\tTextureLoader: TextureLoader,\n\tTorusBufferGeometry: TorusBufferGeometry,\n\tTorusGeometry: TorusGeometry,\n\tTorusKnotBufferGeometry: TorusKnotBufferGeometry,\n\tTorusKnotGeometry: TorusKnotGeometry,\n\tTriangle: Triangle,\n\tTriangleFanDrawMode: TriangleFanDrawMode,\n\tTriangleStripDrawMode: TriangleStripDrawMode,\n\tTrianglesDrawMode: TrianglesDrawMode,\n\tTubeBufferGeometry: TubeBufferGeometry,\n\tTubeGeometry: TubeGeometry,\n\tUVMapping: UVMapping,\n\tUint16Attribute: Uint16Attribute,\n\tUint16BufferAttribute: Uint16BufferAttribute,\n\tUint32Attribute: Uint32Attribute,\n\tUint32BufferAttribute: Uint32BufferAttribute,\n\tUint8Attribute: Uint8Attribute,\n\tUint8BufferAttribute: Uint8BufferAttribute,\n\tUint8ClampedAttribute: Uint8ClampedAttribute,\n\tUint8ClampedBufferAttribute: Uint8ClampedBufferAttribute,\n\tUncharted2ToneMapping: Uncharted2ToneMapping,\n\tUniform: Uniform,\n\tUniformsLib: UniformsLib,\n\tUniformsUtils: UniformsUtils,\n\tUnsignedByteType: UnsignedByteType,\n\tUnsignedInt248Type: UnsignedInt248Type,\n\tUnsignedIntType: UnsignedIntType,\n\tUnsignedShort4444Type: UnsignedShort4444Type,\n\tUnsignedShort5551Type: UnsignedShort5551Type,\n\tUnsignedShort565Type: UnsignedShort565Type,\n\tUnsignedShortType: UnsignedShortType,\n\tVSMShadowMap: VSMShadowMap,\n\tVector2: Vector2,\n\tVector3: Vector3,\n\tVector4: Vector4,\n\tVectorKeyframeTrack: VectorKeyframeTrack,\n\tVertex: Vertex,\n\tVertexColors: VertexColors,\n\tVideoTexture: VideoTexture,\n\tWebGLCubeRenderTarget: WebGLCubeRenderTarget,\n\tWebGLMultisampleRenderTarget: WebGLMultisampleRenderTarget,\n\tWebGLRenderTarget: WebGLRenderTarget,\n\tWebGLRenderTargetCube: WebGLRenderTargetCube,\n\tWebGLRenderer: WebGLRenderer,\n\tWebGLUtils: WebGLUtils,\n\tWireframeGeometry: WireframeGeometry,\n\tWireframeHelper: WireframeHelper,\n\tWrapAroundEnding: WrapAroundEnding,\n\tXHRLoader: XHRLoader,\n\tZeroCurvatureEnding: ZeroCurvatureEnding,\n\tZeroFactor: ZeroFactor,\n\tZeroSlopeEnding: ZeroSlopeEnding,\n\tZeroStencilOp: ZeroStencilOp,\n\tsRGBEncoding: sRGBEncoding\n});\n\n// Optimized version of getInverse (5% boost in Chrome, 20% others)\n// Probably not the most important optimization but we have it so\n// keep it\nMatrix4.prototype.getInverse = function ( m, throwOnDegenerate ) {\n  // based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm\n  var te = this.elements,\n  me = m.elements,\n\n  n11 = me[ 0 ], n21 = me[ 1 ], n31 = me[ 2 ], n41 = me[ 3 ],\n  n12 = me[ 4 ], n22 = me[ 5 ], n32 = me[ 6 ], n42 = me[ 7 ],\n  n13 = me[ 8 ], n23 = me[ 9 ], n33 = me[ 10 ], n43 = me[ 11 ],\n  n14 = me[ 12 ], n24 = me[ 13 ], n34 = me[ 14 ], n44 = me[ 15 ],\n\n  // Precalculate common multiples (usage count in brackets)\n  n11n22 = n11 * n22, // 3\n  n11n23 = n11 * n23, // 2\n  n11n24 = n11 * n24, // 2\n  n11n32 = n11 * n32, // 2\n  n12n21 = n12 * n21, // 4\n  n12n23 = n12 * n23, // 4\n  n12n24 = n12 * n24, // 3\n  n12n31 = n12 * n31, // 2\n  n13n21 = n13 * n21, // 2\n  n13n22 = n13 * n22, // 4\n  n13n24 = n13 * n24, // 3\n  n13n31 = n13 * n31, // 2\n  n13n32 = n13 * n32, // 3\n  n14n23 = n14 * n23, // 3\n  n14n33 = n14 * n33, // 4\n  n14n41 = n14 * n41, // 2\n  n14n43 = n14 * n43, // 4\n  n21n32 = n21 * n32, // 3\n  n21n42 = n21 * n42, // 3\n  n22n31 = n22 * n31, // 3\n  n22n33 = n22 * n33, // 2\n  n23n31 = n23 * n31, // 2\n  n23n32 = n23 * n32, // 4\n  n23n34 = n23 * n34, // 2\n  n24n31 = n24 * n31, // 2\n  n24n32 = n24 * n32, // 4\n  n24n33 = n24 * n33, // 4\n  n33n44 = n33 * n44, // 4\n  n34n41 = n34 * n41, // 3\n  n34n42 = n34 * n42, // 4\n  n34n43 = n34 * n43, // 4\n  //                   = 62 multiplications saved\n  t11 = n23 * n34n42 - n24n33 * n42 + n24n32 * n43 - n22 * n34n43 - n23n32 * n44 + n22 * n33n44,\n  t12 = n14n33 * n42 - n13 * n34n42 - n14n43 * n32 + n12 * n34n43 + n13n32 * n44 - n12 * n33n44,\n  t13 = n13n24 * n42 - n14n23 * n42 + n14n43 * n22 - n12n24 * n43 - n13n22 * n44 + n12n23 * n44,\n  t14 = n14 * n23n32 - n13 * n24n32 - n14n33 * n22 + n12 * n24n33 + n13n22 * n34 - n12n23 * n34;\n\n  var det = n11 * t11 + n21 * t12 + n31 * t13 + n41 * t14;\n\n  if ( det === 0 ) {\n\n    var msg = 'THREE.Matrix4.getInverse(): can\\'t invert matrix, determinant is 0';\n\n    if ( throwOnDegenerate || false ) {\n\n      throw new Error( msg );\n\n    } else {\n\n      console.warn( msg );\n\n    }\n\n    return this.identity();\n\n  }\n\n  te[ 0 ] = t11;\n  te[ 1 ] = n24n33 * n41 - n23n34 * n41 - n24n31 * n43 + n21 * n34n43 + n23n31 * n44 - n21 * n33n44;\n  te[ 2 ] = n22 * n34n41 - n24n32 * n41 + n24n31 * n42 - n21 * n34n42 - n22n31 * n44 + n21n32 * n44;\n  te[ 3 ] = n23n32 * n41 - n22n33 * n41 - n23n31 * n42 + n21n42 * n33 + n22n31 * n43 - n21n32 * n43;\n\n  te[ 4 ] = t12;\n  te[ 5 ] = n13 * n34n41 - n14n33 * n41 + n14n43 * n31 - n11 * n34n43 - n13n31 * n44 + n11 * n33n44;\n  te[ 6 ] = n14n41 * n32 - n12 * n34n41 - n14 * n31 * n42 + n11 * n34n42 + n12n31 * n44 - n11n32 * n44;\n  te[ 7 ] = n12 * n33 * n41 - n13n32 * n41 + n13n31 * n42 - n11 * n33 * n42 - n12n31 * n43 + n11n32 * n43;\n\n  te[ 8 ] = t13;\n  te[ 9 ] = n14n23 * n41 - n13n24 * n41 - n14n43 * n21 + n11n24 * n43 + n13n21 * n44 - n11n23 * n44;\n  te[ 10 ] = n12n24 * n41 - n14n41 * n22 + n14 * n21n42 - n11n24 * n42 - n12n21 * n44 + n11n22 * n44;\n  te[ 11 ] = n13n22 * n41 - n12n23 * n41 - n13 * n21n42 + n11n23 * n42 + n12n21 * n43 - n11n22 * n43;\n\n  te[ 12 ] = t14;\n  te[ 13 ] = n13n24 * n31 - n14n23 * n31 + n14n33 * n21 - n11 * n24n33 - n13n21 * n34 + n11 * n23n34;\n  te[ 14 ] = n14 * n22n31 - n12n24 * n31 - n14 * n21n32 + n11 * n24n32 + n12n21 * n34 - n11n22 * n34;\n  te[ 15 ] = n12n23 * n31 - n13n22 * n31 + n13n32 * n21 - n11 * n23n32 - n12n21 * n33 + n11 * n22n33;\n\n  return this.multiplyScalar( 1 / det );\n\n};\n\nvar d2r = Math.PI / 180,\n    r2d = 180 / Math.PI;\n\n/**\n * Get the bbox of a tile\n *\n * @name tileToBBOX\n * @param {Array<number>} tile\n * @returns {Array<number>} bbox\n * @example\n * var bbox = tileToBBOX([5, 10, 10])\n * //=bbox\n */\nfunction tileToBBOX(tile) {\n    var e = tile2lon(tile[0] + 1, tile[2]);\n    var w = tile2lon(tile[0], tile[2]);\n    var s = tile2lat(tile[1] + 1, tile[2]);\n    var n = tile2lat(tile[1], tile[2]);\n    return [w, s, e, n];\n}\n\n/**\n * Get a geojson representation of a tile\n *\n * @name tileToGeoJSON\n * @param {Array<number>} tile\n * @returns {Feature<Polygon>}\n * @example\n * var poly = tileToGeoJSON([5, 10, 10])\n * //=poly\n */\nfunction tileToGeoJSON(tile) {\n    var bbox = tileToBBOX(tile);\n    var poly = {\n        type: 'Polygon',\n        coordinates: [[\n            [bbox[0], bbox[1]],\n            [bbox[0], bbox[3]],\n            [bbox[2], bbox[3]],\n            [bbox[2], bbox[1]],\n            [bbox[0], bbox[1]]\n        ]]\n    };\n    return poly;\n}\n\nfunction tile2lon(x, z) {\n    return x / Math.pow(2, z) * 360 - 180;\n}\n\nfunction tile2lat(y, z) {\n    var n = Math.PI - 2 * Math.PI * y / Math.pow(2, z);\n    return r2d * Math.atan(0.5 * (Math.exp(n) - Math.exp(-n)));\n}\n\n/**\n * Get the tile for a point at a specified zoom level\n *\n * @name pointToTile\n * @param {number} lon\n * @param {number} lat\n * @param {number} z\n * @returns {Array<number>} tile\n * @example\n * var tile = pointToTile(1, 1, 20)\n * //=tile\n */\nfunction pointToTile(lon, lat, z) {\n    var tile = pointToTileFraction(lon, lat, z);\n    tile[0] = Math.floor(tile[0]);\n    tile[1] = Math.floor(tile[1]);\n    return tile;\n}\n\n/**\n * Get the 4 tiles one zoom level higher\n *\n * @name getChildren\n * @param {Array<number>} tile\n * @returns {Array<Array<number>>} tiles\n * @example\n * var tiles = getChildren([5, 10, 10])\n * //=tiles\n */\nfunction getChildren(tile) {\n    return [\n        [tile[0] * 2, tile[1] * 2, tile[2] + 1],\n        [tile[0] * 2 + 1, tile[1] * 2, tile[2 ] + 1],\n        [tile[0] * 2 + 1, tile[1] * 2 + 1, tile[2] + 1],\n        [tile[0] * 2, tile[1] * 2 + 1, tile[2] + 1]\n    ];\n}\n\n/**\n * Get the tile one zoom level lower\n *\n * @name getParent\n * @param {Array<number>} tile\n * @returns {Array<number>} tile\n * @example\n * var tile = getParent([5, 10, 10])\n * //=tile\n */\nfunction getParent(tile) {\n    // top left\n    if (tile[0] % 2 === 0 && tile[1] % 2 === 0) {\n        return [tile[0] / 2, tile[1] / 2, tile[2] - 1];\n    }\n    // bottom left\n    if ((tile[0] % 2 === 0) && (!tile[1] % 2 === 0)) {\n        return [tile[0] / 2, (tile[1] - 1) / 2, tile[2] - 1];\n    }\n    // top right\n    if ((!tile[0] % 2 === 0) && (tile[1] % 2 === 0)) {\n        return [(tile[0] - 1) / 2, (tile[1]) / 2, tile[2] - 1];\n    }\n    // bottom right\n    return [(tile[0] - 1) / 2, (tile[1] - 1) / 2, tile[2] - 1];\n}\n\nfunction getSiblings(tile) {\n    return getChildren(getParent(tile));\n}\n\n/**\n * Get the 3 sibling tiles for a tile\n *\n * @name getSiblings\n * @param {Array<number>} tile\n * @returns {Array<Array<number>>} tiles\n * @example\n * var tiles = getSiblings([5, 10, 10])\n * //=tiles\n */\nfunction hasSiblings(tile, tiles) {\n    var siblings = getSiblings(tile);\n    for (var i = 0; i < siblings.length; i++) {\n        if (!hasTile(tiles, siblings[i])) return false;\n    }\n    return true;\n}\n\n/**\n * Check to see if an array of tiles contains a particular tile\n *\n * @name hasTile\n * @param {Array<Array<number>>} tiles\n * @param {Array<number>} tile\n * @returns {boolean}\n * @example\n * var tiles = [\n *     [0, 0, 5],\n *     [0, 1, 5],\n *     [1, 1, 5],\n *     [1, 0, 5]\n * ]\n * hasTile(tiles, [0, 0, 5])\n * //=boolean\n */\nfunction hasTile(tiles, tile) {\n    for (var i = 0; i < tiles.length; i++) {\n        if (tilesEqual(tiles[i], tile)) return true;\n    }\n    return false;\n}\n\n/**\n * Check to see if two tiles are the same\n *\n * @name tilesEqual\n * @param {Array<number>} tile1\n * @param {Array<number>} tile2\n * @returns {boolean}\n * @example\n * tilesEqual([0, 1, 5], [0, 0, 5])\n * //=boolean\n */\nfunction tilesEqual(tile1, tile2) {\n    return (\n        tile1[0] === tile2[0] &&\n        tile1[1] === tile2[1] &&\n        tile1[2] === tile2[2]\n    );\n}\n\n/**\n * Get the quadkey for a tile\n *\n * @name tileToQuadkey\n * @param {Array<number>} tile\n * @returns {string} quadkey\n * @example\n * var quadkey = tileToQuadkey([0, 1, 5])\n * //=quadkey\n */\nfunction tileToQuadkey(tile) {\n    var index = '';\n    for (var z = tile[2]; z > 0; z--) {\n        var b = 0;\n        var mask = 1 << (z - 1);\n        if ((tile[0] & mask) !== 0) b++;\n        if ((tile[1] & mask) !== 0) b += 2;\n        index += b.toString();\n    }\n    return index;\n}\n\n/**\n * Get the tile for a quadkey\n *\n * @name quadkeyToTile\n * @param {string} quadkey\n * @returns {Array<number>} tile\n * @example\n * var tile = quadkeyToTile('00001033')\n * //=tile\n */\nfunction quadkeyToTile(quadkey) {\n    var x = 0;\n    var y = 0;\n    var z = quadkey.length;\n\n    for (var i = z; i > 0; i--) {\n        var mask = 1 << (i - 1);\n        var q = +quadkey[z - i];\n        if (q === 1) x |= mask;\n        if (q === 2) y |= mask;\n        if (q === 3) {\n            x |= mask;\n            y |= mask;\n        }\n    }\n    return [x, y, z];\n}\n\n/**\n * Get the smallest tile to cover a bbox\n *\n * @name bboxToTile\n * @param {Array<number>} bbox\n * @returns {Array<number>} tile\n * @example\n * var tile = bboxToTile([ -178, 84, -177, 85 ])\n * //=tile\n */\nfunction bboxToTile(bboxCoords) {\n    var min = pointToTile(bboxCoords[0], bboxCoords[1], 32);\n    var max = pointToTile(bboxCoords[2], bboxCoords[3], 32);\n    var bbox = [min[0], min[1], max[0], max[1]];\n\n    var z = getBboxZoom(bbox);\n    if (z === 0) return [0, 0, 0];\n    var x = bbox[0] >>> (32 - z);\n    var y = bbox[1] >>> (32 - z);\n    return [x, y, z];\n}\n\nfunction getBboxZoom(bbox) {\n    var MAX_ZOOM = 28;\n    for (var z = 0; z < MAX_ZOOM; z++) {\n        var mask = 1 << (32 - (z + 1));\n        if (((bbox[0] & mask) !== (bbox[2] & mask)) ||\n            ((bbox[1] & mask) !== (bbox[3] & mask))) {\n            return z;\n        }\n    }\n\n    return MAX_ZOOM;\n}\n\n/**\n * Get the precise fractional tile location for a point at a zoom level\n *\n * @name pointToTileFraction\n * @param {number} lon\n * @param {number} lat\n * @param {number} z\n * @returns {Array<number>} tile fraction\n * var tile = pointToTileFraction(30.5, 50.5, 15)\n * //=tile\n */\nfunction pointToTileFraction(lon, lat, z) {\n    var sin = Math.sin(lat * d2r),\n        z2 = Math.pow(2, z),\n        x = z2 * (lon / 360 + 0.5),\n        y = z2 * (0.5 - 0.25 * Math.log((1 + sin) / (1 - sin)) / Math.PI);\n    return [x, y, z];\n}\n\nvar tilebelt = {\n    tileToGeoJSON: tileToGeoJSON,\n    tileToBBOX: tileToBBOX,\n    getChildren: getChildren,\n    getParent: getParent,\n    getSiblings: getSiblings,\n    hasTile: hasTile,\n    hasSiblings: hasSiblings,\n    tilesEqual: tilesEqual,\n    tileToQuadkey: tileToQuadkey,\n    quadkeyToTile: quadkeyToTile,\n    pointToTile: pointToTile,\n    bboxToTile: bboxToTile,\n    pointToTileFraction: pointToTileFraction\n};\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\n// A collection of utility functions for converting between coordinate\n// systems\nvar geoproject = {\n  center: new THREE.Vector2( 0, 0 ), // Coordinate map is centered on (projected coordinates)\n  center3035: new THREE.Vector2( 0, 0 ), // Coordinate map is centered on (projected coordinates)\n  projector: null,\n\n  calculateGlobalOffset: function ( lon, lat ) {\n    // TODO define `baseZ` in one place!!!\n    const baseZ = 7;\n    const [ x, y, z ] = tilebelt.pointToTileFraction( lon, lat, baseZ );\n    const scale = Math.pow( 2, 15 - z ) *\n      geoproject.calculateSceneScale( lon, lat );\n    return new THREE.Vector2( -x, y ).multiplyScalar( scale );\n  },\n\n  // Calculate scale factor at zoom level 15\n  // This will let us scale the terrain to match features in scene\n  calculateSceneScale: function ( lon, lat ) {\n    var tile15 = tilebelt.pointToTile( lon, lat, 15 );\n    var bbox15 = tilebelt.tileToBBOX( tile15 );\n    var size = geoproject.project( [ bbox15[ 2 ], bbox15[ 3 ] ] )\n      .sub( geoproject.project( [ bbox15[ 0 ], bbox15[ 1 ] ] ) );\n    return size.x;\n  },\n\n  project: function ( lonlatH, absolute ) {\n    if ( typeof lonlatH[ 0 ] !== 'number' ) {\n      // Assume we have an array, iterate over it\n      return lonlatH.map( function ( x ) {\n        return geoproject.project( x, absolute );\n      } );\n    }\n\n    var projected = geoproject.projector.forward( lonlatH );\n    if ( !absolute ) {\n      // Hot function, so in-line vector math\n      projected[ 0 ] -= geoproject.center.x;\n      projected[ 1 ] -= geoproject.center.y;\n    }\n\n    return new THREE.Vector3( projected[ 0 ], projected[ 1 ], lonlatH[ 2 ] ); // Pass through the height\n  },\n  unproject: function ( v, absolute ) {\n    if ( Array.isArray( v ) ) {\n      return v.map( function ( x ) {\n        return geoproject.unproject( x, absolute );\n      } );\n    }\n\n    var projected = [ v.x, v.y ];\n    if ( !absolute ) {\n      projected[ 0 ] += geoproject.center.x;\n      projected[ 1 ] += geoproject.center.y;\n    }\n\n    var unprojected = geoproject.projector.inverse( projected );\n    return [ unprojected[ 0 ], unprojected[ 1 ], v.z ]; // Pass through the height\n  },\n  unproject3035: function ( v, absolute ) {\n    if ( Array.isArray( v[ 0 ] ) ) {\n      return v.map( function ( x ) {\n        return geoproject.unproject3035( x, absolute );\n      } );\n    }\n\n    var projected = [ v[ 0 ], v[ 1 ] ];\n    if ( !absolute ) {\n      projected[ 0 ] += geoproject.center3035.x;\n      projected[ 1 ] += geoproject.center3035.y;\n    }\n\n    var unprojected = geoproject.projector3035.inverse( projected );\n    return [ unprojected[ 0 ], unprojected[ 1 ], v.z ]; // Pass through the height\n  },\n  vectorize: function ( lonlatH ) {\n    if ( typeof lonlatH[ 0 ] !== 'number' ) {\n      // Assume we have an array, iterate over it\n      var result = new Array( lonlatH.length );\n      for ( var i = 0, il = lonlatH.length; i < il; i++ ) {\n        result[ i ] = geoproject.vectorize( lonlatH[ i ] );\n      }\n\n      return result;\n    }\n\n    return new THREE.Vector3( lonlatH[ 0 ], lonlatH[ 1 ], lonlatH[ 2 ] );\n  },\n  // Convert a JSON feature representation into arrays of THREE.Vectors\n  vectorizeFeature: function ( feature ) {\n    if ( feature.projected ) {\n      return geoproject.vectorize( feature.geometry.coordinates );\n    } else {\n      return geoproject.project( feature.geometry.coordinates );\n    }\n  }\n};\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nvar RenderActions = alt.generateActions(\n  'containerMounted',\n  'containerResized',\n  'fatalError',\n  'featureCreated',\n  'fontsLoaded',\n  'forceHD',\n  'onBoundsFocused',\n  'onLocationFocused',\n  'overlayDisplayed',\n  'needsRender',\n  'pause',\n  'play',\n  'renderedFeatureDisplayed',\n  'renderedFeatureRegister',\n  'setFieldOfView',\n  'setHD',\n  'setSize'\n);\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// In order to provide frame based animation, wrap requestAnimationFrame\n// in a Store, so we can emit evens the rest of the app can listen to\n// This allows us to have multiple syncronized animations, but only one RaF\nfunction AnimationStore() {\n  this.paused = false;\n  this.time = 0;\n  this.bindListeners( {\n    play: RenderActions.play,\n    pause: RenderActions.pause\n  } );\n\n  // Setup syncronizing RaF\n  const tick = time => {\n    window.requestAnimationFrame( tick );\n    if ( !this.paused ) {\n      this.time = time;\n      this.emitChange();\n    }\n  };\n\n  window.requestAnimationFrame( tick );\n}\n\nAnimationStore.prototype.play = function () {\n  this.paused = false;\n  return false;\n};\n\nAnimationStore.prototype.pause = function () {\n  this.paused = true;\n  return false;\n};\n\nAnimationStore.displayName = 'AnimationStore';\n\nvar AnimationStore$1 = alt.createStore( AnimationStore );\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nvar CurrentLocationActions = alt.generateActions(\n  'panToPosition',\n  'setPosition',\n  'toggleTracking'\n);\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nvar GeodataActions = alt.generateActions(\n  'addBuiltinOverlay',\n  'addOverlay',\n  'elevationBigProgress',\n  'elevationProgress',\n  'featuresProgress',\n  'imageryBigProgress',\n  'imageryProgress',\n  'removeOverlay',\n  'setElevation',\n  'setElevationBig',\n  'setFeatures',\n  'setHeightOffset',\n  'setHeightOffsetBig',\n  'setImagery',\n  'setImageryBig',\n  'setLiabilityUsed',\n  'setOSMUsed',\n  'setSRTMUsed',\n  'setTerrainMesh',\n  'updateHeightMap',\n  'updateOverlay'\n);\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nvar UserActions = alt.generateActions(\n  'animateAlongFeature',\n  'doubleTapZoom',\n  'featureClicked',\n  'featureSelected',\n  'focusOnBounds',\n  'focusOnFeature',\n  'focusOnLocation',\n  'focusOnTarget',\n  'inputEnded',\n  'inputStarted',\n  'orbitTarget',\n  'panToPosition',\n  'rotateLeft',\n  'rotateRight',\n  'selectFeatures',\n  'setCamera',\n  'setCameraMode',\n  'setCameraPosition',\n  'setCameraTarget',\n  'setCurrentPlace',\n  'setEnvironment',\n  'setGeography',\n  'setSecondaryParams',\n  'setTerrainEffectContours',\n  'setTerrainEffectFlats',\n  'setTerrainEffectGrade',\n  'setTerrainEffectHeight',\n  'setTerrainEffectNone',\n  'startFlyover',\n  'toggleWidgets',\n  'zoomIn',\n  'zoomOut'\n);\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// Store used to synchronize rendering events, from 3D engine to label overlays\n// To request a render, use the RenderActions.needsRender action\nfunction RenderStore() {\n  this.needsRender = false;\n  this.animating = false;\n  this.env = false;\n  this.clock = new THREE.Clock();\n\n  this.bindListeners( {\n    scheduleRender: [\n      CurrentLocationActions.panToPosition,\n      CurrentLocationActions.setPosition,\n      GeodataActions.addBuiltinOverlay,\n      GeodataActions.addOverlay,\n      GeodataActions.setFeatures,\n      GeodataActions.setImageryBig,\n      RenderActions.containerMounted,\n      RenderActions.containerResized,\n      RenderActions.needsRender,\n      RenderActions.setHD,\n      UserActions.featureSelected,\n      UserActions.focusOnLocation,\n      UserActions.inputEnded,\n      UserActions.setCameraMode,\n      UserActions.setCamera,\n      UserActions.setCameraTarget,\n      UserActions.setCameraPosition,\n      UserActions.setTerrainEffectContours,\n      UserActions.setTerrainEffectFlats,\n      UserActions.setTerrainEffectGrade,\n      UserActions.setTerrainEffectHeight,\n      UserActions.setTerrainEffectNone\n    ],\n    scheduleRenderAnimated: GeodataActions.updateOverlay\n  } );\n\n  AnimationStore$1.listen( this.tick.bind( this ) );\n}\n\n// Do not immediately trigger a render, rely on AnimationStore to fire\nRenderStore.prototype.scheduleRender = function ( options ) {\n  if ( options ) {\n    if ( options.animating ) { this.animating = true; }\n\n    if ( options.env ) { this.env = true; }\n  }\n\n  this.needsRender = true;\n  return false;\n};\n\nRenderStore.prototype.scheduleRenderAnimated = function () {\n  return this.scheduleRender( { animating: true } );\n};\n\n// To avoid renders piling up emit changes syncronized by AnimationStore\nRenderStore.prototype.tick = function () {\n  if ( this.needsRender ) {\n    this.clock.getElapsedTime();\n    this.emitChange();\n  }\n\n  // Temporarily enable renderering at all time to make controls work\n  //this.needsRender = false;\n  this.animating = false;\n  this.env = false;\n};\n\nRenderStore.displayName = 'RenderStore';\nvar RenderStore$1 = alt.createStore( RenderStore );\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nvar canvas = document.createElement( 'canvas' );\nvar gl = canvas.getContext( 'webgl' ) || canvas.getContext( 'experimental-webgl' );\ncanvas = undefined;\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nvar createShader = function ( type, src ) {\n  // Create and compile shader\n  var shader = gl.createShader( type );\n  gl.shaderSource( shader, src );\n  gl.compileShader( shader );\n\n  // Check for errors\n  var status = gl.getShaderParameter( shader, gl.COMPILE_STATUS );\n  if ( !status ) {\n    var error = gl.getShaderInfoLog( shader );\n    console.error( 'Error compiling shader:\\n\\n', src, error );\n    return null;\n  }\n\n  return shader;\n};\n\nvar createProgram = function ( vertShader, fragShader ) {\n  // Create and link program\n  var program = gl.createProgram();\n  var vs = gl.attachShader( program, createShader( gl.VERTEX_SHADER, vertShader ) );\n  var fs = gl.attachShader( program, createShader( gl.FRAGMENT_SHADER, fragShader ) );\n  gl.linkProgram( program );\n\n  // Check for errors\n  var status = gl.getProgramParameter( program, gl.LINK_STATUS );\n  if ( !status ) {\n    var error = gl.getProgramInfoLog( program );\n    console.error( 'Error linking program', program, error );\n    return null;\n  }\n\n  // Clean up\n  gl.deleteShader( vs );\n  gl.deleteShader( fs );\n  return program;\n};\n\nvar utils = {\n  createProgram: createProgram\n};\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nlet log;\n{\n  log = () => {}; // Disable logging\n}\n\nvar log$1 = log;\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nlet track;\n\n{\n  // Mock out in production build\n  track = {\n    event: () => {},\n    timing: () => {},\n    onload: null,\n    now: () => 0\n  };\n}\n\nvar track$1 = track;\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nvar extensions = ( gl !== null ) ? gl.getSupportedExtensions() : [];\n\n// Find missing extensions\nvar needed = [ 'ANGLE_instanced_arrays',\n  'OES_standard_derivatives' ];\nvar optional = [ 'WEBGL_depth_texture' ];\nvar missing = needed.filter( function ( ext ) {\n  return extensions.indexOf( ext ) === -1;\n} );\nvar missingOptional = optional.filter( function ( ext ) {\n  return extensions.indexOf( ext ) === -1;\n} );\n\n// Test for ability to render to textures with different formats\n// For discussion, see: http://stackoverflow.com/questions/28827511/webgl-ios-render-to-floating-point-texture\n\nvar testFramebuffer = function ( ext, format ) {\n  var tex, fb;\n  var ok = false;\n  try {\n    // Optionally check for extension\n    if ( ext ) {\n      var hasExt = gl.getExtension( ext );\n      if ( !hasExt ) {\n        return false;\n      }\n    }\n\n    tex = gl.createTexture();\n    gl.bindTexture( gl.TEXTURE_2D, tex );\n    // Note using RGB for 565\n    gl.texImage2D( gl.TEXTURE_2D, 0, gl.RGB, 1, 1, 0, gl.RGB, format, null );\n    gl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST );\n    gl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST );\n\n    fb = gl.createFramebuffer();\n    gl.bindFramebuffer( gl.FRAMEBUFFER, fb );\n    gl.framebufferTexture2D( gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, tex, 0 );\n    var status = gl.checkFramebufferStatus( gl.FRAMEBUFFER );\n    ok = ( status === gl.FRAMEBUFFER_COMPLETE );\n  } catch ( e ) {\n    ok = false;\n  } finally {\n    if ( tex ) { gl.deleteTexture( tex ); }\n\n    if ( fb ) { gl.deleteFramebuffer( fb ); }\n  }\n\n  return ok;\n};\n\n// The webgl module typically loads before we are ready, so track stats once loaded\ntrack$1.onload = function () {\n  track$1.event( 'webgl', 'supported', webgl.supported ? 'yes' : 'no' );\n  track$1.event( 'webgl', 'render_565', webgl.render565 ? 'yes' : 'no' );\n  if ( webgl.missing.length > 0 ) {\n    for ( var i = 0; i < webgl.missing.length; i++ ) {\n      track$1.event( 'webgl', 'missing_extension', webgl.missing[ i ] );\n    }\n  }\n\n  if ( webgl.missingOptional.length > 0 ) {\n    for ( var i = 0; i < webgl.missingOptional.length; i++ ) {\n      track$1.event( 'webgl', 'missing_optional_extension', webgl.missingOptional[ i ] );\n    }\n  }\n};\n\nvar webgl = {\n  supported: ( gl !== null ),\n  supports: function ( extension ) {\n    return extensions.indexOf( extension ) !== -1;\n  },\n  extensions: extensions,\n  render565: false,\n  s3tc: false,\n  pvrtc: false,\n  missing: missing,\n  missingOptional: missingOptional,\n  workers: !!window.Worker\n};\n\nif ( webgl.supported ) {\n  var program = utils.createProgram(\n    'void main() { gl_Position = vec4( 1.0, 1.0, 1.0, 1.0); }',\n    'precision mediump float; uniform sampler2D uiiii_tex; void main() { gl_FragColor = texture2D( uiiii_tex, vec2( 0.5, 0.5 ) ); }'\n  );\n\n  // Check for ability to render to a 565 texture. If we can do this\n  // we can reduce our memory footprint\n  webgl.render565 = testFramebuffer( null, gl.UNSIGNED_SHORT_5_6_5 );\n\n  gl.deleteProgram( program );\n  program = undefined;\n\n  // Check texture compression support\n  var s3tc = gl.getExtension( 'WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'MOZ_WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_s3tc' );\n  var pvrtc = gl.getExtension( 'WEBGL_compressed_texture_pvrtc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_pvrtc' );\n  webgl.s3tc = ( s3tc !== null );\n  webgl.pvrtc = ( pvrtc !== null );\n\n  // Check for depth texture\n  webgl.depthTexture = webgl.supports( 'WEBGL_depth_texture' );\n}\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// The ContainerStore provides access to the dom element that houses\n// the rendering engine, to allow for attahcing of touch events etc\nfunction ContainerStore() {\n  // Actual size of canvas element, as measured on page\n  this.width = 256;\n  this.height = 256;\n  this.lastResize = 0;\n\n  // Size at which scene is rendered, derived from actual size\n  // scaled by the calculated pixel ratio such that performance\n  // doesn't suffer\n  this.renderRatio = 1;\n  this.renderWidth = 256;\n  this.renderHeight = 256;\n\n  // Size at which to render HD layers, such as labels and markers.\n  // These we cannot render at a lower resolution as they get too blurred. This size is derived from the actual size scaled by the\n  // devicePixelRatio\n  this.pixelRatio = window.devicePixelRatio;\n  this.canvasWidth = 256;\n  this.canvasHeight = 256;\n\n  this.aspect = 1;\n  this.fov = 70;\n  this.lodScale = 10.0; // Control how far to have LOD levels\n  this.hd = true;\n  this.forceHd = false;\n\n  // Do not enable for non-depthTexture code path. It is more\n  // trouble than it is worth as the labels jump in size\n  this.lowDefMove = webgl.depthTexture; // If enabled, when moving render at half-resolution\n  this.lowDefScale = 1.0;\n\n  this.element = document.createElement( 'div' );\n  this.element.style.position = 'relative';\n  this.element.style.width = '100%';\n  this.element.style.height = '100%';\n\n  this.bindListeners( {\n    containerResized: [ RenderActions.containerResized, RenderActions.containerMounted ],\n    featureSelected: UserActions.featureSelected,\n    setFieldOfView: RenderActions.setFieldOfView,\n    forceHD: RenderActions.forceHD,\n    setHD: RenderActions.setHD,\n    setSize: RenderActions.setSize,\n    inputStarted: UserActions.inputStarted,\n    inputEnded: UserActions.inputEnded\n  } );\n\n  this.exportPublicMethods( {\n    toClipSpace: this.toClipSpace.bind( this ),\n    fromClipSpace: this.fromClipSpace.bind( this ),\n    flipY: this.flipY.bind( this )\n  } );\n\n  var self = this;\n  AnimationStore$1.listen( function () {\n    if ( self.element.offsetWidth === 0 ||\n         self.element.offsetHeight === 0 ) {\n      return;\n    }\n\n    // Prior to each render check our size and aspect\n    var rect = self.element.getBoundingClientRect();\n    var aspect = rect.width / rect.height;\n    if ( aspect !== self.aspect ||\n         self.element.offsetWidth !== self.width ||\n         self.element.offsetHeight !== self.height ) {\n      RenderActions.containerResized();\n    }\n  } );\n}\n\n// Just trigger change events, do not provide mechanism for setting container\nContainerStore.prototype.containerResized = function () {\n  if ( this.element.offsetWidth > 0 && this.element.offsetHeight > 0 ) {\n    // Calculate aspect from actual visible rect as a CSS transform\n    // may mean our actual size on screen is different to that\n    // given by offsetWidth/offsetHeight. However use offsetWidth\n    // and offsetHeight for the width/height as otherwise our\n    // container size is wrong. This approach enables us to animate the\n    // size and aspect of the engine, although touch-events are off\n    // when CSS scaling is applied\n    var rect = this.element.getBoundingClientRect();\n    this.aspect = rect.width / rect.height;\n    this.setSize( {\n      width: this.element.offsetWidth,\n      height: this.element.offsetHeight\n    } );\n    this.lastResize = RenderStore$1.getState().clock.getElapsedTime();\n  }\n};\n\nContainerStore.prototype.featureSelected = function ( feature ) {\n  this.element.style.cursor = feature ? 'pointer' : 'auto';\n  return false;\n};\n\nContainerStore.prototype.updateSizes = function () {\n  this.renderWidth = this.width * this.renderRatio;\n  this.renderHeight = this.height * this.renderRatio;\n\n  // If we don't have depth texture support,\n  // HD renders are just the same as standard\n  this.pixelRatio = webgl.depthTexture ?\n    window.devicePixelRatio : this.renderRatio;\n  this.canvasWidth = this.width * this.pixelRatio;\n  this.canvasHeight = this.height * this.pixelRatio;\n};\n\n// Calculates the pixel ratio at which we should render\n// the scene relative to the size of our canvas\nContainerStore.prototype.getRenderRatio = function () {\n  if ( !webgl.depthTexture ) { return 1.0 }\n\n  var ratios = [ 1.0, 1.2, 1.5, 2.0 ];\n  //ratios = [ 0.5 ];\n  var limit = 1500000; // Max number of pixels to render\n  var r = 0;\n  var self = this;\n  var pixelCount = function ( r ) {\n    return ratios[ r ] * self.width * ratios[ r ] * self.height;\n  };\n\n  // Check if next level would result in too many pixels drawn\n  while ( ratios[ r + 1 ] && pixelCount( r + 1 ) < limit ) {\n    r++;\n  }\n\n  // Return lowest acceptable level\n  return ratios[ r ];\n};\n\nContainerStore.prototype.inputStarted = function () {\n  if ( this.lowDefMove ) {\n    var renderRatio = this.getRenderRatio();\n    this.renderRatio = Math.max( 0.8, 0.75 * renderRatio );\n    this.lowDefScale = this.renderRatio / renderRatio;\n    this.updateSizes();\n  } else {\n    return false;\n  }\n};\n\nContainerStore.prototype.inputEnded = function () {\n  if ( this.lowDefMove ) {\n    this.renderRatio = this.getRenderRatio();\n    this.lowDefScale = 1.0;\n    this.updateSizes();\n  } else {\n    return false;\n  }\n};\n\n\n// Manually set size of container. Useful for getting renderer right\n// size/fov before it is displayed\nContainerStore.prototype.setSize = function ( size ) {\n  this.width = size.width;\n  this.height = size.height;\n  this.lodScale = 1.5 * Math.min( 1000.0 / this.width, 1.0 ); // works with camera.js\n  this.renderRatio = this.getRenderRatio();\n  this.updateSizes();\n};\n\nContainerStore.prototype.forceHD = function ( hd ) {\n  this.forceHd = hd;\n  this.renderRatio = this.getRenderRatio();\n  this.updateSizes();\n};\n\nContainerStore.prototype.setHD = function ( hd ) {\n  this.hd = hd;\n  this.renderRatio = this.getRenderRatio();\n  this.updateSizes();\n};\n\nContainerStore.prototype.setFieldOfView = function ( fov ) {\n  this.fov = fov;\n};\n\n// Utility functions to convert to and from clipspace\nContainerStore.prototype.toClipSpace = function ( position ) {\n  return new THREE.Vector2(\n    ( position.x / this.width ) * 2 - 1, // -1 -> 1\n    1 - ( position.y / this.height ) * 2 ); // 1 -> -1\n};\n\nContainerStore.prototype.fromClipSpace = function ( position ) {\n  return new THREE.Vector2(\n    0.5 * ( 1 + position.x ) * this.width, // 0 -> width\n    0.5 * ( 1 - position.y ) * this.height ); // 0 - > height\n};\n\nContainerStore.prototype.flipY = function ( position ) {\n  return new THREE.Vector2( position.x, this.height - position.y );\n};\n\nContainerStore.displayName = 'ContainerStore';\nvar ContainerStore$1 = alt.createStore( ContainerStore );\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// Changing the far parameter makes little difference,\n// the key one is near, as we start losing depth\n// precision based on that\n// http://www.reedbeta.com/blog/depth-precision-visualized/\nvar camera = new THREE.PerspectiveCamera(\n  45, // fov\n  1, // aspect\n  200, // near\n  2000000 // far\n);\n\nContainerStore$1.listen( function ( state ) {\n  camera.aspect = state.aspect;\n  camera.fov = state.fov / Math.max( camera.aspect, 1.0 );\n  camera.updateProjectionMatrix();\n} );\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n *\n * This file incorporates work covered by the following copyright and\n * permission notice:\n *\n *   The MIT License\n *\n *   Copyright © 2010-2020 three.js authors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in\n *   all copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *   THE SOFTWARE.\n */\n\n// This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n//\n//    Orbit - left mouse / touch: one-finger move\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - right mouse, or left mouse + ctrl/meta/shiftKey, or arrow keys / touch: two-finger move\n\nvar OrbitControls = function ( object ) {\n\n  var domElement = ContainerStore$1.getState().element;\n\tif ( domElement === undefined ) console.warn( 'THREE.OrbitControls: The second parameter \"domElement\" is now mandatory.' );\n\tif ( domElement === document ) console.error( 'THREE.OrbitControls: \"document\" should not be used as the target \"domElement\". Please use \"renderer.domElement\" instead.' );\n\n\tthis.object = object;\n\tthis.domElement = domElement;\n\n\t// Set to false to disable this control\n\tthis.enabled = true;\n\n\t// \"target\" sets the location of focus, where the object orbits around\n\tthis.target = new Vector3();\n\n\t// How far you can dolly in and out ( PerspectiveCamera only )\n\tthis.minDistance = 0;\n\tthis.maxDistance = Infinity;\n\n\t// How far you can zoom in and out ( OrthographicCamera only )\n\tthis.minZoom = 0;\n\tthis.maxZoom = Infinity;\n\n\t// How far you can orbit vertically, upper and lower limits.\n\t// Range is 0 to Math.PI radians.\n\tthis.minPolarAngle = 0.17 * Math.PI; // radians\n\tthis.maxPolarAngle = 0.33 * Math.PI; // radians\n\n\t// How far you can orbit horizontally, upper and lower limits.\n\t// If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\n\tthis.minAzimuthAngle = - Infinity; // radians\n\tthis.maxAzimuthAngle = Infinity; // radians\n\n\t// Set to true to enable damping (inertia)\n\t// If damping is enabled, you must call controls.update() in your animation loop\n\tthis.enableDamping = true;\n\tthis.dampingFactor = 0.05;\n\n\t// This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\n\t// Set to false to disable zooming\n\tthis.enableZoom = true;\n\tthis.zoomSpeed = 0.5;\n\n\t// Set to false to disable rotating\n\tthis.enableRotate = true;\n\tthis.rotateSpeed = 1.0;\n\n\t// Set to false to disable panning\n\tthis.enablePan = true;\n\tthis.panSpeed = 1.0;\n\tthis.screenSpacePanning = true; // if false, pan orthogonal to world-space direction camera.up\n\tthis.keyPanSpeed = 50.0;\t// pixels moved per arrow key push\n\n\t// Set to true to automatically rotate around the target\n\t// If auto-rotate is enabled, you must call controls.update() in your animation loop\n\tthis.autoRotate = false;\n\tthis.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\n\n\t// Set to false to disable use of the keys\n\tthis.enableKeys = true;\n\n  // Lock camera to 2D overhead mode\n  this.lock2D = false;\n\n\t// The four arrow keys and -/+ for zoom\n\tthis.keys = {\n    LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40,\n    MINUS: 189, PLUS: 187\n  };\n\n\t// Mouse buttons\n\tthis.mouseButtons = { LEFT: MOUSE.ROTATE, MIDDLE: MOUSE.DOLLY, RIGHT: MOUSE.PAN };\n\n\t// Touch fingers\n\tthis.touches = { ONE: TOUCH.ROTATE, TWO: TOUCH.DOLLY_PAN };\n\n\t// for reset\n\tthis.target0 = this.target.clone();\n\tthis.position0 = this.object.position.clone();\n\tthis.zoom0 = this.object.zoom;\n\n\t//\n\t// public methods\n\t//\n\n\tthis.getPolarAngle = function () {\n\n\t\treturn spherical.phi;\n\n\t};\n\n\tthis.getAzimuthalAngle = function () {\n\n\t\treturn spherical.theta;\n\n\t};\n\n\tthis.saveState = function () {\n\n\t\tscope.target0.copy( scope.target );\n\t\tscope.position0.copy( scope.object.position );\n\t\tscope.zoom0 = scope.object.zoom;\n\n\t};\n\n  this.setDistanceToTarget = function ( d ) {\n    let now = RenderStore$1.getState().clock.getElapsedTime();\n    let lastResize = ContainerStore$1.getState().lastResize;\n    // Things get a bit chaotic when the container resizes\n    // so ignore picker events for a second after\n    // Without this we can get into a strange loop where\n    // the camera endlessly zooms out\n    if ( now - lastResize > 1 ) {\n      // Get direction vector\n      scope.target.sub( scope.object.position );\n      scope.target.setLength( d );\n      scope.target.add( scope.object.position );\n    }\n  };\n\n\tthis.reset = function () {\n\n\t\tscope.target.copy( scope.target0 );\n\t\tscope.object.position.copy( scope.position0 );\n\t\tscope.object.zoom = scope.zoom0;\n\n\t\tscope.object.updateProjectionMatrix();\n\t\tscope.dispatchEvent( changeEvent );\n\n\t\tscope.update();\n\n\t\tstate = STATE.NONE;\n\n\t};\n\n\t// this method is exposed, but perhaps it would be better if we can make it private...\n\tthis.update = function () {\n\n\t\tvar offset = new Vector3();\n\n\t\t// so camera.up is the orbit axis\n\t\tvar quat = new Quaternion().setFromUnitVectors( object.up, new Vector3( 0, 1, 0 ) );\n\t\tvar quatInverse = quat.clone().inverse();\n\n\t\tvar lastPosition = new Vector3();\n\t\tvar lastQuaternion = new Quaternion();\n\n\t\treturn function update() {\n\n\t\t\tvar position = scope.object.position;\n\n\t\t\toffset.copy( position ).sub( scope.target );\n\n\t\t\t// rotate offset to \"y-axis-is-up\" space\n\t\t\toffset.applyQuaternion( quat );\n\n\t\t\t// angle from z-axis around y-axis\n\t\t\tspherical.setFromVector3( offset );\n\n\t\t\tif ( scope.autoRotate && state === STATE.NONE ) {\n\n\t\t\t\trotateLeft( getAutoRotationAngle() );\n\n\t\t\t}\n\n      // For 2D override the phi to 0\n      if ( scope.lock2D ) {\n        if ( scope._oldPhi === undefined ) {\n          // Stash away old value of phi\n          scope._oldPhi = spherical.phi;\n        }\n\n        // Animate to 0\n        sphericalDelta.phi = -spherical.phi;\n      } else if ( scope._oldPhi !== undefined ) {\n        // Animate back to old phi\n        sphericalDelta.phi = scope._oldPhi - spherical.phi;\n\n        if ( Math.abs( sphericalDelta.phi ) < 0.05 ) {\n          // End transition once close enough\n          delete scope._oldPhi;\n        }\n      }\n\n\t\t\tif ( scope.enableDamping ) {\n\n\t\t\t\tspherical.theta += sphericalDelta.theta * scope.dampingFactor;\n\t\t\t\tspherical.phi += sphericalDelta.phi * scope.dampingFactor;\n\n\t\t\t} else {\n\n\t\t\t\tspherical.theta += sphericalDelta.theta;\n\t\t\t\tspherical.phi += sphericalDelta.phi;\n\n\t\t\t}\n\n\t\t\t// restrict theta to be between desired limits\n\t\t\tspherical.theta = Math.max( scope.minAzimuthAngle, Math.min( scope.maxAzimuthAngle, spherical.theta ) );\n\n\t\t\t// restrict phi to be between desired limits\n      if ( !scope.lock2D && scope._oldPhi === undefined ) {\n        spherical.phi = Math.max( scope.minPolarAngle, Math.min( scope.maxPolarAngle, spherical.phi ) );\n      }\n\n\t\t\tspherical.makeSafe();\n\n\n      // Zoom damping needs to be stiffer otherwise it feels weird\n      scale -= 1;\n      var zoomDamping = 2 * scope.dampingFactor;\n\t\t\tspherical.radius *= 1 + scale * zoomDamping;\n\n\t\t\t// restrict radius to be between desired limits\n\t\t\tspherical.radius = Math.max( scope.minDistance, Math.min( scope.maxDistance, spherical.radius ) );\n\n\t\t\t// move target to panned location\n\n\t\t\tif ( scope.enableDamping === true ) {\n\n\t\t\t\tscope.target.addScaledVector( panOffset, scope.dampingFactor );\n\n\t\t\t} else {\n\n\t\t\t\tscope.target.add( panOffset );\n\n\t\t\t}\n\n\t\t\toffset.setFromSpherical( spherical );\n\n\t\t\t// rotate offset back to \"camera-up-vector-is-up\" space\n\t\t\toffset.applyQuaternion( quatInverse );\n\n\t\t\tposition.copy( scope.target ).add( offset );\n\n\t\t\tscope.object.lookAt( scope.target );\n\n\t\t\tif ( scope.enableDamping === true ) {\n\n\t\t\t\tsphericalDelta.theta *= ( 1 - scope.dampingFactor );\n\t\t\t\tsphericalDelta.phi *= ( 1 - scope.dampingFactor );\n\n\t\t\t\tpanOffset.multiplyScalar( 1 - scope.dampingFactor );\n\n\t\t\t} else {\n\n\t\t\t\tsphericalDelta.set( 0, 0, 0 );\n\n\t\t\t\tpanOffset.set( 0, 0, 0 );\n\n\t\t\t}\n\n      scale *= ( 1 - zoomDamping );\n\t\t\tscale += 1;\n\n\t\t\t// update condition is:\n\t\t\t// min(camera displacement, camera rotation in radians)^2 > EPS\n\t\t\t// using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n\t\t\tif ( zoomChanged ||\n\t\t\t\tlastPosition.distanceToSquared( scope.object.position ) > EPS ||\n\t\t\t\t8 * ( 1 - lastQuaternion.dot( scope.object.quaternion ) ) > EPS ) {\n\n\t\t\t\tscope.dispatchEvent( changeEvent );\n\n        // To avoid heightAt lookups, set forceHeight\n        scope.object.position.forceHeight = true;\n        UserActions.setCamera( { position: scope.object.position, target: scope.target } );\n\n\t\t\t\tlastPosition.copy( scope.object.position );\n\t\t\t\tlastQuaternion.copy( scope.object.quaternion );\n\t\t\t\tzoomChanged = false;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\t\t\treturn false;\n\n\t\t};\n\n\t}();\n\n\tthis.dispose = function () {\n\n\t\tscope.domElement.removeEventListener( 'contextmenu', onContextMenu, false );\n\t\tscope.domElement.removeEventListener( 'mousedown', onMouseDown, false );\n\t\tscope.domElement.removeEventListener( 'wheel', onMouseWheel, { capture: false, passive: false } );\n\n\t\tscope.domElement.removeEventListener( 'touchstart', onTouchStart, false );\n\t\tscope.domElement.removeEventListener( 'touchend', onTouchEnd, false );\n\t\tscope.domElement.removeEventListener( 'touchcancel', onTouchCancel, false );\n\t\tscope.domElement.removeEventListener( 'touchmove', onTouchMove, false );\n\n\t\tscope.domElement.ownerDocument.removeEventListener( 'mousemove', onMouseMove, false );\n\t\tscope.domElement.ownerDocument.removeEventListener( 'mouseup', onMouseUp, false );\n\n\t\tscope.domElement.removeEventListener( 'keydown', onKeyDown, false );\n\n\t\t//scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\n\n\t};\n\n\t//\n\t// internals\n\t//\n\n\tvar scope = this;\n\n\tvar changeEvent = { type: 'change' };\n\n\tvar STATE = {\n\t\tNONE: - 1,\n\t\tROTATE: 0,\n\t\tDOLLY: 1,\n\t\tPAN: 2,\n\t\tTOUCH_ROTATE: 3,\n\t\tTOUCH_PAN: 4,\n\t\tTOUCH_DOLLY_PAN: 5,\n\t\tTOUCH_DOLLY_ROTATE: 6\n\t};\n\n\tvar state = STATE.NONE;\n\n\tvar EPS = 0.000001;\n\n\t// current position in spherical coordinates\n\tvar spherical = new Spherical();\n\tvar sphericalDelta = new Spherical();\n\n\tvar scale = 1;\n\tvar panOffset = new Vector3();\n\tvar zoomChanged = false;\n\n\tvar event0;\n\tvar clickTimeout = 0.3;\n\n\tvar rotateStart = new Vector2();\n\tvar rotateEnd = new Vector2();\n\tvar rotateDelta = new Vector2();\n\n\tvar panStart = new Vector2();\n\tvar panEnd = new Vector2();\n\tvar panDelta = new Vector2();\n\n\tvar dollyStart = new Vector2();\n\tvar dollyEnd = new Vector2();\n\tvar dollyDelta = new Vector2();\n\n\tfunction getAutoRotationAngle() {\n\n\t\treturn 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n\n\t}\n\n\tfunction getZoomScale( delta ) {\n\n\t\treturn Math.pow( 0.97,\n      delta !== undefined ? 0.01 * Math.abs( delta ) : scope.zoomSpeed );\n\n\t}\n\n\tfunction rotateLeft( angle ) {\n\n\t\tsphericalDelta.theta -= angle;\n\n\t}\n\n\tfunction rotateUp( angle ) {\n\n\t\tsphericalDelta.phi -= angle;\n\n\t}\n\n\tvar panLeft = function () {\n\n\t\tvar v = new Vector3();\n\n\t\treturn function panLeft( distance, objectMatrix ) {\n\n\t\t\tv.setFromMatrixColumn( objectMatrix, 0 ); // get X column of objectMatrix\n\t\t\tv.multiplyScalar( - distance );\n\n\t\t\tpanOffset.add( v );\n\n\t\t};\n\n\t}();\n\n\tvar panUp = function () {\n\n\t\tvar v = new Vector3();\n\n\t\treturn function panUp( distance, objectMatrix ) {\n\n\t\t\tif ( scope.screenSpacePanning === true ) {\n\n\t\t\t\tv.setFromMatrixColumn( objectMatrix, 1 );\n\n\t\t\t} else {\n\n\t\t\t\tv.setFromMatrixColumn( objectMatrix, 0 );\n\t\t\t\tv.crossVectors( scope.object.up, v );\n\n\t\t\t}\n\n\t\t\tv.multiplyScalar( distance );\n\n\t\t\tpanOffset.add( v );\n\n\t\t};\n\n\t}();\n\n\t// deltaX and deltaY are in pixels; right and down are positive\n\tvar pan = function () {\n\n\t\tvar offset = new Vector3();\n\n\t\treturn function pan( deltaX, deltaY ) {\n\n\t\t\tvar element = scope.domElement;\n\n\t\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\t\t// perspective\n\t\t\t\tvar position = scope.object.position;\n\t\t\t\toffset.copy( position ).sub( scope.target );\n\t\t\t\tvar targetDistance = offset.length();\n\n\t\t\t\t// half of the fov is center to top of screen\n\t\t\t\ttargetDistance *= Math.tan( ( scope.object.fov / 2 ) * Math.PI / 180.0 );\n\n\t\t\t\t// we use only clientHeight here so aspect ratio does not distort speed\n\t\t\t\tpanLeft( 2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix );\n\t\t\t\tpanUp( 2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix );\n\n\t\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\t\t// orthographic\n\t\t\t\tpanLeft( deltaX * ( scope.object.right - scope.object.left ) / scope.object.zoom / element.clientWidth, scope.object.matrix );\n\t\t\t\tpanUp( deltaY * ( scope.object.top - scope.object.bottom ) / scope.object.zoom / element.clientHeight, scope.object.matrix );\n\n\t\t\t} else {\n\n\t\t\t\t// camera neither orthographic nor perspective\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.' );\n\t\t\t\tscope.enablePan = false;\n\n\t\t\t}\n\n\t\t};\n\n\t}();\n\n\tfunction dollyOut( dollyScale ) {\n\n\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\tscale /= dollyScale;\n\n\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom * dollyScale ) );\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t\tzoomChanged = true;\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\tscope.enableZoom = false;\n\n\t\t}\n\n\t}\n\n\tfunction dollyIn( dollyScale ) {\n\n\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\tscale *= dollyScale;\n\n\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom / dollyScale ) );\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t\tzoomChanged = true;\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\tscope.enableZoom = false;\n\n\t\t}\n\n\t}\n\n\t//\n\t// event callbacks - update the object state\n\t//\n\n\tfunction handleMouseDownRotate( event ) {\n\n\t\trotateStart.set( event.clientX, event.clientY );\n\n\t}\n\n\tfunction handleMouseDownDolly( event ) {\n\n\t\tdollyStart.set( event.clientX, event.clientY );\n\n\t}\n\n\tfunction handleMouseDownPan( event ) {\n\n\t\tpanStart.set( event.clientX, event.clientY );\n\n\t}\n\n\tfunction handleMouseMoveRotate( event ) {\n\n\t\trotateEnd.set( event.clientX, event.clientY );\n\n\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\n\n\t\tvar element = scope.domElement;\n\n\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\n\n\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\n\n\t\trotateStart.copy( rotateEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleMouseMoveDolly( event ) {\n\n\t\tdollyEnd.set( event.clientX, event.clientY );\n\n\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\n\n\t\tif ( dollyDelta.y > 0 ) {\n\n\t\t\tdollyOut( getZoomScale() );\n\n\t\t} else if ( dollyDelta.y < 0 ) {\n\n\t\t\tdollyIn( getZoomScale() );\n\n\t\t}\n\n\t\tdollyStart.copy( dollyEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleMouseMovePan( event ) {\n\n\t\tpanEnd.set( event.clientX, event.clientY );\n\n\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\n\n\t\tpan( panDelta.x, panDelta.y );\n\n\t\tpanStart.copy( panEnd );\n\n\t\tscope.update();\n\n\t}\n\n  function dispatchClickEvent ( event ) {\n    // A bit messy way to re-dispatch the event\n    // bit it works\n\n\n    // TODO this workaround fixes behavior on Android\n    // however we should migrate to pointer events in\n    // the future, like THREE.js has\n    let useTouches = ( event.clientX === undefined );\n    let coords = useTouches ? event.touches[ 0 ] : event;\n\n    scope.dispatchEvent( {\n      type: 'click',\n      srcElement: event.srcElement || event.target,\n      clientX: coords.clientX,\n      clientY: coords.clientY,\n      pageX: coords.pageX,\n      pageY: coords.pageY,\n      altKey: event.altKey,\n      detail: event.clickCount\n    } );\n  }\n\n\tfunction handleMouseUp( event ) {\n\n    const time = RenderStore$1.getState().clock.getElapsedTime();\n    if ( event0.clientX === event.clientX &&\n         event0.clientY === event.clientY &&\n         time - event0.time < clickTimeout ) {\n      dispatchClickEvent( event0 );\n    }\n\n\t}\n\n\tfunction handleMouseWheel( event ) {\n\n    // deltaY isn't always reported in pixels, so do\n    // our best to normalize it somewhat. Unfortunately\n    // there is no exact way to do this, so rather try and\n    // aim for values that will match the user's expectation\n    // https://stackoverflow.com/questions/20110224/what-is-the-height-of-a-line-in-a-wheel-event-deltamode-dom-delta-line\n    var deltaY = event.deltaY;\n    if ( event.deltaMode === event.DOM_DELTA_LINE) { \n      // Jump by a \"line\" (32px)\n      deltaY *= 32;\n    } else if ( event.deltaMode === event.DOM_DELTA_PAGE ) {\n      // Jump by a \"page\" (100px)\n      deltaY *= 100;\n    }\n\n\t\tif ( deltaY < 0 ) {\n\n\t\t\tdollyIn( getZoomScale( deltaY ) );\n\n\t\t} else if ( deltaY > 0 ) {\n\n\t\t\tdollyOut( getZoomScale( deltaY ) );\n\n\t\t}\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleKeyDown( event ) {\n\n\t\tvar needsUpdate = false;\n\n\t\tswitch ( event.keyCode ) {\n\n\t\t\tcase scope.keys.UP:\n\t\t\t\tpan( 0, scope.keyPanSpeed );\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.BOTTOM:\n\t\t\t\tpan( 0, - scope.keyPanSpeed );\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.LEFT:\n\t\t\t\tpan( scope.keyPanSpeed, 0 );\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.RIGHT:\n\t\t\t\tpan( - scope.keyPanSpeed, 0 );\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.MINUS:\n        dollyOut( getZoomScale( 300 ) );\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.PLUS:\n        dollyIn( getZoomScale( 300 ) );\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tif ( needsUpdate ) {\n\n\t\t\t// prevent the browser from scrolling on cursor keys\n\t\t\tevent.preventDefault();\n\n\t\t\tscope.update();\n\n\t\t}\n\n\n\t}\n\n\tfunction handleTouchStartRotate( event ) {\n\n\t\tif ( event.touches.length == 1 ) {\n\n\t\t\trotateStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t\t} else {\n\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\n\n\t\t\trotateStart.set( x, y );\n\n\t\t}\n\n\t}\n\n\tfunction handleTouchStartPan( event ) {\n\n\t\tif ( event.touches.length == 1 ) {\n\n\t\t\tpanStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t\t} else {\n\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\n\n\t\t\tpanStart.set( x, y );\n\n\t\t}\n\n\t}\n\n\tfunction handleTouchStartDolly( event ) {\n\n\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\n\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\tdollyStart.set( 0, distance );\n\n\t}\n\n\tfunction handleTouchStartDollyPan( event ) {\n\n\t\tif ( scope.enableZoom ) handleTouchStartDolly( event );\n\n\t\tif ( scope.enablePan ) handleTouchStartPan( event );\n\n\t}\n\n\tfunction handleTouchStartDollyRotate( event ) {\n\n\t\tif ( scope.enableZoom ) handleTouchStartDolly( event );\n\n\t\tif ( scope.enableRotate ) handleTouchStartRotate( event );\n\n\t}\n\n\tfunction handleTouchMoveRotate( event ) {\n\n\t\tif ( event.touches.length == 1 ) {\n\n\t\t\trotateEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t\t} else {\n\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\n\n\t\t\trotateEnd.set( x, y );\n\n\t\t}\n\n\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\n\n\t\tvar element = scope.domElement;\n\n\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\n\n\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\n\n\t\trotateStart.copy( rotateEnd );\n\n\t}\n\n\tfunction handleTouchMovePan( event ) {\n\n\t\tif ( event.touches.length == 1 ) {\n\n\t\t\tpanEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t\t} else {\n\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\n\n\t\t\tpanEnd.set( x, y );\n\n\t\t}\n\n\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\n\n\t\tpan( panDelta.x, panDelta.y );\n\n\t\tpanStart.copy( panEnd );\n\n\t}\n\n\tfunction handleTouchMoveDolly( event ) {\n\n\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\n\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\tdollyEnd.set( 0, distance );\n\n\t\tdollyDelta.set( 0, Math.pow( dollyEnd.y / dollyStart.y, scope.zoomSpeed ) );\n\n\t\tdollyOut( dollyDelta.y );\n\n\t\tdollyStart.copy( dollyEnd );\n\n\t}\n\n\tfunction handleTouchMoveDollyPan( event ) {\n\n\t\tif ( scope.enableZoom ) handleTouchMoveDolly( event );\n\n\t\tif ( scope.enablePan ) handleTouchMovePan( event );\n\n\t}\n\n\tfunction handleTouchMoveDollyRotate( event ) {\n\n\t\tif ( scope.enableZoom ) handleTouchMoveDolly( event );\n\n\t\tif ( scope.enableRotate ) handleTouchMoveRotate( event );\n\n\t}\n\n  const tapDeltaThreshold = 25;\n\tfunction handleTouchEnd( event ) {\n\n    const time = RenderStore$1.getState().clock.getElapsedTime();\n\n    let useTouches = ( event.clientX === undefined );\n    let coords0 = useTouches ? event0.touches[ 0 ] : event0;\n    let coords = useTouches ? event.changedTouches[ 0 ] : event;\n\n    if ( event0.touches.length === 1 &&\n         Math.abs( coords0.pageX - coords.pageX ) < tapDeltaThreshold &&\n         Math.abs( coords0.pageY - coords.pageY ) < tapDeltaThreshold &&\n         time - event0.time < clickTimeout ) {\n      dispatchClickEvent( event0 );\n    }\n\n\t}\n\n  function stashFirstEvent( event ) {\n    const time = RenderStore$1.getState().clock.getElapsedTime();\n    if ( !event0 || time - event0.time > clickTimeout ) {\n      event0 = event;\n      event0.time = time;\n      event0.clickCount = 0;\n    }\n    event0.clickCount++;\n  }\n\n\t//\n\t// event handlers - FSM: listen for events and reset state\n\t//\n\n\tfunction onMouseDown( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\t// Prevent the browser from scrolling.\n\t\tevent.preventDefault();\n\n\t\t// Manually set the focus since calling preventDefault above\n\t\t// prevents the browser from setting it automatically.\n\n\t\tscope.domElement.focus ? scope.domElement.focus() : window.focus();\n\n\t\tvar mouseAction;\n\n\t\tswitch ( event.button ) {\n\n\t\t\tcase 0:\n\n\t\t\t\tmouseAction = scope.mouseButtons.LEFT;\n\t\t\t\tbreak;\n\n\t\t\tcase 1:\n\n\t\t\t\tmouseAction = scope.mouseButtons.MIDDLE;\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\n\n\t\t\t\tmouseAction = scope.mouseButtons.RIGHT;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tmouseAction = - 1;\n\n\t\t}\n\n\t\tswitch ( mouseAction ) {\n\n\t\t\tcase MOUSE.DOLLY:\n\n\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\thandleMouseDownDolly( event );\n\n\t\t\t\tstate = STATE.DOLLY;\n\n\t\t\t\tbreak;\n\n\t\t\tcase MOUSE.ROTATE:\n\n\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\thandleMouseDownPan( event );\n\n\t\t\t\t\tstate = STATE.PAN;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\thandleMouseDownRotate( event );\n\n\t\t\t\t\tstate = STATE.ROTATE;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase MOUSE.PAN:\n\n\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\thandleMouseDownRotate( event );\n\n\t\t\t\t\tstate = STATE.ROTATE;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\thandleMouseDownPan( event );\n\n\t\t\t\t\tstate = STATE.PAN;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t\tif ( state !== STATE.NONE ) {\n\n\t\t\tscope.domElement.ownerDocument.addEventListener( 'mousemove', onMouseMove, false );\n\t\t\tscope.domElement.ownerDocument.addEventListener( 'mouseup', onMouseUp, false );\n\n      stashFirstEvent( event );\n\n      UserActions.inputStarted();\n\n\t\t}\n\n\t}\n\n\tfunction onMouseMove( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\n\t\tswitch ( state ) {\n\n\t\t\tcase STATE.ROTATE:\n\n\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\thandleMouseMoveRotate( event );\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.DOLLY:\n\n\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\thandleMouseMoveDolly( event );\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.PAN:\n\n\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\thandleMouseMovePan( event );\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\tfunction onMouseUp( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n    UserActions.inputEnded();\n\t\thandleMouseUp( event );\n\n\t\tscope.domElement.ownerDocument.removeEventListener( 'mousemove', onMouseMove, false );\n\t\tscope.domElement.ownerDocument.removeEventListener( 'mouseup', onMouseUp, false );\n\n\t\tstate = STATE.NONE;\n\n\t}\n\n\tfunction onMouseWheel( event ) {\n\n\t\tif ( scope.enabled === false || scope.enableZoom === false || ( state !== STATE.NONE && state !== STATE.ROTATE ) ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n    UserActions.inputStarted();\n\n\t\thandleMouseWheel( event );\n\n    UserActions.inputEnded();\n\n\t}\n\n\tfunction onKeyDown( event ) {\n\n\t\tif ( scope.enabled === false || scope.enableKeys === false || scope.enablePan === false ) return;\n\n\t\thandleKeyDown( event );\n\n\t}\n\n\tfunction onTouchStart( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault(); // prevent scrolling\n\n\t\tswitch ( event.touches.length ) {\n\n\t\t\tcase 1:\n\n\t\t\t\tswitch ( scope.touches.ONE ) {\n\n\t\t\t\t\tcase TOUCH.ROTATE:\n\n\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\t\thandleTouchStartRotate( event );\n\n\t\t\t\t\t\tstate = STATE.TOUCH_ROTATE;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase TOUCH.PAN:\n\n\t\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\t\thandleTouchStartPan( event );\n\n\t\t\t\t\t\tstate = STATE.TOUCH_PAN;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\n\n\t\t\t\tswitch ( scope.touches.TWO ) {\n\n\t\t\t\t\tcase TOUCH.DOLLY_PAN:\n\n\t\t\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\n\n\t\t\t\t\t\thandleTouchStartDollyPan( event );\n\n\t\t\t\t\t\tstate = STATE.TOUCH_DOLLY_PAN;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase TOUCH.DOLLY_ROTATE:\n\n\t\t\t\t\t\tif ( scope.enableZoom === false && scope.enableRotate === false ) return;\n\n\t\t\t\t\t\thandleTouchStartDollyRotate( event );\n\n\t\t\t\t\t\tstate = STATE.TOUCH_DOLLY_ROTATE;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t\tif ( state !== STATE.NONE ) {\n\n      UserActions.inputStarted();\n      stashFirstEvent( event );\n\n\t\t}\n\n\t}\n\n\tfunction onTouchMove( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault(); // prevent scrolling\n\t\tevent.stopPropagation();\n\n\t\tswitch ( state ) {\n\n\t\t\tcase STATE.TOUCH_ROTATE:\n\n\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\thandleTouchMoveRotate( event );\n\n\t\t\t\tscope.update();\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.TOUCH_PAN:\n\n\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\thandleTouchMovePan( event );\n\n\t\t\t\tscope.update();\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.TOUCH_DOLLY_PAN:\n\n\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\n\n\t\t\t\thandleTouchMoveDollyPan( event );\n\n\t\t\t\tscope.update();\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.TOUCH_DOLLY_ROTATE:\n\n\t\t\t\tif ( scope.enableZoom === false && scope.enableRotate === false ) return;\n\n\t\t\t\thandleTouchMoveDollyRotate( event );\n\n\t\t\t\tscope.update();\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t}\n\n\tfunction onTouchCancel( event ) {\n\t\treturn;\n\t}\n\n\tfunction onTouchEnd( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n    UserActions.inputEnded();\n\t\thandleTouchEnd( event );\n\n\t\tstate = STATE.NONE;\n\n\t}\n\n\tfunction onContextMenu( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\n\t}\n\n\t//\n\n\tscope.domElement.addEventListener( 'contextmenu', onContextMenu, false );\n\n\tscope.domElement.addEventListener( 'mousedown', onMouseDown, false );\n\tscope.domElement.addEventListener( 'wheel', onMouseWheel, false );\n\n\tscope.domElement.addEventListener( 'touchstart', onTouchStart, false );\n\tscope.domElement.addEventListener( 'touchend', onTouchEnd, false );\n\tscope.domElement.addEventListener( 'touchcancel', onTouchCancel, false );\n\tscope.domElement.addEventListener( 'touchmove', onTouchMove, false );\n\n\tscope.domElement.addEventListener( 'keydown', onKeyDown, false );\n\n\t// make sure element can receive keys.\n\n\tif ( scope.domElement.tabIndex === - 1 ) {\n\n\t\tscope.domElement.tabIndex = 0;\n\n\t}\n\n\t// force an update at start\n\n\tthis.update();\n\n};\n\nOrbitControls.prototype = Object.create( EventDispatcher.prototype );\nOrbitControls.prototype.constructor = OrbitControls;\n\n\n// This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n// This is very similar to OrbitControls, another set of touch behavior\n//\n//    Orbit - right mouse, or left mouse + ctrl/meta/shiftKey / touch: two-finger rotate\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - left mouse, or arrow keys / touch: one-finger move\n\nvar MapControls = function ( object, domElement ) {\n\n\tOrbitControls.call( this, object, domElement );\n\n\tthis.screenSpacePanning = false; // pan orthogonal to world-space direction camera.up\n\n\tthis.mouseButtons.LEFT = MOUSE.PAN;\n\tthis.mouseButtons.RIGHT = MOUSE.ROTATE;\n\n\tthis.touches.ONE = TOUCH.PAN;\n\tthis.touches.TWO = TOUCH.DOLLY_ROTATE;\n\n};\n\nMapControls.prototype = Object.create( EventDispatcher.prototype );\nMapControls.prototype.constructor = MapControls;\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nvar ConfigActions = alt.generateActions(\n  'configureCamera',\n  'configureElevationDatasource',\n  'configureImageryDatasource',\n  'setAppContainer',\n  'setCameraModeControlVisible',\n  'setCompassVisible',\n  'setDisplayErrors',\n  'setLayersControlVisible',\n  'setResourceUrl',\n  'setRotationControlVisible',\n  'setSeasonControlVisible',\n  'setUserLocationControlVisible',\n  'setZoomControlVisible'\n);\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// Special store to trigger on any user input\n// Primarily used for cancelling transitions (see `utils/store`)\nfunction UserInputStore() {\n  this.clock = new THREE.Clock();\n  this.lastInput = this.clock.getElapsedTime();\n  this.interacting = false;\n\n  // Any action in this list will cause a running transition be cancelled\n  this.bindListeners( {\n    onInput: [\n      CurrentLocationActions.toggleTracking,\n      UserActions.animateAlongFeature,\n      UserActions.doubleTapZoom,\n      UserActions.focusOnFeature,\n      UserActions.focusOnLocation,\n      UserActions.focusOnTarget,\n      UserActions.inputStarted,\n      UserActions.inputEnded,\n      UserActions.rotateLeft,\n      UserActions.rotateRight,\n      UserActions.featureClicked,\n      UserActions.setCurrentPlace,\n      UserActions.startFlyover,\n      UserActions.zoomIn,\n      UserActions.zoomOut\n    ],\n    inputStarted: UserActions.inputStarted,\n    inputEnded: UserActions.inputEnded\n  } );\n}\n\nUserInputStore.prototype.onInput = function () {\n  this.lastInput = this.clock.getElapsedTime();\n};\n\nUserInputStore.prototype.inputStarted = function () {\n  this.interacting = true;\n};\n\nUserInputStore.prototype.inputEnded = function () {\n  this.interacting = false;\n  this.onInput();\n};\n\nUserInputStore.displayName = 'UserInputStore';\nvar UserInputStore$1 = alt.createStore( UserInputStore );\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nvar StoreUtils = {\n  // Transitions between an initial and final value, firing the `action` with the\n  // intermediate value\n  cancelStack: [], // Track transitions to enable cancelling them (UserInputStore.listen below)\n  transition: function ( action, initial, final, options ) {\n    if ( typeof initial !== typeof final ) {\n      log$1( 'Error: types do not match for transition:', typeof initial, '!==', typeof final );\n      return;\n    }\n\n    // Get correct lerp method based on type\n    var lerp;\n    if ( options.lerp ) {\n      lerp = options.lerp;\n    } else if ( initial instanceof THREE.Vector3 ) {\n      lerp = StoreUtils.lerp.vector3;\n    } else if ( !isNaN( initial ) ) {\n      lerp = StoreUtils.lerp.scalar;\n    } else {\n      log$1( 'Error: no lerp function for object:' );\n      log$1( initial );\n      return;\n    }\n\n    // options defaults\n    if ( options === undefined ) { options = {}; }\n\n    if ( options.duration === undefined ) { options.duration = 1; } // in seconds\n\n    if ( options.ease === undefined ) {\n      options.ease = StoreUtils.smootherstep;\n    } else if ( typeof StoreUtils[ options.ease ] === 'function' ) {\n      // Support passing of ease function by name\n      options.ease = StoreUtils[ options.ease ];\n    }\n\n    // We're set, perform transition\n    var transition = {\n      startTime: null,\n      options: options\n    };\n    transition.step = function () {\n      // Lazily init start time for smoother animations\n      // Otherwise we may wait too long before first frame\n      if ( !transition.startTime ) { transition.startTime = new Date().getTime(); }\n\n      var t = new Date().getTime() - transition.startTime;\n      var u = 0.001 * t / options.duration;\n      if ( u >= 1 ) {\n        // Transition complete, stop listening to animation ticks\n        u = 1;\n        AnimationStore$1.unlisten( transition.step );\n        var index = StoreUtils.cancelStack.indexOf( transition.step );\n        if ( index !== -1 ) {\n          StoreUtils.cancelStack.splice( index, 1 );\n        }\n      }\n\n      // Perform action, interpolating between initial and final values with easing\n      var eased = options.ease( u );\n      action( lerp( initial, final, eased ) );\n      if ( u === 1 && typeof options.onComplete === 'function' ) {\n        options.onComplete();\n      }\n    };\n\n    if ( !options.doNotCancel ) {\n      StoreUtils.cancelStack.push( transition );\n    }\n\n    AnimationStore$1.listen( transition.step );\n  },\n  // Easing functions\n  cubicOut: function ( u ) { return Math.pow( u, 3 ) },\n  cubicIn: function ( u ) { return 1 - Math.pow( 1 - u, 3 ) },\n  linear: function ( u ) { return u },\n  smootherstep: function ( u ) { return THREE.Math.smootherstep( u, 0, 1 ) },\n  // Lerp functions\n  lerp: {\n    scalar: function ( initial, final, u ) {\n      if ( isNaN( initial ) ) { return final }\n\n      return initial + u * ( final - initial );\n    },\n    array: function ( initial, final, u ) {\n      return initial.map( function ( i, n ) {\n        return StoreUtils.lerp.scalar( i, final[ n ], u );\n      } );\n    },\n    vector3: function ( initial, final, u ) {\n      return initial.clone().lerp( final, u );\n    },\n    // Quadratic jump on top of standard transition\n    vector3Hop: function ( height ) {\n      return function ( initial, final, u ) {\n        var v = StoreUtils.lerp.vector3( initial, final, u );\n        v.z += height * ( 1 - Math.pow( 2 * u - 1, 2 ) );\n        return v;\n      };\n    },\n    // Transition while keeping set distance from center\n    vector3AngularHop: function ( center, height ) {\n      var v1 = new THREE.Vector3();\n      var v2 = new THREE.Vector3();\n      var axis = new THREE.Vector3( 0, 0, 1 );\n      return function ( initial, final, u ) {\n        // Move into space with center at 0,0 and flatten Z\n        var h1 = v1.subVectors( initial, center ).z;\n        var h2 = v2.subVectors( final, center ).z;\n        v1.setZ( 0 );\n        v2.setZ( 0 );\n        var l1 = v1.length();\n        var l2 = v2.length();\n        var theta = Math.atan2( v2.y, v2.x ) - Math.atan2( v1.y, v1.x );\n        if ( theta > Math.PI ) { theta -= 2 * Math.PI; }\n\n        if ( theta < -Math.PI ) { theta += 2 * Math.PI; }\n\n        // Rotate initial vector towards final and interpolate the length and height\n        var h = StoreUtils.lerp.scalar( h1, h2, u );\n        var l = StoreUtils.lerp.scalar( l1, l2, u );\n        v1.applyAxisAngle( axis, theta * u ).setLength( l ).setZ( h );\n\n        // Return to world space\n        v1.add( center );\n        v1.z += height * ( 1 - Math.pow( 2 * u - 1, 2 ) );\n        return v1;\n      };\n    },\n    vector3Angular: function ( center ) {\n      return StoreUtils.lerp.vector3AngularHop( center, 0 );\n    },\n    // For interpolating parameter objects for environment\n    // and geography\n    params: function ( initial, final, u ) {\n      var out = {};\n      for ( var p in final ) {\n        if ( final.hasOwnProperty( p ) ) {\n          //out[p] = interpolate( initial[ p ], final[ p ], u );\n          if ( initial[ p ] === undefined ) {\n            // Handle case where oldParams not yet defined\n            out[ p ] = final[ p ];\n            continue;\n          }\n\n          if ( typeof final[ p ] === 'number' ) {\n            out[ p ] = ( 1 - u ) * initial[ p ] + u * final[ p ];\n          } else if ( typeof final[ p ] === 'string' ) {\n            // For now assume this is a color\n            var color = new THREE.Color( initial[ p ] );\n            var newColor = new THREE.Color( final[ p ] );\n            var c = '#' + color.lerp( newColor, u ).getHexString();\n            out[ p ] = c;\n          } else {\n            out[ p ] = final[ p ];\n          }\n        }\n      }\n\n      return out;\n    }\n  }\n};\n\n// Whenever we get any user input cancel transitions\nUserInputStore$1.listen( function () {\n  var transition;\n  while ( ( transition = StoreUtils.cancelStack.pop() ) ) {\n    if ( typeof transition.options.onCancel === 'function' ) {\n      transition.options.onCancel();\n    }\n\n    AnimationStore$1.unlisten( transition.step );\n  }\n} );\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nfunction CurrentLocationStore() {\n  // Whether current location is too far away to be tracked\n  this.tooFar = true;\n\n  // Whether we are current tracking the current location with camera\n  this.tracking = false;\n\n  // Geolocation parameters\n  this.parameters = [ 'latitude', 'longitude', 'altitude', 'accuracy',\n    'altitudeAccuracy', 'heading', 'speed' ];\n  this.latitude = null;\n  this.longitude = null;\n  this.altitude = 0;\n  this.accuracy = 0;\n  this.altitudeAccuracy = 0;\n  this.heading = 0;\n  this.speed = 0;\n\n  this.bindListeners( {\n    panToPosition: CurrentLocationActions.panToPosition,\n    setPosition: CurrentLocationActions.setPosition,\n    cancelTracking: [ UserActions.doubleTapZoom, UserActions.setCamera ],\n    toggleTracking: CurrentLocationActions.toggleTracking\n  } );\n}\n\nCurrentLocationStore.prototype.checkTooFar = function () {\n  if ( !this.longitude || !this.latitude ) {\n    this.tooFar = true;\n    return;\n  }\n\n  var lonlatH = [ this.longitude, this.latitude, 0 ];\n  var position = geoproject.project( lonlatH );\n  var limit = 100000;\n  this.tooFar = ( Math.abs( position.x ) > limit ||\n                  Math.abs( position.y ) > limit );\n};\n\nCurrentLocationStore.prototype.setPosition = function ( position ) {\n  var self = this;\n  this.parameters.forEach( function ( key ) {\n    self[ key ] = position.coords[ key ];\n  } );\n  this.checkTooFar();\n};\n\nCurrentLocationStore.prototype.panToPosition = function ( position ) {\n  // No position yet, do not pan, just jump\n  if ( !this.longitude || !this.latitude ) {\n    return this.setPosition( position );\n  }\n\n  // No longer have position, null out\n  if ( position.longitude === null || position.latitude === null ) {\n    return this.setPosition( position );\n  }\n\n  // Otherwise, animate\n  var lastPosition = { coords: {} };\n  var self = this;\n  this.parameters.forEach( function ( key ) {\n    lastPosition.coords[ key ] = self[ key ];\n  } );\n  var lerp = function ( initial, final, u ) {\n    var out = { coords: {} };\n    self.parameters.forEach( function ( key ) {\n      out.coords[ key ] = StoreUtils.lerp.scalar( initial.coords[ key ],\n        final.coords[ key ],\n        u );\n    } );\n    return out;\n  };\n\n  StoreUtils.transition( CurrentLocationActions.setPosition,\n    lastPosition, position,\n    { duration: 1.0, lerp: lerp } );\n};\n\nCurrentLocationStore.prototype.cancelTracking = function () {\n  this.tracking = false;\n};\n\nCurrentLocationStore.prototype.toggleTracking = function () {\n  this.tracking = !this.tracking;\n};\n\nCurrentLocationStore.displayName = 'CurrentLocationStore';\nvar CurrentLocationStore$1 = alt.createStore( CurrentLocationStore );\n\nvar proj4 = createCommonjsModule(function (module, exports) {\n!function(t,e){module.exports=e();}(commonjsGlobal,function(){function t(t,e){if(t[e])return t[e];for(var a,r=Object.keys(t),s=e.toLowerCase().replace(ct,\"\"),i=-1;++i<r.length;)if(a=r[i],a.toLowerCase().replace(ct,\"\")===s)return t[a]}function e(t){if(\"string\"!=typeof t)throw new Error(\"not a string\");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=ft;}function a(t){return new e(t).output()}function r(t,e,a){Array.isArray(e)&&(a.unshift(e),e=null);var r=e?{}:t,i=a.reduce(function(t,e){return s(e,t),t},r);e&&(t[e]=i);}function s(t,e){if(Array.isArray(t)){var a=t.shift();if(\"PARAMETER\"===a&&(a=t.shift()),1===t.length)return Array.isArray(t[0])?(e[a]={},void s(t[0],e[a])):void(e[a]=t[0]);if(t.length)if(\"TOWGS84\"!==a){if(\"AXIS\"===a)return a in e||(e[a]=[]),void e[a].push(t);Array.isArray(a)||(e[a]={});var i;switch(a){case\"UNIT\":case\"PRIMEM\":case\"VERT_DATUM\":return e[a]={name:t[0].toLowerCase(),convert:t[1]},void(3===t.length&&s(t[2],e[a]));case\"SPHEROID\":case\"ELLIPSOID\":return e[a]={name:t[0],a:t[1],rf:t[2]},void(4===t.length&&s(t[3],e[a]));case\"PROJECTEDCRS\":case\"PROJCRS\":case\"GEOGCS\":case\"GEOCCS\":case\"PROJCS\":case\"LOCAL_CS\":case\"GEODCRS\":case\"GEODETICCRS\":case\"GEODETICDATUM\":case\"EDATUM\":case\"ENGINEERINGDATUM\":case\"VERT_CS\":case\"VERTCRS\":case\"VERTICALCRS\":case\"COMPD_CS\":case\"COMPOUNDCRS\":case\"ENGINEERINGCRS\":case\"ENGCRS\":case\"FITTED_CS\":case\"LOCAL_DATUM\":case\"DATUM\":return t[0]=[\"name\",t[0]],void r(e,a,t);default:for(i=-1;++i<t.length;)if(!Array.isArray(t[i]))return s(t,e[a]);return r(e,a,t)}}else e[a]=t;else e[a]=!0;}else e[t]=!0;}function i(t,e){var a=e[0],r=e[1];!(a in t)&&r in t&&(t[a]=t[r],3===e.length&&(t[a]=e[2](t[a])));}function n(t){return t*vt}function o(t){function e(e){return e*(t.to_meter||1)}if(\"GEOGCS\"===t.type?t.projName=\"longlat\":\"LOCAL_CS\"===t.type?(t.projName=\"identity\",t.local=!0):\"object\"==typeof t.PROJECTION?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var a=\"\",r=0,s=t.AXIS.length;r<s;++r){var o=t.AXIS[r][0].toLowerCase();-1!==o.indexOf(\"north\")?a+=\"n\":-1!==o.indexOf(\"south\")?a+=\"s\":-1!==o.indexOf(\"east\")?a+=\"e\":-1!==o.indexOf(\"west\")&&(a+=\"w\");}2===a.length&&(a+=\"u\"),3===a.length&&(t.axis=a);}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),\"metre\"===t.units&&(t.units=\"meter\"),t.UNIT.convert&&(\"GEOGCS\"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var h=t.GEOGCS;\"GEOGCS\"===t.type&&(h=t),h&&(h.DATUM?t.datumCode=h.DATUM.name.toLowerCase():t.datumCode=h.name.toLowerCase(),\"d_\"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),\"new_zealand_geodetic_datum_1949\"!==t.datumCode&&\"new_zealand_1949\"!==t.datumCode||(t.datumCode=\"nzgd49\"),\"wgs_1984\"!==t.datumCode&&\"world_geodetic_system_1984\"!==t.datumCode||(\"Mercator_Auxiliary_Sphere\"===t.PROJECTION&&(t.sphere=!0),t.datumCode=\"wgs84\"),\"_ferro\"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),\"_jakarta\"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf(\"belge\")&&(t.datumCode=\"rnb72\"),h.DATUM&&h.DATUM.SPHEROID&&(t.ellps=h.DATUM.SPHEROID.name.replace(\"_19\",\"\").replace(/[Cc]larke\\_18/,\"clrk\"),\"international\"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps=\"intl\"),t.a=h.DATUM.SPHEROID.a,t.rf=parseFloat(h.DATUM.SPHEROID.rf,10)),h.DATUM&&h.DATUM.TOWGS84&&(t.datum_params=h.DATUM.TOWGS84),~t.datumCode.indexOf(\"osgb_1936\")&&(t.datumCode=\"osgb36\"),~t.datumCode.indexOf(\"osni_1952\")&&(t.datumCode=\"osni52\"),(~t.datumCode.indexOf(\"tm65\")||~t.datumCode.indexOf(\"geodetic_datum_of_1965\"))&&(t.datumCode=\"ire65\"),\"ch1903+\"===t.datumCode&&(t.datumCode=\"ch1903\"),~t.datumCode.indexOf(\"israel\")&&(t.datumCode=\"isr93\")),t.b&&!isFinite(t.b)&&(t.b=t.a);[[\"standard_parallel_1\",\"Standard_Parallel_1\"],[\"standard_parallel_2\",\"Standard_Parallel_2\"],[\"false_easting\",\"False_Easting\"],[\"false_northing\",\"False_Northing\"],[\"central_meridian\",\"Central_Meridian\"],[\"latitude_of_origin\",\"Latitude_Of_Origin\"],[\"latitude_of_origin\",\"Central_Parallel\"],[\"scale_factor\",\"Scale_Factor\"],[\"k0\",\"scale_factor\"],[\"latitude_of_center\",\"Latitude_Of_Center\"],[\"latitude_of_center\",\"Latitude_of_center\"],[\"lat0\",\"latitude_of_center\",n],[\"longitude_of_center\",\"Longitude_Of_Center\"],[\"longitude_of_center\",\"Longitude_of_center\"],[\"longc\",\"longitude_of_center\",n],[\"x0\",\"false_easting\",e],[\"y0\",\"false_northing\",e],[\"long0\",\"central_meridian\",n],[\"lat0\",\"latitude_of_origin\",n],[\"lat0\",\"standard_parallel_1\",n],[\"lat1\",\"standard_parallel_1\",n],[\"lat2\",\"standard_parallel_2\",n],[\"azimuth\",\"Azimuth\"],[\"alpha\",\"azimuth\",n],[\"srsCode\",\"name\"]].forEach(function(e){return i(t,e)}),t.long0||!t.longc||\"Albers_Conic_Equal_Area\"!==t.projName&&\"Lambert_Azimuthal_Equal_Area\"!==t.projName||(t.long0=t.longc),t.lat_ts||!t.lat1||\"Stereographic_South_Pole\"!==t.projName&&\"Polar Stereographic (variant B)\"!==t.projName||(t.lat0=n(t.lat1>0?90:-90),t.lat_ts=t.lat1);}function h(t){var e=this;if(2===arguments.length){var a=arguments[1];\"string\"==typeof a?\"+\"===a.charAt(0)?h[t]=mt(arguments[1]):h[t]=bt(arguments[1]):h[t]=a;}else if(1===arguments.length){if(Array.isArray(t))return t.map(function(t){Array.isArray(t)?h.apply(e,t):h(t);});if(\"string\"==typeof t){if(t in h)return h[t]}else \"EPSG\"in t?h[\"EPSG:\"+t.EPSG]=t:\"ESRI\"in t?h[\"ESRI:\"+t.ESRI]=t:\"IAU2000\"in t?h[\"IAU2000:\"+t.IAU2000]=t:console.log(t);return}}function u(t){return \"string\"==typeof t}function l(t){return t in h}function d(t){return St.some(function(e){return t.indexOf(e)>-1})}function c(e){var a=t(e,\"authority\");if(a){var r=t(a,\"epsg\");return r&&Nt.indexOf(r)>-1}}function m(e){var a=t(e,\"extension\");if(a)return t(a,\"proj4\")}function f(t){return \"+\"===t[0]}function p(t){if(!u(t))return t;if(l(t))return h[t];if(d(t)){var e=bt(t);if(c(e))return h[\"EPSG:3857\"];var a=m(e);return a?mt(a):e}return f(t)?mt(t):void 0}function _(t){return t}function M(t,e){var a=It.length;return t.names?(It[a]=t,t.names.forEach(function(t){Gt[t.toLowerCase()]=a;}),this):(console.log(e),!0)}function y(t,e,a,r){var s=t*t,i=e*e,n=(s-i)/s,o=0;return r?(s=(t*=1-n*(at+n*(rt+n*st)))*t,n=0):o=Math.sqrt(n),{es:n,e:o,ep2:(s-i)/i}}function g(e,a,r,s,i){if(!e){var n=t(Lt,s);n||(n=zt),e=n.a,a=n.b,r=n.rf;}return r&&!a&&(a=(1-1/r)*e),(0===r||Math.abs(e-a)<it)&&(i=!0,a=e),{a:e,b:a,rf:r,sphere:i}}function v(t,e,a,r,s,i){var n={};return n.datum_type=void 0===t||\"none\"===t?$:Y,e&&(n.datum_params=e.map(parseFloat),0===n.datum_params[0]&&0===n.datum_params[1]&&0===n.datum_params[2]||(n.datum_type=Z),n.datum_params.length>3&&(0===n.datum_params[3]&&0===n.datum_params[4]&&0===n.datum_params[5]&&0===n.datum_params[6]||(n.datum_type=K,n.datum_params[3]*=tt,n.datum_params[4]*=tt,n.datum_params[5]*=tt,n.datum_params[6]=n.datum_params[6]/1e6+1))),n.a=a,n.b=r,n.es=s,n.ep2=i,n}function Projection(e,a){if(!(this instanceof Projection))return new Projection(e);a=a||function(t){if(t)throw t};var r=p(e);if(\"object\"==typeof r){var s=Projection.projections.get(r.projName);if(s){if(r.datumCode&&\"none\"!==r.datumCode){var i=t(Rt,r.datumCode);i&&(r.datum_params=i.towgs84?i.towgs84.split(\",\"):null,r.ellps=i.ellipse,r.datumName=i.datumName?i.datumName:r.datumCode);}r.k0=r.k0||1,r.axis=r.axis||\"enu\",r.ellps=r.ellps||\"wgs84\";var n=g(r.a,r.b,r.rf,r.ellps,r.sphere),o=y(n.a,n.b,n.rf,r.R_A),h=r.datum||v(r.datumCode,r.datum_params,n.a,n.b,o.es,o.ep2);Et(this,r),Et(this,s),this.a=n.a,this.b=n.b,this.rf=n.rf,this.sphere=n.sphere,this.es=o.es,this.e=o.e,this.ep2=o.ep2,this.datum=h,this.init(),a(null,this);}else a(e);}else a(e);}function b(t,e){return t.datum_type===e.datum_type&&(!(t.a!==e.a||Math.abs(t.es-e.es)>5e-11)&&(t.datum_type===Z?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:t.datum_type!==K||t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6]))}function S(t,e,a){var r,s,i,n,o=t.x,h=t.y,u=t.z?t.z:0;if(h<-et&&h>-1.001*et)h=-et;else if(h>et&&h<1.001*et)h=et;else {if(h<-et)return {x:-1/0,y:-1/0,z:t.z};if(h>et)return {x:1/0,y:1/0,z:t.z}}return o>Math.PI&&(o-=2*Math.PI),s=Math.sin(h),n=Math.cos(h),i=s*s,r=a/Math.sqrt(1-e*i),{x:(r+u)*n*Math.cos(o),y:(r+u)*n*Math.sin(o),z:(r*(1-e)+u)*s}}function N(t,e,a,r){var s,i,n,o,h,u,l,d,c,m,f,p,_,M,y,g,v=t.x,b=t.y,S=t.z?t.z:0;if(s=Math.sqrt(v*v+b*b),i=Math.sqrt(v*v+b*b+S*S),s/a<1e-12){if(M=0,i/a<1e-12)return y=et,g=-r,{x:t.x,y:t.y,z:t.z}}else M=Math.atan2(b,v);n=S/i,d=(o=s/i)*(1-e)*(h=1/Math.sqrt(1-e*(2-e)*o*o)),c=n*h,_=0;do{_++,u=e*(l=a/Math.sqrt(1-e*c*c))/(l+(g=s*d+S*c-l*(1-e*c*c))),p=(f=n*(h=1/Math.sqrt(1-u*(2-u)*o*o)))*d-(m=o*(1-u)*h)*c,d=m,c=f;}while(p*p>1e-24&&_<30);return y=Math.atan(f/Math.abs(m)),{x:M,y:y,z:g}}function E(t,e,a){if(e===Z)return {x:t.x+a[0],y:t.y+a[1],z:t.z+a[2]};if(e===K){var r=a[0],s=a[1],i=a[2],n=a[3],o=a[4],h=a[5],u=a[6];return {x:u*(t.x-h*t.y+o*t.z)+r,y:u*(h*t.x+t.y-n*t.z)+s,z:u*(-o*t.x+n*t.y+t.z)+i}}}function w(t,e,a){if(e===Z)return {x:t.x-a[0],y:t.y-a[1],z:t.z-a[2]};if(e===K){var r=a[0],s=a[1],i=a[2],n=a[3],o=a[4],h=a[5],u=a[6],l=(t.x-r)/u,d=(t.y-s)/u,c=(t.z-i)/u;return {x:l+h*d-o*c,y:-h*l+d+n*c,z:o*l-n*d+c}}}function C(t){return t===Z||t===K}function x(t){if(\"function\"==typeof Number.isFinite){if(Number.isFinite(t))return;throw new TypeError(\"coordinates must be finite numbers\")}if(\"number\"!=typeof t||t!==t||!isFinite(t))throw new TypeError(\"coordinates must be finite numbers\")}function O(t,e){return (t.datum.datum_type===Z||t.datum.datum_type===K)&&\"WGS84\"!==e.datumCode||(e.datum.datum_type===Z||e.datum.datum_type===K)&&\"WGS84\"!==t.datumCode}function A(t,e,a){var r;return Array.isArray(a)&&(a=qt(a)),Ut(a),t.datum&&e.datum&&O(t,e)&&(a=A(t,r=new Projection(\"WGS84\"),a),t=r),\"enu\"!==t.axis&&(a=Dt(t,!1,a)),\"longlat\"===t.projName?a={x:a.x*nt,y:a.y*nt,z:a.z||0}:(t.to_meter&&(a={x:a.x*t.to_meter,y:a.y*t.to_meter,z:a.z||0}),a=t.inverse(a)),t.from_greenwich&&(a.x+=t.from_greenwich),a=Tt(t.datum,e.datum,a),e.from_greenwich&&(a={x:a.x-e.from_greenwich,y:a.y,z:a.z||0}),\"longlat\"===e.projName?a={x:a.x*ot,y:a.y*ot,z:a.z||0}:(a=e.forward(a),e.to_meter&&(a={x:a.x/e.to_meter,y:a.y/e.to_meter,z:a.z||0})),\"enu\"!==e.axis?Dt(e,!0,a):a}function P(t,e,a){var r,s,i;return Array.isArray(a)?(r=A(t,e,a)||{x:NaN,y:NaN},a.length>2?void 0!==t.name&&\"geocent\"===t.name||void 0!==e.name&&\"geocent\"===e.name?\"number\"==typeof r.z?[r.x,r.y,r.z].concat(a.splice(3)):[r.x,r.y,a[2]].concat(a.splice(3)):[r.x,r.y].concat(a.splice(2)):[r.x,r.y]):(s=A(t,e,a),2===(i=Object.keys(a)).length?s:(i.forEach(function(r){if(void 0!==t.name&&\"geocent\"===t.name||void 0!==e.name&&\"geocent\"===e.name){if(\"x\"===r||\"y\"===r||\"z\"===r)return}else if(\"x\"===r||\"y\"===r)return;s[r]=a[r];}),s))}function G(t){return t instanceof Projection?t:t.oProj?t.oProj:Projection(t)}function I(t,e,a){t=G(t);var r,s=!1;return void 0===e?(e=t,t=jt,s=!0):(void 0!==e.x||Array.isArray(e))&&(a=e,e=t,t=jt,s=!0),e=G(e),a?P(t,e,a):(r={forward:function(a){return P(t,e,a)},inverse:function(a){return P(e,t,a)}},s&&(r.oProj=e),r)}function k(t,e){return e=e||5,U(T({lat:t[1],lon:t[0]}),e)}function L(t){var e=D(Q(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function z(t){return t*(Math.PI/180)}function R(t){return t/Math.PI*180}function T(t){var e,a,r,s,i,n,o,h=t.lat,u=t.lon,l=6378137,d=z(h),c=z(u);o=Math.floor((u+180)/6)+1,180===u&&(o=60),h>=56&&h<64&&u>=3&&u<12&&(o=32),h>=72&&h<84&&(u>=0&&u<9?o=31:u>=9&&u<21?o=33:u>=21&&u<33?o=35:u>=33&&u<42&&(o=37)),n=z(6*(o-1)-180+3),e=l/Math.sqrt(1-.00669438*Math.sin(d)*Math.sin(d)),a=Math.tan(d)*Math.tan(d),r=.006739496752268451*Math.cos(d)*Math.cos(d);var m=.9996*e*((s=Math.cos(d)*(c-n))+(1-a+r)*s*s*s/6+(5-18*a+a*a+72*r-.39089081163157013)*s*s*s*s*s/120)+5e5,f=.9996*((i=l*(.9983242984503243*d-.002514607064228144*Math.sin(2*d)+2639046602129982e-21*Math.sin(4*d)-3.418046101696858e-9*Math.sin(6*d)))+e*Math.tan(d)*(s*s/2+(5-a+9*r+4*r*r)*s*s*s*s/24+(61-58*a+a*a+600*r-2.2240339282485886)*s*s*s*s*s*s/720));return h<0&&(f+=1e7),{northing:Math.round(f),easting:Math.round(m),zoneNumber:o,zoneLetter:q(h)}}function D(t){var e=t.northing,a=t.easting,r=t.zoneLetter,s=t.zoneNumber;if(s<0||s>60)return null;var i,n,o,h,u,l,d,c,m=6378137,f=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),p=a-5e5,_=e;r<\"N\"&&(_-=1e7),l=6*(s-1)-180+3,c=(d=_/.9996/6367449.145945056)+(3*f/2-27*f*f*f/32)*Math.sin(2*d)+(21*f*f/16-55*f*f*f*f/32)*Math.sin(4*d)+151*f*f*f/96*Math.sin(6*d),i=m/Math.sqrt(1-.00669438*Math.sin(c)*Math.sin(c)),n=Math.tan(c)*Math.tan(c),o=.006739496752268451*Math.cos(c)*Math.cos(c),h=.99330562*m/Math.pow(1-.00669438*Math.sin(c)*Math.sin(c),1.5),u=p/(.9996*i);var M=c-i*Math.tan(c)/h*(u*u/2-(5+3*n+10*o-4*o*o-.06065547077041606)*u*u*u*u/24+(61+90*n+298*o+45*n*n-1.6983531815716497-3*o*o)*u*u*u*u*u*u/720);M=R(M);var y=(u-(1+2*n+o)*u*u*u/6+(5-2*o+28*n-3*o*o+.05391597401814761+24*n*n)*u*u*u*u*u/120)/Math.cos(c);y=l+R(y);var g;if(t.accuracy){var v=D({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});g={top:v.lat,right:v.lon,bottom:M,left:y};}else g={lat:M,lon:y};return g}function q(t){var e=\"Z\";return 84>=t&&t>=72?e=\"X\":72>t&&t>=64?e=\"W\":64>t&&t>=56?e=\"V\":56>t&&t>=48?e=\"U\":48>t&&t>=40?e=\"T\":40>t&&t>=32?e=\"S\":32>t&&t>=24?e=\"R\":24>t&&t>=16?e=\"Q\":16>t&&t>=8?e=\"P\":8>t&&t>=0?e=\"N\":0>t&&t>=-8?e=\"M\":-8>t&&t>=-16?e=\"L\":-16>t&&t>=-24?e=\"K\":-24>t&&t>=-32?e=\"J\":-32>t&&t>=-40?e=\"H\":-40>t&&t>=-48?e=\"G\":-48>t&&t>=-56?e=\"F\":-56>t&&t>=-64?e=\"E\":-64>t&&t>=-72?e=\"D\":-72>t&&t>=-80&&(e=\"C\"),e}function U(t,e){var a=\"00000\"+t.easting,r=\"00000\"+t.northing;return t.zoneNumber+t.zoneLetter+j(t.easting,t.northing,t.zoneNumber)+a.substr(a.length-5,e)+r.substr(r.length-5,e)}function j(t,e,a){var r=F(a);return W(Math.floor(t/1e5),Math.floor(e/1e5)%20,r)}function F(t){var e=t%Ft;return 0===e&&(e=Ft),e}function W(t,e,a){var r=a-1,s=Wt.charCodeAt(r),i=Qt.charCodeAt(r),n=s+t-1,o=i+e,h=!1;return n>Xt&&(n=n-Xt+Bt-1,h=!0),(n===Jt||s<Jt&&n>Jt||(n>Jt||s<Jt)&&h)&&n++,(n===Ht||s<Ht&&n>Ht||(n>Ht||s<Ht)&&h)&&++n===Jt&&n++,n>Xt&&(n=n-Xt+Bt-1),o>Vt?(o=o-Vt+Bt-1,h=!0):h=!1,(o===Jt||i<Jt&&o>Jt||(o>Jt||i<Jt)&&h)&&o++,(o===Ht||i<Ht&&o>Ht||(o>Ht||i<Ht)&&h)&&++o===Jt&&o++,o>Vt&&(o=o-Vt+Bt-1),String.fromCharCode(n)+String.fromCharCode(o)}function Q(t){if(t&&0===t.length)throw \"MGRSPoint coverting from nothing\";for(var e,a=t.length,r=null,s=\"\",i=0;!/[A-Z]/.test(e=t.charAt(i));){if(i>=2)throw \"MGRSPoint bad conversion from: \"+t;s+=e,i++;}var n=parseInt(s,10);if(0===i||i+3>a)throw \"MGRSPoint bad conversion from: \"+t;var o=t.charAt(i++);if(o<=\"A\"||\"B\"===o||\"Y\"===o||o>=\"Z\"||\"I\"===o||\"O\"===o)throw \"MGRSPoint zone letter \"+o+\" not handled: \"+t;r=t.substring(i,i+=2);for(var h=F(n),u=B(r.charAt(0),h),l=J(r.charAt(1),h);l<H(o);)l+=2e6;var d=a-i;if(d%2!=0)throw \"MGRSPoint has to have an even number \\nof digits after the zone letter and two 100km letters - front \\nhalf for easting meters, second half for \\nnorthing meters\"+t;var c,m,f,p,_,M=d/2,y=0,g=0;return M>0&&(c=1e5/Math.pow(10,M),m=t.substring(i,i+M),y=parseFloat(m)*c,f=t.substring(i+M),g=parseFloat(f)*c),p=y+u,_=g+l,{easting:p,northing:_,zoneLetter:o,zoneNumber:n,accuracy:c}}function B(t,e){for(var a=Wt.charCodeAt(e-1),r=1e5,s=!1;a!==t.charCodeAt(0);){if(++a===Jt&&a++,a===Ht&&a++,a>Xt){if(s)throw \"Bad character: \"+t;a=Bt,s=!0;}r+=1e5;}return r}function J(t,e){if(t>\"V\")throw \"MGRSPoint given invalid Northing \"+t;for(var a=Qt.charCodeAt(e-1),r=0,s=!1;a!==t.charCodeAt(0);){if(++a===Jt&&a++,a===Ht&&a++,a>Vt){if(s)throw \"Bad character: \"+t;a=Bt,s=!0;}r+=1e5;}return r}function H(t){var e;switch(t){case\"C\":e=11e5;break;case\"D\":e=2e6;break;case\"E\":e=28e5;break;case\"F\":e=37e5;break;case\"G\":e=46e5;break;case\"H\":e=55e5;break;case\"J\":e=64e5;break;case\"K\":e=73e5;break;case\"L\":e=82e5;break;case\"M\":e=91e5;break;case\"N\":e=0;break;case\"P\":e=8e5;break;case\"Q\":e=17e5;break;case\"R\":e=26e5;break;case\"S\":e=35e5;break;case\"T\":e=44e5;break;case\"U\":e=53e5;break;case\"V\":e=62e5;break;case\"W\":e=7e6;break;case\"X\":e=79e5;break;default:e=-1;}if(e>=0)return e;throw \"Invalid zone letter: \"+t}function Point(t,e,a){if(!(this instanceof Point))return new Point(t,e,a);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if(\"object\"==typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if(\"string\"==typeof t&&void 0===e){var r=t.split(\",\");this.x=parseFloat(r[0],10),this.y=parseFloat(r[1],10),this.z=parseFloat(r[2],10)||0;}else this.x=t,this.y=e,this.z=a||0;console.warn(\"proj4.Point will be removed in version 3, use proj4.toPoint\");}function V(t){var e,a=[];return a[0]=t*Yt,e=t*t,a[0]+=e*$t,a[1]=e*ee,e*=t,a[0]+=e*te,a[1]+=e*ae,a[2]=e*re,a}function X(t,e){var a=t+t;return t+e[0]*Math.sin(a)+e[1]*Math.sin(a+a)+e[2]*Math.sin(a+a+a)}var Z=1,K=2,Y=4,$=5,tt=484813681109536e-20,et=Math.PI/2,at=.16666666666666666,rt=.04722222222222222,st=.022156084656084655,it=1e-10,nt=.017453292519943295,ot=57.29577951308232,ht=Math.PI/4,ut=2*Math.PI,lt={};lt.greenwich=0,lt.lisbon=-9.131906111111,lt.paris=2.337229166667,lt.bogota=-74.080916666667,lt.madrid=-3.687938888889,lt.rome=12.452333333333,lt.bern=7.439583333333,lt.jakarta=106.807719444444,lt.ferro=-17.666666666667,lt.brussels=4.367975,lt.stockholm=18.058277777778,lt.athens=23.7163375,lt.oslo=10.722916666667;var dt={ft:{to_meter:.3048},\"us-ft\":{to_meter:1200/3937}},ct=/[\\s_\\-\\/\\(\\)]/g,mt=function(e){var a,r,s,i={},n=e.split(\"+\").map(function(t){return t.trim()}).filter(function(t){return t}).reduce(function(t,e){var a=e.split(\"=\");return a.push(!0),t[a[0].toLowerCase()]=a[1],t},{}),o={proj:\"projName\",datum:\"datumCode\",rf:function(t){i.rf=parseFloat(t);},lat_0:function(t){i.lat0=t*nt;},lat_1:function(t){i.lat1=t*nt;},lat_2:function(t){i.lat2=t*nt;},lat_ts:function(t){i.lat_ts=t*nt;},lon_0:function(t){i.long0=t*nt;},lon_1:function(t){i.long1=t*nt;},lon_2:function(t){i.long2=t*nt;},alpha:function(t){i.alpha=parseFloat(t)*nt;},lonc:function(t){i.longc=t*nt;},x_0:function(t){i.x0=parseFloat(t);},y_0:function(t){i.y0=parseFloat(t);},k_0:function(t){i.k0=parseFloat(t);},k:function(t){i.k0=parseFloat(t);},a:function(t){i.a=parseFloat(t);},b:function(t){i.b=parseFloat(t);},r_a:function(){i.R_A=!0;},zone:function(t){i.zone=parseInt(t,10);},south:function(){i.utmSouth=!0;},towgs84:function(t){i.datum_params=t.split(\",\").map(function(t){return parseFloat(t)});},to_meter:function(t){i.to_meter=parseFloat(t);},units:function(e){i.units=e;var a=t(dt,e);a&&(i.to_meter=a.to_meter);},from_greenwich:function(t){i.from_greenwich=t*nt;},pm:function(e){var a=t(lt,e);i.from_greenwich=(a||parseFloat(e))*nt;},nadgrids:function(t){\"@null\"===t?i.datumCode=\"none\":i.nadgrids=t;},axis:function(t){3===t.length&&-1!==\"ewnsud\".indexOf(t.substr(0,1))&&-1!==\"ewnsud\".indexOf(t.substr(1,1))&&-1!==\"ewnsud\".indexOf(t.substr(2,1))&&(i.axis=t);}};for(a in n)r=n[a],a in o?\"function\"==typeof(s=o[a])?s(r):i[s]=r:i[a]=r;return \"string\"==typeof i.datumCode&&\"WGS84\"!==i.datumCode&&(i.datumCode=i.datumCode.toLowerCase()),i},ft=1,pt=/\\s/,_t=/[A-Za-z]/,Mt=/[A-Za-z84]/,yt=/[,\\]]/,gt=/[\\d\\.E\\-\\+]/;e.prototype.readCharicter=function(){var t=this.text[this.place++];if(4!==this.state)for(;pt.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++];}switch(this.state){case ft:return this.neutral(t);case 2:return this.keyword(t);case 4:return this.quoted(t);case 5:return this.afterquote(t);case 3:return this.number(t);case-1:return}},e.prototype.afterquote=function(t){if('\"'===t)return this.word+='\"',void(this.state=4);if(yt.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error(\"havn't handled \\\"\"+t+'\" in afterquote yet, index '+this.place)},e.prototype.afterItem=function(t){return \",\"===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=ft)):\"]\"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=ft,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},e.prototype.number=function(t){if(!gt.test(t)){if(yt.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error(\"havn't handled \\\"\"+t+'\" in number yet, index '+this.place)}this.word+=t;},e.prototype.quoted=function(t){'\"'!==t?this.word+=t:this.state=5;},e.prototype.keyword=function(t){if(Mt.test(t))this.word+=t;else {if(\"[\"===t){var e=[];return e.push(this.word),this.level++,null===this.root?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,void(this.state=ft)}if(!yt.test(t))throw new Error(\"havn't handled \\\"\"+t+'\" in keyword yet, index '+this.place);this.afterItem(t);}},e.prototype.neutral=function(t){if(_t.test(t))return this.word=t,void(this.state=2);if('\"'===t)return this.word=\"\",void(this.state=4);if(gt.test(t))return this.word=t,void(this.state=3);{if(!yt.test(t))throw new Error(\"havn't handled \\\"\"+t+'\" in neutral yet, index '+this.place);this.afterItem(t);}},e.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string \"'+this.text+'\". State is '+this.state)};var vt=.017453292519943295,bt=function(t){var e=a(t),r=e.shift(),i=e.shift();e.unshift([\"name\",i]),e.unshift([\"type\",r]);var n={};return s(e,n),o(n),n};!function(t){t(\"EPSG:4326\",\"+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees\"),t(\"EPSG:4269\",\"+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees\"),t(\"EPSG:3857\",\"+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs\"),t.WGS84=t[\"EPSG:4326\"],t[\"EPSG:3785\"]=t[\"EPSG:3857\"],t.GOOGLE=t[\"EPSG:3857\"],t[\"EPSG:900913\"]=t[\"EPSG:3857\"],t[\"EPSG:102113\"]=t[\"EPSG:3857\"];}(h);var St=[\"PROJECTEDCRS\",\"PROJCRS\",\"GEOGCS\",\"GEOCCS\",\"PROJCS\",\"LOCAL_CS\",\"GEODCRS\",\"GEODETICCRS\",\"GEODETICDATUM\",\"ENGCRS\",\"ENGINEERINGCRS\"],Nt=[\"3857\",\"900913\",\"3785\",\"102113\"],Et=function(t,e){t=t||{};var a,r;if(!e)return t;for(r in e)void 0!==(a=e[r])&&(t[r]=a);return t},wt=function(t,e,a){var r=t*e;return a/Math.sqrt(1-r*r)},Ct=function(t){return t<0?-1:1},xt=function(t){return Math.abs(t)<=3.14159265359?t:t-Ct(t)*ut},Ot=function(t,e,a){var r=t*a,s=.5*t;return r=Math.pow((1-r)/(1+r),s),Math.tan(.5*(et-e))/r},At=function(t,e){for(var a,r,s=.5*t,i=et-2*Math.atan(e),n=0;n<=15;n++)if(a=t*Math.sin(i),r=et-2*Math.atan(e*Math.pow((1-a)/(1+a),s))-i,i+=r,Math.abs(r)<=1e-10)return i;return -9999},Pt=[{init:function(){var t=this.b/this.a;this.es=1-t*t,\"x0\"in this||(this.x0=0),\"y0\"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=wt(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1);},forward:function(t){var e=t.x,a=t.y;if(a*ot>90&&a*ot<-90&&e*ot>180&&e*ot<-180)return null;var r,s;if(Math.abs(Math.abs(a)-et)<=it)return null;if(this.sphere)r=this.x0+this.a*this.k0*xt(e-this.long0),s=this.y0+this.a*this.k0*Math.log(Math.tan(ht+.5*a));else {var i=Math.sin(a),n=Ot(this.e,a,i);r=this.x0+this.a*this.k0*xt(e-this.long0),s=this.y0-this.a*this.k0*Math.log(n);}return t.x=r,t.y=s,t},inverse:function(t){var e,a,r=t.x-this.x0,s=t.y-this.y0;if(this.sphere)a=et-2*Math.atan(Math.exp(-s/(this.a*this.k0)));else {var i=Math.exp(-s/(this.a*this.k0));if(-9999===(a=At(this.e,i)))return null}return e=xt(this.long0+r/(this.a*this.k0)),t.x=e,t.y=a,t},names:[\"Mercator\",\"Popular Visualisation Pseudo Mercator\",\"Mercator_1SP\",\"Mercator_Auxiliary_Sphere\",\"merc\"]},{init:function(){},forward:_,inverse:_,names:[\"longlat\",\"identity\"]}],Gt={},It=[],kt={start:function(){Pt.forEach(M);},add:M,get:function(t){if(!t)return !1;var e=t.toLowerCase();return void 0!==Gt[e]&&It[Gt[e]]?It[Gt[e]]:void 0}},Lt={};Lt.MERIT={a:6378137,rf:298.257,ellipseName:\"MERIT 1983\"},Lt.SGS85={a:6378136,rf:298.257,ellipseName:\"Soviet Geodetic System 85\"},Lt.GRS80={a:6378137,rf:298.257222101,ellipseName:\"GRS 1980(IUGG, 1980)\"},Lt.IAU76={a:6378140,rf:298.257,ellipseName:\"IAU 1976\"},Lt.airy={a:6377563.396,b:6356256.91,ellipseName:\"Airy 1830\"},Lt.APL4={a:6378137,rf:298.25,ellipseName:\"Appl. Physics. 1965\"},Lt.NWL9D={a:6378145,rf:298.25,ellipseName:\"Naval Weapons Lab., 1965\"},Lt.mod_airy={a:6377340.189,b:6356034.446,ellipseName:\"Modified Airy\"},Lt.andrae={a:6377104.43,rf:300,ellipseName:\"Andrae 1876 (Den., Iclnd.)\"},Lt.aust_SA={a:6378160,rf:298.25,ellipseName:\"Australian Natl & S. Amer. 1969\"},Lt.GRS67={a:6378160,rf:298.247167427,ellipseName:\"GRS 67(IUGG 1967)\"},Lt.bessel={a:6377397.155,rf:299.1528128,ellipseName:\"Bessel 1841\"},Lt.bess_nam={a:6377483.865,rf:299.1528128,ellipseName:\"Bessel 1841 (Namibia)\"},Lt.clrk66={a:6378206.4,b:6356583.8,ellipseName:\"Clarke 1866\"},Lt.clrk80={a:6378249.145,rf:293.4663,ellipseName:\"Clarke 1880 mod.\"},Lt.clrk58={a:6378293.645208759,rf:294.2606763692654,ellipseName:\"Clarke 1858\"},Lt.CPM={a:6375738.7,rf:334.29,ellipseName:\"Comm. des Poids et Mesures 1799\"},Lt.delmbr={a:6376428,rf:311.5,ellipseName:\"Delambre 1810 (Belgium)\"},Lt.engelis={a:6378136.05,rf:298.2566,ellipseName:\"Engelis 1985\"},Lt.evrst30={a:6377276.345,rf:300.8017,ellipseName:\"Everest 1830\"},Lt.evrst48={a:6377304.063,rf:300.8017,ellipseName:\"Everest 1948\"},Lt.evrst56={a:6377301.243,rf:300.8017,ellipseName:\"Everest 1956\"},Lt.evrst69={a:6377295.664,rf:300.8017,ellipseName:\"Everest 1969\"},Lt.evrstSS={a:6377298.556,rf:300.8017,ellipseName:\"Everest (Sabah & Sarawak)\"},Lt.fschr60={a:6378166,rf:298.3,ellipseName:\"Fischer (Mercury Datum) 1960\"},Lt.fschr60m={a:6378155,rf:298.3,ellipseName:\"Fischer 1960\"},Lt.fschr68={a:6378150,rf:298.3,ellipseName:\"Fischer 1968\"},Lt.helmert={a:6378200,rf:298.3,ellipseName:\"Helmert 1906\"},Lt.hough={a:6378270,rf:297,ellipseName:\"Hough\"},Lt.intl={a:6378388,rf:297,ellipseName:\"International 1909 (Hayford)\"},Lt.kaula={a:6378163,rf:298.24,ellipseName:\"Kaula 1961\"},Lt.lerch={a:6378139,rf:298.257,ellipseName:\"Lerch 1979\"},Lt.mprts={a:6397300,rf:191,ellipseName:\"Maupertius 1738\"},Lt.new_intl={a:6378157.5,b:6356772.2,ellipseName:\"New International 1967\"},Lt.plessis={a:6376523,rf:6355863,ellipseName:\"Plessis 1817 (France)\"},Lt.krass={a:6378245,rf:298.3,ellipseName:\"Krassovsky, 1942\"},Lt.SEasia={a:6378155,b:6356773.3205,ellipseName:\"Southeast Asia\"},Lt.walbeck={a:6376896,b:6355834.8467,ellipseName:\"Walbeck\"},Lt.WGS60={a:6378165,rf:298.3,ellipseName:\"WGS 60\"},Lt.WGS66={a:6378145,rf:298.25,ellipseName:\"WGS 66\"},Lt.WGS7={a:6378135,rf:298.26,ellipseName:\"WGS 72\"};var zt=Lt.WGS84={a:6378137,rf:298.257223563,ellipseName:\"WGS 84\"};Lt.sphere={a:6370997,b:6370997,ellipseName:\"Normal Sphere (r=6370997)\"};var Rt={};Rt.wgs84={towgs84:\"0,0,0\",ellipse:\"WGS84\",datumName:\"WGS84\"},Rt.ch1903={towgs84:\"674.374,15.056,405.346\",ellipse:\"bessel\",datumName:\"swiss\"},Rt.ggrs87={towgs84:\"-199.87,74.79,246.62\",ellipse:\"GRS80\",datumName:\"Greek_Geodetic_Reference_System_1987\"},Rt.nad83={towgs84:\"0,0,0\",ellipse:\"GRS80\",datumName:\"North_American_Datum_1983\"},Rt.nad27={nadgrids:\"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat\",ellipse:\"clrk66\",datumName:\"North_American_Datum_1927\"},Rt.potsdam={towgs84:\"606.0,23.0,413.0\",ellipse:\"bessel\",datumName:\"Potsdam Rauenberg 1950 DHDN\"},Rt.carthage={towgs84:\"-263.0,6.0,431.0\",ellipse:\"clark80\",datumName:\"Carthage 1934 Tunisia\"},Rt.hermannskogel={towgs84:\"653.0,-212.0,449.0\",ellipse:\"bessel\",datumName:\"Hermannskogel\"},Rt.osni52={towgs84:\"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15\",ellipse:\"airy\",datumName:\"Irish National\"},Rt.ire65={towgs84:\"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15\",ellipse:\"mod_airy\",datumName:\"Ireland 1965\"},Rt.rassadiran={towgs84:\"-133.63,-157.5,-158.62\",ellipse:\"intl\",datumName:\"Rassadiran\"},Rt.nzgd49={towgs84:\"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993\",ellipse:\"intl\",datumName:\"New Zealand Geodetic Datum 1949\"},Rt.osgb36={towgs84:\"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894\",ellipse:\"airy\",datumName:\"Airy 1830\"},Rt.s_jtsk={towgs84:\"589,76,480\",ellipse:\"bessel\",datumName:\"S-JTSK (Ferro)\"},Rt.beduaram={towgs84:\"-106,-87,188\",ellipse:\"clrk80\",datumName:\"Beduaram\"},Rt.gunung_segara={towgs84:\"-403,684,41\",ellipse:\"bessel\",datumName:\"Gunung Segara Jakarta\"},Rt.rnb72={towgs84:\"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1\",ellipse:\"intl\",datumName:\"Reseau National Belge 1972\"},Projection.projections=kt,Projection.projections.start();var Tt=function(t,e,a){return b(t,e)?a:t.datum_type===$||e.datum_type===$?a:t.es!==e.es||t.a!==e.a||C(t.datum_type)||C(e.datum_type)?(a=S(a,t.es,t.a),C(t.datum_type)&&(a=E(a,t.datum_type,t.datum_params)),C(e.datum_type)&&(a=w(a,e.datum_type,e.datum_params)),N(a,e.es,e.a,e.b)):a},Dt=function(t,e,a){var r,s,i,n=a.x,o=a.y,h=a.z||0,u={};for(i=0;i<3;i++)if(!e||2!==i||void 0!==a.z)switch(0===i?(r=n,s=-1!==\"ew\".indexOf(t.axis[i])?\"x\":\"y\"):1===i?(r=o,s=-1!==\"ns\".indexOf(t.axis[i])?\"y\":\"x\"):(r=h,s=\"z\"),t.axis[i]){case\"e\":case\"w\":case\"n\":case\"s\":u[s]=r;break;case\"u\":void 0!==a[s]&&(u.z=r);break;case\"d\":void 0!==a[s]&&(u.z=-r);break;default:return null}return u},qt=function(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e},Ut=function(t){x(t.x),x(t.y);},jt=Projection(\"WGS84\"),Ft=6,Wt=\"AJSAJS\",Qt=\"AFAFAF\",Bt=65,Jt=73,Ht=79,Vt=86,Xt=90,Zt={forward:k,inverse:function(t){var e=D(Q(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]},toPoint:L};Point.fromMGRS=function(t){return new Point(L(t))},Point.prototype.toMGRS=function(t){return k([this.x,this.y],t)};var Kt=function(t,e){var a;return t>1e-7?(a=t*e,(1-t*t)*(e/(1-a*a)-.5/t*Math.log((1-a)/(1+a)))):2*e},Yt=.3333333333333333,$t=.17222222222222222,te=.10257936507936508,ee=.06388888888888888,ae=.0664021164021164,re=.016415012942191543,se={init:function(){var t=Math.abs(this.lat0);if(Math.abs(t-et)<it?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(t)<it?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var e;switch(this.qp=Kt(this.e,1),this.mmf=.5/(1-this.es),this.apa=V(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=Kt(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0));},forward:function(t){var e,a,r,s,i,n,o,h,u,l,d=t.x,c=t.y;if(d=xt(d-this.long0),this.sphere){if(i=Math.sin(c),l=Math.cos(c),r=Math.cos(d),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((a=this.mode===this.EQUIT?1+l*r:1+this.sinph0*i+this.cosph0*l*r)<=it)return null;e=(a=Math.sqrt(2/a))*l*Math.sin(d),a*=this.mode===this.EQUIT?i:this.cosph0*i-this.sinph0*l*r;}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),Math.abs(c+this.phi0)<it)return null;a=ht-.5*c,e=(a=2*(this.mode===this.S_POLE?Math.cos(a):Math.sin(a)))*Math.sin(d),a*=r;}}else {switch(o=0,h=0,u=0,r=Math.cos(d),s=Math.sin(d),i=Math.sin(c),n=Kt(this.e,i),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(o=n/this.qp,h=Math.sqrt(1-o*o)),this.mode){case this.OBLIQ:u=1+this.sinb1*o+this.cosb1*h*r;break;case this.EQUIT:u=1+h*r;break;case this.N_POLE:u=et+c,n=this.qp-n;break;case this.S_POLE:u=c-et,n=this.qp+n;}if(Math.abs(u)<it)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:u=Math.sqrt(2/u),a=this.mode===this.OBLIQ?this.ymf*u*(this.cosb1*o-this.sinb1*h*r):(u=Math.sqrt(2/(1+h*r)))*o*this.ymf,e=this.xmf*u*h*s;break;case this.N_POLE:case this.S_POLE:n>=0?(e=(u=Math.sqrt(n))*s,a=r*(this.mode===this.S_POLE?u:-u)):e=a=0;}}return t.x=this.a*e+this.x0,t.y=this.a*a+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,a,r,s,i,n,o,h=t.x/this.a,u=t.y/this.a;if(this.sphere){var l,d=0,c=0;if(l=Math.sqrt(h*h+u*u),(a=.5*l)>1)return null;switch(a=2*Math.asin(a),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(c=Math.sin(a),d=Math.cos(a)),this.mode){case this.EQUIT:a=Math.abs(l)<=it?0:Math.asin(u*c/l),h*=c,u=d*l;break;case this.OBLIQ:a=Math.abs(l)<=it?this.phi0:Math.asin(d*this.sinph0+u*c*this.cosph0/l),h*=c*this.cosph0,u=(d-Math.sin(a)*this.sinph0)*l;break;case this.N_POLE:u=-u,a=et-a;break;case this.S_POLE:a-=et;}e=0!==u||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(h,u):0;}else {if(o=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(h/=this.dd,u*=this.dd,(n=Math.sqrt(h*h+u*u))<it)return t.x=0,t.y=this.phi0,t;s=2*Math.asin(.5*n/this.rq),r=Math.cos(s),h*=s=Math.sin(s),this.mode===this.OBLIQ?(o=r*this.sinb1+u*s*this.cosb1/n,i=this.qp*o,u=n*this.cosb1*r-u*this.sinb1*s):(o=u*s/n,i=this.qp*o,u=n*r);}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(u=-u),!(i=h*h+u*u))return t.x=0,t.y=this.phi0,t;o=1-i/this.qp,this.mode===this.S_POLE&&(o=-o);}e=Math.atan2(h,u),a=X(Math.asin(o),this.apa);}return t.x=xt(this.long0+e),t.y=a,t},names:[\"Lambert Azimuthal Equal Area\",\"Lambert_Azimuthal_Equal_Area\",\"laea\"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4},ie=function(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)},ne={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0);},forward:function(t){var e,a,r,s,i,n,o,h=t.x,u=t.y;return r=xt(h-this.long0),e=Math.sin(u),a=Math.cos(u),s=Math.cos(r),((i=this.sin_p14*e+this.cos_p14*a*s)>0||Math.abs(i)<=it)&&(n=1*this.a*a*Math.sin(r),o=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*a*s)),t.x=n,t.y=o,t},inverse:function(t){var e,a,r,s,i,n,o;return t.x-=this.x0,t.y-=this.y0,e=Math.sqrt(t.x*t.x+t.y*t.y),a=ie(e/this.a),r=Math.sin(a),s=Math.cos(a),n=this.long0,Math.abs(e)<=it?(o=this.lat0,t.x=n,t.y=o,t):(o=ie(s*this.sin_p14+t.y*r*this.cos_p14/e),i=Math.abs(this.lat0)-et,Math.abs(i)<=it?(n=xt(this.lat0>=0?this.long0+Math.atan2(t.x,-t.y):this.long0-Math.atan2(-t.x,t.y)),t.x=n,t.y=o,t):(n=xt(this.long0+Math.atan2(t.x*r,e*this.cos_p14*s-t.y*this.sin_p14*r)),t.x=n,t.y=o,t))},names:[\"ortho\"]};return I.defaultDatum=\"WGS84\",I.Proj=Projection,I.WGS84=new I.Proj(\"WGS84\"),I.Point=Point,I.toPoint=qt,I.defs=h,I.transform=A,I.mgrs=Zt,I.version=\"2.6.2-alpha\",function(proj4){proj4.Proj.projections.add(se),proj4.Proj.projections.add(ne);}(I),I});\n});\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nvar spacing = 0.05;\n\nvar ApiUtils = {\n  snap: function ( n ) {\n    return Math.round( n / spacing ) * spacing;\n  },\n  datafileForLocation: function ( lon, lat ) {\n    lon = ApiUtils.snap( lon );\n    lat = ApiUtils.snap( lat );\n\n    // Calculate NS and EW\n    var ns = lat > 0 ? 'N' : 'S';\n    var ew = lon > 0 ? 'E' : 'W';\n    lon = Math.abs( lon );\n    lat = Math.abs( lat );\n\n    // Display same number of decimal places as spacing\n    var decimalPlaces = spacing.toPrecision().split( '.' )[ 1 ];\n    decimalPlaces = decimalPlaces ? decimalPlaces.length : 0;\n    lon = lon.toFixed( decimalPlaces );\n    lat = lat.toFixed( decimalPlaces );\n\n    // Construct name of datafile\n    return ns + lat + ew + lon;\n  }\n};\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\n// Configure useful projections\n// Use http://spatialreference.org/ref/epsg/24817/proj4js/ to look up\n// proj4.js was built using: node_modules/.bin/grunt build:laea,ortho\nproj4.defs( [\n  [ 'EPSG:3035', '+proj=laea +lat_0=52 +lon_0=10 +x_0=4321000 +y_0=3210000 +ellps=GRS80 +units=m +no_defs' ],\n] );\n\nfunction GeoprojectStore() {\n  this.projection = null;\n  this.location = null;\n  this.globalOffset = new THREE.Vector2();\n  this.sceneScale = 1;\n\n  this.bindListeners( {\n    setCurrentPlace: UserActions.setCurrentPlace\n  } );\n\n  this.exportPublicMethods( {\n    positionToTileFraction: this.positionToTileFraction.bind( this ),\n  } );\n}\n\nGeoprojectStore.prototype.setCurrentPlace = function ( place ) {\n  this.location = [ place.longitude, place.latitude ];\n  this.projection = 'EPSG:3857';\n\n  // Setup projectors\n  const lon = ApiUtils.snap( this.location[ 0 ] );\n  const lat = ApiUtils.snap( this.location[ 1 ] );\n  geoproject.projector = proj4( this.projection );\n  geoproject.center = geoproject.project( [ lon, lat ], true );\n\n  // For testing new data create temporary projector for 3035\n  // TODO remove this once we don't use 3035 data\n  geoproject.projector3035 = proj4( 'EPSG:3035' );\n  var projected3035 = geoproject.projector3035.forward( [ lon, lat ] );\n  geoproject.center3035 = { x: projected3035[ 0 ], y: projected3035[ 1 ] };\n\n  // To make the heights match the projection, we need to obtain the\n  // scene scale\n  this.sceneScale = geoproject.calculateSceneScale( lon, lat );\n\n  // Re-center our THREE Scene coordinate system such that it is 0, 0\n  // at the location of the place\n  this.globalOffset = geoproject.calculateGlobalOffset( lon, lat );\n};\n\nGeoprojectStore.prototype.positionToTileFraction = function ( position, z ) {\n  const p = position.clone();\n  p.x -= this.globalOffset.x;\n  p.y += this.globalOffset.y;\n  p.divideScalar( this.sceneScale * Math.pow( 2, 15 - z ) );\n  return [ p.x, p.y, z ];\n};\n\nGeoprojectStore.displayName = 'GeoprojectStore';\nvar GeoprojectStore$1 = alt.createStore( GeoprojectStore );\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nfunction AppStore() {\n  this.appContainer = null;\n  this.datasource = {};\n  this.fatalError = false;\n  this.initialized = false;\n  this.resourceUrl = null;\n  this.bindListeners( {\n    configureElevationDatasource: ConfigActions.configureElevationDatasource,\n    configureImageryDatasource: ConfigActions.configureImageryDatasource,\n    setAppContainer: ConfigActions.setAppContainer,\n    setFatalError: RenderActions.fatalError,\n    setResourceUrl: ConfigActions.setResourceUrl\n  } );\n}\n\nAppStore.prototype.checkInitialized = function () {\n  this.initialized = ( this.appContainer !== null ) &&\n                     ( this.resourceUrl !== null );\n};\n\nAppStore.prototype.configureElevationDatasource = function ( elevation ) {\n  this.datasource.elevation = elevation;\n};\n\nAppStore.prototype.configureImageryDatasource = function ( imagery ) {\n  this.datasource.imagery = imagery;\n};\n\nAppStore.prototype.setFatalError = function () {\n  this.fatalError = true;\n};\n\nAppStore.prototype.setAppContainer = function ( container ) {\n  this.appContainer = container;\n  this.checkInitialized();\n};\n\nAppStore.prototype.setResourceUrl = function ( url ) {\n  this.resourceUrl = url;\n  this.checkInitialized();\n};\n\nAppStore.displayName = 'AppStore';\nvar AppStore$1 = alt.createStore( AppStore );\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nlet params = new URLSearchParams( window.location.search.slice( 1 ) );\n\n// TODO could support non-square POT textures also\nlet elevationPoolSize = 4 * 4;\nlet imageryPoolSize = 16 * 16;\nif ( params.has( 'elevationPoolSize' ) ) {\n  elevationPoolSize = Number.parseInt( params.get( 'elevationPoolSize' ) );\n}\n\nif ( params.has( 'imageryPoolSize' ) ) {\n  imageryPoolSize = Number.parseInt( params.get( 'imageryPoolSize' ) );\n}\n\nconst ELEVATION_POOL_SIZE = elevationPoolSize;\nconst ELEVATION_TILE_SIZE = 512;\nconst IMAGERY_POOL_SIZE = imageryPoolSize;\nconst IMAGERY_TILE_SIZE = 256;\nconst INTERPOLATE_FLOAT = params.has( 'interpolateFloat' );\n\n// Different formats for encoding pixel data in elevation PNGs\nconst PIXEL_ENCODING_NASADEM = 'nasadem';\nconst PIXEL_ENCODING_TERRARIUM = 'terrarium';\nconst PIXEL_ENCODING_TERRAIN_RGB = 'terrain-rgb';\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nvar renderer = new THREE.WebGLRenderer( {\n  alpha: true,\n  antialias: false,\n  clearColor: 0x000000,\n  logarithmicDepthBuffer: false\n} );\nrenderer.sortObjects = true;\n\n// Don't clear buffers we know will be overwritten\nrenderer.autoClear = false;\nrenderer.autoClearColor = false;\nrenderer.autoClearDepth = true;\nrenderer.autoClearStencil = false;\nrenderer.domElement.selectable = false;\n// We do our own tonemapping, so disable otherwise get shader errors\nrenderer.toneMapping = THREE.NoToneMapping;\n\nvar state = ContainerStore$1.getState();\nrenderer.setPixelRatio( state.pixelRatio );\nrenderer.setSize( state.width, state.height );\nContainerStore$1.listen( function ( state ) {\n  renderer.setPixelRatio( state.pixelRatio );\n  renderer.setSize( state.width, state.height );\n} );\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// Class for managing a set of indices\n// `next()` returns a integer\nclass IntegerPool {\n  constructor( capacity ) {\n    this.capacity = capacity;\n    this.index = 0;\n    this.items = [];\n  }\n\n  next() {\n    let i;\n    // Once we hit capacity, start re-using stale entries\n    if ( this.index >= this.capacity ) {\n      i = this.items.splice( 0, 1 )[ 0 ];\n    } else {\n      // ...otherwise allocate sequentially\n      i = this.index++;\n    }\n\n    this.items.push( i );\n    return i;\n  }\n\n  // Method to keep element alive\n  tap( item ) {\n    let i = this.items.indexOf( item );\n    if ( i !== -1 ) {\n      this.items.splice( i, 1 );\n      this.items.push( item );\n    }\n  }\n}\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nconst ImageLoader$1 = ( typeof createImageBitmap === 'undefined' ) ?\n  THREE.ImageLoader : THREE.ImageBitmapLoader;\n\nvar ImageLoader$2 = new ImageLoader$1();\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nconst canvas$1 = document.createElement( 'canvas' );\nconst width = ELEVATION_TILE_SIZE;\nconst height = ELEVATION_TILE_SIZE;\ncanvas$1.width = width;\ncanvas$1.height = height;\nconst ctx = canvas$1.getContext( '2d' );\nconst N = width * height;\n\nconst insertIntoTextureArray = ( textureArray, index, image ) => {\n  const w = textureArray.image.width / textureArray.__blocks;\n  const h = textureArray.image.height / textureArray.__blocks;\n  const x = w * ( Math.floor( index ) % textureArray.__blocks );\n  const y = h * Math.floor( Math.floor( index ) / textureArray.__blocks );\n\n  if ( textureArray.useFloat ) {\n    ctx.drawImage( image, 0, 0 );\n    let imgData = ctx.getImageData( 0, 0, width, height ).data;\n\n    let data = new Float32Array( N );\n\n    if ( textureArray.pixelEncoding === PIXEL_ENCODING_NASADEM ) {\n      // NASADEM only uses two channels so we can use a DataView\n      // to efficiently convert it to floating point\n      const baseVal = -32768;\n      let dataView = new DataView( imgData.buffer );\n      for ( let i = 0; i < N; ++i ) {\n        let H = dataView.getUint16( 4 * i, false ) + baseVal;\n\n        // Handle NODATA value, clamping to 0\n        data[ i ] = ( H === baseVal ? 0 : H );\n      }\n    } else {\n      let scale;\n      if ( textureArray.pixelEncoding === PIXEL_ENCODING_TERRARIUM ) {\n        scale = [ 256, 1, 1 / 256, -32768 ];\n      } else if ( textureArray.pixelEncoding === PIXEL_ENCODING_TERRAIN_RGB ) {\n        scale = [ 0.1 * 256 * 256, 0.1 * 256, 0.1, -10000 ];\n      }\n      for ( let i = 0; i < N; ++i ) {\n        let H = scale[ 0 ] * imgData[ 4 * i ] +\n                scale[ 1 ] * imgData[ 4 * i + 1 ] +\n                scale[ 2 ] * imgData[ 4 * i + 2 ] +\n                scale[ 3 ];\n\n        // Handle NODATA value, clamping to 0\n        data[ i ] = ( H === scale[ 3 ] ? 0 : H );\n      }\n    }\n\n    // Do we need float? Perhaps just converting to data is\n    // enough?\n    renderer.copyTextureToTexture( { x, y }, {\n      image: { data, width, height },\n      isDataTexture: true\n    }, textureArray );\n  } else {\n    renderer.copyTextureToTexture( { x, y }, { image },\n      textureArray );\n  }\n};\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nclass BaseDatasource {\n  constructor( { apiKey, pixelEncoding, poolSize, textureSize, useFloat, urlFormat } ) {\n    this.apiKey = apiKey;\n    this.urlFormat = urlFormat;\n    this.pixelEncoding = pixelEncoding;\n    this.useFloat = !!useFloat;\n    this.hasUpdates = false;\n    this.listeners = [];\n    this.lookup = {};\n    this.fetching = {};\n    this.imgCache = {};\n    this.indexPool = new IntegerPool( poolSize );\n\n    // Emulate texture array by cutting up 2D texture\n    let n = Math.sqrt( poolSize );\n    if ( n % 1 ) {\n      console.error( 'poolSize needs to be a power of 2' );\n    }\n\n    let virtualTextureSize = textureSize * n;\n\n    const TextureFilter = ( this.useFloat && !INTERPOLATE_FLOAT ) ?\n      THREE.NearestFilter : THREE.LinearFilter;\n\n    this.textureArray = new THREE.DataTexture( null,\n      virtualTextureSize, virtualTextureSize,\n      // RGB seems to run *slower* than RGBA on iOS\n      this.useFloat ? THREE.AlphaFormat : THREE.RGBAFormat,\n      // HalfFloat doesn't work on iOS :(\n      this.useFloat ? THREE.FloatType : THREE.UnsignedByteType,\n      THREE.UVMapping,\n      THREE.ClampToEdgeWrapping, THREE.ClampToEdgeWrapping,\n      TextureFilter, TextureFilter,\n      //THREE.LinearFilter, THREE.LinearFilter,\n      //THREE.NearestFilter, THREE.NearestFilter,\n      renderer.capabilities.getMaxAnisotropy()\n    );\n    this.textureArray.__blocks = n;\n\n    for ( let prop of [ 'pixelEncoding', 'useFloat' ] ) {\n      Object.defineProperty( this.textureArray, prop, {\n        get: () => this[ prop ]\n      } );\n    }\n\n    if ( this.useFloat ) {\n      const size = 1024; // TODO reduce in future!\n      this.indirectionTexture = new THREE.DataTexture( null,\n        size, size,\n        // TODO Could perhaps use smaller format\n        THREE.RGBAFormat, // Using RGB led to errors...\n        // Need to use float type or get glitches on iOS\n        THREE.FloatType,\n        THREE.UVMapping,\n        THREE.ClampToEdgeWrapping, THREE.ClampToEdgeWrapping,\n        THREE.NearestFilter, THREE.NearestFilter,\n        1 // anisotropy\n      );\n    }\n  }\n\n  urlForTile( x, y, z ) {\n    return this.urlFormat.replace( '{x}', x ).replace( '{y}', y )\n      .replace( '{z}', z ).replace( '{apiKey}', this.apiKey );\n  }\n\n  fetchIfNeeded( quadkey ) {\n    if ( this.lookup[ quadkey ] !== undefined ||\n      this.fetching[ quadkey ] !== undefined ) {\n      // Have data, or download in progress, skip\n      return;\n    }\n\n    // Throttle downloads\n    let downloadIndices = Object.values( this.fetching );\n    if ( downloadIndices.length > 32 ) {\n      log$1( 'throttling...' );\n      return;\n    }\n\n    let newIndex = this.findNewIndex( quadkey );\n\n    // Mark as download in progress\n    this.fetching[ quadkey ] = newIndex;\n\n    // Actually fetch data\n    let url = this.urlForTile( ...tilebelt.quadkeyToTile( quadkey ) );\n    ImageLoader$2.load( url, ( image ) => {\n      // Image loaded OK\n        this.imgCache[ quadkey ] = image;\n        insertIntoTextureArray( this.textureArray, newIndex, image );\n\n        // Remove download and mark image location in lookup\n        delete this.fetching[ quadkey ];\n        this.lookup[ quadkey ] = newIndex;\n\n        // TODO remove, just for demo page\n        if ( this.useFloat ) {\n          let el = document.getElementById( 'elevation-tile-count' );\n          if ( el ) {\n            let n = parseInt( el.innerHTML );\n            if ( isNaN( n ) ) { n = 0; }\n\n            el.innerHTML = ++n;\n          }\n        }\n\n        this.updateIndirectionTexture();\n        this.notifyUpdate();\n      }, () => {\n        console.error( 'Failed to get image', quadkey );\n        delete this.fetching[ quadkey ];\n      } );\n  }\n\n  findNewIndex( quadkey ) {\n    // First request a new slot (index) to place image in\n    let downloadIndices = Object.values( this.fetching );\n    let newIndex;\n    let oldQuadKey;\n    let failed = true;\n    for ( let i = 32; i > 0; i-- ) {\n      // Try to obtain new index\n      newIndex = this.indexPool.next();\n\n      // Avoid situation where newIndex is used by an\n      // in-progress download, as it'll get clobbered\n      let goodIndex = downloadIndices.indexOf( newIndex ) === -1;\n\n      // Check what data this is pointing at\n      let oldDataSlot = Object.values( this.lookup ).indexOf( newIndex );\n      oldQuadKey = Object.keys( this.lookup )[ oldDataSlot ];\n\n      // Don't release tiles that are below us in\n      // heirarchy, so that when we zoom out we always have\n      // some data.\n      // Without this, we eject the data and then later\n      // tiles can end up having nothing to load! Resulting\n      // in a weird glitch where the previous index set in\n      // the uniform is used and some random tile is plastered\n      // in its place :(\n      let isParent = (\n        oldQuadKey !== undefined &&\n        quadkey.slice( 0, oldQuadKey.length - 1 ) === oldQuadKey.slice( 0, -1 ) );\n\n      if ( goodIndex && !isParent ) {\n        // Index is clean and not assigned being used by a download\n        failed = false;\n        break;\n      }\n    }\n\n    if ( failed ) {\n      log$1( `Failed to find index (${this.indexPool.capacity})` );\n      log$1( 'Downloads: ', downloadIndices.length );\n      // Fallback to using lowest resolution tile\n      oldQuadKey = Object.keys( this.lookup ).sort(\n        ( x, y ) => x.length - y.length )[ 0 ];\n      newIndex = this.lookup[ oldQuadKey ];\n    }\n\n    // Next, remove any existing lookup entry that references\n    // this index, as we are about to re-assign it. This should\n    // be safe to do as the index should have been recycled\n    // before\n    if ( oldQuadKey !== undefined ) {\n      delete this.lookup[ oldQuadKey ];\n    }\n\n    return newIndex;\n  }\n\n  updateIndirectionTexture() {\n    // Update indirection texture, loop over all textures\n    if ( this.indirectionTexture ) {\n      let quadkeys = Object.keys( this.lookup );\n      quadkeys.sort( ( a, b ) => Math.sign( a.length - b.length ) );\n      for ( let q of quadkeys ) {\n        let [ x, y, z ] = tilebelt.quadkeyToTile( q );\n        let tileIndex = this.lookup[ q ];\n        let size = Math.pow( 2, 10 - z );\n        x *= size; y *= size; // Move to zoom level 10\n        let data = new Float32Array( 4 * size * size );\n        let tileSize = Math.pow( 2, z );\n        let originScale = -tileSize / this.indirectionTexture.image.width;\n        for ( let i = 0; i < data.length; i++ ) {\n          // Location of tile in texture array\n          data[ 4 * i ] = tileIndex;\n          // Tile size\n          data[ 4 * i + 1 ] = tileSize;\n          // Tile origin position (scaled to save GPU instructions)\n          data[ 4 * i + 2 ] = x * originScale;\n          data[ 4 * i + 3 ] = y * originScale;\n        }\n\n        renderer.copyTextureToTexture( { x, y }, {\n          image: { data, width: size, height: size },\n          isDataTexture: true\n        }, this.indirectionTexture );\n      }\n    }\n  }\n\n  // Locates the highest resolution data we have for this tile\n  // return the data index and number of levels we are\n  // downsampling by\n  findBestAvailableData( quadkey, silent ) {\n    for ( let downsample = 0; downsample < 20; downsample++ ) {\n      // See if we have imagery already...\n      let index = this.lookup[ quadkey ];\n      if ( index !== undefined ) {\n        return { index, downsample, quadkey };\n      } else {\n        // Try parent tile...\n        // Parent key is just our key with last char removed\n        quadkey = quadkey.slice( 0, -1 );\n        if ( quadkey.length === 0 ) { break }\n      }\n    }\n\n    if ( !silent ) {\n      log$1( 'Failed to find data', quadkey );\n    }\n\n    return { index: null, downsample: 20, quadkey: null };\n  }\n\n  // Reads single point using local lookups\n  dataAtPoint( p ) {\n    let tile;\n    if ( p.longitude ) {\n      tile = tilebelt.pointToTileFraction( p.longitude, p.latitude, 10 );\n    } else {\n      tile = GeoprojectStore$1.positionToTileFraction( p, 10 );\n    }\n\n    const q = tilebelt.tileToQuadkey( tile );\n    const { quadkey } = this.findBestAvailableData( q );\n\n    if ( !quadkey ) { return null }\n\n    // Convert to zoom level at which we have data\n    const scale = Math.pow( 2, quadkey.length - tile[ 2 ] );\n    tile[ 0 ] *= scale;\n    tile[ 1 ] *= scale;\n\n    const img = this.imgCache[ quadkey ];\n    const canvas = document.createElement( 'canvas' );\n    canvas.width = 1; canvas.height = 1;\n\n    tile[ 0 ] = ( tile[ 0 ] % 1 ) * img.width;\n    tile[ 1 ] = ( tile[ 1 ] % 1 ) * img.height;\n\n    const ctx = canvas.getContext( '2d' );\n    ctx.drawImage( img,\n      tile[ 0 ], tile[ 1 ], 1, 1, // one pixel from src\n      0, 0, 1, 1 ); // ..to 1x1 canvas\n    return ctx.getImageData( 0, 0, 1, 1 ).data;\n  }\n\n  addListener( fn ) {\n    this.listeners.push( fn );\n  }\n\n  removeListener( fn ) {\n    let i = this.listeners.indexOf( fn );\n    if ( i !== -1 ) { this.listeners.splice( i, 1 ); }\n  }\n\n  notifyUpdate() {\n    this.hasUpdates = true;\n  }\n\n  broadcastUpdate() {\n    this.listeners.forEach( l => l() );\n    this.hasUpdates = false;\n  }\n}\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nconst ElevationDatasource = new BaseDatasource( {\n  urlFormat: 'https://www.nasadem.xyz/api/v1/dem/{z}/{x}/{y}.png?key={apiKey}',\n  textureSize: ELEVATION_TILE_SIZE,\n  pixelEncoding: PIXEL_ENCODING_NASADEM,\n  poolSize: ELEVATION_POOL_SIZE,\n  useFloat: true\n} );\n\nAppStore$1.listen( ( { datasource } ) => {\n  if ( datasource.elevation ) {\n    for ( let key of [ 'apiKey', 'pixelEncoding', 'urlFormat' ] ) {\n      ElevationDatasource[ key ] = datasource.elevation[ key ];\n    }\n  }\n} );\n\nconst MULTIPLIER_TERRARIUM = [ 256, 1, 1 / 256, -32768 ];\nconst MULTIPLIER_TERRAIN_RGB = [ 0.1 * 256 * 256, 0.1 * 256, 0.1, -10000 ];\n\nfunction dataToHeight( data, pixelEncoding ) {\n  if ( data[ 0 ] === 0 && data[ 1 ] === 0 ) {\n    // NODATA values return 0\n    return 0;\n  }\n\n  let m;\n  if ( pixelEncoding === PIXEL_ENCODING_TERRARIUM || \n       pixelEncoding === PIXEL_ENCODING_NASADEM ) {\n    m = MULTIPLIER_TERRARIUM;\n  } else if ( pixelEncoding === PIXEL_ENCODING_TERRAIN_RGB ) {\n    m = MULTIPLIER_TERRAIN_RGB;\n  }\n\n  return m[ 0 ] * data[ 0 ] +\n         m[ 1 ] * data[ 1 ] +\n         m[ 2 ] * data[ 2 ] +\n         // This is correct, we don't want to multiply by data[ 3 ]\n         m[ 3 ];\n}\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nconst earthScale = 0.0008176665341588574;\nfunction heightScale( p ) {\n  const sceneScale = GeoprojectStore$1.getState().sceneScale;\n  let tile;\n  if ( p.longitude ) {\n    tile = tilebelt.pointToTile( p.longitude, p.latitude, 10 );\n  } else {\n    tile = GeoprojectStore$1.positionToTileFraction( p, 10 );\n  }\n\n  const n = 3.141592653589793 - 0.006135923151542565 * tile[ 1 ];\n  return Math.cosh( n ) / ( earthScale * sceneScale );\n}\n\n// Simplified height lookup, doesn't interpolate between points\n// just picks the nearest pixel\nfunction heightAt( p, callback ) {\n  const data = ElevationDatasource.dataAtPoint( p );\n  if ( !data ) {\n    if ( typeof callback === 'function' ) {\n      const listener = () => {\n        // Now that data has updated, try again to fetch\n        const data = ElevationDatasource.dataAtPoint( p );\n        if ( data ) {\n          ElevationDatasource.removeListener( listener );\n          callback( dataToHeight( data, ElevationDatasource.pixelEncoding ) * heightScale( p ) );\n        }\n      };\n\n      // Don't have data yet, but want to register for callback\n      // once available\n      ElevationDatasource.addListener( listener );\n    }\n\n    return 0;\n  }\n\n  const H = dataToHeight( data, ElevationDatasource.pixelEncoding ) * heightScale( p );\n  if ( typeof callback === 'function' ) { callback( H ); }\n\n  return H;\n}\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nvar p1 = new THREE.Vector3( 0, 0, 0 );\nvar p2 = new THREE.Vector3( 0, 0, 0 );\nvar addNormal = function ( normal, origin, delta1, delta2 ) {\n  p1.addVectors( origin, delta1 );\n  delta1.z = heightAt( p1 ) - origin.z;\n\n  p2.addVectors( origin, delta2 );\n  delta2.z = heightAt( p2 ) - origin.z;\n\n  delta1.cross( delta2 );\n  delta1.normalize();\n  normal.add( delta1 );\n};\n\nvar n = 1, i$1; // Just keep it simple and only compute one normal\nvar theta = 2 * Math.PI / n;\nvar origin = new THREE.Vector3();\nvar defaultStep = 25;\nvar normal = new THREE.Vector3( 0, 0, 1 );\nvar d1 = new THREE.Vector3( 0, 0, 0 );\nvar d2 = new THREE.Vector3( 0, 0, 0 );\nvar normalAt = function ( p, step ) {\n  step = step ? step : defaultStep;\n\n  origin.copy( p );\n  origin.z = heightAt( origin );\n  normal.set( 0, 0, 0 );\n  for ( i$1 = 0; i$1 < n; i$1++ ) {\n    d1.x = step * Math.cos( i$1 * theta );\n    d1.y = step * Math.sin( i$1 * theta );\n    d2.x = -d1.y;\n    d2.y = d1.x;\n    addNormal( normal, origin, d1, d2 );\n  }\n\n  normal.normalize();\n  return normal;\n};\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nvar up = new THREE.Vector3( 0, 0, 1 );\n\nfunction CameraStore() {\n  this.position = new THREE.Vector3( 0, 0, 16000 );\n  this.target = new THREE.Vector3();\n  this.hasZoomedOut = false;\n\n  this.constrainCamera = true;\n  this.minDistance = 100;\n  this.minHeight = 200;\n  this.maxDistance = 50000;\n  this.maxBounds = 1000000;\n\n  camera.position.copy( this.position );\n  camera.up.copy( up );\n  camera.lookAt( new THREE.Vector3( 0, 0, 0 ) );\n  this.controls = new MapControls( camera );\n\n  var controls = this.controls;\n  RenderStore$1.listen( function () {\n    controls.update();\n  } );\n\n  // Transition durations & camera behavior\n  this.zoomInDuration = 2.0;\n  this.zoomOutDuration = 2.0;\n\n  this.bindListeners( {\n    animateAlongFeature: UserActions.animateAlongFeature,\n    configure: ConfigActions.configureCamera,\n    doubleTapZoom: UserActions.doubleTapZoom,\n    focusOnBounds: UserActions.focusOnBounds,\n    focusOnFeature: UserActions.focusOnFeature,\n    focusOnLocation: UserActions.focusOnLocation,\n    focusOnTarget: UserActions.focusOnTarget,\n    orbitTarget: UserActions.orbitTarget,\n    panToPosition: UserActions.panToPosition,\n    rotateLeft: UserActions.rotateLeft,\n    rotateRight: UserActions.rotateRight,\n    setCamera: UserActions.setCamera,\n    setCameraMode: UserActions.setCameraMode,\n    setCameraPosition: UserActions.setCameraPosition,\n    setCameraTarget: UserActions.setCameraTarget,\n    setFromCurrentLocation: [ CurrentLocationActions.setPosition, CurrentLocationActions.toggleTracking ],\n    zoomIn: UserActions.zoomIn,\n    zoomOut: UserActions.zoomOut\n  } );\n}\n\n// Direct setters, often want to use panToXXX actions instead\nCameraStore.prototype.setCamera = function ( state ) {\n  if ( state.position ) {\n    this.position.copy( state.position );\n    if ( !state.position.forceHeight ) {\n      // TODO perhaps a better way would be to define the camera\n      // position (and thus matrix) relative to the ground and\n      // then store the height in a GPU render target? That way\n      // we could avoid reading height data on the CPU and the\n      // texture read should be very cache-friendly\n      var h = heightAt( this.position );\n      // Hard limit, would otherwise be below ground\n      if ( this.position.z < h ) { this.position.z = h + 1; }\n\n      // Soft limit (nudge toward minHeight)\n      if ( this.constrainCamera && this.position.z < h + this.minHeight ) {\n        this.position.z += 0.1 * ( h + this.minHeight - this.position.z );\n      }\n    }\n  }\n\n  if ( state.target ) {\n    this.target.copy( state.target );\n    var limit = this.maxBounds; // High-res data end at about 25km\n    if ( Math.abs( this.target.x ) > limit ) {\n      this.target.x = limit * Math.sign( this.target.x );\n    }\n\n    if ( Math.abs( this.target.y ) > limit ) {\n      this.target.y = limit * Math.sign( this.target.y );\n    }\n  }\n\n  // Update camera internals\n  this.controls.target.copy( this.target );\n\n  // Update actual camera\n  camera.position.copy( this.position );\n  camera.up.copy( up );\n\n  if ( state.quaternion ) {\n    camera.setRotationFromQuaternion( state.quaternion );\n  } else {\n    camera.lookAt( this.controls.target );\n  }\n\n  camera.updateMatrixWorld();\n};\n\nCameraStore.prototype.setCameraTarget = function ( target ) {\n  this.setCamera( { target: target } );\n};\n\nCameraStore.prototype.setCameraPosition = function ( position ) {\n  this.setCamera( { position: position } );\n};\n\nCameraStore.prototype.setFromCurrentLocation = function () {\n  this.waitFor( CurrentLocationStore$1 );\n\n  var currentLocation = CurrentLocationStore$1.getState();\n  if ( !currentLocation.tracking || currentLocation.tooFar ) {\n    // We're not tracking, ignore\n    return false;\n  }\n\n  if ( !currentLocation.longitude || !currentLocation.latitude ) {\n    // We don't yet have a position, ignore\n    return false;\n  }\n\n  //\n  // Focus camera on current location\n  var nextTarget = geoproject.project( [ currentLocation.longitude, currentLocation.latitude, 0 ] );\n  nextTarget.z = heightAt( nextTarget );\n\n  return this.focusOnTarget( nextTarget );\n};\n\nCameraStore.prototype.setCameraMode = function ( mode ) {\n  if ( mode !== '2D' && mode !== '3D' ) {\n    console.error( 'Unknown camera mode:', mode );\n    return false;\n  }\n\n  this.controls.lock2D = ( mode !== '3D' );\n};\n\nCameraStore.prototype.vantageForTarget = function ( target ) {\n  var vantage;\n  if ( target.bearing !== undefined ) {\n    // If we have a bearing use that for direction\n    var theta = THREE.Math.degToRad( target.bearing );\n    vantage = new THREE.Vector3(\n      -Math.sin( theta ), -Math.cos( theta ), 0 );\n  } else {\n    // otherwise figure out vantage point from normal\n    vantage = normalAt( target ).clone();\n  }\n\n  // Direction away from slope, at 30 degree angle\n  var angle = ( target.angle !== undefined ) ? target.angle : 30;\n  vantage.z = 0;\n  if ( vantage.x === 0 && vantage.y === 0 ) {\n    // Handle singularity in flat terrain (point north)\n    vantage.y = -1;\n  }\n  vantage.normalize();\n  vantage.z = Math.tan( THREE.Math.degToRad( angle ) );\n\n  // Position similar distance away\n  var distance = ( target.distance !== undefined ) ?\n    target.distance : this.target.distanceTo( this.position );\n  distance = Math.max( distance, 1.5 * this.minDistance );\n  vantage.setLength( distance );\n  vantage.add( target );\n\n  return vantage;\n};\n\nCameraStore.prototype.focusOnBounds = function ( target ) {\n  if ( !target.sw || !target.sw.longitude || !target.sw.latitude ||\n       !target.ne || !target.ne.longitude || !target.ne.latitude ) {\n    return;\n  }\n\n  // First build up bounding sphere\n  var sw = geoproject.project( [ target.sw.longitude, target.sw.latitude, 0 ] );\n  sw.z = heightAt( target.sw, true );\n  var ne = geoproject.project( [ target.ne.longitude, target.ne.latitude, 0 ] );\n  ne.z = heightAt( target.ne, true );\n  var box = new THREE.Box3().expandByPoint( sw ).expandByPoint( ne );\n  var boundingSphere = new THREE.Sphere();\n  box.getBoundingSphere( boundingSphere );\n\n  // Now get the desired distance\n  var fov = THREE.Math.degToRad( camera.fov );\n  var D = boundingSphere.radius / Math.tan( 0.5 * fov );\n\n  // Convert into target to focus on\n  var nextTarget = boundingSphere.center.clone();\n  lodash_min.defaults( nextTarget, target );\n  nextTarget.distance = D;\n  return this.focusOnTarget( nextTarget );\n};\n\nCameraStore.prototype.focusOnFeature = function ( feature ) {\n  var coordinates = feature.geometry.coordinates;\n  if ( Array.isArray( coordinates[ 0 ] ) ) {\n    // Take first point of Linestring\n    coordinates = coordinates[ 0 ];\n  } // Otherwise assume Point\n\n  var nextTarget;\n  if ( feature.projected === false ) {\n    nextTarget = geoproject.project( coordinates );\n  } else {\n    nextTarget = new THREE.Vector3( coordinates[ 0 ], coordinates[ 1 ], 0 );\n  }\n\n  nextTarget.z = heightAt( nextTarget );\n  return this.focusOnTarget( nextTarget );\n};\n\nCameraStore.prototype.focusOnLocation = function ( target ) {\n  if ( !target.longitude || !target.latitude ) { return }\n\n  var nextTarget = geoproject.project( [ target.longitude, target.latitude, 0 ] );\n  // TODO make heightAt work everywhere\n  nextTarget.z = target.height || heightAt( target, true ); // Don't geoproject\n  lodash_min.defaults( nextTarget, target );\n  return this.focusOnTarget( nextTarget );\n};\n\nCameraStore.prototype.focusOnTarget = function ( target ) {\n  var duration = target.animationDuration;\n  if ( duration === undefined ) {\n    duration = 0.001 * this.target.distanceTo( target ); // Move at 1km per second\n    duration = Math.min( 4.0, Math.max( 1.2, duration ) ); // Clamp between 1.2 - 4 seconds\n  }\n\n  if ( duration === 0 ) {\n    return this.setCamera( {\n      position: this.vantageForTarget( target ),\n      target: target\n    } );\n  } else {\n    var options = {\n      position: this.vantageForTarget( target ),\n      target: target,\n      duration: duration,\n      doNotCancel: true\n    };\n    if ( typeof target.onComplete === 'function' ) {\n      options.onComplete = target.onComplete;\n    }\n\n    return this.panToPosition( options );\n  }\n};\n\nCameraStore.prototype.rotateAngle = function ( angle ) {\n  var delta = this.position.clone().sub( this.target );\n  delta.applyAxisAngle( up, angle );\n  var newPosition = this.controls.target.clone().add( delta );\n  var options = {\n    duration: 0.9,\n    ease: StoreUtils.cubicIn,\n    lerp: StoreUtils.lerp.vector3Angular( this.controls.target.clone() ),\n    doNotCancel: true\n  };\n  StoreUtils.transition( UserActions.setCameraPosition,\n    this.position.clone(), newPosition, options );\n};\n\nCameraStore.prototype.rotateLeft = function () {\n  this.rotateAngle( 0.3 * Math.PI );\n};\n\nCameraStore.prototype.rotateRight = function () {\n  this.rotateAngle( -0.3 * Math.PI );\n};\n\n// Spin around the current point\nCameraStore.prototype.orbitTarget = function () {\n  var delta = this.position.clone().sub( this.target );\n  delta.applyAxisAngle( up, 0.5 * Math.PI );\n  var newPosition = this.target.clone().add( delta );\n  var options = {\n    duration: 13.37,\n    ease: StoreUtils.linear,\n    lerp: StoreUtils.lerp.vector3Angular( this.target.clone() ),\n    onComplete: this.orbitTarget.bind( this )\n  };\n  StoreUtils.transition( UserActions.setCameraPosition,\n    this.position.clone(), newPosition, options );\n};\n\nCameraStore.prototype.zoomIn = function () {\n  var delta = this.position.clone().sub( this.target );\n  var l = delta.length();\n  var bounce = ( l < this.minDistance + 1 );\n  l = bounce ? 0.9 * this.minDistance : Math.max( this.minDistance, 0.5 * l );\n  delta.setLength( l );\n  var self = this;\n  return this.panToPosition( {\n    position: this.target.clone().add( delta ),\n    duration: bounce ? 0.15 : 0.5,\n    ease: StoreUtils.cubicIn,\n    doNotCancel: true,\n    onComplete: function () {\n      // Bounce back if outside of range\n      if ( bounce ) {\n        delta.setLength( self.minDistance );\n        self.panToPosition( {\n          position: self.target.clone().add( delta ),\n          duration: 0.2,\n          ease: StoreUtils.cubicIn,\n          doNotCancel: true\n        } );\n      }\n    }\n  } );\n};\n\nCameraStore.prototype.zoomOut = function () {\n  var delta = this.position.clone().sub( this.target );\n  var l = delta.length();\n  var bounce = ( l > this.maxDistance - 1 );\n  l = bounce ? 1.1 * this.maxDistance : Math.min( this.maxDistance, 2 * l );\n  delta.setLength( l );\n  var self = this;\n  return this.panToPosition( {\n    position: this.target.clone().add( delta ),\n    duration: bounce ? 0.15 : 0.5,\n    ease: StoreUtils.cubicIn,\n    doNotCancel: true,\n    onComplete: function () {\n      // Bounce back if outside of range\n      if ( bounce ) {\n        delta.setLength( self.maxDistance );\n        self.panToPosition( {\n          position: self.target.clone().add( delta ),\n          duration: 0.2,\n          ease: StoreUtils.cubicIn,\n          doNotCancel: true\n        } );\n      }\n    }\n  } );\n};\n\nCameraStore.prototype.doubleTapZoom = function () {\n  var delta = this.position.clone().sub( this.target );\n  var l = delta.length();\n  var zoomIn = l > this.minDistance * 1.05;\n  if ( zoomIn ) { this.zoomIn(); } else { this.zoomOut(); }\n};\n\nvar lastPosition = new THREE.Vector3();\nvar lastTarget = new THREE.Vector3();\nvar nextPosition = new THREE.Vector3();\nvar nextTarget = new THREE.Vector3();\nvar lastQuaternion = new THREE.Quaternion();\nvar nextQuaternion = new THREE.Quaternion();\nCameraStore.prototype.panToPosition = function ( options ) {\n  if ( options.position === undefined ) { options.position = this.position.clone(); }\n\n  if ( options.target === undefined ) { options.target = this.target.clone(); }\n\n  // Make local copies to capture state\n  lastPosition.copy( this.position );\n  nextPosition.copy( options.position );\n  lastTarget.copy( this.target );\n  nextTarget.copy( options.target );\n  lastQuaternion.copy( camera.quaternion );\n  if ( this.controls.lock2D ) {\n    nextQuaternion.copy( lastQuaternion );\n  } else {\n    var m = new THREE.Matrix4();\n    m.lookAt( options.position, options.target, up );\n    nextQuaternion.setFromRotationMatrix( m );\n  }\n\n  var interpolate = function ( u ) {\n    UserActions.setCamera( {\n      position: {\n        forceHeight: true,\n        ...StoreUtils.lerp.vector3( lastPosition, nextPosition, u )\n      },\n      target: StoreUtils.lerp.vector3( lastTarget, nextTarget, u ),\n      quaternion: lastQuaternion.clone().slerp( nextQuaternion, u )\n    } );\n  };\n\n  StoreUtils.transition( interpolate, 0, 1, options );\n  return false;\n};\n\n// At the moment, a bit glitchy so do not expose API\nCameraStore.prototype.animateAlongFeature = function ( options ) {\n  var self = this;\n  if ( this.controls.lock2D ) {\n    this.setCameraMode( '3D' );\n    setTimeout( function () {\n      self.animateAlongFeature( options );\n    }, 500 );\n    return;\n  }\n\n  var chaseDistance = options.distance || 1000;\n  var chaseHeight = Math.max( 1, 0.5 * chaseDistance );\n  var chaseSpeed = options.speed || 100;\n  var smoothTarget = new THREE.Vector3();\n  var offset = new THREE.Vector3();\n  var oldCameraNear = camera.near;\n\n  camera.near = Math.min( 0.25 * chaseHeight, camera.near );\n  camera.updateProjectionMatrix();\n  var follow = function ( target ) {\n    // Smooth the motion of the target\n    smoothTarget.subVectors( target, self.target );\n    smoothTarget.multiplyScalar( 0.1 );\n    smoothTarget.add( self.target );\n\n    var d = smoothTarget.distanceTo( self.position );\n\n    // Chase at distance approaching the desired distance\n    d = chaseDistance + 0.97 * ( d - chaseDistance );\n    offset.subVectors( self.position, smoothTarget );\n    offset.setLength( d );\n    offset.add( smoothTarget );\n\n    // Make sure we stay above ground\n    var desiredH = heightAt( offset ) + chaseHeight;\n    offset.z = desiredH + 0.97 * ( offset.z - desiredH );\n\n    UserActions.setCamera( {\n      position: offset,\n      target: smoothTarget\n    } );\n\n    if ( options.onAnimationFrame ) {\n      options.onAnimationFrame(\n        geoproject.unproject( smoothTarget ) );\n    }\n  };\n\n  var currentPosition = this.position.clone();\n  var currentTarget = this.target.clone();\n  this.constrainCamera = false;\n  var onComplete = function () {\n    self.constrainCamera = true;\n    self.panToPosition( {\n      position: currentPosition,\n      target: currentTarget,\n      duration: 2.0,\n      ease: StoreUtils.smootherstep\n    } );\n\n    // Revert to old camera near\n    setTimeout( function () {\n      camera.near = oldCameraNear;\n      camera.updateProjectionMatrix();\n    }, 500 );\n\n    if ( options.onComplete ) { options.onComplete(); }\n  };\n\n  var features = Array.isArray( options.feature ) ?\n    options.feature :\n    [ options.feature ];\n\n  var animateAlongFeatureWithIndex = function ( f ) {\n    var feature = features[ f ];\n    var segmentAnimation = function () {\n      // Animate along curve\n      StoreUtils.transition( follow, 0, 1, {\n        duration: feature.curve.getLength() / chaseSpeed, // in m/s\n        ease: StoreUtils.linear,\n        // Convert u value into position on curve\n        lerp: function ( initial, final, u ) {\n          return feature.curve.getPointAt( u );\n        },\n        onCancel: onComplete,\n        onComplete: function () {\n          if ( f < features.length - 1 ) {\n            // Move onto next feature\n            animateAlongFeatureWithIndex( f + 1 );\n          } else {\n            // Finish animation and return to start\n            onComplete();\n          }\n        }\n      } );\n\n      if ( options.onFeatureReached ) {\n        options.onFeatureReached( feature.id );\n      }\n    };\n\n    if ( f === 0 ) {\n      // For first feature move to initial position and start\n      var initialTarget = feature.curve.getPointAt( 0 );\n      var initialStep = feature.curve.getPointAt( 0.01 );\n      var initialPosition = initialTarget.clone().sub( initialStep );\n      initialPosition.setLength( Math.max( chaseDistance, 100 ) );\n      initialPosition.add( initialTarget );\n      initialPosition.z += chaseHeight;\n      self.panToPosition( {\n        position: initialPosition,\n        target: initialTarget,\n        duration: 2,\n        ease: StoreUtils.smootherstep,\n        onComplete: segmentAnimation,\n        onCancel: onComplete\n      } );\n    } else {\n      // Otherwise smoothly continue\n      segmentAnimation();\n    }\n  };\n\n  // Animate along first feature, which will in turn animate along the next\n  animateAlongFeatureWithIndex( 0 );\n};\n\n\n// Configure various parameters of camera\nCameraStore.prototype.configure = function ( options ) {\n  var self = this;\n  lodash_min.forEach( options, function ( value, key ) {\n    self[ key ] = value;\n  } );\n  var keys = [\n    'minDistance', 'minHeight', 'maxBounds', 'maxDistance',\n    'minPolarAngle', 'maxPolarAngle',\n    'noPan', 'noRotate', 'noZoom'\n  ];\n  lodash_min.forEach( keys, function ( key ) {\n    if ( self.hasOwnProperty( key ) ) { self.controls[ key ] = self[ key ]; }\n  } );\n};\n\nCameraStore.displayName = 'CameraStore';\nvar CameraStore$1 = alt.createStore( CameraStore );\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nconst Procedural = {};\n\nfunction CameraExport() {\n  this.bindListeners( {\n    setCamera: UserActions.setCamera\n  } );\n}\n\n/**\n * @exports Procedural\n * @name Camera\n * @description Use the Camera API methods to change the user's\n * view of the rendered scene.\n */\n\n/**\n * @name focusOnBounds\n * @memberof module:Camera\n * @function\n * @description Animates the engine camera to focus on a region\n * specified by a bounding box. The engine will calculate the correct\n * view such that the bounds are fully displayed.\n * @param {Object} bounds An Object specifying a bounding box. Pass the coordinates for the south-west and north-east corners of the box.\n * @example\n * var bounds = {\n *   sw: { latitude: 44.5, longitude: 6.3 },\n *   ne: { latitude: 44.4, longitude: 6.4 }\n * };\n * Procedural.focusOnBounds ( bounds );\n *\n * // Optionally can also supply:\n * // - viewing angle,\n * // - a bearing,\n * // - animation duration (in seconds)\n * var bounds = {\n *   sw: { latitude: 44.5, longitude: 6.3 },\n *   ne: { latitude: 44.4, longitude: 6.4 },\n *   angle: 25, bearing: 180,\n *   animationDuration: 0.5\n * };\n * Procedural.focusOnBounds ( bounds );\n */\nProcedural.focusOnBounds = function ( target ) {\n  if ( !target.sw || !target.sw.longitude || !target.sw.latitude ||\n       !target.ne || !target.ne.longitude || !target.ne.latitude ) {\n    console.log( 'Invalid target passed' );\n    console.log( 'Please use following format: { sw: { latitude: 44.5, longitude: 6.3 }, ne: { latitude: 44.4, longitude: 6.4 } }' );\n    console.log( '{ longitude: 1.23, latitude: 4.56 }' );\n    return;\n  }\n\n  var nextTarget = { onComplete: RenderActions.onBoundsFocused };\n  lodash_min.defaults( nextTarget, target );\n  setTimeout( function () { UserActions.focusOnBounds( nextTarget ); }, 0 );\n};\n\n/**\n * @name focusOnLocation\n * @memberof module:Camera\n * @function\n * @description Animates the engine camera to focus on a location\n * @param {Object} location An Object specifying a longitude and latitude\n * @example\n * var target = { latitude: 44.5, longitude: 6.3 };\n * Procedural.focusOnLocation ( target );\n *\n * // Optionally can also supply:\n * // - viewing angle,\n * // - a bearing,\n * // - a distance,\n * // - animation duration (in seconds)\n * var target = {\n *   latitude: 44.5, longitude: 6.3,\n *   angle: 20, bearing: 30, distance: 1000\n *   animationDuration: 0.5\n * };\n * Procedural.focusOnLocation ( target );\n */\nProcedural.focusOnLocation = function ( target ) {\n  if ( !target.longitude || !target.latitude ) {\n    console.log( 'Invalid target passed' );\n    console.log( 'Please use following format:' );\n    console.log( '{ longitude: 1.23, latitude: 4.56 }' );\n    return;\n  }\n\n  var nextTarget = { onComplete: RenderActions.onLocationFocused };\n  lodash_min.defaults( nextTarget, target );\n  setTimeout( function () { UserActions.focusOnLocation( nextTarget ); }, 0 );\n};\n\n/**\n * @name orbitTarget\n * @memberof module:Camera\n * @function\n * @description Animates the engine camera around the current\n * camera target\n */\nProcedural.orbitTarget = function () {\n  setTimeout( function () { UserActions.orbitTarget(); }, 0 );\n};\n\n/**\n * @name onCameraChange\n * @memberof module:Camera\n * @function\n * @description Callback function for when the camera position\n * changes. Note this method will fire very often, so you\n * may want to throttle updates. Performing significant work\n * every time this method fires will negatively impact performance\n * @example\n * Procedural.onCameraChange = function ( location ) {\n *   // `location` will contain:\n *   // - longitude\n *   // - latitude\n *   // - height\n *   // - angle\n *   // - bearing\n *   // - distance\n *   console.log( 'Location changed': location );\n * };\n */\n\n/**\n * @name setCameraMode\n * @memberof module:Camera\n * @function\n * @description Selects the current camera mode for the engine\n * @param {String} mode An String specifying the camera mode. Currently '2D' and '3D' are supported\n * @example\n * Procedural.setCameraMode ( '2D' );\n */\nProcedural.setCameraMode = function ( mode ) {\n  setTimeout( function () { UserActions.setCameraMode( mode ); }, 0 );\n};\n\n// API Listeners\nCameraExport.prototype.setCamera = function ( state ) {\n  this.waitFor( CameraStore$1 );\n  if ( typeof Procedural.onCameraChange !== 'function' ) { return }\n\n  const target = geoproject.unproject( state.target );\n  const distance = state.target.distanceTo( state.position );\n  const delta = state.target.clone().sub( state.position );\n  const bearing = ( 180 * Math.atan2( delta.x, delta.y ) / Math.PI + 360 ) % 360;\n  const angle = 180 * Math.asin( -delta.z / distance ) / Math.PI;\n  Procedural.onCameraChange( {\n    longitude: target[ 0 ],\n    latitude: target[ 1 ],\n    height: target[ 2 ],\n    angle, bearing, distance\n  } );\n};\n\nCameraExport.displayName = 'CameraExport';\n\nalt.createStore( CameraExport );\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nconst Procedural$1 = {};\n\n/**\n * @exports Procedural\n * @name Controls\n * @description Use the Controls API methods to configure\n * how the user can interact with the scene\n */\n\n/**\n * @name configureControls\n * @memberof module:Controls\n * @function\n * @description Pass configuration to set parameters for controls\n * @param {Object} configuration An Object specifying the configuration\n * @example\n * // All parameters are optional\n * var configuration = {\n *   // Minimum distance camera can approach scene\n *   minDistance: 1000,\n *   // Maximum distance camera can move from scene\n *   maxDistance: 5000,\n *   // Maximum distance camera target can move from scene\n *   maxBounds: 7500,\n *   // Minimum polar angle of camera\n *   minPolarAngle: 0.25 * Math.PI,\n *   // Maximum polar angle of camera\n *   maxPolarAngle: 0.8 * Math.PI,\n *   // Set to true to disable panning\n *   noPan: true,\n *   // Set to true to disable rotating\n *   noRotate: false,\n *   // Set to true to disable zooming\n *   noZoom: false\n * };\n * Procedural.configureControls( configuration );\n */\nProcedural$1.configureControls = function ( config ) {\n  if ( !config ) {\n    console.log( 'No configuration passed' );\n    return;\n  }\n\n  var filtered = {};\n  var keys = [\n    'minDistance', 'maxBounds', 'maxDistance',\n    'minPolarAngle', 'maxPolarAngle',\n    'noPan', 'noRotate', 'noZoom'\n  ];\n  for ( var k in keys ) {\n    var key = keys[ k ];\n    if ( config.hasOwnProperty( key ) ) { filtered[ key ] = config[ key ]; }\n  }\n\n  setTimeout( function () { ConfigActions.configureCamera( filtered ); }, 0 );\n};\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nconst Procedural$2 = {};\n\n// External API to engine, bridges between our code and the\n// exported `Procedural` object\nfunction CoreExport() {\n  this.appContainer = null;\n  this.bindListeners( {\n    onBoundsFocused: RenderActions.onBoundsFocused,\n    onLocationFocused: RenderActions.onLocationFocused,\n    fatalError: RenderActions.fatalError,\n    signalUserInteraction: UserActions.inputStarted,\n    setElevation: GeodataActions.setElevation,\n    setElevationBig: GeodataActions.setElevationBig\n  } );\n}\n\n/**\n * @exports Procedural\n * @name Core\n * @description The Procedural JavaScript library enables developers to embed\n * the Procedural engine into their web pages. To use this library\n * include a script tag on your page like so:\n * <pre>&lt;script\n *   src=\"https://unpkg.com/procedural-gl/build/procedural-gl.js\"&gt;\n * &lt;/script&gt;\n * </pre>\n * This will create a <tt>Procedural</tt> object that your JavaScript code\n * will be able to call. Once you have loaded the Procedural library, you can load in a location and add the visualization to your page. A typical pattern of initialization is as follows:\n * @example\n * Procedural.init( {\n *   container: document.getElementById( 'app' ),\n *   // For further details see:\n *   // github.com/felixpalmer/procedural-gl-js/wiki/Data-sources\n *   datasource: {\n *     elevation: {\n *       apiKey: 'GET_AN_API_KEY_FROM_YOUR_ELEVATION_PROVIDER',\n *       pixelFormat: 'nasadem', // or 'terrain-rgb', 'terrarium'\n *       urlFormat: 'https://elevation.example.com/tiles/{z}/{x}/{y}.jpg?key={apiKey}',\n *     },\n *     imagery: {\n *       apiKey: 'GET_AN_API_KEY_FROM_YOUR_IMAGERY_PROVIDER',\n *       urlFormat: 'https://imagery.example.com/tiles/{z}/{x}/{y}.jpg?key={apiKey}',\n *       attribution: 'Imagery attribution'\n *     },\n *   }\n * } );\n * Procedural.displayLocation( { latitude: 47.25, longitude: 13.55 } );\n */\n\n/**\n * @name init\n * @memberof module:Core\n * @function\n * @param {HTMLElement} container\n * @description Appends a canvas element to the specified container where the\n * engine will draw its output.\n * @example\n * var container = document.getElementById( 'app' );\n * Procedural.init( {\n *   container: document.getElementById( 'app' ),\n *   // For further details see:\n *   // github.com/felixpalmer/procedural-gl-js/wiki/Data-sources\n *   datasource: {\n *     elevation: {\n *       apiKey: 'GET_AN_API_KEY_FROM_YOUR_ELEVATION_PROVIDER',\n *       pixelFormat: 'nasadem', // or 'terrain-rgb', 'terrarium'\n *       urlFormat: 'https://elevation.example.com/tiles/{z}/{x}/{y}.jpg?key={apiKey}',\n *       attribution: 'Elevation attribution'\n *     },\n *     imagery: {\n *       apiKey: 'GET_AN_API_KEY_FROM_YOUR_IMAGERY_PROVIDER',\n *       urlFormat: 'https://imagery.example.com/tiles/{z}/{x}/{y}.jpg?key={apiKey}',\n *       attribution: 'Imagery attribution'\n *     },\n *   }\n * } );\n */\nProcedural$2.init = function ( { container, datasource } ) {\n  if ( container === undefined || container === null ) {\n    console.error( 'Error: tried to init Procedural API with invalid container' );\n    return;\n  }\n\n  if ( datasource === undefined || datasource === null ) {\n    console.error( 'Error: tried to init Procedural API without datasource definition' );\n    return;\n  }\n  \n  // Allow shorthand definitions for compatible providers\n  if ( datasource.provider === 'maptiler' ) {\n    if ( !datasource.apiKey ) {\n      console.error( 'Error: `${datasource.provider} `datasource configuration is invalid. Must provide `apiKey`' );\n    }\n\n    datasource = {\n      elevation: {\n        apiKey: datasource.apiKey,\n        pixelEncoding: PIXEL_ENCODING_TERRAIN_RGB,\n        urlFormat: 'https://api.maptiler.com/tiles/terrain-rgb/{z}/{x}/{y}.png?key={apiKey}'\n      },\n      imagery: {\n        apiKey: datasource.apiKey,\n        attribution: '<a href=\"https://www.maptiler.com/copyright/\">Maptiler</a> <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n        urlFormat: 'https://api.maptiler.com/tiles/satellite/{z}/{x}/{y}.jpg?key={apiKey}'\n      }\n    };\n  }\n\n  if ( ( datasource.elevation.provider === 'nasadem' ) ||\n       // For back-compatibility with old NASADEM definition\n       ( Object.keys( datasource.elevation ).length === 1 && \n         Object.keys( datasource.elevation )[ 0 ] === 'apiKey' ) ) {\n    if ( !datasource.elevation.apiKey ) {\n      console.error( 'Error: `${datasource.elevation.provider} `datasource configuration is invalid. Must provide `apiKey`' );\n    }\n\n    datasource.elevation = {\n      apiKey: datasource.elevation.apiKey,\n      attribution: '&copy;<a href=\"https://www.nasadem.xyz\">nasadem.XYZ</a>',\n      pixelEncoding: PIXEL_ENCODING_NASADEM,\n      urlFormat: 'https://www.nasadem.xyz/api/v1/dem/{z}/{x}/{y}.png?key={apiKey}'\n    };\n  }\n\n  const { elevation, imagery } = datasource;\n\n  // Upgrade pixelEncoding to constants\n  if ( [ PIXEL_ENCODING_NASADEM, PIXEL_ENCODING_TERRAIN_RGB,\n         PIXEL_ENCODING_TERRARIUM ].indexOf( elevation.pixelEncoding ) === -1 ) {\n    console.error( 'Error: invalid pixelEncoding passed in elevation datasource' );\n  }\n\n  if ( elevation === undefined || elevation.urlFormat === undefined ) {\n    console.error( 'Error: elevation datasource configuration is invalid' );\n    return;\n  }\n\n  if ( imagery === undefined || imagery.urlFormat === undefined ) {\n    console.error( 'Error: imagery datasource configuration is invalid' );\n    return;\n  }\n\n  ConfigActions.configureElevationDatasource( elevation );\n  ConfigActions.configureImageryDatasource( imagery );\n  ConfigActions.setAppContainer( container );\n};\n\n/**\n * @name onUserInteraction\n * @memberof module:Core\n * @function\n * @description Callback function for when engine recieves input from the\n * user. Can be used to hide overlays when the user interacts with\n * the map\n * @example\n * Procedural.onUserInteraction = function () {\n *   Procedural.removeOverlay( 'popup' );\n * }\n */\n\n/**\n * @name onBoundsFocused\n * @memberof module:Core\n * @function\n * @description Callback function for when the transition for `focusOnBounds` completes\n * @example\n * Procedural.onBoundsFocused = function () {\n *   Procedural.orbitTarget();\n * };\n */\n\n/**\n * @name onLocationError\n * @memberof module:Core\n * @function\n * @description Callback function for when location data failed to downloaded. This could be because the network request failed, or because the region is not available. See also [Core.setDisplayErrors]{@link module:Core.setDisplayErrors}\n * @example\n * Procedural.onLocationError = function ( message ) {\n *   // Handle error\n *   console.error( message );\n * };\n */\n\n/**\n * @name onLocationFocused\n * @memberof module:Core\n * @function\n * @description Callback function for when the transition for `focusOnLocation` completes\n * @example\n * Procedural.onLocationFocused = function () {\n *   console.log( 'Location focused' );\n * };\n */\n\n/**\n * @name onLocationLoaded\n * @memberof module:Core\n * @function\n * @description Callback function for when location data has been downloaded and displayed\n * @example\n * Procedural.onLocationLoaded = function () {\n *   var container = document.getElementById( 'app' );\n *   Procedural.init( container );\n * };\n */\n//onLocationLoaded\n\n// API Listeners\nCoreExport.prototype.fatalError = function ( message ) {\n  if ( typeof Procedural$2.onLocationError === 'function' ) { Procedural$2.onLocationError( message ); }\n};\n\nCoreExport.prototype.onBoundsFocused = function () {\n  if ( typeof Procedural$2.onBoundsFocused === 'function' ) { Procedural$2.onBoundsFocused(); }\n};\n\nCoreExport.prototype.onLocationFocused = function () {\n  if ( typeof Procedural$2.onLocationFocused === 'function' ) { Procedural$2.onLocationFocused(); }\n};\n\nCoreExport.prototype.setElevation = function () {\n};\n\nCoreExport.prototype.setElevationBig = function () {\n};\n\n/**\n * @name setDisplayErrors\n * @memberof module:Core\n * @function\n * @param {Boolean} value pass true to show errors, false to only report via API\n * @description Configure whether errors should be displayed to the user. See also [Core.onLocationError]{@link module:Core.onLocationError}\n */\nProcedural$2.setDisplayErrors = function ( value ) {\n  setTimeout( function () { ConfigActions.setDisplayErrors( value ); }, 0 );\n};\n\nCoreExport.prototype.signalUserInteraction = function () {\n  if ( typeof Procedural$2.onUserInteraction === 'function' ) { Procedural$2.onUserInteraction(); }\n};\n\nCoreExport.displayName = 'CoreExport';\n\nalt.createStore( CoreExport );\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nvar template = {\n  \"env\": {\n    \"turbidity\": 2.928118393234672,\n    \"reileigh\": 0.631430584918957,\n    \"mieCoefficient\": 0.006765327695560254,\n    \"mieDirectionalG\": 0.9020436927413672,\n    \"luminance\": 0.7892882311486963,\n    \"inclination\": 0.6376744186046512,\n    \"azimuth\": 0.881,\n    \"sun\": false,\n    \"fogDropoff\": 0.0000065,\n    \"fogIntensity\": 1,\n    \"exposureBias\": 1.25,\n    \"whitePoint\": 2.5,\n    \"ambientColor\": \"#2d3034\",\n    \"diffuseColor\": \"#aeafa4\",\n    \"backscatterColor\": \"#181d20\",\n    \"ambientOcclusion\": 1.17\n  }\n};\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nconst Procedural$3 = {};\n\n/**\n * @name datafileForLocation\n * @memberof module:Core\n * @function\n * @param {Object} target An Object specifying a longitude and latitude\n * @description Returns the file name for a data file for a given location. Used mostly internally by engine to construct URLs.\n */\nProcedural$3.datafileForLocation = function ( target ) {\n  if ( !target || isNaN( target.latitude ) || isNaN( target.longitude ) ) {\n    return null;\n  }\n\n  // Snap to nearest data point\n  var lon = ApiUtils.snap( target.longitude );\n  var lat = ApiUtils.snap( target.latitude );\n  return ApiUtils.datafileForLocation( lon, lat );\n};\n\n// TODO we should remove the displayLocation API as it overlaps\n// with focusOnLocation and confuses people. For now detect\n// when repeated calls are near to last target and forward\n// call to `focusOnLocation` if we are close by\nlet _lastTarget = null;\n\n/**\n * @name displayLocation\n * @memberof module:Core\n * @function\n * @param {Object} target An Object specifying a longitude and latitude\n * @description Instructs engine to download necessary data files for a location and to display it.\n * When the data is ready to be displayed [onLocationLoaded]{@link module:Core.onLocationLoaded} is fired.\n * @example\n * var target = { latitude: 43.21, longitude: 6.133 };\n * Procedural.displayLocation( target );\n *\n * // Optionally can also supply:\n * // - viewing angle,\n * // - a bearing,\n * // - a distance,\n * // - animation duration (in seconds)\n * var target = {\n *   latitude: 44.5, longitude: 6.3,\n *   angle: 20, bearing: 30, distance: 1000\n *   animationDuration: 0.5\n * };\n * Procedural.displayLocation( target );\n */\nProcedural$3.displayLocation = function ( target ) {\n  if ( !target ) {\n    RenderActions.fatalError( 'No place data passed' );\n    return;\n  }\n\n  if ( isNaN( target.latitude ) || isNaN( target.longitude ) ) {\n    RenderActions.fatalError( 'Invalid place data passed' );\n    return;\n  }\n\n  function dist( a, b ) { return Math.sqrt( a * a + b * b ) }\n  if ( _lastTarget === null || \n       dist( _lastTarget.longitude - target.longitude,\n             _lastTarget.latitude - target.latitude ) > 5 ) {\n    // For first invocation or nearby repeat calls, re-init\n    // library (this sets the overall geoprojection\n    setTimeout( function () {\n      UserActions.setCurrentPlace( { ...template, ...target } );\n    }, 0 );\n    _lastTarget = { ...target };\n  } else {\n    // For small movements simply focus on new location\n    setTimeout( function () { UserActions.focusOnLocation( target ); }, 0 );\n  }\n\n};\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nvar gui = null;\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nconst Procedural$4 = {};\n\n/**\n * @exports Procedural\n * @name Environment\n * @description Environments describe how the scene is rendered,\n * for example the color of the lighting, or the position of the\n * sun.\n *\n * To interactively adjust the values of the environment\n * you can use the editor, launched using:\n * [Procedural.environmentEditor]{@link module:Environment.environmentEditor}\n */\n\n/**\n * @name setEnvironment\n * @memberof module:Environment\n * @function\n * @param {Object} environment\n * @description Update the engine's environment to the environment\n * configuration passed.\n * @example\n * var environment = {\n *   title: 'custom',\n *   parameters: {\n *     inclination: 0.6,\n *     fogDropoff: 0.0002\n *   }\n * };\n * Procedural.setEnvironment( environment )\n */\nProcedural$4.setEnvironment = function ( environment ) {\n  setTimeout( function () { UserActions.setEnvironment( environment ); }, 0 );\n};\n\n/**\n * @name environmentEditor\n * @memberof module:Environment\n * @function\n * @description Launches the environment editor\n */\nProcedural$4.environmentEditor = function () { gui.initEnv(); };\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nvar queue = [];\nvar processNext = function () { queue.shift()(); };\n\nvar enqueue = function ( fn ) {\n  if ( typeof fn !== 'function' ) {\n    console.error( 'Tried to enqueue non-function' );\n    return;\n  }\n\n  queue.push( fn );\n  setTimeout( processNext, 0 );\n};\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nvar FeatureUtils = {\n  // TODO perhaps better to inline these, as we're parsing a lot of data???\n  isLineString: function ( feature ) {\n    return feature.geometry.type === 'LineString';\n  },\n  isPolygon: function ( feature ) {\n    return feature.geometry.type === 'Polygon';\n  },\n  isMultiPolygon: function ( feature ) {\n    return feature.geometry.type === 'MultiPolygon';\n  },\n  isPoint: function ( feature ) {\n    return feature.geometry.type === 'Point';\n  },\n  tagValue: function ( feature, tag ) {\n    if ( !feature.properties.tags ) { return null }\n\n    return feature.properties.tags[ tag ];\n  },\n  hasTag: function ( feature, tag ) {\n    return !!FeatureUtils.tagValue( feature, tag );\n  },\n  isPiste: function ( feature ) {\n    return FeatureUtils.isLineString( feature ) && FeatureUtils.hasTag( feature, 'piste:type' );\n  },\n  isAerial: function ( feature ) {\n    return FeatureUtils.isLineString( feature ) && FeatureUtils.hasTag( feature, 'aerialway' );\n  },\n  isHighway: function ( feature ) {\n    return FeatureUtils.isLineString( feature ) && FeatureUtils.hasTag( feature, 'highway' );\n  },\n  isTrack: function ( feature ) {\n    if ( !FeatureUtils.isLineString( feature ) ) { return false }\n\n    var highway = FeatureUtils.tagValue( feature, 'highway' );\n    return ( highway === 'track' ||\n               highway === 'footway' ||\n               highway === 'path' ||\n               highway === 'cycleway' ||\n               highway === 'bridleway' );\n  },\n  isRiver: function ( feature ) {\n    return FeatureUtils.isLineString( feature ) && FeatureUtils.hasTag( feature, 'waterway' );\n  },\n  isBuilding: function ( feature ) {\n    return FeatureUtils.isPolygon( feature ) && FeatureUtils.hasTag( feature, 'building' );\n  },\n  isForest: function ( feature ) {\n    return ( FeatureUtils.isPolygon( feature ) || FeatureUtils.isMultiPolygon( feature ) ) &&\n        !FeatureUtils.isBuilding( feature );\n  },\n  color: function ( feature ) {\n    var difficulty = !!feature.properties.tags && feature.properties.tags[ 'piste:difficulty' ];\n    if ( difficulty ) {\n      if ( difficulty === 'advanced' || difficulty === 'expert' || difficulty === 'freeride' ) { return '#030512' }\n\n      if ( difficulty === 'intermediate' ) { return '#ef2415' }\n\n      if ( difficulty === 'easy' ) { return '#1976d2' }\n\n      if ( difficulty === 'novice' ) { return '#4caf50' }\n\n      log$1( 'Unknown piste difficulty', difficulty );\n      return '#17afef';\n    }\n\n    if ( FeatureUtils.isAerial( feature ) ) { return '#0c0c0c' }\n\n    if ( FeatureUtils.isTrack( feature ) ) { return 'rgba(46, 42, 22, 0.5)' }\n\n    if ( FeatureUtils.isHighway( feature ) ) { return '#222120' }\n\n    if ( feature.properties.color ) { return feature.properties.color }\n\n    if ( FeatureUtils.isRiver( feature ) ) {\n      // Hack this in to allow memoize to work\n      return feature.properties.tags.waterway === 'stream' ? 5 : 100;\n    }\n\n    log$1( 'Unknown feature color', feature );\n  },\n  thickness: function ( feature ) {\n    if ( feature.properties.thickness ) { return feature.properties.thickness }\n\n    if ( FeatureUtils.isPiste( feature ) ) { return 2.7 }\n\n    if ( FeatureUtils.isAerial( feature ) ) { return 3.0 }\n\n    if ( FeatureUtils.isTrack( feature ) ) { return 3 }\n\n    if ( FeatureUtils.isHighway( feature ) ) {\n      var highway = FeatureUtils.tagValue( feature, 'highway' );\n      if ( highway === 'motorway' ) { return 13 }\n\n      if ( highway === 'trunk' ) { return 11 }\n\n      if ( highway === 'primary' ) { return 10 }\n\n      if ( highway === 'secondary' ) { return 8 }\n\n      return 5;\n    }\n\n    if ( FeatureUtils.isRiver( feature ) ) {\n      if ( feature.properties.tags.width ) { return feature.properties.tags.width }\n\n      return feature.properties.tags.waterway === 'stream' ? 2 : 3.7;\n    }\n\n    return 2.5;\n  }\n};\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\n// Have other stores depend on this to get subsets of\n// OSM data\nfunction OSMAdapter() {\n  this.bindListeners( {\n    clearFeatures: UserActions.setCurrentPlace,\n    setFeatures: GeodataActions.setFeatures\n  } );\n\n  this.clearFeatures();\n}\n\nOSMAdapter.prototype.clearFeatures = function () {\n  this.buildings = [];\n  this.forests = [];\n  this.highways = [];\n  this.lifts = [];\n  this.peaks = [];\n  this.places = [];\n  this.pistes = [];\n  this.lakes = [];\n  this.rivers = [];\n  this.unknown = [];\n  return false;\n};\n\n// Return collection to place feature into\nOSMAdapter.prototype.classify = function ( feature ) {\n  if ( FeatureUtils.isLineString( feature ) ) {\n    // Give top priority to pistes, so we don't classify as roads\n    if ( FeatureUtils.hasTag( feature, 'piste:type' ) ) { return this.pistes }\n\n    if ( FeatureUtils.hasTag( feature, 'highway' ) ) { return this.highways }\n\n    if ( FeatureUtils.hasTag( feature, 'waterway' ) ) { return this.rivers }\n\n    if ( FeatureUtils.hasTag( feature, 'aerialway' ) ) {\n      return this.lifts;\n    }\n\n    // Assume this is a piste (or generic trail)\n    // TODO, create another type?\n    //if ( FeatureUtils.hasTag( feature, 'piste:type' ) ) {\n    return this.pistes;\n    //}\n  } else if ( FeatureUtils.isPolygon( feature ) ) {\n    if ( FeatureUtils.hasTag( feature, 'building' ) ) { return this.buildings }\n\n    var natural = FeatureUtils.tagValue( feature, 'natural' );\n    if ( natural === 'water' ) { return this.lakes }\n\n    // For now, treat river areas as lakes, as we don't have flow\n    // working yet\n    var waterway = FeatureUtils.tagValue( feature, 'waterway' );\n    if ( waterway === 'riverbank' ) { return this.lakes }\n\n    return this.forests;\n  } else if ( FeatureUtils.isMultiPolygon( feature ) ) {\n    return this.forests;\n  } else if ( FeatureUtils.isPoint( feature ) ) {\n    var tags = feature.properties.tags;\n    if ( tags.natural === 'peak' && tags.name ) {\n      return this.peaks;\n    } else if ( tags.place ) {\n      return this.places;\n    } else {\n      return this.unknown;\n    }\n  }\n\n  return this.unknown;\n};\n\n\n// Convert OSM data into something matching our API\n// TODO should eventually deprecate and generate the\n// data better, this is all pretty messy\nOSMAdapter.prototype.normalize = function ( feature ) {\n  if ( feature.properties.tags === undefined ) { return }\n\n  var props = feature.properties;\n  var tags = props.tags;\n  delete props.tags;\n\n  // Promote name to real property\n  if ( tags.name ) { props.name = tags.name; }\n\n  // Figure out type and add icon\n  if ( tags.natural === 'peak' ) {\n    props.icon = 'caret-up';\n    props.fadeDistance = 10000;\n    if ( tags.ele && props.name ) {\n      props.name += ' - ' + tags.ele + 'm';\n    }\n  } else if ( tags.place ) {\n    props.icon = 'dot-circle-o';\n    props.fadeDistance = 15000;\n  }\n\n  // TODO mark builtin features\n  // TODO extract to default\n  props.collapseDistance = 0.5 * props.fadeDistance;\n  props.priority = -10;\n  props.borderRadius = 20;\n  props.background = 'rgba(0, 0, 0, 0.6)';\n  props.color = '#fff';\n  props.clipping = 'object';\n  props.anchor = 'left';\n\n  props.padding = 2;\n};\n\nOSMAdapter.prototype.setFeatures = function ( data ) {\n  // Is data already projected?\n  var projected = !!data.crs;\n\n  // Classify features, for now without duplication\n  var feature, collection;\n  var startTime = track$1.now();\n  while ( data.features.length > 0 ) {\n    feature = data.features.pop();\n    // Remove 3035 projection\n    if ( projected ) {\n      feature.geometry.coordinates =\n        geoproject.unproject3035( feature.geometry.coordinates );\n    }\n\n    if ( feature.projected === undefined ) {\n      feature.projected = false;\n    }\n\n    collection = this.classify( feature );\n    collection.push( feature );\n  }\n\n  this.peaks.forEach( this.normalize.bind( this ) );\n  this.places.forEach( this.normalize.bind( this ) );\n  var time = track$1.now() - startTime;\n  track$1.timing( 'geodata', 'classify', 'osm', time );\n};\n\nOSMAdapter.displayName = 'OSMAdapter';\n\nvar OSMAdapter$1 = alt.createStore( OSMAdapter );\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nvar DEFAULT = '____default____';\n// Have other stores depend on this to get subsets of\n// overlay data\nfunction OverlayAdapter() {\n  this.bindListeners( {\n    addBuiltinOverlay: GeodataActions.addBuiltinOverlay,\n    addOverlay: GeodataActions.addOverlay,\n    updateOverlay: GeodataActions.updateOverlay,\n    featureCreated: RenderActions.featureCreated,\n    removeOverlay: GeodataActions.removeOverlay,\n    setFeatures: GeodataActions.setFeatures\n  } );\n\n  // Hash to keep track of overlays added\n  this.overlays = {};\n\n  // Hash to keep track of when overlays are displayed\n  this.overlayTracker = {};\n\n  // Builtin overlays are not specified by the user,\n  // but rather extracted from the OSM data\n  this.builtinOverlays = [];\n  this.supportedBuiltinOverlays = [ 'lifts', 'peaks', 'pistes', 'places' ];\n\n  // Overlays which which don't want to generate new data\n  // for, just mark whether to show them\n  this.referenceOnlyBuiltinOverlays = [ 'lifts', 'pistes' ];\n\n  // Collections to sort elements into\n  this.lines = [];\n  this.markers = [];\n}\n\n// Return collection to place feature into\nOverlayAdapter.prototype.classify = function ( feature ) {\n  if ( FeatureUtils.isLineString( feature ) ) {\n    return this.lines;\n  } else if ( FeatureUtils.isPoint( feature ) ) {\n    return this.markers;\n  }\n\n  return null;\n};\n\nOverlayAdapter.prototype.removeFeature = function ( feature ) {\n  var collection = this.classify( feature );\n  if ( collection === null ) { return }\n\n  var index = collection.indexOf( feature );\n  if ( index !== -1 ) { collection.splice( index, 1 ); }\n};\n\nOverlayAdapter.prototype.addOverlay = function ( data ) {\n  var builtin = this.builtinOverlays.indexOf( data.name ) !== -1;\n  this.removeOverlay( data.name );\n\n  // removeOverlay clears out the overlay from the builtinOverlays\n  // list, which we do not want, so add it back\n  // TODO doesn't work as we modify order of array!!!!\n  if ( builtin ) { this.builtinOverlays.unshift( data.name ); }\n\n  if ( data.name === undefined ) { data.name = DEFAULT; }\n\n  // Cache away overlay so we can later remove it\n  this.overlays[ data.name ] = data;\n\n  // Make a copy of the array, to avoid modifying original\n  var features = data.features.concat();\n\n  // Classify features, for now without duplication\n  var feature;\n  var startTime = track$1.now();\n\n  while ( features.length > 0 ) {\n    feature = features.pop();\n\n    // Copy across default properties\n    if ( data.defaults && data.defaults.properties ) {\n      lodash_min.defaults( feature.properties, data.defaults.properties );\n    }\n\n    if ( feature.projected === undefined ) {\n      feature.projected = false;\n    }\n\n    var collection = this.classify( feature );\n    if ( collection ) {\n      collection.push( feature );\n      feature.overlayName = data.name;\n      this.featureClassified( feature );\n    }\n  }\n\n  var time = track$1.now() - startTime;\n  track$1.timing( 'geodata', 'classify', 'overlay', time );\n};\n\nOverlayAdapter.prototype.updateOverlay = function ( data ) {\n  var exists = this.overlays[ data.name ] !== undefined;\n  if ( !exists ) {\n    console.error( name + ' overlay has not been added, so cannot be updated' );\n    return false;\n  }\n\n  var newFeatures = data.features, oldFeatures = this.overlays[ data.name ].features;\n  var newL = newFeatures.length, oldL = oldFeatures.length;\n  if ( newL !== oldL ) {\n    console.error( 'Tried to call updateOverlay on overlay ' + data.name + ', but number of features does not match. Original: ' + oldL + ', new: ' + newL );\n    return false;\n  }\n\n  // Is data already projected?\n  // Note we do not support multiple different projections\n  // or projections with different centers\n  var projected = !!data.crs;\n\n  var oldFeature, newFeature;\n  for ( var n = 0; n < newL; n++ ) {\n    var oldFeature = oldFeatures[ n ];\n    var newFeature = newFeatures[ n ];\n    // TODO should we check ids match?\n    oldFeature.projected = newFeature.projected === undefined ? projected : newFeature.projected;\n    oldFeature.geometry.coordinates = newFeature.geometry.coordinates;\n  }\n};\n\nOverlayAdapter.prototype.addBuiltinOverlay = function ( overlay ) {\n  // Support single and array parameters\n  if ( !Array.isArray( overlay ) ) {\n    overlay = [ overlay ];\n  }\n\n  for ( var n = 0, nl = overlay.length; n < nl; n++ ) {\n    var name = overlay[ n ];\n    var index = this.supportedBuiltinOverlays.indexOf( name );\n    if ( index === -1 ) {\n      console.error( name + ' is not a supported built-in overlay' );\n      return false;\n    }\n\n    // Just mark that we want to use this overlay and rely\n    // on updateBuiltinOverlays to populate data\n    index = this.builtinOverlays.indexOf( name );\n    if ( index === -1 ) { this.builtinOverlays.push( name ); }\n  }\n\n  return this.updateBuiltinOverlays();\n};\n\nOverlayAdapter.prototype.updateBuiltinOverlays = function () {\n  this.waitFor( OSMAdapter$1 );\n  var osm = OSMAdapter$1.getState();\n  for ( var o = 0, ol = this.builtinOverlays.length; o < ol; o++ ) {\n    var name = this.builtinOverlays[ o ];\n    if ( this.referenceOnlyBuiltinOverlays.indexOf( name ) !== -1 ) {\n      continue;\n    }\n\n    this.addOverlay( {\n      name: name,\n      type: 'FeatureCollection',\n      features: osm[ name ]\n    } );\n  }\n};\n\nOverlayAdapter.prototype.setFeatures = function () {\n  return this.updateBuiltinOverlays();\n};\n\nOverlayAdapter.prototype.removeOverlay = function ( toRemove ) {\n  if ( toRemove === undefined ) { toRemove = [ DEFAULT ]; }\n\n  if ( !Array.isArray( toRemove ) ) { toRemove = [ toRemove ]; }\n\n  for ( var n = 0, nl = toRemove.length; n < nl; n++ ) {\n    var name = toRemove[ n ];\n    var index = this.builtinOverlays.indexOf( name );\n    if ( index !== -1 ) {\n      this.builtinOverlays.splice( index, 1 );\n    }\n\n    if ( this.overlays[ name ] === undefined ) { continue }\n\n    var overlay = this.overlays[ name ];\n    for ( var f = 0, fl = overlay.features.length; f < fl; f++ ) {\n      this.removeFeature( overlay.features[ f ] );\n    }\n\n    delete this.overlays[ name ];\n  }\n};\n\nOverlayAdapter.prototype.featureClassified = function ( feature ) {\n  if ( this.overlayTracker[ feature.overlayName ] === undefined ) {\n    this.overlayTracker[ feature.overlayName ] = 1;\n  } else {\n    this.overlayTracker[ feature.overlayName ] += 1;\n  }\n};\n\nOverlayAdapter.prototype.featureCreated = function ( feature ) {\n  if ( this.overlayTracker[ feature.overlayName ] === undefined ) {\n    return false;\n  } else {\n    this.overlayTracker[ feature.overlayName ] -= 1;\n  }\n\n  if ( this.overlayTracker[ feature.overlayName ] === 0 ) {\n    var overlayName = feature.overlayName;\n    delete this.overlayTracker[ feature.overlayName ];\n    enqueue( function () {\n      RenderActions.overlayDisplayed( overlayName );\n    } );\n  }\n\n  delete feature.overlayName;\n};\n\nOverlayAdapter.displayName = 'OverlayAdapter';\n\nvar OverlayAdapter$1 = alt.createStore( OverlayAdapter );\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\n// Uniforms for shaders that lookup height\nconst heightUniforms = {\n  elevationArray: { value: ElevationDatasource.textureArray },\n  indirectionTexture: { value: ElevationDatasource.indirectionTexture },\n  uGlobalOffset: { type: 'v2', value: new THREE.Vector2() },\n  uSceneScale: { type: 'f', value: 1 }\n};\n\nGeoprojectStore$1.listen( ( { globalOffset, sceneScale } ) => {\n  heightUniforms.uGlobalOffset.value.copy( globalOffset );\n  heightUniforms.uSceneScale.value = sceneScale;\n} );\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nconst Shader = function ( value ) {\n  this.value = value;\n};\n\nShader.prototype.define = function ( define, value ) {\n  var regexp = new RegExp( \"#define \" + define + \" .*\", \"g\" );\n  var newDefine = \"#define \" + define + ( value ? \" \" + value : \"\" );\n  if ( this.value.match( regexp ) ) {\n    // #define already exists, update its value\n    this.value = this.value.replace( regexp, newDefine );\n  } else {\n    // New #define, prepend to start of file\n    this.value = newDefine + \"\\n\" + this.value;\n  }\n};\n\nShader.prototype.clone = function () {\n  return new Shader( this.value );\n};\n\nvar beaconVertex = new Shader(`uniform mat4 modelMatrix;uniform mat4 viewMatrix;uniform mat4 projectionMatrix;uniform vec3 cameraPosition;attribute vec3 position;attribute vec3 normal;uniform float uAccuracy;varying vec3 vPosition;varying vec3 vCenter;varying float vRingRadius;\n#define BEACON_RADIUS 50.0\nfloat a(float b){return clamp(b,0.0,1.0);}vec2 a(vec2 b){return clamp(b,0.0,1.0);}vec3 a(vec3 b){return clamp(b,0.0,1.0);}vec4 a(vec4 b){return clamp(b,0.0,1.0);}\n#define VIRTUAL_TEXTURE_ARRAY_BLOCKS 4.0\n\n#define VIRTUAL_TEXTURE_ARRAY_SIZE 512.0\n\n#define TEX_SIZE (VIRTUAL_TEXTURE_ARRAY_SIZE * VIRTUAL_TEXTURE_ARRAY_BLOCKS)\nconst vec2 c=vec2(1.0/TEX_SIZE,0.0);vec4 d(const in sampler2D b,in vec2 e){e-=0.5*c.xx;vec2 f=fract(e*TEX_SIZE);vec2 g=e-c.xx*f+0.5*c.xx;\n#ifdef HEIGHT_LOOKUP_BIAS\nvec4 h=texture2D(b,g,-10.0);vec4 i=texture2D(b,g+c,-10.0);vec4 j=texture2D(b,g+c.yx,-10.0);vec4 k=texture2D(b,g+c.xx,-10.0);\n#else\nvec4 h=texture2D(b,g);vec4 i=texture2D(b,g+c);vec4 j=texture2D(b,g+c.yx);vec4 k=texture2D(b,g+c.xx);\n#endif\nvec4 l=mix(h,i,f.x);vec4 m=mix(j,k,f.x);return mix(l,m,f.y);}vec4 n(in sampler2D o,in vec2 e,in float p){vec2 q=vec2(mod(float(p),VIRTUAL_TEXTURE_ARRAY_BLOCKS),floor(float(p)/VIRTUAL_TEXTURE_ARRAY_BLOCKS));const float r=0.5;vec2 s=vec2(r,VIRTUAL_TEXTURE_ARRAY_SIZE-r)/VIRTUAL_TEXTURE_ARRAY_SIZE;vec2 t=(clamp(e,s.x,s.y)+q)/VIRTUAL_TEXTURE_ARRAY_BLOCKS;\n#ifdef MANUAL_TEXTURE_BILINEAR\nreturn d(o,t);\n#else\nreturn texture2D(o,t);\n#endif\n}uniform lowp sampler2D indirectionTexture;uniform vec2 uGlobalOffset;uniform float uSceneScale;const float u=0.0008176665341588574;float v(in float w){float x=3.141592653589793-0.006135923151542565*w;float y=dot(vec2(0.5),exp(vec2(x,-x)));return y/(u*uSceneScale);}uniform lowp sampler2D elevationArray;float z(in vec2 A){const float B=32.0;const float C=1024.0;vec2 D=A.xy-uGlobalOffset;D/=(uSceneScale*B);D*=vec2(1.0,-1.0);vec2 E=D/C;const vec2 F=vec2(0.5);vec2 G=(floor(D-F)+F);G+=step(F,D-G);vec2 H=G/C;vec4 I=texture2D(indirectionTexture,H);float p=I.r;float J=I.g;vec2 K=I.ba;vec2 t=E*J+K;return v(D.y)*n(elevationArray,t,p).a;}void main(){vCenter=position-BEACON_RADIUS*normal;vec4 L=modelMatrix*vec4(vCenter,1.0);vec3 M=L.xyz/L.w;vCenter=M;float N=abs((viewMatrix*vec4(M,1.0)).z);vRingRadius=25.0*clamp(N/1000.0,0.01,10.0);float O=max(vRingRadius,uAccuracy);vPosition=vCenter+O*normal;float P=z(vPosition.xy);float Q=P-vPosition.z+N/1000.0-0.3*O;vPosition.z=P;vec3 R=cameraPosition-vPosition;float S=length(R);R=normalize(R);float T=230.0*smoothstep(50.0,250.0,S);gl_Position=projectionMatrix*viewMatrix*vec4(vPosition+T*R,1.0);}`);\n\nvar beaconFragment = new Shader(`precision highp float;uniform float uTime;varying vec3 vPosition;varying vec3 vCenter;varying float vRingRadius;const vec4 a=vec4(1.0,1.0,1.0,0.9);void main(){float b=distance(vPosition.xy,vCenter.xy)/vRingRadius;vec3 c=mix(vec3(0.0,0.0,1.0),vec3(0.0,0.5,1.0),0.2*b);vec4 d=vec4(c*sin(uTime),0.5);d=mix(d,a,smoothstep(0.75,0.8,b));d=mix(d,vec4(c.rgb,0.15),smoothstep(1.0,1.05,b));d.rgb=pow(abs(d.rgb),vec3(0.4545));gl_FragColor=d;}`);\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n *\n * This file incorporates work covered by the following copyright and\n * permission notice:\n *\n *   The MIT License\n *\n *   Copyright © 2010-2020 three.js authors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in\n *   all copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *   THE SOFTWARE.\n */\n\nfunction Color$1( r, g, b, a ) {\n  if ( g === undefined && b === undefined ) {\n    // r is THREE.Color, hex or string\n    return this.set( r );\n  }\n\n  if ( a === undefined ) { a = 1; }\n\n  return this.setRGB( r, g, b, a );\n}\n\nObject.assign( Color$1.prototype, {\n\n  isColor: true,\n\n  r: 1, g: 1, b: 1, a: 1,\n\n  set: function ( value ) {\n    if ( value && value.isColor ) {\n      this.copy( value );\n    } else if ( typeof value === 'number' ) {\n      this.setHex( value );\n    } else if ( typeof value === 'string' ) {\n      this.setStyle( value );\n    }\n\n    return this;\n  },\n\n  setScalar: function ( scalar ) {\n    this.r = scalar;\n    this.g = scalar;\n    this.b = scalar;\n\n    return this;\n  },\n\n  setHex: function ( hex ) {\n    hex = Math.floor( hex );\n\n    this.r = ( hex >> 16 & 255 ) / 255;\n    this.g = ( hex >> 8 & 255 ) / 255;\n    this.b = ( hex & 255 ) / 255;\n\n    return this;\n  },\n\n  setRGB: function ( r, g, b, a ) {\n    this.r = r;\n    this.g = g;\n    this.b = b;\n    this.a = a;\n\n    return this;\n  },\n\n\n  setStyle: function ( style ) {\n    function handleAlpha( string ) {\n      if ( string === undefined ) return 1;\n      return parseFloat( string );\n    }\n\n\n    var m;\n\n    if ( m = /^((?:rgb)a?)\\(\\s*([^\\)]*)\\)/.exec( style ) ) {\n      // rgb / hsl\n\n      var color;\n      var name = m[ 1 ];\n      var components = m[ 2 ];\n\n      switch ( name ) {\n      case 'rgb':\n      case 'rgba':\n\n        if ( color = /^(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec( components ) ) {\n          // rgb(255,0,0) rgba(255,0,0,0.5)\n          this.r = Math.min( 255, parseInt( color[ 1 ], 10 ) ) / 255;\n          this.g = Math.min( 255, parseInt( color[ 2 ], 10 ) ) / 255;\n          this.b = Math.min( 255, parseInt( color[ 3 ], 10 ) ) / 255;\n\n          this.a = handleAlpha( color[ 5 ] );\n\n          return this;\n        }\n\n        if ( color = /^(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec( components ) ) {\n          // rgb(100%,0%,0%) rgba(100%,0%,0%,0.5)\n          this.r = Math.min( 100, parseInt( color[ 1 ], 10 ) ) / 100;\n          this.g = Math.min( 100, parseInt( color[ 2 ], 10 ) ) / 100;\n          this.b = Math.min( 100, parseInt( color[ 3 ], 10 ) ) / 100;\n\n          this.a = handleAlpha( color[ 5 ] );\n\n          return this;\n        }\n\n        break;\n      }\n    } else if ( m = /^\\#([A-Fa-f0-9]+)$/.exec( style ) ) {\n      // hex color\n\n      var hex = m[ 1 ];\n      var size = hex.length;\n\n      if ( size === 3 ) {\n        // #ff0\n        this.r = parseInt( hex.charAt( 0 ) + hex.charAt( 0 ), 16 ) / 255;\n        this.g = parseInt( hex.charAt( 1 ) + hex.charAt( 1 ), 16 ) / 255;\n        this.b = parseInt( hex.charAt( 2 ) + hex.charAt( 2 ), 16 ) / 255;\n\n        return this;\n      } else if ( size === 6 ) {\n        // #ff0000\n        this.r = parseInt( hex.charAt( 0 ) + hex.charAt( 1 ), 16 ) / 255;\n        this.g = parseInt( hex.charAt( 2 ) + hex.charAt( 3 ), 16 ) / 255;\n        this.b = parseInt( hex.charAt( 4 ) + hex.charAt( 5 ), 16 ) / 255;\n\n        return this;\n      }\n    }\n\n    if ( style && style.length > 0 ) {\n      // color keywords\n      var hex = THREE.Color.NAMES[ style ];\n\n      if ( hex !== undefined ) {\n        // red\n        this.setHex( hex );\n      } else {\n        // unknown color\n        console.warn( 'THREE.Color: Unknown color ' + style );\n      }\n    }\n\n    return this;\n  },\n\n  clone: function () {\n    return new this.constructor( this.r, this.g, this.b, this.a );\n  },\n\n  copy: function ( color ) {\n    this.r = color.r;\n    this.g = color.g;\n    this.b = color.b;\n    this.a = color.a;\n\n    return this;\n  },\n\n  copyGammaToLinear: function ( color, gammaFactor ) {\n    if ( gammaFactor === undefined ) gammaFactor = 2.0;\n\n    this.r = Math.pow( color.r, gammaFactor );\n    this.g = Math.pow( color.g, gammaFactor );\n    this.b = Math.pow( color.b, gammaFactor );\n\n    return this;\n  },\n\n  copyLinearToGamma: function ( color, gammaFactor ) {\n    if ( gammaFactor === undefined ) gammaFactor = 2.0;\n\n    var safeInverse = ( gammaFactor > 0 ) ? ( 1.0 / gammaFactor ) : 1.0;\n\n    this.r = Math.pow( color.r, safeInverse );\n    this.g = Math.pow( color.g, safeInverse );\n    this.b = Math.pow( color.b, safeInverse );\n\n    return this;\n  },\n\n  convertGammaToLinear: function () {\n    var r = this.r, g = this.g, b = this.b;\n\n    this.r = r * r;\n    this.g = g * g;\n    this.b = b * b;\n\n    return this;\n  },\n\n  convertLinearToGamma: function () {\n    this.r = Math.sqrt( this.r );\n    this.g = Math.sqrt( this.g );\n    this.b = Math.sqrt( this.b );\n\n    return this;\n  },\n\n  getHex: function () {\n    return ( this.r * 255 ) << 16 ^ ( this.g * 255 ) << 8 ^ ( this.b * 255 ) << 0;\n  },\n\n  getHexString: function () {\n    return ( '000000' + this.getHex().toString( 16 ) ).slice( -6 );\n  },\n\n  getHSL: function ( optionalTarget ) {\n    // h,s,l ranges are in 0.0 - 1.0\n\n    var hsl = optionalTarget || { h: 0, s: 0, l: 0 };\n\n    var r = this.r, g = this.g, b = this.b;\n\n    var max = Math.max( r, g, b );\n    var min = Math.min( r, g, b );\n\n    var hue, saturation;\n    var lightness = ( min + max ) / 2.0;\n\n    if ( min === max ) {\n      hue = 0;\n      saturation = 0;\n    } else {\n      var delta = max - min;\n\n      saturation = lightness <= 0.5 ? delta / ( max + min ) : delta / ( 2 - max - min );\n\n      switch ( max ) {\n      case r: hue = ( g - b ) / delta + ( g < b ? 6 : 0 ); break;\n      case g: hue = ( b - r ) / delta + 2; break;\n      case b: hue = ( r - g ) / delta + 4; break;\n      }\n\n      hue /= 6;\n    }\n\n    hsl.h = hue;\n    hsl.s = saturation;\n    hsl.l = lightness;\n\n    return hsl;\n  },\n\n  getStyle: function () {\n    return 'rgb(' + ( ( this.r * 255 ) | 0 ) + ',' + ( ( this.g * 255 ) | 0 ) + ',' + ( ( this.b * 255 ) | 0 ) + ')';\n  },\n\n  offsetHSL: function ( h, s, l ) {\n    var hsl = this.getHSL();\n\n    hsl.h += h; hsl.s += s; hsl.l += l;\n\n    this.setHSL( hsl.h, hsl.s, hsl.l );\n\n    return this;\n  },\n\n  add: function ( color ) {\n    this.r += color.r;\n    this.g += color.g;\n    this.b += color.b;\n\n    return this;\n  },\n\n  addColors: function ( color1, color2 ) {\n    this.r = color1.r + color2.r;\n    this.g = color1.g + color2.g;\n    this.b = color1.b + color2.b;\n\n    return this;\n  },\n\n  addScalar: function ( s ) {\n    this.r += s;\n    this.g += s;\n    this.b += s;\n\n    return this;\n  },\n\n  sub: function ( color ) {\n    this.r = Math.max( 0, this.r - color.r );\n    this.g = Math.max( 0, this.g - color.g );\n    this.b = Math.max( 0, this.b - color.b );\n\n    return this;\n  },\n\n  multiply: function ( color ) {\n    this.r *= color.r;\n    this.g *= color.g;\n    this.b *= color.b;\n\n    return this;\n  },\n\n  multiplyScalar: function ( s ) {\n    this.r *= s;\n    this.g *= s;\n    this.b *= s;\n\n    return this;\n  },\n\n  lerp: function ( color, alpha ) {\n    this.r += ( color.r - this.r ) * alpha;\n    this.g += ( color.g - this.g ) * alpha;\n    this.b += ( color.b - this.b ) * alpha;\n    this.a += ( color.a - this.a ) * alpha;\n\n    return this;\n  },\n\n  equals: function ( c ) {\n    return ( c.r === this.r ) && ( c.g === this.g ) && ( c.b === this.b );\n  },\n\n  fromArray: function ( array, offset ) {\n    if ( offset === undefined ) offset = 0;\n\n    this.r = array[ offset ];\n    this.g = array[ offset + 1 ];\n    this.b = array[ offset + 2 ];\n\n    return this;\n  },\n\n  toArray: function ( array, offset ) {\n    if ( array === undefined ) array = [];\n    if ( offset === undefined ) offset = 0;\n\n    array[ offset ] = this.r;\n    array[ offset + 1 ] = this.g;\n    array[ offset + 2 ] = this.b;\n\n    return array;\n  },\n\n  toJSON: function () {\n    return this.getHex();\n  }\n\n} );\n\n/**\n * @author alteredq / http://alteredqualia.com/\n *\n * Full-screen textured quad shader\n */\n\n\n\nvar CopyShader = {\n\n\tuniforms: {\n\n\t\t\"tDiffuse\": { value: null },\n\t\t\"opacity\": { value: 1.0 }\n\n\t},\n\n\tvertexShader: [\n    \"precision highp float;\",\n\n    \"uniform mat4 modelViewMatrix;\",\n    \"uniform mat4 projectionMatrix;\",\n\n    \"attribute vec3 position;\",\n    \"attribute vec2 uv;\",\n\n\t\t\"varying vec2 vUv;\",\n\n\t\t\"void main() {\",\n\n\t\t\"\tvUv = uv;\",\n\t\t\"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\n\n\t\t\"}\"\n\n\t].join( \"\\n\" ),\n\n\tfragmentShader: [\n\n    \"precision highp float;\",\n\n\t\t\"uniform float opacity;\",\n\n\t\t\"uniform sampler2D tDiffuse;\",\n\n\t\t\"varying vec2 vUv;\",\n\n\t\t\"void main() {\",\n\n\t\t\"\tvec4 texel = texture2D( tDiffuse, vUv );\",\n\t\t\"\tgl_FragColor = opacity * texel;\",\n\n\t\t\"}\"\n\n\t].join( \"\\n\" )\n\n};\n\nfunction Pass() {\n\n\t// if set to true, the pass is processed by the composer\n\tthis.enabled = true;\n\n\t// if set to true, the pass indicates to swap read and write buffer after rendering\n\tthis.needsSwap = true;\n\n\t// if set to true, the pass clears its buffer before rendering\n\tthis.clear = false;\n\n\t// if set to true, the result of the pass is rendered to screen. This is set automatically by EffectComposer.\n\tthis.renderToScreen = false;\n\n}\n\nObject.assign( Pass.prototype, {\n\n\tsetSize: function ( /* width, height */ ) {},\n\n\trender: function ( /* renderer, writeBuffer, readBuffer, deltaTime, maskActive */ ) {\n\n\t\tconsole.error( 'THREE.Pass: .render() must be implemented in derived pass.' );\n\n\t}\n\n} );\n\n// Helper for passes that need to fill the viewport with a single quad.\n\nPass.FullScreenQuad = ( function () {\n\n\tvar camera = new OrthographicCamera( - 1, 1, 1, - 1, 0, 1 );\n\tvar geometry = new PlaneBufferGeometry( 2, 2 );\n\n\tvar FullScreenQuad = function ( material ) {\n\n\t\tthis._mesh = new Mesh( geometry, material );\n\t\tthis._camera = camera;\n\n\t};\n\n\tObject.defineProperty( FullScreenQuad.prototype, 'material', {\n\n\t\tget: function () {\n\n\t\t\treturn this._mesh.material;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._mesh.material = value;\n\n\t\t}\n\n\t} );\n\n\tObject.assign( FullScreenQuad.prototype, {\n\n\t\tdispose: function () {\n\n\t\t\tthis._mesh.geometry.dispose();\n\n\t\t},\n\n\t\trender: function ( renderer ) {\n\n\t\t\trenderer.render( this._mesh, camera );\n\n\t\t}\n\t} );\n\n\treturn FullScreenQuad;\n\n} )();\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nconst ShaderPass = function ( shader, textureID ) {\n\n\tPass.call( this );\n\n\tthis.textureID = ( textureID !== undefined ) ? textureID : \"tDiffuse\";\n\n\tif ( shader instanceof ShaderMaterial ||\n\t     shader instanceof RawShaderMaterial ) {\n\n\t\tthis.uniforms = shader.uniforms;\n\n\t\tthis.material = shader;\n\n\t} else if ( shader ) {\n\n\t\tthis.uniforms = UniformsUtils.clone( shader.uniforms );\n\n\t\tthis.material = new RawShaderMaterial( {\n\n\t\t\tdefines: Object.assign( {}, shader.defines ),\n\t\t\tuniforms: this.uniforms,\n\t\t\tvertexShader: shader.vertexShader,\n\t\t\tfragmentShader: shader.fragmentShader\n\n\t\t} );\n\n\t}\n\n\tthis.fsQuad = new Pass.FullScreenQuad( this.material );\n\n};\n\nShaderPass.prototype = Object.assign( Object.create( Pass.prototype ), {\n\n\tconstructor: ShaderPass,\n\n\trender: function ( renderer, writeBuffer, readBuffer /*, deltaTime, maskActive */ ) {\n\n\t\tif ( this.uniforms[ this.textureID ] ) {\n\n\t\t\tthis.uniforms[ this.textureID ].value = readBuffer.texture;\n\n\t\t}\n\n\t\tthis.fsQuad.material = this.material;\n\n\t\tif ( this.renderToScreen ) {\n\n\t\t\trenderer.setRenderTarget( null );\n\t\t\tthis.fsQuad.render( renderer );\n\n\t\t} else {\n\n\t\t\trenderer.setRenderTarget( writeBuffer );\n\t\t\t// TODO: Avoid using autoClear properties, see https://github.com/mrdoob/three.js/pull/15571#issuecomment-465669600\n\t\t\tif ( this.clear ) renderer.clear( renderer.autoClearColor, renderer.autoClearDepth, renderer.autoClearStencil );\n\t\t\tthis.fsQuad.render( renderer );\n\n\t\t}\n\n\t},\n\n  compile: function ( renderer ) {\n    var tmpScene = new Scene();\n    var obj = new Object3D();\n    obj.material = this.material;\n    tmpScene.add( obj );\n    renderer.compile( tmpScene, this.fsQuad._camera );\n    tmpScene.children = [];\n  }\n} );\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nvar EffectComposer = function ( renderer, renderTarget, hd ) {\n  // When we have HD passes enabled, we first render normal\n  // passes, keeping the depth buffer available for the\n  // HD pass after. This is useful e.g. for rendering a\n  // low-resolution scene and then adding high-resolution\n  // labels on top\n  this.hd = !!hd;\n\n\tthis.renderer = renderer;\n\n\tif ( renderTarget === undefined ) {\n\n\t\tvar parameters = {\n\t\t\tminFilter: LinearFilter,\n\t\t\tmagFilter: LinearFilter,\n\t\t\tformat: RGBAFormat,\n\t\t\tstencilBuffer: false\n\t\t};\n\n\t\tvar size = renderer.getSize( new Vector2() );\n\t\trenderTarget = new WebGLRenderTarget( size.width, size.height, parameters );\n\t\trenderTarget.texture.name = 'EffectComposer.rt1';\n\n\t}\n\n\tthis.renderTarget1 = renderTarget;\n\tthis.renderTarget2 = renderTarget.clone();\n\tthis.renderTarget2.texture.name = 'EffectComposer.rt2';\n\n  // For HD passes, need to setup depth texture\n  // that allows us to pass the depth from the\n  // original (non-HD) passes to the HD pass\n  var depthTexture;\n  if ( this.hd ) {\n    this.renderTargetHD = renderTarget.clone();\n    depthTexture = new DepthTexture();\n    this.renderTarget1.depthTexture = depthTexture;\n    this.renderTarget2.depthTexture = depthTexture;\n  }\n\n\tthis.writeBuffer = this.renderTarget1;\n\tthis.readBuffer = this.renderTarget2;\n\n\tthis.renderToScreen = true;\n\n\tthis.passes = [];\n\n\t// dependencies\n\n\tif ( CopyShader === undefined ) {\n\n\t\tconsole.error( 'THREE.EffectComposer relies on CopyShader' );\n\n\t}\n\n\tif ( ShaderPass === undefined ) {\n\n\t\tconsole.error( 'THREE.EffectComposer relies on ShaderPass' );\n\n\t}\n\n\tthis.copyPass = new ShaderPass( CopyShader );\n\n\tthis.clock = new Clock();\n\n};\n\nObject.assign( EffectComposer.prototype, {\n\n\tswapBuffers: function () {\n\n\t\tvar tmp = this.readBuffer;\n\t\tthis.readBuffer = this.writeBuffer;\n\t\tthis.writeBuffer = tmp;\n\n\t},\n\n\taddPass: function ( pass ) {\n    if ( pass.hd && !this.hd ) {\n      console.error( 'Cannot add HD pass to a non-HD EffectComposer' );\n    }\n\n\t\tthis.passes.push( pass );\n\t\tvar size = this.renderer.getSize( new Vector2() );\n\t\tpass.setSize( size.width, size.height );\n\n\t},\n\n\tinsertPass: function ( pass, index ) {\n\n\t\tthis.passes.splice( index, 0, pass );\n\n\t},\n\n\tisLastEnabledPass: function ( passIndex ) {\n\n\t\tfor ( var i = passIndex + 1; i < this.passes.length; i ++ ) {\n\n\t\t\tif ( this.passes[ i ].enabled ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t},\n\n\trender: function ( deltaTime ) {\n\n\t\t// deltaTime value is in seconds\n\n\t\tif ( deltaTime === undefined ) {\n\n\t\t\tdeltaTime = this.clock.getDelta();\n\n\t\t}\n\n\t\tvar currentRenderTarget = this.renderer.getRenderTarget();\n\n\t\tvar maskActive = false;\n\n\t\tvar pass, i, il = this.passes.length;\n\n\t\tfor ( i = 0; i < il; i ++ ) {\n\n\t\t\tpass = this.passes[ i ];\n\n\t\t\tif ( pass.enabled === false ) continue;\n    \n      var src = this.readBuffer;\n      if ( pass.hd ) { src = this.renderTargetHD; }\n      if ( pass.src ) { src = pass.src; }\n\n\t\t\tpass.renderToScreen = ( this.renderToScreen && this.isLastEnabledPass( i ) );\n\t\t\tpass.render( this.renderer, this.writeBuffer, src, deltaTime, maskActive );\n\n\t\t\tif ( pass.needsSwap ) {\n\n\t\t\t\tthis.swapBuffers();\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.renderer.setRenderTarget( currentRenderTarget );\n\n\t},\n\n\treset: function ( renderTarget ) {\n\n\t\tif ( renderTarget === undefined ) {\n\n\t\t\tvar size = this.renderer.getSize( new Vector2() );\n\t\t\trenderTarget = this.renderTarget1.clone();\n\t\t\trenderTarget.setSize( size.width, size.height );\n\n\t\t}\n\n\t\tthis.renderTarget1.dispose();\n\t\tthis.renderTarget2.dispose();\n\t\tthis.renderTarget1 = renderTarget;\n\t\tthis.renderTarget2 = renderTarget.clone();\n\n\t\tthis.writeBuffer = this.renderTarget1;\n\t\tthis.readBuffer = this.renderTarget2;\n\n\t},\n\n\tsetSize: function ( width, height, hdWidth, hdHeight ) {\n\n\t\tthis.renderTarget1.setSize( width, height );\n\t\tthis.renderTarget2.setSize( width, height );\n\n    if ( this.hd ) {\n      this.renderTargetHD.setSize( hdWidth, hdHeight );\n    }\n\n\t\tfor ( var i = 0; i < this.passes.length; i ++ ) {\n\n\t\t\tthis.passes[ i ].setSize(\n        this.hd && this.passes[i].hd ? hdWidth : width,\n        this.hd && this.passes[i].hd ? hdHeight : height );\n\n\t\t}\n\n\t}\n} );\n\n\nvar Pass$1 = function () {\n\n\t// if set to true, the pass is processed by the composer\n\tthis.enabled = true;\n\n\t// if set to true, the pass indicates to swap read and write buffer after rendering\n\tthis.needsSwap = true;\n\n\t// if set to true, the pass clears its buffer before rendering\n\tthis.clear = false;\n\n\t// if set to true, the result of the pass is rendered to screen. This is set automatically by EffectComposer.\n\tthis.renderToScreen = false;\n\n};\n\nObject.assign( Pass$1.prototype, {\n\n\tsetSize: function ( /* width, height */ ) {},\n\n\trender: function ( /* renderer, writeBuffer, readBuffer, deltaTime, maskActive */ ) {\n\n\t\tconsole.error( 'THREE.Pass: .render() must be implemented in derived pass.' );\n\n\t}\n\n} );\n\n// Helper for passes that need to fill the viewport with a single quad.\nPass$1.FullScreenQuad = ( function () {\n\n\tvar camera = new OrthographicCamera( - 1, 1, 1, - 1, 0, 1 );\n\tvar geometry = new PlaneBufferGeometry( 2, 2 );\n\n\tvar FullScreenQuad = function ( material ) {\n\n\t\tthis._mesh = new Mesh( geometry, material );\n\n\t};\n\n\tObject.defineProperty( FullScreenQuad.prototype, 'material', {\n\n\t\tget: function () {\n\n\t\t\treturn this._mesh.material;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._mesh.material = value;\n\n\t\t}\n\n\t} );\n\n\tObject.assign( FullScreenQuad.prototype, {\n\n\t\tdispose: function () {\n\n\t\t\tthis._mesh.geometry.dispose();\n\n\t\t},\n\n\t\trender: function ( renderer ) {\n\n\t\t\trenderer.render( this._mesh, camera );\n\n\t\t}\n\n\t} );\n\n\treturn FullScreenQuad;\n\n} )();\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nvar RenderPass = function ( scene, camera, overrideMaterial, clearColor, clearAlpha ) {\n\n\tPass.call( this );\n\n\tthis.scene = scene;\n\tthis.camera = camera;\n\n\tthis.overrideMaterial = overrideMaterial;\n\n\tthis.clearColor = clearColor;\n\tthis.clearAlpha = ( clearAlpha !== undefined ) ? clearAlpha : 0;\n\n\tthis.clear = true;\n\tthis.clearDepth = false;\n\tthis.needsSwap = false;\n\n};\n\nRenderPass.prototype = Object.assign( Object.create( Pass.prototype ), {\n\n\tconstructor: RenderPass,\n\n\trender: function ( renderer, writeBuffer, readBuffer /*, deltaTime, maskActive */ ) {\n\n\t\tvar oldAutoClear = renderer.autoClear;\n\t\trenderer.autoClear = false;\n\n\t\tvar oldAutoClearColor, oldAutoClearDepth, oldClearColor, oldClearAlpha, oldOverrideMaterial;\n\n\t\tif ( this.overrideMaterial !== undefined ) {\n\n\t\t\toldOverrideMaterial = this.scene.overrideMaterial;\n\n\t\t\tthis.scene.overrideMaterial = this.overrideMaterial;\n\n\t\t}\n\n\t\tif ( this.clearColor ) {\n\n\t\t\toldClearColor = renderer.getClearColor().getHex();\n\t\t\toldClearAlpha = renderer.getClearAlpha();\n\n\t\t\trenderer.setClearColor( this.clearColor, this.clearAlpha );\n\n\t\t}\n\n    if (this.autoClearColor === false) {\n      oldAutoClearColor = renderer.autoClearColor;\n      renderer.autoClearColor = false;\n    }\n    if (this.autoClearDepth === false) {\n      oldAutoClearDepth = renderer.autoClearDepth;\n      renderer.autoClearDepth = false;\n    }\n\n    if ( this.clearDepth ) {\n\n\t\t\trenderer.clearDepth();\n\n\t\t}\n\n\t\trenderer.setRenderTarget( this.renderToScreen ? null : readBuffer );\n\n\t\t// TODO: Avoid using autoClear properties, see https://github.com/mrdoob/three.js/pull/15571#issuecomment-465669600\n\t\tif ( this.clear ) renderer.clear( renderer.autoClearColor, renderer.autoClearDepth, renderer.autoClearStencil );\n\t\trenderer.render( this.scene, this.camera );\n\n\t\tif ( this.clearColor ) {\n\n\t\t\trenderer.setClearColor( oldClearColor, oldClearAlpha );\n\n\t\t}\n\n    if (this.autoClearColor === false) {\n      renderer.autoClearColor = oldAutoClearColor;\n    }\n    if (this.autoClearDepth === false) {\n      renderer.autoClearDepth = oldAutoClearDepth;\n    } \n\n\t\tif ( this.overrideMaterial !== undefined ) {\n\n\t\t\tthis.scene.overrideMaterial = oldOverrideMaterial;\n\n\t\t}\n\n\t\trenderer.autoClear = oldAutoClear;\n\n\t}\n\n} );\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nvar SavePass = function ( renderTarget ) {\n\n\tPass.call( this );\n\n\tif ( CopyShader === undefined )\n\t\tconsole.error( \"SavePass relies on CopyShader\" );\n\n\tvar shader = CopyShader;\n\n\tthis.textureID = \"tDiffuse\";\n\n\tthis.uniforms = UniformsUtils.clone( shader.uniforms );\n\n\tthis.material = new ShaderMaterial( {\n\n\t\tuniforms: this.uniforms,\n\t\tvertexShader: shader.vertexShader,\n\t\tfragmentShader: shader.fragmentShader\n\n\t} );\n\n\tthis.renderTarget = renderTarget;\n\n\tif ( this.renderTarget === undefined ) {\n\n\t\tthis.renderTarget = new WebGLRenderTarget( window.innerWidth, window.innerHeight, { minFilter: LinearFilter, magFilter: LinearFilter, format: RGBFormat, stencilBuffer: false } );\n\t\tthis.renderTarget.texture.name = \"SavePass.rt\";\n\n\t}\n\n\tthis.needsSwap = false;\n\n\tthis.fsQuad = new Pass.FullScreenQuad( this.material );\n\n};\n\nSavePass.prototype = Object.assign( Object.create( Pass.prototype ), {\n\n\tconstructor: SavePass,\n\n\trender: function ( renderer, writeBuffer, readBuffer ) {\n\n\t\tif ( this.uniforms[ this.textureID ] ) {\n\n\t\t\tthis.uniforms[ this.textureID ].value = readBuffer.texture;\n\n\t\t}\n\n\t\trenderer.setRenderTarget( this.renderTarget );\n\t\tif ( this.clear ) renderer.clear();\n\t\tthis.fsQuad.render( renderer );\n\n\t}\n\n} );\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nconst ShaderPass$1 = function ( shader, textureID ) {\n\n\tPass.call( this );\n\n\tthis.textureID = ( textureID !== undefined ) ? textureID : \"tDiffuse\";\n\n\tif ( shader instanceof ShaderMaterial ||\n\t     shader instanceof RawShaderMaterial ) {\n\n\t\tthis.uniforms = shader.uniforms;\n\n\t\tthis.material = shader;\n\n\t} else if ( shader ) {\n\n\t\tthis.uniforms = UniformsUtils.clone( shader.uniforms );\n\n\t\tthis.material = new RawShaderMaterial( {\n\n\t\t\tdefines: Object.assign( {}, shader.defines ),\n\t\t\tuniforms: this.uniforms,\n\t\t\tvertexShader: shader.vertexShader,\n\t\t\tfragmentShader: shader.fragmentShader\n\n\t\t} );\n\n\t}\n\n\tthis.fsQuad = new Pass.FullScreenQuad( this.material );\n\n};\n\nShaderPass$1.prototype = Object.assign( Object.create( Pass.prototype ), {\n\n\tconstructor: ShaderPass$1,\n\n\trender: function ( renderer, writeBuffer, readBuffer /*, deltaTime, maskActive */ ) {\n\n\t\tif ( this.uniforms[ this.textureID ] ) {\n\n\t\t\tthis.uniforms[ this.textureID ].value = readBuffer.texture;\n\n\t\t}\n\n\t\tthis.fsQuad.material = this.material;\n\n\t\tif ( this.renderToScreen ) {\n\n\t\t\trenderer.setRenderTarget( null );\n\t\t\tthis.fsQuad.render( renderer );\n\n\t\t} else {\n\n\t\t\trenderer.setRenderTarget( writeBuffer );\n\t\t\t// TODO: Avoid using autoClear properties, see https://github.com/mrdoob/three.js/pull/15571#issuecomment-465669600\n\t\t\tif ( this.clear ) renderer.clear( renderer.autoClearColor, renderer.autoClearDepth, renderer.autoClearStencil );\n\t\t\tthis.fsQuad.render( renderer );\n\n\t\t}\n\n\t},\n\n  compile: function ( renderer ) {\n    var tmpScene = new Scene();\n    var obj = new Object3D();\n    obj.material = this.material;\n    tmpScene.add( obj );\n    renderer.compile( tmpScene, this.fsQuad._camera );\n    tmpScene.children = [];\n  }\n} );\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nvar scene = new THREE.Scene();\nscene.hd = new THREE.Scene();\nscene.tilepickerScene = new THREE.Scene();\nscene.pickerScene = new THREE.Scene();\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nvar postprocessUniforms = {\n  tDiffuse: { type: 't', value: null },\n  uResolution: { type: 'v2', value: new THREE.Vector2( 1.0, 1.0 ) }\n};\n\nvar postProcessFragment = new Shader(`precision highp float;uniform sampler2D tDiffuse;uniform vec2 uResolution;varying vec2 vUv;\n#define FXAA_REDUCE_MIN   0.0078125 // (1.0/128.0)\n\n#define FXAA_REDUCE_MUL   0.03125   // (1.0/32.0)\n\n#define FXAA_SPAN_MAX     8.0\nconst vec3 a=vec3(0.299,0.587,0.114);const vec2 b=vec2(FXAA_SPAN_MAX);void main(){vec4 c=vec4(vUv+uResolution,vUv-uResolution);vec3 d=texture2D(tDiffuse,c.zw).rgb;vec3 e=texture2D(tDiffuse,c.xw).rgb;vec3 f=texture2D(tDiffuse,c.zy).rgb;vec3 g=texture2D(tDiffuse,c.xy).rgb;vec4 h=vec4(dot(d,a),dot(e,a),dot(f,a),dot(g,a));vec4 i=h.xzxy+h.ywzw;vec2 j=i.yz-i.xw;float k=FXAA_REDUCE_MUL*max(i.x+i.y,FXAA_REDUCE_MIN/FXAA_REDUCE_MUL);float l=min(abs(j.x),abs(j.y))+k;j=uResolution*clamp(j/l,-b,b);vec4 m=(texture2D(tDiffuse,vUv-j*0.16666666666667)+texture2D(tDiffuse,vUv+j*0.16666666666667));vec4 n=texture2D(tDiffuse,vUv);gl_FragColor=0.33333333333*(m+n);float o=distance(vUv,vec2(0.5));gl_FragColor.rgb*=1.0-0.17*smoothstep(0.42,0.65,o);}`);\n\nvar quadVertex = new Shader(`attribute vec3 position;attribute vec2 uv;varying vec2 vUv;void main(){vUv=uv;gl_Position=vec4(position,1.0);}`);\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nvar state$1 = ContainerStore$1.getState();\nvar parameters = {\n  type: ( webgl.render565 ? THREE.UnsignedShort565Type :\n    THREE.UnsignedByteType ),\n  minFilter: THREE.LinearFilter,\n  magFilter: THREE.LinearFilter,\n  format: THREE.RGBFormat,\n  stencilBuffer: false\n};\n\nvar resolution = new THREE.Vector2( 1.0 / state$1.canvasWidth,\n  1.0 / state$1.canvasHeight );\npostprocessUniforms.uResolution.value.copy( resolution );\n\nvar renderTarget = new THREE.WebGLRenderTarget( state$1.renderWidth, state$1.renderHeight, parameters );\n\nContainerStore$1.listen( function ( state ) {\n  composer.setSize(\n    state.renderWidth, state.renderHeight,\n    state.canvasWidth, state.canvasHeight );\n  var resolution = new THREE.Vector2( 1.0 / state.canvasWidth,\n    1.0 / state.canvasHeight );\n  postprocessUniforms.uResolution.value.copy( resolution );\n} );\n\nvar enableHDPass = webgl.depthTexture;\nvar composer = new EffectComposer( renderer, renderTarget, enableHDPass );\n\n// Render actual scene\nvar renderPass = new RenderPass( scene, camera );\ncomposer.addPass( renderPass );\n\nif ( enableHDPass ) {\n  // Copy rendered scene to hd render target\n  var savePass = new SavePass( composer.renderTargetHD );\n  savePass.src = composer.renderTarget2;\n  composer.addPass( savePass );\n}\n\n// The HD pass is drawn after everything else,\n// optionally in a higher resolution (this is dependent\n// on an extension). As we are drawing on top of the\n// standard scene, we want to maintain color and depth,\n// so we disable autoClear.\n// In the case of a HD pass,  we are using a different\n// buffer, so we do want to clear the depth, otherwise\n// we'll keep the depth values from last time\nvar hdrenderPass = new RenderPass( scene.hd, camera );\nhdrenderPass.autoClearColor = false;\nhdrenderPass.autoClearDepth = enableHDPass;\nhdrenderPass.hd = enableHDPass;\ncomposer.addPass( hdrenderPass );\n\n// Add postprocessing\nvar postprocessShader = {\n  name: 'postprocess',\n  uniforms: postprocessUniforms,\n  vertexShader: quadVertex.value,\n  fragmentShader: postProcessFragment.value\n};\nvar postprocessPass = new ShaderPass$1( postprocessShader );\npostprocessPass.uniforms = postprocessUniforms;\npostprocessPass.material.uniforms = postprocessUniforms;\npostprocessPass.hd = enableHDPass;\n// Disable ping-ponging. Means we create one less render target\n// saving on GPU memory (3MB or so)\npostprocessPass.needsSwap = false;\ncomposer.addPass( postprocessPass );\n//defer( function () { postprocessPass.compile( renderer ); } );\n\n// Tie rendering to render notifications\nvar tick = composer.render.bind( composer );\n\n// Ensure that other actions get called before\n// we render (otherwise LOD etc may not update)\nenqueue( function () { RenderStore$1.listen( tick ); } );\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nvar depthUniforms = {};\nif ( webgl.depthTexture ) {\n  depthUniforms.uDepth = { type: 't', value: composer.renderTarget2.depthTexture };\n}\n\ndepthUniforms.uReadDepthOverride = { type: 'f', value: 1.0 };\n\nCameraStore$1.listen( function ( state ) {\n  depthUniforms.uReadDepthOverride.value =\n    state.controls.lock2D ? 0.0 : 1.0;\n} );\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nvar EE = 1000.0;\nvar cutoffAngle = 1.61107315568707; //pi/1.95;\nvar invSteepness = 0.66666666666667;\nvar rayleigh = new THREE.Vector3( 5.804542996261093e-06, 1.3562911419845635e-05, 3.026590246882488e-05 );\nvar mie = new THREE.Vector3( 7.633915830775757e-05, 7.544890573273999e-05, 7.411352687021361e-05 );\n\n\nvar skyUniforms = {\n  luminance: { type: 'f', value: 1 },\n  turbidity: { type: 'f', value: 2 },\n  reileigh: { type: 'f', value: 1 },\n  mieCoefficient: { type: 'f', value: 0.005 },\n  mieDirectionalG: { type: 'f', value: 0.8 },\n  sunPosition: { type: 'v3', value: new THREE.Vector3( 0, 0, 0 ) },\n  // Derived uniforms\n  sunDirection: { type: 'v3', value: new THREE.Vector3( 0, 0, 0 ) },\n  lightDirection: { type: 'v3', value: new THREE.Vector3( 0, 0, 0 ) },\n  betaRM: { type: 'v3', value: new THREE.Vector3( 0, 0, 0 ) },\n  betaRnorm: { type: 'v3', value: new THREE.Vector3( 0, 0, 0 ) },\n  betaMnorm: { type: 'v3', value: new THREE.Vector3( 0, 0, 0 ) },\n  // To avoid using many uniforms, pass constants in block\n  // sunE, hgPhaseA, hgPhaseB & LinWeight\n  constants: { type: 'v4', value: new THREE.Vector4( 0, 0, 0, 0 ) },\n  gamma: { type: 'f', value: 0 },\n  tonemapScale: { type: 'f', value: 0 },\n\n  // Calculate derived uniforms\n  update: function () {\n    // Sun direction (using different coordinate system, so convert)\n    // TODO unify on single coordinate system\n    var sunPosition = skyUniforms.sunPosition.value;\n    var sunDirection = sunPosition.clone().normalize();\n    var tmp = sunDirection.z;\n    sunDirection.z = sunDirection.y;\n    sunDirection.y = tmp;\n    skyUniforms.sunDirection.value.copy( sunDirection );\n\n    // Normal coordinate system for other shaders\n    var lightDirection = sunPosition.clone().normalize();\n    skyUniforms.lightDirection.value.copy( lightDirection );\n\n    // Hg phase constants (refactored to minimize shader computation)\n    var g = skyUniforms.mieDirectionalG.value;\n    var B = Math.pow( 0.07957747154595 * ( 1 - g * g ), -0.666666666 );\n    var hgPhaseA = -2 * B * g;\n    var hgPhaseB = B * ( g * g + 1 );\n    skyUniforms.constants.value.y = hgPhaseA;\n    skyUniforms.constants.value.z = hgPhaseB;\n\n    // Save on calulation power of sun direction\n    var LinWeight = Math.pow( 1.0 - sunDirection.y, 5.0 );\n    LinWeight = THREE.Math.clamp( LinWeight, 0.0, 1.0 );\n    skyUniforms.constants.value.w = LinWeight;\n\n    // Extinction\n    var sunFade = 1.0 - THREE.Math.clamp( 1.0 - Math.exp( sunPosition.z / 450000.0 ), 0.0, 1.0 );\n    var reileighCoefficient = skyUniforms.reileigh.value + sunFade - 1.0;\n\n    var exponent = ( Math.acos( sunDirection.y ) - cutoffAngle ) * invSteepness;\n    var sunE = EE * Math.max( 0.0, 1.0 - Math.exp( exponent ) );\n    skyUniforms.constants.value.x = 19000 * sunE;\n\n    var turbidity = skyUniforms.turbidity.value;\n    var mieCoefficient = skyUniforms.mieCoefficient.value;\n\n    var betaR = rayleigh.clone().multiplyScalar( reileighCoefficient );\n    var betaM = mie.clone().multiplyScalar( turbidity * mieCoefficient );\n\n    // betaMnorm & betaRnorm don't really mean anything, just save of shader work\n    var A = new THREE.Vector3( sunE / ( betaR.x + betaM.x ),\n      sunE / ( betaR.y + betaM.y ),\n      sunE / ( betaR.z + betaM.z ) );\n    var betaRnorm = betaR.clone().multiply( A ).multiplyScalar( 0.01492077591487 );\n    var betaMnorm = betaM.clone().multiply( A );\n\n    // Fold in zeniths\n    betaR.multiplyScalar( 8400 );\n    betaM.multiplyScalar( 1250 );\n\n    skyUniforms.betaRM.value.copy( betaR.add( betaM ) );\n    skyUniforms.betaRnorm.value.copy( betaRnorm );\n    skyUniforms.betaMnorm.value.copy( betaMnorm );\n\n    var gamma = 1.0 / ( 1.2 + ( 1.2 * sunFade ) );\n    skyUniforms.gamma.value = gamma;\n\n    var luminance = skyUniforms.luminance.value;\n\n    // Magic 1.7 value to match tonemap of sky to scene\n    var tonemapScale = 1.7 * Math.log( 2.0 / Math.pow( luminance, 4 ) ) / Math.LN2;\n    skyUniforms.tonemapScale.value = tonemapScale;\n  }\n};\n\nskyUniforms.update();\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nvar A = 0.15;\nvar B = 0.50;\nvar C = 0.10;\nvar D = 0.20;\nvar E = 0.02;\nvar F = 0.30;\n\nvar RawTonemap = function ( x ) {\n  return ( ( x * ( A * x + C * B ) + D * E ) / ( x * ( A * x + B ) + D * F ) ) - E / F;\n};\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nvar tonemapUniforms = {\n  exposureBias: { type: 'f', value: 1 },\n  whitePoint: { type: 'f', value: 11.2 },\n\n  // Calculate the white scale from the white point\n  uTonemapExposureBias: { type: 'f', value: 1 },\n  uTonemapWhiteScale: { type: 'f', value: 1 },\n  update: function () {\n    tonemapUniforms.uTonemapExposureBias.value =\n      tonemapUniforms.exposureBias.value;\n    tonemapUniforms.uTonemapWhiteScale.value =\n      1.0 / RawTonemap( tonemapUniforms.whitePoint.value );\n  }\n};\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// Duplicate calculate to sky shader\nvar skyColor = function ( direction ) {\n  var cosZenithAngle = Math.max( 0.0, direction.y );\n  // Approximate acos( x ) by pi/2 - x\n  // This allows us to simplify and error is only large when looking up\n  var denom = cosZenithAngle + Math.pow( 17.6579343808112 + cosZenithAngle * 260.41830500372932, -1.253 );\n\n  // combined extinction factor\n  var betaRM = skyUniforms.betaRM.value.clone();\n  var Fex = betaRM.multiplyScalar( -1 / denom );\n  Fex.x = Math.exp( Fex.x );\n  Fex.y = Math.exp( Fex.y );\n  Fex.z = Math.exp( Fex.z );\n\n  // in scattering\n  var sunDirection = skyUniforms.sunDirection.value.clone();\n  var constants = skyUniforms.constants.value.clone();\n  var cosTheta = direction.dot( sunDirection );\n  var rPhase = cosTheta + 1.0;\n  var betaRTheta = skyUniforms.betaRnorm.value.clone();\n  var betaMTheta = skyUniforms.betaMnorm.value.clone();\n  betaRTheta.multiplyScalar( 4.0 + rPhase * rPhase );\n  betaMTheta.multiplyScalar( Math.pow( constants.y * cosTheta + constants.z, -1.5 ) );\n\n  var tmp = betaRTheta.clone().add( betaMTheta );\n  var Lin = new THREE.Vector3(\n    Math.pow( tmp.x * ( 1.0 - Fex.x ), 1.5 ),\n    Math.pow( tmp.y * ( 1.0 - Fex.y ), 1.5 ),\n    Math.pow( tmp.z * ( 1.0 - Fex.z ), 1.5 )\n  );\n\n  //vec3 Lin = spow( tmp * ( 1.0 - Fex ), vec3( 1.5 ) );\n  Lin.x *= ( 1 - constants.w ) + constants.w * Math.sqrt( tmp.x * Fex.x );\n  Lin.y *= ( 1 - constants.w ) + constants.w * Math.sqrt( tmp.y * Fex.y );\n  Lin.z *= ( 1 - constants.w ) + constants.w * Math.sqrt( tmp.z * Fex.z );\n  //Lin *= mix( vec3( 1.0 ), ssqrt( tmp * Fex ), constants.w );\n\n  // nightsky\n  var L0 = Fex.clone().multiplyScalar( 0.1 );\n\n  //#ifdef SUN_DISK\n  //L0 += constants.x * Fex * smoothstep( 0.9999566769, 0.9999766769, cosTheta );\n  //#endif\n\n  // Combine all components\n  var color = Lin.clone().add( L0 ).multiplyScalar( 0.04 ).add( new THREE.Vector3( 0.0, 0.0003, 0.00075 ) );\n  //0.04 * ( Lin + L0 ) + vec3( 0.0, 0.0003, 0.00075 );\n  var tonemapScale = skyUniforms.tonemapScale.value;\n  color.multiplyScalar( tonemapScale );\n\n  // Precomputed whitescale with W = 1000\n  //color = 1.07487246756328 * Tonemap( tonemapScale * color );\n  var gamma = skyUniforms.gamma.value;\n  var bias = tonemapUniforms.uTonemapExposureBias.value;\n  var whiteScale = tonemapUniforms.uTonemapWhiteScale.value;\n  color.x = Math.pow( bias * RawTonemap( whiteScale * color.x ), gamma );\n  color.y = Math.pow( bias * RawTonemap( whiteScale * color.y ), gamma );\n  color.z = Math.pow( bias * RawTonemap( whiteScale * color.z ), gamma );\n\n  return new THREE.Color( color.x, color.y, color.z );\n};\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nvar direction = new THREE.Vector3();\nvar lastDirection = new THREE.Vector3();\nvar forceUpdate = false;\n\n// Uniforms required where drawing basic fog\nvar fogUniforms = {\n  uFogDropoff: { type: 'f', value: 0.0006 },\n  uFogIntensity: { type: 'f', value: 0.1 },\n  uFogColor: { type: 'c', value: new THREE.Color() },\n  update: function ( state ) {\n    forceUpdate = !state;\n    state = state || CameraStore$1.getState();\n\n    // Sky uses different coordinate system\n    direction.copy( state.target ).sub( state.position );\n\n    direction.z = direction.y;\n\n    // Flatten y component to look at horizon\n    direction.y = 0.0;\n    direction.normalize();\n\n    if ( forceUpdate || direction.distanceToSquared( lastDirection ) > 0.01 ) {\n      fogUniforms.uFogColor.value.copy( skyColor( direction ) );\n      lastDirection.copy( direction );\n    }\n  }\n};\n\nCameraStore$1.listen( fogUniforms.update );\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nconst ImageryDatasource = new BaseDatasource( {\n  textureSize: IMAGERY_TILE_SIZE,\n  poolSize: IMAGERY_POOL_SIZE\n} );\n\nAppStore$1.listen( ( { datasource } ) => {\n  if ( datasource.imagery ) {\n    for ( let key of [ 'apiKey', 'urlFormat' ] ) {\n      ImageryDatasource[ key ] = datasource.imagery[ key ];\n    }\n  }\n} );\n\nvar lineVertex = new Shader(`precision highp float;uniform mat4 viewMatrix;uniform mat4 projectionMatrix;uniform vec3 cameraPosition;attribute vec3 tag;attribute vec4 tangent;attribute vec3 position;attribute vec4 color;uniform float uThickness;uniform vec3 uSelectedTag;varying vec4 vColor;varying float vAlpha;uniform vec2 uViewportInverse;vec4 a(const in vec3 b,const in float c){vec4 d=vec4(b,1.0);vec4 e=projectionMatrix*viewMatrix*d;d.xyz+=tangent.xyz;vec4 f=projectionMatrix*viewMatrix*d;vec2 g=f.xy/f.w-e.xy/e.w;vec2 h=g.yx*vec2(1.0,-1.0);h=c*e.w*normalize(h)*uViewportInverse;e.xy+=h;return e;}\n#define VIRTUAL_TEXTURE_ARRAY_BLOCKS 4.0\n\n#define VIRTUAL_TEXTURE_ARRAY_SIZE 512.0\n\n#define TEX_SIZE (VIRTUAL_TEXTURE_ARRAY_SIZE * VIRTUAL_TEXTURE_ARRAY_BLOCKS)\nconst vec2 i=vec2(1.0/TEX_SIZE,0.0);vec4 j(const in sampler2D k,in vec2 l){l-=0.5*i.xx;vec2 m=fract(l*TEX_SIZE);vec2 n=l-i.xx*m+0.5*i.xx;\n#ifdef HEIGHT_LOOKUP_BIAS\nvec4 o=texture2D(k,n,-10.0);vec4 p=texture2D(k,n+i,-10.0);vec4 q=texture2D(k,n+i.yx,-10.0);vec4 r=texture2D(k,n+i.xx,-10.0);\n#else\nvec4 o=texture2D(k,n);vec4 p=texture2D(k,n+i);vec4 q=texture2D(k,n+i.yx);vec4 r=texture2D(k,n+i.xx);\n#endif\nvec4 s=mix(o,p,m.x);vec4 t=mix(q,r,m.x);return mix(s,t,m.y);}vec4 u(in sampler2D v,in vec2 l,in float w){vec2 x=vec2(mod(float(w),VIRTUAL_TEXTURE_ARRAY_BLOCKS),floor(float(w)/VIRTUAL_TEXTURE_ARRAY_BLOCKS));const float y=0.5;vec2 z=vec2(y,VIRTUAL_TEXTURE_ARRAY_SIZE-y)/VIRTUAL_TEXTURE_ARRAY_SIZE;vec2 A=(clamp(l,z.x,z.y)+x)/VIRTUAL_TEXTURE_ARRAY_BLOCKS;\n#ifdef MANUAL_TEXTURE_BILINEAR\nreturn j(v,A);\n#else\nreturn texture2D(v,A);\n#endif\n}uniform lowp sampler2D indirectionTexture;uniform vec2 uGlobalOffset;uniform float uSceneScale;const float B=0.0008176665341588574;float C(in float D){float E=3.141592653589793-0.006135923151542565*D;float F=dot(vec2(0.5),exp(vec2(E,-E)));return F/(B*uSceneScale);}uniform lowp sampler2D elevationArray;float G(in vec2 d){const float H=32.0;const float I=1024.0;vec2 J=d.xy-uGlobalOffset;J/=(uSceneScale*H);J*=vec2(1.0,-1.0);vec2 K=J/I;const vec2 L=vec2(0.5);vec2 M=(floor(J-L)+L);M+=step(L,J-M);vec2 N=M/I;vec4 O=texture2D(indirectionTexture,N);float w=O.r;float P=O.g;vec2 Q=O.ba;vec2 A=K*P+Q;return C(J.y)*u(elevationArray,A,w).a;}void main(){vec3 b=position;b.z+=G(b.xy);gl_Position=a(b,uThickness);vColor=color;float R=step(distance(tag,uSelectedTag),0.0);gl_Position.z-=0.5+0.01*R;vColor.rgb=mix(vColor.rgb,vec3(1.0),0.8*R);vAlpha=sign(tangent.w);}`);\n\nvar lineFragment = new Shader(`precision highp float;uniform float uCutoff;uniform vec4 uOutlineColor;varying vec4 vColor;varying float vAlpha;void main(){vec2 a=smoothstep(vec2(0.4,1.0)*uCutoff,vec2(0.5,1.0),abs(vec2(vAlpha)));a.x*=uOutlineColor.a;gl_FragColor=mix(vColor,vec4(uOutlineColor.rgb,0.0),a.xxxy);}`);\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nconst lineUniforms = {\n  uViewportInverse: { type: 'v2', value: new THREE.Vector2( 1.0, 1.0 ) },\n};\n\nContainerStore$1.listen( ( { height, width } ) => {\n  lineUniforms.uViewportInverse.value.set( 1.0 / width, 1.0 / height );\n} );\n\nvar markerVertex = new Shader(`precision highp float;uniform mat4 viewMatrix;uniform mat4 projectionMatrix;uniform mat4 uOrthoTransform;uniform vec3 cameraPosition;uniform float uLodScale;uniform vec3 uSelectedTag;uniform float uPixelRatio;uniform vec2 uViewportCanvasInverse;uniform float uReadDepthOverride;\n#ifdef READ_DEPTH\nuniform sampler2D uDepth;\n#endif\nattribute vec2 position;attribute vec4 anchor;attribute vec4 atlas;attribute vec4 background;attribute vec4 clipping;attribute vec4 color;attribute vec3 layout;attribute vec4 normal;attribute vec4 offset;attribute vec4 tag;varying vec4 vUv;varying vec4 vBox;varying vec4 vBackground;varying vec4 vColor;varying float vReadDepth;varying vec3 vLayout;float a(inout vec3 b){float c=dot(b,b);float d=inversesqrt(c);b=d*b;return c*d;}\n#define VIRTUAL_TEXTURE_ARRAY_BLOCKS 4.0\n\n#define VIRTUAL_TEXTURE_ARRAY_SIZE 512.0\n\n#define TEX_SIZE (VIRTUAL_TEXTURE_ARRAY_SIZE * VIRTUAL_TEXTURE_ARRAY_BLOCKS)\nconst vec2 e=vec2(1.0/TEX_SIZE,0.0);vec4 f(const in sampler2D g,in vec2 h){h-=0.5*e.xx;vec2 i=fract(h*TEX_SIZE);vec2 j=h-e.xx*i+0.5*e.xx;\n#ifdef HEIGHT_LOOKUP_BIAS\nvec4 k=texture2D(g,j,-10.0);vec4 l=texture2D(g,j+e,-10.0);vec4 m=texture2D(g,j+e.yx,-10.0);vec4 n=texture2D(g,j+e.xx,-10.0);\n#else\nvec4 k=texture2D(g,j);vec4 l=texture2D(g,j+e);vec4 m=texture2D(g,j+e.yx);vec4 n=texture2D(g,j+e.xx);\n#endif\nvec4 o=mix(k,l,i.x);vec4 p=mix(m,n,i.x);return mix(o,p,i.y);}vec4 q(in sampler2D r,in vec2 h,in float s){vec2 t=vec2(mod(float(s),VIRTUAL_TEXTURE_ARRAY_BLOCKS),floor(float(s)/VIRTUAL_TEXTURE_ARRAY_BLOCKS));const float u=0.5;vec2 v=vec2(u,VIRTUAL_TEXTURE_ARRAY_SIZE-u)/VIRTUAL_TEXTURE_ARRAY_SIZE;vec2 w=(clamp(h,v.x,v.y)+t)/VIRTUAL_TEXTURE_ARRAY_BLOCKS;\n#ifdef MANUAL_TEXTURE_BILINEAR\nreturn f(r,w);\n#else\nreturn texture2D(r,w);\n#endif\n}uniform lowp sampler2D indirectionTexture;uniform vec2 uGlobalOffset;uniform float uSceneScale;const float x=0.0008176665341588574;float y(in float z){float A=3.141592653589793-0.006135923151542565*z;float B=dot(vec2(0.5),exp(vec2(A,-A)));return B/(x*uSceneScale);}uniform lowp sampler2D elevationArray;float C(in vec2 D){const float E=32.0;const float F=1024.0;vec2 G=D.xy-uGlobalOffset;G/=(uSceneScale*E);G*=vec2(1.0,-1.0);vec2 H=G/F;const vec2 I=vec2(0.5);vec2 J=(floor(G-I)+I);J+=step(I,G-J);vec2 K=J/F;vec4 L=texture2D(indirectionTexture,K);float s=L.r;float M=L.g;vec2 N=L.ba;vec2 w=H*M+N;return y(G.y)*q(elevationArray,w,s).a;}\n#define SIZE vec2( 512.0, 1024.0 )\nvoid main(){vec3 O=offset.xyz;O.z=C(O.xy);vBackground=background;vColor=color;vLayout=uPixelRatio*layout;vReadDepth=clipping.y*uReadDepthOverride;vec3 P=cameraPosition-O;float Q=a(P);vec2 R=vec2(1.0,-1.0)*position;vec2 S=0.5*R+vec2(0.5);vUv.z=step(distance(tag.xyz,uSelectedTag),0.0);vec2 T=vec2(normal.w,offset.w)+1000000.0*vUv.zz;T=smoothstep(T,vec2(0.95,0.9)*T,vec2(Q));vUv.w=(0.6*T.x+0.4)*T.y;vUv.z*=tag.w;vec2 U=mix(atlas.ww*vec2(SIZE.y/SIZE.x,1.0),atlas.zw,T.x);vUv.xy=atlas.xy+U*S;vUv.w*=smoothstep(0.0,0.15,clipping.y+dot(P,normal.xyz));vUv.w*=step(0.3,vUv.w);vec2 u=layout.xx+layout.yy;vUv.xy+=(u*R)/SIZE;vec2 V=SIZE*U+2.0*u;V*=uPixelRatio;float W=min(0.5*Q,100.0+200.0*clipping.x);vec4 D=vec4(O+W*P,1.0);gl_Position=projectionMatrix*viewMatrix*D;vec2 X=2.0*gl_Position.w*uViewportCanvasInverse;\n#ifdef READ_DEPTH\nvec3 Y=0.5*gl_Position.xyz/gl_Position.w+vec3(0.5);float Z=texture2D(uDepth,Y.xy).x;float ba=projectionMatrix[3][2];Z/=1.0+0.02*Z/ba;vUv.w*=step(clipping.x*Y.z,Z);\n#endif\ngl_Position.xy=X*floor(gl_Position.xy/X+vec2(0.5));vec2 bb=0.5*X*V;gl_Position.xy+=X*(0.5*anchor.xy*V+anchor.zw);gl_Position.xy-=bb;const vec2 bc=vec2(0.5);vBox.xy=(gl_Position.xy+bb-bc)/X+vec2(0.5)/uViewportCanvasInverse;vBox.zw=V;vec2 bd=(position+vec2(1.0))*bb;bd-=bc;gl_Position.xy+=step(0.0001,vUv.w)*bd;vLayout.z=min(vLayout.z,0.5*vBox.w-vLayout.y);vLayout.z=max(0.0001,vLayout.z);}`);\n\nvar markerFragment = new Shader(`precision highp float;\n#ifdef READ_DEPTH\nuniform sampler2D uDepth;uniform vec2 uViewportCanvasInverse;\n#endif\nuniform sampler2D uMap;varying vec4 vUv;varying vec4 vBox;varying vec4 vBackground;varying vec4 vColor;varying float vReadDepth;varying vec3 vLayout;\n#define SIZE 512.0\nvoid main(){\n#ifdef READ_DEPTH\nfloat a=texture2D(uDepth,uViewportCanvasInverse*gl_FragCoord.xy).x;float b=vUv.w*step(vReadDepth*gl_FragCoord.z,a);\n#else\nfloat b=vUv.w;\n#endif\ngl_FragColor=vBackground;vec2 c=0.5*vBox.zw-vec2(vLayout.x+vLayout.y);vec2 d=clamp(gl_FragCoord.xy,vBox.xy-c,vBox.xy+c);float e=step(distance(d,gl_FragCoord.xy),0.0);vec4 f=texture2D(uMap,vUv.xy);vec4 g=step(vec4(1.0,3.0,2.0,4.0),vec4(vUv.y));g*=step(vec4(vUv.y),vec4(2.0,4.0,3.0,5.0));float h=length(g);f=mix(f,vec4(vec3(1.0),dot(g,f)),h);f.a*=e;f*=vColor;gl_FragColor.rgb=mix(gl_FragColor.rgb,f.rgb,f.a);gl_FragColor.a=max(gl_FragColor.a,f.a);float i=vLayout.z;c=0.5*vBox.zw-vec2(i+vLayout.y);d=clamp(gl_FragCoord.xy,vBox.xy-c,vBox.xy+c);float j=distance(d,gl_FragCoord.xy);c=vec2(max(i-1.0,0.0),i);float k=smoothstep(c.x,c.y,j);k*=step(0.4999,vLayout.y);gl_FragColor=mix(gl_FragColor,vec4(1.0),k);c+=vLayout.yy;gl_FragColor.a*=smoothstep(c.y,c.x,j);gl_FragColor.rgb+=vUv.z;gl_FragColor.a*=b;if(gl_FragColor.a<0.0001){discard;}}`);\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nconst markerUniforms = {\n  uMap: { type: 't', value: null },\n  uPixelRatio: { type: 'f', value: 1.0 },\n  uViewportCanvasInverse: { type: 'v2', value: new THREE.Vector2( 1.0, 1.0 ) }\n};\n\nContainerStore$1.listen( ( { canvasHeight, pixelRatio, canvasWidth } ) => {\n  markerUniforms.uViewportCanvasInverse.value.set(\n    1.0 / canvasWidth, 1.0 / canvasHeight );\n  markerUniforms.uPixelRatio.value = pixelRatio;\n} );\n\nvar skyVertex = new Shader(`uniform mat4 modelViewMatrix;uniform mat4 projectionMatrix;uniform vec3 cameraPosition;attribute vec3 position;varying vec3 vPosition;void main(){vPosition=position.xzy;vPosition.y=max(0.0,vPosition.y);vec3 a=position;a.xy+=cameraPosition.xy;gl_Position=projectionMatrix*modelViewMatrix*vec4(a,1.0);}`);\n\nvar skyFragment = new Shader(`precision highp float;varying vec3 vPosition;uniform vec3 sunDirection;uniform vec3 betaRM;uniform vec3 betaRnorm;uniform vec3 betaMnorm;uniform vec4 constants;uniform float gamma;uniform float tonemapScale;float a(const float b,const float c){return pow(abs(b),c);}vec3 a(const vec3 b,const vec3 c){return pow(abs(b),c);}vec3 d(const vec3 b){return sqrt(abs(b));}const float e=0.15;const float f=0.50;const float g=0.10;const float h=0.20;const float i=0.02;const float j=0.30;uniform float uTonemapExposureBias;uniform float uTonemapWhiteScale;vec3 k(vec3 b){return ((b*(e*b+g*f)+h*i)/(b*(e*b+f)+h*j))-i/j;}vec3 l(vec3 m){return uTonemapExposureBias*k(uTonemapWhiteScale*m);}vec3 n(vec3 o){float p=max(0.0,o.y);float q=p+a(17.6579343808112+p*260.41830500372932,-1.253);vec3 r=exp(-betaRM/q);float s=dot(o,sunDirection);float t=s+1.0;vec3 u=betaRnorm*(4.0+t*t);vec3 v=betaMnorm*a(constants.y*s+constants.z,-1.5);vec3 w=u+v;vec3 x=a(w*(1.0-r),vec3(1.5));x*=mix(vec3(1.0),d(w*r),constants.w);vec3 y=0.1*r;\n#ifdef SUN_DISK\ny+=constants.x*r*smoothstep(0.9999566769,0.9999766769,s);\n#endif\nvec3 m=0.04*(x+y)+vec3(0.0,0.0003,0.00075);m=l(tonemapScale*m);return a(m,vec3(gamma));}void main(){vec3 o=normalize(vPosition);vec3 m=n(o);gl_FragColor=vec4(m,1.0);}`);\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nfunction FeaturesStore() {\n  this.selected = null;\n\n  this.bindListeners( {\n    animateAlongFeature: UserActions.animateAlongFeature,\n    onFeatureSelected: UserActions.featureSelected\n  } );\n}\n\n\nFeaturesStore.prototype.animateAlongFeature = function () {\n  this.selected = null;\n};\n\nFeaturesStore.prototype.onFeatureSelected = function ( feature ) {\n  this.selected = feature;\n};\n\nFeaturesStore.displayName = 'FeaturesStore';\nvar FeaturesStore$1 = alt.createStore( FeaturesStore );\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\n// Tag is used to identify the hovered over feature\nconst tagUniforms = {\n  uSelectedTag: { type: 'c', value: new THREE.Color() }\n};\n\nFeaturesStore$1.listen( ( { selected } ) => {\n  var id = selected && selected.tag ? selected.tag : 65536;\n  tagUniforms.selectedTag.value.set( id );\n} );\n\nvar terrainVertex = new Shader(`precision highp float;uniform mat4 viewMatrix;uniform mat4 projectionMatrix;uniform vec3 cameraPosition;attribute vec4 position;uniform vec4 uOffset;uniform vec4 uImageryUvOffset;varying vec4 vUV;varying float D;\n#define VIRTUAL_TEXTURE_ARRAY_BLOCKS 4.0\n\n#define VIRTUAL_TEXTURE_ARRAY_SIZE 512.0\n\n#define TEX_SIZE (VIRTUAL_TEXTURE_ARRAY_SIZE * VIRTUAL_TEXTURE_ARRAY_BLOCKS)\nconst vec2 a=vec2(1.0/TEX_SIZE,0.0);vec4 b(const in sampler2D c,in vec2 d){d-=0.5*a.xx;vec2 e=fract(d*TEX_SIZE);vec2 f=d-a.xx*e+0.5*a.xx;\n#ifdef HEIGHT_LOOKUP_BIAS\nvec4 g=texture2D(c,f,-10.0);vec4 h=texture2D(c,f+a,-10.0);vec4 i=texture2D(c,f+a.yx,-10.0);vec4 j=texture2D(c,f+a.xx,-10.0);\n#else\nvec4 g=texture2D(c,f);vec4 h=texture2D(c,f+a);vec4 i=texture2D(c,f+a.yx);vec4 j=texture2D(c,f+a.xx);\n#endif\nvec4 k=mix(g,h,e.x);vec4 l=mix(i,j,e.x);return mix(k,l,e.y);}vec4 m(in sampler2D n,in vec2 d,in float o){vec2 p=vec2(mod(float(o),VIRTUAL_TEXTURE_ARRAY_BLOCKS),floor(float(o)/VIRTUAL_TEXTURE_ARRAY_BLOCKS));const float q=0.5;vec2 r=vec2(q,VIRTUAL_TEXTURE_ARRAY_SIZE-q)/VIRTUAL_TEXTURE_ARRAY_SIZE;vec2 s=(clamp(d,r.x,r.y)+p)/VIRTUAL_TEXTURE_ARRAY_BLOCKS;\n#ifdef MANUAL_TEXTURE_BILINEAR\nreturn b(n,s);\n#else\nreturn texture2D(n,s);\n#endif\n}uniform lowp sampler2D indirectionTexture;uniform vec2 uGlobalOffset;uniform float uSceneScale;const float t=0.0008176665341588574;float u(in float v){float w=3.141592653589793-0.006135923151542565*v;float x=dot(vec2(0.5),exp(vec2(w,-w)));return x/(t*uSceneScale);}uniform lowp sampler2D elevationArray;float y(in vec2 z){const float A=32.0;const float B=1024.0;vec2 C=z.xy-uGlobalOffset;C/=(uSceneScale*A);C*=vec2(1.0,-1.0);vec2 D=C/B;const vec2 E=vec2(0.5);vec2 F=(floor(C-E)+E);F+=step(E,C-F);vec2 G=F/B;vec4 H=texture2D(indirectionTexture,G);float o=H.r;float I=H.g;vec2 J=H.ba;vec2 s=D*I+J;return u(C.y)*m(elevationArray,s,o).a;}void main(){vec4 z=vec4(position.xy,0.0,1.0);z.xy*=uOffset.z;z.xy+=uOffset.xy;vec2 K=10.0*floor(position.zw/10.0);vec2 d=position.zw-K;z.z=y(z.xy);z.z-=0.01*uOffset.z*K.x;vUV.xy=uImageryUvOffset.z*d.xy+uImageryUvOffset.xy;vUV.zw=d.xy;D=distance(cameraPosition,z.xyz);gl_Position=projectionMatrix*viewMatrix*z;}`);\n\nvar terrainFragment = new Shader(`precision highp float;uniform vec4 uImageryUvOffset;varying vec4 vUV;varying float D;uniform lowp sampler2D imageryArray;uniform float uFogDropoff;uniform float uFogIntensity;uniform vec3 uFogColor;float a(in float b){float c=uFogIntensity*(1.0-exp(-b*uFogDropoff));return clamp(c,0.0,1.0);}float a(in vec3 d,in vec3 e){float b=distance(d,e);return a(b);}\n#define VIRTUAL_TEXTURE_ARRAY_BLOCKS 16.0\n\n#define VIRTUAL_TEXTURE_ARRAY_SIZE 256.0\n\n#define TEX_SIZE (VIRTUAL_TEXTURE_ARRAY_SIZE * VIRTUAL_TEXTURE_ARRAY_BLOCKS)\nconst vec2 f=vec2(1.0/TEX_SIZE,0.0);vec4 g(const in sampler2D h,in vec2 i){i-=0.5*f.xx;vec2 j=fract(i*TEX_SIZE);vec2 k=i-f.xx*j+0.5*f.xx;\n#ifdef HEIGHT_LOOKUP_BIAS\nvec4 l=texture2D(h,k,-10.0);vec4 m=texture2D(h,k+f,-10.0);vec4 n=texture2D(h,k+f.yx,-10.0);vec4 o=texture2D(h,k+f.xx,-10.0);\n#else\nvec4 l=texture2D(h,k);vec4 m=texture2D(h,k+f);vec4 n=texture2D(h,k+f.yx);vec4 o=texture2D(h,k+f.xx);\n#endif\nvec4 p=mix(l,m,j.x);vec4 q=mix(n,o,j.x);return mix(p,q,j.y);}vec4 r(in sampler2D s,in vec2 i,in float t){vec2 u=vec2(mod(float(t),VIRTUAL_TEXTURE_ARRAY_BLOCKS),floor(float(t)/VIRTUAL_TEXTURE_ARRAY_BLOCKS));const float v=0.5;vec2 w=vec2(v,VIRTUAL_TEXTURE_ARRAY_SIZE-v)/VIRTUAL_TEXTURE_ARRAY_SIZE;vec2 x=(clamp(i,w.x,w.y)+u)/VIRTUAL_TEXTURE_ARRAY_BLOCKS;\n#ifdef MANUAL_TEXTURE_BILINEAR\nreturn g(s,x);\n#else\nreturn texture2D(s,x);\n#endif\n}void main(){vec3 y=r(imageryArray,vUV.xy,uImageryUvOffset.w).rgb;float z=a(D);y=mix(y,uFogColor,z);gl_FragColor=vec4(y,1.0);}`);\n\nvar terrainPickerVertex = new Shader(`precision highp float;uniform mat4 viewMatrix;uniform mat4 projectionMatrix;attribute vec4 position;uniform vec4 uOffset;uniform vec4 uImageryUvOffset;uniform vec3 uScaling;varying vec4 vUV;\n#define MANUAL_TEXTURE_BILINEAR 1\n\n#define VIRTUAL_TEXTURE_ARRAY_BLOCKS 4.0\n\n#define VIRTUAL_TEXTURE_ARRAY_SIZE 512.0\n\n#define TEX_SIZE (VIRTUAL_TEXTURE_ARRAY_SIZE * VIRTUAL_TEXTURE_ARRAY_BLOCKS)\nconst vec2 a=vec2(1.0/TEX_SIZE,0.0);vec4 b(const in sampler2D c,in vec2 d){d-=0.5*a.xx;vec2 e=fract(d*TEX_SIZE);vec2 f=d-a.xx*e+0.5*a.xx;\n#ifdef HEIGHT_LOOKUP_BIAS\nvec4 g=texture2D(c,f,-10.0);vec4 h=texture2D(c,f+a,-10.0);vec4 i=texture2D(c,f+a.yx,-10.0);vec4 j=texture2D(c,f+a.xx,-10.0);\n#else\nvec4 g=texture2D(c,f);vec4 h=texture2D(c,f+a);vec4 i=texture2D(c,f+a.yx);vec4 j=texture2D(c,f+a.xx);\n#endif\nvec4 k=mix(g,h,e.x);vec4 l=mix(i,j,e.x);return mix(k,l,e.y);}vec4 m(in sampler2D n,in vec2 d,in float o){vec2 p=vec2(mod(float(o),VIRTUAL_TEXTURE_ARRAY_BLOCKS),floor(float(o)/VIRTUAL_TEXTURE_ARRAY_BLOCKS));const float q=0.5;vec2 r=vec2(q,VIRTUAL_TEXTURE_ARRAY_SIZE-q)/VIRTUAL_TEXTURE_ARRAY_SIZE;vec2 s=(clamp(d,r.x,r.y)+p)/VIRTUAL_TEXTURE_ARRAY_BLOCKS;\n#ifdef MANUAL_TEXTURE_BILINEAR\nreturn b(n,s);\n#else\nreturn texture2D(n,s);\n#endif\n}uniform lowp sampler2D indirectionTexture;uniform vec2 uGlobalOffset;uniform float uSceneScale;const float t=0.0008176665341588574;float u(in float v){float w=3.141592653589793-0.006135923151542565*v;float x=dot(vec2(0.5),exp(vec2(w,-w)));return x/(t*uSceneScale);}uniform lowp sampler2D elevationArray;float y(in vec2 z){const float A=32.0;const float B=1024.0;vec2 C=z.xy-uGlobalOffset;C/=(uSceneScale*A);C*=vec2(1.0,-1.0);vec2 D=C/B;const vec2 E=vec2(0.5);vec2 F=(floor(C-E)+E);F+=step(E,C-F);vec2 G=F/B;vec4 H=texture2D(indirectionTexture,G);float o=H.r;float I=H.g;vec2 J=H.ba;vec2 s=D*I+J;return u(C.y)*m(elevationArray,s,o).a;}void main(){vec4 z=vec4(position.xy,0.0,1.0);z.xy*=uOffset.z;z.xy+=uOffset.xy;vec2 K=10.0*floor(position.zw/10.0);vec2 d=position.zw-K;z.z=y(z.xy);z.z-=0.01*uOffset.z*K.x;float L=uOffset.w;vec2 M=vec2(floor(L/256.0)/256.0,fract(L/256.0))*(256.0/255.0);vUV.xy=d.xy*uScaling.z;vUV.zw=M;gl_Position=projectionMatrix*viewMatrix*z;}`);\n\nvar terrainPickerFragment = new Shader(`\n#extension GL_OES_standard_derivatives : enable  \nprecision highp float;uniform vec3 uScaling;varying vec4 vUV;void main(){vec2 a=dFdx(vUV.xy);float b=log2(length(a));vec2 c=vUV.zw;float d=0.1*b+0.5;float e=256.0*255.0*gl_FragCoord.z;vec2 f=vec2(floor(e/256.0),mod(e,256.0))/255.0;float g=step(distance(gl_FragCoord.xy,uScaling.xy),4.0);vec4 h=vec4(c,0.0,d);vec4 i=vec4(0.0,0.0,f);gl_FragColor=mix(h,i,g);}`);\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nconst tilepickerUniforms = {\n  // Combine center pixel location (xy) and uv downscaling (z) into one\n  // Update happens in tilepicker.js\n  uScaling: { value: new THREE.Vector3() }\n};\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\n// Update shaders defines\n// TODO also define picker.js shaders here and update defines\n[\n  beaconVertex, lineVertex, markerVertex, /*pickerVertex, raycastVertex,*/\n  terrainVertex, terrainPickerVertex\n].forEach( shader => {\n  if ( !INTERPOLATE_FLOAT ) {\n    shader.define( 'MANUAL_TEXTURE_BILINEAR', '1' );\n  }\n\n  shader.define(\n    'VIRTUAL_TEXTURE_ARRAY_BLOCKS',\n    Math.sqrt( ELEVATION_POOL_SIZE ).toExponential() );\n  shader.define(\n    'VIRTUAL_TEXTURE_ARRAY_SIZE',\n    ELEVATION_TILE_SIZE.toExponential() );\n} );\nterrainFragment.define(\n  'VIRTUAL_TEXTURE_ARRAY_BLOCKS',\n  Math.sqrt( IMAGERY_POOL_SIZE ).toExponential() );\nterrainFragment.define(\n  'VIRTUAL_TEXTURE_ARRAY_SIZE',\n  IMAGERY_TILE_SIZE.toExponential() );\n\n// Materials that depend on extension support\nif ( webgl.depthTexture ) {\n  markerVertex.define( 'READ_DEPTH', 1 );\n  markerFragment.define( 'READ_DEPTH', 1 );\n}\n\n// TODO too many similar blocks of code here. Should clean up the uniforms\n// combining using _.assign or similar\nvar material = {\n  beacon: new THREE.RawShaderMaterial( {\n    name: '_beacon', // Names starting with _ will not be precompiled\n    uniforms: lodash_min.assign( {\n      uAccuracy: { type: 'f', value: 25 },\n      uTime: { type: 'f', value: 0 }\n    },\n    heightUniforms\n    ),\n    depthWrite: false,\n    vertexShader: beaconVertex.value,\n    fragmentShader: beaconFragment.value,\n    transparent: true\n  } ),\n  marker: ( () => {\n    const m = new THREE.RawShaderMaterial( {\n      name: 'marker',\n      uniforms: lodash_min.assign( {},\n        depthUniforms,\n        heightUniforms,\n        markerUniforms,\n        tagUniforms\n      ),\n      vertexShader: markerVertex.value,\n      fragmentShader: markerFragment.value,\n      transparent: true\n    } );\n    m.defaultAttributeValues = {}; // Remove usual defaults as they are wrong\n    return m;\n  } )(),\n  line: lodash_min.memoize( function ( color, thickness, outlineColor ) {\n    // Cutoff dictates where we will begin to fade out line\n    // For wider lines this is relatively later, so we don't have\n    // fuzzy edges\n    // The value will be at least 0.3, and tend to 1 for large thicknesses\n    // Equivalent to the 2 edge pixels being used for the fade-out\n    var cutoff = Math.max( 0.3, ( thickness - 2 ) / thickness );\n    var c = new Color$1( color );\n    color = [ c.r, c.g, c.b, c.a ];\n\n    var haveOutline = outlineColor !== undefined;\n    if ( haveOutline ) {\n      c = new Color$1( outlineColor );\n      if ( c.a === undefined ) { c.a = 1.0; }\n\n      outlineColor = new THREE.Vector4( c.r, c.g, c.b, c.a );\n    } else {\n      outlineColor = new THREE.Vector4( 0, 0, 0, 0 );\n    }\n\n    var mat = new THREE.RawShaderMaterial( {\n      name: 'line',\n      uniforms: lodash_min.assign( {\n        uCutoff: { type: 'f', value: cutoff },\n        uOutlineColor: { type: 'c', value: outlineColor },\n        uThickness: { type: 'f', value: thickness },\n      },\n      heightUniforms,\n      lineUniforms,\n      tagUniforms\n      ),\n      vertexShader: lineVertex.value,\n      fragmentShader: lineFragment.value,\n      transparent: true\n    } );\n\n    // To allow us to specify color both per-line\n    // and per-vertex, use an attribute, not uniform\n    mat.defaultAttributeValues.color = color;\n    return mat;\n  } ),\n  sky: new THREE.RawShaderMaterial( {\n    name: 'sky',\n    uniforms: lodash_min.assign( {},\n      skyUniforms,\n      tonemapUniforms\n    ),\n    depthWrite: false, // Will render last and thus don't need depth\n    vertexShader: skyVertex.value,\n    fragmentShader: skyFragment.value,\n    side: THREE.BackSide\n  } ),\n  terrain: ( uniforms ) => {\n    const imagery = new THREE.RawShaderMaterial( {\n      uniforms: lodash_min.assign( uniforms,\n        { imageryArray: { value: ImageryDatasource.textureArray }, },\n        fogUniforms,\n        heightUniforms\n      ),\n      vertexShader: terrainVertex.value,\n      fragmentShader: terrainFragment.value\n    } );\n    const picker = new THREE.RawShaderMaterial( {\n      uniforms: lodash_min.assign( uniforms,\n        heightUniforms,\n        tilepickerUniforms\n      ),\n      vertexShader: terrainPickerVertex.value,\n      fragmentShader: terrainPickerFragment.value\n    } );\n\n    return { imagery, picker };\n  }\n};\n\n// Apparently makes things quicker as the offset\n// attribute will always have data in it (ie it\n// will never be set in defaultAttributesValues)\nmaterial.marker.index0AttributeName = 'offset';\n\n// Optimize by emptying out default attribute values\n// As these are not used, we can prevent THREE.js\n// needlessly setting these on each frame\nlodash_min.forOwn( material, function ( m ) {\n  if ( m.type === \"RawShaderMaterial\" ) {\n    m.defaultAttributeValues = {};\n  }\n} );\n\nvar pickerVertex = new Shader(`uniform mat4 viewMatrix;uniform mat4 projectionMatrix;uniform vec3 cameraPosition;uniform float uPixelRatio;uniform vec2 uViewportCanvasInverse;attribute vec3 tag;attribute vec3 position;attribute vec3 tangent;attribute vec4 atlas;attribute vec4 anchor;attribute vec4 clipping;attribute vec3 layout;attribute vec4 normal;attribute vec4 offset;varying vec4 vTag;float a(inout vec3 b){float c=dot(b,b);float d=inversesqrt(c);b=d*b;return c*d;}\n#define VIRTUAL_TEXTURE_ARRAY_BLOCKS 4.0\n\n#define VIRTUAL_TEXTURE_ARRAY_SIZE 512.0\n\n#define TEX_SIZE (VIRTUAL_TEXTURE_ARRAY_SIZE * VIRTUAL_TEXTURE_ARRAY_BLOCKS)\nconst vec2 e=vec2(1.0/TEX_SIZE,0.0);vec4 f(const in sampler2D g,in vec2 h){h-=0.5*e.xx;vec2 i=fract(h*TEX_SIZE);vec2 j=h-e.xx*i+0.5*e.xx;\n#ifdef HEIGHT_LOOKUP_BIAS\nvec4 k=texture2D(g,j,-10.0);vec4 l=texture2D(g,j+e,-10.0);vec4 m=texture2D(g,j+e.yx,-10.0);vec4 n=texture2D(g,j+e.xx,-10.0);\n#else\nvec4 k=texture2D(g,j);vec4 l=texture2D(g,j+e);vec4 m=texture2D(g,j+e.yx);vec4 n=texture2D(g,j+e.xx);\n#endif\nvec4 o=mix(k,l,i.x);vec4 p=mix(m,n,i.x);return mix(o,p,i.y);}vec4 q(in sampler2D r,in vec2 h,in float s){vec2 t=vec2(mod(float(s),VIRTUAL_TEXTURE_ARRAY_BLOCKS),floor(float(s)/VIRTUAL_TEXTURE_ARRAY_BLOCKS));const float u=0.5;vec2 v=vec2(u,VIRTUAL_TEXTURE_ARRAY_SIZE-u)/VIRTUAL_TEXTURE_ARRAY_SIZE;vec2 w=(clamp(h,v.x,v.y)+t)/VIRTUAL_TEXTURE_ARRAY_BLOCKS;\n#ifdef MANUAL_TEXTURE_BILINEAR\nreturn f(r,w);\n#else\nreturn texture2D(r,w);\n#endif\n}uniform lowp sampler2D indirectionTexture;uniform vec2 uGlobalOffset;uniform float uSceneScale;const float x=0.0008176665341588574;float y(in float z){float A=3.141592653589793-0.006135923151542565*z;float B=dot(vec2(0.5),exp(vec2(A,-A)));return B/(x*uSceneScale);}uniform lowp sampler2D elevationArray;float C(in vec2 D){const float E=32.0;const float F=1024.0;vec2 G=D.xy-uGlobalOffset;G/=(uSceneScale*E);G*=vec2(1.0,-1.0);vec2 H=G/F;const vec2 I=vec2(0.5);vec2 J=(floor(G-I)+I);J+=step(I,G-J);vec2 K=J/F;vec4 L=texture2D(indirectionTexture,K);float s=L.r;float M=L.g;vec2 N=L.ba;vec2 w=H*M+N;return y(G.y)*q(elevationArray,w,s).a;}\n#define TUBE_RADIUS 20.0\n\n#define SIZE vec2( 512.0, 1024.0 )\nuniform vec2 uViewportInverse;vec4 O(const in vec3 P,const in float Q){vec4 D=vec4(P,1.0);vec4 R=projectionMatrix*viewMatrix*D;D.xyz+=tangent.xyz;vec4 S=projectionMatrix*viewMatrix*D;vec2 T=S.xy/S.w-R.xy/R.w;vec2 U=T.yx*vec2(1.0,-1.0);U=Q*R.w*normalize(U)*uViewportInverse;R.xy+=U;return R;}void main(){vTag.rgb=tag;float V=1.0-step(length(tag),0.0);float W=length(position.x);float X=step(W,1.00001);X*=step(0.99999,W);vec3 Y=mix(position,offset.xyz,X);Y.z=C(Y.xy);vec4 Z=O(Y,TUBE_RADIUS);vec3 ba=cameraPosition-Y;float bb=a(ba);vec2 bc=vec2(1.0,-1.0)*position.xy;vec2 bd=0.5*bc+vec2(0.5);vec4 be;vec2 bf=vec2(normal.w,offset.w);bf=smoothstep(bf,vec2(0.95,0.9)*bf,vec2(bb));be.w=(0.6*bf.x+0.4)*bf.y;vec2 bg=mix(atlas.ww*vec2(SIZE.y/SIZE.x,1.0),atlas.zw,bf.x);be.xy=atlas.xy+bg*bd;be.w*=smoothstep(0.0,0.15,clipping.y+dot(ba,normal.xyz));be.w*=step(0.3,be.w);vec2 u=layout.xx+layout.yy;be.xy+=(u*bc)/SIZE;vec2 bh=SIZE*bg+2.0*u;bh*=uPixelRatio;float bi=min(0.5*bb,100.0+200.0*clipping.x);vec4 D=vec4(Y+bi*ba,1.0);vec4 bj=projectionMatrix*viewMatrix*D;vec2 bk=2.0*bj.w*uViewportCanvasInverse;\n#ifdef READ_DEPTH\nvec3 bl=0.5*bj.xyz/bj.w+vec3(0.5);float bm=texture2D(uDepth,bl.xy).x;float bn=projectionMatrix[3][2];bm/=1.0+0.02*bm/bn;be.w*=step(clipping.x*bl.z,bm);\n#endif\nbj.xy=bk*floor(bj.xy/bk);vec2 bo=0.5*bk*bh;bj.xy+=bk*(0.5*anchor.xy*bh+anchor.zw);bj.xy-=bo;vec2 bp=(position.xy+vec2(1.0))*bo;bj.xy+=bp;gl_Position=V*mix(Z,bj,X);}`);\n\nvar pickerFragment = new Shader(`precision highp float;varying vec4 vTag;void main(){gl_FragColor=vTag;}`);\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nconst pickerUniforms = {\n  uPixelRatio: { type: 'f', value: 1.0 },\n  uViewportCanvasInverse: { type: 'v2', value: new THREE.Vector2( 1.0, 1.0 ) },\n  uViewportInverse: { type: 'v2', value: new THREE.Vector2( 1.0, 1.0 ) },\n};\n\nContainerStore$1.listen( ( { canvasHeight, canvasWidth,\n  height, width, pixelRatio } ) => {\n  pickerUniforms.uViewportCanvasInverse.value.set(\n    1.0 / canvasWidth, 1.0 / canvasHeight );\n  pickerUniforms.uViewportInverse.value.set( 1.0 / width, 1.0 / height );\n  pickerUniforms.uPixelRatio.value = pixelRatio;\n} );\n\nvar raycastVertex = new Shader(`precision highp float;uniform mat4 viewMatrix;uniform mat4 projectionMatrix;attribute vec4 position;uniform vec4 uOffset;varying vec2 vPosition;\n#define VIRTUAL_TEXTURE_ARRAY_BLOCKS 4.0\n\n#define VIRTUAL_TEXTURE_ARRAY_SIZE 512.0\n\n#define TEX_SIZE (VIRTUAL_TEXTURE_ARRAY_SIZE * VIRTUAL_TEXTURE_ARRAY_BLOCKS)\nconst vec2 a=vec2(1.0/TEX_SIZE,0.0);vec4 b(const in sampler2D c,in vec2 d){d-=0.5*a.xx;vec2 e=fract(d*TEX_SIZE);vec2 f=d-a.xx*e+0.5*a.xx;\n#ifdef HEIGHT_LOOKUP_BIAS\nvec4 g=texture2D(c,f,-10.0);vec4 h=texture2D(c,f+a,-10.0);vec4 i=texture2D(c,f+a.yx,-10.0);vec4 j=texture2D(c,f+a.xx,-10.0);\n#else\nvec4 g=texture2D(c,f);vec4 h=texture2D(c,f+a);vec4 i=texture2D(c,f+a.yx);vec4 j=texture2D(c,f+a.xx);\n#endif\nvec4 k=mix(g,h,e.x);vec4 l=mix(i,j,e.x);return mix(k,l,e.y);}vec4 m(in sampler2D n,in vec2 d,in float o){vec2 p=vec2(mod(float(o),VIRTUAL_TEXTURE_ARRAY_BLOCKS),floor(float(o)/VIRTUAL_TEXTURE_ARRAY_BLOCKS));const float q=0.5;vec2 r=vec2(q,VIRTUAL_TEXTURE_ARRAY_SIZE-q)/VIRTUAL_TEXTURE_ARRAY_SIZE;vec2 s=(clamp(d,r.x,r.y)+p)/VIRTUAL_TEXTURE_ARRAY_BLOCKS;\n#ifdef MANUAL_TEXTURE_BILINEAR\nreturn b(n,s);\n#else\nreturn texture2D(n,s);\n#endif\n}uniform lowp sampler2D indirectionTexture;uniform vec2 uGlobalOffset;uniform float uSceneScale;const float t=0.0008176665341588574;float u(in float v){float w=3.141592653589793-0.006135923151542565*v;float x=dot(vec2(0.5),exp(vec2(w,-w)));return x/(t*uSceneScale);}uniform lowp sampler2D elevationArray;float y(in vec2 z){const float A=32.0;const float B=1024.0;vec2 C=z.xy-uGlobalOffset;C/=(uSceneScale*A);C*=vec2(1.0,-1.0);vec2 D=C/B;const vec2 E=vec2(0.5);vec2 F=(floor(C-E)+E);F+=step(E,C-F);vec2 G=F/B;vec4 H=texture2D(indirectionTexture,G);float o=H.r;float I=H.g;vec2 J=H.ba;vec2 s=D*I+J;return u(C.y)*m(elevationArray,s,o).a;}void main(){vec4 z=vec4(position.xy,0.0,1.0);z.xy*=uOffset.z;z.xy+=uOffset.xy;vPosition=z.xy+vec2(32768.0);z.z=y(z.xy);gl_Position=projectionMatrix*viewMatrix*z;}`);\n\nvar raycastFragment = new Shader(`precision highp float;varying vec2 vPosition;void main(){gl_FragColor=vec4(mod(vPosition.xy,256.0),floor(vPosition.xy/256.0))/255.0;}`);\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\n// Picking\nconst canvas$2 = renderer.domElement;\nconst TilePicker = {\n  data: new Uint8Array( 4 * canvas$2.width * canvas$2.height ),\n  target: new THREE.WebGLRenderTarget( canvas$2.width, canvas$2.height ),\n};\n\n// Make independent target for picking to not intefere with terrain\nconst FeaturePicker = {\n  data: new Uint8Array( 4 * canvas$2.width * canvas$2.height ),\n  target: new THREE.WebGLRenderTarget( canvas$2.width, canvas$2.height ),\n};\n\nfunction updateSize( { width, height, renderRatio } ) {\n  // Want to scale down so that resulting canvas is 500 pixels\n  // This means 500 pixels total not 500 wide!!!\n  let downScale = Math.sqrt( ( width * height ) / 500 );\n  let w = 2 * Math.round( 0.5 * width / downScale );\n  let h = 2 * Math.round( 0.5 * height / downScale );\n  if ( !TilePicker.target ||\n       w !== TilePicker.target.width ||\n       h !== TilePicker.target.height ) {\n    TilePicker.target = new THREE.WebGLRenderTarget( w, h );\n    TilePicker.data = new Uint8Array( 4 * TilePicker.target.width * TilePicker.target.height );\n\n    // 16X picker to be improve click accuracy\n    FeaturePicker.target = new THREE.WebGLRenderTarget( 16 * w, 16 * h );\n    FeaturePicker.data = new Uint8Array( 4 * FeaturePicker.target.width * FeaturePicker.target.height );\n\n    // Update shaders\n    tilepickerUniforms.uScaling.value.set(\n      0.5 * w, 0.5 * h, // Location of center pixel\n      256 / ( renderRatio * downScale ) // Scaling factor for uv error to compensate downScale\n    );\n  }\n}\n\nContainerStore$1.listen( updateSize );\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nvar oldAutoClearDepth;\nvar tagId;\nvar id, store, s, sl, feature, f, fl;\n\n// Implements GPU picking\nvar picker = {\n  mouse: { x: 0, y: 0 },\n  raycastPosition: new THREE.Vector3(),\n  init: function () {\n    // Create materials for picking and raycasting and create scenes\n    var pickerMaterial = new THREE.RawShaderMaterial( {\n      name: 'picker',\n      uniforms: lodash_min.assign( {},\n        heightUniforms,\n        pickerUniforms\n      ),\n      vertexShader: pickerVertex.value,\n      fragmentShader: pickerFragment.value,\n      //transparent: true // causes issues when true (wrong render order)\n    } );\n    pickerMaterial.index0AttributeName = 'offset';\n\n    pickerMaterial.defaultAttributeValues = material.marker.defaultAttributeValues;\n    scene.pickerScene.overrideMaterial = pickerMaterial;\n    scene.pickerScene.lastCameraPosition = camera.position.clone();\n\n    var raycastMaterial = new THREE.RawShaderMaterial( {\n      name: 'raycast',\n      uniforms: heightUniforms,\n      vertexShader: raycastVertex.value,\n      fragmentShader: raycastFragment.value\n    } );\n    picker.raycastScene = new THREE.Scene();\n    picker.raycastScene.overrideMaterial = raycastMaterial;\n\n    var state = ContainerStore$1.getState();\n    var parameters = {\n      minFilter: THREE.NearestFilter,\n      magFilter: THREE.NearestFilter\n    };\n\n    // Single pixel render target, for position raycasting\n    // we'll set a viewOffset when rendering to crop out\n    // the correct portion on the view\n    // TODO make work again and move to picking.js\n    picker.renderTarget1px = new THREE.WebGLRenderTarget( 1, 1, parameters );\n    picker.viewOffsetWidth = state.width;\n    picker.viewOffsetHeight = state.height;\n\n    // Picked pixel will be written into here\n    picker.buffer = new Uint8Array( 4 );\n  },\n  stores: [],\n  tagId: 1,\n  featureIdtoTagId: new Map(),\n  // Tags all features in a store to enable GPU picking\n  registerStore: function ( store ) {\n    if ( picker.stores.indexOf( store ) === -1 ) {\n      picker.stores.push( store );\n    }\n\n    store.data.forEach( function ( feature ) {\n      // Unless explicitly marked as unselectable, default to tagging\n      if ( feature.properties.selectable !== false ) {\n        // Use feature id, this way we can create compound\n        // markers, that get selected together\n        if ( feature.id !== undefined ) {\n          tagId = picker.featureIdtoTagId.get( feature.id );\n          if ( !tagId ) {\n            tagId = picker.tagId++;\n            picker.featureIdtoTagId.set( feature.id, tagId );\n          }\n\n          feature.tag = tagId;\n        } else {\n          feature.tag = picker.tagId++;\n          feature.id = 1000000 + picker.tagId++;\n        }\n      }\n    } );\n  },\n  pickFeature: function ( mouse ) {\n    picker.mouse.x = mouse.x;\n    picker.mouse.y = mouse.y;\n    if ( mouse.clipspace ) {\n      picker.mouse = ContainerStore$1.fromClipSpace( picker.mouse );\n    }\n\n    // Convert into 0-1 coordinates\n    let clickPosition = ContainerStore$1.toClipSpace( picker.mouse );\n    clickPosition.add( { x: 1, y: 1 } ).multiplyScalar( 0.5 );\n\n    if ( clickPosition.x < 0 || clickPosition.x > 1 ||\n         clickPosition.y < 0 || clickPosition.y > 1 ) {\n      console.error( 'Click outside valid bounds:', clickPosition.x, clickPosition.y );\n    }\n\n    // Convert into target coordinates\n    clickPosition.x = Math.round( clickPosition.x * FeaturePicker.target.width );\n    clickPosition.y = Math.round( clickPosition.y * FeaturePicker.target.height );\n\n    // Enable render target we want to work with\n    renderer.setRenderTarget( FeaturePicker.target );\n\n    // Cache camera location to avoid unnecessary re-renders\n    if ( !scene.pickerScene.lastCameraPosition.equals( camera.position ) ) {\n      scene.pickerScene.lastCameraPosition.copy( camera.position );\n      // In the case of picking, we have to render the terrain\n      // first, to make sure the picker scene is correctly\n      // obscured\n      // TODO would be nice if we could re-use the depthTexture\n      // for this, but it doesn't seem to work...\n\n      // Important to clear otherwise old pick targets remain\n      renderer.clear( true, true, true );\n\n      // TODO re-enable rendering of terrain\n      //renderer.render( picker.raycastScene, camera );\n\n      oldAutoClearDepth = renderer.autoClearDepth;\n      renderer.autoClearDepth = false;\n      renderer.render( scene.pickerScene, camera );\n      renderer.autoClearDepth = oldAutoClearDepth;\n      // TODO don't execute when performing tex copy\n    }\n\n    // Read single pixel from target at mouse location\n    renderer.readRenderTargetPixels( FeaturePicker.target,\n      clickPosition.x, clickPosition.y,\n      1, 1, picker.buffer );\n    renderer.setRenderTarget( null );\n\n    // Interpret as id\n    /*jslint bitwise: true */\n    id = ( picker.buffer[ 0 ] << 16 ) | ( picker.buffer[ 1 ] << 8 ) | ( picker.buffer[ 2 ] );\n    /*jslint bitwise: false */\n\n    // Update uniform so shaders can highlight\n    tagUniforms.uSelectedTag.value.set( id === 0 ? 65536 : id );\n\n    // Lookup actual feature\n    for ( s = 0, sl = picker.stores.length; s < sl; s++ ) {\n      store = picker.stores[ s ];\n      for ( f = 0, fl = store.data.length; f < fl; f++ ) {\n        feature = store.data[ f ];\n        if ( feature.tag === id ) { return feature }\n      }\n    }\n\n    return null;\n  },\n  raycastTerrain: function ( mouse ) {\n    picker.mouse.x = mouse.x;\n    picker.mouse.y = mouse.y;\n    if ( mouse.clipspace ) {\n      picker.mouse = ContainerStore$1.fromClipSpace( picker.mouse );\n    }\n\n    // As we're just rendering one pixel at the location of the\n    // mouse, set a viewOffset, which we'll later clear\n    camera.setViewOffset(\n      picker.viewOffsetWidth, picker.viewOffsetHeight,\n      picker.mouse.x, picker.mouse.y,\n      1, 1\n    );\n\n    // Render single pixel and read out value\n    renderer.setRenderTarget( picker.renderTarget1px );\n    renderer.render( picker.raycastScene, camera );\n    renderer.readRenderTargetPixels( picker.renderTarget1px,\n      0, 0, 1, 1, picker.buffer );\n    camera.clearViewOffset();\n\n    // Extract packed position from buffer\n    picker.raycastPosition.set(\n      picker.buffer[ 0 ] + 256 * picker.buffer[ 2 ] - 32768,\n      picker.buffer[ 1 ] + 256 * picker.buffer[ 3 ] - 32768\n    );\n    if ( picker.raycastPosition.x === 32768 &&\n         picker.raycastPosition.y === 32768 ) {\n      return null;\n    }\n\n    picker.raycastPosition.z = heightAt( picker.raycastPosition );\n    return picker.raycastPosition;\n  }\n};\n\nContainerStore$1.listen( function ( state ) {\n  picker.viewOffsetWidth = state.width;\n  picker.viewOffsetHeight = state.height;\n} );\n\nRenderStore$1.listen( function ( state ) {\n  if ( state.animating ) {\n    // Move last camera to force re-render\n    scene.pickerScene.lastCameraPosition.x += 1000000;\n  }\n} );\n\npicker.init();\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// Data for showing lines, inside 3D world\nfunction LineData() {\n  this.data = {};\n\n  this.bindListeners( {\n    clearFeatures: UserActions.setCurrentPlace,\n    addOverlay: [ GeodataActions.addOverlay, GeodataActions.removeOverlay ]\n  } );\n}\n\nLineData.prototype.clearFeatures = function () {\n  this.data = [];\n  return false;\n};\n\nLineData.prototype.addOverlay = function () {\n  this.waitFor( OverlayAdapter$1 );\n  var lines = OverlayAdapter$1.getState().lines;\n  if ( lodash_min.isEqual( this.data, lines ) ) {\n    // Do not broadcast if data is unchanged\n    return false;\n  }\n\n  this.data = lines.concat();\n  picker.registerStore( this );\n};\n\nLineData.displayName = 'LineData';\n\nvar LineData$1 = alt.createStore( LineData );\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nconst Procedural$5 = {};\n\nfunction FeaturesExport() {\n  this.bindListeners( {\n    featureClicked: UserActions.featureClicked,\n    featureSelected: UserActions.featureSelected,\n    overlayDisplayed: RenderActions.overlayDisplayed\n  } );\n}\n\n// For now only supporting lines & labels, but should expand in future\nvar lookupFeature = function ( id ) {\n  if ( id === undefined ) { return }\n\n  // Support looking up an array of features\n  if ( Array.isArray( id ) ) { return id.map( lookupFeature ) }\n\n  // Get feature as represented by engine (this has actual\n  // curve data)\n  if ( id.geometry ) {\n    // Backward compatibility for old engine.\n    return lodash_min.find( LineData$1.getState().data,\n      lodash_min.matchesProperty( 'geometry', id.geometry ) );\n  }\n\n  var feature = lodash_min.find( LineData$1.getState().data,\n    lodash_min.matchesProperty( 'id', id ) );\n  if ( feature ) { return feature }\n\n  if ( feature ) { return feature }\n\n  feature = lodash_min.find( OverlayAdapter$1.getState().points,\n    lodash_min.matchesProperty( 'id', id ) );\n  if ( feature ) { return feature }\n\n  feature = lodash_min.find( OverlayAdapter$1.getState().markers,\n    lodash_min.matchesProperty( 'id', id ) );\n  return feature;\n};\n\n/**\n * @exports Procedural\n * @name Features\n * @description Features are elements in the rendered scene\n * that are displayed on top of the 3D world, such as lines\n * or POIs.\n *\n * Features are added as part of an overlay, which takes the\n * form of a [geojson]{@link http://geojson.org/} FeatureCollection.\n * Each feature should have a unique `id`, to allow referencing\n * later by other methods.\n *\n * To explore the different options available when styling\n * the overlays, take a look at the [Overlay Editor]{@link https://felixpalmer.github.io/procedural-gl-js/docs/overlays.html}\n *\n * @example\n * // Add an overlay and focus on features when clicked\n * var featureCollection = { ... };\n * Procedural.addOverlay( featureCollection );\n * Procedural.onFeatureClicked = function ( id ) {\n *   Procedural.focusOnFeature( id );\n * };\n */\n\n/**\n * @name addBuiltinOverlay\n * @memberof module:Features\n * @function\n * @param {String|Array} id id of overlay to add, or array of ids\n * @description Adds a built-in overlay to the 3D world.\n * Currently supported overlays are: 'peaks', 'places'.\n * See also [Features.removeOverlay]{@link module:Features.removeOverlay}\n  @example\n * Procedural.addBuiltinOverlay( 'peaks' );\n */\nProcedural$5.addBuiltinOverlay = function ( id ) {\n  setTimeout( function () { GeodataActions.addBuiltinOverlay( id ); }, 0 );\n};\n\n/**\n * @name addOverlay\n * @memberof module:Features\n * @function\n * @param {Object} overlay a geojson FeatureCollection\n * @description Adds an overlay to the 3D world. An overlay is a collection of `Features`, specified\n * in geojson format as a `FeatureCollection`. Each of these `Features` should have a unique id\n * which is used by other methods when referencing each `Feature`. See also the examples in the [Overlay Editor]{@link http://www.procedural.eu/js-sdk/overlays.html}. See also [Features.updateOverlay]{@link module:Features.updateOverlay}, [Features.removeOverlay]{@link module:Features.removeOverlay}\n  @example\n * var featureCollection = {\n *   'name': 'example',\n *   'type': 'FeatureCollection',\n *   'features': [\n *     {\n *       'id': 0,\n *       'type': 'Feature',\n *       'geometry': {\n *         'type': 'LineString',\n *         'coordinates': [\n *           [ 13.55, 47.25 ],\n *           [ 13.56, 47.26 ]\n *         ]\n *       },\n *       'properties': {\n *         'color': '#f30e32'\n *       }\n *     }\n *   ]\n * }\n *\n * Procedural.addOverlay( featureCollection );\n */\nProcedural$5.addOverlay = function ( overlay ) {\n  setTimeout( function () { GeodataActions.addOverlay( overlay ); }, 0 );\n};\n\n/**\n * @name updateOverlay\n * @memberof module:Features\n * @function\n * @param {Object} overlay a geojson FeatureCollection\n * @description Updates an overlay that was previously added to the 3D world.\n * Using this method is much faster than repeatedly calling `addOverlay`,\n * but the update is limited to the positions of the features in the overlay.\n * The format is the same as for `addOverlay`, but only the `coordinates`\n * will be updated - all feature properties will be ignored.\n *\n * To update an overlay it is necessary to provide the\n * same `name` as was used for `addOverlay` and for the updated\n * data to have the same number of features as the original overlay, in\n * the same order.\n *\n * Note that currently only `Point` geometries can be updated.\n * See also [Features.addOverlay]{@link module:Features.addOverlay}\n  @example\n * var featureCollection = {\n *   'name': 'example',\n *   'type': 'FeatureCollection',\n *   'features': [\n *     {\n *       'id': 0,\n *       'type': 'Feature',\n *       'geometry': {\n *         'type': 'Point',\n *         'coordinates': [ 13.55, 47.25 ]\n *       }\n *     }\n *   ]\n * }\n *\n * Procedural.updateOverlay( featureCollection );\n */\nProcedural$5.updateOverlay = function ( overlay ) {\n  setTimeout( function () { GeodataActions.updateOverlay( overlay ); }, 0 );\n};\n\n/**\n * @name removeOverlay\n * @memberof module:Features\n * @function\n * @param {String} name name of overlay to remove, defined when adding an overlay using [Features.addOverlay]{@link module:Features.addOverlay}\n * @description Removes an overlay from the 3D world. See also [Features.addOverlay]{@link module:Features.addOverlay}\n * @example\n *\n * var featureCollection = {\n *   'name': 'example',\n *   'type': 'FeatureCollection',\n *   'features': [ ... ]\n * }\n * Procedural.addOverlay( featureCollection );\n *\n * ...\n *\n * Procedural.removeOverlay( 'example' );\n *\n */\nProcedural$5.removeOverlay = function ( id ) {\n  setTimeout( function () { GeodataActions.removeOverlay( id ); }, 0 );\n};\n\n/**\n * @name highlightFeature\n * @memberof module:Features\n * @function\n * @param {Number} id id of Feature to highlight\n * @description Highlights a feature on the map\n * @example\n * Procedural.highlightFeature( 3 );\n */\nProcedural$5.highlightFeature = function ( id ) {\n  var feature = lookupFeature( id );\n  if ( feature ) {\n    setTimeout( function () { UserActions.featureSelected( feature ); } );\n  }\n};\n\n/**\n * @name focusOnFeature\n * @memberof module:Features\n * @function\n * @param {Number} id id of Feature to focus on\n * @description Focuses the camera on a feature on the map\n * @example\n * Procedural.focusOnFeature( 3 );\n */\nProcedural$5.focusOnFeature = function ( id ) {\n  var feature = lookupFeature( id );\n  if ( feature ) {\n    setTimeout( function () { UserActions.focusOnFeature( feature ); } );\n  }\n};\n\n// Not working so well, disable for now\n///**\n// * @name animateAlongFeature\n// * @memberof module:Features\n// * @function\n// * @param {Number} id id of Feature to animate along\n// * @param {Object} options options to specify how to animate\n// * accepts `distance` and `speed`\n// * @description Animates the camera along a LineString Feature\n// * @example\n// * Procedural.animateAlongFeature( 5 );\n// */\n//Procedural.animateAlongFeature = function ( id, options ) {\n//  var feature = lookupFeature( id );\n//  if ( feature ) {\n//    options = options || {};\n//    options.feature = feature;\n//    setTimeout( function () { UserActions.animateAlongFeature( options );\n//    } );\n//  }\n//};\n\nProcedural$5.selectFeatures = function ( ids ) {\n  if ( ids ) {\n    setTimeout( function () { UserActions.selectFeatures( ids ); } );\n  }\n};\n\n// API Listeners\n\nvar currentFeature = null;\n/**\n * @name onFeatureSelected\n * @memberof module:Features\n * @function\n * @param {Number} id id of Feature that was selected\n * @description Callback function for when a feature is selected,\n * by hovering over it with the mouse\n * @example\n * Procedural.onFeatureSelected = function ( id ) {\n *   console.log( 'Feature selected:', id );\n * }\n */\nFeaturesExport.prototype.featureSelected = function ( feature ) {\n  // Only broadcast changes\n  if ( currentFeature === feature ) { return }\n\n  currentFeature = feature;\n\n  if ( typeof Procedural$5.onFeatureSelected === 'function' &&\n       feature && feature.id !== undefined ) {\n    Procedural$5.onFeatureSelected( feature.id );\n  }\n};\n\n/**\n * @name onFeatureClicked\n * @memberof module:Features\n * @function\n * @param {Number} id id of Feature that was clicked\n * @description Callback function for when a feature is clicked\n * @example\n * Procedural.onFeatureClicked = function ( id ) {\n *   console.log( 'Feature clicked:', id );\n * }\n */\nFeaturesExport.prototype.featureClicked = function ( feature ) {\n  if ( typeof Procedural$5.onFeatureClicked === 'function' &&\n       feature && feature.id !== undefined ) {\n    Procedural$5.onFeatureClicked( feature.id );\n  }\n};\n\n/**\n * @name onOverlayAdded\n * @memberof module:Features\n * @function\n * @param {String} name name of overlay that was added\n * @description Callback function for when an overlay has been added\n * @example\n * Procedural.onOverlayAdded = function ( name ) {\n *   console.log( 'Overlay added:', name );\n * }\n */\nFeaturesExport.prototype.overlayDisplayed = function ( name ) {\n  if ( typeof Procedural$5.onOverlayAdded === 'function' && name ) {\n    Procedural$5.onOverlayAdded( name );\n  }\n};\n\nFeaturesExport.displayName = 'FeaturesExport';\nalt.createStore( FeaturesExport );\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nconst Procedural$6 = {};\n\n/**\n * @exports Procedural\n * @name Rendering\n * @description The engine will only re-render the scene when\n * needed, and automatically pause rendering when appropriate,\n * e.g. when the containing browser tab is in the background.\n *\n * Using the [play]{@link module:Rendering.play} and [pause]{@link module:Rendering.pause} methods the engine can also be paused manually. This can\n * be used to pause the engine when the containing element scrolls\n * off the page.\n */\n\n/**\n * @name play\n * @memberof module:Rendering\n * @function\n * @description Resumes the engine. See also [Rendering.pause]{@link module:Rendering.pause}\n */\nProcedural$6.play = function () {\n  setTimeout( function () { RenderActions.play(); }, 0 );\n};\n\n/**\n * @name pause\n * @memberof module:Rendering\n * @function\n * @description Pauses the engine. See also [Rendering.play]{@link module:Rendering.play}\n */\nProcedural$6.pause = function () {\n  setTimeout( function () { RenderActions.pause(); }, 0 );\n};\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nconst Procedural$7 = {};\n\n/**\n * @exports Procedural\n * @name Location\n * @description The Location API methods enable\n * a marker indicating where the user is located in the world\n */\n\n/**\n * @name setUserLocation\n * @memberof module:Location\n * @function\n * @description Tells the engine where the current user is located, which\n * displays a marker in the 3D world\n * @param {Object} position An Object of the format produced by the HTML5 Geolocation API\n * @example\n * // Manually construct object, can also use navigator.geolocation.watchPosition\n * // to obtain\n * var position = {\n *   coords: {\n *     latitude: 46.46695,\n *     longitude: 7.52151,\n *     accuracy: 50\n *   }\n * };\n *\n * Procedural.setUserLocation( position );\n */\nProcedural$7.setUserLocation = function ( position ) {\n  // Detect object not in coords format and wrap\n  var p;\n  if ( position.latitude !== undefined &&\n       position.longitude !== undefined ) {\n    p = { coords: position };\n  } else {\n    p = position;\n  }\n\n  setTimeout( function () { CurrentLocationActions.panToPosition( p ); }, 0 );\n};\n\n/**\n * @name toggleUserLocationTracking\n * @memberof module:Location\n * @function\n * @description Toggles whether the camera automatically follows the user\n * when a new location update is sent using [Procedural.setUserLocation]{@link module:Location.setUserLocation}. Initially tracking is disabled.\n * Note tracking is automatically disabled when the user manipulates the camera\n */\nProcedural$7.toggleUserLocationTracking = function () {\n  setTimeout( function () { CurrentLocationActions.toggleTracking(); }, 0 );\n};\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nconst Procedural$8 = {};\n\n/**\n * @exports Procedural\n * @name UI\n * @description User interface elements can be optionally shown\n * on top of the map\n */\n\n/**\n * @name setCameraModeControlVisible\n * @memberof module:UI\n * @function\n * @param {Boolean} value pass true to show control, false to hide\n * @description Show/hide the camera mode control\n */\nProcedural$8.setCameraModeControlVisible = function ( value ) {\n  setTimeout( function () { ConfigActions.setCameraModeControlVisible( value ); }, 0 );\n};\n\n/**\n * @name setCompassVisible\n * @memberof module:UI\n * @function\n * @param {Boolean} value pass true to show control, false to hide\n * @description Show/hide the compass control\n */\nProcedural$8.setCompassVisible = function ( value ) {\n  setTimeout( function () { ConfigActions.setCompassVisible( value ); }, 0 );\n};\n\n/**\n * @name setRotationControlVisible\n * @memberof module:UI\n * @function\n * @param {Boolean} value pass true to show control, false to hide\n * @description Show/hide the camera rotation control\n */\nProcedural$8.setRotationControlVisible = function ( value ) {\n  setTimeout( function () { ConfigActions.setRotationControlVisible( value ); }, 0 );\n};\n\n/**\n * @name setUserLocationControlVisible\n * @memberof module:UI\n * @function\n * @param {Boolean} value pass true to show control, false to hide\n * @description Show/hide the user location control. If GPS location is\n * not available the control will not be shown.\n */\nProcedural$8.setUserLocationControlVisible = function ( value ) {\n  setTimeout( function () { ConfigActions.setUserLocationControlVisible( value ); }, 0 );\n};\n\n/**\n * @name setZoomControlVisible\n * @memberof module:UI\n * @function\n * @param {Boolean} value pass true to show control, false to hide\n * @description Show/hide the camera zoom control\n */\nProcedural$8.setZoomControlVisible = function ( value ) {\n  setTimeout( function () { ConfigActions.setZoomControlVisible( value ); }, 0 );\n};\n\nvar preact_umd_min = createCommonjsModule(function (module, exports) {\n!function(e,t){t(exports);}(commonjsGlobal,function(e){function t(e,t){var n=E,o=void 0,r=void 0,i=void 0,l=void 0;for(l=arguments.length;l-- >2;)T.push(arguments[l]);t&&null!=t.children&&(T.length||T.push(t.children),delete t.children);while(T.length)if((r=T.pop())&&void 0!==r.pop)for(l=r.length;l--;)T.push(r[l]);else \"boolean\"==typeof r&&(r=null),(i=\"function\"!=typeof e)&&(null==r?r=\"\":\"number\"==typeof r?r+=\"\":\"string\"!=typeof r&&(i=!1)),i&&o?n[n.length-1]+=r:n===E?n=[r]:n.push(r),o=i;var s=new L;return s.nodeName=e,s.children=n,s.attributes=null==t?void 0:t,s.key=null==t?void 0:t.key,void 0!==M.vnode&&M.vnode(s),s}function n(e,t){for(var n in t)e[n]=t[n];return e}function o(e,t){e&&(\"function\"==typeof e?e(t):e.current=t);}function r(e,o){return t(e.nodeName,n(n({},e.attributes),o),arguments.length>2?[].slice.call(arguments,2):e.children)}function i(e){!e._dirty&&(e._dirty=!0)&&1==z.push(e)&&(M.debounceRendering||W)(l);}function l(){var e=void 0;while(e=z.pop())e._dirty&&N(e);}function s(e,t,n){return \"string\"==typeof t||\"number\"==typeof t?void 0!==e.splitText:\"string\"==typeof t.nodeName?!e._componentConstructor&&a(e,t.nodeName):n||e._componentConstructor===t.nodeName}function a(e,t){return e.normalizedNodeName===t||e.nodeName.toLowerCase()===t.toLowerCase()}function p(e){var t=n({},e.attributes);t.children=e.children;var o=e.nodeName.defaultProps;if(void 0!==o)for(var r in o)void 0===t[r]&&(t[r]=o[r]);return t}function u(e,t){var n=t?document.createElementNS(\"http://www.w3.org/2000/svg\",e):document.createElement(e);return n.normalizedNodeName=e,n}function d(e){var t=e.parentNode;t&&t.removeChild(e);}function c(e,t,n,r,i){if(\"className\"===t&&(t=\"class\"),\"key\"===t);else if(\"ref\"===t)o(n,null),o(r,e);else if(\"class\"!==t||i)if(\"style\"===t){if(r&&\"string\"!=typeof r&&\"string\"!=typeof n||(e.style.cssText=r||\"\"),r&&\"object\"==typeof r){if(\"string\"!=typeof n)for(var l in n)l in r||(e.style[l]=\"\");for(var s in r)e.style[s]=\"number\"==typeof r[s]&&!1===H.test(s)?r[s]+\"px\":r[s];}}else if(\"dangerouslySetInnerHTML\"===t)r&&(e.innerHTML=r.__html||\"\");else if(\"o\"==t[0]&&\"n\"==t[1]){var a=t!==(t=t.replace(/Capture$/,\"\"));t=t.toLowerCase().substring(2),r?n||e.addEventListener(t,f,a):e.removeEventListener(t,f,a),(e._listeners||(e._listeners={}))[t]=r;}else if(\"list\"!==t&&\"type\"!==t&&!i&&t in e){try{e[t]=null==r?\"\":r;}catch(e){}null!=r&&!1!==r||\"spellcheck\"==t||e.removeAttribute(t);}else {var p=i&&t!==(t=t.replace(/^xlink:?/,\"\"));null==r||!1===r?p?e.removeAttributeNS(\"http://www.w3.org/1999/xlink\",t.toLowerCase()):e.removeAttribute(t):\"function\"!=typeof r&&(p?e.setAttributeNS(\"http://www.w3.org/1999/xlink\",t.toLowerCase(),r):e.setAttribute(t,r));}else e.className=r||\"\";}function f(e){return this._listeners[e.type](M.event&&M.event(e)||e)}function v(){var e=void 0;while(e=F.shift())M.afterMount&&M.afterMount(e),e.componentDidMount&&e.componentDidMount();}function h(e,t,n,o,r,i){I++||(O=null!=r&&void 0!==r.ownerSVGElement,$=null!=e&&!(j in e));var l=m(e,t,n,o,i);return r&&l.parentNode!==r&&r.appendChild(l),--I||($=!1,i||v()),l}function m(e,t,n,o,r){var i=e,l=O;if(null!=t&&\"boolean\"!=typeof t||(t=\"\"),\"string\"==typeof t||\"number\"==typeof t)return e&&void 0!==e.splitText&&e.parentNode&&(!e._component||r)?e.nodeValue!=t&&(e.nodeValue=t):(i=document.createTextNode(t),e&&(e.parentNode&&e.parentNode.replaceChild(i,e),y(e,!0))),i[j]=!0,i;var s=t.nodeName;if(\"function\"==typeof s)return k(e,t,n,o);if(O=\"svg\"===s||\"foreignObject\"!==s&&O,s+=\"\",(!e||!a(e,s))&&(i=u(s,O),e)){while(e.firstChild)i.appendChild(e.firstChild);e.parentNode&&e.parentNode.replaceChild(i,e),y(e,!0);}var p=i.firstChild,d=i[j],c=t.children;if(null==d){d=i[j]={};for(var f=i.attributes,v=f.length;v--;)d[f[v].name]=f[v].value;}return !$&&c&&1===c.length&&\"string\"==typeof c[0]&&null!=p&&void 0!==p.splitText&&null==p.nextSibling?p.nodeValue!=c[0]&&(p.nodeValue=c[0]):(c&&c.length||null!=p)&&_(i,c,n,o,$||null!=d.dangerouslySetInnerHTML),g(i,t.attributes,d),O=l,i}function _(e,t,n,o,r){var i=e.childNodes,l=[],a={},p=0,u=0,c=i.length,f=0,v=t?t.length:0,h=void 0,_=void 0,b=void 0,g=void 0,C=void 0;if(0!==c)for(var x=0;x<c;x++){var w=i[x],N=w[j],k=v&&N?w._component?w._component.__key:N.key:null;null!=k?(p++,a[k]=w):(N||(void 0!==w.splitText?!r||w.nodeValue.trim():r))&&(l[f++]=w);}if(0!==v)for(var S=0;S<v;S++){g=t[S],C=null;var U=g.key;if(null!=U)p&&void 0!==a[U]&&(C=a[U],a[U]=void 0,p--);else if(u<f)for(h=u;h<f;h++)if(void 0!==l[h]&&s(_=l[h],g,r)){C=_,l[h]=void 0,h===f-1&&f--,h===u&&u++;break}C=m(C,g,n,o),b=i[S],C&&C!==e&&C!==b&&(null==b?e.appendChild(C):C===b.nextSibling?d(b):e.insertBefore(C,b));}if(p)for(var P in a)void 0!==a[P]&&y(a[P],!1);while(u<=f)void 0!==(C=l[f--])&&y(C,!1);}function y(e,t){var n=e._component;n?S(n):(null!=e[j]&&o(e[j].ref,null),!1!==t&&null!=e[j]||d(e),b(e));}function b(e){e=e.lastChild;while(e){var t=e.previousSibling;y(e,!0),e=t;}}function g(e,t,n){var o=void 0;for(o in n)t&&null!=t[o]||null==n[o]||c(e,o,n[o],n[o]=void 0,O);for(o in t)\"children\"===o||\"innerHTML\"===o||o in n&&t[o]===(\"value\"===o||\"checked\"===o?e[o]:n[o])||c(e,o,n[o],n[o]=t[o],O);}function C(e,t,n){var o=void 0,r=G.length;e.prototype&&e.prototype.render?(o=new e(t,n),U.call(o,t,n)):(o=new U(t,n),o.constructor=e,o.render=x);while(r--)if(G[r].constructor===e)return o.nextBase=G[r].nextBase,G.splice(r,1),o;return o}function x(e,t,n){return this.constructor(e,n)}function w(e,t,n,r,l){e._disable||(e._disable=!0,e.__ref=t.ref,e.__key=t.key,delete t.ref,delete t.key,void 0===e.constructor.getDerivedStateFromProps&&(!e.base||l?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(t,r)),r&&r!==e.context&&(e.prevContext||(e.prevContext=e.context),e.context=r),e.prevProps||(e.prevProps=e.props),e.props=t,e._disable=!1,n!==D&&(n!==V&&!1===M.syncComponentUpdates&&e.base?i(e):N(e,V,l)),o(e.__ref,e));}function N(e,t,o,r){if(!e._disable){var i=e.props,l=e.state,s=e.context,a=e.prevProps||i,u=e.prevState||l,d=e.prevContext||s,c=e.base,f=e.nextBase,m=c||f,_=e._component,b=!1,g=d,x=void 0,k=void 0,U=void 0;if(e.constructor.getDerivedStateFromProps&&(l=n(n({},l),e.constructor.getDerivedStateFromProps(i,l)),e.state=l),c&&(e.props=a,e.state=u,e.context=d,t!==A&&e.shouldComponentUpdate&&!1===e.shouldComponentUpdate(i,l,s)?b=!0:e.componentWillUpdate&&e.componentWillUpdate(i,l,s),e.props=i,e.state=l,e.context=s),e.prevProps=e.prevState=e.prevContext=e.nextBase=null,e._dirty=!1,!b){x=e.render(i,l,s),e.getChildContext&&(s=n(n({},s),e.getChildContext())),c&&e.getSnapshotBeforeUpdate&&(g=e.getSnapshotBeforeUpdate(a,u));var P=x&&x.nodeName,B=void 0,L=void 0;if(\"function\"==typeof P){var T=p(x);k=_,k&&k.constructor===P&&T.key==k.__key?w(k,T,V,s,!1):(B=k,e._component=k=C(P,T,s),k.nextBase=k.nextBase||f,k._parentComponent=e,w(k,T,D,s,!1),N(k,V,o,!0)),L=k.base;}else U=m,B=_,B&&(U=e._component=null),(m||t===V)&&(U&&(U._component=null),L=h(U,x,s,o||!c,m&&m.parentNode,!0));if(m&&L!==m&&k!==_){var E=m.parentNode;E&&L!==E&&(E.replaceChild(L,m),B||(m._component=null,y(m,!1)));}if(B&&S(B),e.base=L,L&&!r){var W=e,R=e;while(R=R._parentComponent)(W=R).base=L;L._component=W,L._componentConstructor=W.constructor;}}!c||o?F.push(e):b||(e.componentDidUpdate&&e.componentDidUpdate(a,u,g),M.afterUpdate&&M.afterUpdate(e));while(e._renderCallbacks.length)e._renderCallbacks.pop().call(e);I||r||v();}}function k(e,t,n,o){var r=e&&e._component,i=r,l=e,s=r&&e._componentConstructor===t.nodeName,a=s,u=p(t);while(r&&!a&&(r=r._parentComponent))a=r.constructor===t.nodeName;return r&&a&&(!o||r._component)?(w(r,u,R,n,o),e=r.base):(i&&!s&&(S(i),e=l=null),r=C(t.nodeName,u,n),e&&!r.nextBase&&(r.nextBase=e,l=null),w(r,u,V,n,o),e=r.base,l&&e!==l&&(l._component=null,y(l,!1))),e}function S(e){M.beforeUnmount&&M.beforeUnmount(e);var t=e.base;e._disable=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var n=e._component;n?S(n):t&&(null!=t[j]&&o(t[j].ref,null),e.nextBase=t,d(t),G.push(e),b(t)),o(e.__ref,null);}function U(e,t){this._dirty=!0,this.context=t,this.props=e,this.state=this.state||{},this._renderCallbacks=[];}function P(e,t,n){return h(n,e,{},!1,t,!1)}function B(){return {}}var L=function(){},M={},T=[],E=[],W=\"function\"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout,D=0,V=1,A=2,R=3,j=\"__preactattr_\",H=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,z=[],F=[],I=0,O=!1,$=!1,G=[];n(U.prototype,{setState:function(e,t){this.prevState||(this.prevState=this.state),this.state=n(n({},this.state),\"function\"==typeof e?e(this.state,this.props):e),t&&this._renderCallbacks.push(t),i(this);},forceUpdate:function(e){e&&this._renderCallbacks.push(e),N(this,A);},render:function(){}}),e.default={h:t,createElement:t,cloneElement:r,createRef:B,Component:U,render:P,rerender:l,options:M},e.h=t,e.createElement=t,e.cloneElement=r,e.createRef=B,e.Component=U,e.render=P,e.rerender=l,e.options=M,Object.defineProperty(e,\"__esModule\",{value:!0});});\n});\n\nvar Preact = unwrapExports(preact_umd_min);\n\n// Keep compat layer minimal so we can more easily\n  // track the differences\n  var AUTOBIND_BLACKLIST = {\n    constructor: 1,\n    render: 1,\n    shouldComponentUpdate: 1,\n    componentWillReceiveProps: 1,\n    componentWillUpdate: 1,\n    componentDidUpdate: 1,\n    componentWillMount: 1,\n    componentDidMount: 1,\n    componentWillUnmount: 1,\n    componentDidUnmount: 1\n  };\n  function bindAll(ctx) {\n    for (var i in ctx) {\n      var v = ctx[i];\n      if (typeof v === 'function' && !v.__bound && !AUTOBIND_BLACKLIST.hasOwnProperty(i)) {\n        (ctx[i] = v.bind(ctx)).__bound = true;\n      }\n    }\n  }\n\n  var React = Preact;\n  React.createClass = function ( obj ) {\n    function F(props, context) {\n      bindAll(this);\n      Preact.Component.call( this, props, context );\n    }\n\n    var p = F.prototype = new Preact.Component;\n    // copy our skeleton into the prototype:\n    for ( var i in obj ) { p[i] = obj[i]; }\n    // restore constructor:\n    return p.constructor = F;\n  };\n\n  var _render = React.render;\n  React.render = function ( obj, el ) {\n    el.innerHTML = null;\n    _render( obj, el );\n  };\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nvar v, vl, item, action, actionName, defaultValue;\nvar extractKey = function ( actionName ) {\n  if ( actionName.slice( 0, 3 ) !== 'set' ) {\n    throw new Error( 'Action must be called setX' );\n  }\n\n  return actionName.charAt( 3 ).toLowerCase() +\n           actionName.slice( 4 );\n};\n\nfunction SetterStore ( config ) {\n  // Extract listeners and method names\n  function SetterStore() {\n    var listeners = {};\n\n    // Set defaults\n    for ( v = 0, vl = config.length; v < vl; v++ ) {\n      item = config[ v ];\n      action = item[ 0 ];\n      defaultValue = item[ 1 ];\n      actionName = action.data.name;\n      this[ extractKey( actionName ) ] = defaultValue;\n\n      // Configure binding between action and function\n      listeners[ actionName ] = action;\n    }\n\n    this.bindListeners( listeners );\n  }\n\n  // Define handler functions to set values\n  for ( v = 0, vl = config.length; v < vl; v++ ) {\n    item = config[ v ];\n    action = item[ 0 ];\n    actionName = action.data.name;\n    SetterStore.prototype[ actionName ] = function ( key ) {\n      return function ( value ) { this[ key ] = value; };\n    }( extractKey( actionName ) );\n  }\n\n  return SetterStore;\n}\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nvar PlacesStore = SetterStore( [\n  [ UserActions.setCurrentPlace, {} ]\n] );\nPlacesStore.displayName = 'PlacesStore';\nvar PlacesStore$1 = alt.createStore( PlacesStore );\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nfunction EngineStore() {\n  this.featuresLoaded = false;\n  this.renderedFeatureStatus = {};\n  this.featuresRendered = false;\n\n  this.bindListeners( {\n    renderedFeatureRegister: RenderActions.renderedFeatureRegister,\n    renderedFeatureDisplayed: RenderActions.renderedFeatureDisplayed,\n    setCurrentPlace: UserActions.setCurrentPlace,\n    setFeatures: GeodataActions.setFeatures\n  } );\n}\n\nEngineStore.prototype.setCurrentPlace = function () {\n  this.featuresLoaded = false;\n\n  // Clear out which features have been rendered\n  var features = Object.keys( this.renderedFeatureStatus );\n  for ( var f = 0; f < features.length; f++ ) {\n    this.renderedFeatureStatus[ features[ f ] ] = false;\n  }\n\n  this.featuresRendered = false;\n\n  this.waitFor( PlacesStore$1 );\n  var place = PlacesStore$1.getState().currentPlace;\n  setTimeout( function () {\n    const loc = {\n      angle: 40, distance: 5000,\n      bearing: 0, animationDuration: 0.5,\n      ...place\n    };\n    heightAt( loc, H => {\n      loc.height = H;\n      UserActions.focusOnLocation( loc );\n    } );\n  }, 0 );\n};\n\nEngineStore.prototype.setFeatures = function () {\n  this.waitFor( OSMAdapter$1 );\n  this.featuresLoaded = true;\n};\n\n// Keep track of what features are showing on map, and if they have been\n// loaded into view. This lets us detect when the map is completely loaded\nEngineStore.prototype.renderedFeatureRegister = function ( feature ) {\n  this.renderedFeatureStatus[ feature ] = false;\n  return false;\n};\n\nEngineStore.prototype.renderedFeatureDisplayed = function ( feature ) {\n  this.renderedFeatureStatus[ feature ] = true;\n  var features = Object.keys( this.renderedFeatureStatus );\n\n  // Have we even downloaded them yet?\n  this.featuresRendered = this.featuresLoaded;\n\n  // Check if all features are shown\n  for ( var f = 0; f < features.length; f++ ) {\n    var featureDisplayed = this.renderedFeatureStatus[ features[ f ] ];\n    if ( !featureDisplayed ) { this.featuresRendered = false; }\n  }\n\n  return this.featuresRendered;\n};\n\nEngineStore.displayName = 'EngineStore';\nalt.createStore( EngineStore );\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nvar EnvironmentStore = SetterStore( [\n  [ UserActions.setEnvironment, {} ]\n] );\nEnvironmentStore.displayName = 'EnvironmentStore';\nvar EnvironmentStore$1 = alt.createStore( EnvironmentStore );\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nvar envParams = {};\n\nvar distance = 400000; // Sun distance\nenvParams.update = function () {\n  // Sky\n  skyUniforms.turbidity.value = envParams.turbidity;\n  skyUniforms.reileigh.value = envParams.reileigh;\n  skyUniforms.luminance.value = envParams.luminance;\n  skyUniforms.mieCoefficient.value = envParams.mieCoefficient;\n  skyUniforms.mieDirectionalG.value = envParams.mieDirectionalG;\n\n  var theta = Math.PI * ( envParams.inclination - 0.5 );\n  var phi = 2 * Math.PI * ( envParams.azimuth - 0.5 );\n\n  skyUniforms.sunPosition.value.set(\n    distance * Math.sin( phi ) * Math.cos( theta ),\n    distance * Math.cos( phi ) * Math.cos( theta ),\n    distance * Math.sin( theta )\n  );\n  skyUniforms.update();\n  fogUniforms.update();\n\n  fogUniforms.uFogDropoff.value = envParams.fogDropoff;\n  fogUniforms.uFogIntensity.value = envParams.fogIntensity;\n\n  tonemapUniforms.exposureBias.value = envParams.exposureBias;\n  tonemapUniforms.whitePoint.value = envParams.whitePoint;\n  tonemapUniforms.update();\n};\n\nenvParams.set = function ( params, duration ) {\n  if ( duration === 0 ) {\n    // Skip interpolation\n    Object.assign( envParams, params );\n    envParams.update();\n    setTimeout( function () { RenderActions.needsRender( { env: true } ); } );\n  } else {\n    var oldParams = lodash_min.clone( envParams );\n    var newParams = lodash_min.clone( params );\n    StoreUtils.transition( function ( params ) {\n      Object.assign( envParams, params );\n      envParams.update();\n      setTimeout( function () { RenderActions.needsRender( { env: true } ); } );\n    }, oldParams, newParams, {\n      duration: duration,\n      doNotCancel: true,\n      lerp: StoreUtils.lerp.params,\n      onComplete: function () {\n        RenderActions.needsRender( { env: true } );\n      }\n    } );\n  }\n};\n\n// Sync up to EnvironmentStore\n// TODO, perhaps cleaner to rename this to some sort of Transition class?\nEnvironmentStore$1.listen( function ( state ) {\n  var env = state.environment;\n  envParams.set( env.parameters, env.animationDuration );\n} );\n\nPlacesStore$1.listen( function ( state ) {\n  var place = state.currentPlace;\n  if ( place.env ) { envParams.set( place.env, 0 ); }\n} );\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nvar CurrentLocation = function ( ) {\n  THREE.Object3D.call( this );\n  this.sphere = new THREE.Mesh(\n    new THREE.SphereBufferGeometry( 50, 32, 15 ),\n    material.beacon );\n  this.add( this.sphere );\n  this.visible = false;\n  scene.add( this );\n\n  CurrentLocationStore$1.listen( this.update.bind( this ) );\n  RenderStore$1.listen( this.tick.bind( this ) );\n};\n\nCurrentLocation.prototype = Object.create( THREE.Object3D.prototype );\n\nCurrentLocation.prototype.update = function () {\n  var state = CurrentLocationStore$1.getState();\n  if ( !state.longitude || !state.latitude || state.tooFar ) {\n    this.visible = false;\n    return;\n  } else {\n    this.visible = true;\n  }\n\n  var latest = geoproject.project( [ state.longitude, state.latitude ] );\n  this.position.copy( latest );\n  this.sphere.material.uniforms.uAccuracy.value = state.accuracy || 0;\n};\n\nCurrentLocation.prototype.tick = function ( state ) {\n  this.sphere.material.uniforms.uTime.value = state.clock.elapsedTime;\n};\n\nnew CurrentLocation();\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// Helper Geometry for merging together buffer geometries\nvar BufferMergeGeometry = function ( vertexCount, attributes, tag ) {\n  BufferGeometry.call( this );\n\n  // Some defaults for now, later maybe split up into smaller geometries? then can use 16bit uint index?\n  vertexCount = vertexCount || 1024 * 1024;\n  attributes = attributes || [ 'position' ];\n\n  this.type = 'BufferMergeGeometry';\n\n  this.indices = [];\n  var self = this;\n  var buffer;\n  for ( var a = 0; a < attributes.length; a++ ) {\n    var attribute = attributes[ a ];\n    // For now assume vec3\n    // TODO investigate if we can switch to Int16 here?\n    // TODO or even Int8 for normals\n    //var buffer = new Int16Array( 3 * vertexCount );\n    if ( attribute === 'normal' ) {\n      buffer = new Int8Array( 3 * vertexCount );\n      self.setAttribute( attribute, new BufferAttribute( buffer, 3, true ) );\n    } else if ( attribute === 'tangent' ) {\n      buffer = new Int8Array( 4 * vertexCount );\n      self.setAttribute( attribute, new BufferAttribute( buffer, 4, true ) );\n    } else if ( attribute === 'color' ) {\n      buffer = new Uint8Array( 4 * vertexCount );\n      self.setAttribute( attribute, new BufferAttribute( buffer, 4, true ) );\n    } else {\n      buffer = new Float32Array( 3 * vertexCount );\n      self.setAttribute( attribute, new BufferAttribute( buffer, 3 ) );\n    }\n  }\n\n  if ( tag ) { // For GPU picking\n    buffer = new Uint8Array( 3 * vertexCount );\n    self.setAttribute( 'tag', new BufferAttribute( buffer, 3, true ) );\n  }\n\n  this.attributeOffset = 0;\n  this.indexOffset = 0;\n};\n\nBufferMergeGeometry.prototype = Object.create( BufferGeometry.prototype );\n\nBufferMergeGeometry.prototype._mergeIndices = function ( geometry ) {\n  // Copy across indices, offseting by previous additions\n  var dstArray = this.indices;\n  var srcArray = geometry.index.array;\n  var count = geometry.index.array.length;\n  for ( var i = 0, j = this.indexOffset; i < count; i++, j++ ) {\n    dstArray[ j ] = this.attributeOffset + srcArray[ i ];\n  }\n\n  this.indexOffset += count;\n};\n\n// Expects to merge in BufferGeometry\nBufferMergeGeometry.prototype.merge = function ( geometry, tag ) {\n  this._mergeIndices( geometry );\n\n  var i, j, il, dstArray, srcArray, count;\n\n  // Construct tag value\n  var color = new Color( tag );\n  color = new Uint8Array( [ 255 * color.r, 255 * color.g, 255 * color.b ] );\n\n  // Copy across attributes\n  var self = this;\n  var attrKeys = Object.keys( this.attributes );\n  for ( var a = 0; a < attrKeys.length; a++ ) {\n    var key = attrKeys[ a ];\n    var value = this.attributes[ key ];\n    dstArray = value.array;\n\n    if ( key === 'tag' && tag ) {\n      // Fill array with color\n      for ( i = 0, j = 3 * self.attributeOffset, il = 3 * count; i < il; i += 3, j += 3 ) {\n        dstArray.set( color, j );\n      }\n    } else if ( geometry.attributes[ key ] ) {\n      srcArray = geometry.attributes[ key ].array;\n      count = geometry.attributes[ key ].count;\n      dstArray.set( srcArray,\n        value.itemSize * self.attributeOffset );\n    }\n  }\n\n  this.attributeOffset += count;\n\n  return this;\n};\n\n// How many more vertices we can accept\nBufferMergeGeometry.prototype.capacity = function () {\n  return this.attributes.position.count - this.attributeOffset;\n};\n\n// When constructing of this geometry is complete, freeze it\n// by capping the index array\nBufferMergeGeometry.prototype.freeze = function () {\n  var TypeArray = this.attributes.position.count > 65535 ? Uint32Array : Uint16Array;\n  var index = new TypeArray( this.indices );\n  this.setIndex( new BufferAttribute( index, 1 ) );\n\n  // Clip attribute arrays, massively saving on memory\n  // TODO, could we just create the buffer the correct size at the beginning?\n  var attrKeys = Object.keys( this.attributes );\n  var key, value, end;\n  for ( var a = 0; a < attrKeys.length; a++ ) {\n    key = attrKeys[ a ];\n    value = this.attributes[ key ];\n    end = value.itemSize * this.attributeOffset;\n    value.set( value.array.subarray( 0, end ) );\n    this.setAttribute( key,\n      new BufferAttribute(\n        value.array.subarray( 0, end ),\n        value.itemSize,\n        value.normalized ) );\n  }\n\n  return this;\n};\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n *\n * This file incorporates work covered by the following copyright and\n * permission notice:\n *\n *   The MIT License\n *\n *   Copyright © 2010-2020 three.js authors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in\n *   all copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *   THE SOFTWARE.\n */\n// To avoid creating garbage when calculating catmull, re-use variables\nvar v0, v1, t2, t3, A$1, B$1;\nvar catmullGenerator = {\n  position: 0,\n  tangent: 0,\n  generate: function ( p0, p1, p2, p3, t, createTangent ) {\n    v0 = ( p2 - p0 ) * 0.5;\n    v1 = ( p3 - p1 ) * 0.5;\n    t2 = t * t;\n    t3 = t * t2;\n    A$1 = ( 2 * p1 - 2 * p2 + v0 + v1 );\n    B$1 = ( -3 * p1 + 3 * p2 - 2 * v0 - v1 );\n    catmullGenerator.position = A$1 * t3 + B$1 * t2 + v0 * t + p1;\n    if ( createTangent ) {\n      catmullGenerator.tangent = 3 * A$1 * t2 + 2 * B$1 * t + v0;\n    }\n  }\n};\n\n\nvar points, point, intPoint, weight, p0, p1$1, p2$1, p3;\nvar vector = new THREE.Vector3(),\n  color = new Color$1(),\n  position = new THREE.Vector3(),\n  tangent = new THREE.Vector3();\nvar tmp$1 = {\n  color: color,\n  position: position,\n  tangent: tangent\n};\n\nvar LineCurve$1 = function ( points, colors ) {\n  THREE.Curve.call( this );\n\n  this.hDelta = 3;\n  this.points = ( points === undefined ) ? [] : points;\n\n  // Optionally pass a set of colors to map to each point\n  if ( colors ) {\n    this.colors = colors.map( function ( c ) {\n      return new Color$1( c );\n    } );\n  } else {\n    this.colors = undefined;\n  }\n};\n\nLineCurve$1.prototype = Object.create( THREE.Curve.prototype );\n\nLineCurve$1.prototype.getPoint = function ( t ) {\n  points = this.points;\n  point = ( points.length - 1 ) * t;\n\n  intPoint = Math.floor( point );\n  weight = point - intPoint;\n\n  p0 = points[ intPoint === 0 ? intPoint : intPoint - 1 ];\n  p1$1 = points[ intPoint ];\n  p2$1 = points[ intPoint > points.length - 2 ? points.length - 1 : intPoint + 1 ];\n  p3 = points[ intPoint > points.length - 3 ? points.length - 1 : intPoint + 2 ];\n\n  // TODO should avoid new creation\n  vector = new THREE.Vector3();\n  catmullGenerator.generate( p0.x, p1$1.x, p2$1.x, p3.x, weight );\n  vector.x = catmullGenerator.position;\n  catmullGenerator.generate( p0.y, p1$1.y, p2$1.y, p3.y, weight );\n  vector.y = catmullGenerator.position;\n  vector.z = this.hDelta;\n\n  return vector;\n};\n\n// Replace with derivative?\nLineCurve$1.prototype.getTangentAt = function ( u ) {\n  var delta = 0.00001;\n  var u1 = u - delta;\n  var u2 = u + delta;\n\n  // Capping in case of danger\n  if ( u1 < 0 ) { u1 = 0; }\n\n  if ( u2 > 1 ) { u2 = 1; }\n\n  var pt1 = this.getPointAt( u1 );\n  var pt2 = this.getPointAt( u2 );\n\n  var vec = pt2.clone().sub( pt1 );\n  return vec.normalize();\n};\n\n// Calculate both position and tangent together as it is\n// more efficient and we need both anyway\nLineCurve$1.prototype.getPointAndTangentAt = function ( u ) {\n  var t = this.getUtoTmapping( u );\n  return this.getPointAndTangent( t );\n};\n\nLineCurve$1.prototype.getPointAndTangent = function ( t ) {\n  points = this.points;\n  point = ( points.length - 1 ) * t;\n\n  intPoint = Math.floor( point );\n  weight = point - intPoint;\n\n  p0 = points[ intPoint === 0 ? intPoint : intPoint - 1 ];\n  p1$1 = points[ intPoint ];\n  p2$1 = points[ intPoint > points.length - 2 ? points.length - 1 : intPoint + 1 ];\n  p3 = points[ intPoint > points.length - 3 ? points.length - 1 : intPoint + 2 ];\n\n  // Potentially expensive, should look at optimizing. E.g. store curve\n  // in st coordinate space?\n  catmullGenerator.generate( p0.x, p1$1.x, p2$1.x, p3.x, weight, true );\n  position.x = catmullGenerator.position;\n  tangent.x = catmullGenerator.tangent;\n  catmullGenerator.generate( p0.y, p1$1.y, p2$1.y, p3.y, weight, true );\n  position.y = catmullGenerator.position;\n  tangent.y = catmullGenerator.tangent;\n  position.z = this.hDelta;\n  tangent.z = 0; // As position.z is constant, this is always 0\n  tangent.normalize();\n\n  if ( this.colors ) {\n    p1$1 = this.colors[ intPoint ];\n    p2$1 = this.colors[ intPoint > points.length - 2 ? points.length - 1 : intPoint + 1 ];\n    color.set( p1$1 ).lerp( p2$1, weight );\n  }\n\n  return tmp$1;\n};\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n *\n * This file incorporates work covered by the following copyright and\n * permission notice:\n *\n *   The MIT License\n *\n *   Copyright © 2010-2020 three.js authors\n *\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n *\n *   The above copyright notice and this permission notice shall be included in\n *   all copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *   THE SOFTWARE.\n */\n\n// So we can better optimize, hard code radial segments and thickness\n// Only support \"flat\" tubes. This works well for roads and rivers\n// For lines the shader aligns the triangles in screen-space\n// anyway, to keep a constant on-screen width\nvar radialSegments = 2;\n\n\nvar radialDir = new Array( radialSegments );\nfor ( var r = 0; r < radialSegments; r++ ) {\n  radialDir[ r ] = ( 1 - 2 * r );\n}\n\nvar LineGeometry = function ( feature, segments, options, attributes ) {\n  this.type = 'LineGeometry';\n  segments = segments || 64;\n  attributes = attributes || [ 'position', 'normal', 'tangent' ];\n\n  var color, tangent,\n    numpoints = segments + 1,\n    u, tmp,\n    i, j, p,\n    ip, jp,\n    a, b, c, d;\n\n  // Only generate the attributes we need\n  var createColors = attributes.indexOf( 'color' ) !== -1;\n  var createNormals = attributes.indexOf( 'normal' ) !== -1;\n  var createTangents = attributes.indexOf( 'tangent' ) !== -1;\n\n  // Only create buffers for attributes we need\n  var positionBuffer, colorBuffer, normalBuffer, tangentBuffer;\n  // Alway create position buffer\n  positionBuffer = new Float32Array( 3 * numpoints * radialSegments );\n  this.attributes = {\n    position: new THREE.BufferAttribute( positionBuffer, 3 )\n  };\n  if ( createColors ) {\n    colorBuffer = new Uint8Array( 4 * numpoints * radialSegments );\n    this.attributes.color = new THREE.BufferAttribute( colorBuffer, 4, false );\n  }\n\n  if ( createNormals ) {\n    normalBuffer = new Int8Array( 3 * numpoints * radialSegments );\n    this.attributes.normal = new THREE.BufferAttribute( normalBuffer, 3, false );\n  }\n\n  if ( createTangents ) {\n    tangentBuffer = new Int8Array( 4 * numpoints * radialSegments );\n    this.attributes.tangent = new THREE.BufferAttribute( tangentBuffer, 4, false );\n  }\n\n  var offset = 0;\n  var tangentDir = 0;\n\n  // consruct the grid\n  var grid = new Array( numpoints );\n  for ( i = 0; i < numpoints; i++ ) {\n    grid[ i ] = [];\n    u = i / segments;\n\n    // Get attribute value at this point\n    tmp = feature.curve.getPointAndTangentAt( u );\n    tangent = tmp.tangent;\n\n    // TODO get color from feature\n    color = tmp.color;\n\n    p = i * radialSegments;\n    for ( j = 0; j < radialSegments; j++ ) {\n      var offset4 = 4 * offset / 3;\n      grid[ i ][ j ] = p + j;\n\n      positionBuffer[ offset ] = tmp.position.x;\n      positionBuffer[ offset + 1 ] = tmp.position.y;\n      positionBuffer[ offset + 2 ] = tmp.position.z;\n\n      // Some objects do not care about their height (they read height map)\n      // but need direction of flow. Use spare position z direction to pass\n      if ( options.writeTangent ) {\n        positionBuffer[ offset + 2 ] = Math.atan2( tangent.y, tangent.x );\n      }\n\n      if ( createColors ) {\n        colorBuffer[ offset4 ] = 255 * color.r;\n        colorBuffer[ offset4 + 1 ] = 255 * color.g;\n        colorBuffer[ offset4 + 2 ] = 255 * color.b;\n        colorBuffer[ offset4 + 3 ] = 255 * color.a;\n      }\n\n      if ( createNormals ) {\n        // Cross product of tangent with (0,0,1)\n        normalBuffer[ offset ] = 127 * radialDir[ j ] * tangent.y;\n        normalBuffer[ offset + 1 ] = -127 * radialDir[ j ] * tangent.x;\n        normalBuffer[ offset + 2 ] = 0.0;\n      }\n\n      if ( createTangents ) {\n        // TODO, perhaps would be quicker to use set() on Float32Array,\n        // but only would make sense if lineCurve etc were modified\n\n        tangentDir = 127 - 254 * j;\n        tangentBuffer[ offset4 ] = tangentDir * tangent.x;\n        tangentBuffer[ offset4 + 1 ] = tangentDir * tangent.y;\n        tangentBuffer[ offset4 + 2 ] = tangentDir * tangent.z;\n        tangentBuffer[ offset4 + 3 ] = 0.5 * tangentDir;\n      }\n\n      offset += 3;\n    }\n  }\n\n  // construct the mesh\n  var n = segments * radialSegments * 6;\n  var indices = ( positionBuffer.length / 3 ) > 65535 ? new Uint32Array( n ) : new Uint16Array( n );\n  this.index = new THREE.BufferAttribute( indices, 1 );\n  offset = 0;\n\n  for ( i = 0; i < segments; i++ ) {\n    ip = i + 1;\n    for ( j = 0; j < radialSegments; j++ ) {\n      jp = ( j + 1 ) % radialSegments;\n\n      a = grid[ i ][ j ];\t\t// *** NOT NECESSARILY PLANAR ! ***\n      b = grid[ ip ][ j ];\n      c = grid[ ip ][ jp ];\n      d = grid[ i ][ jp ];\n\n      indices[ offset ] = a;\n      indices[ offset + 1 ] = b;\n      indices[ offset + 2 ] = d;\n\n      indices[ offset + 3 ] = b;\n      indices[ offset + 4 ] = c;\n      indices[ offset + 5 ] = d;\n\n      offset += 6;\n    }\n  }\n};\n\nLineGeometry.prototype.constructor = LineGeometry;\n\nLineGeometry.prototype.dispose = function () {\n  this.index = null;\n  delete this.attributes;\n};\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// Helper to distribute work load across animation frames\n// Used for splitting out things like parsing lines\n// Typical startup involves 75 step invocations leading to\n// ~2000 process invocations\nvar timeSource = performance || Date;\nvar WorkQueue = {\n  taskCount: 0,\n\n  // Process items for up to 30ms (split across all tasks)\n  workTimeout: 30,\n\n  // Maintain global list of onComplete handlers that are\n  // ready to be fired. If a task queue has completed\n  // processing, these should be fired at highest priority,\n  // before any more processing of other queues is done.\n  // Fired these first prevents other queues starving the\n  // time given to onComplete handlers\n  completedTasks: [],\n\n  // Params\n  // queue: list of items to process\n  // process: function to invoke on each item in `queue`\n  // onComplete: function called when processing complete\n  createTask: function ( queue, process, onComplete, highPriority ) {\n    if ( queue.length === 0 ) {\n      enqueue( onComplete );\n      return;\n    }\n\n    WorkQueue.taskCount++;\n    var i = 0, item, now, task, globalTimeout, localTimeout;\n    var complete = false;\n    var step = function ( state ) {\n      // Bail out instantly if we have no time left\n      now = timeSource.now();\n      globalTimeout = WorkQueue.workTimeout + state.time;\n      if ( now > globalTimeout ) { return }\n\n      // If any task is complete, then handle its\n      // onComplete before anything else\n      // (but do not trigger if we have less than\n      // 10ms\n      if ( WorkQueue.completedTasks.length > 0 &&\n           globalTimeout - now > 10 ) {\n        task = WorkQueue.completedTasks.pop();\n        AnimationStore$1.unlisten( task.step );\n        WorkQueue.taskCount--;\n        task.onComplete();\n      }\n\n      // Now process our queue until our time is up\n      now = timeSource.now();\n      if ( highPriority ) {\n        localTimeout = globalTimeout;\n      } else {\n        localTimeout = WorkQueue.workTimeout / WorkQueue.taskCount + now;\n      }\n\n      while ( now < globalTimeout && // Cap all tasks running time\n              now < localTimeout && // Cap this task's running time\n              ( item = queue[ i++ ] ) ) {\n        process( item );\n        now = timeSource.now();\n      }\n\n      // Once queue is processed, mark this task as completed,\n      // but do not call onComplete yet as this can take a while.\n      // onComplete will instead be called on the next tick if we\n      // have enough time\n      if ( i >= queue.length && !complete ) {\n        complete = true;\n        WorkQueue.completedTasks.unshift( {\n          step: step,\n          onComplete: onComplete\n        } );\n      }\n    };\n\n    AnimationStore$1.listen( step );\n  }\n};\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nvar LinesBase = function () {\n  THREE.Object3D.call( this );\n  this.features = []; // Base data defined in terms of lat/lon\n\n  scene.add( this );\n\n  this.maxIndex = 65535;\n  this.projectTime = 0;\n  this.curveTime = 0;\n  this.geomTime = 0;\n  this.mergeTime = 0;\n\n  // Prevent recalculation of matrix, as we are static\n  this.matrixAutoUpdate = false; this.updateMatrixWorld = function () {};\n\n  this.parent = null; // To let us have lines in two scenes, remove first scene as parent\n\n  // Set to true when drawing geometry that will have constant width on-screen,\n  // like an overlay, rather than a width in world space (like a river etc)\n  // This affects what attributes are generated\n  this.constantWidth = false;\n};\n\nLinesBase.prototype = Object.create( THREE.Object3D.prototype );\n\nLinesBase.prototype.onNewData = function ( state ) {\n  this.features = state.data;\n  this.update();\n};\n\n// Should this be broken up or run in worker?\nLinesBase.prototype.remove = function () {\n  // Remove old meshes\n  this.children.forEach( function ( c ) { c.geometry.dispose(); } );\n  this.children = [];\n};\n\n// Should this be broken up or run in worker?\nLinesBase.prototype.update = function () {\n  var self = this;\n  this.remove();\n\n  if ( this.constantWidth ) {\n    this.bufferGeomAttributes = [ 'position', 'tangent' ];\n  } else {\n    this.bufferGeomAttributes = [ 'position' ];\n  }\n\n  // Keep an array of buffer geometries we'll merge into, keyed of the material.uuid\n  // This allows us to have lines of different color merged\n  this.bufferGeoms = {};\n  this.materials = {};\n\n  // Add lines gradually, using work queue, to not block main thread\n  this.curveTime = 0;\n  this.projectTime = 0;\n  this.geomTime = 0;\n  this.mergeTime = 0;\n\n  log$1( 'Starting processing', self.name );\n\n  WorkQueue.createTask( self.features,\n    self.addMesh.bind( self ), // Invoked on each item in queue\n    function () { // Finish up\n      var startTime = track$1.now();\n      lodash_min.each( self.bufferGeoms, function ( bufferGeom, uuid ) {\n        mesh = new THREE.Mesh( bufferGeom.freeze(), self.materials[ uuid ] );\n        mesh.frustumCulled = false; // TODO is this too aggressive??\n        self.add( mesh );\n      } );\n\n      self.constructTime = track$1.now() - startTime;\n\n      // Notify that we have parsed new lines\n      log$1( 'Parsed', self.name );\n      track$1.timing( self.name, 'project', null, self.projectTime );\n      track$1.timing( self.name, 'curve', null, self.curveTime );\n      track$1.timing( self.name, 'geom', null, self.geomTime );\n      track$1.timing( self.name, 'merge', null, self.mergeTime );\n      track$1.timing( self.name, 'construct', null, self.constructTime );\n      log$1( 'instances:', self.children.length );\n      RenderActions.renderedFeatureDisplayed( self.name );\n    }\n  );\n};\n\nvar mat, mesh, color$1;\nLinesBase.prototype.createGeometry = function ( feature ) {\n  // Recalculate curves (as elevation data has changed)\n  var startTime = track$1.now();\n  var projected = geoproject.vectorizeFeature( feature );\n  var time = track$1.now() - startTime; this.projectTime += time;\n  startTime = track$1.now();\n\n  var colors;\n  if ( feature.geometry.colors ) {\n    if ( feature.geometry.coordinates.length !==\n         feature.geometry.colors.length ) {\n      console.error( 'colors array for feature must have same length as positions array' );\n    } else {\n      colors = feature.geometry.colors;\n      feature.perVertexColors = true;\n    }\n  }\n\n  var curve = new LineCurve$1( projected, colors );\n  feature.curve = curve;\n  time = track$1.now() - startTime; this.curveTime += time;\n\n  startTime = track$1.now();\n  feature.thickness = FeatureUtils.thickness( feature );\n  curve.hDelta = 3 + 0.5 * feature.thickness;\n\n  // We need the curve length, but this is expensive to calculate,\n  // as a rough estimate is fine here, reduce the number of arc\n  // divisions to get the estimate, then update once we have resolution required\n  // This leads to a big speed boost for shorter curves, as the\n  // default value is 200, which is far too high for a short curve\n  feature.curve.arcLengthDivisions = 10;\n  var length = feature.curve.getLength();\n\n  // Resolution determines how many portions the curve is made up of\n  // use a number of heuristics to make sure we get nice looking curves\n  // Note that points will be equally spaced along curve, so if source data\n  // has fine detail, this may be skipped\n  var resolution = Math.round( length / 25 );\n  resolution = Math.max( resolution, 2 * feature.geometry.coordinates.length );\n  resolution = resolution < 10 ? 10 : resolution;\n\n  feature.curve.arcLengthDivisions = resolution;\n  feature.curve.needsUpdate = true;\n\n  var options = {\n    writeTangent: this.writeTangent\n  };\n  if ( !this.constantWidth ) { options.thickness = feature.thickness; }\n\n  feature.geom = new LineGeometry(\n    feature, resolution, options,\n    feature.perVertexColors ?\n      this.bufferGeomAttributes.concat( 'color' ) :\n      this.bufferGeomAttributes );\n\n  time = track$1.now() - startTime; this.geomTime += time;\n\n  // Now we have the 3D geom, dump the geojson to conserve memory\n  delete feature.geometry.colors;\n  // Deleting coordinates breaks CameraStore.focusOnFeature. Simple\n  // hack is just to keep the first coordinate (even if a big ugly)\n  feature.geometry.coordinates = [ feature.geometry.coordinates[ 0 ] ];\n};\n\nLinesBase.prototype.addMesh = function ( feature ) {\n  if ( feature.geom === undefined ) {\n    this.createGeometry( feature );\n  }\n\n  // Get material for this line\n  color$1 = feature.perVertexColors ? null : FeatureUtils.color( feature );\n  // Material function is memoized off first parameter, so pass\n  // null where we have per-vertex colors to create material\n  // just for that\n  mat = this.material( color$1,\n    feature.thickness,\n    ( feature.properties ? feature.properties.outlineColor : undefined ) );\n\n  // Stash away used materials, need them when combining merged geometries\n  if ( !this.materials[ mat.uuid ] ) {\n    this.materials[ mat.uuid ] = mat;\n  }\n\n  var startTime = track$1.now();\n  var count = feature.geom.attributes.position.count;\n  var attributes = feature.perVertexColors ?\n    this.bufferGeomAttributes.concat( 'color' ) :\n    this.bufferGeomAttributes;\n\n  if ( count > this.maxIndex ) {\n    // Geometry too large for combining, just add directly\n    // TODO not clear why it is necessary to convert to BufferMergeGeometry???\n    var tmpGeom = new BufferMergeGeometry( count, attributes, !!feature.tag );\n    tmpGeom.merge( feature.geom, feature.tag );\n    mesh = new THREE.Mesh( tmpGeom.freeze(), mat );\n    this.add( mesh );\n    tmpGeom.dispose();\n  } else { // Combine by merging into larger geometry\n    // Retrieve geometry for this material\n    if ( !this.bufferGeoms[ mat.uuid ] ) {\n      // Lazily create per material geometries\n      this.bufferGeoms[ mat.uuid ] = new BufferMergeGeometry( this.maxIndex, attributes, !!feature.tag );\n    }\n\n    var bufferGeom = this.bufferGeoms[ mat.uuid ];\n\n    if ( count > bufferGeom.capacity() ) {\n      // Have filled current buffer enough, add to scene\n      mesh = new THREE.Mesh( bufferGeom.freeze(), mat );\n      mesh.frustumCulled = false; // TODO is this too aggressive??\n      this.add( mesh );\n\n      // Split to next geom\n      this.bufferGeoms[ mat.uuid ] = new BufferMergeGeometry( this.maxIndex, attributes, !!feature.tag );\n      bufferGeom = this.bufferGeoms[ mat.uuid ];\n    }\n\n    // Finally actually perform merge\n    bufferGeom.merge( feature.geom, feature.tag );\n  }\n\n  var time = track$1.now() - startTime; this.mergeTime += time;\n  RenderActions.featureCreated( feature );\n};\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nvar Lines = function () {\n  LinesBase.call( this );\n\n  LineData$1.listen( this.onNewData.bind( this ) );\n  scene.pickerScene.add( this );\n\n  this.material = material.line;\n  this.name = 'lines';\n  RenderActions.renderedFeatureRegister( this.name );\n\n  this.constantWidth = true;\n};\n\nLines.prototype = Object.create( LinesBase.prototype );\n\nnew Lines();\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nvar mapping = {\n  'top-left': { x: 1, y: -1 },\n  'top': { x: 0, y: -1 },\n  'top-right': { x: -1, y: -1 },\n  'left': { x: 1, y: 0 },\n  'center': { x: 0, y: 0 },\n  'right': { x: -1, y: 0 },\n  'bottom-left': { x: 1, y: 1 },\n  'bottom': { x: 0, y: 1 },\n  'bottom-right': { x: -1, y: 1 }\n};\n\nfunction anchorForName ( name ) {\n  if ( name !== undefined && !isNaN( name.x ) && !isNaN( name.y ) ) {\n    // If we just have coordinates, e.g. {x: 0.5, y: 0.1} just return\n    return name;\n  }\n\n  return mapping[ name ] || mapping.bottom;\n}\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// Extract the glpyh for a FontAwesome icon\nvar iconElement = document.createElement( 'i' );\nvar wrapper = document.createElement( 'div' );\nwrapper.style.position = 'absolute';\nwrapper.style.left = '-999px';\nwrapper.style.top = '-999px';\nwrapper.appendChild( iconElement );\nwrapper.style.display = 'none';\ndocument.body.appendChild( wrapper );\n\nvar glyph;\n\nvar glyphForIcon = lodash_min.memoize( function ( icon ) {\n  wrapper.style.display = 'block';\n  iconElement.className = 'fa fa-' + icon;\n  glyph = window.getComputedStyle( iconElement, ':before' )\n    .getPropertyValue( 'content' );\n  glyph = glyph.replace( /['\"]/g, '' );\n  wrapper.style.display = 'none';\n  return glyph;\n} );\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nvar uiFont = '-apple-system, BlinkMacSystemFont, \"Segoe UI\", \"Roboto\", \"Oxygen\", \"Ubuntu\", \"Cantarell\", \"Fira Sans\", \"Droid Sans\", \"Helvetica Neue\", sans-serif';\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// Polyfill for IE\nMath.log2 = Math.log2 || function ( x ) { return Math.log( x ) * Math.LOG2E };\n\n/**\n * Texture atlas class\n * @param size width of texture to render into\n * @param spriteSize width of each sprite rendered into atlas\n * @param padding padding either side of each sprite\n */\nvar Atlas = function ( size, spriteSize, padding ) {\n  // Match display density when drawing fonts\n  // Note if the user zooms in the web page, this will change,\n  // but for now do not worry about this\n  this.pixelRatio = window.devicePixelRatio;\n  if ( !webgl.depthTexture ) { this.pixelRatio = 1.0; }\n\n  this.pixelRatio = Math.min( this.pixelRatio, 4 );\n  this.size = ( size || 512 ) * this.pixelRatio;\n\n  // Make sure we use power of two\n  this.size = Math.pow( 2, Math.ceil( Math.log2( this.size ) ) );\n  this.width = this.size;\n  this.height = 2 * this.size;\n  this.spriteSize = 40;\n  this.monochromeBegin = 0.25 * this.height;\n  this.queue = [];\n\n  // Add spacing between slots to ensure we don't bleed\n  // sprites into each other\n  this.padding = padding || 0;\n\n  // Stores object transform mapping\n  this.mapping = new Map();\n\n  // Scratch canvas, we'll use for writing,\n  // before copying to the texture. This allows us\n  // to write text into a single channel\n  // TODO should we share the scratch canvas with e.g. geoutils?\n  this.scratchCanvas = document.createElement( 'canvas' );\n  this.scratchCanvas.width = this.width;\n  this.scratchCanvas.height = this.height;\n  this.scratch = this.scratchCanvas.getContext( '2d' );\n  this.scratch.textBaseline = 'middle';\n  this.scratch.fillStyle = 'rgba(255, 255, 255, 1.0)';\n\n  // Texture we'll copy our rasterized images to\n  this.texture = new THREE.Texture( this.scratchCanvas );\n  this.texture.wrapS = THREE.RepeatWrapping;\n  this.texture.wrapT = THREE.RepeatWrapping;\n  this.texture.minFilter = THREE.NearestFilter;\n  this.texture.magFilter = THREE.NearestFilter;\n  this.texture.generateMipmaps = false;\n  this.texture.flipY = false;\n  this.clear();\n\n  // Debug, view canvas\n  var self = this;\n  window.showAtlas = function () {\n    self.scratchCanvas.style.position = 'absolute';\n    self.scratchCanvas.style.width = '512px';\n    self.scratchCanvas.style.height = '512px';\n    self.scratchCanvas.style[ 'pointer-events' ] = 'none';\n    self.scratchCanvas.style.opacity = '0.9';\n    document.children[ 0 ].children[ 1 ].appendChild( self.scratchCanvas );\n  };\n\n  this.defaultFontSize = 11;\n  this.checkFontAvailable();\n};\n\nvar checkCount = 30;\nAtlas.prototype.checkFontAvailable = function () {\n  if ( !this.testCanvas ) {\n    this.testCanvas = document.createElement( 'canvas' );\n    this.testCanvas.width = 16;\n    this.testCanvas.height = 16;\n  }\n\n  var ctx = this.testCanvas.getContext( '2d' );\n\n  // Draw square character for font-awesome to detect\n  // if the font is loaded\n  ctx.font = '32px FontAwesome';\n  ctx.fillStyle = 'rgba(255, 255, 255, 1)';\n  var text = glyphForIcon( 'minus' );\n  ctx.fillText( text, 0, 16 );\n  var fontAvailable = ctx.getImageData( 15, 0, 1, 1 ).data[ 0 ] > 250;\n\n  if ( fontAvailable ) {\n    RenderActions.fontsLoaded();\n  } else {\n    var self = this;\n    setTimeout( function () {\n      self.checkFontAvailable();\n      checkCount--;\n      if ( checkCount === 0 ) {\n        console.error( 'FontAwesome has not loaded' );\n        console.error( 'Please make sure you are including the relevant CSS in the <head> element, e.g.' );\n        console.error( '<link href=\"https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css\" rel=\"stylesheet\">' );\n      }\n    }, 333 );\n  }\n};\n\nAtlas.prototype.checkContainerFont = function () {\n  // Setup text font (extracting what is applied by CSS)\n  var c = document.getElementById( 'container' );\n  var containerFont = c ? document.defaultView.getComputedStyle( c )[ 'font-family' ] : null;\n  containerFont = containerFont || '';\n  this.font = 'FontAwesome, ' + containerFont + \", \" + uiFont;\n  this.setFontSize( this.defaultFontSize );\n};\n\nAtlas.prototype.setFontSize = function ( size ) {\n  if ( size === undefined ) { size = this.defaultFontSize; }\n\n  if ( size === this.fontSize ) { return }\n\n  if ( isNaN( size ) ) {\n    console.error( 'Invalid font size' );\n    return;\n  }\n\n  this.fontSize = size;\n  var font = this.pixelRatio * Math.round( size ) + 'px ';\n  font += this.font;\n  this.scratch.font = font;\n  this.textHeight = this.getTextHeight();\n};\n\nAtlas.prototype.getTextHeight = function () {\n  // Estimate text height. Not perfect, but close enough for now\n  // TODO, fix\n  return 1.3 * this.scratch.measureText( 'M' ).width;\n};\n\n// Fill a slot in atlas by downloading an image from a given URL\nAtlas.prototype.addImage = function ( url, width, height ) {\n  var key = url;\n  if ( width !== undefined ) { key += '#_#' + width; }\n\n  if ( height !== undefined ) { key += '#_#' + height; }\n\n  var transform = this.mapping.get( key );\n  if ( transform !== undefined ) {\n    // Already added, just return the location in atlas\n    return transform;\n  }\n\n  transform = this.createTransform( {\n    width: this.pixelRatio * ( width !== undefined ? width : this.spriteSize ),\n    height: this.pixelRatio * ( height !== undefined ? height : this.spriteSize )\n  } );\n  this.mapping.set( key, transform );\n\n  // Do not draw if we have a zero size area\n  if ( transform.z * transform.w === 0 ) { return transform }\n\n  var imageLoader = new THREE.ImageLoader();\n  imageLoader.setCrossOrigin( 'Anonymous' );\n  var self = this;\n  imageLoader.load( url, function ( image ) {\n    // Draw image\n    var t = transform.clone();\n    t.x *= self.width;\n    t.y *= self.height;\n    t.z *= self.width;\n    t.w *= self.height;\n    self.scratch.clearRect( t.x, t.y, t.z, t.w );\n    self.scratch.globalCompositeOperation = 'lighter';\n    self.scratch.drawImage( image, t.x, t.y, t.z, t.w );\n    self.texture.needsUpdate = true;\n    RenderActions.needsRender();\n  } );\n\n  return transform;\n};\n\n// Helper method to write alpha channel of text to either\n// RGBA channel only.\nAtlas.prototype.fillTextToChannel = function ( text, transform ) {\n  var channel = Math.floor( transform.y / this.height );\n\n  // If we draw the text with red or blue channels only,\n  // it ends up being thinner than it should be. Not 100%\n  // sure why this is, perhaps it is to do with sub-pixel\n  // rendering. To fix, render with green channel also,\n  // and then later clear green channel when we come to use it\n  // To make this simpler, we arrange the channels RBG not RGB\n  // as might be otherwise expected\n  if ( channel === 1 ) {\n    this.scratch.fillStyle = 'rgba(255, 255, 0, 1)';\n  } else if ( channel === 2 ) {\n    this.scratch.fillStyle = 'rgba(0, 255, 255, 1)';\n  } else if ( channel === 3 ) {\n    if ( !this.greenCleared ) { this.clearGreen(); }\n\n    this.scratch.fillStyle = 'rgba(0, 255, 0, 1)';\n  }\n\n  // Draw text onto scratch\n  this.scratch.globalCompositeOperation = 'lighter';\n  var y = ( transform.y % this.height ) + 0.5 * transform.w;\n  this.scratch.fillText( text, transform.x, y );\n};\n\n// Clears green in region of text. Used when we switch to\n// channel 3, as drawing in channels 1 and 2 pollutes\n// the green channel in order for font rendering to work\nAtlas.prototype.clearGreen = function () {\n  this.scratch.globalCompositeOperation = 'multiply';\n  this.scratch.fillStyle = 'rgba(255, 0, 255, 1)';\n  this.scratch.fillRect( 0, this.monochromeBegin,\n    this.width, this.height );\n  this.greenCleared = true;\n};\n\nAtlas.prototype.addText = function ( text, fontSize, drawImmediate ) {\n  if ( !this.font ) { this.checkContainerFont(); }\n\n  this.setFontSize( fontSize );\n  var key = text;\n  if ( fontSize !== undefined ) { key += '#_#' + fontSize; }\n\n  var transform = this.mapping.get( key );\n  if ( transform !== undefined ) {\n    // Already added, just return the location in atlas\n    return transform;\n  }\n\n  // Default lead space to make icons look good\n  // Center the middle of the first character with the border radius\n  // TODO should this be optional?\n  var iconWidth = this.scratch.measureText( text.slice( 0, 1 ) ).width;\n  var iconLeadSpace = 0.5 * ( this.textHeight - iconWidth );\n\n  var textWidth = this.scratch.measureText( text ).width;\n  var width = Math.ceil( textWidth + 2 * iconLeadSpace );\n\n  // Center narrow text\n  if ( width < this.textHeight ) {\n    width = this.textHeight;\n    iconLeadSpace = Math.floor( 0.5 * ( width - textWidth ) );\n  }\n\n  transform = this.createTransform( {\n    width: width,\n    height: this.textHeight\n  }, true );\n  this.mapping.set( key, transform );\n\n  // Do not draw if we have a zero size area\n  if ( transform.z * transform.w === 0 ) { return transform }\n\n  // As creating a lot of text is expensive (getImageData is slow)\n  // defer actually rendering till later. To process the queue\n  // `processQueue` must be called\n  var t = transform.clone();\n  t.x *= this.width;\n  t.y *= this.height;\n  t.z *= this.width;\n  t.w *= this.height;\n  t.x += iconLeadSpace;\n\n  // Cannot draw immediately if we're going to draw to green\n  // channel. This is a bit of a hack, would be better if we sorted\n  // the text to avoid this\n  if ( drawImmediate && transform.y < 3 ) {\n    this.fillTextToChannel( text, t );\n  } else {\n    this.queue.push( {\n      fontSize: fontSize,\n      text: text,\n      transform: t\n    } );\n  }\n\n  return transform;\n};\n\nAtlas.prototype.processQueue = function () {\n  var self = this;\n  WorkQueue.createTask( this.queue,\n    function ( item ) {\n      self.setFontSize( item.fontSize );\n      self.fillTextToChannel( item.text, item.transform );\n    },\n    function () {\n      RenderActions.needsRender();\n      self.queue = [];\n      self.texture.needsUpdate = true;\n      log$1( 'Atlas text drawn' );\n    },\n    true );\n};\n\nAtlas.prototype.clear = function () {\n  this.mapping.clear();\n  log$1( 'ATLAS CLEAR' );\n\n  // Only fill text area with black, by using 'copy'\n  // the image area will be made transparent, which\n  // is better for images as nothing is shown during loading\n  this.scratch.globalCompositeOperation = 'copy';\n  this.scratch.fillStyle = 'rgba(0, 0, 0, 1)';\n  this.scratch.fillRect( 0, this.monochromeBegin, this.width, this.height - this.monochromeBegin );\n  //this.scratch.fillRect( 0, 0, this.width, this.height );\n\n  // We fill up the atlas with images (which use all 4 channels)\n  // and text (which only uses 1). usedX/usedY tracks the space\n  // used by images, while usedMonochrome tracks text\n  this.usedX = 0;\n  this.usedY = 0;\n  this.greenCleared = false;\n  this.rowHeight = 0;\n  this.usedMonochromeX = 0;\n  this.usedMonochromeY = this.height + this.monochromeBegin;\n  this.rowMonochromeHeight = 0;\n};\n\n// Allocate and return the transform applied to uv to determine\n// where image/text is in atlas:\n// uv = transform.xy + transform.zw * uv\n// To specify the object is monochrome (for text) we return\n// a uv value where v is greater than 1, the fractional\n// part has the usual meaning, while the integer part\n// specifies the channel used 1: R, 2: G, 3: B, 4: A\nAtlas.prototype.createTransform = function ( object, monochrome ) {\n  var transform = new THREE.Vector4();\n\n  var width = Math.ceil( object.width );\n  var height = Math.ceil( object.height );\n\n  // Add padding to object to calculate slot we'll\n  // allocate to object\n  var slotWidth = width + 2 * this.padding;\n  var slotHeight = height + 2 * this.padding;\n  var channelTop = 0;\n  var channelBottom = 0;\n\n  // Check if we can fit into atlas at all\n  if ( slotWidth > this.width || slotHeight > this.height ) {\n    console.error( 'Cannot fit object in atlas' );\n    return transform;\n  }\n\n  if ( monochrome ) {\n    // Move to next row if we cannot fit on this one\n    if ( this.usedMonochromeX + slotWidth > this.width ) {\n      this.usedMonochromeX = 0;\n      this.usedMonochromeY += this.rowMonochromeHeight;\n      this.rowMonochromeHeight = 0;\n    }\n\n    // Keep row as tall as biggest object\n    this.rowMonochromeHeight = Math.max( this.rowMonochromeHeight, slotHeight );\n\n    // Detect when top of text is in different channel to bottom\n    channelTop = Math.floor( this.usedMonochromeY / this.height );\n    channelBottom = Math.floor( ( this.usedMonochromeY + this.rowMonochromeHeight ) / this.height );\n\n    // When we reach bottom, jump back up\n    if ( channelTop !== channelBottom ) {\n      this.usedMonochromeX = 0;\n      this.usedMonochromeY = channelBottom * this.height + this.monochromeBegin;\n      this.rowMonochromeHeight = slotHeight;\n    }\n\n    if ( this.usedMonochromeY + this.rowMonochromeHeight >\n         4 * this.height ) {\n      console.error( 'Atlas capacity exceeded!' );\n      transform.z = 0; transform.w = 0;\n      return transform;\n    }\n  } else {\n    if ( this.usedX + slotWidth > this.width ) {\n      this.usedX = 0;\n      this.usedY += this.rowHeight;\n      this.rowHeight = 0;\n    }\n\n    this.rowHeight = Math.max( this.rowHeight, slotHeight );\n    if ( this.usedY + this.rowHeight >= this.monochromeBegin ) {\n      console.error( 'Atlas capacity exceeded!' );\n      transform.z = 0; transform.w = 0;\n      return transform;\n    }\n  }\n\n  // Create transform (snapping to pixels)\n  if ( monochrome ) {\n    transform.x = Math.round( this.usedMonochromeX + this.padding );\n    transform.y = Math.round( this.usedMonochromeY + this.padding );\n    this.usedMonochromeX += slotWidth;\n  } else {\n    transform.x = Math.round( this.usedX + this.padding );\n    transform.y = Math.round( this.usedY + this.padding );\n    this.usedX += slotWidth;\n  }\n\n  transform.z = width;\n  transform.w = height;\n\n  // Convert to 0->1 range\n  transform.x /= this.width;\n  transform.y /= this.height;\n  transform.z /= this.width;\n  transform.w /= this.height;\n\n  return transform;\n};\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nvar mapping$1 = {\n  'none': { x: 0, y: 0 },\n  'object': { x: 1, y: 0 },\n  'pixel': { x: 0, y: 1 }\n};\n\nfunction clippingForName ( name ) {\n  if ( name !== undefined && !isNaN( name.x ) && !isNaN( name.y ) ) {\n    // If we just have coordinates, e.g. {x: 0.5, y: 0.1} just return\n    return name;\n  }\n\n  return mapping$1[ name ] || mapping$1.pixel;\n}\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nfunction MarkerData() {\n  this.data = [];\n  this.haveFonts = false;\n  this.isUpdate = false;\n\n  this.bindListeners( {\n    clearFeatures: UserActions.setCurrentPlace,\n    fontsLoaded: RenderActions.fontsLoaded,\n    addOverlay: [\n      GeodataActions.addBuiltinOverlay,\n      GeodataActions.addOverlay,\n      GeodataActions.setFeatures,\n      GeodataActions.removeOverlay\n    ],\n    updateOverlay: GeodataActions.updateOverlay\n  } );\n}\n\nMarkerData.prototype.clearFeatures = function () {\n  this.data = [];\n  return true;\n};\n\nMarkerData.prototype.isReady = function () {\n  return this.haveFonts;\n};\n\nMarkerData.prototype.fontsLoaded = function () {\n  // Markers need fonts to be drawn to wait for them to arrive\n  this.haveFonts = true;\n  return this.isReady();\n};\n\nMarkerData.prototype.addOverlay = function () {\n  this.waitFor( OverlayAdapter$1 );\n  var markers = OverlayAdapter$1.getState().markers;\n  if ( lodash_min.isEqual( this.data, markers ) ) {\n    // Do not broadcast if data is unchanged\n    return false;\n  }\n\n  this.data = markers.concat();\n  picker.registerStore( this );\n  this.isUpdate = false;\n  return this.isReady();\n};\n\nMarkerData.prototype.updateOverlay = function () {\n  this.waitFor( OverlayAdapter$1 );\n  var markers = OverlayAdapter$1.getState().markers;\n  this.data = markers.concat();\n  this.isUpdate = true;\n  return this.isReady();\n};\n\nMarkerData.displayName = 'MarkerData';\n\nvar MarkerData$1 = alt.createStore( MarkerData );\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// Sugar around array, that let's us determine\n// if it only contains duplicates of a set of\n// values. Useful to build a buffer for an attribute\n// and if it is all the same, use a defaultAttributeValue\n// instead\nvar PushList = function () {\n  this.defaultValue = Array.prototype.slice.call( arguments );\n  if ( this.defaultValue.length === 0 ) {\n    console.error( 'Need to provide default value(s)' );\n  }\n\n  this.array = [];\n  this.firstValue = null;\n  this.onlyDuplicates = true;\n};\n\n// Push and keep track of whether the array only contains\n// duplicates\nPushList.prototype.push = function () {\n  var value = Array.prototype.slice.call( arguments );\n  if ( this.defaultValue.length !== value.length ) {\n    console.error( 'Pushed item with incorrect length to PushList' );\n  }\n\n  if ( this.firstValue === null ) {\n    this.firstValue = value;\n  } else if ( this.onlyDuplicates && !lodash_min.isEqual( this.firstValue, value ) ) {\n    this.onlyDuplicates = false;\n  }\n\n  this.array.push.apply( this.array, value );\n};\n\nPushList.prototype.pushDefault = function () {\n  this.push.apply( this, this.defaultValue );\n};\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nvar Markers = function () {\n  // For instancing to work, the position attribute must\n  // have the instance in it, although this breaks the\n  // bounding sphere/box calculations, see below\n  var quad = [ -1, -1, 1, -1, 1, 1, -1, -1, 1, 1, -1, 1 ];\n  this.positions = new THREE.BufferAttribute( new Float32Array( quad ), 2 );\n\n  var geom = new THREE.InstancedBufferGeometry();\n  geom.setAttribute( 'position', this.positions );\n  THREE.Mesh.call( this, geom, material.marker );\n  this.name = 'markers';\n  RenderActions.renderedFeatureRegister( this.name );\n  this.renderOrder = 1000;\n  this.atlas = new Atlas();\n  this.material.uniforms.uMap.value = this.atlas.texture;\n\n  MarkerData$1.listen( this.onNewData.bind( this ) );\n\n  scene.hd.add( this );\n  this.parent = null; // To let us have markers in two scenes, remove first scene as parent\n  scene.pickerScene.add( this );\n  this.parent = null;\n  this.visible = false;\n\n  var self = this;\n\n  this.empty = true;\n  CameraStore$1.listen( this.checkVisibility.bind( this ) );\n\n  PlacesStore$1.listen( function () {\n    self.atlas.clear();\n  } );\n};\n\nMarkers.prototype = Object.create( THREE.Mesh.prototype );\n\nMarkers.prototype.checkVisibility = function () {\n  this.visible = !this.empty && ( camera.near > 20 );\n};\n\nMarkers.prototype.onNewData = function ( state ) {\n  if ( state.isUpdate ) {\n    this.onUpdatedData( state );\n    return;\n  }\n\n  var startTime = track$1.now();\n  var self = this;\n  var features = state.data;\n  this.empty = features.length === 0;\n  this.checkVisibility();\n  if ( this.empty ) {\n    this.atlas.clear();\n    enqueue( function () {\n      RenderActions.renderedFeatureDisplayed( self.name );\n    } );\n    return;\n  } else {\n    enqueue( function () {\n      RenderActions.renderedFeatureRegister( self.name );\n    } );\n  }\n\n  this.geometry = new THREE.InstancedBufferGeometry();\n  this.geometry.setAttribute( 'position', this.positions );\n\n  // Define attributes, with default values\n  var defaultAnchor = anchorForName();\n  var defaultClipping = clippingForName( 'pixel' );\n  var attrs = {\n    anchor: new PushList( defaultAnchor.x, defaultAnchor.y,\n      0, 0 ),\n    atlas: new PushList( 0, 0, 0, 0 ),\n    background: new PushList( 255, 255, 255, 0 ),\n    clipping: new PushList( defaultClipping.x, defaultClipping.y ),\n    color: new PushList( 255, 255, 255, 255 ),\n    layout: new PushList( 0, 0, 0 ),\n    normal: new PushList( 0, 0, 1, 100000 ),\n    offset: new PushList( 0, 0, 0, 100000 ),\n    tag: new PushList( 0, 0, 0, 0.2 )\n  };\n\n  // Some attributes need special configuration\n  attrs.background.normalized = true;\n  attrs.color.normalized = true;\n  attrs.normal.dynamic = true;\n  attrs.offset.dynamic = true;\n\n  // Trying to optimize these leads to weird glitches\n  // where labels disappear, so alway create actual attributes\n  // for them\n  attrs.normal.onlyDuplicates = false;\n  attrs.offset.onlyDuplicates = false;\n\n  var anchor, anchorOffset, atlas, background, clipping, color,\n    collapseDistance, drawImmediate, fadeDistance, layout = { x: 0, y: 0, z: 0 },\n    highlightOpacity, offset, props, text;\n\n  var cameraX = camera.position.x;\n  var cameraY = camera.position.y;\n  features.forEach( function ( feature ) {\n    props = feature.properties;\n    if ( feature.tag ) {\n      color = new Color$1( feature.tag );\n    } else {\n      color = new Color$1( 0 );\n    }\n\n    highlightOpacity = props.highlightOpacity !== undefined ?\n      props.highlightOpacity : 0.2;\n    attrs.tag.push( color.r, color.g, color.b, highlightOpacity );\n\n    if ( props.color ) {\n      color = new Color$1( props.color );\n      attrs.color.push( 255 * color.r, 255 * color.g, 255 * color.b, 255 * color.a );\n    } else {\n      attrs.color.pushDefault();\n    }\n\n    if ( props.background ) {\n      background = new Color$1( props.background );\n      attrs.background.push( 255 * background.r, 255 * background.g, 255 * background.b, 255 * background.a );\n    } else if ( props.color ) {\n      // If have no background, use transparent version of colour\n      // to avoid halo due to transparency fading to white\n      attrs.background.push( 255 * color.r, 255 * color.g, 255 * color.b, 0 );\n    } else {\n      attrs.background.push( 255, 255, 255, 0 );\n    }\n\n\n    collapseDistance = props.collapseDistance || 100000;\n    fadeDistance = props.fadeDistance || 100000;\n    offset = geoproject.vectorizeFeature( feature );\n    attrs.offset.push( offset.x, offset.y, offset.z, fadeDistance );\n\n    if ( props.image ) {\n      atlas = self.atlas.addImage( props.image,\n        props.width,\n        props.height );\n      attrs.atlas.push( atlas.x, atlas.y, atlas.z, atlas.w );\n    } else if ( props.name !== undefined ||\n                props.icon !== undefined ) {\n      text = '';\n      if ( props.icon !== undefined ) {\n        text += glyphForIcon( props.icon );\n        if ( props.name !== undefined ) {\n          text += '  ';\n        }\n      }\n\n      if ( props.name !== undefined ) {\n        text += props.name;\n      }\n\n      drawImmediate = Math.abs( cameraX - offset.x ) < 4000 &&\n                      Math.abs( cameraY - offset.y ) < 4000;\n\n      atlas = self.atlas.addText( text, props.fontSize, drawImmediate );\n      attrs.atlas.push( atlas.x, atlas.y, atlas.z, atlas.w );\n    } else {\n      attrs.atlas.pushDefault();\n    }\n\n    if ( props.clipping ) {\n      clipping = clippingForName( props.clipping || 'pixel' );\n    } else {\n      clipping = defaultClipping;\n    }\n\n    attrs.clipping.push( clipping.x, clipping.y );\n\n    anchor = anchorForName( props.anchor );\n    anchorOffset = props.anchorOffset || { x: 0, y: 0 };\n    attrs.anchor.push( anchor.x, anchor.y,\n      parseFloat( anchorOffset.x ) || 0,\n      parseFloat( anchorOffset.y ) || 0 );\n\n    layout.x = props.padding || 0;\n    layout.y = props.borderWidth || 0;\n    layout.z = props.borderRadius || 0;\n    attrs.layout.push( layout.x, layout.y, layout.z );\n\n    // For now, hardcode normal as z = 1\n    //normal = normalAt( offset );\n    //attrs.normal.push( normal.x, normal.y, normal.z, collapseDistance );\n    attrs.normal.push( 0, 0, 1, collapseDistance );\n  } );\n\n  // Atlas processes text in batches, trigger to complete final\n  // one\n  this.atlas.processQueue();\n\n  // TODO, switch Float32Arrays to smaller data types\n  // Apply all atributes to geometry\n  lodash_min.forOwn( attrs, function ( attr, key ) {\n    if ( attr.onlyDuplicates ) {\n      var value = attr.firstValue || attr.defaultValue;\n      if ( attr.normalized ) {\n        value = value.map( function ( v ) { return v / 255.0 } );\n      }\n\n      self.material.defaultAttributeValues[ key ] = value;\n    } else {\n      var TypeArray = ( attr.normalized ? Uint8Array : Float32Array );\n      var bufferAttribute = new THREE.InstancedBufferAttribute(\n        new TypeArray( attr.array ), attr.defaultValue.length,\n        attr.normalized, 1 );\n      if ( attr.dynamic ) {\n        bufferAttribute.setUsage( THREE.DynamicDrawUsage );\n      }\n\n      self.geometry.setAttribute( key, bufferAttribute );\n    }\n  } );\n\n  // Bounding sphere calculations are broken as the position\n  // attribute doesn't contain the label positions but rather\n  // the instance. To workaround, temporarily swap attributes\n  // and calculate\n  var position = this.geometry.attributes.position;\n  this.geometry.attributes.position = this.geometry.attributes.offset;\n  this.geometry.computeBoundingSphere();\n  this.geometry.attributes.position = position;\n\n  // As we don't know the label heights, expand sphere so we are safe\n  this.geometry.boundingSphere.center.z = 2000;\n  const R = this.geometry.boundingSphere.radius;\n  this.geometry.boundingSphere.radius = Math.max( R, 2000 );\n\n  // Do not draw if we do not have any markers\n  this.visible = attrs.offset.array.length > 0;\n\n  var constructTime = track$1.now() - startTime;\n  log$1( 'Parsed', this.name );\n  log$1( 'Blit count', this.atlas.blitCount );\n  track$1.timing( this.name, 'construct', null, constructTime );\n  enqueue( function () {\n    RenderActions.renderedFeatureDisplayed( self.name );\n    features.forEach( function ( feature ) {\n      RenderActions.featureCreated( feature );\n    } );\n  } );\n};\n\nMarkers.prototype.onUpdatedData = function ( state ) {\n  var offsetAttribute = this.geometry.attributes.offset;\n  var normalAttribute = this.geometry.attributes.normal;\n  if ( offsetAttribute === undefined ) { return }\n\n  var offset, i = 0;\n  state.data.forEach( function ( feature ) {\n    offset = geoproject.vectorizeFeature( feature );\n    offsetAttribute.array[ i ] = offset.x;\n    offsetAttribute.array[ i + 1 ] = offset.y;\n    offsetAttribute.array[ i + 2 ] = offset.z;\n    //normal = normalAt( offset );\n    //normalAttribute.array[ i ] = normal.x;\n    //normalAttribute.array[ i + 1 ] = normal.y;\n    //normalAttribute.array[ i + 2 ] = normal.z;\n    normalAttribute.array[ i ] = 0;\n    normalAttribute.array[ i + 1 ] = 0;\n    normalAttribute.array[ i + 2 ] = 1;\n    i += 4;\n  } );\n  offsetAttribute.needsUpdate = true;\n  normalAttribute.needsUpdate = true;\n  // Should use updateBuffer so bufferSubData is used\n};\n\nnew Markers();\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nconst hemisphere = new THREE.SphereBufferGeometry( 0.8 * camera.far , 32, 6, 0, 2 * Math.PI, 0, 0.6 * Math.PI );\nconst m = new THREE.Matrix4();\nm.makeRotationX( Math.PI / 2 );\nhemisphere.applyMatrix4( m );\n\nconst mesh$1 = new THREE.Mesh( hemisphere, material.sky );\nmesh$1.geometry.computeBoundingBox();\nmesh$1.renderOrder = 10000; // Render sky last as often obscured\nscene.add( mesh$1 );\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nvar skyBoxUniforms = {\n  uSkybox: { type: 't', value: null }\n};\n\nvar skySpheremapFragment = new Shader(`precision highp float;\n#define SUN_DISK\nuniform vec3 sunDirection;uniform vec3 betaRM;uniform vec3 betaRnorm;uniform vec3 betaMnorm;uniform vec4 constants;uniform float gamma;uniform float tonemapScale;float a(const float b,const float c){return pow(abs(b),c);}vec3 a(const vec3 b,const vec3 c){return pow(abs(b),c);}vec3 d(const vec3 b){return sqrt(abs(b));}const float e=0.15;const float f=0.50;const float g=0.10;const float h=0.20;const float i=0.02;const float j=0.30;uniform float uTonemapExposureBias;uniform float uTonemapWhiteScale;vec3 k(vec3 b){return ((b*(e*b+g*f)+h*i)/(b*(e*b+f)+h*j))-i/j;}vec3 l(vec3 m){return uTonemapExposureBias*k(uTonemapWhiteScale*m);}vec3 n(vec3 o){float p=max(0.0,o.y);float q=p+a(17.6579343808112+p*260.41830500372932,-1.253);vec3 r=exp(-betaRM/q);float s=dot(o,sunDirection);float t=s+1.0;vec3 u=betaRnorm*(4.0+t*t);vec3 v=betaMnorm*a(constants.y*s+constants.z,-1.5);vec3 w=u+v;vec3 x=a(w*(1.0-r),vec3(1.5));x*=mix(vec3(1.0),d(w*r),constants.w);vec3 y=0.1*r;\n#ifdef SUN_DISK\ny+=constants.x*r*smoothstep(0.9999566769,0.9999766769,s);\n#endif\nvec3 m=0.04*(x+y)+vec3(0.0,0.0003,0.00075);m=l(tonemapScale*m);return a(m,vec3(gamma));}\n#define STEP 0.00048828125\nvoid main(){vec2 z=gl_FragCoord.xy*STEP;vec3 o=2.0*vec3(z-0.5,0.0);float A=min(0.99999,length(o));A=sin(1.5707963267949*A);o=A*normalize(o);o.z=sqrt(max(0.0,1.0-dot(o,o)));vec3 m=n(normalize(o.xzy));gl_FragColor=vec4(m,1.0);}`);\n\nvar quadVertex$1 = new Shader(`attribute vec3 position;void main(){gl_Position=vec4(position,1.0);}`);\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// Renders sky onto plane render target\nvar skyBox = {\n  camera: null,\n  enabled: true,\n  renderTarget: null,\n  scene: new THREE.Scene(),\n  init: function () {\n    var parameters = {\n      format: THREE.RGBFormat,\n      type: ( webgl.render565 ? THREE.UnsignedShort565Type :\n        THREE.UnsignedByteType ),\n      depthBuffer: false,\n      stencilBuffer: false,\n      wrapS: THREE.ClampToEdgeWrapping,\n      wrapT: THREE.ClampToEdgeWrapping\n    };\n\n    // Render quad orthographically\n    skyBox.width = 256; // 256KB of memory (if just using for fog do not need accuracy)\n    skyBox.camera = new THREE.OrthographicCamera( -1, 1, 1, -1, 0, 10000 );\n    skyBox.scene.add( skyBox.camera );\n    skyBox.camera.position.z = 10;\n    skyBox.camera.lookAt( new THREE.Vector3( 0, 0, 0 ) ); // Look up at sky!\n    skyBox.renderTarget = new THREE.WebGLRenderTarget( skyBox.width, skyBox.width, parameters );\n    skyBoxUniforms.uSkybox.value = skyBox.renderTarget.texture;\n\n    var plane = new THREE.PlaneBufferGeometry( 2, 2 );\n    skySpheremapFragment.define( 'STEP', ( 1.0 / skyBox.width ).toExponential() );\n    var material = new THREE.RawShaderMaterial( {\n      name: 'skybox',\n      uniforms: lodash_min.assign( {},\n        skyUniforms,\n        tonemapUniforms\n      ),\n      vertexShader: quadVertex$1.value,\n      fragmentShader: skySpheremapFragment.value\n    } );\n    var quad = new THREE.Mesh( plane, material );\n    skyBox.scene.add( quad );\n\n    // Trigger renders\n    RenderStore$1.listen( function ( state ) {\n      if ( state.env ) { skyBox.process(); }\n    } );\n  },\n  process: function () {\n    renderer.setRenderTarget( skyBox.renderTarget );\n    renderer.render( skyBox.scene, skyBox.camera );\n  }\n};\n\nskyBox.init();\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nclass MapTileGeometry {\n  constructor( dimensions, segments ) {\n    let position = [ 0, 0 ];\n    dimensions = dimensions || [ 1, 1 ];\n    segments = segments || 1;\n\n    let x = position[ 0 ];\n    let y = position[ 1 ];\n    let width = dimensions[ 0 ];\n    let height = dimensions[ 1 ];\n\n    let segments1 = segments + 1;\n    let N1 = segments1 * segments1;\n    let grid = new Array( N1 );\n    let i, j;\n\n    for ( i = 0; i < segments1; i++ ) {\n      for ( j = 0; j < segments1; j++ ) {\n        let n = i * segments1 + j;\n        grid[ n ] = {\n          x: x + i * ( width / segments ),\n          y: y - j * ( height / segments ),\n          uvx: i / segments,\n          uvy: j / segments\n        };\n      }\n    }\n\n    // Define faces\n    let N = 6 * segments * segments;\n\n    {\n      N += 4 * 6 * segments;\n    }\n\n    this.positions = new Float32Array( 4 * N );\n    this.index = new Array( N );\n    let n = 0;\n\n    // Add two triangles (abc, cbd) to the geometry at array offset\n    let addQuad = ( offset, ia, ib, ic, id ) => {\n      // Get four vertices in grid square\n      let a = grid[ ia ];\n      let b = grid[ ib ];\n      let c = grid[ ic ];\n      let d = grid[ id ];\n\n      const stride = 4;\n      // Push into positions attribute buffer\n      let pack = vertex => [ vertex.x, vertex.y, vertex.uvx, vertex.uvy ];\n      this.positions.set( pack( a ), stride * ( offset + 0 ) );\n      this.positions.set( pack( b ), stride * ( offset + 1 ) );\n      this.positions.set( pack( c ), stride * ( offset + 2 ) );\n      this.positions.set( pack( c ), stride * ( offset + 3 ) );\n      this.positions.set( pack( b ), stride * ( offset + 4 ) );\n      this.positions.set( pack( d ), stride * ( offset + 5 ) );\n\n      // Add indices\n      this.index[ offset + 0 ] = ia;\n      this.index[ offset + 1 ] = ib;\n      this.index[ offset + 2 ] = ic;\n      this.index[ offset + 3 ] = ic;\n      this.index[ offset + 4 ] = ib;\n      this.index[ offset + 5 ] = id;\n    };\n\n    for ( i = 0; i < segments; i++ ) {\n      for ( j = 0; j < segments; j++, n++ ) {\n        // Get indices to form square tile\n        let ia = i * segments1 + j;\n        let ib = i * segments1 + j + 1;\n        let ic = ( i + 1 ) * segments1 + j;\n        let id = ( i + 1 ) * segments1 + j + 1;\n        let offset = 6 * n;\n        addQuad( offset, ia, ib, ic, id );\n      }\n    }\n\n    {\n      for ( let skirt = 0; skirt < 4; skirt++ ) {\n        for ( let s = 0; s < segments; s++, n++ ) {\n          if ( skirt === 0 ) {\n            i = 0; j = s; // left\n          } else if ( skirt === 1 ) {\n            i = segments; j = s; // right\n          } else if ( skirt === 2 ) {\n            i = s; j = 0; // top\n          } else if ( skirt === 3 ) {\n            i = s; j = segments; // bottom\n          }\n\n          // Vertices for top of skirt\n          let a, b;\n          if ( skirt < 2 ) {\n            a = grid[ i * segments1 + j ];\n            b = grid[ i * segments1 + j + 1 ];\n          } else {\n            a = grid[ i * segments1 + j ];\n            b = grid[ ( i + 1 ) * segments1 + j ];\n          }\n\n          // Get triangles facing the right way\n          if ( skirt === 0 || skirt === 3 ) {\n            [ a, b ] = [ b, a ];\n          }\n\n          // Vertices that will form base of skirt\n          let c = a;\n          let d = b;\n\n          // Triangles acb, bcd\n          this.positions[ 4 * 6 * n ] = a.x;\n          this.positions[ 4 * 6 * n + 1 ] = a.y;\n          this.positions[ 4 * ( 6 * n + 1 ) ] = b.x;\n          this.positions[ 4 * ( 6 * n + 1 ) + 1 ] = b.y;\n          this.positions[ 4 * ( 6 * n + 2 ) ] = c.x;\n          this.positions[ 4 * ( 6 * n + 2 ) + 1 ] = c.y;\n\n          this.positions[ 4 * ( 6 * n + 3 ) ] = c.x;\n          this.positions[ 4 * ( 6 * n + 3 ) + 1 ] = c.y;\n          this.positions[ 4 * ( 6 * n + 4 ) ] = b.x;\n          this.positions[ 4 * ( 6 * n + 4 ) + 1 ] = b.y;\n          this.positions[ 4 * ( 6 * n + 5 ) ] = d.x;\n          this.positions[ 4 * ( 6 * n + 5 ) + 1 ] = d.y;\n\n          // Put uvs in wz channel of position\n          // For skirt we add 10 to the values\n          this.positions[ 4 * 6 * n + 2 ] = a.uvx;\n          this.positions[ 4 * 6 * n + 3 ] = a.uvy;\n          this.positions[ 4 * ( 6 * n + 1 ) + 2 ] = b.uvx;\n          this.positions[ 4 * ( 6 * n + 1 ) + 3 ] = b.uvy;\n          this.positions[ 4 * ( 6 * n + 2 ) + 2 ] = c.uvx + 10;\n          this.positions[ 4 * ( 6 * n + 2 ) + 3 ] = c.uvy + 10;\n\n          this.positions[ 4 * ( 6 * n + 3 ) + 2 ] = c.uvx + 10;\n          this.positions[ 4 * ( 6 * n + 3 ) + 3 ] = c.uvy + 10;\n          this.positions[ 4 * ( 6 * n + 4 ) + 2 ] = b.uvx;\n          this.positions[ 4 * ( 6 * n + 4 ) + 3 ] = b.uvy;\n          this.positions[ 4 * ( 6 * n + 5 ) + 2 ] = d.uvx + 10;\n          this.positions[ 4 * ( 6 * n + 5 ) + 3 ] = d.uvy + 10;\n        }\n      }\n    }\n\n    // Dump out grid\n    N = grid.length;\n    this.grid = new Float32Array( 4 * N );\n    for ( i = 0; i < N; i++ ) {\n      let v = grid[ i ];\n      this.grid[ 4 * i + 0 ] = v.x;\n      this.grid[ 4 * i + 1 ] = v.y;\n      this.grid[ 4 * i + 2 ] = v.uvx;\n      this.grid[ 4 * i + 3 ] = v.uvy;\n    }\n  }\n}\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\n// Relative scale of terrain and imagery\nconst exponent = 2; // Remember terrain tiles are 512, imagery 256\n\nlet tilePool = [];\nlet idCounter = 1;\n\nclass Tile {\n  // To implement tile pool, use init to setup instance\n  // see `Tile.nextTile` below\n  constructor() {\n    this.id = idCounter++;\n\n    // Hack in listeners here for now\n    const onUpdate = this.refreshIndices.bind( this );\n    ImageryDatasource.addListener( onUpdate );\n    ElevationDatasource.addListener( onUpdate );\n\n    // Default geometry. Will be changed in init() anyway\n    let geometry = Tile.geometry[ 64 ];\n\n    this.offset = new THREE.Vector4( 0, 0, 1, 1 );\n    this.imageryUvOffset = new THREE.Vector4();\n\n    // Create materials and set unchanging uniforms\n    let terrainMaterial = material.terrain( {\n      uOffset: { value: this.offset },\n      uImageryUvOffset: { value: this.imageryUvOffset }\n    } );\n    this.mesh = new THREE.Mesh( geometry, terrainMaterial.imagery );\n    this.pickerMesh = new THREE.Mesh( geometry, terrainMaterial.picker );\n\n    // Configure tile\n    this.init( ...arguments );\n  }\n\n  init( x, y, z ) {\n    if ( isNaN( x ) || isNaN( y ) || isNaN( z ) ) {\n      throw Error( 'Invalid tile initialization' );\n    }\n\n    // Set to true if tile is drawn at least once\n    this.wasSeen = false;\n    this.wasRendered = false;\n\n    // Add to scene so we get drawn (removed again in recycle)\n    scene.add( this.mesh );\n    scene.tilepickerScene.add( this.pickerMesh );\n\n    // x, y, z reference to imagery tile\n    this.x = x;\n    this.y = y;\n    this.z = z;\n\n    // x, y, z reference to elevation tile\n    let exp = Math.max( exponent, this.z - 10 ); // Cap elevation tile level to 10\n    this.x2 = Math.floor( this.x / Math.pow( 2, exp ) );\n    this.y2 = Math.floor( this.y / Math.pow( 2, exp ) );\n    this.z2 = this.z - exp;\n\n    // Update geometry based on terrain resolution\n    // At exp level 0 (max terrain resolution) we want one vertex\n    // per terrain tile pixel (so 512). As tile size is double\n    // of imagery, multiply by 2 to get 1024\n    let segments = 1024 / Math.pow( 2, exp );\n\n    // Cap segment to reasonable range 1-64\n    segments = Math.min( 64, Math.max( 1, segments ) );\n    let geometry = Tile.geometry[ segments ].clone();\n    let pickerGeometry = Tile.geometry[ Math.max( 1, segments / 8 ) ].clone();\n    this.mesh.geometry = geometry;\n    this.pickerMesh.geometry = pickerGeometry;\n\n    // Position on scene\n    this.calculateOffset();\n\n    // Keys to identify imagery and elevation\n    this.imageryKey = tilebelt.tileToQuadkey( [\n      this.x, this.y, this.z ] );\n    this.elevationKey = tilebelt.tileToQuadkey( [\n      this.x2, this.y2, this.z2 ] );\n    this.imageryIndex = 0;\n    this.elevationIndex = 0;\n\n    // Calculate bounding sphere\n    let minH = -200, maxH = 4000; // Guess terrain height\n    let center = new THREE.Vector3(\n      this.offset.x + 0.5 * this.offset.z,\n      this.offset.y - 0.5 * this.offset.z,\n      this.offset.w * 0.5 * ( minH + maxH )\n    );\n    // Radius could be calculated more exactly, assume max\n    // of width and height and then take 3D diagonal\n    let R = Math.max( 0.5 * this.offset.w * ( maxH - minH ), 0.5 * this.offset.z );\n    R *= Math.sqrt( 3 );\n\n    let sphere = new THREE.Sphere( center, R );\n    this.mesh.geometry.boundingSphere = sphere;\n    this.pickerMesh.geometry.boundingSphere = sphere;\n    // TODO, annoying we have to clone geom\n\n    return this;\n  }\n\n  calculateOffset() {\n    const { sceneScale, globalOffset } = GeoprojectStore$1.getState();\n    let scale = Math.pow( 2, 15 - this.z ) * sceneScale;\n    this.offset.set(\n      this.x * scale + globalOffset.x,\n      -this.y * scale + globalOffset.y,\n      scale,\n      this.id ); // Put id here to avoid another uniform\n  }\n\n  // Split into four tiles of next zoom level\n  split() {\n    let children = tilebelt.getChildren( [ this.x, this.y, this.z ] );\n    children = [\n      this.init( ...children[ 0 ] ), // Re-use this as first child\n      Tile.next( ...children[ 1 ] ), // ...and emit 3 more\n      Tile.next( ...children[ 2 ] ),\n      Tile.next( ...children[ 3 ] )\n    ];\n\n    return children;\n  }\n\n  // Grow into parent tile of previous zoom level\n  grow() {\n    this.init( ...tilebelt.getParent( [ this.x, this.y, this.z ] ) );\n    return this;\n  }\n\n  // Shifts tile a set number of units at a given zoom level\n  // (this.z will remain the same)\n  shift( deltaX, deltaY, z ) {\n    if ( z > this.z ) {\n      console.error( 'Cannot shift at zoom level bigger than this.z' );\n    }\n\n    const x = Math.round( this.x + deltaX * Math.pow( 2, this.z - z ) );\n    const y = Math.round( this.y + deltaY * Math.pow( 2, this.z - z ) );\n    this.init( x, y, this.z );\n    return this;\n  }\n\n  recycle() {\n    tilePool.push( this );\n    scene.remove( this.mesh );\n    scene.tilepickerScene.remove( this.pickerMesh );\n  }\n\n  fetchData() {\n    // Don't fetch unless we have drawn this tile to screen\n    // This avoids the situation where a tile is split and\n    // before we even get to draw it it is split again. In\n    // this scenario it is wasteful to download data for\n    // a tile that is unneeded.\n    // Allow an exception for low-res data, so that there\n    // is always something to be drawn\n    if ( this.wasSeen || this.z < 8 ) {\n      ElevationDatasource.fetchIfNeeded( this.elevationKey );\n      ImageryDatasource.fetchIfNeeded( this.imageryKey );\n\n    // Where we are present in scene, but not seen get\n    // get lower resolution data (2 tile levels below),\n    // so as we pan around we don't have gaps\n    } else if ( this.wasRendered && this.z > 10 ) {\n      ImageryDatasource.fetchIfNeeded( this.imageryKey.slice( 0, -2 ) );\n    // To make sure we always have someting to show, get some very\n    // low res data\n    } else {\n      ImageryDatasource.fetchIfNeeded( this.imageryKey.slice( 0, 5 ) );\n      ElevationDatasource.fetchIfNeeded( this.elevationKey.slice( 0, 5 ) );\n    }\n\n    this.refreshIndices();\n  }\n\n  calculateImageryOffset( bestImagery ) {\n    let downsample = bestImagery.quadkey ?\n      this.imageryKey.length - bestImagery.quadkey.length : 0;\n    let downScale = Math.pow( 2, -downsample );\n    let [ x, y ] = bestImagery.quadkey ?\n      tilebelt.quadkeyToTile( bestImagery.quadkey ) :\n      [ this.x, this.y, this.z ];\n    this.imageryUvOffset.set(\n      this.x * downScale - x,\n      this.y * downScale - y,\n      downScale,\n      this.imageryIndex ); // Put imagery index here to avoid another uniform\n  }\n\n  // Sets uniforms to use best available data\n  refreshIndices() {\n    let tile = tilebelt.quadkeyToTile( this.imageryKey );\n    let key = tilebelt.tileToQuadkey( tile );\n    this.elevationIndex = ElevationDatasource.findBestAvailableData( key, true ).index;\n\n    this.bestImagery = ImageryDatasource.findBestAvailableData( this.imageryKey );\n    this.imageryIndex = this.bestImagery.index;\n    this.calculateImageryOffset( this.bestImagery );\n  }\n\n  onSeen() {\n    ElevationDatasource.indexPool.tap( this.elevationIndex );\n    ImageryDatasource.indexPool.tap( this.imageryIndex );\n  }\n}\n\nTile.next = function () {\n  if ( tilePool.length > 0 ) {\n    return tilePool.splice( 0, 1 )[ 0 ].init( ...arguments );\n  } else {\n    return new Tile( ...arguments );\n  }\n};\n\nlet segments = 64;\nTile.geometry = [];\nwhile ( segments >= 1 ) {\n  let geom = new MapTileGeometry( [ 1, 1 ], segments );\n  let bufferGeometry = new THREE.BufferGeometry();\n  bufferGeometry.setAttribute( 'position',\n    new THREE.Float32BufferAttribute( geom.positions, 4 ) );\n  Tile.geometry[ segments ] = bufferGeometry;\n  segments /= 2;\n}\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nlet x, y, z;\nconst baseZ = 5;\nconst tileDelta = new THREE.Vector2();\nlet shiftThreshold = Infinity;\nPlacesStore$1.listen( ( { currentPlace } ) => {\n  [ x, y, z ] = tilebelt.pointToTileFraction(\n    ApiUtils.snap( currentPlace.longitude ),\n    ApiUtils.snap( currentPlace.latitude ),\n    baseZ );\n  const W = GeoprojectStore$1.getState().sceneScale;\n  shiftThreshold = 0.6 * W * Math.pow( 2, 15 - baseZ );\n  x = Math.floor( x ); y = Math.floor( y );\n\n  // TODO don't create scene everytime location changes\n  createScene();\n} );\n\nlet tiles = [];\n\nlet framesSinceSeen = {};\nlet frame = 0;\nlet projectedDistance = null;\n\n// At start want to cut up terrain as quickly as possible\nlet pipelinePicker = false;\nlet projectionMatrix;\nfunction draw() {\n  if ( tiles.length === 0 ) { return }\n  frame++;\n\n  let tilesSeen = new Set(); // All tiles we see\n  let toSplit = new Set(); // Tiles whose detail is too low\n  let toCombine = new Set(); // Tiles whose detail is too high\n  let toCombineGroups = {};\n\n  // Picker render staggered over frames\n  // Render, wait, read, process\n  // The biggest issue appears to be the pipeline stalling if we try to\n  // read too early after rendering. Once this is fixed then splitting\n  // the read up doesn't seem to offer benefits.\n  let sliceN = 1; // Number of slices to split picker read into\n  let waitFrames = 4; // How many frames to wait between render and read\n  let skipFrames = 1; // How many frames to skip between reads (2 means skip 1 frame, 3 = skip 2 etc)\n  const N = 1 + waitFrames + skipFrames * sliceN + 1;\n  let frameN = frame % N;\n  let doPickerRender = frameN === 0;\n  // Read out results at a later frame (pipelining)\n  let doPickerRead = ( frameN - 1 - waitFrames ) % skipFrames === 0 &&\n    frameN > waitFrames && frameN < 1 + waitFrames + skipFrames * sliceN;\n  let doPickerProcess = frameN === ( N - 1 );\n\n  if ( !pipelinePicker ) {\n    doPickerRender = true;\n    doPickerRead = true;\n    doPickerProcess = true;\n    sliceN = 1;\n  }\n\n  if ( doPickerRender ) {\n\n    // Normal render\n    renderer.setRenderTarget( TilePicker.target );\n    renderer.clear( true, true, true );\n    renderer.render( scene.tilepickerScene, camera );\n    renderer.setRenderTarget( null );\n\n    // Get matrix at point of render so it matches what\n    // is in the render target\n    projectionMatrix = camera.projectionMatrix.elements;\n  }\n\n  if ( doPickerRead ) {\n\n    // Grab pixels\n    let slice = pipelinePicker ? ( frameN - 1 - waitFrames ) / skipFrames : 0;\n    let bytesPerSlice = 4 * TilePicker.target.width * TilePicker.target.height / sliceN;\n    let view = new Uint8Array( TilePicker.data.buffer,\n      slice * bytesPerSlice, bytesPerSlice );\n    renderer.readRenderTargetPixels( TilePicker.target,\n      0, slice * TilePicker.target.height / sliceN,\n      TilePicker.target.width, TilePicker.target.height / sliceN,\n      view );\n    renderer.setRenderTarget( null );\n  }\n\n  if ( doPickerProcess ) {\n    let pickedTile, terrainError;\n\n    // Get center pixel and extract distance\n    let p = 2 * ( TilePicker.target.width + TilePicker.target.width * TilePicker.target.height );\n    p = Math.round( p );\n    let fragZ = 256 * TilePicker.data[ p + 2 ] + TilePicker.data[ p + 3 ];\n    fragZ /= 256.0 * 255.0;\n    projectedDistance = projectionMatrix[ 14 ] / ( 2 * fragZ - 1.0 + projectionMatrix[ 10 ] );\n    CameraStore$1.getState().controls.setDistanceToTarget( projectedDistance );\n\n    let pl = TilePicker.data.length;\n    for ( p = 0; p < pl; p += 4 ) {\n      pickedTile = 256 * TilePicker.data[ p ] + TilePicker.data[ p + 1 ];\n      terrainError = ( TilePicker.data[ p + 3 ] / 255 ); // range 0-1\n      terrainError = 10 * terrainError - 5; // re-bias to -5 > 5\n\n      if ( pickedTile === 0 ) {\n        // Missed tile, ignore\n        continue;\n      }\n\n      // Debug, check tile exists!\n      let tile = tiles.find( x => x.id === pickedTile );\n      if ( tile === undefined ) { continue }\n\n      // terrainError of 0 is 1:1 pixel:texel\n      if ( terrainError < ( window.minError || -1.5 ) && tile.z < 18 ) {\n        toSplit.add( tile );\n        tilesSeen.add( tile );\n      } else if ( terrainError > ( window.maxError || 0 ) && tile.z > 7 ) {\n        toCombine.add( tile );\n      } else {\n        tilesSeen.add( tile );\n      }\n    }\n    tiles.forEach( tile => {\n      if ( framesSinceSeen[ tile.imageryKey ] === undefined ) {\n        framesSinceSeen[ tile.imageryKey ] = 0;\n      }\n\n      if ( tilesSeen.has( tile ) ) {\n        framesSinceSeen[ tile.imageryKey ] = 0;\n      } else {\n        let frames = framesSinceSeen[ tile.imageryKey ]++;\n        if ( frames > 5 ) { toCombine.add( tile ); }\n      }\n    } );\n\n    // Remove any common tiles to reduce flicker\n    let commonTiles = new Set( [ ...toCombine ].filter( x => toSplit.has( x ) ) );\n    // Don't combine tiles that hae been marked as normally visible,\n    // as if we combine them they will split again right away\n    toCombine = new Set( [ ...toCombine ].filter( x =>\n      !commonTiles.has( x ) && !tilesSeen.has( x ) ) );\n    // Equally it doesn't make sense to split a tile that is also\n    // marked to be combined\n    toSplit = new Set( [ ...toSplit ].filter( x => !commonTiles.has( x ) ) );\n\n    // Mark tiles which have been seen & rendered\n    [ ...tilesSeen ].filter( x => !toSplit.has( x ) )\n      .forEach( tile => tile.wasSeen = true );\n    [ ...tiles ].filter( x => !toSplit.has( x ) )\n      .forEach( tile => tile.wasRendered = true );\n\n    // Group combine tiles\n    toCombine.forEach( tile => {\n      let parentKey = tile.imageryKey.slice( 0, -1 );\n      if ( toCombineGroups[ parentKey ] === undefined ) {\n        toCombineGroups[ parentKey ] = new Set( [ tile ] );\n      } else {\n        toCombineGroups[ parentKey ].add( tile );\n      }\n    } );\n\n    // Split tile by modifying it to become the first child and\n    // then adding the new 3 tiles\n    toSplit.forEach( tile => {\n      if ( window.noSplit ) return;\n      let newTiles = tile.split();\n      newTiles.forEach( t => t.fetchData() );\n      tiles.push( ...newTiles.splice( 1, 3 ) );\n    } );\n\n    // We've reached the right size, so start more efficient\n    // pipelining of picker routine\n    if ( toSplit.size === 0 ) { pipelinePicker = true; }\n\n    // Combine tiles by modifying the first tile in group\n    // to become parent, and recycling the others\n    Object.values( toCombineGroups ).forEach( group => {\n      if ( group.size !== 4 ) { return }\n\n      let array = [ ...group ];\n      let tile0 = array[ 0 ];\n      let tiles1to3 = array.splice( 1, 3 );\n\n      delete framesSinceSeen[ tile0.imageryKey ];\n      tile0.grow().fetchData();\n\n      tiles1to3.forEach( tile => {\n        let i = tiles.indexOf( tile );\n        tiles.splice( i, 1 );\n        delete framesSinceSeen[ tile.imageryKey ];\n        tile.recycle();\n      } );\n    } );\n\n    // When tiles get too far from the camera, shift them around\n    // to fill the terrain where it ends. This way we give the\n    // illusion that the landscape is infinite\n    const target = CameraStore$1.getState().target;\n    tiles.forEach( tile => {\n      tileDelta.copy( tile.mesh.geometry.boundingSphere.center );\n      tileDelta.sub( target );\n      const deltaX = Math.abs( tileDelta.x ) > shiftThreshold ?\n        -Math.sign( tileDelta.x ) : 0;\n      const deltaY = Math.abs( tileDelta.y ) > shiftThreshold ?\n        Math.sign( tileDelta.y ) : 0;\n      if ( deltaX || deltaY ) {\n        tile.shift( deltaX, deltaY, baseZ );\n        tile.fetchData();\n      }\n    } );\n\n    // Finally check if any tiles are low-res and need better data\n    tiles.filter( t => t.bestImagery.downsample > 0 )\n      .forEach( t => t.fetchData() );\n\n    // Notify tiles that they are being seen\n    tiles.forEach( tile => {\n      if ( framesSinceSeen[ tile.imageryKey ] < 10 ) {\n        tile.onSeen();\n      }\n    } );\n  }\n\n  // Update tiles if we have imagery changes\n  if ( ImageryDatasource.hasUpdates ) {\n    ImageryDatasource.broadcastUpdate();\n  }\n\n  if ( ElevationDatasource.hasUpdates ) {\n    ElevationDatasource.broadcastUpdate();\n  }\n}\n\nfunction createScene() {\n  tiles.forEach( ( tile ) => tile.recycle() );\n  tiles = [];\n  tiles.push( Tile.next( x, y, z ) );\n  let newTiles = tiles[ 0 ].split();\n  tiles.push( ...newTiles.splice( 1, 3 ) );\n  tiles.forEach( tile => tile.fetchData() );\n}\n\nRenderStore$1.listen( draw );\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nvar container = ContainerStore$1.getState().element;\nvar app = {\n  mouse: { x: 0, y: 0 },\n  init: function () {\n    var raycastMouse = function () {\n      // Convert to raycasting coordinate space\n      var vector = ContainerStore$1.toClipSpace( app.mouse );\n\n      var zoomArea = 0.2;\n      var shouldZoom = Math.abs( vector.x ) < zoomArea && Math.abs( vector.y ) < zoomArea;\n      // If more or less tapping on where we are, interpret as zoom\n      if ( shouldZoom ) {\n        UserActions.doubleTapZoom();\n        return;\n      }\n\n      // ...otherwise as pan\n      var p = picker.raycastTerrain( app.mouse );\n      if ( Math.abs( p.x ) < 7500 && Math.abs( p.y ) < 7500 ) {\n        UserActions.focusOnTarget( p );\n      }\n    };\n\n    var raycastFeature = function () {\n      return picker.pickFeature( app.mouse );\n    };\n    var updateMouse = function ( e ) {\n      var userInput = UserInputStore$1.getState();\n      if ( userInput.interacting ) {\n        return;\n      }\n\n      // Reliably get mouse position across browsers\n      var target = e.srcElement,\n        rect = target.getBoundingClientRect(),\n        offsetX = e.clientX || e.pageX,\n        offsetY = e.clientY || e.pageY;\n      offsetX -= rect.left,\n      offsetY -= rect.top;\n      if ( isNaN( offsetX ) || isNaN( offsetY ) ) {\n        // Ignore events without coordinates (e.g. touchend)\n        return;\n      }\n\n      app.mouse = { x: offsetX, y: offsetY };\n\n      // Disable raycasting for now\n      return; // Get spurious errors with this enabled\n    };\n\n    var isTouchCapable = 'ontouchstart' in window ||\n       window.DocumentTouch && document instanceof window.DocumentTouch ||\n       navigator.maxTouchPoints > 0 ||\n       window.navigator.msMaxTouchPoints > 0;\n    if ( !isTouchCapable ) {\n      container.addEventListener( 'mousemove', function ( e ) {\n        updateMouse( e );\n      } );\n    }\n\n    // Handle container clicks\n    var onContainerClick = e => {\n      if ( e.detail === 2 ) {\n        // On double click\n        raycastMouse();\n      } else {\n        var feature = raycastFeature();\n        if ( feature ) { UserActions.featureClicked( feature ); }\n      }\n\n      return true;\n    };\n\n    const controls = CameraStore$1.getState().controls;\n    controls.addEventListener( 'click', e => {\n      updateMouse( e );\n      onContainerClick( e );\n    } );\n  }\n};\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nfunction bindToVisible ( parameter ) {\n  return function ( state ) {\n    this.setState( { visible: state[ parameter ] } );\n  };\n}\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nvar UserInterfaceStore = SetterStore( [\n  [ ConfigActions.setCameraModeControlVisible ],\n  [ ConfigActions.setCompassVisible ],\n  [ ConfigActions.setLayersControlVisible ],\n  [ ConfigActions.setRotationControlVisible ],\n  [ ConfigActions.setSeasonControlVisible ],\n  [ UserActions.setSecondaryParams ],\n  [ ConfigActions.setUserLocationControlVisible ],\n  [ ConfigActions.setZoomControlVisible ]\n] );\nUserInterfaceStore.displayName = 'UserInterfaceStore';\nvar UserInterfaceStore$1 = alt.createStore( UserInterfaceStore );\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nvar height$1 = 14;\nvar width$1 = 4;\nvar padding = 3;\nvar style = {\n  position: 'absolute',\n  top: 9, left: 11,\n  padding: padding + 'px ' + ( padding + height$1 - width$1 ) + 'px',\n  border: '1px solid white',\n  borderRadius: 2 * ( height$1 + padding ),\n  backgroundColor: '#333542'\n};\n\nvar b = 'solid ' + width$1 + 'px transparent';\nvar north = {\n  borderBottom: 'solid ' + height$1 + 'px #b33330',\n  borderLeft: b, borderRight: b\n};\nvar south = {\n  borderTop: 'solid ' + height$1 + 'px #cccccc',\n  borderLeft: b, borderRight: b\n};\nvar direction$1 = new THREE.Vector3();\nvar Compass = React.createClass( {displayName: 'Compass',\n  getInitialState: function () {\n    return {\n      azimuth: 0,\n      visible: UserInterfaceStore$1.getState().compassVisible\n    };\n  },\n  componentDidMount: function () {\n    CameraStore$1.listen( this.onStoreChange );\n    UserInterfaceStore$1.listen( bindToVisible( 'compassVisible' ).bind( this ) );\n  },\n  onStoreChange: function ( storeState ) {\n    direction$1.subVectors( storeState.position, storeState.target );\n    var azimuth = 0.5 * Math.PI + Math.atan2( direction$1.y, direction$1.x );\n\n    // Round so we don't constantly update with tiny changes\n    azimuth = 0.01 * Math.round( azimuth * 100 );\n    this.setState( { azimuth: azimuth } );\n  },\n  shouldComponentUpdate: function ( nextProps, nextState ) {\n    return this.state.azimuth !== nextState.azimuth ||\n           this.state.visible !== nextState.visible;\n  },\n  render: function () {\n    if ( this.state.visible === false ) { return null; }\n    style.transform = 'rotate(' + this.state.azimuth + 'rad) translateZ(0)';\n    return (\n      React.createElement('div', { className: \"compass\",\n           style: Object.assign({}, style),}\n        , React.createElement('div', { style: north,})\n        , React.createElement('div', { style: south,})\n      )\n      );\n  }\n} );\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// So we can inline the styles wrapping the engine, use this simple\n// component, to wrap other parts of app\nvar Container = React.createClass( {displayName: 'Container',\n  render: function () {\n    var outerStyle = {\n      position: 'relative',\n      height: '100%',\n      overflow: 'hidden'\n    };\n    var innerStyle = {\n      fontSize: '14px',\n      color: '#fff',\n      position: 'absolute',\n      top: 0,\n      bottom: 0,\n      left: 0,\n      right: 0\n    };\n    return (\n      React.createElement('div', { style: outerStyle,}\n        , React.createElement('div', { id: \"container\", style: innerStyle,}\n          , this.props.children\n        )\n      )\n    );\n  }\n} );\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nconst style$1 = {\n  position : 'absolute',\n  bottom : 0, right: 0,\n  paddingTop: 1, paddingBottom: 1, paddingLeft: 4, paddingRight: 4,\n  fontFamily : uiFont,\n  textAlign : 'right',\n  textTransform : 'none',\n  color : 'white',\n  background: 'rgba( 255, 255, 255, 0.1 )'\n};\nconst pStyle = { color: 'white', fontSize : '6pt', margin: 0 };\n\nconst Credits = React.createClass( {displayName: 'Credits',\n  getInitialState: () => AppStore$1.getState().datasource,\n  componentDidMount: function () {\n    AppStore$1.listen( this.onStoreChange );\n    this.onStoreChange( AppStore$1.getState() );\n  },\n  onStoreChange: function ( { datasource } ) {\n    this.setState( datasource );\n  },\n  render: function () {\n    let credits = [];\n    if ( this.state.elevation && this.state.elevation.attribution ) {\n      credits.push( this.state.elevation.attribution );\n    }\n    if ( this.state.imagery && this.state.imagery.attribution ) {\n      credits.push( this.state.imagery.attribution );\n    }\n\n    // Inject link styles\n    let aStyle = `color: ${pStyle.color}; font-size: ${pStyle.fontSize}; margin: ${pStyle.margin}; text-decoration: underline;`;\n    credits = credits.map( credit =>\n      credit.replace( /<a href=/g, '<a ' + 'style=\"' + aStyle + '\" href=' )\n    );\n\n    return (\n      React.createElement('div', { className: \"credits\", style: style$1,}\n        , React.createElement('p', { style: pStyle,}, \"Data: \" ,  credits.map( credit =>\n          React.createElement(React.Fragment, null\n            , React.createElement('span', { dangerouslySetInnerHTML: { __html: credit },})\n            , React.createElement('span', null, \" \" )\n          ) ) \n        )\n      )\n    );\n  }\n} );\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nfunction ErrorStore() {\n  this.message = null;\n  this.displayErrors = true;\n  this.bindListeners( {\n    clearError: UserActions.setCurrentPlace,\n    fatalError: RenderActions.fatalError,\n    setDisplayErrors: ConfigActions.setDisplayErrors\n  } );\n}\n\nErrorStore.prototype.clearError = function () {\n  this.message = null;\n};\n\nErrorStore.prototype.fatalError = function ( message ) {\n  this.message = message;\n};\n\nErrorStore.prototype.setDisplayErrors = function ( value ) {\n  this.displayErrors = value;\n};\n\nErrorStore.displayName = 'ErrorStore';\nvar ErrorStore$1 = alt.createStore( ErrorStore );\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nvar container$1 = ContainerStore$1.getState().element;\nvar Engine = React.createClass( {displayName: 'Engine',\n  componentDidMount: function () {\n    var domNode = this.base || this.getDOMNode();\n    domNode.appendChild( container$1 );\n    container$1.appendChild( renderer.domElement );\n    setTimeout( function () { RenderActions.containerMounted(); }, 0 );\n    ErrorStore$1.listen( this.onError );\n    this.setState( this.getInitialState() );\n  },\n  getInitialState: function () {\n    return { error: ErrorStore$1.getState().message }\n  },\n  onError: function ( state ) {\n    if ( state.displayErrors ) {\n      this.setState( { error: state.message } );\n    }\n  },\n  render: function () {\n    var style = {\n      width: '100%',\n      height: '100%',\n      touchAction: 'none'\n    };\n    if ( this.state.error ) {\n      var errorContainerStyle = {\n        position: 'absolute',\n        width: '100%',\n        height: '100%',\n        zIndex: 10,\n        background: 'black',\n      };\n      var errorStyle = {\n        padding: 10,\n        textAlign: 'center'\n      };\n      return (\n        React.createElement('div', { style: style,}\n          , React.createElement('div', { style: errorContainerStyle,}\n            , React.createElement('h2', { style: errorStyle,}, \"Error\")\n            , React.createElement('p', { style: errorStyle,}, this.state.error)\n          )\n        )\n      );\n    }\n    return React.createElement('div', { style: style,});\n  }\n} );\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nvar defaultStyle = {\n  border: '1px solid white',\n  margin: 4,\n  color: 'white',\n  width: 36,\n  height: 36,\n  lineHeight: '32px',\n  textAlign: 'center',\n  padding: 0,\n  borderRadius: 18,\n  backgroundColor: '#333542',\n  outline: 'none',\n  WebkitTransition: 'background-color 0.5s',\n  transition: 'background-color 0.5s',\n  cursor: 'pointer',\n};\nvar hoverStyle = {\n  backgroundColor: 'rgba(97, 97, 97, 0.5)'\n};\n\nvar Button = React.createClass( {displayName: 'Button',\n  getInitialState: function () { return { hover: false }; },\n  mouseOver: function () { this.setState( { hover: true } ); },\n  mouseOut: function () { this.setState( { hover: false } ); },\n  render: function () {\n    var style = Object.assign( {},\n      defaultStyle, \n      this.state.hover ? hoverStyle : undefined,\n      this.props.style\n    );\n    return (\n      React.createElement('button', { className: this.props.icon, \n              onClick: this.props.action,\n              onMouseOver: this.mouseOver,\n              onMouseOut: this.mouseOut,\n              style: style,}, this.props.text)\n    );\n  }\n} );\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nvar ButtonRow = React.createClass( {displayName: 'ButtonRow',\n  render: function () {\n    var buttons = this.props.buttons.map( function ( b ) {\n      return React.createElement(Button, { action: b.action, icon: b.icon, text: b.text,})\n    } );\n\n    return React.createElement('div', null, buttons)\n  }\n} );\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\n// Listen for geolocation\nvar userLocation = null;\nvar registered = false;\nif ( 'geolocation' in navigator ) {\n  var toggleTracking = function () {\n    if ( !registered ) {\n      navigator.geolocation.watchPosition( CurrentLocationActions.panToPosition );\n      registered = true;\n    }\n\n    CurrentLocationActions.toggleTracking();\n  };\n  userLocation = {\n    icon : 'b1 fa fa-location-arrow',\n    action : toggleTracking\n  };\n}\n\nvar EngineControlsBottom = React.createClass( {displayName: 'EngineControlsBottom',\n  getInitialState: function () {\n    return UserInterfaceStore$1.getState();\n  },\n  componentDidMount: function () {\n    UserInterfaceStore$1.listen( this.onStoreChange );\n    this.setState( this.getInitialState() );\n  },\n  onStoreChange: function ( storeState ) {\n    this.setState( storeState );\n  },\n  shouldComponentUpdate: function ( nextProps, nextState ) {\n    return this.state.userLocationControlVisible !== nextState.userLocationControlVisible;\n  },\n  render: function () {\n    var buttons = [];\n    if ( this.state.userLocationControlVisible ) {\n      buttons.push( React.createElement(ButtonRow, { className: \"engine-controls-user-location\", buttons: [userLocation],}) );\n    }\n    var style = {\n      position: 'absolute',\n      top: 'initial',\n      bottom: 15,\n      right: 8\n    };\n    return (\n      React.createElement('div', { style: style, className: \"engine-controls bottom\" ,}\n        , buttons\n      )\n    );\n  }\n} );\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nvar zoomButtons = [\n  { icon : 'b1 fa fa-minus', action : UserActions.zoomOut },\n  { icon : 'b1 fa fa-plus', action : UserActions.zoomIn }\n];\nvar camButtons = [\n  { text : '2D',\n    action : function () {\n      UserActions.setCameraMode( '2D' );\n      UserActions.setTerrainEffectContours();\n    }\n  },\n  { text : '3D',\n    action : function () {\n      UserActions.setCameraMode( '3D' );\n      UserActions.setTerrainEffectNone();\n    }\n  },\n];\nvar rotateButtons = [\n  { icon : 'b1 fa fa-rotate-right', action : UserActions.rotateRight },\n  { icon : 'b1 fa fa-rotate-left', action : UserActions.rotateLeft }\n];\n\nvar EngineControlsTop = React.createClass( {displayName: 'EngineControlsTop',\n  getInitialState: function () {\n    return UserInterfaceStore$1.getState();\n  },\n  componentDidMount: function () {\n    UserInterfaceStore$1.listen( this.onStoreChange );\n    this.setState( this.getInitialState() );\n  },\n  onStoreChange: function ( storeState ) {\n    this.setState( storeState );\n  },\n  shouldComponentUpdate: function ( nextProps, nextState ) {\n    return this.state.cameraModeControlVisible !== nextState.cameraModeControlVisible ||\n           this.state.rotationControlVisible !== nextState.rotationControlVisible ||\n           this.state.zoomControlVisible !== nextState.zoomControlVisible;\n  },\n  render: function () {\n    var buttons = [];\n    if ( this.state.zoomControlVisible ) {\n      buttons.push( React.createElement(ButtonRow, { className: \"engine-controls-zoom\", buttons: zoomButtons,}) );\n    }\n    if ( this.state.cameraModeControlVisible ) {\n      buttons.push( React.createElement(ButtonRow, { className: \"engine-controls-cam\", buttons: camButtons,}) );\n    }\n    if ( this.state.rotationControlVisible ) {\n      buttons.push( React.createElement(ButtonRow, { className: \"engine-controls-rotate\", buttons: rotateButtons,}) );\n    }\n    var style = {\n      position: 'absolute',\n      top: 6,\n      right: 8\n    };\n    return (\n      React.createElement('div', { style: style, className: \"engine-controls\",}\n        , buttons\n      )\n    );\n  }\n} );\n\nvar logo = \"url(\\\"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect x='34.32' y='1.52' width='57.03' height='57.03' fill='%23fff'/><rect x='34.32' y='69.96' width='28.52' height='28.52' fill='%23fff'/><rect x='8.65' y='69.96' width='14.26' height='14.26' fill='%23fff'/><rect x='15.78' y='51.43' width='7.13' height='7.13' fill='%23fff'/></svg>\\\")\\n\";\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nvar PoweredBy = React.createClass( {displayName: 'PoweredBy',\n  render: function () {\n    var containerStyle = {\n      position : 'absolute',\n      padding : '11px 8px',\n      bottom : 0,\n      opacity : 0.9,\n      WebkitTouchCallout : 'none',\n      WebkitUserSelect : 'none',\n      KhtmlUserSelect : 'none',\n      MozUserSelect : 'none',\n      MsUserSelect : 'none',\n      userSelect : 'none'\n    };\n    var logoStyle = {\n      backgroundImage: logo,\n      backgroundRepeat: 'no-repeat',\n      display: 'block',\n      height: 40,\n      width: 40\n    };\n    var link = 'https://github.com/felixpalmer/procedural-gl-js';\n    return (\n      React.createElement('div', { className: \"powered-by\", style: containerStyle,}\n        , React.createElement('a', { href: link, target: \"_blank\", style: logoStyle,})\n      )\n      );\n  }\n} );\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\n// Root React component\nvar App = React.createClass( {displayName: 'App',\n  render: function () {\n    return (\n      React.createElement(Container, null\n        , React.createElement(Engine, null)\n        , React.createElement(Credits, null)\n        , React.createElement(EngineControlsTop, null)\n        , React.createElement(EngineControlsBottom, null)\n        , React.createElement(Compass, null)\n        , React.createElement(PoweredBy, null)\n      )\n    );\n  }\n} );\n\nvar renderApp = function ( state ) {\n  if ( state.appContainer ) {\n    React.render( React.createElement(App, null), state.appContainer );\n  }\n};\nAppStore$1.listen( renderApp );\n\nConfigActions.configureCamera( {\n  minDistance: 500,\n  minHeight: 250,\n  zoomInDuration: 0.8,\n  zoomOutDuration: 1\n} );\n\napp.init();\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n/*global '1.0.17'*/\nconsole.log( 'Procedural v' + '1.0.17' );\n\n// Re-export public API\nconst Procedural$9 = {\n  ...Procedural,\n  ...Procedural$1,\n  ...Procedural$2,\n  ...Procedural$3,\n  ...Procedural$4,\n  ...Procedural$5,\n  ...Procedural$6,\n  ...Procedural$7,\n  ...Procedural$8\n};\n\n// Proxy through setters as destructing won't pass these through\nlet listeners = [\n  'onFeatureClicked',\n  'onFeatureSelected',\n  'onOverlayAdded'\n];\nfor ( let l of listeners ) {\n  Object.defineProperty( Procedural$9, l, {\n    set: fn => Procedural$5[ l ] = fn\n  } );\n}\n\nlisteners = [\n  'onCameraChange'\n];\nfor ( let l of listeners ) {\n  Object.defineProperty( Procedural$9, l, {\n    set: fn => Procedural[ l ] = fn\n  } );\n}\n\nlisteners = [\n  'onBoundsFocused',\n  'onLocationError',\n  'onLocationFocused',\n  'onLocationLoaded',\n  'onUserInteraction'\n];\nfor ( let l of listeners ) {\n  Object.defineProperty( Procedural$9, l, {\n    set: fn => Procedural$2[ l ] = fn\n  } );\n}\n\nexport default Procedural$9;\n"]},"metadata":{},"sourceType":"module"}